{"version":3,"file":"src_api_gramjs_worker_worker_ts-src_util_Deferred_ts-src_util_emoji_parseEmojiOnlyString_ts-n-0abdd2.5745f16b5d70a3c1f5ef.js","mappings":"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ACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEyH;;;;;;;UCvLzH;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;;;;WCrCA;WACA;WACA;WACA;WACA,+BAA+B,wCAAwC;WACvE;WACA;WACA;WACA;WACA,iBAAiB,qBAAqB;WACtC;WACA;WACA,kBAAkB,qBAAqB;WACvC;WACA;WACA,KAAK;WACL;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WC3BA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;;;;;WCRA;WACA;WACA;WACA,8BAA8B,2WAA2W;WACzY;;;;;WCJA;WACA;WACA;WACA;WACA;;;;;WCJA;WACA;WACA;WACA;WACA,GAAG;WACH;WACA;WACA,CAAC;;;;;WCPD;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;WCNA;WACA;WACA;WACA;WACA;;;;;WCJA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WClBA;;WAEA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,aAAa;WACb;WACA;WACA;WACA;;WAEA;WACA;WACA;;WAEA;;WAEA;;;;;WCpCA;WACA;WACA;WACA;;;;;UEHA;UACA","sources":["webpack://telegram-t/./src/api/gramjs/ChatAbortController.ts","webpack://telegram-t/./src/api/gramjs/apiBuilders/appConfig.ts","webpack://telegram-t/./src/api/gramjs/apiBuilders/bots.ts","webpack://telegram-t/./src/api/gramjs/apiBuilders/business.ts","webpack://telegram-t/./src/api/gramjs/apiBuilders/chats.ts","webpack://telegram-t/./src/api/gramjs/apiBuilders/misc.ts","webpack://telegram-t/./src/api/gramjs/apiBuilders/payments.ts","webpack://telegram-t/./src/api/gramjs/apiBuilders/statistics.ts","webpack://telegram-t/./src/api/gramjs/apiBuilders/stories.ts","webpack://telegram-t/./src/api/gramjs/apiBuilders/users.ts","webpack://telegram-t/./src/api/gramjs/methods/account.ts","webpack://telegram-t/./src/api/gramjs/methods/auth.ts","webpack://telegram-t/./src/api/gramjs/methods/bots.ts","webpack://telegram-t/./src/api/gramjs/methods/calls.ts","webpack://telegram-t/./src/api/gramjs/methods/chats.ts","webpack://telegram-t/./src/api/gramjs/methods/client.ts","webpack://telegram-t/./src/api/gramjs/methods/fragment.ts","webpack://telegram-t/./src/api/gramjs/methods/index.ts","webpack://telegram-t/./src/api/gramjs/methods/init.ts","webpack://telegram-t/./src/api/gramjs/methods/management.ts","webpack://telegram-t/./src/api/gramjs/methods/media.ts","webpack://telegram-t/./src/api/gramjs/methods/messages.ts","webpack://telegram-t/./src/api/gramjs/methods/payments.ts","webpack://telegram-t/./src/api/gramjs/methods/phoneCallState.ts","webpack://telegram-t/./src/api/gramjs/methods/reactions.ts","webpack://telegram-t/./src/api/gramjs/methods/settings.ts","webpack://telegram-t/./src/api/gramjs/methods/statistics.ts","webpack://telegram-t/./src/api/gramjs/methods/stories.ts","webpack://telegram-t/./src/api/gramjs/methods/symbols.ts","webpack://telegram-t/./src/api/gramjs/methods/twoFaSettings.ts","webpack://telegram-t/./src/api/gramjs/methods/users.ts","webpack://telegram-t/./src/api/gramjs/scheduleUnmute.ts","webpack://telegram-t/./src/api/gramjs/updates/UpdatePts.ts","webpack://telegram-t/./src/api/gramjs/updates/updateManager.ts","webpack://telegram-t/./src/api/gramjs/updates/updater.ts","webpack://telegram-t/./src/api/gramjs/worker/worker.ts","webpack://telegram-t/./src/api/types/index.ts","webpack://telegram-t/./src/api/types/media.ts","webpack://telegram-t/./src/api/types/messages.ts","webpack://telegram-t/./src/lib/twemojiRegex.js","webpack://telegram-t/./src/util/Deferred.ts","webpack://telegram-t/./src/util/SortedQueue.ts","webpack://telegram-t/./src/util/cacheApi.ts","webpack://telegram-t/./src/util/debugConsole.ts","webpack://telegram-t/./src/util/emoji/fixNonStandardEmoji.ts","webpack://telegram-t/./src/util/emoji/parseEmojiOnlyString.ts","webpack://telegram-t/./src/util/files.ts","webpack://telegram-t/./src/util/iteratees.ts","webpack://telegram-t/./src/util/messageKey.ts","webpack://telegram-t/./src/util/schedulers.ts","webpack://telegram-t/./src/util/serverTime.ts","webpack://telegram-t/./src/util/waveform.ts","webpack://telegram-t/./node_modules/idb-keyval/dist/index.js","webpack://telegram-t/webpack/bootstrap","webpack://telegram-t/webpack/runtime/chunk loaded","webpack://telegram-t/webpack/runtime/compat get default export","webpack://telegram-t/webpack/runtime/define property getters","webpack://telegram-t/webpack/runtime/ensure chunk","webpack://telegram-t/webpack/runtime/get javascript chunk filename","webpack://telegram-t/webpack/runtime/get mini-css chunk filename","webpack://telegram-t/webpack/runtime/global","webpack://telegram-t/webpack/runtime/hasOwnProperty shorthand","webpack://telegram-t/webpack/runtime/make namespace object","webpack://telegram-t/webpack/runtime/node module decorator","webpack://telegram-t/webpack/runtime/publicPath","webpack://telegram-t/webpack/runtime/importScripts chunk loading","webpack://telegram-t/webpack/runtime/startup chunk dependencies","webpack://telegram-t/webpack/before-startup","webpack://telegram-t/webpack/startup","webpack://telegram-t/webpack/after-startup"],"sourcesContent":["import type { ThreadId } from '../../types';\n\nexport class ChatAbortController extends AbortController {\n  private threads = new Map<ThreadId, AbortController>();\n\n  public getThreadSignal(threadId: ThreadId): AbortSignal {\n    let controller = this.threads.get(threadId);\n    if (!controller) {\n      controller = new AbortController();\n      this.threads.set(threadId, controller);\n    }\n    return controller.signal;\n  }\n\n  public abortThread(threadId: ThreadId, reason?: string): void {\n    this.threads.get(threadId)?.abort(reason);\n    this.threads.delete(threadId);\n  }\n\n  public abort(reason?: string): void {\n    super.abort(reason);\n    this.threads.forEach((controller) => controller.abort(reason));\n    this.threads.clear();\n  }\n}\n","/* eslint-disable @typescript-eslint/naming-convention */\nimport BigInt from 'big-integer';\nimport { Api as GramJs } from '../../../lib/gramjs';\n\nimport type { ApiLimitType, ApiPremiumSection } from '../../../global/types';\nimport type { ApiAppConfig } from '../../types';\n\nimport {\n  DEFAULT_LIMITS,\n  SERVICE_NOTIFICATIONS_USER_ID,\n  STORY_EXPIRE_PERIOD,\n  STORY_VIEWERS_EXPIRE_PERIOD,\n} from '../../../config';\nimport localDb from '../localDb';\nimport { buildJson } from './misc';\n\ntype LimitType = 'default' | 'premium';\ntype Limit =\n  | 'upload_max_fileparts'\n  | 'stickers_faved_limit'\n  | 'saved_gifs_limit'\n  | 'dialog_filters_chats_limit'\n  | 'dialog_filters_limit'\n  | 'dialogs_folder_pinned_limit'\n  | 'dialogs_pinned_limit'\n  | 'caption_length_limit'\n  | 'channels_limit'\n  | 'channels_public_limit'\n  | 'about_length_limit'\n  | 'chatlist_invites_limit'\n  | 'chatlist_joined_limit'\n  | 'recommended_channels_limit'\n  | 'saved_dialogs_pinned_limit';\ntype LimitKey = `${Limit}_${LimitType}`;\ntype LimitsConfig = Record<LimitKey, number>;\n\nexport interface GramJsAppConfig extends LimitsConfig {\n  emojies_sounds: Record<string, {\n    id: string;\n    access_hash: string;\n    file_reference_base64: string;\n  }>;\n  emojies_send_dice: string[];\n  groupcall_video_participants_max: number;\n  reactions_uniq_max: number;\n  chat_read_mark_size_threshold: number;\n  chat_read_mark_expire_period: number;\n  pm_read_date_expire_period: number;\n  reactions_user_max_default: number;\n  reactions_user_max_premium: number;\n  autologin_domains: string[];\n  autologin_token: string;\n  url_auth_domains: string[];\n  premium_purchase_blocked: boolean;\n  giveaway_gifts_purchase_available: boolean;\n  giveaway_add_peers_max: number;\n  premium_bot_username: string;\n  premium_invoice_slug: string;\n  premium_promo_order: string[];\n  default_emoji_statuses_stickerset_id: string;\n  hidden_members_group_size_min: number;\n  autoarchive_setting_available: boolean;\n  authorization_autoconfirm_period: number;\n  giveaway_boosts_per_premium: number;\n  giveaway_countries_max: number;\n  boosts_per_sent_gift: number;\n  // Forums\n  topics_pinned_limit: number;\n  // Stories\n  stories_all_hidden?: boolean;\n  story_expire_period: number;\n  story_viewers_expire_period: number;\n  stories_changelog_user_id?: number;\n  stories_pinned_to_top_count_max?: number;\n  // Boosts\n  group_transcribe_level_min?: number;\n  new_noncontact_peers_require_premium_without_ownpremium?: boolean;\n  channel_restrict_sponsored_level_min?: number;\n  // Upload premium notifications\n  upload_premium_speedup_notify_period?: number;\n  upload_premium_speedup_download?: number;\n  upload_premium_speedup_upload?: number;\n}\n\nfunction buildEmojiSounds(appConfig: GramJsAppConfig) {\n  const { emojies_sounds } = appConfig;\n  return emojies_sounds ? Object.keys(emojies_sounds).reduce((acc: Record<string, string>, key) => {\n    const l = emojies_sounds[key];\n    localDb.documents[l.id] = new GramJs.Document({\n      id: BigInt(l.id),\n      accessHash: BigInt(l.access_hash),\n      dcId: 1,\n      mimeType: 'audio/ogg',\n      fileReference: Buffer.alloc(0),\n      size: BigInt(0),\n    } as GramJs.Document);\n\n    acc[key] = l.id;\n    return acc;\n  }, {}) : {};\n}\n\nfunction getLimit(appConfig: GramJsAppConfig, key: Limit, fallbackKey: ApiLimitType) {\n  const defaultLimit = appConfig[`${key}_default`] || DEFAULT_LIMITS[fallbackKey][0];\n  const premiumLimit = appConfig[`${key}_premium`] || DEFAULT_LIMITS[fallbackKey][1];\n  return [defaultLimit, premiumLimit] as const;\n}\n\nexport function buildAppConfig(json: GramJs.TypeJSONValue, hash: number): ApiAppConfig {\n  const appConfig = buildJson(json) as GramJsAppConfig;\n\n  return {\n    emojiSounds: buildEmojiSounds(appConfig),\n    seenByMaxChatMembers: appConfig.chat_read_mark_size_threshold,\n    seenByExpiresAt: appConfig.chat_read_mark_expire_period,\n    readDateExpiresAt: appConfig.pm_read_date_expire_period,\n    autologinDomains: appConfig.autologin_domains || [],\n    urlAuthDomains: appConfig.url_auth_domains || [],\n    maxUniqueReactions: appConfig.reactions_uniq_max,\n    premiumBotUsername: appConfig.premium_bot_username,\n    premiumInvoiceSlug: appConfig.premium_invoice_slug,\n    premiumPromoOrder: appConfig.premium_promo_order as ApiPremiumSection[],\n    isPremiumPurchaseBlocked: appConfig.premium_purchase_blocked,\n    isGiveawayGiftsPurchaseAvailable: appConfig.giveaway_gifts_purchase_available,\n    defaultEmojiStatusesStickerSetId: appConfig.default_emoji_statuses_stickerset_id,\n    topicsPinnedLimit: appConfig.topics_pinned_limit,\n    maxUserReactionsDefault: appConfig.reactions_user_max_default,\n    maxUserReactionsPremium: appConfig.reactions_user_max_premium,\n    hiddenMembersMinCount: appConfig.hidden_members_group_size_min,\n    giveawayAddPeersMax: appConfig.giveaway_add_peers_max,\n    giveawayBoostsPerPremium: appConfig.giveaway_boosts_per_premium,\n    giveawayCountriesMax: appConfig.giveaway_countries_max,\n    boostsPerSentGift: appConfig.boosts_per_sent_gift,\n    canDisplayAutoarchiveSetting: appConfig.autoarchive_setting_available,\n    limits: {\n      uploadMaxFileparts: getLimit(appConfig, 'upload_max_fileparts', 'uploadMaxFileparts'),\n      stickersFaved: getLimit(appConfig, 'stickers_faved_limit', 'stickersFaved'),\n      savedGifs: getLimit(appConfig, 'saved_gifs_limit', 'savedGifs'),\n      dialogFiltersChats: getLimit(appConfig, 'dialog_filters_chats_limit', 'dialogFiltersChats'),\n      dialogFilters: getLimit(appConfig, 'dialog_filters_limit', 'dialogFilters'),\n      dialogFolderPinned: getLimit(appConfig, 'dialogs_pinned_limit', 'dialogFolderPinned'),\n      captionLength: getLimit(appConfig, 'caption_length_limit', 'captionLength'),\n      channels: getLimit(appConfig, 'channels_limit', 'channels'),\n      channelsPublic: getLimit(appConfig, 'channels_public_limit', 'channelsPublic'),\n      aboutLength: getLimit(appConfig, 'about_length_limit', 'aboutLength'),\n      chatlistInvites: getLimit(appConfig, 'chatlist_invites_limit', 'chatlistInvites'),\n      chatlistJoined: getLimit(appConfig, 'chatlist_joined_limit', 'chatlistJoined'),\n      recommendedChannels: getLimit(appConfig, 'recommended_channels_limit', 'recommendedChannels'),\n      savedDialogsPinned: getLimit(appConfig, 'saved_dialogs_pinned_limit', 'savedDialogsPinned'),\n    },\n    hash,\n    areStoriesHidden: appConfig.stories_all_hidden,\n    storyExpirePeriod: appConfig.story_expire_period ?? STORY_EXPIRE_PERIOD,\n    storyViewersExpirePeriod: appConfig.story_viewers_expire_period ?? STORY_VIEWERS_EXPIRE_PERIOD,\n    storyChangelogUserId: appConfig.stories_changelog_user_id?.toString() ?? SERVICE_NOTIFICATIONS_USER_ID,\n    maxPinnedStoriesCount: appConfig.stories_pinned_to_top_count_max,\n    groupTranscribeLevelMin: appConfig.group_transcribe_level_min,\n    canLimitNewMessagesWithoutPremium: appConfig.new_noncontact_peers_require_premium_without_ownpremium,\n    bandwidthPremiumNotifyPeriod: appConfig.upload_premium_speedup_notify_period,\n    bandwidthPremiumUploadSpeedup: appConfig.upload_premium_speedup_upload,\n    bandwidthPremiumDownloadSpeedup: appConfig.upload_premium_speedup_download,\n    channelRestrictAdsLevelMin: appConfig.channel_restrict_sponsored_level_min,\n  };\n}\n","import { Api as GramJs } from '../../../lib/gramjs';\n\nimport type {\n  ApiAttachBot,\n  ApiAttachBotIcon,\n  ApiAttachMenuPeerType,\n  ApiBotApp,\n  ApiBotCommand,\n  ApiBotInfo,\n  ApiBotInlineMediaResult,\n  ApiBotInlineResult,\n  ApiBotInlineSwitchPm,\n  ApiBotInlineSwitchWebview,\n  ApiBotMenuButton,\n  ApiInlineResultType,\n  ApiMessagesBotApp,\n} from '../../types';\n\nimport { pick } from '../../../util/iteratees';\nimport { addDocumentToLocalDb } from '../helpers';\nimport { buildApiPhoto, buildApiThumbnailFromStripped } from './common';\nimport { omitVirtualClassFields } from './helpers';\nimport { buildApiDocument, buildApiWebDocument, buildVideoFromDocument } from './messageContent';\nimport { buildApiPeerId } from './peers';\nimport { buildStickerFromDocument } from './symbols';\n\nexport function buildApiBotInlineResult(result: GramJs.BotInlineResult, queryId: string): ApiBotInlineResult {\n  const {\n    id, type, title, description, url, thumb,\n  } = result;\n\n  return {\n    id,\n    queryId,\n    type: type as ApiInlineResultType,\n    title,\n    description,\n    url,\n    webThumbnail: buildApiWebDocument(thumb),\n  };\n}\n\nexport function buildApiBotInlineMediaResult(\n  result: GramJs.BotInlineMediaResult, queryId: string,\n): ApiBotInlineMediaResult {\n  const {\n    id, type, title, description, photo, document,\n  } = result;\n\n  return {\n    id,\n    queryId,\n    type: type as ApiInlineResultType,\n    title,\n    description,\n    ...(type === 'sticker' && document instanceof GramJs.Document && { sticker: buildStickerFromDocument(document) }),\n    ...(photo instanceof GramJs.Photo && { photo: buildApiPhoto(photo) }),\n    ...(type === 'gif' && document instanceof GramJs.Document && { gif: buildVideoFromDocument(document) }),\n    ...(type === 'video' && document instanceof GramJs.Document && {\n      thumbnail: buildApiThumbnailFromStripped(document.thumbs),\n    }),\n  };\n}\n\nexport function buildBotSwitchPm(switchPm?: GramJs.InlineBotSwitchPM) {\n  return switchPm ? pick(switchPm, ['text', 'startParam']) as ApiBotInlineSwitchPm : undefined;\n}\n\nexport function buildBotSwitchWebview(switchWebview?: GramJs.InlineBotWebView) {\n  return switchWebview ? pick(switchWebview, ['text', 'url']) as ApiBotInlineSwitchWebview : undefined;\n}\n\nexport function buildApiAttachBot(bot: GramJs.AttachMenuBot): ApiAttachBot {\n  return {\n    id: bot.botId.toString(),\n    shouldRequestWriteAccess: bot.requestWriteAccess,\n    shortName: bot.shortName,\n    isForAttachMenu: bot.showInAttachMenu!,\n    isForSideMenu: bot.showInSideMenu,\n    attachMenuPeerTypes: bot.peerTypes?.map(buildApiAttachMenuPeerType)!,\n    icons: bot.icons.map(buildApiAttachMenuIcon).filter(Boolean),\n    isInactive: bot.inactive,\n    isDisclaimerNeeded: bot.sideMenuDisclaimerNeeded,\n  };\n}\n\nfunction buildApiAttachMenuPeerType(peerType: GramJs.TypeAttachMenuPeerType): ApiAttachMenuPeerType {\n  if (peerType instanceof GramJs.AttachMenuPeerTypeBotPM) return 'bots';\n  if (peerType instanceof GramJs.AttachMenuPeerTypePM) return 'users';\n  if (peerType instanceof GramJs.AttachMenuPeerTypeChat) return 'chats';\n  if (peerType instanceof GramJs.AttachMenuPeerTypeBroadcast) return 'channels';\n  if (peerType instanceof GramJs.AttachMenuPeerTypeSameBotPM) return 'self';\n  return undefined!; // Never reached\n}\n\nfunction buildApiAttachMenuIcon(icon: GramJs.AttachMenuBotIcon): ApiAttachBotIcon | undefined {\n  if (!(icon.icon instanceof GramJs.Document)) return undefined;\n\n  const document = buildApiDocument(icon.icon);\n\n  if (!document) return undefined;\n\n  addDocumentToLocalDb(icon.icon);\n\n  return {\n    name: icon.name,\n    document,\n  };\n}\n\nexport function buildApiBotInfo(botInfo: GramJs.BotInfo, chatId: string): ApiBotInfo {\n  const {\n    description, descriptionPhoto, descriptionDocument, userId, commands, menuButton,\n  } = botInfo;\n\n  const botId = userId && buildApiPeerId(userId, 'user');\n  const photo = descriptionPhoto instanceof GramJs.Photo ? buildApiPhoto(descriptionPhoto) : undefined;\n  const gif = descriptionDocument instanceof GramJs.Document ? buildVideoFromDocument(descriptionDocument) : undefined;\n\n  const commandsArray = commands?.map((command) => buildApiBotCommand(botId || chatId, command));\n\n  return {\n    botId: botId || chatId,\n    description,\n    gif,\n    photo,\n    menuButton: buildApiBotMenuButton(menuButton),\n    commands: commandsArray?.length ? commandsArray : undefined,\n  };\n}\n\nfunction buildApiBotCommand(botId: string, command: GramJs.BotCommand): ApiBotCommand {\n  return {\n    botId,\n    ...omitVirtualClassFields(command),\n  };\n}\n\nexport function buildApiBotMenuButton(menuButton?: GramJs.TypeBotMenuButton): ApiBotMenuButton {\n  if (menuButton instanceof GramJs.BotMenuButton) {\n    return {\n      type: 'webApp',\n      text: menuButton.text,\n      url: menuButton.url,\n    };\n  }\n\n  return {\n    type: 'commands',\n  };\n}\n\nexport function buildApiBotApp(app: GramJs.TypeBotApp): ApiBotApp | undefined {\n  if (app instanceof GramJs.BotAppNotModified) return undefined;\n\n  const {\n    id, accessHash, title, description, shortName, photo, document,\n  } = app;\n\n  const apiPhoto = photo instanceof GramJs.Photo ? buildApiPhoto(photo) : undefined;\n  const apiDocument = document instanceof GramJs.Document ? buildApiDocument(document) : undefined;\n\n  return {\n    id: id.toString(),\n    accessHash: accessHash.toString(),\n    title,\n    description,\n    shortName,\n    photo: apiPhoto,\n    document: apiDocument,\n  };\n}\n\nexport function buildApiMessagesBotApp(botApp: GramJs.messages.BotApp): ApiMessagesBotApp | undefined {\n  const { app, inactive, requestWriteAccess } = botApp;\n  const baseApp = buildApiBotApp(app);\n  if (!baseApp) return undefined;\n\n  return {\n    ...baseApp,\n    isInactive: inactive,\n    shouldRequestWriteAccess: requestWriteAccess,\n  };\n}\n","import type { Api as GramJs } from '../../../lib/gramjs';\nimport type { ApiBusinessIntro, ApiBusinessLocation, ApiBusinessWorkHours } from '../../types';\n\nimport { buildGeoPoint } from './messageContent';\nimport { buildStickerFromDocument } from './symbols';\n\nexport function buildApiBusinessLocation(location: GramJs.TypeBusinessLocation): ApiBusinessLocation {\n  const {\n    address, geoPoint,\n  } = location;\n\n  return {\n    address,\n    geo: geoPoint && buildGeoPoint(geoPoint),\n  };\n}\n\nexport function buildApiBusinessWorkHours(workHours: GramJs.TypeBusinessWorkHours): ApiBusinessWorkHours {\n  const {\n    timezoneId, weeklyOpen,\n  } = workHours;\n\n  return {\n    timezoneId,\n    workHours: weeklyOpen.map(({ startMinute, endMinute }) => ({\n      startMinute,\n      endMinute,\n    })),\n  };\n}\n\nexport function buildApiBusinessIntro(intro: GramJs.TypeBusinessIntro): ApiBusinessIntro {\n  const {\n    title, description, sticker,\n  } = intro;\n\n  return {\n    title,\n    description,\n    sticker: sticker && buildStickerFromDocument(sticker),\n  };\n}\n","import type BigInt from 'big-integer';\nimport { Api as GramJs } from '../../../lib/gramjs';\n\nimport type {\n  ApiBotCommand,\n  ApiChat,\n  ApiChatAdminRights,\n  ApiChatBannedRights,\n  ApiChatFolder,\n  ApiChatInviteImporter,\n  ApiChatlistExportedInvite,\n  ApiChatlistInvite,\n  ApiChatMember,\n  ApiChatReactions,\n  ApiChatSettings,\n  ApiExportedInvite,\n  ApiMissingInvitedUser,\n  ApiRestrictionReason,\n  ApiSendAsPeerId,\n  ApiSponsoredMessageReportResult,\n  ApiTopic,\n} from '../../types';\n\nimport { omitUndefined, pick, pickTruthy } from '../../../util/iteratees';\nimport { getServerTime, getServerTimeOffset } from '../../../util/serverTime';\nimport { serializeBytes } from '../helpers';\nimport { buildApiUsernames } from './common';\nimport { omitVirtualClassFields } from './helpers';\nimport {\n  buildApiEmojiStatus,\n  buildApiPeerColor,\n  buildApiPeerId,\n  getApiChatIdFromMtpPeer,\n  isPeerChat,\n  isPeerUser,\n} from './peers';\nimport { buildApiReaction } from './reactions';\n\ntype PeerEntityApiChatFields = Omit<ApiChat, (\n  'id' | 'type' | 'title' |\n  'lastReadOutboxMessageId' | 'lastReadInboxMessageId' |\n  'unreadCount' | 'unreadMentionsCount' | 'isMuted'\n)>;\n\nfunction buildApiChatFieldsFromPeerEntity(\n  peerEntity: GramJs.TypeUser | GramJs.TypeChat,\n  isSupport = false,\n): PeerEntityApiChatFields {\n  const isMin = Boolean('min' in peerEntity && peerEntity.min);\n  const accessHash = ('accessHash' in peerEntity) ? String(peerEntity.accessHash) : undefined;\n  const hasVideoAvatar = 'photo' in peerEntity && peerEntity.photo && 'hasVideo' in peerEntity.photo\n    && peerEntity.photo.hasVideo;\n  const avatarHash = ('photo' in peerEntity) && peerEntity.photo ? buildAvatarHash(peerEntity.photo) : undefined;\n  const isSignaturesShown = Boolean('signatures' in peerEntity && peerEntity.signatures);\n  const hasPrivateLink = Boolean('hasLink' in peerEntity && peerEntity.hasLink);\n  const isScam = Boolean('scam' in peerEntity && peerEntity.scam);\n  const isFake = Boolean('fake' in peerEntity && peerEntity.fake);\n  const isJoinToSend = Boolean('joinToSend' in peerEntity && peerEntity.joinToSend);\n  const isJoinRequest = Boolean('joinRequest' in peerEntity && peerEntity.joinRequest);\n  const usernames = buildApiUsernames(peerEntity);\n  const isForum = Boolean('forum' in peerEntity && peerEntity.forum);\n  const areStoriesHidden = Boolean('storiesHidden' in peerEntity && peerEntity.storiesHidden);\n  const maxStoryId = 'storiesMaxId' in peerEntity ? peerEntity.storiesMaxId : undefined;\n  const storiesUnavailable = Boolean('storiesUnavailable' in peerEntity && peerEntity.storiesUnavailable);\n  const color = ('color' in peerEntity && peerEntity.color) ? buildApiPeerColor(peerEntity.color) : undefined;\n  const emojiStatus = ('emojiStatus' in peerEntity && peerEntity.emojiStatus)\n    ? buildApiEmojiStatus(peerEntity.emojiStatus) : undefined;\n  const boostLevel = ('level' in peerEntity) ? peerEntity.level : undefined;\n\n  return omitUndefined<PeerEntityApiChatFields>({\n    isMin,\n    hasPrivateLink,\n    isSignaturesShown,\n    usernames,\n    accessHash,\n    hasVideoAvatar,\n    avatarHash,\n    ...('verified' in peerEntity && { isVerified: peerEntity.verified }),\n    ...('callActive' in peerEntity && { isCallActive: peerEntity.callActive }),\n    ...('callNotEmpty' in peerEntity && { isCallNotEmpty: peerEntity.callNotEmpty }),\n    ...('date' in peerEntity && { creationDate: peerEntity.date }),\n    ...('participantsCount' in peerEntity && peerEntity.participantsCount !== undefined && {\n      membersCount: peerEntity.participantsCount,\n    }),\n    ...('noforwards' in peerEntity && { isProtected: Boolean(peerEntity.noforwards) }),\n    isSupport: isSupport || undefined,\n    ...buildApiChatPermissions(peerEntity),\n    ...('creator' in peerEntity && { isCreator: peerEntity.creator }),\n    ...buildApiChatRestrictions(peerEntity),\n    ...buildApiChatMigrationInfo(peerEntity),\n    fakeType: isScam ? 'scam' : (isFake ? 'fake' : undefined),\n    color,\n    isJoinToSend,\n    isJoinRequest,\n    isForum,\n    areStoriesHidden,\n    maxStoryId,\n    hasStories: Boolean(maxStoryId) && !storiesUnavailable,\n    emojiStatus,\n    boostLevel,\n  });\n}\n\nexport function buildApiChatFromDialog(\n  dialog: GramJs.Dialog,\n  peerEntity: GramJs.TypeUser | GramJs.TypeChat,\n): ApiChat {\n  const {\n    peer, folderId, unreadMark, unreadCount, unreadMentionsCount, unreadReactionsCount,\n    notifySettings: { silent, muteUntil },\n    readOutboxMaxId, readInboxMaxId, draft, viewForumAsMessages,\n  } = dialog;\n  const isMuted = silent || (typeof muteUntil === 'number' && getServerTime() < muteUntil);\n\n  return {\n    id: getApiChatIdFromMtpPeer(peer),\n    ...(folderId && { folderId }),\n    type: getApiChatTypeFromPeerEntity(peerEntity),\n    title: getApiChatTitleFromMtpPeer(peer, peerEntity),\n    lastReadOutboxMessageId: readOutboxMaxId,\n    lastReadInboxMessageId: readInboxMaxId,\n    unreadCount,\n    unreadMentionsCount,\n    unreadReactionsCount,\n    isMuted,\n    muteUntil,\n    ...(unreadMark && { hasUnreadMark: true }),\n    ...(draft instanceof GramJs.DraftMessage && { draftDate: draft.date }),\n    ...(viewForumAsMessages && { isForumAsMessages: true }),\n    ...buildApiChatFieldsFromPeerEntity(peerEntity),\n  };\n}\n\nexport function buildApiChatFromSavedDialog(\n  dialog: GramJs.SavedDialog,\n  peerEntity: GramJs.TypeUser | GramJs.TypeChat,\n): ApiChat {\n  const { peer } = dialog;\n\n  return {\n    id: getApiChatIdFromMtpPeer(peer),\n    type: getApiChatTypeFromPeerEntity(peerEntity),\n    title: getApiChatTitleFromMtpPeer(peer, peerEntity),\n    ...buildApiChatFieldsFromPeerEntity(peerEntity),\n  };\n}\n\nfunction buildApiChatPermissions(peerEntity: GramJs.TypeUser | GramJs.TypeChat): {\n  adminRights?: ApiChatAdminRights;\n  currentUserBannedRights?: ApiChatBannedRights;\n  defaultBannedRights?: ApiChatBannedRights;\n} {\n  if (!(peerEntity instanceof GramJs.Chat || peerEntity instanceof GramJs.Channel)) {\n    return {};\n  }\n\n  return {\n    adminRights: peerEntity.adminRights ? omitVirtualClassFields(peerEntity.adminRights) : undefined,\n    currentUserBannedRights: 'bannedRights' in peerEntity && peerEntity.bannedRights\n      ? omitVirtualClassFields(peerEntity.bannedRights)\n      : undefined,\n    defaultBannedRights: peerEntity.defaultBannedRights\n      ? omitVirtualClassFields(peerEntity.defaultBannedRights)\n      : undefined,\n  };\n}\n\nfunction buildApiChatRestrictions(peerEntity: GramJs.TypeUser | GramJs.TypeChat): {\n  isNotJoined?: boolean;\n  isForbidden?: boolean;\n  isRestricted?: boolean;\n  restrictionReason?: ApiRestrictionReason;\n} {\n  if (peerEntity instanceof GramJs.ChatForbidden) {\n    return {\n      isForbidden: true,\n    };\n  }\n\n  if (peerEntity instanceof GramJs.ChannelForbidden) {\n    return {\n      isRestricted: true,\n    };\n  }\n\n  const restrictions = {};\n\n  if ('restricted' in peerEntity) {\n    const restrictionReason = peerEntity.restricted\n      ? buildApiChatRestrictionReason(peerEntity.restrictionReason)\n      : undefined;\n\n    if (restrictionReason) {\n      Object.assign(restrictions, {\n        isRestricted: true,\n        restrictionReason,\n      });\n    }\n  }\n\n  if (peerEntity instanceof GramJs.Chat) {\n    Object.assign(restrictions, {\n      isNotJoined: peerEntity.left,\n    });\n  }\n\n  if (peerEntity instanceof GramJs.Channel) {\n    Object.assign(restrictions, {\n      // `left` is weirdly set to `true` on all channels never joined before\n      isNotJoined: peerEntity.left,\n    });\n  }\n\n  return restrictions;\n}\n\nfunction buildApiChatMigrationInfo(peerEntity: GramJs.TypeChat): {\n  migratedTo?: {\n    chatId: string;\n    accessHash?: string;\n  };\n} {\n  if (\n    'migratedTo' in peerEntity\n    && peerEntity.migratedTo\n    && !(peerEntity.migratedTo instanceof GramJs.InputChannelEmpty)\n  ) {\n    return {\n      migratedTo: {\n        chatId: getApiChatIdFromMtpPeer(peerEntity.migratedTo),\n        ...(peerEntity.migratedTo instanceof GramJs.InputChannel && {\n          accessHash: String(peerEntity.migratedTo.accessHash),\n        }),\n      },\n    };\n  }\n\n  return {};\n}\n\nfunction buildApiChatRestrictionReason(\n  restrictionReasons?: GramJs.RestrictionReason[],\n): ApiRestrictionReason | undefined {\n  if (!restrictionReasons) {\n    return undefined;\n  }\n\n  const targetReason = restrictionReasons.find(({ platform }) => platform === 'all');\n  return targetReason ? pick(targetReason, ['reason', 'text']) : undefined;\n}\n\nexport function buildApiChatFromPreview(\n  preview: GramJs.TypeChat | GramJs.TypeUser,\n  isSupport = false,\n): ApiChat | undefined {\n  if (preview instanceof GramJs.ChatEmpty || preview instanceof GramJs.UserEmpty) {\n    return undefined;\n  }\n  const id = buildApiPeerId(\n    preview.id,\n    preview instanceof GramJs.User ? 'user'\n      : (preview instanceof GramJs.Chat || preview instanceof GramJs.ChatForbidden) ? 'chat' : 'channel',\n  );\n\n  return {\n    id,\n    type: getApiChatTypeFromPeerEntity(preview),\n    title: preview instanceof GramJs.User ? getUserName(preview) : preview.title,\n    ...buildApiChatFieldsFromPeerEntity(preview, isSupport),\n  };\n}\n\nexport function getApiChatTypeFromPeerEntity(peerEntity: GramJs.TypeChat | GramJs.TypeUser) {\n  if (peerEntity instanceof GramJs.User || peerEntity instanceof GramJs.UserEmpty) {\n    return 'chatTypePrivate';\n  } else if (\n    peerEntity instanceof GramJs.Chat\n    || peerEntity instanceof GramJs.ChatForbidden\n    || peerEntity instanceof GramJs.ChatEmpty\n  ) {\n    return 'chatTypeBasicGroup';\n  } else {\n    return peerEntity.megagroup ? 'chatTypeSuperGroup' : 'chatTypeChannel';\n  }\n}\n\nexport function getPeerKey(peer: GramJs.TypePeer) {\n  if (isPeerUser(peer)) {\n    return `user${peer.userId}`;\n  } else if (isPeerChat(peer)) {\n    return `chat${peer.chatId}`;\n  } else {\n    return `chat${peer.channelId}`;\n  }\n}\n\nexport function getApiChatTitleFromMtpPeer(peer: GramJs.TypePeer, peerEntity: GramJs.User | GramJs.Chat) {\n  if (isPeerUser(peer)) {\n    return getUserName(peerEntity as GramJs.User);\n  } else {\n    return (peerEntity as GramJs.Chat).title;\n  }\n}\n\nfunction getUserName(user: GramJs.User) {\n  return user.firstName\n    ? `${user.firstName}${user.lastName ? ` ${user.lastName}` : ''}`\n    : (user.lastName || '');\n}\n\nexport function buildAvatarHash(photo: GramJs.TypeUserProfilePhoto | GramJs.TypeChatPhoto) {\n  if ('photoId' in photo) {\n    return String(photo.photoId);\n  }\n\n  return undefined;\n}\n\nexport function buildChatMember(\n  member: GramJs.TypeChatParticipant | GramJs.TypeChannelParticipant,\n): ApiChatMember | undefined {\n  const userId = (member instanceof GramJs.ChannelParticipantBanned || member instanceof GramJs.ChannelParticipantLeft)\n    ? getApiChatIdFromMtpPeer(member.peer)\n    : buildApiPeerId(member.userId, 'user');\n\n  return {\n    userId,\n    inviterId: 'inviterId' in member && member.inviterId\n      ? buildApiPeerId(member.inviterId as BigInt.BigInteger, 'user')\n      : undefined,\n    joinedDate: 'date' in member ? member.date : undefined,\n    kickedByUserId: 'kickedBy' in member && member.kickedBy ? buildApiPeerId(member.kickedBy, 'user') : undefined,\n    promotedByUserId: 'promotedBy' in member && member.promotedBy\n      ? buildApiPeerId(member.promotedBy, 'user')\n      : undefined,\n    bannedRights: 'bannedRights' in member ? omitVirtualClassFields(member.bannedRights) : undefined,\n    adminRights: 'adminRights' in member ? omitVirtualClassFields(member.adminRights) : undefined,\n    customTitle: 'rank' in member ? member.rank : undefined,\n    ...((member instanceof GramJs.ChannelParticipantAdmin || member instanceof GramJs.ChatParticipantAdmin) && {\n      isAdmin: true,\n    }),\n    ...((member instanceof GramJs.ChannelParticipantCreator || member instanceof GramJs.ChatParticipantCreator) && {\n      isOwner: true,\n    }),\n  };\n}\n\nexport function buildChatMembers(\n  participants: GramJs.TypeChatParticipants | GramJs.channels.ChannelParticipants,\n) {\n  // Duplicate code because of TS union-type shenanigans\n  if (participants instanceof GramJs.ChatParticipants) {\n    return participants.participants.map(buildChatMember).filter(Boolean);\n  }\n  if (participants instanceof GramJs.channels.ChannelParticipants) {\n    return participants.participants.map(buildChatMember).filter(Boolean);\n  }\n\n  return undefined;\n}\n\nexport function buildChatTypingStatus(\n  update: GramJs.UpdateUserTyping | GramJs.UpdateChatUserTyping | GramJs.UpdateChannelUserTyping,\n) {\n  let action: string = '';\n  let emoticon: string | undefined;\n  if (update.action instanceof GramJs.SendMessageCancelAction) {\n    return undefined;\n  } else if (update.action instanceof GramJs.SendMessageTypingAction) {\n    action = 'lng_user_typing';\n  } else if (update.action instanceof GramJs.SendMessageRecordVideoAction) {\n    action = 'lng_send_action_record_video';\n  } else if (update.action instanceof GramJs.SendMessageUploadVideoAction) {\n    action = 'lng_send_action_upload_video';\n  } else if (update.action instanceof GramJs.SendMessageRecordAudioAction) {\n    action = 'lng_send_action_record_audio';\n  } else if (update.action instanceof GramJs.SendMessageUploadAudioAction) {\n    action = 'lng_send_action_upload_audio';\n  } else if (update.action instanceof GramJs.SendMessageUploadPhotoAction) {\n    action = 'lng_send_action_upload_photo';\n  } else if (update.action instanceof GramJs.SendMessageUploadDocumentAction) {\n    action = 'lng_send_action_upload_file';\n  } else if (update.action instanceof GramJs.SendMessageGeoLocationAction) {\n    action = 'selecting a location to share';\n  } else if (update.action instanceof GramJs.SendMessageChooseContactAction) {\n    action = 'selecting a contact to share';\n  } else if (update.action instanceof GramJs.SendMessageGamePlayAction) {\n    action = 'lng_playing_game';\n  } else if (update.action instanceof GramJs.SendMessageRecordRoundAction) {\n    action = 'lng_send_action_record_round';\n  } else if (update.action instanceof GramJs.SendMessageUploadRoundAction) {\n    action = 'lng_send_action_upload_round';\n  } else if (update.action instanceof GramJs.SendMessageChooseStickerAction) {\n    action = 'lng_send_action_choose_sticker';\n  } else if (update.action instanceof GramJs.SpeakingInGroupCallAction) {\n    return undefined;\n  } else if (update.action instanceof GramJs.SendMessageEmojiInteractionSeen) {\n    action = 'lng_user_action_watching_animations';\n    emoticon = update.action.emoticon;\n  } else if (update.action instanceof GramJs.SendMessageEmojiInteraction) {\n    return undefined;\n  }\n\n  return {\n    action,\n    ...(emoticon && { emoji: emoticon }),\n    ...(!(update instanceof GramJs.UpdateUserTyping) && { userId: getApiChatIdFromMtpPeer(update.fromId) }),\n    timestamp: Date.now() + getServerTimeOffset() * 1000,\n  };\n}\n\nexport function buildApiChatFolder(filter: GramJs.DialogFilter | GramJs.DialogFilterChatlist): ApiChatFolder {\n  if (filter instanceof GramJs.DialogFilterChatlist) {\n    return {\n      ...pickTruthy(filter, [\n        'id', 'title', 'emoticon',\n      ]),\n      excludedChatIds: [],\n      includedChatIds: filter.includePeers.map(getApiChatIdFromMtpPeer).filter(Boolean),\n      pinnedChatIds: filter.pinnedPeers.map(getApiChatIdFromMtpPeer).filter(Boolean),\n      hasMyInvites: filter.hasMyInvites,\n      isChatList: true,\n    };\n  }\n\n  return {\n    ...pickTruthy(filter, [\n      'id', 'title', 'emoticon', 'contacts', 'nonContacts', 'groups', 'bots',\n      'excludeMuted', 'excludeRead', 'excludeArchived',\n    ]),\n    channels: filter.broadcasts,\n    pinnedChatIds: filter.pinnedPeers.map(getApiChatIdFromMtpPeer).filter(Boolean),\n    includedChatIds: filter.includePeers.map(getApiChatIdFromMtpPeer).filter(Boolean),\n    excludedChatIds: filter.excludePeers.map(getApiChatIdFromMtpPeer).filter(Boolean),\n  };\n}\n\nexport function buildApiChatFolderFromSuggested({\n  filter, description,\n}: {\n  filter: GramJs.TypeDialogFilter;\n  description: string;\n}): ApiChatFolder | undefined {\n  if (!(filter instanceof GramJs.DialogFilter || filter instanceof GramJs.DialogFilterChatlist)) return undefined;\n  return {\n    ...buildApiChatFolder(filter),\n    description,\n  };\n}\n\nexport function buildApiChatBotCommands(botInfos: GramJs.BotInfo[]) {\n  return botInfos.reduce((botCommands, botInfo) => {\n    const botId = buildApiPeerId(botInfo.userId!, 'user');\n\n    if (botInfo.commands) {\n      botCommands = botCommands.concat(botInfo.commands.map((mtpCommand) => ({\n        botId,\n        ...omitVirtualClassFields(mtpCommand),\n      })));\n    }\n\n    return botCommands;\n  }, [] as ApiBotCommand[]);\n}\n\nexport function buildApiExportedInvite(invite: GramJs.ChatInviteExported): ApiExportedInvite {\n  const {\n    revoked,\n    date,\n    expireDate,\n    link,\n    permanent,\n    startDate,\n    usage,\n    usageLimit,\n    requested,\n    requestNeeded,\n    title,\n    adminId,\n  } = invite;\n  return {\n    isRevoked: revoked,\n    date,\n    expireDate,\n    link,\n    isPermanent: permanent,\n    startDate,\n    usage,\n    usageLimit,\n    isRequestNeeded: requestNeeded,\n    requested,\n    title,\n    adminId: buildApiPeerId(adminId, 'user'),\n  };\n}\n\nexport function buildChatInviteImporter(importer: GramJs.ChatInviteImporter): ApiChatInviteImporter {\n  const {\n    userId,\n    date,\n    about,\n    requested,\n    viaChatlist,\n  } = importer;\n  return {\n    userId: buildApiPeerId(userId, 'user'),\n    date,\n    about,\n    isRequested: requested,\n    isFromChatList: viaChatlist,\n  };\n}\n\nexport function buildApiChatSettings({\n  autoarchived,\n  reportSpam,\n  addContact,\n  blockContact,\n}: GramJs.PeerSettings): ApiChatSettings {\n  return {\n    isAutoArchived: Boolean(autoarchived),\n    canReportSpam: Boolean(reportSpam),\n    canAddContact: Boolean(addContact),\n    canBlockContact: Boolean(blockContact),\n  };\n}\n\nexport function buildApiChatReactions(chatReactions?: GramJs.TypeChatReactions): ApiChatReactions | undefined {\n  if (chatReactions instanceof GramJs.ChatReactionsAll) {\n    return {\n      type: 'all',\n      areCustomAllowed: chatReactions.allowCustom,\n    };\n  }\n  if (chatReactions instanceof GramJs.ChatReactionsSome) {\n    return {\n      type: 'some',\n      allowed: chatReactions.reactions.map(buildApiReaction).filter(Boolean),\n    };\n  }\n\n  return undefined;\n}\n\nexport function buildApiSendAsPeerId(sendAs: GramJs.SendAsPeer): ApiSendAsPeerId {\n  return {\n    id: getApiChatIdFromMtpPeer(sendAs.peer),\n    isPremium: sendAs.premiumRequired,\n  };\n}\n\nexport function buildApiTopic(forumTopic: GramJs.TypeForumTopic): ApiTopic | undefined {\n  if (forumTopic instanceof GramJs.ForumTopicDeleted) {\n    return undefined;\n  }\n\n  const {\n    id,\n    my,\n    closed,\n    pinned,\n    hidden,\n    short,\n    date,\n    title,\n    iconColor,\n    iconEmojiId,\n    topMessage,\n    unreadCount,\n    unreadMentionsCount,\n    unreadReactionsCount,\n    fromId,\n    notifySettings: {\n      silent, muteUntil,\n    },\n  } = forumTopic;\n\n  return {\n    id,\n    isClosed: closed,\n    isPinned: pinned,\n    isHidden: hidden,\n    isOwner: my,\n    isMin: short,\n    date,\n    title,\n    iconColor,\n    iconEmojiId: iconEmojiId?.toString(),\n    lastMessageId: topMessage,\n    unreadCount,\n    unreadMentionsCount,\n    unreadReactionsCount,\n    fromId: getApiChatIdFromMtpPeer(fromId),\n    isMuted: silent || (typeof muteUntil === 'number' ? getServerTime() < muteUntil : undefined),\n    muteUntil,\n  };\n}\n\nexport function buildApiChatlistInvite(\n  invite: GramJs.chatlists.TypeChatlistInvite | undefined, slug: string,\n): ApiChatlistInvite | undefined {\n  if (invite instanceof GramJs.chatlists.ChatlistInvite) {\n    return {\n      slug,\n      title: invite.title,\n      emoticon: invite.emoticon,\n      peerIds: invite.peers.map(getApiChatIdFromMtpPeer).filter(Boolean),\n    };\n  }\n\n  if (invite instanceof GramJs.chatlists.ChatlistInviteAlready) {\n    return {\n      slug,\n      folderId: invite.filterId,\n      missingPeerIds: invite.missingPeers.map(getApiChatIdFromMtpPeer).filter(Boolean),\n      alreadyPeerIds: invite.alreadyPeers.map(getApiChatIdFromMtpPeer).filter(Boolean),\n    };\n  }\n\n  return undefined;\n}\n\nexport function buildApiChatlistExportedInvite(\n  invite: GramJs.TypeExportedChatlistInvite | undefined,\n): ApiChatlistExportedInvite | undefined {\n  if (!(invite instanceof GramJs.ExportedChatlistInvite)) return undefined;\n\n  const {\n    title,\n    url,\n    peers,\n  } = invite;\n\n  return {\n    title,\n    url,\n    peerIds: peers.map(getApiChatIdFromMtpPeer).filter(Boolean),\n  };\n}\n\nexport function buildApiMissingInvitedUser(\n  user: GramJs.TypeMissingInvitee,\n): ApiMissingInvitedUser {\n  return {\n    id: user.userId.toString(),\n    isRequiringPremiumToMessage: user.premiumRequiredForPm,\n    isRequiringPremiumToInvite: user.premiumWouldAllowInvite,\n  };\n}\n\nexport function buildApiSponsoredMessageReportResult(\n  result: GramJs.channels.TypeSponsoredMessageReportResult,\n): ApiSponsoredMessageReportResult {\n  if (result instanceof GramJs.channels.SponsoredMessageReportResultReported) {\n    return {\n      type: 'reported',\n    };\n  }\n\n  if (result instanceof GramJs.channels.SponsoredMessageReportResultAdsHidden) {\n    return {\n      type: 'hidden',\n    };\n  }\n\n  const title = result.title;\n  const options = result.options.map((option) => ({\n    text: option.text,\n    option: serializeBytes(option.option),\n  }));\n\n  return {\n    type: 'selectOption',\n    title,\n    options,\n  };\n}\n","import { Api as GramJs } from '../../../lib/gramjs';\n\nimport type { ApiPrivacyKey } from '../../../types';\nimport type {\n  ApiChatLink,\n  ApiCollectionInfo,\n  ApiConfig, ApiCountry, ApiLanguage, ApiOldLangString,\n  ApiPeerColors,\n  ApiSession, ApiTimezone, ApiUrlAuthResult, ApiWallpaper, ApiWebSession,\n  LangPackStringValue,\n} from '../../types';\n\nimport {\n  buildCollectionByCallback, omit, omitUndefined, pick,\n} from '../../../util/iteratees';\nimport { getServerTime } from '../../../util/serverTime';\nimport { addUserToLocalDb } from '../helpers';\nimport { omitVirtualClassFields } from './helpers';\nimport { buildApiDocument, buildMessageTextContent } from './messageContent';\nimport { buildApiPeerId, getApiChatIdFromMtpPeer } from './peers';\nimport { buildApiReaction } from './reactions';\nimport { buildApiUser } from './users';\n\nexport function buildApiWallpaper(wallpaper: GramJs.TypeWallPaper): ApiWallpaper | undefined {\n  if (wallpaper instanceof GramJs.WallPaperNoFile) {\n    // TODO: Plain color wallpapers\n    return undefined;\n  }\n\n  const { slug } = wallpaper;\n\n  const document = buildApiDocument(wallpaper.document);\n\n  if (!document) {\n    return undefined;\n  }\n\n  return {\n    slug,\n    document,\n  };\n}\n\nexport function buildApiSession(session: GramJs.Authorization): ApiSession {\n  return {\n    isCurrent: Boolean(session.current),\n    isOfficialApp: Boolean(session.officialApp),\n    isPasswordPending: Boolean(session.passwordPending),\n    hash: String(session.hash),\n    areCallsEnabled: !session.callRequestsDisabled,\n    areSecretChatsEnabled: !session.encryptedRequestsDisabled,\n    isUnconfirmed: session.unconfirmed,\n    ...pick(session, [\n      'deviceModel', 'platform', 'systemVersion', 'appName', 'appVersion', 'dateCreated', 'dateActive',\n      'ip', 'country', 'region',\n    ]),\n  };\n}\n\nexport function buildApiWebSession(session: GramJs.WebAuthorization): ApiWebSession {\n  return {\n    hash: String(session.hash),\n    botId: buildApiPeerId(session.botId, 'user'),\n    ...pick(session, [\n      'platform', 'browser', 'dateCreated', 'dateActive', 'ip', 'region', 'domain',\n    ]),\n  };\n}\n\nexport function buildPrivacyKey(key: GramJs.TypePrivacyKey): ApiPrivacyKey | undefined {\n  switch (key.className) {\n    case 'PrivacyKeyPhoneNumber':\n      return 'phoneNumber';\n    case 'PrivacyKeyAddedByPhone':\n      return 'addByPhone';\n    case 'PrivacyKeyStatusTimestamp':\n      return 'lastSeen';\n    case 'PrivacyKeyProfilePhoto':\n      return 'profilePhoto';\n    case 'PrivacyKeyPhoneCall':\n      return 'phoneCall';\n    case 'PrivacyKeyPhoneP2P':\n      return 'phoneP2P';\n    case 'PrivacyKeyForwards':\n      return 'forwards';\n    case 'PrivacyKeyVoiceMessages':\n      return 'voiceMessages';\n    case 'PrivacyKeyChatInvite':\n      return 'chatInvite';\n    case 'PrivacyKeyAbout':\n      return 'bio';\n    case 'PrivacyKeyBirthday':\n      return 'birthday';\n  }\n\n  return undefined;\n}\n\nexport function buildApiNotifyException(\n  notifySettings: GramJs.TypePeerNotifySettings, peer: GramJs.TypePeer,\n) {\n  const {\n    silent, muteUntil, showPreviews, otherSound,\n  } = notifySettings;\n\n  const hasSound = Boolean(otherSound && !(otherSound instanceof GramJs.NotificationSoundNone));\n\n  return {\n    chatId: getApiChatIdFromMtpPeer(peer),\n    isMuted: silent || (typeof muteUntil === 'number' && getServerTime() < muteUntil),\n    ...(!hasSound && { isSilent: true }),\n    ...(showPreviews !== undefined && { shouldShowPreviews: Boolean(showPreviews) }),\n    muteUntil,\n  };\n}\n\nexport function buildApiNotifyExceptionTopic(\n  notifySettings: GramJs.TypePeerNotifySettings, peer: GramJs.TypePeer, topicId: number,\n) {\n  const {\n    silent, muteUntil, showPreviews, otherSound,\n  } = notifySettings;\n\n  const hasSound = Boolean(otherSound && !(otherSound instanceof GramJs.NotificationSoundNone));\n\n  return {\n    chatId: getApiChatIdFromMtpPeer(peer),\n    topicId,\n    isMuted: silent || (typeof muteUntil === 'number' && getServerTime() < muteUntil),\n    ...(!hasSound && { isSilent: true }),\n    ...(showPreviews !== undefined && { shouldShowPreviews: Boolean(showPreviews) }),\n    muteUntil,\n  };\n}\n\nfunction buildApiCountry(country: GramJs.help.Country, code: GramJs.help.CountryCode) {\n  const {\n    hidden, iso2, defaultName, name,\n  } = country;\n  const { countryCode, prefixes, patterns } = code || {};\n\n  return {\n    isHidden: hidden,\n    iso2,\n    defaultName,\n    name,\n    countryCode,\n    prefixes,\n    patterns,\n  };\n}\n\nexport function buildApiCountryList(countries: GramJs.help.Country[]) {\n  const nonHiddenCountries = countries.filter(({ hidden }) => !hidden);\n  const listByCode = nonHiddenCountries\n    .map((country) => (\n      country.countryCodes.map((code) => buildApiCountry(country, code))\n    ))\n    .flat()\n    .sort((a: ApiCountry, b: ApiCountry) => (\n      a.name ? a.name.localeCompare(b.name!) : a.defaultName.localeCompare(b.defaultName)\n    ));\n\n  const generalList = nonHiddenCountries\n    .map((country) => buildApiCountry(country, country.countryCodes[0]))\n    .sort((a, b) => (\n      a.name ? a.name.localeCompare(b.name!) : a.defaultName.localeCompare(b.defaultName)\n    ));\n\n  return {\n    phoneCodes: listByCode,\n    general: generalList,\n  };\n}\n\nexport function buildJson(json: GramJs.TypeJSONValue): any {\n  if (json instanceof GramJs.JsonNull) return undefined;\n  if (json instanceof GramJs.JsonString\n    || json instanceof GramJs.JsonBool\n    || json instanceof GramJs.JsonNumber) return json.value;\n  if (json instanceof GramJs.JsonArray) return json.value.map(buildJson);\n\n  return json.value.reduce((acc: Record<string, any>, el) => {\n    acc[el.key] = buildJson(el.value);\n    return acc;\n  }, {});\n}\n\nexport function buildApiUrlAuthResult(result: GramJs.TypeUrlAuthResult): ApiUrlAuthResult | undefined {\n  if (result instanceof GramJs.UrlAuthResultRequest) {\n    const { bot, domain, requestWriteAccess } = result;\n    const user = buildApiUser(bot);\n    if (!user) return undefined;\n\n    addUserToLocalDb(bot);\n\n    return {\n      type: 'request',\n      domain,\n      shouldRequestWriteAccess: requestWriteAccess,\n      bot: user,\n    };\n  }\n\n  if (result instanceof GramJs.UrlAuthResultAccepted) {\n    return {\n      type: 'accepted',\n      url: result.url,\n    };\n  }\n\n  if (result instanceof GramJs.UrlAuthResultDefault) {\n    return {\n      type: 'default',\n    };\n  }\n  return undefined;\n}\n\nexport function buildApiConfig(config: GramJs.Config): ApiConfig {\n  const defaultReaction = config.reactionsDefault && buildApiReaction(config.reactionsDefault);\n  return {\n    expiresAt: config.expires,\n    gifSearchUsername: config.gifSearchUsername,\n    defaultReaction,\n    maxGroupSize: config.chatSizeMax,\n    autologinToken: config.autologinToken,\n  };\n}\n\nexport function oldBuildLangPack(mtpLangPack: GramJs.LangPackDifference) {\n  return mtpLangPack.strings.reduce<Record<string, ApiOldLangString | undefined>>((acc, mtpString) => {\n    acc[mtpString.key] = oldBuildLangPackString(mtpString);\n    return acc;\n  }, {});\n}\n\nexport function oldBuildLangPackString(mtpString: GramJs.TypeLangPackString) {\n  return mtpString instanceof GramJs.LangPackString\n    ? mtpString.value\n    : mtpString instanceof GramJs.LangPackStringPluralized\n      ? omit(omitVirtualClassFields(mtpString), ['key'])\n      : undefined;\n}\n\nexport function buildLangStrings(strings: GramJs.TypeLangPackString[]) {\n  const keysToRemove: string[] = [];\n  const apiStrings = strings.reduce<Record<string, LangPackStringValue>>((acc, mtpString) => {\n    if (mtpString instanceof GramJs.LangPackStringDeleted) {\n      keysToRemove.push(mtpString.key);\n    }\n\n    if (mtpString instanceof GramJs.LangPackString) {\n      acc[mtpString.key] = mtpString.value;\n    }\n\n    if (mtpString instanceof GramJs.LangPackStringPluralized) {\n      acc[mtpString.key] = omitUndefined({\n        zero: mtpString.zeroValue,\n        one: mtpString.oneValue,\n        two: mtpString.twoValue,\n        few: mtpString.fewValue,\n        many: mtpString.manyValue,\n        other: mtpString.otherValue,\n      });\n    }\n\n    return acc;\n  }, {});\n\n  return {\n    keysToRemove,\n    strings: apiStrings,\n  };\n}\n\nexport function buildApiLanguage(lang: GramJs.TypeLangPackLanguage): ApiLanguage {\n  const {\n    name, nativeName, langCode, pluralCode, rtl, stringsCount, translatedCount, translationsUrl, beta, official,\n  } = lang;\n  return {\n    name,\n    nativeName,\n    langCode,\n    pluralCode,\n    isRtl: rtl,\n    isBeta: beta,\n    isOfficial: official,\n    stringsCount,\n    translatedCount,\n    translationsUrl,\n  };\n}\n\nfunction buildApiPeerColorSet(colorSet: GramJs.help.TypePeerColorSet) {\n  if (colorSet instanceof GramJs.help.PeerColorSet) {\n    return colorSet.colors.map((color) => `#${color.toString(16).padStart(6, '0')}`);\n  }\n  return undefined;\n}\n\nexport function buildApiPeerColors(wrapper: GramJs.help.TypePeerColors): ApiPeerColors['general'] | undefined {\n  if (!(wrapper instanceof GramJs.help.PeerColors)) return undefined;\n\n  return buildCollectionByCallback(wrapper.colors, (color) => {\n    return [color.colorId, {\n      isHidden: color.hidden,\n      colors: color.colors && buildApiPeerColorSet(color.colors),\n      darkColors: color.darkColors && buildApiPeerColorSet(color.darkColors),\n    }];\n  });\n}\n\nexport function buildApiTimezone(timezone: GramJs.TypeTimezone): ApiTimezone {\n  const { id, name, utcOffset } = timezone;\n  return {\n    id,\n    name,\n    utcOffset,\n  };\n}\n\nexport function buildApiChatLink(data: GramJs.account.ResolvedBusinessChatLinks): ApiChatLink {\n  const chatId = getApiChatIdFromMtpPeer(data.peer);\n  return {\n    chatId,\n    text: buildMessageTextContent(data.message, data.entities),\n  };\n}\n\nexport function buildApiCollectibleInfo(info: GramJs.fragment.TypeCollectibleInfo): ApiCollectionInfo {\n  const {\n    amount,\n    currency,\n    cryptoAmount,\n    cryptoCurrency,\n    purchaseDate,\n    url,\n  } = info;\n\n  return {\n    amount: amount.toJSNumber(),\n    currency,\n    cryptoAmount: cryptoAmount.toJSNumber(),\n    cryptoCurrency,\n    purchaseDate,\n    url,\n  };\n}\n","import { Api as GramJs } from '../../../lib/gramjs';\n\nimport type { ApiPremiumSection } from '../../../global/types';\nimport type {\n  ApiBoost,\n  ApiBoostsStatus,\n  ApiCheckedGiftCode,\n  ApiGiveawayInfo,\n  ApiInvoice, ApiLabeledPrice, ApiMyBoost, ApiPaymentCredentials,\n  ApiPaymentForm, ApiPaymentSavedInfo, ApiPremiumGiftCodeOption, ApiPremiumPromo, ApiPremiumSubscriptionOption,\n  ApiReceipt,\n  ApiStarsTransaction,\n  ApiStarsTransactionPeer,\n  ApiStarTopupOption,\n  BoughtPaidMedia,\n} from '../../types';\n\nimport { addWebDocumentToLocalDb } from '../helpers';\nimport { buildApiMessageEntity } from './common';\nimport { omitVirtualClassFields } from './helpers';\nimport { buildApiDocument, buildApiWebDocument, buildMessageMediaContent } from './messageContent';\nimport { buildApiPeerId, getApiChatIdFromMtpPeer } from './peers';\nimport { buildPrepaidGiveaway, buildStatisticsPercentage } from './statistics';\n\nexport function buildShippingOptions(shippingOptions: GramJs.ShippingOption[] | undefined) {\n  if (!shippingOptions) {\n    return undefined;\n  }\n\n  return Object.values(shippingOptions).map((option) => {\n    return {\n      id: option.id,\n      title: option.title,\n      amount: option.prices.reduce((ac, cur) => ac + cur.amount.toJSNumber(), 0),\n      prices: option.prices.map(({ label, amount }) => {\n        return {\n          label,\n          amount: amount.toJSNumber(),\n        };\n      }),\n    };\n  });\n}\n\nexport function buildApiReceipt(receipt: GramJs.payments.TypePaymentReceipt): ApiReceipt {\n  const { photo } = receipt;\n\n  if (photo) {\n    addWebDocumentToLocalDb(photo);\n  }\n\n  if (receipt instanceof GramJs.payments.PaymentReceiptStars) {\n    const {\n      botId, currency, date, description: text, title, totalAmount, transactionId,\n    } = receipt;\n\n    if (photo) {\n      addWebDocumentToLocalDb(photo);\n    }\n\n    return {\n      type: 'stars',\n      currency,\n      botId: buildApiPeerId(botId, 'user'),\n      date,\n      text,\n      title,\n      totalAmount: -totalAmount.toJSNumber(),\n      transactionId,\n      photo: photo && buildApiWebDocument(photo),\n    };\n  }\n\n  const {\n    invoice,\n    info,\n    shipping,\n    currency,\n    totalAmount,\n    credentialsTitle,\n    tipAmount,\n    title,\n    description: text,\n  } = receipt;\n\n  const { shippingAddress, phone, name } = (info || {});\n\n  const { prices } = invoice;\n  const mappedPrices: ApiLabeledPrice[] = prices.map(({ label, amount }) => ({\n    label,\n    amount: amount.toJSNumber(),\n  }));\n\n  let shippingPrices: ApiLabeledPrice[] | undefined;\n  let shippingMethod: string | undefined;\n\n  if (shipping) {\n    shippingPrices = shipping.prices.map(({ label, amount }) => {\n      return {\n        label,\n        amount: amount.toJSNumber(),\n      };\n    });\n    shippingMethod = shipping.title;\n  }\n\n  return {\n    type: 'regular',\n    currency,\n    prices: mappedPrices,\n    info: { shippingAddress, phone, name },\n    totalAmount: totalAmount.toJSNumber(),\n    credentialsTitle,\n    shippingPrices,\n    shippingMethod,\n    tipAmount: tipAmount ? tipAmount.toJSNumber() : 0,\n    title,\n    text,\n    photo: photo && buildApiWebDocument(photo),\n  };\n}\n\nexport function buildApiPaymentForm(form: GramJs.payments.TypePaymentForm): ApiPaymentForm {\n  if (form instanceof GramJs.payments.PaymentFormStars) {\n    const { botId, formId } = form;\n\n    return {\n      type: 'stars',\n      botId: buildApiPeerId(botId, 'user'),\n      formId: String(formId),\n    };\n  }\n\n  const {\n    formId,\n    canSaveCredentials,\n    passwordMissing: isPasswordMissing,\n    providerId,\n    nativeProvider,\n    nativeParams,\n    savedInfo,\n    invoice,\n    savedCredentials,\n    url,\n    botId,\n  } = form;\n\n  const {\n    test: isTest,\n    nameRequested: isNameRequested,\n    phoneRequested: isPhoneRequested,\n    emailRequested: isEmailRequested,\n    shippingAddressRequested: isShippingAddressRequested,\n    flexible: isFlexible,\n    phoneToProvider: shouldSendPhoneToProvider,\n    emailToProvider: shouldSendEmailToProvider,\n    currency,\n    prices,\n  } = invoice;\n\n  const mappedPrices: ApiLabeledPrice[] = prices.map(({ label, amount }) => ({\n    label,\n    amount: amount.toJSNumber(),\n  }));\n  const { shippingAddress } = savedInfo || {};\n  const cleanedInfo: ApiPaymentSavedInfo | undefined = savedInfo ? omitVirtualClassFields(savedInfo) : undefined;\n  if (cleanedInfo && shippingAddress) {\n    cleanedInfo.shippingAddress = omitVirtualClassFields(shippingAddress);\n  }\n\n  const nativeData = nativeParams ? JSON.parse(nativeParams.data) : {};\n\n  return {\n    type: 'regular',\n    url,\n    botId: buildApiPeerId(botId, 'user'),\n    canSaveCredentials,\n    isPasswordMissing,\n    formId: String(formId),\n    providerId: String(providerId),\n    nativeProvider,\n    savedInfo: cleanedInfo,\n    invoiceContainer: {\n      isTest,\n      isNameRequested,\n      isPhoneRequested,\n      isEmailRequested,\n      isShippingAddressRequested,\n      isFlexible,\n      shouldSendPhoneToProvider,\n      shouldSendEmailToProvider,\n      currency,\n      prices: mappedPrices,\n    },\n    nativeParams: {\n      needCardholderName: Boolean(nativeData?.need_cardholder_name),\n      needCountry: Boolean(nativeData?.need_country),\n      needZip: Boolean(nativeData?.need_zip),\n      publishableKey: nativeData?.publishable_key,\n      publicToken: nativeData?.public_token,\n      tokenizeUrl: nativeData?.tokenize_url,\n    },\n    savedCredentials: savedCredentials && buildApiPaymentCredentials(savedCredentials),\n  };\n}\n\nexport function buildApiInvoiceFromForm(form: GramJs.payments.TypePaymentForm): ApiInvoice {\n  const {\n    invoice, description: text, title, photo,\n  } = form;\n  const {\n    test, currency, prices, recurring, termsUrl, maxTipAmount, suggestedTipAmounts,\n  } = invoice;\n\n  const totalAmount = prices.reduce((ac, cur) => ac + cur.amount.toJSNumber(), 0);\n\n  return {\n    mediaType: 'invoice',\n    text,\n    title,\n    photo: buildApiWebDocument(photo),\n    amount: totalAmount,\n    currency,\n    isTest: test,\n    isRecurring: recurring,\n    termsUrl,\n    maxTipAmount: maxTipAmount?.toJSNumber(),\n    ...(suggestedTipAmounts && { suggestedTipAmounts: suggestedTipAmounts.map((tip) => tip.toJSNumber()) }),\n  };\n}\n\nexport function buildApiPremiumPromo(promo: GramJs.help.PremiumPromo): ApiPremiumPromo {\n  const {\n    statusText, statusEntities, videos, videoSections, periodOptions,\n  } = promo;\n\n  return {\n    statusText,\n    statusEntities: statusEntities.map(buildApiMessageEntity),\n    videoSections: videoSections as ApiPremiumSection[],\n    videos: videos.map(buildApiDocument).filter(Boolean),\n    options: periodOptions.map(buildApiPremiumSubscriptionOption),\n  };\n}\n\nfunction buildApiPremiumSubscriptionOption(option: GramJs.PremiumSubscriptionOption): ApiPremiumSubscriptionOption {\n  const {\n    current, canPurchaseUpgrade, currency, amount, botUrl, months,\n  } = option;\n\n  return {\n    isCurrent: current,\n    canPurchaseUpgrade,\n    currency,\n    amount: amount.toJSNumber(),\n    botUrl,\n    months,\n  };\n}\n\nexport function buildApiPaymentCredentials(credentials: GramJs.PaymentSavedCredentialsCard[]): ApiPaymentCredentials[] {\n  return credentials.map(({ id, title }) => ({ id, title }));\n}\n\nexport function buildApiBoostsStatus(boostStatus: GramJs.premium.BoostsStatus): ApiBoostsStatus {\n  const {\n    level, boostUrl, boosts, myBoost, currentLevelBoosts, nextLevelBoosts, premiumAudience, prepaidGiveaways,\n  } = boostStatus;\n  return {\n    level,\n    currentLevelBoosts,\n    boosts,\n    hasMyBoost: Boolean(myBoost),\n    boostUrl,\n    nextLevelBoosts,\n    ...(premiumAudience && { premiumSubscribers: buildStatisticsPercentage(premiumAudience) }),\n    ...(prepaidGiveaways && { prepaidGiveaways: prepaidGiveaways.map(buildPrepaidGiveaway) }),\n  };\n}\n\nexport function buildApiBoost(boost: GramJs.Boost): ApiBoost {\n  const {\n    userId,\n    multiplier,\n    expires,\n    giveaway,\n    gift,\n  } = boost;\n\n  return {\n    userId: userId && buildApiPeerId(userId, 'user'),\n    multiplier,\n    expires,\n    isFromGiveaway: giveaway,\n    isGift: gift,\n  };\n}\n\nexport function buildApiMyBoost(myBoost: GramJs.MyBoost): ApiMyBoost {\n  const {\n    date, expires, slot, cooldownUntilDate, peer,\n  } = myBoost;\n\n  return {\n    date,\n    expires,\n    slot,\n    cooldownUntil: cooldownUntilDate,\n    chatId: peer && getApiChatIdFromMtpPeer(peer),\n  };\n}\n\nexport function buildApiGiveawayInfo(info: GramJs.payments.TypeGiveawayInfo): ApiGiveawayInfo | undefined {\n  if (info instanceof GramJs.payments.GiveawayInfo) {\n    const {\n      startDate,\n      adminDisallowedChatId,\n      disallowedCountry,\n      joinedTooEarlyDate,\n      participating,\n      preparingResults,\n    } = info;\n\n    return {\n      type: 'active',\n      startDate,\n      isParticipating: participating,\n      adminDisallowedChatId: adminDisallowedChatId && buildApiPeerId(adminDisallowedChatId, 'channel'),\n      disallowedCountry,\n      joinedTooEarlyDate,\n      isPreparingResults: preparingResults,\n    };\n  } else {\n    const {\n      activatedCount,\n      finishDate,\n      giftCodeSlug,\n      winner,\n      refunded,\n      startDate,\n      winnersCount,\n    } = info;\n\n    return {\n      type: 'results',\n      startDate,\n      activatedCount,\n      finishDate,\n      winnersCount,\n      giftCodeSlug,\n      isRefunded: refunded,\n      isWinner: winner,\n    };\n  }\n}\n\nexport function buildApiCheckedGiftCode(giftcode: GramJs.payments.TypeCheckedGiftCode): ApiCheckedGiftCode {\n  const {\n    date, fromId, months, giveawayMsgId, toId, usedDate, viaGiveaway,\n  } = giftcode;\n\n  return {\n    date,\n    months,\n    toId: toId && buildApiPeerId(toId, 'user'),\n    fromId: fromId && getApiChatIdFromMtpPeer(fromId),\n    usedAt: usedDate,\n    isFromGiveaway: viaGiveaway,\n    giveawayMessageId: giveawayMsgId,\n  };\n}\n\nexport function buildApiPremiumGiftCodeOption(option: GramJs.PremiumGiftCodeOption): ApiPremiumGiftCodeOption {\n  const {\n    amount, currency, months, users,\n  } = option;\n\n  return {\n    amount: amount.toJSNumber(),\n    currency,\n    months,\n    users,\n  };\n}\n\nexport function buildApiStarsTransactionPeer(peer: GramJs.TypeStarsTransactionPeer): ApiStarsTransactionPeer {\n  if (peer instanceof GramJs.StarsTransactionPeerAppStore) {\n    return { type: 'appStore' };\n  }\n\n  if (peer instanceof GramJs.StarsTransactionPeerPlayMarket) {\n    return { type: 'playMarket' };\n  }\n\n  if (peer instanceof GramJs.StarsTransactionPeerPremiumBot) {\n    return { type: 'premiumBot' };\n  }\n\n  if (peer instanceof GramJs.StarsTransactionPeerFragment) {\n    return { type: 'fragment' };\n  }\n\n  if (peer instanceof GramJs.StarsTransactionPeerAds) {\n    return { type: 'ads' };\n  }\n\n  if (peer instanceof GramJs.StarsTransactionPeer) {\n    return { type: 'peer', id: getApiChatIdFromMtpPeer(peer.peer) };\n  }\n\n  return { type: 'unsupported' };\n}\n\nexport function buildApiStarsTransaction(transaction: GramJs.StarsTransaction): ApiStarsTransaction {\n  const {\n    date, id, peer, stars, description, photo, title, refund, extendedMedia, failed, msgId, pending,\n  } = transaction;\n\n  if (photo) {\n    addWebDocumentToLocalDb(photo);\n  }\n\n  const boughtExtendedMedia = extendedMedia?.map((m) => buildMessageMediaContent(m))\n    .filter(Boolean) as BoughtPaidMedia[];\n\n  return {\n    id,\n    date,\n    peer: buildApiStarsTransactionPeer(peer),\n    stars: stars.toJSNumber(),\n    title,\n    description,\n    photo: photo && buildApiWebDocument(photo),\n    isRefund: refund,\n    hasFailed: failed,\n    isPending: pending,\n    messageId: msgId,\n    extendedMedia: boughtExtendedMedia,\n  };\n}\n\nexport function buildApiStarTopupOption(option: GramJs.TypeStarsTopupOption): ApiStarTopupOption {\n  const {\n    amount, currency, stars, extended,\n  } = option;\n\n  return {\n    amount: amount.toJSNumber(),\n    currency,\n    stars: stars.toJSNumber(),\n    isExtended: extended,\n  };\n}\n","import { Api as GramJs } from '../../../lib/gramjs';\n\nimport type {\n  ApiChannelStatistics,\n  ApiGroupStatistics,\n  ApiMessagePublicForward,\n  ApiPostStatistics,\n  ApiStoryPublicForward,\n  PrepaidGiveaway, StatisticsGraph,\n  StatisticsMessageInteractionCounter,\n  StatisticsOverviewItem,\n  StatisticsOverviewPercentage,\n  StatisticsOverviewPeriod,\n  StatisticsStoryInteractionCounter,\n} from '../../types';\n\nimport { buildAvatarHash } from './chats';\nimport { buildApiUsernames } from './common';\nimport { buildApiPeerId, getApiChatIdFromMtpPeer } from './peers';\n\nexport function buildChannelStatistics(stats: GramJs.stats.BroadcastStats): ApiChannelStatistics {\n  return {\n    // Graphs\n    growthGraph: buildGraph(stats.growthGraph),\n    followersGraph: buildGraph(stats.followersGraph),\n    muteGraph: buildGraph(stats.muteGraph),\n    topHoursGraph: buildGraph(stats.topHoursGraph),\n\n    // Async graphs\n    languagesGraph: (stats.languagesGraph as GramJs.StatsGraphAsync).token,\n    viewsBySourceGraph: (stats.viewsBySourceGraph as GramJs.StatsGraphAsync).token,\n    newFollowersBySourceGraph: (stats.newFollowersBySourceGraph as GramJs.StatsGraphAsync).token,\n    interactionsGraph: (stats.interactionsGraph as GramJs.StatsGraphAsync).token,\n    reactionsByEmotionGraph: (stats.reactionsByEmotionGraph as GramJs.StatsGraphAsync).token,\n    storyInteractionsGraph: (stats.storyInteractionsGraph as GramJs.StatsGraphAsync).token,\n    storyReactionsByEmotionGraph: (stats.storyReactionsByEmotionGraph as GramJs.StatsGraphAsync).token,\n\n    // Statistics overview\n    followers: buildStatisticsOverview(stats.followers),\n    viewsPerPost: buildStatisticsOverview(stats.viewsPerPost),\n    sharesPerPost: buildStatisticsOverview(stats.sharesPerPost),\n    enabledNotifications: buildStatisticsPercentage(stats.enabledNotifications),\n    reactionsPerPost: buildStatisticsOverview(stats.reactionsPerPost),\n    viewsPerStory: buildStatisticsOverview(stats.viewsPerStory),\n    sharesPerStory: buildStatisticsOverview(stats.sharesPerStory),\n    reactionsPerStory: buildStatisticsOverview(stats.reactionsPerStory),\n\n    // Recent posts\n    recentPosts: stats.recentPostsInteractions.map(buildApiPostInteractionCounter).filter(Boolean),\n  };\n}\n\nexport function buildApiPostInteractionCounter(\n  interaction: GramJs.TypePostInteractionCounters,\n): StatisticsMessageInteractionCounter | StatisticsStoryInteractionCounter | undefined {\n  if (interaction instanceof GramJs.PostInteractionCountersMessage) {\n    return {\n      msgId: interaction.msgId,\n      forwardsCount: interaction.forwards,\n      viewsCount: interaction.views,\n      reactionsCount: interaction.reactions,\n    };\n  }\n\n  if (interaction instanceof GramJs.PostInteractionCountersStory) {\n    return {\n      storyId: interaction.storyId,\n      reactionsCount: interaction.reactions,\n      viewsCount: interaction.views,\n      forwardsCount: interaction.forwards,\n    };\n  }\n\n  return undefined;\n}\n\nexport function buildGroupStatistics(stats: GramJs.stats.MegagroupStats): ApiGroupStatistics {\n  return {\n    // Graphs\n    growthGraph: buildGraph(stats.growthGraph),\n    membersGraph: buildGraph(stats.membersGraph),\n    topHoursGraph: buildGraph(stats.topHoursGraph),\n\n    // Async graphs\n    languagesGraph: (stats.languagesGraph as GramJs.StatsGraphAsync).token,\n    messagesGraph: (stats.messagesGraph as GramJs.StatsGraphAsync).token,\n    actionsGraph: (stats.actionsGraph as GramJs.StatsGraphAsync).token,\n\n    // Statistics overview\n    period: getOverviewPeriod(stats.period),\n    members: buildStatisticsOverview(stats.members),\n    viewers: buildStatisticsOverview(stats.viewers),\n    messages: buildStatisticsOverview(stats.messages),\n    posters: buildStatisticsOverview(stats.posters),\n  };\n}\n\nexport function buildPostsStatistics(stats: GramJs.stats.MessageStats): ApiPostStatistics {\n  return {\n    viewsGraph: buildGraph(stats.viewsGraph),\n    reactionsGraph: buildGraph(stats.reactionsByEmotionGraph),\n  };\n}\n\nexport function buildMessagePublicForwards(\n  result: GramJs.messages.TypeMessages,\n): ApiMessagePublicForward[] | undefined {\n  if (!result || !('messages' in result)) {\n    return undefined;\n  }\n\n  return result.messages.map((message) => buildApiMessagePublicForward(message, result.chats));\n}\n\nexport function buildStoryPublicForwards(\n  result: GramJs.stats.PublicForwards,\n): Array<ApiStoryPublicForward | ApiMessagePublicForward> | undefined {\n  if (!result || !('forwards' in result)) {\n    return undefined;\n  }\n\n  return result.forwards.map((forward) => {\n    if (forward instanceof GramJs.PublicForwardMessage) {\n      return buildApiMessagePublicForward(forward.message, result.chats);\n    }\n\n    const { peer, story } = forward;\n    const peerId = getApiChatIdFromMtpPeer(peer);\n\n    return {\n      peerId,\n      storyId: story.id,\n      viewsCount: (story as GramJs.StoryItem).views?.viewsCount || 0,\n      reactionsCount: (story as GramJs.StoryItem).views?.reactionsCount || 0,\n    } as ApiStoryPublicForward;\n  });\n}\n\nexport function buildGraph(\n  result: GramJs.TypeStatsGraph, isPercentage?: boolean,\n): StatisticsGraph | undefined {\n  if ((result as GramJs.StatsGraphError).error) {\n    return undefined;\n  }\n\n  const data = JSON.parse((result as GramJs.StatsGraph).json.data);\n  const [x, ...y] = data.columns;\n  const hasSecondYAxis = data.y_scaled;\n\n  return {\n    type: isPercentage ? 'area' : data.types.y0,\n    zoomToken: (result as GramJs.StatsGraph).zoomToken,\n    labelFormatter: data.xTickFormatter,\n    tooltipFormatter: data.xTooltipFormatter,\n    labels: x.slice(1),\n    hideCaption: !data.subchart.show,\n    hasSecondYAxis,\n    isStacked: data.stacked && !hasSecondYAxis,\n    isPercentage,\n    datasets: y.map((item: any) => {\n      const key = item[0];\n\n      return {\n        name: data.names[key],\n        color: extractColor(data.colors[key]),\n        values: item.slice(1),\n      };\n    }),\n    ...calculateMinimapRange(data.subchart.defaultZoom, x.slice(1)),\n  };\n}\n\nfunction extractColor(color: string): string {\n  return color.substring(color.indexOf('#'));\n}\n\nfunction calculateMinimapRange(range: Array<number>, values: Array<number>) {\n  const [min, max] = range;\n\n  let minIndex = 0;\n  let maxIndex = values.length - 1;\n\n  values.forEach((item, index) => {\n    if (!minIndex && item >= min) {\n      minIndex = index;\n    }\n\n    if (!maxIndex && item >= max) {\n      maxIndex = index;\n    }\n  });\n\n  const begin = Math.max(0, minIndex / (values.length - 1));\n  const end = Math.min(1, maxIndex / (values.length - 1));\n\n  return { minimapRange: { begin, end }, labelFromIndex: minIndex, labelToIndex: maxIndex };\n}\n\nfunction buildStatisticsOverview({ current, previous }: GramJs.StatsAbsValueAndPrev): StatisticsOverviewItem {\n  const change = current - previous;\n\n  return {\n    current,\n    change,\n    ...(previous && { percentage: (change ? ((Math.abs(change) / previous) * 100) : 0).toFixed(2) }),\n  };\n}\n\nexport function buildStatisticsPercentage(data: GramJs.StatsPercentValue): StatisticsOverviewPercentage {\n  return {\n    part: data.part,\n    total: data.total,\n    percentage: ((data.part / data.total) * 100).toFixed(2),\n  };\n}\n\nexport function buildPrepaidGiveaway(prepaidGiveaway: GramJs.PrepaidGiveaway): PrepaidGiveaway {\n  return {\n    id: prepaidGiveaway.id.toString(),\n    date: prepaidGiveaway.date,\n    months: prepaidGiveaway.months,\n    quantity: prepaidGiveaway.quantity,\n  };\n}\n\nfunction getOverviewPeriod(data: GramJs.StatsDateRangeDays): StatisticsOverviewPeriod {\n  return {\n    maxDate: data.maxDate,\n    minDate: data.minDate,\n  };\n}\n\nfunction buildApiMessagePublicForward(message: GramJs.TypeMessage, chats: GramJs.TypeChat[]): ApiMessagePublicForward {\n  const peerId = getApiChatIdFromMtpPeer(message.peerId!);\n  const channel = chats.find((c) => buildApiPeerId(c.id, 'channel') === peerId);\n\n  return {\n    messageId: message.id,\n    views: (message as GramJs.Message).views,\n    title: (channel as GramJs.Channel).title,\n    chat: {\n      id: peerId,\n      type: 'chatTypeChannel',\n      title: (channel as GramJs.Channel).title,\n      usernames: buildApiUsernames(channel as GramJs.Channel),\n      avatarHash: channel && 'photo' in channel\n        ? buildAvatarHash((channel as GramJs.Channel).photo)\n        : undefined,\n    },\n  };\n}\n","import { Api as GramJs } from '../../../lib/gramjs';\n\nimport type {\n  ApiMediaArea,\n  ApiMediaAreaCoordinates,\n  ApiStealthMode,\n  ApiStory,\n  ApiStoryForwardInfo,\n  ApiStoryView,\n  ApiStoryViews,\n  ApiTypeStory,\n  ApiTypeStoryView,\n  MediaContent,\n} from '../../types';\n\nimport { buildCollectionByCallback, omitUndefined } from '../../../util/iteratees';\nimport { buildPrivacyRules } from './common';\nimport { buildGeoPoint, buildMessageMediaContent, buildMessageTextContent } from './messageContent';\nimport { buildApiMessage } from './messages';\nimport { buildApiPeerId, getApiChatIdFromMtpPeer } from './peers';\nimport { buildApiReaction, buildReactionCount } from './reactions';\n\nexport function buildApiStory(peerId: string, story: GramJs.TypeStoryItem): ApiTypeStory {\n  if (story instanceof GramJs.StoryItemDeleted) {\n    return {\n      id: story.id,\n      peerId,\n      isDeleted: true,\n    };\n  }\n\n  if (story instanceof GramJs.StoryItemSkipped) {\n    const {\n      id, date, expireDate, closeFriends,\n    } = story;\n\n    return {\n      id,\n      peerId,\n      ...(closeFriends && { isForCloseFriends: true }),\n      date,\n      expireDate,\n    };\n  }\n\n  const {\n    edited, pinned, expireDate, id, date, caption,\n    entities, media, privacy, views,\n    public: isPublic, noforwards, closeFriends, contacts, selectedContacts,\n    mediaAreas, sentReaction, out, fwdFrom, fromId,\n  } = story;\n\n  const content: MediaContent = {\n    ...buildMessageMediaContent(media),\n  };\n\n  if (caption) {\n    content.text = buildMessageTextContent(caption, entities);\n  }\n\n  return omitUndefined<ApiStory>({\n    id,\n    peerId,\n    date,\n    expireDate,\n    content,\n    isPublic,\n    isEdited: edited,\n    isInProfile: pinned,\n    isForContacts: contacts,\n    isForSelectedContacts: selectedContacts,\n    isForCloseFriends: closeFriends,\n    noForwards: noforwards,\n    views: views && buildApiStoryViews(views),\n    isOut: out,\n    visibility: privacy && buildPrivacyRules(privacy),\n    mediaAreas: mediaAreas?.map(buildApiMediaArea).filter(Boolean),\n    sentReaction: sentReaction && buildApiReaction(sentReaction),\n    forwardInfo: fwdFrom && buildApiStoryForwardInfo(fwdFrom),\n    fromId: fromId && getApiChatIdFromMtpPeer(fromId),\n  });\n}\n\nexport function buildApiStoryViews(views: GramJs.TypeStoryViews): ApiStoryViews {\n  return omitUndefined<ApiStoryViews>({\n    hasViewers: views.hasViewers,\n    viewsCount: views.viewsCount,\n    forwardsCount: views.forwardsCount,\n    reactionsCount: views.reactionsCount,\n    reactions: views.reactions?.map(buildReactionCount).filter(Boolean),\n    recentViewerIds: views.recentViewers?.map((viewerId) => buildApiPeerId(viewerId, 'user')),\n  });\n}\n\nexport function buildApiStoryView(view: GramJs.TypeStoryView): ApiTypeStoryView | undefined {\n  const {\n    blockedMyStoriesFrom, blocked,\n  } = view;\n\n  if (view instanceof GramJs.StoryView) {\n    return omitUndefined<ApiStoryView>({\n      type: 'user',\n      peerId: buildApiPeerId(view.userId, 'user'),\n      date: view.date,\n      reaction: view.reaction && buildApiReaction(view.reaction),\n      areStoriesBlocked: blocked || blockedMyStoriesFrom,\n      isUserBlocked: blocked,\n    });\n  }\n\n  if (view instanceof GramJs.StoryViewPublicForward) {\n    const message = buildApiMessage(view.message);\n    if (!message) return undefined;\n    return {\n      type: 'forward',\n      peerId: message.chatId,\n      messageId: message.id,\n      message,\n      date: message.date,\n      areStoriesBlocked: blocked || blockedMyStoriesFrom,\n      isUserBlocked: blocked,\n    };\n  }\n\n  if (view instanceof GramJs.StoryViewPublicRepost) {\n    const peerId = getApiChatIdFromMtpPeer(view.peerId);\n    const story = buildApiStory(peerId, view.story);\n    if (!('content' in story)) return undefined;\n\n    return {\n      type: 'repost',\n      peerId,\n      storyId: view.story.id,\n      date: story.date,\n      story,\n      areStoriesBlocked: blocked || blockedMyStoriesFrom,\n      isUserBlocked: blocked,\n    };\n  }\n\n  return undefined;\n}\n\nexport function buildApiStealthMode(stealthMode: GramJs.TypeStoriesStealthMode): ApiStealthMode {\n  return {\n    activeUntil: stealthMode.activeUntilDate,\n    cooldownUntil: stealthMode.cooldownUntilDate,\n  };\n}\n\nfunction buildApiMediaAreaCoordinates(coordinates: GramJs.TypeMediaAreaCoordinates): ApiMediaAreaCoordinates {\n  const {\n    x, y, w, h, rotation, radius,\n  } = coordinates;\n\n  return {\n    x,\n    y,\n    width: w,\n    height: h,\n    rotation,\n    radius,\n  };\n}\n\nexport function buildApiMediaArea(area: GramJs.TypeMediaArea): ApiMediaArea | undefined {\n  if (area instanceof GramJs.MediaAreaVenue) {\n    const { geo, title, coordinates } = area;\n    const point = buildGeoPoint(geo);\n\n    if (!point) return undefined;\n\n    return {\n      type: 'venue',\n      coordinates: buildApiMediaAreaCoordinates(coordinates),\n      geo: point,\n      title,\n    };\n  }\n\n  if (area instanceof GramJs.MediaAreaGeoPoint) {\n    const { geo, coordinates } = area;\n    const point = buildGeoPoint(geo);\n\n    if (!point) return undefined;\n\n    return {\n      type: 'geoPoint',\n      coordinates: buildApiMediaAreaCoordinates(coordinates),\n      geo: point,\n    };\n  }\n\n  if (area instanceof GramJs.MediaAreaSuggestedReaction) {\n    const {\n      coordinates, reaction, dark, flipped,\n    } = area;\n\n    const apiReaction = buildApiReaction(reaction);\n    if (!apiReaction) return undefined;\n\n    return {\n      type: 'suggestedReaction',\n      coordinates: buildApiMediaAreaCoordinates(coordinates),\n      reaction: apiReaction,\n      ...(dark && { isDark: true }),\n      ...(flipped && { isFlipped: true }),\n    };\n  }\n\n  if (area instanceof GramJs.MediaAreaChannelPost) {\n    const { coordinates, channelId, msgId } = area;\n\n    return {\n      type: 'channelPost',\n      coordinates: buildApiMediaAreaCoordinates(coordinates),\n      channelId: buildApiPeerId(channelId, 'channel'),\n      messageId: msgId,\n    };\n  }\n\n  if (area instanceof GramJs.MediaAreaUrl) {\n    const { coordinates, url } = area;\n\n    return {\n      type: 'url',\n      coordinates: buildApiMediaAreaCoordinates(coordinates),\n      url,\n    };\n  }\n\n  return undefined;\n}\n\nexport function buildApiPeerStories(peerStories: GramJs.PeerStories) {\n  const peerId = getApiChatIdFromMtpPeer(peerStories.peer);\n\n  return buildCollectionByCallback(peerStories.stories, (story) => [story.id, buildApiStory(peerId, story)]);\n}\n\nexport function buildApiStoryForwardInfo(forwardHeader: GramJs.TypeStoryFwdHeader): ApiStoryForwardInfo {\n  const {\n    from, fromName, storyId, modified,\n  } = forwardHeader;\n\n  return {\n    storyId,\n    fromPeerId: from && getApiChatIdFromMtpPeer(from),\n    fromName,\n    isModified: modified,\n  };\n}\n","import { Api as GramJs } from '../../../lib/gramjs';\n\nimport type {\n  ApiBirthday,\n  ApiPremiumGiftOption,\n  ApiUser,\n  ApiUserFullInfo,\n  ApiUserStatus,\n  ApiUserType,\n} from '../../types';\n\nimport { buildApiBotInfo } from './bots';\nimport { buildApiBusinessIntro, buildApiBusinessLocation, buildApiBusinessWorkHours } from './business';\nimport { buildApiPhoto, buildApiUsernames } from './common';\nimport { omitVirtualClassFields } from './helpers';\nimport { buildApiEmojiStatus, buildApiPeerColor, buildApiPeerId } from './peers';\n\nexport function buildApiUserFullInfo(mtpUserFull: GramJs.users.UserFull): ApiUserFullInfo {\n  const {\n    fullUser: {\n      about, commonChatsCount, pinnedMsgId, botInfo, blocked,\n      profilePhoto, voiceMessagesForbidden, premiumGifts,\n      fallbackPhoto, personalPhoto, translationsDisabled, storiesPinnedAvailable,\n      contactRequirePremium, businessWorkHours, businessLocation, businessIntro,\n      birthday, personalChannelId, personalChannelMessage, sponsoredEnabled,\n    },\n    users,\n  } = mtpUserFull;\n\n  const userId = buildApiPeerId(users[0].id, 'user');\n\n  return {\n    bio: about,\n    commonChatsCount,\n    pinnedMessageId: pinnedMsgId,\n    isBlocked: Boolean(blocked),\n    noVoiceMessages: voiceMessagesForbidden,\n    hasPinnedStories: Boolean(storiesPinnedAvailable),\n    isTranslationDisabled: translationsDisabled,\n    profilePhoto: profilePhoto instanceof GramJs.Photo ? buildApiPhoto(profilePhoto) : undefined,\n    fallbackPhoto: fallbackPhoto instanceof GramJs.Photo ? buildApiPhoto(fallbackPhoto) : undefined,\n    personalPhoto: personalPhoto instanceof GramJs.Photo ? buildApiPhoto(personalPhoto) : undefined,\n    premiumGifts: premiumGifts?.map((gift) => buildApiPremiumGiftOption(gift)),\n    botInfo: botInfo && buildApiBotInfo(botInfo, userId),\n    isContactRequirePremium: contactRequirePremium,\n    birthday: birthday && buildApiBirthday(birthday),\n    businessLocation: businessLocation && buildApiBusinessLocation(businessLocation),\n    businessWorkHours: businessWorkHours && buildApiBusinessWorkHours(businessWorkHours),\n    businessIntro: businessIntro && buildApiBusinessIntro(businessIntro),\n    personalChannelId: personalChannelId && buildApiPeerId(personalChannelId, 'channel'),\n    personalChannelMessageId: personalChannelMessage,\n    areAdsEnabled: sponsoredEnabled,\n  };\n}\n\nexport function buildApiUser(mtpUser: GramJs.TypeUser): ApiUser | undefined {\n  if (!(mtpUser instanceof GramJs.User)) {\n    return undefined;\n  }\n\n  const {\n    id, firstName, lastName, fake, scam, support, closeFriend, storiesUnavailable, storiesMaxId,\n  } = mtpUser;\n  const hasVideoAvatar = mtpUser.photo instanceof GramJs.UserProfilePhoto\n    ? Boolean(mtpUser.photo.hasVideo)\n    : undefined;\n  const avatarHash = mtpUser.photo instanceof GramJs.UserProfilePhoto\n    ? String(mtpUser.photo.photoId)\n    : undefined;\n  const userType = buildApiUserType(mtpUser);\n  const usernames = buildApiUsernames(mtpUser);\n  const emojiStatus = mtpUser.emojiStatus ? buildApiEmojiStatus(mtpUser.emojiStatus) : undefined;\n\n  return {\n    id: buildApiPeerId(id, 'user'),\n    isMin: Boolean(mtpUser.min),\n    fakeType: scam ? 'scam' : (fake ? 'fake' : undefined),\n    ...(mtpUser.self && { isSelf: true }),\n    isPremium: Boolean(mtpUser.premium),\n    ...(mtpUser.verified && { isVerified: true }),\n    ...(closeFriend && { isCloseFriend: true }),\n    ...(support && { isSupport: true }),\n    ...((mtpUser.contact || mtpUser.mutualContact) && { isContact: true }),\n    type: userType,\n    firstName,\n    lastName,\n    canEditBot: Boolean(mtpUser.botCanEdit),\n    ...(userType === 'userTypeBot' && { canBeInvitedToGroup: !mtpUser.botNochats }),\n    ...(usernames && { usernames }),\n    phoneNumber: mtpUser.phone || '',\n    noStatus: !mtpUser.status,\n    ...(mtpUser.accessHash && { accessHash: String(mtpUser.accessHash) }),\n    ...(avatarHash && { avatarHash }),\n    emojiStatus,\n    hasVideoAvatar,\n    areStoriesHidden: Boolean(mtpUser.storiesHidden),\n    maxStoryId: storiesMaxId,\n    hasStories: Boolean(storiesMaxId) && !storiesUnavailable,\n    ...(mtpUser.bot && mtpUser.botInlinePlaceholder && { botPlaceholder: mtpUser.botInlinePlaceholder }),\n    ...(mtpUser.bot && mtpUser.botAttachMenu && { isAttachBot: mtpUser.botAttachMenu }),\n    color: mtpUser.color && buildApiPeerColor(mtpUser.color),\n  };\n}\n\nfunction buildApiUserType(user: GramJs.User): ApiUserType {\n  if (user.bot) {\n    return 'userTypeBot';\n  }\n  if (user.deleted) {\n    return 'userTypeDeleted';\n  }\n\n  return 'userTypeRegular';\n}\n\nexport function buildApiUserStatus(mtpStatus?: GramJs.TypeUserStatus): ApiUserStatus {\n  if (!mtpStatus || mtpStatus instanceof GramJs.UserStatusEmpty) {\n    return { type: 'userStatusEmpty' };\n  } else if (mtpStatus instanceof GramJs.UserStatusOnline) {\n    return { type: 'userStatusOnline', expires: mtpStatus.expires };\n  } else if (mtpStatus instanceof GramJs.UserStatusOffline) {\n    return { type: 'userStatusOffline', wasOnline: mtpStatus.wasOnline };\n  } else if (mtpStatus instanceof GramJs.UserStatusRecently) {\n    return { type: 'userStatusRecently', isReadDateRestrictedByMe: mtpStatus.byMe };\n  } else if (mtpStatus instanceof GramJs.UserStatusLastWeek) {\n    return { type: 'userStatusLastWeek', isReadDateRestrictedByMe: mtpStatus.byMe };\n  } else {\n    return { type: 'userStatusLastMonth', isReadDateRestrictedByMe: mtpStatus.byMe };\n  }\n}\n\nexport function buildApiUsersAndStatuses(mtpUsers: GramJs.TypeUser[]) {\n  const userStatusesById: Record<string, ApiUserStatus> = {};\n  const usersById: Record<string, ApiUser> = {};\n\n  mtpUsers.forEach((mtpUser) => {\n    const user = buildApiUser(mtpUser);\n    if (!user) {\n      return;\n    }\n\n    const duplicateUser = usersById[user.id];\n    if (!duplicateUser || duplicateUser.isMin) {\n      usersById[user.id] = user;\n    }\n\n    if ('status' in mtpUser) {\n      userStatusesById[user.id] = buildApiUserStatus(mtpUser.status);\n    }\n  });\n\n  return { users: Object.values(usersById), userStatusesById };\n}\n\nexport function buildApiPremiumGiftOption(option: GramJs.TypePremiumGiftOption): ApiPremiumGiftOption {\n  const {\n    months, currency, amount, botUrl,\n  } = option;\n\n  return {\n    months,\n    currency,\n    amount: amount.toJSNumber(),\n    botUrl,\n  };\n}\n\nexport function buildApiBirthday(birthday: GramJs.TypeBirthday): ApiBirthday {\n  return omitVirtualClassFields(birthday);\n}\n","import BigInt from 'big-integer';\nimport { Api as GramJs } from '../../../lib/gramjs';\n\nimport type {\n  ApiPeer, ApiPhoto, ApiReportReason,\n} from '../../types';\n\nimport { buildApiChatFromPreview } from '../apiBuilders/chats';\nimport { buildApiChatLink } from '../apiBuilders/misc';\nimport { buildApiUser } from '../apiBuilders/users';\nimport { buildInputPeer, buildInputPhoto, buildInputReportReason } from '../gramjsBuilders';\nimport { invokeRequest } from './client';\n\nexport async function reportPeer({\n  peer,\n  reason,\n  description,\n}: {\n  peer: ApiPeer; reason: ApiReportReason; description?: string;\n}) {\n  const result = await invokeRequest(new GramJs.account.ReportPeer({\n    peer: buildInputPeer(peer.id, peer.accessHash),\n    reason: buildInputReportReason(reason),\n    message: description,\n  }));\n\n  return result;\n}\n\nexport async function reportProfilePhoto({\n  peer,\n  photo,\n  reason,\n  description,\n}: {\n  peer: ApiPeer; photo: ApiPhoto; reason: ApiReportReason; description?: string;\n}) {\n  const photoId = buildInputPhoto(photo);\n  if (!photoId) return undefined;\n\n  const result = await invokeRequest(new GramJs.account.ReportProfilePhoto({\n    peer: buildInputPeer(peer.id, peer.accessHash),\n    photoId,\n    reason: buildInputReportReason(reason),\n    message: description,\n  }));\n\n  return result;\n}\n\nexport async function changeSessionSettings({\n  hash, areCallsEnabled, areSecretChatsEnabled, isConfirmed,\n}: {\n  hash: string; areCallsEnabled?: boolean; areSecretChatsEnabled?: boolean; isConfirmed?: boolean;\n}) {\n  const result = await invokeRequest(new GramJs.account.ChangeAuthorizationSettings({\n    hash: BigInt(hash),\n    ...(areCallsEnabled !== undefined ? { callRequestsDisabled: !areCallsEnabled } : undefined),\n    ...(areSecretChatsEnabled !== undefined ? { encryptedRequestsDisabled: !areSecretChatsEnabled } : undefined),\n    ...(isConfirmed && { confirmed: isConfirmed }),\n  }));\n\n  return result;\n}\n\nexport async function changeSessionTtl({\n  days,\n}: {\n  days: number;\n}) {\n  const result = await invokeRequest(new GramJs.account.SetAuthorizationTTL({\n    authorizationTtlDays: days,\n  }));\n\n  return result;\n}\n\nexport async function resolveBusinessChatLink({ slug } : { slug: string }) {\n  const result = await invokeRequest(new GramJs.account.ResolveBusinessChatLink({\n    slug,\n  }), {\n    shouldIgnoreErrors: true,\n  });\n  if (!result) return undefined;\n\n  const users = result.users.map(buildApiUser).filter(Boolean);\n  const chats = result.chats.map((c) => buildApiChatFromPreview(c)).filter(Boolean);\n\n  const chatLink = buildApiChatLink(result);\n\n  return {\n    users,\n    chats,\n    chatLink,\n  };\n}\n\nexport function toggleSponsoredMessages({\n  enabled,\n}: {\n  enabled: boolean;\n}) {\n  return invokeRequest(new GramJs.account.ToggleSponsoredMessages({\n    enabled,\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n","import { errors } from '../../../lib/gramjs';\n\nimport type {\n  ApiUpdateAuthorizationState,\n  ApiUpdateAuthorizationStateType,\n  ApiUser,\n  ApiUserFullInfo,\n  OnApiUpdate,\n} from '../../types';\n\nimport { DEBUG } from '../../../config';\n\nconst ApiErrors: { [k: string]: string } = {\n  PHONE_NUMBER_INVALID: 'Invalid phone number.',\n  PHONE_CODE_INVALID: 'Invalid code.',\n  PASSWORD_HASH_INVALID: 'Incorrect password.',\n  PHONE_PASSWORD_FLOOD: 'Limit exceeded. Please try again later.',\n  PHONE_NUMBER_BANNED: 'This phone number is banned.',\n};\n\nconst authController: {\n  resolve?: Function;\n  reject?: Function;\n} = {};\n\nlet onUpdate: OnApiUpdate;\n\nexport function init(_onUpdate: OnApiUpdate) {\n  onUpdate = _onUpdate;\n}\n\nexport function onWebAuthTokenFailed() {\n  onUpdate({\n    '@type': 'updateWebAuthTokenFailed',\n  });\n}\n\nexport function onRequestPhoneNumber() {\n  onUpdate(buildAuthStateUpdate('authorizationStateWaitPhoneNumber'));\n\n  return new Promise<string>((resolve, reject) => {\n    authController.resolve = resolve;\n    authController.reject = reject;\n  });\n}\n\nexport function onRequestCode(isCodeViaApp = false) {\n  onUpdate({\n    ...buildAuthStateUpdate('authorizationStateWaitCode'),\n    isCodeViaApp,\n  });\n\n  return new Promise<string>((resolve, reject) => {\n    authController.resolve = resolve;\n    authController.reject = reject;\n  });\n}\n\nexport function onRequestPassword(hint?: string, noReset?: boolean) {\n  onUpdate({\n    ...buildAuthStateUpdate('authorizationStateWaitPassword'),\n    hint,\n    noReset,\n  });\n\n  return new Promise<string>((resolve) => {\n    authController.resolve = resolve;\n  });\n}\n\nexport function onRequestRegistration() {\n  onUpdate(buildAuthStateUpdate('authorizationStateWaitRegistration'));\n\n  return new Promise<[string, string?]>((resolve) => {\n    authController.resolve = resolve;\n  });\n}\n\nexport function onRequestQrCode(qrCode: { token: Buffer; expires: number }) {\n  onUpdate({\n    ...buildAuthStateUpdate('authorizationStateWaitQrCode'),\n    qrCode: {\n      token: btoa(String.fromCharCode(...qrCode.token)).replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=+$/, ''),\n      expires: qrCode.expires,\n    },\n  });\n\n  return new Promise<void>((resolve, reject) => {\n    authController.reject = reject;\n  });\n}\n\nexport function onAuthError(err: Error) {\n  let message: string;\n\n  if (err instanceof errors.FloodWaitError) {\n    const hours = Math.ceil(Number(err.seconds) / 60 / 60);\n    message = `Too many attempts. Try again in ${hours > 1 ? `${hours} hours` : 'an hour'}`;\n  } else {\n    message = ApiErrors[err.message];\n  }\n\n  if (!message) {\n    message = 'Unexpected Error';\n\n    if (DEBUG) {\n      // eslint-disable-next-line no-console\n      console.error(err);\n    }\n  }\n\n  onUpdate({\n    '@type': 'updateAuthorizationError',\n    message,\n  });\n}\n\nexport function onAuthReady() {\n  onUpdate(buildAuthStateUpdate('authorizationStateReady'));\n}\n\nexport function onCurrentUserUpdate(currentUser: ApiUser, currentUserFullInfo: ApiUserFullInfo) {\n  onUpdate({\n    '@type': 'updateCurrentUser',\n    currentUser,\n    currentUserFullInfo,\n  });\n}\n\nexport function buildAuthStateUpdate(authorizationState: ApiUpdateAuthorizationStateType): ApiUpdateAuthorizationState {\n  return {\n    '@type': 'updateAuthorizationState',\n    authorizationState,\n  };\n}\n\nexport function provideAuthPhoneNumber(phoneNumber: string) {\n  if (!authController.resolve) {\n    return;\n  }\n\n  authController.resolve(phoneNumber);\n}\n\nexport function provideAuthCode(code: string) {\n  if (!authController.resolve) {\n    return;\n  }\n\n  authController.resolve(code);\n}\n\nexport function provideAuthPassword(password: string) {\n  if (!authController.resolve) {\n    return;\n  }\n\n  authController.resolve(password);\n}\n\nexport function provideAuthRegistration(registration: { firstName: string; lastName: string }) {\n  const { firstName, lastName } = registration;\n\n  if (!authController.resolve) {\n    return;\n  }\n\n  authController.resolve([firstName, lastName]);\n}\n\nexport function restartAuth() {\n  if (!authController.reject) {\n    return;\n  }\n\n  authController.reject(new Error('RESTART_AUTH'));\n}\n\nexport function restartAuthWithQr() {\n  if (!authController.reject) {\n    return;\n  }\n\n  authController.reject(new Error('RESTART_AUTH_WITH_QR'));\n}\n","import BigInt from 'big-integer';\nimport { Api as GramJs } from '../../../lib/gramjs';\n\nimport type {\n  ApiBotApp,\n  ApiChat,\n  ApiInputMessageReplyInfo,\n  ApiPeer,\n  ApiThemeParameters,\n  ApiUser,\n  OnApiUpdate,\n} from '../../types';\n\nimport { WEB_APP_PLATFORM } from '../../../config';\nimport { buildCollectionByKey } from '../../../util/iteratees';\nimport {\n  buildApiAttachBot,\n  buildApiBotInlineMediaResult,\n  buildApiBotInlineResult,\n  buildApiMessagesBotApp,\n  buildBotSwitchPm,\n  buildBotSwitchWebview,\n} from '../apiBuilders/bots';\nimport { buildApiChatFromPreview } from '../apiBuilders/chats';\nimport { omitVirtualClassFields } from '../apiBuilders/helpers';\nimport { buildApiUrlAuthResult } from '../apiBuilders/misc';\nimport { buildApiUser } from '../apiBuilders/users';\nimport {\n  buildInputBotApp,\n  buildInputEntity,\n  buildInputPeer,\n  buildInputReplyTo,\n  buildInputThemeParams,\n  generateRandomBigInt,\n} from '../gramjsBuilders';\nimport {\n  addDocumentToLocalDb,\n  addEntitiesToLocalDb,\n  addPhotoToLocalDb,\n  addUserToLocalDb,\n  addWebDocumentToLocalDb,\n  deserializeBytes,\n} from '../helpers';\nimport { invokeRequest } from './client';\n\nlet onUpdate: OnApiUpdate;\n\nexport function init(_onUpdate: OnApiUpdate) {\n  onUpdate = _onUpdate;\n}\n\nexport async function answerCallbackButton({\n  chatId, accessHash, messageId, data, isGame,\n}: {\n  chatId: string; accessHash?: string; messageId: number; data?: string; isGame?: boolean;\n}) {\n  const result = await invokeRequest(new GramJs.messages.GetBotCallbackAnswer({\n    peer: buildInputPeer(chatId, accessHash),\n    msgId: messageId,\n    data: data ? deserializeBytes(data) : undefined,\n    game: isGame || undefined,\n  }));\n\n  return result ? omitVirtualClassFields(result) : undefined;\n}\n\nexport async function fetchTopInlineBots() {\n  const topPeers = await invokeRequest(new GramJs.contacts.GetTopPeers({\n    botsInline: true,\n  }));\n\n  if (!(topPeers instanceof GramJs.contacts.TopPeers)) {\n    return undefined;\n  }\n\n  const users = topPeers.users.map(buildApiUser).filter(Boolean);\n  const ids = users.map(({ id }) => id);\n\n  return {\n    ids,\n    users,\n  };\n}\n\nexport async function fetchInlineBot({ username }: { username: string }) {\n  const resolvedPeer = await invokeRequest(new GramJs.contacts.ResolveUsername({ username }));\n\n  if (\n    !resolvedPeer\n    || !(\n      resolvedPeer.users[0] instanceof GramJs.User\n      && resolvedPeer.users[0].bot\n      && resolvedPeer.users[0].botInlinePlaceholder\n    )\n  ) {\n    return undefined;\n  }\n\n  addUserToLocalDb(resolvedPeer.users[0]);\n\n  return {\n    user: buildApiUser(resolvedPeer.users[0]),\n    chat: buildApiChatFromPreview(resolvedPeer.users[0]),\n  };\n}\n\nexport async function fetchInlineBotResults({\n  bot, chat, query, offset = '',\n}: {\n  bot: ApiUser; chat: ApiChat; query: string; offset?: string;\n}) {\n  const result = await invokeRequest(new GramJs.messages.GetInlineBotResults({\n    bot: buildInputPeer(bot.id, bot.accessHash),\n    peer: buildInputPeer(chat.id, chat.accessHash),\n    query,\n    offset,\n  }));\n\n  if (!result) {\n    return undefined;\n  }\n\n  addEntitiesToLocalDb(result.users);\n\n  return {\n    isGallery: Boolean(result.gallery),\n    help: bot.botPlaceholder,\n    nextOffset: getInlineBotResultsNextOffset(bot.usernames![0].username, result.nextOffset),\n    switchPm: buildBotSwitchPm(result.switchPm),\n    switchWebview: buildBotSwitchWebview(result.switchWebview),\n    users: result.users.map(buildApiUser).filter(Boolean),\n    results: processInlineBotResult(String(result.queryId), result.results),\n    cacheTime: result.cacheTime,\n  };\n}\n\nexport async function sendInlineBotResult({\n  chat, replyInfo, resultId, queryId, sendAs, isSilent, scheduleDate,\n}: {\n  chat: ApiChat;\n  replyInfo?: ApiInputMessageReplyInfo;\n  resultId: string;\n  queryId: string;\n  sendAs?: ApiPeer;\n  isSilent?: boolean;\n  scheduleDate?: number;\n}) {\n  const randomId = generateRandomBigInt();\n\n  await invokeRequest(new GramJs.messages.SendInlineBotResult({\n    clearDraft: true,\n    randomId,\n    queryId: BigInt(queryId),\n    peer: buildInputPeer(chat.id, chat.accessHash),\n    id: resultId,\n    scheduleDate,\n    replyTo: replyInfo && buildInputReplyTo(replyInfo),\n    ...(isSilent && { silent: true }),\n    ...(sendAs && { sendAs: buildInputPeer(sendAs.id, sendAs.accessHash) }),\n  }));\n}\n\nexport async function startBot({\n  bot, startParam,\n}: {\n  bot: ApiUser;\n  startParam?: string;\n}) {\n  const randomId = generateRandomBigInt();\n\n  await invokeRequest(new GramJs.messages.StartBot({\n    bot: buildInputPeer(bot.id, bot.accessHash),\n    peer: buildInputPeer(bot.id, bot.accessHash),\n    randomId,\n    startParam,\n  }));\n}\n\nexport async function requestWebView({\n  isSilent,\n  peer,\n  bot,\n  url,\n  startParam,\n  replyInfo,\n  theme,\n  sendAs,\n  isFromBotMenu,\n}: {\n  isSilent?: boolean;\n  peer: ApiPeer;\n  bot: ApiUser;\n  url?: string;\n  startParam?: string;\n  replyInfo?: ApiInputMessageReplyInfo;\n  theme?: ApiThemeParameters;\n  sendAs?: ApiPeer;\n  isFromBotMenu?: boolean;\n}) {\n  const result = await invokeRequest(new GramJs.messages.RequestWebView({\n    silent: isSilent || undefined,\n    peer: buildInputPeer(peer.id, peer.accessHash),\n    bot: buildInputPeer(bot.id, bot.accessHash),\n    url,\n    startParam,\n    themeParams: theme ? buildInputThemeParams(theme) : undefined,\n    fromBotMenu: isFromBotMenu || undefined,\n    platform: WEB_APP_PLATFORM,\n    replyTo: replyInfo && buildInputReplyTo(replyInfo),\n    ...(sendAs && { sendAs: buildInputPeer(sendAs.id, sendAs.accessHash) }),\n  }));\n\n  if (result instanceof GramJs.WebViewResultUrl) {\n    return {\n      url: result.url,\n      queryId: result.queryId?.toString(),\n    };\n  }\n\n  return undefined;\n}\n\nexport async function requestSimpleWebView({\n  bot,\n  url,\n  theme,\n  startParam,\n  isFromSwitchWebView,\n  isFromSideMenu,\n}: {\n  bot: ApiUser;\n  url?: string;\n  theme?: ApiThemeParameters;\n  startParam?: string;\n  isFromSwitchWebView?: boolean;\n  isFromSideMenu?: boolean;\n}) {\n  const result = await invokeRequest(new GramJs.messages.RequestSimpleWebView({\n    url,\n    bot: buildInputPeer(bot.id, bot.accessHash),\n    themeParams: theme ? buildInputThemeParams(theme) : undefined,\n    platform: WEB_APP_PLATFORM,\n    startParam,\n    fromSwitchWebview: isFromSwitchWebView || undefined,\n    fromSideMenu: isFromSideMenu || undefined,\n  }));\n\n  return result?.url;\n}\n\nexport async function fetchBotApp({\n  bot,\n  appName,\n}: {\n  bot: ApiUser;\n  appName: string;\n}) {\n  const result = await invokeRequest(new GramJs.messages.GetBotApp({\n    app: new GramJs.InputBotAppShortName({\n      botId: buildInputEntity(bot.id, bot.accessHash) as GramJs.InputUser,\n      shortName: appName,\n    }),\n  }));\n\n  if (!result || result instanceof GramJs.BotAppNotModified) {\n    return undefined;\n  }\n\n  return buildApiMessagesBotApp(result);\n}\n\nexport async function requestAppWebView({\n  peer,\n  app,\n  startParam,\n  theme,\n  isWriteAllowed,\n}: {\n  peer: ApiPeer;\n  app: ApiBotApp;\n  startParam?: string;\n  theme?: ApiThemeParameters;\n  isWriteAllowed?: boolean;\n}) {\n  const result = await invokeRequest(new GramJs.messages.RequestAppWebView({\n    peer: buildInputPeer(peer.id, peer.accessHash),\n    app: buildInputBotApp(app),\n    startParam,\n    themeParams: theme ? buildInputThemeParams(theme) : undefined,\n    platform: WEB_APP_PLATFORM,\n    writeAllowed: isWriteAllowed || undefined,\n  }));\n\n  return result?.url;\n}\n\nexport function prolongWebView({\n  isSilent,\n  peer,\n  bot,\n  queryId,\n  replyInfo,\n  sendAs,\n}: {\n  isSilent?: boolean;\n  peer: ApiPeer;\n  bot: ApiUser;\n  queryId: string;\n  replyInfo?: ApiInputMessageReplyInfo;\n  sendAs?: ApiPeer;\n}) {\n  return invokeRequest(new GramJs.messages.ProlongWebView({\n    silent: isSilent || undefined,\n    peer: buildInputPeer(peer.id, peer.accessHash),\n    bot: buildInputPeer(bot.id, bot.accessHash),\n    queryId: BigInt(queryId),\n    replyTo: replyInfo && buildInputReplyTo(replyInfo),\n    ...(sendAs && { sendAs: buildInputPeer(sendAs.id, sendAs.accessHash) }),\n  }));\n}\n\nexport async function sendWebViewData({\n  bot, buttonText, data,\n}: {\n  bot: ApiUser;\n  buttonText: string;\n  data: string;\n}) {\n  const randomId = generateRandomBigInt();\n  await invokeRequest(new GramJs.messages.SendWebViewData({\n    bot: buildInputPeer(bot.id, bot.accessHash),\n    buttonText,\n    data,\n    randomId,\n  }));\n}\n\nexport async function loadAttachBots({\n  hash,\n}: {\n  hash?: string;\n}) {\n  const result = await invokeRequest(new GramJs.messages.GetAttachMenuBots({\n    hash: hash ? BigInt(hash) : undefined,\n  }));\n\n  if (result instanceof GramJs.AttachMenuBots) {\n    addEntitiesToLocalDb(result.users);\n    return {\n      hash: result.hash.toString(),\n      bots: buildCollectionByKey(result.bots.map(buildApiAttachBot), 'id'),\n      users: result.users.map(buildApiUser).filter(Boolean),\n    };\n  }\n  return undefined;\n}\n\nexport async function loadAttachBot({\n  bot,\n}: {\n  bot: ApiUser;\n}) {\n  const result = await invokeRequest(new GramJs.messages.GetAttachMenuBot({\n    bot: buildInputPeer(bot.id, bot.accessHash),\n  }));\n\n  if (result instanceof GramJs.AttachMenuBotsBot) {\n    addEntitiesToLocalDb(result.users);\n    return {\n      bot: buildApiAttachBot(result.bot),\n      users: result.users.map(buildApiUser).filter(Boolean),\n    };\n  }\n  return undefined;\n}\n\nexport function toggleAttachBot({\n  bot,\n  isWriteAllowed,\n  isEnabled,\n}: {\n  bot: ApiUser;\n  isWriteAllowed?: boolean;\n  isEnabled: boolean;\n}) {\n  return invokeRequest(new GramJs.messages.ToggleBotInAttachMenu({\n    bot: buildInputPeer(bot.id, bot.accessHash),\n    writeAllowed: isWriteAllowed || undefined,\n    enabled: isEnabled,\n  }));\n}\n\nexport async function requestBotUrlAuth({\n  chat, buttonId, messageId,\n}: {\n  chat: ApiChat;\n  buttonId: number;\n  messageId: number;\n}) {\n  const result = await invokeRequest(new GramJs.messages.RequestUrlAuth({\n    peer: buildInputPeer(chat.id, chat.accessHash),\n    buttonId,\n    msgId: messageId,\n  }));\n\n  if (!result) return undefined;\n\n  const authResult = buildApiUrlAuthResult(result);\n  if (authResult?.type === 'request') {\n    onUpdate({\n      '@type': 'updateUser',\n      id: authResult.bot.id,\n      user: authResult.bot,\n    });\n  }\n  return authResult;\n}\n\nexport async function acceptBotUrlAuth({\n  chat,\n  messageId,\n  buttonId,\n  isWriteAllowed,\n}: {\n  chat: ApiChat;\n  messageId: number;\n  buttonId: number;\n  isWriteAllowed?: boolean;\n}) {\n  const result = await invokeRequest(new GramJs.messages.AcceptUrlAuth({\n    peer: buildInputPeer(chat.id, chat.accessHash),\n    msgId: messageId,\n    buttonId,\n    writeAllowed: isWriteAllowed || undefined,\n  }));\n\n  if (!result) return undefined;\n\n  const authResult = buildApiUrlAuthResult(result);\n  if (authResult?.type === 'request') {\n    onUpdate({\n      '@type': 'updateUser',\n      id: authResult.bot.id,\n      user: authResult.bot,\n    });\n  }\n  return authResult;\n}\n\nexport async function requestLinkUrlAuth({ url }: { url: string }) {\n  const result = await invokeRequest(new GramJs.messages.RequestUrlAuth({\n    url,\n  }));\n\n  if (!result) return undefined;\n\n  const authResult = buildApiUrlAuthResult(result);\n  if (authResult?.type === 'request') {\n    onUpdate({\n      '@type': 'updateUser',\n      id: authResult.bot.id,\n      user: authResult.bot,\n    });\n  }\n  return authResult;\n}\n\nexport async function acceptLinkUrlAuth({ url, isWriteAllowed }: { url: string; isWriteAllowed?: boolean }) {\n  const result = await invokeRequest(new GramJs.messages.AcceptUrlAuth({\n    url,\n    writeAllowed: isWriteAllowed || undefined,\n  }));\n\n  if (!result) return undefined;\n\n  const authResult = buildApiUrlAuthResult(result);\n  if (authResult?.type === 'request') {\n    onUpdate({\n      '@type': 'updateUser',\n      id: authResult.bot.id,\n      user: authResult.bot,\n    });\n  }\n  return authResult;\n}\n\nexport function fetchBotCanSendMessage({ bot } : { bot: ApiUser }) {\n  return invokeRequest(new GramJs.bots.CanSendMessage({\n    bot: buildInputEntity(bot.id, bot.accessHash) as GramJs.InputUser,\n  }));\n}\n\nexport function allowBotSendMessages({ bot } : { bot: ApiUser }) {\n  return invokeRequest(new GramJs.bots.AllowSendMessage({\n    bot: buildInputEntity(bot.id, bot.accessHash) as GramJs.InputUser,\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n\nexport async function invokeWebViewCustomMethod({\n  bot,\n  customMethod,\n  parameters,\n}: {\n  bot: ApiUser;\n  customMethod: string;\n  parameters: string;\n}): Promise<{\n    result: object;\n  } | {\n    error: string;\n  }> {\n  try {\n    const result = await invokeRequest(new GramJs.bots.InvokeWebViewCustomMethod({\n      bot: buildInputPeer(bot.id, bot.accessHash),\n      params: new GramJs.DataJSON({\n        data: parameters,\n      }),\n      customMethod,\n    }), {\n      shouldThrow: true,\n    });\n\n    return {\n      result: JSON.parse(result!.data),\n    };\n  } catch (e) {\n    const error = e as Error;\n    return {\n      error: error.message,\n    };\n  }\n}\n\nfunction processInlineBotResult(queryId: string, results: GramJs.TypeBotInlineResult[]) {\n  return results.map((result) => {\n    if (result instanceof GramJs.BotInlineMediaResult) {\n      if (result.document instanceof GramJs.Document) {\n        addDocumentToLocalDb(result.document);\n      }\n\n      if (result.photo instanceof GramJs.Photo) {\n        addPhotoToLocalDb(result.photo);\n      }\n\n      return buildApiBotInlineMediaResult(result, queryId);\n    }\n\n    if (result.thumb) {\n      addWebDocumentToLocalDb(result.thumb);\n    }\n\n    return buildApiBotInlineResult(result, queryId);\n  });\n}\n\nfunction getInlineBotResultsNextOffset(username: string, nextOffset?: string) {\n  return username === 'gif' && nextOffset === '0' ? '' : nextOffset;\n}\n\nexport function setBotInfo({\n  bot,\n  langCode,\n  name,\n  about,\n  description,\n}: {\n  bot: ApiUser;\n  langCode: string;\n  name?: string;\n  about?: string;\n  description?: string;\n}) {\n  return invokeRequest(new GramJs.bots.SetBotInfo({\n    bot: buildInputPeer(bot.id, bot.accessHash),\n    langCode,\n    name: name || '',\n    about: about || '',\n    description: description || '',\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n","import BigInt from 'big-integer';\nimport { Api as GramJs } from '../../../lib/gramjs';\n\nimport type { JoinGroupCallPayload } from '../../../lib/secret-sauce';\nimport type {\n  ApiChat, ApiGroupCall, ApiPhoneCall,\n  ApiUser, OnApiUpdate,\n} from '../../types';\n\nimport { GROUP_CALL_PARTICIPANTS_LIMIT } from '../../../config';\nimport {\n  buildApiGroupCall,\n  buildApiGroupCallParticipant, buildCallProtocol,\n  buildPhoneCall,\n} from '../apiBuilders/calls';\nimport { buildApiChatFromPreview } from '../apiBuilders/chats';\nimport { buildApiUser } from '../apiBuilders/users';\nimport {\n  buildInputGroupCall, buildInputPeer, buildInputPhoneCall, generateRandomInt,\n} from '../gramjsBuilders';\nimport { addEntitiesToLocalDb } from '../helpers';\nimport { invokeRequest, invokeRequestBeacon } from './client';\n\nlet onUpdate: OnApiUpdate;\n\nexport function init(_onUpdate: OnApiUpdate) {\n  onUpdate = _onUpdate;\n}\n\nexport async function getGroupCall({\n  call,\n}: {\n  call: Partial<ApiGroupCall>;\n}) {\n  const result = await invokeRequest(new GramJs.phone.GetGroupCall({\n    call: buildInputGroupCall(call),\n  }));\n\n  if (!result) {\n    return undefined;\n  }\n\n  addEntitiesToLocalDb(result.users);\n  addEntitiesToLocalDb(result.chats);\n\n  const users = result.users.map(buildApiUser).filter(Boolean);\n  const chats = result.chats.map((c) => buildApiChatFromPreview(c)).filter(Boolean);\n\n  return {\n    groupCall: buildApiGroupCall(result.call),\n    users,\n    chats,\n  };\n}\n\nexport function discardGroupCall({\n  call,\n}: {\n  call: ApiGroupCall;\n}) {\n  return invokeRequest(new GramJs.phone.DiscardGroupCall({\n    call: buildInputGroupCall(call),\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n\nexport function editGroupCallParticipant({\n  call, participant, muted, presentationPaused, videoStopped, videoPaused, volume,\n  raiseHand,\n}: {\n  call: ApiGroupCall; participant: ApiUser; muted?: boolean; presentationPaused?: boolean;\n  videoStopped?: boolean; videoPaused?: boolean; raiseHand?: boolean; volume?: number;\n}) {\n  return invokeRequest(new GramJs.phone.EditGroupCallParticipant({\n    call: buildInputGroupCall(call),\n    participant: buildInputPeer(participant.id, participant.accessHash),\n    ...(videoStopped !== undefined && { videoStopped }),\n    ...(videoPaused !== undefined && { videoPaused }),\n    ...(muted !== undefined && { muted }),\n    ...(presentationPaused !== undefined && { presentationPaused }),\n    ...(raiseHand !== undefined && { raiseHand }),\n    ...(volume !== undefined && { volume }),\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n\nexport function editGroupCallTitle({\n  groupCall, title,\n}: {\n  groupCall: ApiGroupCall; title: string;\n}) {\n  return invokeRequest(new GramJs.phone.EditGroupCallTitle({\n    title,\n    call: buildInputGroupCall(groupCall),\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n\nexport async function exportGroupCallInvite({\n  call, canSelfUnmute,\n}: {\n  call: ApiGroupCall; canSelfUnmute: boolean;\n}) {\n  const result = await invokeRequest(new GramJs.phone.ExportGroupCallInvite({\n    canSelfUnmute: canSelfUnmute || undefined,\n    call: buildInputGroupCall(call),\n  }));\n\n  if (!result) {\n    return undefined;\n  }\n\n  return result.link;\n}\n\nexport async function fetchGroupCallParticipants({\n  call, offset,\n}: {\n  call: ApiGroupCall; offset?: string;\n}) {\n  const result = await invokeRequest(new GramJs.phone.GetGroupParticipants({\n    call: buildInputGroupCall(call),\n    ids: [],\n    sources: [],\n    offset: offset || '',\n    limit: GROUP_CALL_PARTICIPANTS_LIMIT,\n  }));\n\n  if (!result) {\n    return undefined;\n  }\n\n  addEntitiesToLocalDb(result.users);\n  addEntitiesToLocalDb(result.chats);\n\n  const users = result.users.map(buildApiUser).filter(Boolean);\n  const chats = result.chats.map((c) => buildApiChatFromPreview(c)).filter(Boolean);\n\n  onUpdate({\n    '@type': 'updateGroupCallParticipants',\n    groupCallId: call.id,\n    participants: result.participants.map(buildApiGroupCallParticipant),\n    nextOffset: result.nextOffset,\n  });\n\n  return {\n    users, chats,\n  };\n}\n\nexport function leaveGroupCall({\n  call, isPageUnload,\n}: {\n  call: ApiGroupCall; isPageUnload?: boolean;\n}) {\n  const request = new GramJs.phone.LeaveGroupCall({\n    call: buildInputGroupCall(call),\n  });\n\n  if (isPageUnload) {\n    invokeRequestBeacon(request);\n    return;\n  }\n\n  invokeRequest(request, {\n    shouldReturnTrue: true,\n  });\n}\n\nexport async function joinGroupCall({\n  call, inviteHash, params,\n}: {\n  call: ApiGroupCall; inviteHash?: string; params: JoinGroupCallPayload;\n}) {\n  const result = await invokeRequest(new GramJs.phone.JoinGroupCall({\n    call: buildInputGroupCall(call),\n    joinAs: new GramJs.InputPeerSelf(),\n    muted: true,\n    videoStopped: true,\n    params: new GramJs.DataJSON({\n      data: JSON.stringify(params),\n    }),\n    inviteHash,\n  }), {\n    shouldRetryOnTimeout: true,\n    abortControllerGroup: 'call',\n  });\n\n  if (!result) return undefined;\n\n  if (result instanceof GramJs.Updates) {\n    const update = result.updates.find((u) => u instanceof GramJs.UpdateGroupCall);\n    if (!(update instanceof GramJs.UpdateGroupCall)) return undefined;\n\n    return buildApiGroupCall(update.call);\n  }\n\n  return undefined;\n}\n\nexport async function createGroupCall({\n  peer,\n}: {\n  peer: ApiChat;\n}) {\n  const randomId = generateRandomInt();\n  const result = await invokeRequest(new GramJs.phone.CreateGroupCall({\n    peer: buildInputPeer(peer.id, peer.accessHash),\n    randomId,\n  }));\n\n  if (!result) return undefined;\n\n  if (result instanceof GramJs.Updates) {\n    const update = result.updates[0];\n    if (update instanceof GramJs.UpdateGroupCall) {\n      return buildApiGroupCall(update.call);\n    }\n  }\n\n  return undefined;\n}\n\nexport function joinGroupCallPresentation({\n  call, params,\n}: {\n  call: ApiGroupCall; params: JoinGroupCallPayload;\n}) {\n  return invokeRequest(new GramJs.phone.JoinGroupCallPresentation({\n    call: buildInputGroupCall(call),\n    params: new GramJs.DataJSON({\n      data: JSON.stringify(params),\n    }),\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n\nexport function toggleGroupCallStartSubscription({\n  call, subscribed,\n}: {\n  call: ApiGroupCall; subscribed: boolean;\n}) {\n  return invokeRequest(new GramJs.phone.ToggleGroupCallStartSubscription({\n    call: buildInputGroupCall(call),\n    subscribed,\n  }), {\n    shouldReturnTrue: true,\n    shouldIgnoreErrors: true,\n  });\n}\n\nexport function leaveGroupCallPresentation({\n  call,\n}: {\n  call: ApiGroupCall;\n}) {\n  return invokeRequest(new GramJs.phone.LeaveGroupCallPresentation({\n    call: buildInputGroupCall(call),\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n\nexport async function getDhConfig() {\n  const dhConfig = await invokeRequest(new GramJs.messages.GetDhConfig({}));\n\n  if (!dhConfig || dhConfig instanceof GramJs.messages.DhConfigNotModified) return undefined;\n\n  return {\n    g: dhConfig.g,\n    p: Array.from(dhConfig.p),\n    random: Array.from(dhConfig.random),\n  };\n}\n\nexport function discardCall({\n  call, isBusy, isPageUnload,\n}: {\n  call: ApiPhoneCall; isBusy?: boolean; isPageUnload?: boolean;\n}) {\n  const request = new GramJs.phone.DiscardCall({\n    peer: buildInputPhoneCall(call),\n    reason: isBusy ? new GramJs.PhoneCallDiscardReasonBusy() : new GramJs.PhoneCallDiscardReasonHangup(),\n  });\n\n  if (isPageUnload) {\n    invokeRequestBeacon(request);\n    return;\n  }\n\n  invokeRequest(request, {\n    shouldReturnTrue: true,\n  });\n}\n\nexport async function requestCall({\n  user, gAHash, isVideo,\n}: {\n  user: ApiUser; gAHash: number[]; isVideo?: boolean;\n}) {\n  const result = await invokeRequest(new GramJs.phone.RequestCall({\n    randomId: generateRandomInt(),\n    userId: buildInputPeer(user.id, user.accessHash),\n    gAHash: Buffer.from(gAHash),\n    ...(isVideo && { video: true }),\n    protocol: buildCallProtocol(),\n  }));\n\n  if (!result) {\n    return undefined;\n  }\n\n  const call = buildPhoneCall(result.phoneCall);\n\n  onUpdate({\n    '@type': 'updatePhoneCall',\n    call,\n  });\n\n  addEntitiesToLocalDb(result.users);\n\n  return {\n    users: result.users.map(buildApiUser).filter(Boolean),\n  };\n}\n\nexport function setCallRating({\n  call, rating, comment,\n}: {\n  call: ApiPhoneCall; rating: number; comment: string;\n}) {\n  return invokeRequest(new GramJs.phone.SetCallRating({\n    rating,\n    peer: buildInputPhoneCall(call),\n    comment,\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n\nexport function receivedCall({\n  call,\n}: {\n  call: ApiPhoneCall;\n}) {\n  return invokeRequest(new GramJs.phone.ReceivedCall({\n    peer: buildInputPhoneCall(call),\n  }));\n}\n\nexport async function acceptCall({\n  call, gB,\n}: {\n  call: ApiPhoneCall; gB: number[];\n}) {\n  const result = await invokeRequest(new GramJs.phone.AcceptCall({\n    peer: buildInputPhoneCall(call),\n    gB: Buffer.from(gB),\n    protocol: buildCallProtocol(),\n  }));\n\n  if (!result) {\n    return undefined;\n  }\n\n  call = buildPhoneCall(result.phoneCall);\n\n  onUpdate({\n    '@type': 'updatePhoneCall',\n    call,\n  });\n\n  addEntitiesToLocalDb(result.users);\n\n  return {\n    users: result.users.map(buildApiUser).filter(Boolean),\n  };\n}\n\nexport async function confirmCall({\n  call, gA, keyFingerprint,\n}: {\n  call: ApiPhoneCall; gA: number[]; keyFingerprint: string;\n}) {\n  const result = await invokeRequest(new GramJs.phone.ConfirmCall({\n    peer: buildInputPhoneCall(call),\n    gA: Buffer.from(gA),\n    keyFingerprint: BigInt(keyFingerprint),\n    protocol: buildCallProtocol(),\n  }));\n\n  if (!result) {\n    return undefined;\n  }\n\n  call = buildPhoneCall(result.phoneCall);\n\n  onUpdate({\n    '@type': 'updatePhoneCall',\n    call,\n  });\n\n  addEntitiesToLocalDb(result.users);\n\n  return {\n    users: result.users.map(buildApiUser).filter(Boolean),\n  };\n}\n\nexport function sendSignalingData({\n  data, call,\n}: {\n  data: number[]; call: ApiPhoneCall;\n}) {\n  return invokeRequest(new GramJs.phone.SendSignalingData({\n    data: Buffer.from(data),\n    peer: buildInputPhoneCall(call),\n  }));\n}\n","import BigInt from 'big-integer';\nimport { Api as GramJs } from '../../../lib/gramjs';\n\nimport type { ApiDraft } from '../../../global/types';\nimport type {\n  ApiChat,\n  ApiChatAdminRights,\n  ApiChatBannedRights,\n  ApiChatFolder,\n  ApiChatFullInfo,\n  ApiChatReactions,\n  ApiGroupCall,\n  ApiMessage,\n  ApiMissingInvitedUser,\n  ApiPeer,\n  ApiPhoto,\n  ApiTopic,\n  ApiUser,\n  ApiUserStatus,\n  OnApiUpdate,\n} from '../../types';\n\nimport {\n  ALL_FOLDER_ID,\n  ARCHIVED_FOLDER_ID,\n  DEBUG,\n  GENERAL_TOPIC_ID,\n  GLOBAL_SEARCH_CONTACTS_LIMIT,\n  MAX_INT_32,\n  MEMBERS_LOAD_SLICE,\n  SERVICE_NOTIFICATIONS_USER_ID,\n  TOPICS_SLICE,\n} from '../../../config';\nimport { buildCollectionByKey } from '../../../util/iteratees';\nimport {\n  buildApiChatBotCommands,\n  buildApiChatFolder,\n  buildApiChatFolderFromSuggested,\n  buildApiChatFromDialog,\n  buildApiChatFromPreview,\n  buildApiChatFromSavedDialog,\n  buildApiChatlistExportedInvite,\n  buildApiChatlistInvite,\n  buildApiChatReactions,\n  buildApiChatSettings,\n  buildApiMissingInvitedUser,\n  buildApiSponsoredMessageReportResult,\n  buildApiTopic,\n  buildChatMembers,\n  getPeerKey,\n} from '../apiBuilders/chats';\nimport { buildApiPhoto } from '../apiBuilders/common';\nimport { buildApiMessage, buildMessageDraft } from '../apiBuilders/messages';\nimport { buildApiPeerId, getApiChatIdFromMtpPeer } from '../apiBuilders/peers';\nimport { buildStickerSet } from '../apiBuilders/symbols';\nimport { buildApiUser, buildApiUsersAndStatuses } from '../apiBuilders/users';\nimport {\n  buildChatAdminRights,\n  buildChatBannedRights,\n  buildFilterFromApiFolder,\n  buildInputChatReactions,\n  buildInputEntity,\n  buildInputPeer,\n  buildInputPhoto,\n  buildInputReplyTo,\n  buildMtpMessageEntity,\n  generateRandomBigInt,\n} from '../gramjsBuilders';\nimport {\n  addEntitiesToLocalDb,\n  addMessageToLocalDb,\n  addPhotoToLocalDb,\n  deserializeBytes,\n  isChatFolder,\n} from '../helpers';\nimport { scheduleMutedChatUpdate } from '../scheduleUnmute';\nimport {\n  applyState, processAffectedHistory, updateChannelState,\n} from '../updates/updateManager';\nimport { dispatchThreadInfoUpdates } from '../updates/updater';\nimport { handleGramJsUpdate, invokeRequest, uploadFile } from './client';\n\ntype FullChatData = {\n  fullInfo: ApiChatFullInfo;\n  users: ApiUser[];\n  chats: ApiChat[];\n  userStatusesById: { [userId: string]: ApiUserStatus };\n  groupCall?: Partial<ApiGroupCall>;\n  membersCount?: number;\n  isForumAsMessages?: true;\n};\n\ntype ChatListData = {\n  chatIds: string[];\n  chats: ApiChat[];\n  users: ApiUser[];\n  userStatusesById: Record<string, ApiUserStatus>;\n  draftsById: Record<string, ApiDraft>;\n  orderedPinnedIds: string[] | undefined;\n  totalChatCount: number;\n  messages: ApiMessage[];\n  lastMessageByChatId: Record<string, number>;\n};\n\nlet onUpdate: OnApiUpdate;\n\nexport function init(_onUpdate: OnApiUpdate) {\n  onUpdate = _onUpdate;\n}\n\nexport async function fetchChats({\n  limit,\n  offsetDate,\n  archived,\n  withPinned,\n  lastLocalServiceMessageId,\n}: {\n  limit: number;\n  offsetDate?: number;\n  archived?: boolean;\n  withPinned?: boolean;\n  lastLocalServiceMessageId?: number;\n}): Promise<ChatListData | undefined> {\n  const result = await invokeRequest(new GramJs.messages.GetDialogs({\n    offsetPeer: new GramJs.InputPeerEmpty(),\n    limit,\n    offsetDate,\n    ...(withPinned && { excludePinned: true }),\n  }));\n  const resultPinned = withPinned\n    ? await invokeRequest(new GramJs.messages.GetPinnedDialogs({\n      folderId: archived ? ARCHIVED_FOLDER_ID : undefined,\n    }))\n    : undefined;\n\n  if (!result || result instanceof GramJs.messages.DialogsNotModified) {\n    return undefined;\n  }\n\n  if (resultPinned) {\n    dispatchThreadInfoUpdates(resultPinned.messages);\n    updateLocalDb(resultPinned);\n  }\n  dispatchThreadInfoUpdates(result.messages);\n  updateLocalDb(result);\n\n  const messages = (resultPinned ? resultPinned.messages : [])\n    .concat(result.messages)\n    .map(buildApiMessage)\n    .filter(Boolean);\n\n  const peersByKey = preparePeers(result);\n  if (resultPinned) {\n    Object.assign(peersByKey, preparePeers(resultPinned, peersByKey));\n  }\n\n  const chats: ApiChat[] = [];\n  const draftsById: Record<string, ApiDraft> = {};\n\n  const dialogs = (resultPinned ? resultPinned.dialogs : []).concat(result.dialogs);\n\n  const orderedPinnedIds: string[] = [];\n  const lastMessageByChatId: Record<string, number> = {};\n\n  dialogs.forEach((dialog) => {\n    if (\n      !(dialog instanceof GramJs.Dialog)\n      // This request can return dialogs not belonging to specified folder\n      || (!archived && dialog.folderId === ARCHIVED_FOLDER_ID)\n      || (archived && dialog.folderId !== ARCHIVED_FOLDER_ID)\n    ) {\n      return;\n    }\n\n    const peerEntity = peersByKey[getPeerKey(dialog.peer)];\n    const chat = buildApiChatFromDialog(dialog, peerEntity);\n    lastMessageByChatId[chat.id] = dialog.topMessage;\n\n    if (dialog.pts) {\n      updateChannelState(chat.id, dialog.pts);\n    }\n\n    if (\n      chat.id === SERVICE_NOTIFICATIONS_USER_ID\n      && lastLocalServiceMessageId\n      && (lastLocalServiceMessageId > dialog.topMessage)\n    ) {\n      lastMessageByChatId[chat.id] = lastLocalServiceMessageId;\n    }\n\n    chat.isListed = true;\n\n    chats.push(chat);\n\n    scheduleMutedChatUpdate(chat.id, chat.muteUntil, onUpdate);\n\n    if (withPinned && dialog.pinned) {\n      orderedPinnedIds.push(chat.id);\n    }\n\n    if (dialog.draft) {\n      const draft = buildMessageDraft(dialog.draft);\n      if (draft) {\n        draftsById[chat.id] = draft;\n      }\n    }\n  });\n\n  const chatIds = chats.map((chat) => chat.id);\n\n  const { users, userStatusesById } = buildApiUsersAndStatuses((resultPinned?.users || []).concat(result.users));\n\n  let totalChatCount: number;\n  if (result instanceof GramJs.messages.DialogsSlice) {\n    totalChatCount = result.count;\n  } else {\n    totalChatCount = chatIds.length;\n  }\n\n  return {\n    chatIds,\n    chats,\n    users,\n    userStatusesById,\n    draftsById,\n    orderedPinnedIds: withPinned ? orderedPinnedIds : undefined,\n    totalChatCount,\n    lastMessageByChatId,\n    messages,\n  };\n}\n\nexport async function fetchSavedChats({\n  limit,\n  offsetDate,\n  withPinned,\n}: {\n  limit: number;\n  offsetDate?: number;\n  withPinned?: boolean;\n}): Promise<ChatListData | undefined> {\n  const result = await invokeRequest(new GramJs.messages.GetSavedDialogs({\n    offsetPeer: new GramJs.InputPeerEmpty(),\n    limit,\n    offsetDate,\n    ...(withPinned && { excludePinned: true }),\n  }));\n  const resultPinned = withPinned\n    ? await invokeRequest(new GramJs.messages.GetPinnedSavedDialogs())\n    : undefined;\n\n  if (!result || result instanceof GramJs.messages.SavedDialogsNotModified) {\n    return undefined;\n  }\n\n  const hasPinned = resultPinned && !(resultPinned instanceof GramJs.messages.SavedDialogsNotModified);\n\n  if (hasPinned) {\n    updateLocalDb(resultPinned);\n  }\n  updateLocalDb(result);\n\n  dispatchThreadInfoUpdates(result.messages);\n\n  const messages = (hasPinned ? resultPinned.messages : [])\n    .concat(result.messages)\n    .map(buildApiMessage)\n    .filter(Boolean);\n\n  const peersByKey = preparePeers(result);\n  if (hasPinned) {\n    Object.assign(peersByKey, preparePeers(resultPinned, peersByKey));\n  }\n\n  const dialogs = (hasPinned ? resultPinned.dialogs : []).concat(result.dialogs);\n\n  const chatIds: string[] = [];\n  const orderedPinnedIds: string[] = [];\n  const lastMessageByChatId: Record<string, number> = {};\n\n  const chats: ApiChat[] = [];\n\n  dialogs.forEach((dialog) => {\n    const peerEntity = peersByKey[getPeerKey(dialog.peer)];\n    const chat = buildApiChatFromSavedDialog(dialog, peerEntity);\n    const chatId = getApiChatIdFromMtpPeer(dialog.peer);\n\n    chatIds.push(chatId);\n    if (withPinned && dialog.pinned) {\n      orderedPinnedIds.push(chatId);\n    }\n\n    lastMessageByChatId[chatId] = dialog.topMessage;\n\n    chats.push(chat);\n  });\n\n  const { users, userStatusesById } = buildApiUsersAndStatuses((hasPinned ? resultPinned.users : [])\n    .concat(result.users));\n\n  let totalChatCount: number;\n  if (result instanceof GramJs.messages.SavedDialogsSlice) {\n    totalChatCount = result.count;\n  } else {\n    totalChatCount = chatIds.length;\n  }\n\n  return {\n    chatIds,\n    chats,\n    users,\n    userStatusesById,\n    orderedPinnedIds: withPinned ? orderedPinnedIds : undefined,\n    totalChatCount,\n    lastMessageByChatId,\n    messages,\n    draftsById: {},\n  };\n}\n\nexport function fetchFullChat(chat: ApiChat) {\n  const { id, accessHash, adminRights } = chat;\n\n  const input = buildInputEntity(id, accessHash);\n\n  return input instanceof GramJs.InputChannel\n    ? getFullChannelInfo(id, accessHash!, adminRights)\n    : getFullChatInfo(id);\n}\n\nexport async function fetchChatSettings(chat: ApiChat) {\n  const { id, accessHash } = chat;\n\n  const result = await invokeRequest(new GramJs.messages.GetPeerSettings({\n    peer: buildInputPeer(id, accessHash),\n  }), {\n    abortControllerChatId: id,\n  });\n\n  if (!result) {\n    return undefined;\n  }\n\n  addEntitiesToLocalDb(result.users);\n\n  return {\n    users: result.users.map(buildApiUser).filter(Boolean),\n    settings: buildApiChatSettings(result.settings),\n  };\n}\n\nexport async function searchChats({ query }: { query: string }) {\n  const result = await invokeRequest(new GramJs.contacts.Search({ q: query, limit: GLOBAL_SEARCH_CONTACTS_LIMIT }));\n  if (!result) {\n    return undefined;\n  }\n\n  updateLocalDb(result);\n\n  const accountPeerIds = result.myResults.map(getApiChatIdFromMtpPeer);\n  const globalPeerIds = result.results.map(getApiChatIdFromMtpPeer)\n    .filter((id) => !accountPeerIds.includes(id));\n\n  const chats = result.chats.concat(result.users)\n    .map((user) => buildApiChatFromPreview(user))\n    .filter(Boolean);\n  const users = result.users.map(buildApiUser).filter(Boolean);\n\n  return {\n    accountResultIds: accountPeerIds,\n    globalResultIds: globalPeerIds,\n    chats,\n    users,\n  };\n}\n\nexport async function fetchChat({\n  type, user,\n}: {\n  type: 'user' | 'self' | 'support'; user?: ApiUser;\n}) {\n  let mtpUser: GramJs.User | undefined;\n\n  if (type === 'self' || type === 'user') {\n    const result = await invokeRequest(new GramJs.users.GetUsers({\n      id: [\n        type === 'user' && user\n          ? buildInputEntity(user.id, user.accessHash) as GramJs.InputUser\n          : new GramJs.InputUserSelf(),\n      ],\n    }));\n    if (!result || !result.length) {\n      return undefined;\n    }\n\n    [mtpUser] = result;\n  } else if (type === 'support') {\n    const result = await invokeRequest(new GramJs.help.GetSupport());\n    if (!result || !result.user) {\n      return undefined;\n    }\n\n    mtpUser = result.user;\n  }\n\n  const chat = buildApiChatFromPreview(mtpUser!, type === 'support');\n  if (!chat) {\n    return undefined;\n  }\n\n  onUpdate({\n    '@type': 'updateChat',\n    id: chat.id,\n    chat,\n  });\n\n  return { chatId: chat.id };\n}\n\nexport async function requestChatUpdate({\n  chat,\n  lastLocalMessage,\n  noLastMessage,\n}: {\n  chat: ApiChat; lastLocalMessage?: ApiMessage; noLastMessage?: boolean;\n}) {\n  const { id, accessHash } = chat;\n\n  const result = await invokeRequest(new GramJs.messages.GetPeerDialogs({\n    peers: [new GramJs.InputDialogPeer({\n      peer: buildInputPeer(id, accessHash),\n    })],\n  }));\n\n  if (!result) {\n    return;\n  }\n\n  const dialog = result.dialogs[0];\n  if (!dialog || !(dialog instanceof GramJs.Dialog)) {\n    return;\n  }\n\n  const peersByKey = preparePeers(result);\n  const peerEntity = peersByKey[getPeerKey(dialog.peer)];\n  if (!peerEntity) {\n    return;\n  }\n\n  updateLocalDb(result);\n\n  const lastRemoteMessage = buildApiMessage(result.messages[0]);\n  dispatchThreadInfoUpdates(result.messages);\n\n  const lastMessage = lastLocalMessage && (!lastRemoteMessage || (lastLocalMessage.date > lastRemoteMessage.date))\n    ? lastLocalMessage\n    : lastRemoteMessage;\n\n  const chatUpdate = buildApiChatFromDialog(dialog, peerEntity);\n\n  onUpdate({\n    '@type': 'updateChat',\n    id,\n    chat: chatUpdate,\n  });\n\n  if (!noLastMessage && lastMessage) {\n    onUpdate({\n      '@type': 'updateChatLastMessage',\n      id,\n      lastMessage,\n    });\n  }\n\n  applyState(result.state);\n\n  scheduleMutedChatUpdate(chatUpdate.id, chatUpdate.muteUntil, onUpdate);\n}\n\nexport function saveDraft({\n  chat,\n  draft,\n}: {\n  chat: ApiChat;\n  draft?: ApiDraft;\n}) {\n  return invokeRequest(new GramJs.messages.SaveDraft({\n    peer: buildInputPeer(chat.id, chat.accessHash),\n    message: draft?.text?.text || '',\n    entities: draft?.text?.entities?.map(buildMtpMessageEntity),\n    replyTo: draft?.replyInfo && buildInputReplyTo(draft.replyInfo),\n  }));\n}\n\nasync function getFullChatInfo(chatId: string): Promise<FullChatData | undefined> {\n  const result = await invokeRequest(new GramJs.messages.GetFullChat({\n    chatId: buildInputEntity(chatId) as BigInt.BigInteger,\n  }));\n\n  if (!result || !(result.fullChat instanceof GramJs.ChatFull)) {\n    return undefined;\n  }\n\n  updateLocalDb(result);\n\n  const {\n    about,\n    participants,\n    exportedInvite,\n    botInfo,\n    call,\n    availableReactions,\n    recentRequesters,\n    requestsPending,\n    chatPhoto,\n    translationsDisabled,\n  } = result.fullChat;\n\n  if (chatPhoto) {\n    addPhotoToLocalDb(chatPhoto);\n  }\n\n  const members = buildChatMembers(participants);\n  const adminMembers = members ? members.filter(({ isAdmin, isOwner }) => isAdmin || isOwner) : undefined;\n  const botCommands = botInfo ? buildApiChatBotCommands(botInfo) : undefined;\n  const inviteLink = exportedInvite instanceof GramJs.ChatInviteExported ? exportedInvite.link : undefined;\n  const { users, userStatusesById } = buildApiUsersAndStatuses(result.users);\n  const chats = result.chats.map((chat) => buildApiChatFromPreview(chat)).filter(Boolean);\n\n  return {\n    fullInfo: {\n      ...(chatPhoto instanceof GramJs.Photo && { profilePhoto: buildApiPhoto(chatPhoto) }),\n      about,\n      members,\n      adminMembersById: adminMembers ? buildCollectionByKey(adminMembers, 'userId') : undefined,\n      canViewMembers: true,\n      botCommands,\n      inviteLink,\n      groupCallId: call?.id.toString(),\n      enabledReactions: buildApiChatReactions(availableReactions),\n      requestsPending,\n      recentRequesterIds: recentRequesters?.map((userId) => buildApiPeerId(userId, 'user')),\n      isTranslationDisabled: translationsDisabled,\n      isPreHistoryHidden: true,\n    },\n    users,\n    chats,\n    userStatusesById,\n    groupCall: call ? {\n      chatId,\n      isLoaded: false,\n      id: call.id.toString(),\n      accessHash: call.accessHash.toString(),\n      connectionState: 'disconnected',\n      participantsCount: 0,\n      version: 0,\n      participants: {},\n    } : undefined,\n    membersCount: members?.length,\n  };\n}\n\nasync function getFullChannelInfo(\n  id: string,\n  accessHash: string,\n  adminRights?: ApiChatAdminRights,\n): Promise<FullChatData | undefined> {\n  const result = await invokeRequest(new GramJs.channels.GetFullChannel({\n    channel: buildInputEntity(id, accessHash) as GramJs.InputChannel,\n  }));\n\n  if (!result || !(result.fullChat instanceof GramJs.ChannelFull)) {\n    return undefined;\n  }\n\n  const {\n    about,\n    onlineCount,\n    exportedInvite,\n    slowmodeSeconds,\n    slowmodeNextSendDate,\n    migratedFromChatId,\n    migratedFromMaxId,\n    canViewParticipants,\n    canViewStats,\n    linkedChatId,\n    hiddenPrehistory,\n    call,\n    botInfo,\n    availableReactions,\n    defaultSendAs,\n    requestsPending,\n    recentRequesters,\n    statsDc,\n    participantsCount,\n    stickerset,\n    chatPhoto,\n    participantsHidden,\n    translationsDisabled,\n    storiesPinnedAvailable,\n    viewForumAsMessages,\n    emojiset,\n    boostsApplied,\n    boostsUnrestrict,\n  } = result.fullChat;\n\n  if (chatPhoto) {\n    addPhotoToLocalDb(chatPhoto);\n  }\n\n  const inviteLink = exportedInvite instanceof GramJs.ChatInviteExported\n    ? exportedInvite.link\n    : undefined;\n\n  const { members, users, userStatusesById } = (canViewParticipants && await fetchMembers(id, accessHash)) || {};\n  const { members: kickedMembers, users: bannedUsers, userStatusesById: bannedStatusesById } = (\n    canViewParticipants && adminRights && await fetchMembers(id, accessHash, 'kicked')\n  ) || {};\n  const { members: adminMembers, users: adminUsers, userStatusesById: adminStatusesById } = (\n    canViewParticipants && await fetchMembers(id, accessHash, 'admin')\n  ) || {};\n  const botCommands = botInfo ? buildApiChatBotCommands(botInfo) : undefined;\n  const chats = result.chats.map((chat) => buildApiChatFromPreview(chat)).filter(Boolean);\n\n  if (result?.chats?.length > 1) {\n    updateLocalDb(result);\n\n    const [, mtpLinkedChat] = result.chats;\n    const chat = buildApiChatFromPreview(mtpLinkedChat);\n    if (chat) {\n      onUpdate({\n        '@type': 'updateChat',\n        id: chat.id,\n        chat,\n      });\n    }\n  }\n\n  if (result.fullChat.pts) {\n    updateChannelState(id, result.fullChat.pts);\n  }\n\n  const statusesById = {\n    ...userStatusesById,\n    ...bannedStatusesById,\n    ...adminStatusesById,\n  };\n\n  return {\n    fullInfo: {\n      ...(chatPhoto instanceof GramJs.Photo && { profilePhoto: buildApiPhoto(chatPhoto) }),\n      about,\n      onlineCount,\n      inviteLink,\n      slowMode: slowmodeSeconds ? {\n        seconds: slowmodeSeconds,\n        nextSendDate: slowmodeNextSendDate,\n      } : undefined,\n      migratedFrom: migratedFromChatId ? {\n        chatId: buildApiPeerId(migratedFromChatId, 'chat'),\n        maxMessageId: migratedFromMaxId,\n      } : undefined,\n      canViewMembers: canViewParticipants,\n      canViewStatistics: canViewStats,\n      isPreHistoryHidden: hiddenPrehistory,\n      members,\n      kickedMembers,\n      adminMembersById: adminMembers ? buildCollectionByKey(adminMembers, 'userId') : undefined,\n      groupCallId: call ? String(call.id) : undefined,\n      linkedChatId: linkedChatId ? buildApiPeerId(linkedChatId, 'channel') : undefined,\n      botCommands,\n      enabledReactions: buildApiChatReactions(availableReactions),\n      sendAsId: defaultSendAs ? getApiChatIdFromMtpPeer(defaultSendAs) : undefined,\n      requestsPending,\n      recentRequesterIds: recentRequesters?.map((userId) => buildApiPeerId(userId, 'user')),\n      statisticsDcId: statsDc,\n      stickerSet: stickerset ? buildStickerSet(stickerset) : undefined,\n      emojiSet: emojiset ? buildStickerSet(emojiset) : undefined,\n      areParticipantsHidden: participantsHidden,\n      isTranslationDisabled: translationsDisabled,\n      hasPinnedStories: Boolean(storiesPinnedAvailable),\n      boostsApplied,\n      boostsToUnrestrict: boostsUnrestrict,\n    },\n    users: [...(users || []), ...(bannedUsers || []), ...(adminUsers || [])],\n    chats,\n    userStatusesById: statusesById,\n    groupCall: call ? {\n      chatId: id,\n      isLoaded: false,\n      id: call.id.toString(),\n      accessHash: call?.accessHash.toString(),\n      participants: {},\n      version: 0,\n      participantsCount: 0,\n      connectionState: 'disconnected',\n    } : undefined,\n    membersCount: participantsCount,\n    ...(viewForumAsMessages && { isForumAsMessages: true }),\n  };\n}\n\nexport async function updateChatMutedState({\n  chat, isMuted, muteUntil = 0,\n}: {\n  chat: ApiChat; isMuted: boolean; muteUntil?: number;\n}) {\n  if (isMuted && !muteUntil) {\n    muteUntil = MAX_INT_32;\n  }\n  await invokeRequest(new GramJs.account.UpdateNotifySettings({\n    peer: new GramJs.InputNotifyPeer({\n      peer: buildInputPeer(chat.id, chat.accessHash),\n    }),\n    settings: new GramJs.InputPeerNotifySettings({ muteUntil }),\n  }));\n\n  onUpdate({\n    '@type': 'updateNotifyExceptions',\n    chatId: chat.id,\n    isMuted,\n  });\n\n  void requestChatUpdate({\n    chat,\n    noLastMessage: true,\n  });\n}\n\nexport async function updateTopicMutedState({\n  chat, topicId, isMuted, muteUntil = 0,\n}: {\n  chat: ApiChat; topicId: number; isMuted: boolean; muteUntil?: number;\n}) {\n  if (isMuted && !muteUntil) {\n    muteUntil = MAX_INT_32;\n  }\n  await invokeRequest(new GramJs.account.UpdateNotifySettings({\n    peer: new GramJs.InputNotifyForumTopic({\n      peer: buildInputPeer(chat.id, chat.accessHash),\n      topMsgId: topicId,\n    }),\n    settings: new GramJs.InputPeerNotifySettings({ muteUntil }),\n  }));\n\n  onUpdate({\n    '@type': 'updateTopicNotifyExceptions',\n    chatId: chat.id,\n    topicId,\n    isMuted,\n  });\n\n  // TODO[forums] Request forum topic thread update\n}\n\nexport async function createChannel({\n  title, about = '', users,\n}: {\n  title: string; about?: string; users?: ApiUser[];\n}) {\n  const result = await invokeRequest(new GramJs.channels.CreateChannel({\n    broadcast: true,\n    title,\n    about,\n  }), {\n    shouldThrow: true,\n  });\n\n  // `createChannel` can return a lot of different update types according to docs,\n  // but currently channel creation returns only `Updates` type.\n  // Errors are added to catch unexpected cases in future testing\n  if (!(result instanceof GramJs.Updates)) {\n    if (DEBUG) {\n      // eslint-disable-next-line no-console\n      console.error('Unexpected channel creation update', result);\n    }\n    return undefined;\n  }\n\n  const newChannel = result.chats[0];\n  if (!newChannel || !(newChannel instanceof GramJs.Channel)) {\n    if (DEBUG) {\n      // eslint-disable-next-line no-console\n      console.error('Created channel not found', result);\n    }\n    return undefined;\n  }\n\n  const channel = buildApiChatFromPreview(newChannel)!;\n\n  let missingUsers: ApiMissingInvitedUser[] | undefined;\n\n  if (users?.length) {\n    const invitedUsers = await invokeRequest(new GramJs.channels.InviteToChannel({\n      channel: buildInputEntity(channel.id, channel.accessHash) as GramJs.InputChannel,\n      users: users.map(({ id, accessHash }) => buildInputEntity(id, accessHash)) as GramJs.InputUser[],\n    }));\n    if (!invitedUsers) return undefined;\n\n    handleGramJsUpdate(invitedUsers.updates);\n    missingUsers = invitedUsers.missingInvitees.map(buildApiMissingInvitedUser);\n  }\n\n  return { channel, missingUsers };\n}\n\nexport function joinChannel({\n  channelId, accessHash,\n}: {\n  channelId: string; accessHash: string;\n}) {\n  return invokeRequest(new GramJs.channels.JoinChannel({\n    channel: buildInputEntity(channelId, accessHash) as GramJs.InputChannel,\n  }), {\n    shouldReturnTrue: true,\n    shouldThrow: true,\n  });\n}\n\nexport function deleteChatUser({\n  chat, user,\n}: {\n  chat: ApiChat; user: ApiUser;\n}) {\n  if (chat.type !== 'chatTypeBasicGroup') return undefined;\n  return invokeRequest(new GramJs.messages.DeleteChatUser({\n    chatId: buildInputEntity(chat.id, chat.accessHash) as BigInt.BigInteger,\n    userId: buildInputEntity(user.id, user.accessHash) as GramJs.InputUser,\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n\nexport function deleteChat({\n  chatId,\n}: {\n  chatId: string;\n}) {\n  return invokeRequest(new GramJs.messages.DeleteChat({\n    chatId: buildInputEntity(chatId) as BigInt.BigInteger,\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n\nexport function leaveChannel({\n  channelId, accessHash,\n}: {\n  channelId: string; accessHash: string;\n}) {\n  return invokeRequest(new GramJs.channels.LeaveChannel({\n    channel: buildInputEntity(channelId, accessHash) as GramJs.InputChannel,\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n\nexport function deleteChannel({\n  channelId, accessHash,\n}: {\n  channelId: string; accessHash: string;\n}) {\n  return invokeRequest(new GramJs.channels.DeleteChannel({\n    channel: buildInputEntity(channelId, accessHash) as GramJs.InputChannel,\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n\nexport async function createGroupChat({\n  title, users,\n}: {\n  title: string; users: ApiUser[];\n}) {\n  const invitedUsers = await invokeRequest(new GramJs.messages.CreateChat({\n    title,\n    users: users.map(({ id, accessHash }) => buildInputEntity(id, accessHash)) as GramJs.InputUser[],\n  }));\n  if (!invitedUsers) return undefined;\n\n  handleGramJsUpdate(invitedUsers.updates);\n  const missingUsers = invitedUsers.missingInvitees.map(buildApiMissingInvitedUser);\n\n  const newChat = (invitedUsers.updates as GramJs.Updates).chats[0];\n  if (!newChat || !(newChat instanceof GramJs.Chat)) {\n    if (DEBUG) {\n      // eslint-disable-next-line no-console\n      console.error('Created chat not found', invitedUsers.updates);\n    }\n    return undefined;\n  }\n\n  return { chat: buildApiChatFromPreview(newChat), missingUsers };\n}\n\nexport async function editChatPhoto({\n  chatId, accessHash, photo,\n}: {\n  chatId: string; accessHash?: string; photo?: File | ApiPhoto;\n}) {\n  const inputEntity = buildInputEntity(chatId, accessHash);\n  let inputPhoto: GramJs.TypeInputChatPhoto;\n  if (photo instanceof File) {\n    const uploadedPhoto = await uploadFile(photo);\n    inputPhoto = new GramJs.InputChatUploadedPhoto({\n      file: uploadedPhoto,\n    });\n  } else if (photo) {\n    const photoId = buildInputPhoto(photo);\n    if (!photoId) return false;\n    inputPhoto = new GramJs.InputChatPhoto({\n      id: photoId,\n    });\n  } else {\n    inputPhoto = new GramJs.InputChatPhotoEmpty();\n  }\n  return invokeRequest(\n    inputEntity instanceof GramJs.InputChannel\n      ? new GramJs.channels.EditPhoto({\n        channel: inputEntity as GramJs.InputChannel,\n        photo: inputPhoto,\n      })\n      : new GramJs.messages.EditChatPhoto({\n        chatId: inputEntity as BigInt.BigInteger,\n        photo: inputPhoto,\n      }),\n    {\n      shouldReturnTrue: true,\n    },\n  );\n}\n\nexport async function toggleChatPinned({\n  chat,\n  shouldBePinned,\n}: {\n  chat: ApiChat;\n  shouldBePinned: boolean;\n}) {\n  const { id, accessHash } = chat;\n\n  const isActionSuccessful = await invokeRequest(new GramJs.messages.ToggleDialogPin({\n    peer: new GramJs.InputDialogPeer({\n      peer: buildInputPeer(id, accessHash),\n    }),\n    pinned: shouldBePinned || undefined,\n  }));\n\n  if (isActionSuccessful) {\n    onUpdate({\n      '@type': 'updateChatPinned',\n      id: chat.id,\n      isPinned: shouldBePinned,\n    });\n  }\n}\n\nexport async function toggleSavedDialogPinned({\n  chat, shouldBePinned,\n}: {\n  chat: ApiChat;\n  shouldBePinned: boolean;\n}) {\n  const { id, accessHash } = chat;\n\n  const isActionSuccessful = await invokeRequest(new GramJs.messages.ToggleSavedDialogPin({\n    peer: new GramJs.InputDialogPeer({\n      peer: buildInputPeer(id, accessHash),\n    }),\n    pinned: shouldBePinned || undefined,\n  }));\n\n  if (isActionSuccessful) {\n    onUpdate({\n      '@type': 'updateSavedDialogPinned',\n      id: chat.id,\n      isPinned: shouldBePinned,\n    });\n  }\n}\n\nexport function toggleChatArchived({\n  chat, folderId,\n}: {\n  chat: ApiChat; folderId: number;\n}) {\n  const { id, accessHash } = chat;\n\n  return invokeRequest(new GramJs.folders.EditPeerFolders({\n    folderPeers: [new GramJs.InputFolderPeer({\n      peer: buildInputPeer(id, accessHash),\n      folderId,\n    })],\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n\nexport async function fetchChatFolders() {\n  const result = await invokeRequest(new GramJs.messages.GetDialogFilters());\n\n  if (!result) {\n    return undefined;\n  }\n  const { filters } = result;\n\n  const defaultFolderPosition = filters.findIndex((folder) => folder instanceof GramJs.DialogFilterDefault);\n  const dialogFilters = filters.filter(isChatFolder);\n  const orderedIds = dialogFilters.map(({ id }) => id);\n  if (defaultFolderPosition !== -1) {\n    orderedIds.splice(defaultFolderPosition, 0, ALL_FOLDER_ID);\n  }\n  return {\n    byId: buildCollectionByKey(\n      dialogFilters\n        .map(buildApiChatFolder), 'id',\n    ) as Record<number, ApiChatFolder>,\n    orderedIds,\n  };\n}\n\nexport async function fetchRecommendedChatFolders() {\n  const results = await invokeRequest(new GramJs.messages.GetSuggestedDialogFilters());\n\n  if (!results) {\n    return undefined;\n  }\n\n  return results.map(buildApiChatFolderFromSuggested).filter(Boolean);\n}\n\nexport async function editChatFolder({\n  id,\n  folderUpdate,\n}: {\n  id: number;\n  folderUpdate: ApiChatFolder;\n}) {\n  // Telegram ignores excluded chats if they also present in the included list\n  folderUpdate.excludedChatIds = folderUpdate.excludedChatIds.filter((chatId) => {\n    return !folderUpdate.includedChatIds.includes(chatId);\n  });\n\n  const filter = buildFilterFromApiFolder(folderUpdate);\n\n  const isActionSuccessful = await invokeRequest(new GramJs.messages.UpdateDialogFilter({\n    id,\n    filter,\n  }));\n\n  if (isActionSuccessful) {\n    onUpdate({\n      '@type': 'updateChatFolder',\n      id,\n      folder: folderUpdate,\n    });\n  }\n}\n\nexport async function deleteChatFolder(id: number) {\n  const isActionSuccessful = await invokeRequest(new GramJs.messages.UpdateDialogFilter({\n    id,\n    filter: undefined,\n  }));\n  const recommendedChatFolders = await fetchRecommendedChatFolders();\n\n  if (isActionSuccessful) {\n    onUpdate({\n      '@type': 'updateChatFolder',\n      id,\n      folder: undefined,\n    });\n  }\n  if (recommendedChatFolders) {\n    onUpdate({\n      '@type': 'updateRecommendedChatFolders',\n      folders: recommendedChatFolders,\n    });\n  }\n}\n\nexport function sortChatFolders(ids: number[]) {\n  return invokeRequest(new GramJs.messages.UpdateDialogFiltersOrder({\n    order: ids,\n  }));\n}\n\nexport async function toggleDialogUnread({\n  chat, hasUnreadMark,\n}: {\n  chat: ApiChat; hasUnreadMark: boolean | undefined;\n}) {\n  const { id, accessHash } = chat;\n\n  const isActionSuccessful = await invokeRequest(new GramJs.messages.MarkDialogUnread({\n    peer: new GramJs.InputDialogPeer({\n      peer: buildInputPeer(id, accessHash),\n    }),\n    unread: hasUnreadMark || undefined,\n  }));\n\n  if (isActionSuccessful) {\n    onUpdate({\n      '@type': 'updateChat',\n      id: chat.id,\n      chat: { hasUnreadMark },\n    });\n  }\n}\n\nexport async function getChatByPhoneNumber(phoneNumber: string) {\n  const result = await invokeRequest(new GramJs.contacts.ResolvePhone({\n    phone: phoneNumber,\n  }));\n\n  return processResolvedPeer(result);\n}\n\nexport async function getChatByUsername(username: string) {\n  const result = await invokeRequest(new GramJs.contacts.ResolveUsername({\n    username,\n  }));\n\n  return processResolvedPeer(result);\n}\n\nfunction processResolvedPeer(result?: GramJs.contacts.TypeResolvedPeer) {\n  if (!result) {\n    return undefined;\n  }\n\n  const { users, chats } = result;\n\n  const chat = chats.length\n    ? buildApiChatFromPreview(chats[0])\n    : buildApiChatFromPreview(users[0]);\n\n  if (!chat) {\n    return undefined;\n  }\n\n  updateLocalDb(result);\n\n  return {\n    chat,\n    user: buildApiUser(users[0]),\n  };\n}\n\nexport function togglePreHistoryHidden({\n  chat, isEnabled,\n}: { chat: ApiChat; isEnabled: boolean }) {\n  const { id, accessHash } = chat;\n  const channel = buildInputEntity(id, accessHash);\n\n  return invokeRequest(new GramJs.channels.TogglePreHistoryHidden({\n    channel: channel as GramJs.InputChannel,\n    enabled: isEnabled,\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n\nexport function updateChatDefaultBannedRights({\n  chat, bannedRights,\n}: { chat: ApiChat; bannedRights: ApiChatBannedRights }) {\n  const { id, accessHash } = chat;\n  const peer = buildInputPeer(id, accessHash);\n\n  return invokeRequest(new GramJs.messages.EditChatDefaultBannedRights({\n    peer,\n    bannedRights: buildChatBannedRights(bannedRights),\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n\nexport function updateChatMemberBannedRights({\n  chat, user, bannedRights, untilDate,\n}: { chat: ApiChat; user: ApiUser; bannedRights: ApiChatBannedRights; untilDate?: number }) {\n  const channel = buildInputEntity(chat.id, chat.accessHash) as GramJs.InputChannel;\n  const participant = buildInputPeer(user.id, user.accessHash) as GramJs.InputUser;\n\n  return invokeRequest(new GramJs.channels.EditBanned({\n    channel,\n    participant,\n    bannedRights: buildChatBannedRights(bannedRights, untilDate),\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n\nexport function updateChatAdmin({\n  chat, user, adminRights, customTitle = '',\n}: { chat: ApiChat; user: ApiUser; adminRights: ApiChatAdminRights; customTitle?: string }) {\n  const channel = buildInputEntity(chat.id, chat.accessHash) as GramJs.InputChannel;\n  const userId = buildInputEntity(user.id, user.accessHash) as GramJs.InputUser;\n\n  return invokeRequest(new GramJs.channels.EditAdmin({\n    channel,\n    userId,\n    adminRights: buildChatAdminRights(adminRights),\n    rank: customTitle,\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n\nexport async function updateChatTitle(chat: ApiChat, title: string) {\n  const inputEntity = buildInputEntity(chat.id, chat.accessHash);\n  await invokeRequest(\n    inputEntity instanceof GramJs.InputChannel\n      ? new GramJs.channels.EditTitle({\n        channel: inputEntity as GramJs.InputChannel,\n        title,\n      }) : new GramJs.messages.EditChatTitle({\n        chatId: inputEntity as BigInt.BigInteger,\n        title,\n      }),\n    {\n      shouldReturnTrue: true,\n    },\n  );\n}\n\nexport async function updateChatAbout(chat: ApiChat, about: string) {\n  const result = await invokeRequest(new GramJs.messages.EditChatAbout({\n    peer: buildInputPeer(chat.id, chat.accessHash),\n    about,\n  }));\n\n  if (!result) {\n    return;\n  }\n\n  onUpdate({\n    '@type': 'updateChatFullInfo',\n    id: chat.id,\n    fullInfo: {\n      about,\n    },\n  });\n}\n\nexport function toggleSignatures({\n  chat, isEnabled,\n}: { chat: ApiChat; isEnabled: boolean }) {\n  const { id, accessHash } = chat;\n  const channel = buildInputEntity(id, accessHash);\n\n  return invokeRequest(new GramJs.channels.ToggleSignatures({\n    channel: channel as GramJs.InputChannel,\n    enabled: isEnabled,\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n\ntype ChannelMembersFilter =\n  'kicked'\n  | 'admin'\n  | 'recent';\n\nexport async function fetchMembers(\n  chatId: string,\n  accessHash: string,\n  memberFilter: ChannelMembersFilter = 'recent',\n  offset?: number,\n) {\n  let filter: GramJs.TypeChannelParticipantsFilter;\n\n  switch (memberFilter) {\n    case 'kicked':\n      filter = new GramJs.ChannelParticipantsKicked({ q: '' });\n      break;\n    case 'admin':\n      filter = new GramJs.ChannelParticipantsAdmins();\n      break;\n    default:\n      filter = new GramJs.ChannelParticipantsRecent();\n      break;\n  }\n\n  const result = await invokeRequest(new GramJs.channels.GetParticipants({\n    channel: buildInputEntity(chatId, accessHash) as GramJs.InputChannel,\n    filter,\n    offset,\n    limit: MEMBERS_LOAD_SLICE,\n  }), {\n    abortControllerChatId: chatId,\n  });\n\n  if (!result || result instanceof GramJs.channels.ChannelParticipantsNotModified) {\n    return undefined;\n  }\n\n  updateLocalDb(result);\n  const { users, userStatusesById } = buildApiUsersAndStatuses(result.users);\n\n  return {\n    members: buildChatMembers(result),\n    users,\n    userStatusesById,\n  };\n}\n\nexport async function fetchGroupsForDiscussion() {\n  const result = await invokeRequest(new GramJs.channels.GetGroupsForDiscussion());\n\n  if (!result) {\n    return undefined;\n  }\n\n  updateLocalDb(result);\n\n  return result.chats.map((chat) => buildApiChatFromPreview(chat));\n}\n\nexport function setDiscussionGroup({\n  channel,\n  chat,\n}: {\n  channel: ApiChat;\n  chat?: ApiChat;\n}) {\n  return invokeRequest(new GramJs.channels.SetDiscussionGroup({\n    broadcast: buildInputPeer(channel.id, channel.accessHash),\n    group: chat ? buildInputPeer(chat.id, chat.accessHash) : new GramJs.InputChannelEmpty(),\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n\nexport async function migrateChat(chat: ApiChat) {\n  const result = await invokeRequest(\n    new GramJs.messages.MigrateChat({ chatId: buildInputEntity(chat.id) as BigInt.BigInteger }),\n    {\n      shouldThrow: true,\n    },\n  );\n\n  // `migrateChat` can return a lot of different update types according to docs,\n  // but currently chat migrations returns only `Updates` type.\n  // Errors are added to catch unexpected cases in future testing\n  if (!result || !(result instanceof GramJs.Updates)) {\n    if (DEBUG) {\n      // eslint-disable-next-line no-console\n      console.error('Unexpected channel creation update', result);\n    }\n\n    return undefined;\n  }\n\n  updateLocalDb(result);\n\n  const newChannelId = result.updates\n    .find((update): update is GramJs.UpdateChannel => update instanceof GramJs.UpdateChannel)!.channelId;\n\n  const newChannel = result.chats.find((c) => (\n    c instanceof GramJs.Channel && c.id.toString() === newChannelId.toString()\n  ))!;\n\n  return buildApiChatFromPreview(newChannel);\n}\n\nexport async function openChatByInvite(hash: string) {\n  const result = await invokeRequest(new GramJs.messages.CheckChatInvite({ hash }));\n\n  if (!result) {\n    return undefined;\n  }\n\n  let chat: ApiChat | undefined;\n\n  if (result instanceof GramJs.ChatInvite) {\n    const {\n      photo, participantsCount, title, channel, requestNeeded, about, megagroup,\n    } = result;\n\n    if (photo instanceof GramJs.Photo) {\n      addPhotoToLocalDb(result.photo);\n    }\n\n    onUpdate({\n      '@type': 'showInvite',\n      data: {\n        title,\n        about,\n        hash,\n        participantsCount,\n        isChannel: channel && !megagroup,\n        isRequestNeeded: requestNeeded,\n        ...(photo instanceof GramJs.Photo && { photo: buildApiPhoto(photo) }),\n      },\n    });\n  } else {\n    chat = buildApiChatFromPreview(result.chat);\n\n    if (chat) {\n      onUpdate({\n        '@type': 'updateChat',\n        id: chat.id,\n        chat,\n      });\n    }\n  }\n\n  if (!chat) {\n    return undefined;\n  }\n\n  return { chatId: chat.id };\n}\n\nexport async function addChatMembers(chat: ApiChat, users: ApiUser[]) {\n  try {\n    if (chat.type === 'chatTypeChannel' || chat.type === 'chatTypeSuperGroup') {\n      const invitedUsers = await invokeRequest(new GramJs.channels.InviteToChannel({\n        channel: buildInputEntity(chat.id, chat.accessHash) as GramJs.InputChannel,\n        users: users.map((user) => buildInputEntity(user.id, user.accessHash)) as GramJs.InputUser[],\n      }));\n      if (!invitedUsers) return undefined;\n      handleGramJsUpdate(invitedUsers.updates);\n      return invitedUsers.missingInvitees.map(buildApiMissingInvitedUser);\n    }\n\n    const addChatUsersResult = await Promise.all(\n      users.map(async (user) => {\n        const invitedUsers = await invokeRequest(new GramJs.messages.AddChatUser({\n          chatId: buildInputEntity(chat.id) as BigInt.BigInteger,\n          userId: buildInputEntity(user.id, user.accessHash) as GramJs.InputUser,\n        }));\n        if (!invitedUsers) return undefined;\n        handleGramJsUpdate(invitedUsers.updates);\n        return invitedUsers.missingInvitees.map(buildApiMissingInvitedUser);\n      }),\n    );\n    if (addChatUsersResult) {\n      return addChatUsersResult.flat().filter(Boolean);\n    }\n  } catch (err) {\n    onUpdate({\n      '@type': 'error',\n      error: {\n        message: (err as Error).message,\n      },\n    });\n  }\n  return undefined;\n}\n\nexport function deleteChatMember(chat: ApiChat, user: ApiUser) {\n  if (chat.type === 'chatTypeChannel' || chat.type === 'chatTypeSuperGroup') {\n    return updateChatMemberBannedRights({\n      chat,\n      user,\n      bannedRights: {\n        viewMessages: true,\n        sendMessages: true,\n        sendMedia: true,\n        sendStickers: true,\n        sendGifs: true,\n        sendGames: true,\n        sendInline: true,\n        embedLinks: true,\n        sendPolls: true,\n        changeInfo: true,\n        inviteUsers: true,\n        pinMessages: true,\n        manageTopics: true,\n        sendPhotos: true,\n        sendVideos: true,\n        sendRoundvideos: true,\n        sendAudios: true,\n        sendVoices: true,\n        sendDocs: true,\n        sendPlain: true,\n      },\n      untilDate: MAX_INT_32,\n    });\n  } else {\n    return invokeRequest(new GramJs.messages.DeleteChatUser({\n      chatId: buildInputEntity(chat.id) as BigInt.BigInteger,\n      userId: buildInputEntity(user.id, user.accessHash) as GramJs.InputUser,\n    }), {\n      shouldReturnTrue: true,\n    });\n  }\n}\n\nexport function toggleJoinToSend(chat: ApiChat, isEnabled: boolean) {\n  return invokeRequest(new GramJs.channels.ToggleJoinToSend({\n    channel: buildInputEntity(chat.id, chat.accessHash) as GramJs.InputChannel,\n    enabled: isEnabled,\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n\nexport function toggleJoinRequest(chat: ApiChat, isEnabled: boolean) {\n  return invokeRequest(new GramJs.channels.ToggleJoinRequest({\n    channel: buildInputEntity(chat.id, chat.accessHash) as GramJs.InputChannel,\n    enabled: isEnabled,\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n\nfunction preparePeers(\n  result: GramJs.messages.Dialogs | GramJs.messages.DialogsSlice | GramJs.messages.PeerDialogs |\n  GramJs.messages.SavedDialogs | GramJs.messages.SavedDialogsSlice,\n  currentStore?: Record<string, GramJs.TypeChat | GramJs.TypeUser>,\n) {\n  const store: Record<string, GramJs.TypeChat | GramJs.TypeUser> = {};\n\n  result.chats?.forEach((chat) => {\n    const key = `chat${chat.id}`;\n\n    if (currentStore?.[key] && 'min' in chat && chat.min) {\n      return;\n    }\n\n    store[key] = chat;\n  });\n\n  result.users?.forEach((user) => {\n    const key = `user${user.id}`;\n\n    if (currentStore?.[key] && 'min' in user && user.min) {\n      return;\n    }\n\n    store[key] = user;\n  });\n\n  return store;\n}\n\nfunction updateLocalDb(result: (\n  GramJs.messages.Dialogs | GramJs.messages.DialogsSlice | GramJs.messages.PeerDialogs |\n  GramJs.messages.SavedDialogs | GramJs.messages.SavedDialogsSlice |\n  GramJs.messages.ChatFull | GramJs.contacts.Found |\n  GramJs.contacts.ResolvedPeer | GramJs.channels.ChannelParticipants |\n  GramJs.messages.Chats | GramJs.messages.ChatsSlice | GramJs.TypeUpdates | GramJs.messages.ForumTopics\n)) {\n  if ('users' in result) {\n    addEntitiesToLocalDb(result.users);\n  }\n\n  if ('chats' in result) {\n    addEntitiesToLocalDb(result.chats);\n  }\n\n  if ('messages' in result) {\n    result.messages.forEach((message) => {\n      addMessageToLocalDb(message);\n    });\n  }\n}\n\nexport async function importChatInvite({ hash }: { hash: string }) {\n  const updates = await invokeRequest(new GramJs.messages.ImportChatInvite({ hash }));\n  if (!(updates instanceof GramJs.Updates) || !updates.chats.length) {\n    return undefined;\n  }\n\n  return buildApiChatFromPreview(updates.chats[0]);\n}\n\nexport function setChatEnabledReactions({\n  chat, enabledReactions,\n}: {\n  chat: ApiChat; enabledReactions?: ApiChatReactions;\n}) {\n  return invokeRequest(new GramJs.messages.SetChatAvailableReactions({\n    peer: buildInputPeer(chat.id, chat.accessHash),\n    availableReactions: buildInputChatReactions(enabledReactions),\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n\nexport function toggleIsProtected({\n  chat, isProtected,\n}: { chat: ApiChat; isProtected: boolean }) {\n  const { id, accessHash } = chat;\n\n  return invokeRequest(new GramJs.messages.ToggleNoForwards({\n    peer: buildInputPeer(id, accessHash),\n    enabled: isProtected,\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n\nexport function toggleParticipantsHidden({\n  chat, isEnabled,\n}: { chat: ApiChat; isEnabled: boolean }) {\n  const { id, accessHash } = chat;\n\n  return invokeRequest(new GramJs.channels.ToggleParticipantsHidden({\n    channel: buildInputPeer(id, accessHash),\n    enabled: isEnabled,\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n\nexport function toggleForum({\n  chat, isEnabled,\n}: { chat: ApiChat; isEnabled: boolean }) {\n  const { id, accessHash } = chat;\n\n  return invokeRequest(new GramJs.channels.ToggleForum({\n    channel: buildInputPeer(id, accessHash),\n    enabled: isEnabled,\n  }), {\n    shouldReturnTrue: true,\n    shouldThrow: true,\n  });\n}\n\nexport async function createTopic({\n  chat, title, iconColor, iconEmojiId, sendAs,\n}: {\n  chat: ApiChat;\n  title: string;\n  iconColor?: number;\n  iconEmojiId?: string;\n  sendAs?: ApiPeer;\n}) {\n  const { id, accessHash } = chat;\n\n  const updates = await invokeRequest(new GramJs.channels.CreateForumTopic({\n    channel: buildInputPeer(id, accessHash),\n    title,\n    iconColor,\n    iconEmojiId: iconEmojiId ? BigInt(iconEmojiId) : undefined,\n    sendAs: sendAs ? buildInputPeer(sendAs.id, sendAs.accessHash) : undefined,\n    randomId: generateRandomBigInt(),\n  }));\n\n  if (!(updates instanceof GramJs.Updates) || !updates.updates.length) {\n    return undefined;\n  }\n\n  // Finding topic id in updates\n  return updates.updates?.find((update): update is GramJs.UpdateMessageID => (\n    update instanceof GramJs.UpdateMessageID\n  ))?.id;\n}\n\nexport async function fetchTopics({\n  chat, query, offsetTopicId, offsetId, offsetDate, limit = TOPICS_SLICE,\n}: {\n  chat: ApiChat;\n  query?: string;\n  offsetTopicId?: number;\n  offsetId?: number;\n  offsetDate?: number;\n  limit?: number;\n}): Promise<{\n    topics: ApiTopic[];\n    messages: ApiMessage[];\n    users: ApiUser[];\n    chats: ApiChat[];\n    count: number;\n    shouldOrderByCreateDate?: boolean;\n    draftsById: Record<number, ReturnType<typeof buildMessageDraft>>;\n    readInboxMessageIdByTopicId: Record<number, number>;\n  } | undefined> {\n  const { id, accessHash } = chat;\n\n  const result = await invokeRequest(new GramJs.channels.GetForumTopics({\n    channel: buildInputPeer(id, accessHash),\n    limit,\n    q: query,\n    offsetTopic: offsetTopicId,\n    offsetId,\n    offsetDate,\n  }));\n\n  if (!result) return undefined;\n\n  updateLocalDb(result);\n\n  const { count, orderByCreateDate } = result;\n\n  const topics = result.topics.map(buildApiTopic).filter(Boolean);\n  const messages = result.messages.map(buildApiMessage).filter(Boolean);\n  dispatchThreadInfoUpdates(result.messages);\n  const users = result.users.map(buildApiUser).filter(Boolean);\n  const chats = result.chats.map((c) => buildApiChatFromPreview(c)).filter(Boolean);\n  const draftsById = result.topics.reduce((acc, topic) => {\n    if (topic instanceof GramJs.ForumTopic && topic.draft) {\n      acc[topic.id] = buildMessageDraft(topic.draft);\n    }\n    return acc;\n  }, {} as Record<number, ReturnType<typeof buildMessageDraft>>);\n  const readInboxMessageIdByTopicId = result.topics.reduce((acc, topic) => {\n    if (topic instanceof GramJs.ForumTopic && topic.readInboxMaxId) {\n      acc[topic.id] = topic.readInboxMaxId;\n    }\n    return acc;\n  }, {} as Record<number, number>);\n\n  return {\n    topics,\n    messages,\n    users,\n    chats,\n    // Include general topic\n    count: count + 1,\n    shouldOrderByCreateDate: orderByCreateDate,\n    draftsById,\n    readInboxMessageIdByTopicId,\n  };\n}\n\nexport async function fetchTopicById({\n  chat, topicId,\n}: {\n  chat: ApiChat;\n  topicId: number;\n}): Promise<{\n    topic: ApiTopic;\n    messages: ApiMessage[];\n    users: ApiUser[];\n    chats: ApiChat[];\n  } | undefined> {\n  const { id, accessHash } = chat;\n\n  const result = await invokeRequest(new GramJs.channels.GetForumTopicsByID({\n    channel: buildInputPeer(id, accessHash),\n    topics: [topicId],\n  }));\n\n  if (!result?.topics.length || !(result.topics[0] instanceof GramJs.ForumTopic)) {\n    return undefined;\n  }\n\n  updateLocalDb(result);\n\n  const messages = result.messages.map(buildApiMessage).filter(Boolean);\n  dispatchThreadInfoUpdates(result.messages);\n  const users = result.users.map(buildApiUser).filter(Boolean);\n  const chats = result.chats.map((c) => buildApiChatFromPreview(c)).filter(Boolean);\n\n  return {\n    topic: buildApiTopic(result.topics[0])!,\n    messages,\n    users,\n    chats,\n  };\n}\n\nexport async function deleteTopic({\n  chat, topicId,\n}: {\n  chat: ApiChat;\n  topicId: number;\n}) {\n  const { id, accessHash } = chat;\n\n  const result = await invokeRequest(new GramJs.channels.DeleteTopicHistory({\n    channel: buildInputPeer(id, accessHash),\n    topMsgId: topicId,\n  }));\n\n  if (!result) return;\n\n  processAffectedHistory(chat, result);\n\n  if (result.offset) {\n    await deleteTopic({ chat, topicId });\n  }\n}\n\nexport function togglePinnedTopic({\n  chat, topicId, isPinned,\n}: {\n  chat: ApiChat;\n  topicId: number;\n  isPinned: boolean;\n}) {\n  const { id, accessHash } = chat;\n\n  return invokeRequest(new GramJs.channels.UpdatePinnedForumTopic({\n    channel: buildInputPeer(id, accessHash),\n    topicId,\n    pinned: isPinned,\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n\nexport function editTopic({\n  chat, topicId, title, iconEmojiId, isClosed, isHidden,\n}: {\n  chat: ApiChat;\n  topicId: number;\n  title?: string;\n  iconEmojiId?: string;\n  isClosed?: boolean;\n  isHidden?: boolean;\n}) {\n  const { id, accessHash } = chat;\n\n  return invokeRequest(new GramJs.channels.EditForumTopic({\n    channel: buildInputPeer(id, accessHash),\n    topicId,\n    title,\n    iconEmojiId: topicId !== GENERAL_TOPIC_ID && iconEmojiId ? BigInt(iconEmojiId) : undefined,\n    closed: isClosed,\n    hidden: isHidden,\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n\nexport async function checkChatlistInvite({\n  slug,\n}: {\n  slug: string;\n}) {\n  const result = await invokeRequest(new GramJs.chatlists.CheckChatlistInvite({\n    slug,\n  }));\n\n  const invite = buildApiChatlistInvite(result, slug);\n\n  if (!result || !invite) return undefined;\n\n  updateLocalDb(result);\n\n  return {\n    invite,\n    users: result.users.map(buildApiUser).filter(Boolean),\n    chats: result.chats.map((c) => buildApiChatFromPreview(c)).filter(Boolean),\n  };\n}\n\nexport function joinChatlistInvite({\n  slug,\n  peers,\n}: {\n  slug: string;\n  peers: ApiChat[];\n}) {\n  return invokeRequest(new GramJs.chatlists.JoinChatlistInvite({\n    slug,\n    peers: peers.map((peer) => buildInputPeer(peer.id, peer.accessHash)),\n  }), {\n    shouldReturnTrue: true,\n    shouldThrow: true,\n  });\n}\n\nexport async function fetchLeaveChatlistSuggestions({\n  folderId,\n}: {\n  folderId: number;\n}) {\n  const result = await invokeRequest(new GramJs.chatlists.GetLeaveChatlistSuggestions({\n    chatlist: new GramJs.InputChatlistDialogFilter({\n      filterId: folderId,\n    }),\n  }));\n\n  if (!result) return undefined;\n\n  return result.map(getApiChatIdFromMtpPeer);\n}\n\nexport function leaveChatlist({\n  folderId,\n  peers,\n}: {\n  folderId: number;\n  peers: ApiChat[];\n}) {\n  return invokeRequest(new GramJs.chatlists.LeaveChatlist({\n    chatlist: new GramJs.InputChatlistDialogFilter({\n      filterId: folderId,\n    }),\n    peers: peers.map((peer) => buildInputPeer(peer.id, peer.accessHash)),\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n\nexport async function createChalistInvite({\n  folderId, title, peers,\n}: {\n  folderId: number;\n  title?: string;\n  peers: ApiPeer[];\n}) {\n  const result = await invokeRequest(new GramJs.chatlists.ExportChatlistInvite({\n    chatlist: new GramJs.InputChatlistDialogFilter({\n      filterId: folderId,\n    }),\n    title: title || '',\n    peers: peers.map((peer) => buildInputPeer(peer.id, peer.accessHash)),\n  }), {\n    shouldThrow: true,\n  });\n\n  if (!result || result.filter instanceof GramJs.DialogFilterDefault) return undefined;\n\n  return {\n    filter: buildApiChatFolder(result.filter),\n    invite: buildApiChatlistExportedInvite(result.invite),\n  };\n}\n\nexport function deleteChatlistInvite({\n  folderId, slug,\n}: {\n  folderId: number;\n  slug: string;\n}) {\n  return invokeRequest(new GramJs.chatlists.DeleteExportedInvite({\n    chatlist: new GramJs.InputChatlistDialogFilter({\n      filterId: folderId,\n    }),\n    slug,\n  }));\n}\n\nexport async function editChatlistInvite({\n  folderId, slug, title, peers,\n}: {\n  folderId: number;\n  slug: string;\n  title?: string;\n  peers: ApiPeer[];\n}) {\n  const result = await invokeRequest(new GramJs.chatlists.EditExportedInvite({\n    chatlist: new GramJs.InputChatlistDialogFilter({\n      filterId: folderId,\n    }),\n    slug,\n    title,\n    peers: peers.map((peer) => buildInputPeer(peer.id, peer.accessHash)),\n  }), {\n    shouldThrow: true,\n  });\n  if (!result) return undefined;\n\n  return buildApiChatlistExportedInvite(result);\n}\n\nexport async function fetchChatlistInvites({\n  folderId,\n}: {\n  folderId: number;\n}) {\n  const result = await invokeRequest(new GramJs.chatlists.GetExportedInvites({\n    chatlist: new GramJs.InputChatlistDialogFilter({\n      filterId: folderId,\n    }),\n  }));\n\n  if (!result) return undefined;\n\n  updateLocalDb(result);\n\n  return {\n    invites: result.invites.map(buildApiChatlistExportedInvite).filter(Boolean),\n    users: result.users.map(buildApiUser).filter(Boolean),\n    chats: result.chats.map((c) => buildApiChatFromPreview(c)).filter(Boolean),\n  };\n}\n\nexport function togglePeerTranslations({\n  chat, isEnabled,\n}: {\n  chat: ApiChat;\n  isEnabled: boolean;\n}) {\n  return invokeRequest(new GramJs.messages.TogglePeerTranslations({\n    disabled: isEnabled ? undefined : true,\n    peer: buildInputPeer(chat.id, chat.accessHash),\n  }));\n}\n\nexport function setViewForumAsMessages({ chat, isEnabled }: { chat: ApiChat; isEnabled: boolean }) {\n  const { id, accessHash } = chat;\n  const channel = buildInputEntity(id, accessHash);\n\n  return invokeRequest(new GramJs.channels.ToggleViewForumAsMessages({\n    channel: channel as GramJs.InputChannel,\n    enabled: Boolean(isEnabled),\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n\nexport async function fetchChannelRecommendations({ chat }: { chat?: ApiChat }) {\n  const result = await invokeRequest(new GramJs.channels.GetChannelRecommendations({\n    channel: chat && buildInputEntity(chat.id, chat.accessHash) as GramJs.InputChannel,\n  }));\n  if (!result) {\n    return undefined;\n  }\n\n  updateLocalDb(result);\n\n  const similarChannels = result?.chats\n    .map((c) => buildApiChatFromPreview(c))\n    .filter(Boolean);\n\n  return {\n    similarChannels,\n    count: result instanceof GramJs.messages.ChatsSlice ? result.count : similarChannels.length,\n  };\n}\n\nexport async function reportSponsoredMessage({\n  chat,\n  randomId,\n  option,\n}: {\n  chat: ApiChat;\n  randomId: string;\n  option: string;\n}) {\n  const { id, accessHash } = chat;\n  const channel = buildInputEntity(id, accessHash);\n\n  try {\n    const result = await invokeRequest(new GramJs.channels.ReportSponsoredMessage({\n      channel: channel as GramJs.InputChannel,\n      randomId: deserializeBytes(randomId),\n      option: deserializeBytes(option),\n    }), {\n      shouldThrow: true,\n    });\n\n    if (!result) {\n      return undefined;\n    }\n\n    return buildApiSponsoredMessageReportResult(result);\n  } catch (err) {\n    if (err instanceof Error && err.message === 'PREMIUM_ACCOUNT_REQUIRED') {\n      return {\n        type: 'premiumRequired' as const,\n      };\n    }\n    return undefined;\n  }\n}\n","import {\n  Api as GramJs,\n  sessions,\n} from '../../../lib/gramjs';\nimport type { TwoFaParams } from '../../../lib/gramjs/client/2fa';\nimport TelegramClient from '../../../lib/gramjs/client/TelegramClient';\nimport { Logger as GramJsLogger } from '../../../lib/gramjs/extensions/index';\n\nimport type { ThreadId } from '../../../types';\nimport type {\n  ApiInitialArgs,\n  ApiMediaFormat,\n  ApiOnProgress,\n  ApiSessionData,\n  OnApiUpdate,\n} from '../../types';\n\nimport {\n  APP_CODE_NAME,\n  DEBUG, DEBUG_GRAMJS, IS_TEST, UPLOAD_WORKERS,\n} from '../../../config';\nimport { pause } from '../../../util/schedulers';\nimport { buildApiMessage, setMessageBuilderCurrentUserId } from '../apiBuilders/messages';\nimport { buildApiPeerId } from '../apiBuilders/peers';\nimport { buildApiStory } from '../apiBuilders/stories';\nimport { buildApiUser, buildApiUserFullInfo } from '../apiBuilders/users';\nimport { buildInputPeerFromLocalDb } from '../gramjsBuilders';\nimport {\n  addEntitiesToLocalDb, addMessageToLocalDb, addStoryToLocalDb, addUserToLocalDb, isResponseUpdate, log,\n} from '../helpers';\nimport localDb, { clearLocalDb, type RepairInfo } from '../localDb';\nimport {\n  getDifference,\n  init as initUpdatesManager,\n  processUpdate,\n  reset as resetUpdatesManager,\n  scheduleGetChannelDifference,\n  updateChannelState,\n} from '../updates/updateManager';\nimport {\n  onAuthError, onAuthReady, onCurrentUserUpdate, onRequestCode, onRequestPassword, onRequestPhoneNumber,\n  onRequestQrCode, onRequestRegistration, onWebAuthTokenFailed,\n} from './auth';\nimport downloadMediaWithClient, { parseMediaUrl } from './media';\n\nimport { ChatAbortController } from '../ChatAbortController';\n\nconst DEFAULT_USER_AGENT = 'Unknown UserAgent';\nconst DEFAULT_PLATFORM = 'Unknown platform';\n\nGramJsLogger.setLevel(DEBUG_GRAMJS ? 'debug' : 'warn');\n\nconst gramJsUpdateEventBuilder = { build: (update: object) => update };\n\nconst CHAT_ABORT_CONTROLLERS = new Map<string, ChatAbortController>();\nconst ABORT_CONTROLLERS = new Map<string, AbortController>();\n\nlet onUpdate: OnApiUpdate;\nlet client: TelegramClient;\nlet currentUserId: string | undefined;\n\nexport async function init(_onUpdate: OnApiUpdate, initialArgs: ApiInitialArgs) {\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.log('>>> START INIT API');\n  }\n\n  onUpdate = _onUpdate;\n\n  const {\n    userAgent, platform, sessionData, isTest, isWebmSupported, maxBufferSize, webAuthToken, dcId,\n    mockScenario, shouldForceHttpTransport, shouldAllowHttpTransport,\n    shouldDebugExportedSenders, langCode,\n  } = initialArgs;\n  const session = new sessions.CallbackSession(sessionData, onSessionUpdate);\n\n  // eslint-disable-next-line no-restricted-globals\n  (self as any).isWebmSupported = isWebmSupported;\n  // eslint-disable-next-line no-restricted-globals\n  (self as any).maxBufferSize = maxBufferSize;\n\n  client = new TelegramClient(\n    session,\n    process.env.TELEGRAM_API_ID,\n    process.env.TELEGRAM_API_HASH,\n    {\n      deviceModel: navigator.userAgent || userAgent || DEFAULT_USER_AGENT,\n      systemVersion: platform || DEFAULT_PLATFORM,\n      appVersion: `${APP_VERSION} ${APP_CODE_NAME}`,\n      useWSS: true,\n      additionalDcsDisabled: IS_TEST,\n      shouldDebugExportedSenders,\n      shouldForceHttpTransport,\n      shouldAllowHttpTransport,\n      testServers: isTest,\n      dcId,\n      langCode,\n    } as any,\n  );\n\n  client.addEventHandler(handleGramJsUpdate, gramJsUpdateEventBuilder);\n\n  try {\n    if (DEBUG) {\n      log('CONNECTING');\n\n      // eslint-disable-next-line no-restricted-globals\n      (self as any).invoke = invokeRequest;\n      // eslint-disable-next-line no-restricted-globals\n      (self as any).GramJs = GramJs;\n    }\n\n    try {\n      client.setPingCallback(getDifference);\n      await client.start({\n        phoneNumber: onRequestPhoneNumber,\n        phoneCode: onRequestCode,\n        password: onRequestPassword,\n        firstAndLastNames: onRequestRegistration,\n        qrCode: onRequestQrCode,\n        onError: onAuthError,\n        initialMethod: platform === 'iOS' || platform === 'Android' ? 'phoneNumber' : 'qrCode',\n        shouldThrowIfUnauthorized: Boolean(sessionData),\n        webAuthToken,\n        webAuthTokenFailed: onWebAuthTokenFailed,\n        mockScenario,\n      });\n    } catch (err: any) {\n      // eslint-disable-next-line no-console\n      console.error(err);\n\n      if (err.message !== 'Disconnect' && err.message !== 'Cannot send requests while disconnected') {\n        onUpdate({\n          '@type': 'updateConnectionState',\n          connectionState: 'connectionStateBroken',\n        });\n\n        return;\n      }\n    }\n\n    if (DEBUG) {\n      // eslint-disable-next-line no-console\n      console.log('>>> FINISH INIT API');\n      log('CONNECTED');\n    }\n\n    onAuthReady();\n    onSessionUpdate(session.getSessionData());\n    onUpdate({ '@type': 'updateApiReady' });\n\n    initUpdatesManager(invokeRequest);\n\n    void fetchCurrentUser();\n  } catch (err) {\n    if (DEBUG) {\n      log('CONNECTING ERROR', err);\n    }\n\n    throw err;\n  }\n}\n\nexport function setIsPremium({ isPremium }: { isPremium: boolean }) {\n  client.setIsPremium(isPremium);\n}\n\nconst LOG_OUT_TIMEOUT = 2500;\nexport async function destroy(noLogOut = false, noClearLocalDb = false) {\n  if (!noLogOut && client.isConnected()) {\n    await Promise.race([\n      invokeRequest(new GramJs.auth.LogOut()),\n      pause(LOG_OUT_TIMEOUT),\n    ]);\n  }\n\n  if (!noClearLocalDb) {\n    clearLocalDb();\n    resetUpdatesManager();\n  }\n\n  await client.destroy();\n}\n\nexport async function disconnect() {\n  await client.disconnect();\n}\n\nexport function getClient() {\n  return client;\n}\n\nfunction onSessionUpdate(sessionData: ApiSessionData) {\n  onUpdate({\n    '@type': 'updateSession',\n    sessionData,\n  });\n}\n\ntype UpdateConfig = GramJs.UpdateConfig & { _entities?: (GramJs.TypeUser | GramJs.TypeChat)[] };\n\nexport function handleGramJsUpdate(update: any) {\n  processUpdate(update);\n\n  if (update instanceof GramJs.UpdatesTooLong) {\n    void handleTerminatedSession();\n  } else {\n    const updates = 'updates' in update ? update.updates : [update];\n    updates.forEach((nestedUpdate: any) => {\n      if (!(nestedUpdate instanceof GramJs.UpdateConfig)) return;\n      // eslint-disable-next-line no-underscore-dangle\n      const currentUser = (nestedUpdate as UpdateConfig)._entities\n        ?.find((entity) => entity instanceof GramJs.User && buildApiPeerId(entity.id, 'user') === currentUserId);\n      if (!(currentUser instanceof GramJs.User)) return;\n\n      setIsPremium({ isPremium: Boolean(currentUser.premium) });\n    });\n  }\n}\n\ntype InvokeRequestParams = {\n  shouldThrow?: boolean;\n  shouldIgnoreUpdates?: boolean;\n  dcId?: number;\n  shouldIgnoreErrors?: boolean;\n  abortControllerChatId?: string;\n  abortControllerThreadId?: ThreadId;\n  abortControllerGroup?: 'call';\n  shouldRetryOnTimeout?: boolean;\n};\n\nexport async function invokeRequest<T extends GramJs.AnyRequest>(\n  request: T,\n  params?: InvokeRequestParams & { shouldReturnTrue?: false },\n): Promise<T['__response'] | undefined>;\n\nexport async function invokeRequest<T extends GramJs.AnyRequest>(\n  request: T,\n  params?: InvokeRequestParams & { shouldReturnTrue: true },\n): Promise<true | undefined>;\n\nexport async function invokeRequest<T extends GramJs.AnyRequest>(\n  request: T,\n  params: InvokeRequestParams & { shouldReturnTrue?: boolean } = {},\n) {\n  const {\n    shouldThrow, shouldIgnoreUpdates, dcId, shouldIgnoreErrors, abortControllerChatId, abortControllerThreadId,\n    shouldRetryOnTimeout, abortControllerGroup,\n  } = params;\n  const shouldReturnTrue = Boolean(params.shouldReturnTrue);\n\n  let abortSignal: AbortSignal | undefined;\n  if (abortControllerChatId) {\n    let controller = CHAT_ABORT_CONTROLLERS.get(abortControllerChatId);\n    if (!controller) {\n      controller = new ChatAbortController();\n      CHAT_ABORT_CONTROLLERS.set(abortControllerChatId, controller);\n    }\n\n    abortSignal = abortControllerThreadId ? controller.getThreadSignal(abortControllerThreadId) : controller.signal;\n  }\n\n  if (abortControllerGroup) {\n    let controller = ABORT_CONTROLLERS.get(abortControllerGroup);\n    if (!controller) {\n      controller = new AbortController();\n      ABORT_CONTROLLERS.set(abortControllerGroup, controller);\n    }\n    abortSignal = controller.signal;\n  }\n\n  try {\n    if (DEBUG) {\n      log('INVOKE', request.className);\n    }\n\n    const result = await client.invoke(request, dcId, abortSignal, shouldRetryOnTimeout);\n\n    if (DEBUG) {\n      log('RESPONSE', request.className, result);\n    }\n\n    if (!shouldIgnoreUpdates && isResponseUpdate(result)) {\n      processUpdate(result);\n    }\n\n    return shouldReturnTrue ? result && true : result;\n  } catch (err: any) {\n    if (shouldIgnoreErrors) return undefined;\n    if (DEBUG) {\n      log('INVOKE ERROR', request.className);\n      // eslint-disable-next-line no-console\n      console.debug('invokeRequest failed with payload', request);\n      // eslint-disable-next-line no-console\n      console.error(err);\n    }\n\n    if (shouldThrow) {\n      throw err;\n    }\n\n    dispatchErrorUpdate(err, request);\n\n    return undefined;\n  }\n}\n\nexport function invokeRequestBeacon<T extends GramJs.AnyRequest>(\n  request: T,\n  dcId?: number,\n) {\n  if (DEBUG) {\n    log('BEACON', request.className);\n  }\n\n  client.invokeBeacon(request, dcId);\n}\n\nexport async function downloadMedia(\n  args: {\n    url: string; mediaFormat: ApiMediaFormat; start?: number; end?: number; isHtmlAllowed?: boolean;\n  },\n  onProgress?: ApiOnProgress,\n) {\n  try {\n    return (await downloadMediaWithClient(args, client, onProgress));\n  } catch (err: any) {\n    if (err.message.startsWith('FILE_REFERENCE')) {\n      const isFileReferenceRepaired = await repairFileReference({ url: args.url });\n      if (isFileReferenceRepaired) {\n        return downloadMediaWithClient(args, client, onProgress);\n      }\n\n      if (DEBUG) {\n        // eslint-disable-next-line no-console\n        console.error('Failed to repair file reference', args.url);\n      }\n    }\n\n    throw err;\n  }\n}\n\nexport function uploadFile(file: File, onProgress?: ApiOnProgress) {\n  return client.uploadFile({ file, onProgress, workers: UPLOAD_WORKERS });\n}\n\nexport function updateTwoFaSettings(params: TwoFaParams) {\n  return client.updateTwoFaSettings(params);\n}\n\nexport function getTmpPassword(currentPassword: string, ttl?: number) {\n  return client.getTmpPassword(currentPassword, ttl);\n}\n\nexport function abortChatRequests(params: { chatId: string; threadId?: ThreadId }) {\n  const { chatId, threadId } = params;\n  const controller = CHAT_ABORT_CONTROLLERS.get(chatId);\n  if (!threadId) {\n    controller?.abort('Chat change');\n    CHAT_ABORT_CONTROLLERS.delete(chatId);\n    return;\n  }\n\n  controller?.abortThread(threadId, 'Thread change');\n}\n\nexport function abortRequestGroup(group: string) {\n  ABORT_CONTROLLERS.get(group)?.abort();\n  ABORT_CONTROLLERS.delete(group);\n}\n\nexport async function fetchCurrentUser() {\n  const userFull = await invokeRequest(new GramJs.users.GetFullUser({\n    id: new GramJs.InputUserSelf(),\n  }));\n\n  if (!userFull || !(userFull.users[0] instanceof GramJs.User)) {\n    return;\n  }\n\n  const user = userFull.users[0];\n\n  addUserToLocalDb(user);\n  const currentUserFullInfo = buildApiUserFullInfo(userFull);\n  const currentUser = buildApiUser(user)!;\n\n  setMessageBuilderCurrentUserId(currentUser.id);\n  onCurrentUserUpdate(currentUser, currentUserFullInfo);\n\n  currentUserId = currentUser.id;\n  setIsPremium({ isPremium: Boolean(currentUser.isPremium) });\n}\n\nexport function dispatchErrorUpdate<T extends GramJs.AnyRequest>(err: Error, request: T) {\n  const isSlowMode = err.message.startsWith('A wait of') && (\n    request instanceof GramJs.messages.SendMessage\n    || request instanceof GramJs.messages.SendMedia\n    || request instanceof GramJs.messages.SendMultiMedia\n  );\n\n  const { message } = err;\n\n  onUpdate({\n    '@type': 'error',\n    error: {\n      message,\n      isSlowMode,\n      hasErrorKey: true,\n    },\n  });\n}\n\nasync function handleTerminatedSession() {\n  try {\n    await invokeRequest(new GramJs.users.GetFullUser({\n      id: new GramJs.InputUserSelf(),\n    }), {\n      shouldThrow: true,\n    });\n  } catch (err: any) {\n    if (err.message === 'AUTH_KEY_UNREGISTERED' || err.message === 'SESSION_REVOKED') {\n      onUpdate({\n        '@type': 'updateConnectionState',\n        connectionState: 'connectionStateBroken',\n      });\n    }\n  }\n}\n\nexport async function repairFileReference({\n  url,\n}: {\n  url: string;\n}) {\n  const parsed = parseMediaUrl(url);\n\n  if (!parsed) return undefined;\n\n  const {\n    entityId, mediaMatchType,\n  } = parsed;\n\n  if (mediaMatchType === 'document' || mediaMatchType === 'photo' || mediaMatchType === 'webDocument') {\n    const entity = mediaMatchType === 'document'\n      ? localDb.documents[entityId] : mediaMatchType === 'webDocument'\n        ? localDb.webDocuments[entityId] : localDb.photos[entityId];\n    if (!entity) return false;\n    const repairableEntity = entity as RepairInfo;\n    if (!repairableEntity.localRepairInfo) return false;\n    const { localRepairInfo } = repairableEntity;\n\n    if (localRepairInfo.type === 'story') {\n      const result = await repairStoryMedia(localRepairInfo.peerId, localRepairInfo.id);\n      return result;\n    }\n\n    if (localRepairInfo.type === 'message') {\n      const result = await repairMessageMedia(localRepairInfo.peerId, localRepairInfo.id);\n      return result;\n    }\n  }\n\n  return false;\n}\n\nasync function repairMessageMedia(peerId: string, messageId: number) {\n  const peer = buildInputPeerFromLocalDb(peerId);\n  if (!peer) return false;\n  const result = await invokeRequest(\n    peer\n      ? new GramJs.channels.GetMessages({\n        channel: peer,\n        id: [new GramJs.InputMessageID({ id: messageId })],\n      })\n      : new GramJs.messages.GetMessages({\n        id: [new GramJs.InputMessageID({ id: messageId })],\n      }),\n    {\n      shouldIgnoreErrors: true,\n    },\n  );\n\n  if (!result || result instanceof GramJs.messages.MessagesNotModified) return false;\n\n  if (peer && 'pts' in result) {\n    updateChannelState(peerId, result.pts);\n  }\n\n  const message = result.messages[0];\n  if (message instanceof GramJs.MessageEmpty) return false;\n  addEntitiesToLocalDb(result.users);\n  addEntitiesToLocalDb(result.chats);\n  addMessageToLocalDb(message);\n\n  const apiMessage = buildApiMessage(message);\n  if (apiMessage) {\n    onUpdate({\n      '@type': 'updateMessage',\n      chatId: apiMessage.chatId,\n      id: apiMessage.id,\n      message: apiMessage,\n    });\n  }\n  return true;\n}\n\nasync function repairStoryMedia(peerId: string, storyId: number) {\n  const peer = buildInputPeerFromLocalDb(peerId);\n  if (!peer) return false;\n\n  const result = await invokeRequest(new GramJs.stories.GetStoriesByID({\n    peer,\n    id: [storyId],\n  }), {\n    shouldIgnoreErrors: true,\n  });\n  if (!result) return false;\n\n  addEntitiesToLocalDb(result.users);\n  result.stories.forEach((story) => {\n    addStoryToLocalDb(story, peerId);\n\n    const apiStory = buildApiStory(peerId, story);\n    if (!apiStory || 'isDeleted' in apiStory) return;\n    onUpdate({\n      '@type': 'updateStory',\n      peerId,\n      story: apiStory,\n    });\n  });\n  return true;\n}\n\nexport function setForceHttpTransport(forceHttpTransport: boolean) {\n  client.setForceHttpTransport(forceHttpTransport);\n}\n\nexport function setAllowHttpTransport(allowHttpTransport: boolean) {\n  client.setAllowHttpTransport(allowHttpTransport);\n}\n\nexport function setShouldDebugExportedSenders(value: boolean) {\n  client.setShouldDebugExportedSenders(value);\n}\n\nexport function requestChannelDifference(channelId: string) {\n  scheduleGetChannelDifference(channelId);\n}\n","import { Api as GramJs } from '../../../lib/gramjs';\n\nimport { buildApiCollectibleInfo } from '../apiBuilders/misc';\nimport { invokeRequest } from './client';\n\ntype InputCollectible = {\n  phone: string;\n} | {\n  username: string;\n};\n\nexport async function fetchCollectionInfo(collectible: InputCollectible) {\n  const inputCollectible = 'username' in collectible\n    ? new GramJs.InputCollectibleUsername({ username: collectible.username })\n    : new GramJs.InputCollectiblePhone({ phone: collectible.phone });\n\n  const result = await invokeRequest(new GramJs.fragment.GetCollectibleInfo({\n    collectible: inputCollectible,\n  }));\n\n  if (!result) {\n    return undefined;\n  }\n\n  return buildApiCollectibleInfo(result);\n}\n","export {\n  destroy, disconnect, downloadMedia, fetchCurrentUser, repairFileReference, abortChatRequests, abortRequestGroup,\n  setForceHttpTransport, setShouldDebugExportedSenders, setAllowHttpTransport, requestChannelDifference,\n} from './client';\n\nexport * from './account';\n\nexport {\n  provideAuthPhoneNumber, provideAuthCode, provideAuthPassword, provideAuthRegistration, restartAuth, restartAuthWithQr,\n} from './auth';\n\nexport {\n  fetchChats, fetchFullChat, searchChats, requestChatUpdate, fetchChatSettings,\n  saveDraft, fetchChat, updateChatMutedState, updateTopicMutedState,\n  createChannel, joinChannel, deleteChatUser, deleteChat, leaveChannel, deleteChannel, createGroupChat, editChatPhoto,\n  toggleChatPinned, toggleChatArchived, toggleDialogUnread, setChatEnabledReactions,\n  fetchChatFolders, editChatFolder, deleteChatFolder, sortChatFolders, fetchRecommendedChatFolders,\n  getChatByUsername, togglePreHistoryHidden, updateChatDefaultBannedRights, updateChatMemberBannedRights,\n  updateChatTitle, updateChatAbout, toggleSignatures, updateChatAdmin, fetchGroupsForDiscussion, setDiscussionGroup,\n  migrateChat, openChatByInvite, fetchMembers, importChatInvite, addChatMembers, deleteChatMember, toggleIsProtected,\n  getChatByPhoneNumber, toggleJoinToSend, toggleJoinRequest, fetchTopics, deleteTopic, togglePinnedTopic,\n  editTopic, toggleForum, fetchTopicById, createTopic, toggleParticipantsHidden, checkChatlistInvite,\n  joinChatlistInvite, createChalistInvite, editChatlistInvite, deleteChatlistInvite, fetchChatlistInvites,\n  fetchLeaveChatlistSuggestions, leaveChatlist, togglePeerTranslations, setViewForumAsMessages,\n  fetchChannelRecommendations, fetchSavedChats, toggleSavedDialogPinned, reportSponsoredMessage,\n} from './chats';\n\nexport {\n  fetchMessages, fetchMessage, sendMessage, pinMessage, unpinAllMessages, deleteMessages, deleteHistory,\n  markMessageListRead, markMessagesRead, searchMessagesLocal, searchMessagesGlobal,\n  fetchWebPagePreview, editMessage, forwardMessages, loadPollOptionResults, sendPollVote, findFirstMessageIdAfterDate,\n  fetchPinnedMessages, fetchScheduledHistory, sendScheduledMessages, rescheduleMessage, deleteScheduledMessages,\n  reportMessages, sendMessageAction, fetchSeenBy, fetchSponsoredMessages, viewSponsoredMessage, fetchSendAs,\n  saveDefaultSendAs, fetchUnreadReactions, readAllReactions, fetchUnreadMentions, readAllMentions, transcribeAudio,\n  closePoll, fetchExtendedMedia, translateText, fetchMessageViews, fetchDiscussionMessage, clickSponsoredMessage,\n  fetchOutboxReadDate, exportMessageLink, fetchQuickReplies, sendQuickReply, fetchFactChecks,\n  deleteSavedHistory,\n} from './messages';\n\nexport {\n  fetchFullUser, fetchNearestCountry, fetchTopUsers, fetchContactList, fetchUsers,\n  updateContact, importContact, deleteContact, fetchProfilePhotos, fetchCommonChats, reportSpam, updateEmojiStatus,\n  saveCloseFriends,\n} from './users';\n\nexport {\n  fetchStickerSets, fetchRecentStickers, fetchFavoriteStickers, fetchFeaturedStickers, fetchRecentEmojiStatuses,\n  faveSticker, fetchStickers, fetchSavedGifs, saveGif, searchStickers, installStickerSet, uninstallStickerSet,\n  searchGifs, fetchAnimatedEmojis, fetchStickersForEmoji, fetchEmojiKeywords, fetchAnimatedEmojiEffects,\n  removeRecentSticker, clearRecentStickers, fetchCustomEmoji, fetchPremiumGifts, fetchCustomEmojiSets,\n  fetchFeaturedEmojiStickers, fetchGenericEmojiEffects, fetchDefaultTopicIcons, fetchDefaultStatusEmojis,\n} from './symbols';\n\nexport {\n  checkChatUsername, setChatUsername, updatePrivateLink, deactivateAllUsernames,\n  fetchExportedChatInvites, editExportedChatInvite, exportChatInvite, deleteExportedChatInvite,\n  deleteRevokedExportedChatInvites, fetchChatInviteImporters, hideChatJoinRequest, hideAllChatJoinRequests,\n  hideChatReportPanel,\n} from './management';\n\nexport * from './settings';\n\nexport {\n  getPasswordInfo, checkPassword, clearPassword, updatePassword, updateRecoveryEmail, provideRecoveryEmailCode,\n} from './twoFaSettings';\n\nexport {\n  answerCallbackButton, setBotInfo, fetchTopInlineBots, fetchInlineBot, fetchInlineBotResults,\n  sendInlineBotResult, startBot,\n  requestWebView, requestSimpleWebView, sendWebViewData, prolongWebView, loadAttachBots, toggleAttachBot, fetchBotApp,\n  requestBotUrlAuth, requestLinkUrlAuth, acceptBotUrlAuth, acceptLinkUrlAuth, loadAttachBot, requestAppWebView,\n  allowBotSendMessages, fetchBotCanSendMessage, invokeWebViewCustomMethod,\n} from './bots';\n\nexport {\n  getGroupCall, joinGroupCall, discardGroupCall, createGroupCall,\n  editGroupCallTitle, editGroupCallParticipant, exportGroupCallInvite, fetchGroupCallParticipants,\n  joinGroupCallPresentation, leaveGroupCall, leaveGroupCallPresentation, toggleGroupCallStartSubscription,\n  requestCall, getDhConfig, confirmCall, sendSignalingData, acceptCall, discardCall, setCallRating, receivedCall,\n} from './calls';\n\nexport * from './reactions';\n\nexport {\n  fetchChannelStatistics, fetchGroupStatistics, fetchMessageStatistics,\n  fetchMessagePublicForwards, fetchStatisticsAsyncGraph, fetchStoryStatistics, fetchStoryPublicForwards,\n} from './statistics';\n\nexport {\n  acceptPhoneCall, confirmPhoneCall, requestPhoneCall, decodePhoneCallData, createPhoneCallState,\n  destroyPhoneCallState, encodePhoneCallData,\n} from './phoneCallState';\n\nexport {\n  broadcastLocalDbUpdateFull,\n} from '../localDb';\n\nexport * from './stories';\n\nexport {\n  validateRequestedInfo, sendPaymentForm, getPaymentForm, getReceipt, fetchPremiumPromo, fetchTemporaryPaymentPassword,\n  applyBoost, fetchBoostList, fetchBoostStatus, fetchGiveawayInfo, fetchMyBoosts, applyGiftCode, checkGiftCode,\n  getPremiumGiftCodeOptions, launchPrepaidGiveaway, fetchStarsStatus, fetchStarsTopupOptions, fetchStarsTransactions,\n  sendStarPaymentForm,\n} from './payments';\n\nexport * from './fragment';\n","import type {\n  ApiInitialArgs,\n  ApiOnProgress,\n  ApiUpdate,\n  OnApiUpdate,\n} from '../../types';\nimport type { LocalDb } from '../localDb';\nimport type { MethodArgs, MethodResponse, Methods } from './types';\n\nimport { API_THROTTLE_RESET_UPDATES, API_UPDATE_THROTTLE } from '../../../config';\nimport { throttle, throttleWithTickEnd } from '../../../util/schedulers';\nimport { updateFullLocalDb } from '../localDb';\nimport { init as initUpdater } from '../updates/updater';\nimport { init as initAuth } from './auth';\nimport { init as initBots } from './bots';\nimport { init as initCalls } from './calls';\nimport { init as initChats } from './chats';\nimport { init as initClient } from './client';\nimport * as methods from './index';\nimport { init as initManagement } from './management';\nimport { init as initMessages } from './messages';\nimport { init as initPayments } from './payments';\nimport { init as initStickers } from './symbols';\nimport { init as initTwoFaSettings } from './twoFaSettings';\nimport { init as initUsers } from './users';\n\nlet onUpdate: OnApiUpdate;\n\nexport function initApi(_onUpdate: OnApiUpdate, initialArgs: ApiInitialArgs, initialLocalDb?: LocalDb) {\n  onUpdate = _onUpdate;\n\n  initUpdater(handleUpdate);\n  initAuth(handleUpdate);\n  initChats(handleUpdate);\n  initMessages(handleUpdate);\n  initUsers(handleUpdate);\n  initStickers(handleUpdate);\n  initManagement(handleUpdate);\n  initTwoFaSettings(handleUpdate);\n  initBots(handleUpdate);\n  initCalls(handleUpdate);\n  initPayments(handleUpdate);\n\n  if (initialLocalDb) updateFullLocalDb(initialLocalDb);\n\n  initClient(handleUpdate, initialArgs);\n}\n\nexport function callApi<T extends keyof Methods>(fnName: T, ...args: MethodArgs<T>): MethodResponse<T> {\n  // @ts-ignore\n  return methods[fnName](...args) as MethodResponse<T>;\n}\n\nexport function cancelApiProgress(progressCallback: ApiOnProgress) {\n  progressCallback.isCanceled = true;\n}\n\nconst flushUpdatesOnTickEnd = throttleWithTickEnd(flushUpdates);\n\nlet flushUpdatesThrottled: typeof flushUpdatesOnTickEnd | undefined;\nlet currentThrottleId: number | undefined;\n\nlet pendingUpdates: ApiUpdate[] | undefined;\n\nfunction handleUpdate(update: ApiUpdate) {\n  if (!pendingUpdates) {\n    pendingUpdates = [update];\n  } else {\n    pendingUpdates.push(update);\n  }\n\n  if (!flushUpdatesThrottled || API_THROTTLE_RESET_UPDATES.has(update['@type'])) {\n    flushUpdatesThrottled = throttle(flushUpdatesOnTickEnd, API_UPDATE_THROTTLE, true);\n    currentThrottleId = Math.random();\n  }\n\n  flushUpdatesThrottled(currentThrottleId!);\n}\n\nfunction flushUpdates(throttleId: number) {\n  if (!pendingUpdates || throttleId !== currentThrottleId) {\n    return;\n  }\n\n  const currentUpdates = pendingUpdates!;\n  pendingUpdates = undefined;\n  currentUpdates.forEach(onUpdate);\n}\n","import { Api as GramJs } from '../../../lib/gramjs';\n\nimport type {\n  ApiChat, ApiError, ApiUser, ApiUsername, OnApiUpdate,\n} from '../../types';\n\nimport { USERNAME_PURCHASE_ERROR } from '../../../config';\nimport { buildCollectionByKey } from '../../../util/iteratees';\nimport { buildApiExportedInvite, buildChatInviteImporter } from '../apiBuilders/chats';\nimport { buildApiUser } from '../apiBuilders/users';\nimport { buildInputEntity, buildInputPeer } from '../gramjsBuilders';\nimport { addEntitiesToLocalDb } from '../helpers';\nimport { invokeRequest } from './client';\n\nlet onUpdate: OnApiUpdate;\n\nexport const ACCEPTABLE_USERNAME_ERRORS = new Set([USERNAME_PURCHASE_ERROR, 'USERNAME_INVALID']);\n\nexport function init(_onUpdate: OnApiUpdate) {\n  onUpdate = _onUpdate;\n}\n\nexport async function checkChatUsername({ username }: { username: string }) {\n  try {\n    const result = await invokeRequest(new GramJs.channels.CheckUsername({\n      channel: new GramJs.InputChannelEmpty(),\n      username,\n    }), {\n      shouldThrow: true,\n    });\n\n    return { result, error: undefined };\n  } catch (error) {\n    const errorMessage = (error as ApiError).message;\n\n    if (ACCEPTABLE_USERNAME_ERRORS.has(errorMessage)) {\n      return {\n        result: false,\n        error: errorMessage,\n      };\n    }\n\n    throw error;\n  }\n}\n\nexport async function setChatUsername(\n  { chat, username }: { chat: ApiChat; username: string },\n) {\n  const result = await invokeRequest(new GramJs.channels.UpdateUsername({\n    channel: buildInputEntity(chat.id, chat.accessHash) as GramJs.InputChannel,\n    username,\n  }));\n\n  let usernames: ApiUsername[] = username ? [{ username, isEditable: true, isActive: true }] : [];\n  if (chat.usernames) {\n    // User can remove username from chat when changing it type to private, so we need to filter out empty usernames\n    usernames = usernames.concat(chat.usernames.filter((u) => u.username && !u.isEditable));\n  }\n\n  if (result) {\n    onUpdate({\n      '@type': 'updateChat',\n      id: chat.id,\n      chat: { usernames: usernames.length ? usernames : undefined },\n    });\n  }\n\n  return result;\n}\n\nexport async function deactivateAllUsernames({ chat }: { chat: ApiChat }) {\n  const result = await invokeRequest(new GramJs.channels.DeactivateAllUsernames({\n    channel: buildInputEntity(chat.id, chat.accessHash) as GramJs.InputChannel,\n  }));\n\n  if (result) {\n    const usernames = chat.usernames\n      ? chat.usernames\n        .map((u) => ({ ...u, isActive: false }))\n        // User can remove username from chat when changing it type to private, so we need to filter out empty usernames\n        .filter((u) => u.username)\n      : undefined;\n\n    onUpdate({\n      '@type': 'updateChat',\n      id: chat.id,\n      chat: { usernames },\n    });\n  }\n\n  return result;\n}\n\nexport async function updatePrivateLink({\n  chat, usageLimit, expireDate,\n}: {\n  chat: ApiChat; usageLimit?: number; expireDate?: number;\n}) {\n  const result = await invokeRequest(new GramJs.messages.ExportChatInvite({\n    peer: buildInputPeer(chat.id, chat.accessHash),\n    usageLimit,\n    expireDate,\n  }));\n\n  if (!(result instanceof GramJs.ChatInviteExported)) return undefined;\n\n  onUpdate({\n    '@type': 'updateChatFullInfo',\n    id: chat.id,\n    fullInfo: {\n      inviteLink: result.link,\n    },\n  });\n\n  return result.link;\n}\n\nexport async function fetchExportedChatInvites({\n  peer, admin, limit = 0, isRevoked,\n}: { peer: ApiChat; admin: ApiUser; limit?: number; isRevoked?: boolean }) {\n  const exportedInvites = await invokeRequest(new GramJs.messages.GetExportedChatInvites({\n    peer: buildInputPeer(peer.id, peer.accessHash),\n    adminId: buildInputEntity(admin.id, admin.accessHash) as GramJs.InputUser,\n    limit,\n    revoked: isRevoked || undefined,\n  }), {\n    abortControllerChatId: peer.id,\n  });\n\n  if (!exportedInvites) return undefined;\n  addEntitiesToLocalDb(exportedInvites.users);\n\n  const invites = (exportedInvites.invites\n    .filter((invite): invite is GramJs.ChatInviteExported => invite instanceof GramJs.ChatInviteExported))\n    .map(buildApiExportedInvite);\n\n  return {\n    invites,\n    users: exportedInvites.users.map(buildApiUser).filter(Boolean),\n  };\n}\n\nexport async function editExportedChatInvite({\n  peer, isRevoked, link, expireDate, usageLimit, isRequestNeeded, title,\n}: {\n  peer: ApiChat;\n  isRevoked?: boolean;\n  link: string;\n  expireDate?: number;\n  usageLimit?: number;\n  isRequestNeeded?: boolean;\n  title?: string;\n}) {\n  const invite = await invokeRequest(new GramJs.messages.EditExportedChatInvite({\n    link,\n    peer: buildInputPeer(peer.id, peer.accessHash),\n    expireDate,\n    usageLimit: !isRequestNeeded ? usageLimit : undefined,\n    requestNeeded: isRequestNeeded,\n    title,\n    revoked: isRevoked || undefined,\n  }));\n\n  if (!invite) return undefined;\n\n  addEntitiesToLocalDb(invite.users);\n  if (invite instanceof GramJs.messages.ExportedChatInvite && invite.invite instanceof GramJs.ChatInviteExported) {\n    const replaceInvite = buildApiExportedInvite(invite.invite);\n    return {\n      oldInvite: replaceInvite,\n      newInvite: replaceInvite,\n      users: invite.users.map(buildApiUser).filter(Boolean),\n    };\n  }\n\n  if (invite instanceof GramJs.messages.ExportedChatInviteReplaced\n    && invite.invite instanceof GramJs.ChatInviteExported\n    && invite.newInvite instanceof GramJs.ChatInviteExported) {\n    const oldInvite = buildApiExportedInvite(invite.invite);\n    const newInvite = buildApiExportedInvite(invite.newInvite);\n    return {\n      oldInvite,\n      newInvite,\n      users: invite.users.map(buildApiUser).filter(Boolean),\n    };\n  }\n  return undefined;\n}\n\nexport async function exportChatInvite({\n  peer, expireDate, usageLimit, isRequestNeeded, title,\n}: {\n  peer: ApiChat;\n  expireDate?: number;\n  usageLimit?: number;\n  isRequestNeeded?: boolean;\n  title?: string;\n}) {\n  const invite = await invokeRequest(new GramJs.messages.ExportChatInvite({\n    peer: buildInputPeer(peer.id, peer.accessHash),\n    expireDate,\n    usageLimit: !isRequestNeeded ? usageLimit : undefined,\n    requestNeeded: isRequestNeeded || undefined,\n    title,\n  }));\n\n  if (!(invite instanceof GramJs.ChatInviteExported)) return undefined;\n  return buildApiExportedInvite(invite);\n}\n\nexport async function deleteExportedChatInvite({\n  peer, link,\n}: {\n  peer: ApiChat; link: string;\n}) {\n  const result = await invokeRequest(new GramJs.messages.DeleteExportedChatInvite({\n    peer: buildInputPeer(peer.id, peer.accessHash),\n    link,\n  }));\n\n  return result;\n}\n\nexport async function deleteRevokedExportedChatInvites({\n  peer, admin,\n}: {\n  peer: ApiChat; admin: ApiUser;\n}) {\n  const result = await invokeRequest(new GramJs.messages.DeleteRevokedExportedChatInvites({\n    peer: buildInputPeer(peer.id, peer.accessHash),\n    adminId: buildInputEntity(admin.id, admin.accessHash) as GramJs.InputUser,\n  }));\n\n  return result;\n}\n\nexport async function fetchChatInviteImporters({\n  peer, link, offsetDate = 0, offsetUser, limit = 0, isRequested,\n}: {\n  peer: ApiChat; link?: string; offsetDate?: number; offsetUser?: ApiUser; limit?: number; isRequested?: boolean;\n}) {\n  const result = await invokeRequest(new GramJs.messages.GetChatInviteImporters({\n    peer: buildInputPeer(peer.id, peer.accessHash),\n    link,\n    offsetDate,\n    offsetUser: offsetUser\n      ? buildInputEntity(offsetUser.id, offsetUser.accessHash) as GramJs.InputUser : new GramJs.InputUserEmpty(),\n    limit,\n    requested: isRequested || undefined,\n  }), {\n    abortControllerChatId: peer.id,\n  });\n\n  if (!result) return undefined;\n  const users = result.users.map((user) => buildApiUser(user)).filter(Boolean);\n  addEntitiesToLocalDb(result.users);\n  return {\n    importers: result.importers.map((importer) => buildChatInviteImporter(importer)),\n    users: buildCollectionByKey(users, 'id'),\n  };\n}\n\nexport function hideChatJoinRequest({\n  peer,\n  user,\n  isApproved,\n}: {\n  peer: ApiChat;\n  user: ApiUser;\n  isApproved: boolean;\n}) {\n  return invokeRequest(new GramJs.messages.HideChatJoinRequest({\n    peer: buildInputPeer(peer.id, peer.accessHash),\n    userId: buildInputEntity(user.id, user.accessHash) as GramJs.InputUser,\n    approved: isApproved || undefined,\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n\nexport function hideAllChatJoinRequests({\n  peer,\n  isApproved,\n  link,\n}: {\n  peer: ApiChat;\n  isApproved: boolean;\n  link?: string;\n}) {\n  return invokeRequest(new GramJs.messages.HideAllChatJoinRequests({\n    peer: buildInputPeer(peer.id, peer.accessHash),\n    approved: isApproved || undefined,\n    link,\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n\nexport function hideChatReportPanel(chat: ApiChat) {\n  const { id, accessHash } = chat;\n\n  return invokeRequest(new GramJs.messages.HidePeerSettingsBar({\n    peer: buildInputPeer(id, accessHash),\n  }));\n}\n","import { Api as GramJs } from '../../../lib/gramjs';\n\nimport type { TelegramClient } from '../../../lib/gramjs';\nimport type { ApiOnProgress, ApiParsedMedia } from '../../types';\nimport {\n  ApiMediaFormat,\n} from '../../types';\n\nimport {\n  DOWNLOAD_WORKERS,\n  MEDIA_CACHE_DISABLED,\n  MEDIA_CACHE_MAX_BYTES,\n  MEDIA_CACHE_NAME,\n  MEDIA_CACHE_NAME_AVATARS,\n} from '../../../config';\nimport * as cacheApi from '../../../util/cacheApi';\nimport { getEntityTypeById } from '../gramjsBuilders';\nimport localDb from '../localDb';\n\nconst MEDIA_ENTITY_TYPES: Set<EntityType> = new Set([\n  'sticker', 'wallpaper', 'photo', 'webDocument', 'document',\n]);\n\nconst JPEG_SIZE_TYPES = new Set(['s', 'm', 'x', 'y', 'w', 'a', 'b', 'c', 'd']);\nconst MP4_SIZES_TYPES = new Set(['u', 'v']);\n\nexport default async function downloadMedia(\n  {\n    url, mediaFormat, start, end, isHtmlAllowed,\n  }: {\n    url: string; mediaFormat: ApiMediaFormat; start?: number; end?: number; isHtmlAllowed?: boolean;\n  },\n  client: TelegramClient,\n  onProgress?: ApiOnProgress,\n) {\n  const {\n    data, mimeType, fullSize,\n  } = await download(url, client, onProgress, start, end, isHtmlAllowed) || {};\n\n  if (!data) {\n    return undefined;\n  }\n\n  const parsed = await parseMedia(data, mediaFormat, mimeType);\n  if (!parsed) {\n    return undefined;\n  }\n\n  const canCache = mediaFormat !== ApiMediaFormat.Progressive && (\n    mediaFormat !== ApiMediaFormat.BlobUrl || (parsed as Blob).size <= MEDIA_CACHE_MAX_BYTES\n  );\n\n  if (!MEDIA_CACHE_DISABLED && cacheApi && canCache) {\n    const cacheName = url.startsWith('avatar') ? MEDIA_CACHE_NAME_AVATARS : MEDIA_CACHE_NAME;\n    void cacheApi.save(cacheName, url, parsed);\n  }\n\n  const dataBlob = mediaFormat === ApiMediaFormat.Progressive ? '' : parsed as string | Blob;\n  const arrayBuffer = mediaFormat === ApiMediaFormat.Progressive ? parsed as ArrayBuffer : undefined;\n\n  return {\n    dataBlob,\n    arrayBuffer,\n    mimeType,\n    fullSize,\n  };\n}\n\nexport type EntityType = (\n  'sticker' | 'wallpaper' | 'channel' | 'chat' | 'user' | 'photo' | 'stickerSet' | 'webDocument' |\n  'document' | 'staticMap'\n);\n\nasync function download(\n  url: string,\n  client: TelegramClient,\n  onProgress?: ApiOnProgress,\n  start?: number,\n  end?: number,\n  isHtmlAllowed?: boolean,\n) {\n  const parsed = parseMediaUrl(url);\n\n  if (!parsed) return undefined;\n\n  const {\n    entityType, entityId, sizeType, params, mediaMatchType,\n  } = parsed;\n\n  if (entityType === 'staticMap') {\n    const accessHash = entityId;\n    const parsedParams = new URLSearchParams(params);\n    const long = parsedParams.get('long');\n    const lat = parsedParams.get('lat');\n    const w = parsedParams.get('w');\n    const h = parsedParams.get('h');\n    const zoom = parsedParams.get('zoom');\n    const scale = parsedParams.get('scale');\n    const accuracyRadius = parsedParams.get('accuracy_radius');\n\n    const data = await client.downloadStaticMap(accessHash, long, lat, w, h, zoom, scale, accuracyRadius);\n    return {\n      mimeType: 'image/png',\n      data,\n    };\n  }\n\n  let entity: (\n    GramJs.User | GramJs.Chat | GramJs.Channel | GramJs.Photo |\n    GramJs.Message | GramJs.MessageService |\n    GramJs.Document | GramJs.StickerSet | GramJs.TypeWebDocument | undefined\n  );\n\n  switch (entityType) {\n    case 'channel':\n    case 'chat':\n      entity = localDb.chats[entityId];\n      break;\n    case 'user':\n      entity = localDb.users[entityId];\n      break;\n    case 'sticker':\n    case 'wallpaper':\n    case 'document':\n      entity = localDb.documents[entityId];\n      break;\n    case 'photo':\n      entity = localDb.photos[entityId];\n      break;\n    case 'stickerSet':\n      entity = localDb.stickerSets[entityId];\n      break;\n    case 'webDocument':\n      entity = localDb.webDocuments[entityId];\n      break;\n  }\n\n  if (!entity) {\n    return undefined;\n  }\n\n  if (MEDIA_ENTITY_TYPES.has(entityType)) {\n    const data = await client.downloadMedia(entity, {\n      sizeType, start, end, progressCallback: onProgress, workers: DOWNLOAD_WORKERS,\n    });\n    let mimeType;\n    let fullSize;\n\n    if (sizeType && JPEG_SIZE_TYPES.has(sizeType)) {\n      mimeType = 'image/jpeg';\n    } else if (sizeType && MP4_SIZES_TYPES.has(sizeType)) {\n      mimeType = 'video/mp4';\n    } else if (entity instanceof GramJs.Photo) {\n      mimeType = 'image/jpeg';\n    } else if (entity instanceof GramJs.WebDocument) {\n      mimeType = entity.mimeType;\n      fullSize = entity.size;\n    } else if (entity instanceof GramJs.Document) {\n      mimeType = entity.mimeType;\n      fullSize = entity.size.toJSNumber();\n    }\n\n    // Prevent HTML-in-video attacks\n    if (!isHtmlAllowed && mimeType) {\n      mimeType = mimeType.replace(/html/gi, '');\n    }\n\n    return { mimeType, data, fullSize };\n  } else if (entityType === 'stickerSet') {\n    const data = await client.downloadStickerSetThumb(entity);\n    const mimeType = getMimeType(data);\n\n    return { mimeType, data };\n  } else {\n    const data = await client.downloadProfilePhoto(entity, mediaMatchType === 'profile');\n    const mimeType = getMimeType(data);\n\n    return { mimeType, data };\n  }\n}\n\n// eslint-disable-next-line no-async-without-await/no-async-without-await\nasync function parseMedia(\n  data: Buffer, mediaFormat: ApiMediaFormat, mimeType?: string,\n): Promise<ApiParsedMedia | undefined> {\n  switch (mediaFormat) {\n    case ApiMediaFormat.BlobUrl:\n      return new Blob([data], { type: mimeType });\n    case ApiMediaFormat.Text:\n      return data.toString();\n    case ApiMediaFormat.Progressive:\n    case ApiMediaFormat.DownloadUrl:\n      return data.buffer;\n  }\n\n  return undefined;\n}\n\nfunction getMimeType(data: Uint8Array, fallbackMimeType = 'image/jpeg') {\n  if (data.length < 4) {\n    return fallbackMimeType;\n  }\n\n  let type = fallbackMimeType;\n  const signature = data.subarray(0, 4).reduce((result, byte) => result + byte.toString(16), '');\n\n  // https://en.wikipedia.org/wiki/List_of_file_signatures\n  switch (signature) {\n    case '89504e47':\n      type = 'image/png';\n      break;\n    case '47494638':\n      type = 'image/gif';\n      break;\n    case 'ffd8ffe0':\n    case 'ffd8ffe1':\n    case 'ffd8ffe2':\n    case 'ffd8ffe3':\n    case 'ffd8ffe8':\n      type = 'image/jpeg';\n      break;\n    case '52494646':\n      // In our case only webp is expected\n      type = 'image/webp';\n      break;\n  }\n\n  return type;\n}\n\nexport function parseMediaUrl(url: string) {\n  const mediaMatch = url.startsWith('staticMap')\n    ? url.match(/(staticMap):([0-9-]+)(\\?.+)/)\n    : url.startsWith('webDocument')\n      ? url.match(/(webDocument):(.+)/)\n      : url.match(\n        // eslint-disable-next-line max-len\n        /(avatar|profile|photo|stickerSet|sticker|wallpaper|document)([-\\d\\w./]+)(?::\\d+)?(\\?size=\\w+)?/,\n      );\n  if (!mediaMatch) {\n    return undefined;\n  }\n\n  const mediaMatchType = mediaMatch[1];\n  const entityId: string | number = mediaMatch[2];\n\n  let entityType: EntityType;\n  const params = mediaMatch[3];\n  const sizeType = params?.replace('?size=', '') || undefined;\n\n  if (mediaMatch[1] === 'avatar' || mediaMatch[1] === 'profile') {\n    entityType = getEntityTypeById(entityId);\n  } else {\n    entityType = mediaMatch[1] as EntityType;\n  }\n\n  return {\n    mediaMatchType,\n    entityType,\n    entityId,\n    sizeType,\n    params,\n  };\n}\n","import BigInt from 'big-integer';\nimport { Api as GramJs } from '../../../lib/gramjs';\n\nimport type { ThreadId } from '../../../types';\nimport type {\n  ApiAttachment,\n  ApiChat,\n  ApiContact,\n  ApiFormattedText,\n  ApiGlobalMessageSearchType,\n  ApiInputReplyInfo,\n  ApiMessage,\n  ApiMessageEntity,\n  ApiMessageSearchType,\n  ApiNewPoll,\n  ApiOnProgress,\n  ApiPeer,\n  ApiPoll,\n  ApiReaction,\n  ApiReportReason,\n  ApiSendMessageAction,\n  ApiSticker,\n  ApiStory,\n  ApiStorySkipped,\n  ApiVideo,\n  MediaContent,\n  OnApiUpdate,\n} from '../../types';\nimport { MAIN_THREAD_ID, MESSAGE_DELETED } from '../../types';\n\nimport {\n  ALL_FOLDER_ID,\n  API_GENERAL_ID_LIMIT,\n  DEBUG,\n  GIF_MIME_TYPE,\n  MAX_INT_32,\n  MENTION_UNREAD_SLICE,\n  PINNED_MESSAGES_LIMIT,\n  REACTION_UNREAD_SLICE,\n  SUPPORTED_IMAGE_CONTENT_TYPES,\n  SUPPORTED_VIDEO_CONTENT_TYPES,\n} from '../../../config';\nimport { getEmojiOnlyCountForMessage } from '../../../global/helpers/getEmojiOnlyCountForMessage';\nimport { fetchFile } from '../../../util/files';\nimport { compact, split } from '../../../util/iteratees';\nimport { getMessageKey } from '../../../util/messageKey';\nimport { getServerTimeOffset } from '../../../util/serverTime';\nimport { interpolateArray } from '../../../util/waveform';\nimport { buildApiChatFromPreview, buildApiSendAsPeerId } from '../apiBuilders/chats';\nimport { buildApiFormattedText } from '../apiBuilders/common';\nimport { buildMessageMediaContent, buildMessageTextContent, buildWebPage } from '../apiBuilders/messageContent';\nimport {\n  buildApiFactCheck,\n  buildApiMessage,\n  buildApiQuickReply,\n  buildApiSponsoredMessage,\n  buildApiThreadInfo,\n  buildLocalForwardedMessage,\n  buildLocalMessage,\n  buildUploadingMedia,\n} from '../apiBuilders/messages';\nimport { getApiChatIdFromMtpPeer } from '../apiBuilders/peers';\nimport { buildApiUser } from '../apiBuilders/users';\nimport {\n  buildInputEntity,\n  buildInputMediaDocument,\n  buildInputPeer,\n  buildInputPoll,\n  buildInputPollFromExisting,\n  buildInputReaction,\n  buildInputReplyTo,\n  buildInputReportReason,\n  buildInputStory,\n  buildInputTextWithEntities,\n  buildMessageFromUpdate,\n  buildMtpMessageEntity,\n  buildSendMessageAction,\n  generateRandomBigInt,\n  getEntityTypeById,\n} from '../gramjsBuilders';\nimport {\n  addEntitiesToLocalDb,\n  addMessageToLocalDb,\n  deserializeBytes,\n} from '../helpers';\nimport { processAffectedHistory, updateChannelState } from '../updates/updateManager';\nimport { dispatchThreadInfoUpdates } from '../updates/updater';\nimport { requestChatUpdate } from './chats';\nimport { handleGramJsUpdate, invokeRequest, uploadFile } from './client';\n\nconst FAST_SEND_TIMEOUT = 1000;\nconst INPUT_WAVEFORM_LENGTH = 63;\n\ntype TranslateTextParams = ({\n  text: ApiFormattedText[];\n} | {\n  chat: ApiChat;\n  messageIds: number[];\n}) & {\n  toLanguageCode: string;\n};\n\nlet onUpdate: OnApiUpdate;\n\nexport function init(_onUpdate: OnApiUpdate) {\n  onUpdate = _onUpdate;\n}\n\nexport async function fetchMessages({\n  chat,\n  threadId,\n  offsetId,\n  isSavedDialog,\n  ...pagination\n}: {\n  chat: ApiChat;\n  threadId?: ThreadId;\n  offsetId?: number;\n  isSavedDialog?: boolean;\n  addOffset?: number;\n  limit: number;\n}) {\n  const RequestClass = threadId === MAIN_THREAD_ID\n    ? GramJs.messages.GetHistory : isSavedDialog\n      ? GramJs.messages.GetSavedHistory : GramJs.messages.GetReplies;\n  let result;\n\n  try {\n    result = await invokeRequest(new RequestClass({\n      peer: buildInputPeer(chat.id, chat.accessHash),\n      ...(threadId !== MAIN_THREAD_ID && !isSavedDialog && {\n        msgId: Number(threadId),\n      }),\n      ...(offsetId && {\n        // Workaround for local message IDs overflowing some internal `Buffer` range check\n        offsetId: Math.min(offsetId, MAX_INT_32),\n      }),\n      ...pagination,\n    }), {\n      shouldThrow: true,\n      abortControllerChatId: chat.id,\n      abortControllerThreadId: threadId,\n    });\n  } catch (err: any) {\n    if (err.message === 'CHANNEL_PRIVATE') {\n      onUpdate({\n        '@type': 'updateChat',\n        id: chat.id,\n        chat: {\n          isRestricted: true,\n        },\n      });\n    }\n  }\n\n  if (\n    !result\n    || result instanceof GramJs.messages.MessagesNotModified\n    || !result.messages\n  ) {\n    return undefined;\n  }\n\n  updateLocalDb(result);\n\n  const messages = result.messages.map(buildApiMessage).filter(Boolean);\n  const users = result.users.map(buildApiUser).filter(Boolean);\n  const chats = result.chats.map((c) => buildApiChatFromPreview(c)).filter(Boolean);\n  const count = !(result instanceof GramJs.messages.Messages) && result.count;\n  dispatchThreadInfoUpdates(result.messages);\n\n  return {\n    messages,\n    users,\n    chats,\n    count,\n  };\n}\n\nexport async function fetchMessage({ chat, messageId }: { chat: ApiChat; messageId: number }) {\n  const isChannel = getEntityTypeById(chat.id) === 'channel';\n\n  let result;\n  try {\n    result = await invokeRequest(\n      isChannel\n        ? new GramJs.channels.GetMessages({\n          channel: buildInputEntity(chat.id, chat.accessHash) as GramJs.InputChannel,\n          id: [new GramJs.InputMessageID({ id: messageId })],\n        })\n        : new GramJs.messages.GetMessages({\n          id: [new GramJs.InputMessageID({ id: messageId })],\n        }),\n      {\n        shouldThrow: true,\n        abortControllerChatId: chat.id,\n      },\n    );\n  } catch (err: any) {\n    const { message } = err;\n\n    // When fetching messages for the bot @replies, there may be situations when the user was banned\n    // in the comment group or this group was deleted\n    if (message !== 'CHANNEL_PRIVATE') {\n      onUpdate({\n        '@type': 'error',\n        error: {\n          message,\n          isSlowMode: false,\n          hasErrorKey: true,\n        },\n      });\n    }\n  }\n\n  if (!result || result instanceof GramJs.messages.MessagesNotModified) {\n    return undefined;\n  }\n\n  if ('pts' in result) {\n    updateChannelState(chat.id, result.pts);\n  }\n\n  const mtpMessage = result.messages[0];\n  if (!mtpMessage) {\n    return undefined;\n  }\n\n  if (mtpMessage instanceof GramJs.MessageEmpty) {\n    return MESSAGE_DELETED;\n  }\n\n  const message = mtpMessage && buildApiMessage(mtpMessage);\n  dispatchThreadInfoUpdates([mtpMessage]);\n\n  if (!message) {\n    return undefined;\n  }\n\n  addMessageToLocalDb(mtpMessage);\n\n  const users = result.users.map(buildApiUser).filter(Boolean);\n\n  return { message, users };\n}\n\nlet mediaQueue = Promise.resolve();\n\nexport function sendMessage(\n  {\n    chat,\n    lastMessageId,\n    text,\n    entities,\n    replyInfo,\n    attachment,\n    sticker,\n    story,\n    gif,\n    poll,\n    contact,\n    isSilent,\n    scheduledAt,\n    groupedId,\n    noWebPage,\n    sendAs,\n    shouldUpdateStickerSetOrder,\n    wasDrafted,\n    isInvertedMedia,\n    effectId,\n  }: {\n    chat: ApiChat;\n    lastMessageId?: number;\n    text?: string;\n    entities?: ApiMessageEntity[];\n    replyInfo?: ApiInputReplyInfo;\n    attachment?: ApiAttachment;\n    sticker?: ApiSticker;\n    story?: ApiStory | ApiStorySkipped;\n    gif?: ApiVideo;\n    poll?: ApiNewPoll;\n    contact?: ApiContact;\n    isSilent?: boolean;\n    scheduledAt?: number;\n    groupedId?: string;\n    noWebPage?: boolean;\n    sendAs?: ApiPeer;\n    shouldUpdateStickerSetOrder?: boolean;\n    wasDrafted?: boolean;\n    isInvertedMedia?: true;\n    effectId?: string;\n  },\n  onProgress?: ApiOnProgress,\n) {\n  const localMessage = buildLocalMessage(\n    chat,\n    lastMessageId,\n    text,\n    entities,\n    replyInfo,\n    attachment,\n    sticker,\n    gif,\n    poll,\n    contact,\n    groupedId,\n    scheduledAt,\n    sendAs,\n    story,\n    isInvertedMedia,\n    effectId,\n  );\n\n  onUpdate({\n    '@type': localMessage.isScheduled ? 'newScheduledMessage' : 'newMessage',\n    id: localMessage.id,\n    chatId: chat.id,\n    message: localMessage,\n    wasDrafted,\n  });\n\n  // This is expected to arrive after `updateMessageSendSucceeded` which replaces the local ID,\n  // so in most cases this will be simply ignored\n  const timeout = setTimeout(() => {\n    onUpdate({\n      '@type': localMessage.isScheduled ? 'updateScheduledMessage' : 'updateMessage',\n      id: localMessage.id,\n      chatId: chat.id,\n      message: {\n        sendingState: 'messageSendingStatePending',\n      },\n    });\n  }, FAST_SEND_TIMEOUT);\n\n  const randomId = generateRandomBigInt();\n\n  if (groupedId) {\n    return sendGroupedMedia({\n      chat,\n      text,\n      entities,\n      replyInfo,\n      attachment: attachment!,\n      groupedId,\n      isSilent,\n      scheduledAt,\n    }, randomId, localMessage, onProgress);\n  }\n\n  const messagePromise = (async () => {\n    let media: GramJs.TypeInputMedia | undefined;\n    if (attachment) {\n      try {\n        media = await uploadMedia(localMessage, attachment, onProgress!);\n      } catch (err) {\n        if (DEBUG) {\n          // eslint-disable-next-line no-console\n          console.warn(err);\n        }\n\n        await mediaQueue;\n\n        return;\n      }\n    } else if (sticker) {\n      media = buildInputMediaDocument(sticker);\n    } else if (gif) {\n      media = buildInputMediaDocument(gif);\n    } else if (poll) {\n      media = buildInputPoll(poll, randomId);\n    } else if (story) {\n      media = buildInputStory(story);\n    } else if (contact) {\n      media = new GramJs.InputMediaContact({\n        phoneNumber: contact.phoneNumber,\n        firstName: contact.firstName,\n        lastName: contact.lastName,\n        vcard: '',\n      });\n    }\n\n    const RequestClass = media ? GramJs.messages.SendMedia : GramJs.messages.SendMessage;\n\n    try {\n      const update = await invokeRequest(new RequestClass({\n        clearDraft: true,\n        message: text || '',\n        entities: entities ? entities.map(buildMtpMessageEntity) : undefined,\n        peer: buildInputPeer(chat.id, chat.accessHash),\n        randomId,\n        replyTo: replyInfo && buildInputReplyTo(replyInfo),\n        ...(isSilent && { silent: isSilent }),\n        ...(scheduledAt && { scheduleDate: scheduledAt }),\n        ...(media && { media }),\n        ...(noWebPage && { noWebpage: noWebPage }),\n        ...(sendAs && { sendAs: buildInputPeer(sendAs.id, sendAs.accessHash) }),\n        ...(shouldUpdateStickerSetOrder && { updateStickersetsOrder: shouldUpdateStickerSetOrder }),\n        ...(isInvertedMedia && { invertMedia: isInvertedMedia }),\n        ...(effectId && { effect: BigInt(effectId) }),\n      }), {\n        shouldThrow: true,\n        shouldIgnoreUpdates: true,\n      });\n      if (update) handleLocalMessageUpdate(localMessage, update);\n    } catch (error: any) {\n      if (error.message === 'PRIVACY_PREMIUM_REQUIRED') {\n        onUpdate({ '@type': 'updateRequestUserUpdate', id: chat.id });\n      }\n\n      onUpdate({\n        '@type': 'updateMessageSendFailed',\n        chatId: chat.id,\n        localId: localMessage.id,\n        error: error.message,\n      });\n      clearTimeout(timeout);\n    }\n  })();\n\n  return messagePromise;\n}\n\nconst groupedUploads: Record<string, {\n  counter: number;\n  singleMediaByIndex: Record<number, GramJs.InputSingleMedia>;\n  localMessages: Record<string, ApiMessage>;\n}> = {};\n\nfunction sendGroupedMedia(\n  {\n    chat,\n    text,\n    entities,\n    replyInfo,\n    attachment,\n    groupedId,\n    isSilent,\n    scheduledAt,\n    sendAs,\n  }: {\n    chat: ApiChat;\n    text?: string;\n    entities?: ApiMessageEntity[];\n    replyInfo?: ApiInputReplyInfo;\n    attachment: ApiAttachment;\n    groupedId: string;\n    isSilent?: boolean;\n    scheduledAt?: number;\n    sendAs?: ApiPeer;\n  },\n  randomId: GramJs.long,\n  localMessage: ApiMessage,\n  onProgress?: ApiOnProgress,\n) {\n  let groupIndex = -1;\n  if (!groupedUploads[groupedId]) {\n    groupedUploads[groupedId] = {\n      counter: 0,\n      singleMediaByIndex: {},\n      localMessages: {},\n    };\n  }\n\n  groupIndex = groupedUploads[groupedId].counter++;\n\n  const prevMediaQueue = mediaQueue;\n  mediaQueue = (async () => {\n    let media;\n    try {\n      media = await uploadMedia(localMessage, attachment, onProgress!);\n    } catch (err) {\n      if (DEBUG) {\n        // eslint-disable-next-line no-console\n        console.warn(err);\n      }\n\n      groupedUploads[groupedId].counter--;\n\n      await prevMediaQueue;\n\n      return;\n    }\n\n    const inputMedia = await fetchInputMedia(\n      buildInputPeer(chat.id, chat.accessHash),\n      media as GramJs.InputMediaUploadedPhoto | GramJs.InputMediaUploadedDocument,\n    );\n\n    await prevMediaQueue;\n\n    if (!inputMedia) {\n      groupedUploads[groupedId].counter--;\n\n      if (DEBUG) {\n        // eslint-disable-next-line no-console\n        console.warn('Failed to upload grouped media');\n      }\n\n      return;\n    }\n\n    groupedUploads[groupedId].singleMediaByIndex[groupIndex] = new GramJs.InputSingleMedia({\n      media: inputMedia,\n      randomId,\n      message: text || '',\n      entities: entities ? entities.map(buildMtpMessageEntity) : undefined,\n    });\n    groupedUploads[groupedId].localMessages[randomId.toString()] = localMessage;\n\n    if (Object.keys(groupedUploads[groupedId].singleMediaByIndex).length < groupedUploads[groupedId].counter) {\n      return;\n    }\n\n    const { singleMediaByIndex, localMessages } = groupedUploads[groupedId];\n    delete groupedUploads[groupedId];\n\n    const update = await invokeRequest(new GramJs.messages.SendMultiMedia({\n      clearDraft: true,\n      peer: buildInputPeer(chat.id, chat.accessHash),\n      multiMedia: Object.values(singleMediaByIndex), // Object keys are usually ordered\n      replyTo: replyInfo && buildInputReplyTo(replyInfo),\n      ...(isSilent && { silent: isSilent }),\n      ...(scheduledAt && { scheduleDate: scheduledAt }),\n      ...(sendAs && { sendAs: buildInputPeer(sendAs.id, sendAs.accessHash) }),\n    }), {\n      shouldIgnoreUpdates: true,\n    });\n\n    if (update) handleMultipleLocalMessagesUpdate(localMessages, update);\n  })();\n\n  return mediaQueue;\n}\n\nasync function fetchInputMedia(\n  peer: GramJs.TypeInputPeer,\n  uploadedMedia: GramJs.InputMediaUploadedPhoto | GramJs.InputMediaUploadedDocument,\n) {\n  const messageMedia = await invokeRequest(new GramJs.messages.UploadMedia({\n    peer,\n    media: uploadedMedia,\n  }));\n  const isSpoiler = uploadedMedia.spoiler;\n\n  if ((\n    messageMedia instanceof GramJs.MessageMediaPhoto\n    && messageMedia.photo\n    && messageMedia.photo instanceof GramJs.Photo)\n  ) {\n    const { photo: { id, accessHash, fileReference } } = messageMedia;\n\n    return new GramJs.InputMediaPhoto({\n      id: new GramJs.InputPhoto({ id, accessHash, fileReference }),\n      spoiler: isSpoiler,\n    });\n  }\n\n  if ((\n    messageMedia instanceof GramJs.MessageMediaDocument\n    && messageMedia.document\n    && messageMedia.document instanceof GramJs.Document)\n  ) {\n    const { document: { id, accessHash, fileReference } } = messageMedia;\n\n    return new GramJs.InputMediaDocument({\n      id: new GramJs.InputDocument({ id, accessHash, fileReference }),\n      spoiler: isSpoiler,\n    });\n  }\n\n  return undefined;\n}\n\nexport async function editMessage({\n  chat,\n  message,\n  text,\n  entities,\n  attachment,\n  noWebPage,\n}: {\n  chat: ApiChat;\n  message: ApiMessage;\n  text: string;\n  entities?: ApiMessageEntity[];\n  attachment?: ApiAttachment;\n  noWebPage?: boolean;\n}, onProgress?: ApiOnProgress) {\n  const isScheduled = message.date * 1000 > Date.now() + getServerTimeOffset() * 1000;\n\n  const media = attachment && buildUploadingMedia(attachment);\n\n  const isInvertedMedia = text && !attachment?.shouldSendAsFile ? message.isInvertedMedia : undefined;\n\n  const newContent = {\n    ...(media || message.content),\n    ...(text && {\n      text: {\n        text,\n        entities,\n      },\n    }),\n  };\n\n  const messageUpdate: Partial<ApiMessage> = {\n    ...message,\n    content: newContent,\n    emojiOnlyCount: getEmojiOnlyCountForMessage(newContent, message.groupedId),\n    isInvertedMedia,\n  };\n\n  onUpdate({\n    '@type': isScheduled ? 'updateScheduledMessage' : 'updateMessage',\n    id: message.id,\n    chatId: chat.id,\n    message: messageUpdate,\n  });\n\n  try {\n    let mediaUpdate: GramJs.TypeInputMedia | undefined;\n    if (attachment) {\n      mediaUpdate = await uploadMedia(message, attachment, onProgress!);\n    }\n\n    const mtpEntities = entities && entities.map(buildMtpMessageEntity);\n\n    await invokeRequest(new GramJs.messages.EditMessage({\n      message: text || '',\n      entities: mtpEntities,\n      media: mediaUpdate,\n      peer: buildInputPeer(chat.id, chat.accessHash),\n      id: message.id,\n      ...(isScheduled && { scheduleDate: message.date }),\n      ...(noWebPage && { noWebpage: noWebPage }),\n      ...(isInvertedMedia && { invertMedia: isInvertedMedia }),\n    }), { shouldThrow: true });\n  } catch (err) {\n    if (DEBUG) {\n      // eslint-disable-next-line no-console\n      console.warn(err);\n    }\n\n    const { message: messageErr } = err as Error;\n\n    onUpdate({\n      '@type': 'error',\n      error: {\n        message: messageErr,\n        hasErrorKey: true,\n      },\n    });\n\n    // Rollback changes\n    onUpdate({\n      '@type': isScheduled ? 'updateScheduledMessage' : 'updateMessage',\n      id: message.id,\n      chatId: chat.id,\n      message,\n    });\n  }\n}\n\nexport async function rescheduleMessage({\n  chat,\n  message,\n  scheduledAt,\n}: {\n  chat: ApiChat;\n  message: ApiMessage;\n  scheduledAt: number;\n}) {\n  await invokeRequest(new GramJs.messages.EditMessage({\n    peer: buildInputPeer(chat.id, chat.accessHash),\n    id: message.id,\n    scheduleDate: scheduledAt,\n  }));\n}\n\nasync function uploadMedia(message: ApiMessage, attachment: ApiAttachment, onProgress: ApiOnProgress) {\n  const {\n    filename, blobUrl, mimeType, quick, voice, audio, previewBlobUrl, shouldSendAsFile, shouldSendAsSpoiler, ttlSeconds,\n  } = attachment;\n\n  const patchedOnProgress: ApiOnProgress = (progress) => {\n    if (onProgress.isCanceled) {\n      patchedOnProgress.isCanceled = true;\n    } else {\n      onProgress(progress, getMessageKey(message));\n    }\n  };\n\n  const fetchAndUpload = async (url: string, progressCallback?: (progress: number) => void) => {\n    const file = await fetchFile(url, filename);\n    return uploadFile(file, progressCallback);\n  };\n\n  const isVideo = SUPPORTED_VIDEO_CONTENT_TYPES.has(mimeType);\n  const shouldUploadThumb = audio || isVideo || shouldSendAsFile;\n\n  const [inputFile, thumb] = await Promise.all(compact([\n    fetchAndUpload(blobUrl, patchedOnProgress),\n    shouldUploadThumb && previewBlobUrl && fetchAndUpload(previewBlobUrl),\n  ]));\n\n  const attributes: GramJs.TypeDocumentAttribute[] = [new GramJs.DocumentAttributeFilename({ fileName: filename })];\n  if (!shouldSendAsFile) {\n    if (quick) {\n      if (SUPPORTED_IMAGE_CONTENT_TYPES.has(mimeType) && mimeType !== GIF_MIME_TYPE) {\n        return new GramJs.InputMediaUploadedPhoto({\n          file: inputFile,\n          spoiler: shouldSendAsSpoiler,\n        });\n      }\n\n      if (isVideo) {\n        const { width, height, duration } = quick;\n        if (duration !== undefined) {\n          attributes.push(new GramJs.DocumentAttributeVideo({\n            duration,\n            w: width,\n            h: height,\n            supportsStreaming: true,\n          }));\n        }\n      }\n    }\n\n    if (audio) {\n      const { duration, title, performer } = audio;\n      attributes.push(new GramJs.DocumentAttributeAudio({\n        duration,\n        title,\n        performer,\n      }));\n    }\n\n    if (voice) {\n      const { duration, waveform } = voice;\n      const { data: inputWaveform } = interpolateArray(waveform, INPUT_WAVEFORM_LENGTH);\n      attributes.push(new GramJs.DocumentAttributeAudio({\n        voice: true,\n        duration,\n        waveform: Buffer.from(inputWaveform),\n      }));\n    }\n  }\n\n  return new GramJs.InputMediaUploadedDocument({\n    file: inputFile,\n    mimeType,\n    attributes,\n    thumb,\n    forceFile: shouldSendAsFile,\n    spoiler: shouldSendAsSpoiler,\n    ttlSeconds,\n  });\n}\n\nexport async function pinMessage({\n  chat, messageId, isUnpin, isOneSide, isSilent,\n}: { chat: ApiChat; messageId: number; isUnpin: boolean; isOneSide?: boolean; isSilent?: boolean }) {\n  await invokeRequest(new GramJs.messages.UpdatePinnedMessage({\n    peer: buildInputPeer(chat.id, chat.accessHash),\n    id: messageId,\n    ...(isUnpin && { unpin: true }),\n    ...(isOneSide && { pmOneside: true }),\n    ...(isSilent && { silent: true }),\n  }));\n}\n\nexport async function unpinAllMessages({ chat, threadId }: { chat: ApiChat; threadId?: ThreadId }) {\n  const result = await invokeRequest(new GramJs.messages.UnpinAllMessages({\n    peer: buildInputPeer(chat.id, chat.accessHash),\n    ...(threadId && { topMsgId: Number(threadId) }),\n  }));\n\n  if (!result) return;\n\n  processAffectedHistory(chat, result);\n\n  if (result.offset) {\n    await unpinAllMessages({ chat, threadId });\n  }\n}\n\nexport async function deleteMessages({\n  chat, messageIds, shouldDeleteForAll,\n}: {\n  chat: ApiChat; messageIds: number[]; shouldDeleteForAll?: boolean;\n}) {\n  const isChannel = getEntityTypeById(chat.id) === 'channel';\n\n  const result = await invokeRequest(\n    isChannel\n      ? new GramJs.channels.DeleteMessages({\n        channel: buildInputEntity(chat.id, chat.accessHash) as GramJs.InputChannel,\n        id: messageIds,\n      })\n      : new GramJs.messages.DeleteMessages({\n        id: messageIds,\n        ...(shouldDeleteForAll && { revoke: true }),\n      }),\n  );\n\n  if (!result) {\n    return;\n  }\n\n  processAffectedHistory(chat, result);\n\n  onUpdate({\n    '@type': 'deleteMessages',\n    ids: messageIds,\n    ...(isChannel && { chatId: chat.id }),\n  });\n}\n\nexport function deleteScheduledMessages({\n  chat, messageIds,\n}: {\n  chat: ApiChat; messageIds: number[];\n}) {\n  invokeRequest(new GramJs.messages.DeleteScheduledMessages({\n    peer: buildInputPeer(chat.id, chat.accessHash),\n    id: messageIds,\n  }));\n}\n\nexport async function deleteHistory({\n  chat, shouldDeleteForAll,\n}: {\n  chat: ApiChat; shouldDeleteForAll?: boolean; maxId?: number;\n}) {\n  const isChannel = getEntityTypeById(chat.id) === 'channel';\n  const result = await invokeRequest(\n    isChannel\n      ? new GramJs.channels.DeleteHistory({\n        channel: buildInputEntity(chat.id, chat.accessHash) as GramJs.InputChannel,\n      })\n      : new GramJs.messages.DeleteHistory({\n        peer: buildInputPeer(chat.id, chat.accessHash),\n        ...(shouldDeleteForAll && { revoke: true }),\n        ...(!shouldDeleteForAll && { just_clear: true }),\n      }),\n  );\n\n  if (!result) {\n    return;\n  }\n\n  if ('offset' in result) {\n    processAffectedHistory(chat, result);\n\n    if (result.offset) {\n      await deleteHistory({ chat, shouldDeleteForAll });\n      return;\n    }\n  }\n\n  onUpdate({\n    '@type': 'deleteHistory',\n    chatId: chat.id,\n  });\n}\n\nexport async function deleteSavedHistory({\n  chat,\n}: {\n  chat: ApiChat;\n}) {\n  const result = await invokeRequest(new GramJs.messages.DeleteSavedHistory({\n    peer: buildInputPeer(chat.id, chat.accessHash),\n  }));\n\n  if (!result) {\n    return;\n  }\n\n  processAffectedHistory(chat, result);\n\n  if (result.offset) {\n    await deleteSavedHistory({ chat });\n    return;\n  }\n\n  onUpdate({\n    '@type': 'deleteSavedHistory',\n    chatId: chat.id,\n  });\n}\n\nexport async function reportMessages({\n  peer, messageIds, reason, description,\n}: {\n  peer: ApiPeer; messageIds: number[]; reason: ApiReportReason; description?: string;\n}) {\n  const result = await invokeRequest(new GramJs.messages.Report({\n    peer: buildInputPeer(peer.id, peer.accessHash),\n    id: messageIds,\n    reason: buildInputReportReason(reason),\n    message: description,\n  }));\n\n  return result;\n}\n\nexport async function sendMessageAction({\n  peer, threadId, action,\n}: {\n  peer: ApiPeer; threadId?: ThreadId; action: ApiSendMessageAction;\n}) {\n  const gramAction = buildSendMessageAction(action);\n  if (!gramAction) {\n    if (DEBUG) {\n      // eslint-disable-next-line no-console\n      console.warn('Unsupported message action', action);\n    }\n    return undefined;\n  }\n\n  try {\n    const result = await invokeRequest(new GramJs.messages.SetTyping({\n      peer: buildInputPeer(peer.id, peer.accessHash),\n      topMsgId: Number(threadId),\n      action: gramAction,\n    }), {\n      shouldThrow: true,\n      abortControllerChatId: peer.id,\n      abortControllerThreadId: threadId,\n    });\n    return result;\n  } catch (error) {\n    // Prevent error from being displayed in UI\n  }\n  return undefined;\n}\n\nexport async function markMessageListRead({\n  chat, threadId, maxId = 0,\n}: {\n  chat: ApiChat; threadId: ThreadId; maxId?: number;\n}) {\n  const isChannel = getEntityTypeById(chat.id) === 'channel';\n\n  // Workaround for local message IDs overflowing some internal `Buffer` range check\n  const fixedMaxId = Math.min(maxId, MAX_INT_32);\n  if (isChannel && threadId === MAIN_THREAD_ID) {\n    await invokeRequest(new GramJs.channels.ReadHistory({\n      channel: buildInputEntity(chat.id, chat.accessHash) as GramJs.InputChannel,\n      maxId: fixedMaxId,\n    }));\n  } else if (isChannel) {\n    await invokeRequest(new GramJs.messages.ReadDiscussion({\n      peer: buildInputPeer(chat.id, chat.accessHash),\n      msgId: Number(threadId),\n      readMaxId: fixedMaxId,\n    }));\n  } else {\n    const result = await invokeRequest(new GramJs.messages.ReadHistory({\n      peer: buildInputPeer(chat.id, chat.accessHash),\n      maxId: fixedMaxId,\n    }));\n\n    if (result) {\n      processAffectedHistory(chat, result);\n    }\n  }\n\n  if (threadId === MAIN_THREAD_ID) {\n    void requestChatUpdate({ chat, noLastMessage: true });\n  } else if (chat.isForum) {\n    onUpdate({\n      '@type': 'updateTopic',\n      chatId: chat.id,\n      topicId: Number(threadId),\n    });\n  }\n}\n\nexport async function markMessagesRead({\n  chat, messageIds,\n}: {\n  chat: ApiChat; messageIds: number[];\n}) {\n  const isChannel = getEntityTypeById(chat.id) === 'channel';\n\n  const result = await invokeRequest(\n    isChannel\n      ? new GramJs.channels.ReadMessageContents({\n        channel: buildInputEntity(chat.id, chat.accessHash) as GramJs.InputChannel,\n        id: messageIds,\n      })\n      : new GramJs.messages.ReadMessageContents({\n        id: messageIds,\n      }),\n  );\n\n  if (!result) {\n    return;\n  }\n\n  if (result !== true) {\n    processAffectedHistory(chat, result);\n  }\n\n  onUpdate({\n    ...(isChannel ? {\n      '@type': 'updateChannelMessages',\n      channelId: chat.id,\n    } : {\n      '@type': 'updateCommonBoxMessages',\n    }),\n    ids: messageIds,\n    messageUpdate: {\n      hasUnreadMention: false,\n      isMediaUnread: false,\n    },\n  });\n}\n\nexport async function fetchMessageViews({\n  chat, ids, shouldIncrement,\n}: {\n  chat: ApiChat;\n  ids: number[];\n  shouldIncrement?: boolean;\n}) {\n  const chunks = split(ids, API_GENERAL_ID_LIMIT);\n  const results = await Promise.all(chunks.map((chunkIds) => (\n    invokeRequest(new GramJs.messages.GetMessagesViews({\n      peer: buildInputPeer(chat.id, chat.accessHash),\n      id: chunkIds,\n      increment: shouldIncrement,\n    }))\n  )));\n\n  if (!results || results.some((result) => !result)) return undefined;\n\n  const viewsList = results.flatMap((result) => result!.views);\n  const users = results.flatMap((result) => result!.users);\n  const chats = results.flatMap((result) => result!.chats);\n\n  const viewsInfo = ids.map((id, index) => {\n    const { views, forwards, replies } = viewsList[index];\n    return {\n      id,\n      views,\n      forwards,\n      threadInfo: replies ? buildApiThreadInfo(replies, id, chat.id) : undefined,\n    };\n  });\n\n  return {\n    viewsInfo,\n    users: users.map(buildApiUser).filter(Boolean),\n    chats: chats.map((c) => buildApiChatFromPreview(c)).filter(Boolean),\n  };\n}\n\nexport async function fetchFactChecks({\n  chat, ids,\n}: {\n  chat: ApiChat;\n  ids: number[];\n}) {\n  const chunks = split(ids, API_GENERAL_ID_LIMIT);\n  const results = await Promise.all(chunks.map((chunkIds) => (\n    invokeRequest(new GramJs.messages.GetFactCheck({\n      peer: buildInputPeer(chat.id, chat.accessHash),\n      msgId: chunkIds,\n    }))\n  )));\n\n  if (!results || results.some((result) => !result)) return undefined;\n\n  return results.flatMap((result) => result!).map(buildApiFactCheck);\n}\n\nexport async function fetchDiscussionMessage({\n  chat, messageId,\n}: {\n  chat: ApiChat;\n  messageId: number;\n}) {\n  const [result, replies] = await Promise.all([\n    invokeRequest(new GramJs.messages.GetDiscussionMessage({\n      peer: buildInputPeer(chat.id, chat.accessHash),\n      msgId: messageId,\n    }), {\n      abortControllerChatId: chat.id,\n      abortControllerThreadId: messageId,\n    }),\n    fetchMessages({\n      chat,\n      threadId: messageId,\n      offsetId: 1,\n      addOffset: -1,\n      limit: 1,\n    }),\n  ]);\n\n  if (!result || !replies) return undefined;\n\n  updateLocalDb(result);\n\n  const chats = result.chats.map((c) => buildApiChatFromPreview(c)).filter(Boolean)\n    .concat(replies.chats);\n  const users = result.users.map(buildApiUser).filter(Boolean)\n    .concat(replies.users);\n  const topMessages = result.messages.map(buildApiMessage).filter(Boolean);\n  const messages = topMessages.concat(replies.messages);\n  const threadId = result.messages[result.messages.length - 1]?.id;\n\n  if (!threadId) return undefined;\n\n  dispatchThreadInfoUpdates(result.messages);\n\n  const {\n    unreadCount, maxId, readInboxMaxId, readOutboxMaxId,\n  } = result;\n\n  return {\n    chats,\n    users,\n    messages,\n    topMessages,\n    unreadCount,\n    threadId,\n    lastReadInboxMessageId: readInboxMaxId,\n    lastReadOutboxMessageId: readOutboxMaxId,\n    lastMessageId: maxId,\n    chatId: topMessages[0]?.chatId,\n    firstMessageId: replies.messages[0]?.id,\n  };\n}\n\nexport async function searchMessagesLocal({\n  chat, isSavedDialog, savedTag, type, query, threadId, minDate, maxDate, ...pagination\n}: {\n  chat: ApiChat;\n  isSavedDialog?: boolean;\n  savedTag?: ApiReaction;\n  type?: ApiMessageSearchType | ApiGlobalMessageSearchType;\n  query?: string;\n  threadId?: ThreadId;\n  offsetId?: number;\n  addOffset?: number;\n  limit: number;\n  minDate?: number;\n  maxDate?: number;\n}) {\n  let filter;\n  switch (type) {\n    case 'media':\n      filter = new GramJs.InputMessagesFilterPhotoVideo();\n      break;\n    case 'documents':\n      filter = new GramJs.InputMessagesFilterDocument();\n      break;\n    case 'links':\n      filter = new GramJs.InputMessagesFilterUrl();\n      break;\n    case 'audio':\n      filter = new GramJs.InputMessagesFilterMusic();\n      break;\n    case 'voice':\n      filter = new GramJs.InputMessagesFilterRoundVoice();\n      break;\n    case 'profilePhoto':\n      filter = new GramJs.InputMessagesFilterChatPhotos();\n      break;\n    case 'text':\n    default: {\n      filter = new GramJs.InputMessagesFilterEmpty();\n    }\n  }\n\n  const peer = buildInputPeer(chat.id, chat.accessHash);\n\n  const result = await invokeRequest(new GramJs.messages.Search({\n    peer: isSavedDialog ? new GramJs.InputPeerSelf() : peer,\n    savedPeerId: isSavedDialog ? peer : undefined,\n    savedReaction: savedTag && [buildInputReaction(savedTag)],\n    topMsgId: threadId !== MAIN_THREAD_ID && !isSavedDialog ? Number(threadId) : undefined,\n    filter,\n    q: query || '',\n    minDate,\n    maxDate,\n    ...pagination,\n  }), {\n    abortControllerChatId: chat.id,\n    abortControllerThreadId: threadId,\n  });\n\n  if (\n    !result\n    || result instanceof GramJs.messages.MessagesNotModified\n    || !result.messages\n  ) {\n    return undefined;\n  }\n\n  updateLocalDb(result);\n\n  const chats = result.chats.map((c) => buildApiChatFromPreview(c)).filter(Boolean);\n  const users = result.users.map(buildApiUser).filter(Boolean);\n  const messages = result.messages.map(buildApiMessage).filter(Boolean);\n  dispatchThreadInfoUpdates(result.messages);\n\n  let totalCount = messages.length;\n  let nextOffsetId: number | undefined;\n  if (result instanceof GramJs.messages.MessagesSlice || result instanceof GramJs.messages.ChannelMessages) {\n    totalCount = result.count;\n\n    if (messages.length) {\n      nextOffsetId = messages[messages.length - 1].id;\n    }\n  }\n\n  return {\n    chats,\n    users,\n    messages,\n    totalCount,\n    nextOffsetId,\n  };\n}\n\nexport async function searchMessagesGlobal({\n  query, offsetRate = 0, limit, type = 'text', minDate, maxDate,\n}: {\n  query: string;\n  offsetRate?: number;\n  limit: number;\n  type?: ApiGlobalMessageSearchType;\n  minDate?: number;\n  maxDate?: number;\n}) {\n  let filter;\n  switch (type) {\n    case 'media':\n      filter = new GramJs.InputMessagesFilterPhotoVideo();\n      break;\n    case 'documents':\n      filter = new GramJs.InputMessagesFilterDocument();\n      break;\n    case 'links':\n      filter = new GramJs.InputMessagesFilterUrl();\n      break;\n    case 'audio':\n      filter = new GramJs.InputMessagesFilterMusic();\n      break;\n    case 'voice':\n      filter = new GramJs.InputMessagesFilterRoundVoice();\n      break;\n    case 'text':\n    default: {\n      if (!query && !(maxDate && minDate)) {\n        return undefined;\n      }\n\n      filter = new GramJs.InputMessagesFilterEmpty();\n    }\n  }\n\n  const result = await invokeRequest(new GramJs.messages.SearchGlobal({\n    q: query,\n    offsetRate,\n    offsetPeer: new GramJs.InputPeerEmpty(),\n    broadcastsOnly: type === 'channels' || undefined,\n    limit,\n    filter,\n    folderId: ALL_FOLDER_ID,\n    minDate,\n    maxDate,\n  }));\n\n  if (\n    !result\n    || result instanceof GramJs.messages.MessagesNotModified\n    || !result.messages\n  ) {\n    return undefined;\n  }\n\n  updateLocalDb({\n    chats: result.chats,\n    users: result.users,\n    messages: result.messages,\n  } as GramJs.messages.Messages);\n\n  const chats = result.chats.map((c) => buildApiChatFromPreview(c)).filter(Boolean);\n  const users = result.users.map(buildApiUser).filter(Boolean);\n  const messages = result.messages.map(buildApiMessage).filter(Boolean);\n  dispatchThreadInfoUpdates(result.messages);\n\n  let totalCount = messages.length;\n  let nextRate: number | undefined;\n  if (result instanceof GramJs.messages.MessagesSlice || result instanceof GramJs.messages.ChannelMessages) {\n    totalCount = result.count;\n\n    if (messages.length) {\n      nextRate = messages[messages.length - 1].id;\n    }\n  }\n\n  return {\n    messages,\n    users,\n    chats,\n    totalCount,\n    nextRate: 'nextRate' in result && result.nextRate ? result.nextRate : nextRate,\n  };\n}\n\nexport async function fetchWebPagePreview({\n  text,\n}: {\n  text: ApiFormattedText;\n}) {\n  const textWithEntities = buildInputTextWithEntities(text);\n  const preview = await invokeRequest(new GramJs.messages.GetWebPagePreview({\n    message: textWithEntities.text,\n    entities: textWithEntities.entities,\n  }));\n\n  return preview && buildWebPage(preview);\n}\n\nexport async function sendPollVote({\n  chat, messageId, options,\n}: {\n  chat: ApiChat;\n  messageId: number;\n  options: string[];\n}) {\n  const { id, accessHash } = chat;\n\n  await invokeRequest(new GramJs.messages.SendVote({\n    peer: buildInputPeer(id, accessHash),\n    msgId: messageId,\n    options: options.map(deserializeBytes),\n  }));\n}\n\nexport async function closePoll({\n  chat, messageId, poll,\n}: {\n  chat: ApiChat;\n  messageId: number;\n  poll: ApiPoll;\n}) {\n  const { id, accessHash } = chat;\n\n  await invokeRequest(new GramJs.messages.EditMessage({\n    peer: buildInputPeer(id, accessHash),\n    id: messageId,\n    media: buildInputPollFromExisting(poll, true),\n  }));\n}\n\nexport async function loadPollOptionResults({\n  chat, messageId, option, offset, limit, shouldResetVoters,\n}: {\n  chat: ApiChat;\n  messageId: number;\n  option?: string;\n  offset?: string;\n  limit?: number;\n  shouldResetVoters?: boolean;\n}) {\n  const { id, accessHash } = chat;\n\n  const result = await invokeRequest(new GramJs.messages.GetPollVotes({\n    peer: buildInputPeer(id, accessHash),\n    id: messageId,\n    ...(option && { option: deserializeBytes(option) }),\n    ...(offset && { offset }),\n    ...(limit && { limit }),\n  }));\n\n  if (!result) {\n    return undefined;\n  }\n\n  updateLocalDb({\n    chats: result.chats,\n    users: result.users,\n    messages: [] as GramJs.Message[],\n  } as GramJs.messages.Messages);\n\n  const users = result.users.map(buildApiUser).filter(Boolean);\n  const chats = result.chats.map((c) => buildApiChatFromPreview(c)).filter(Boolean);\n  const votes = result.votes.map((vote) => ({\n    peerId: getApiChatIdFromMtpPeer(vote.peer),\n    date: vote.date,\n  }));\n\n  return {\n    count: result.count,\n    votes,\n    chats,\n    users,\n    nextOffset: result.nextOffset,\n    shouldResetVoters,\n  };\n}\n\nexport async function fetchExtendedMedia({\n  chat, ids,\n}: {\n  chat: ApiChat;\n  ids: number[];\n}) {\n  await invokeRequest(new GramJs.messages.GetExtendedMedia({\n    peer: buildInputPeer(chat.id, chat.accessHash),\n    id: ids,\n  }));\n}\n\nexport async function forwardMessages({\n  fromChat,\n  toChat,\n  toThreadId,\n  messages,\n  isSilent,\n  scheduledAt,\n  sendAs,\n  withMyScore,\n  noAuthors,\n  noCaptions,\n  isCurrentUserPremium,\n  wasDrafted,\n  lastMessageId,\n}: {\n  fromChat: ApiChat;\n  toChat: ApiChat;\n  toThreadId?: ThreadId;\n  messages: ApiMessage[];\n  isSilent?: boolean;\n  scheduledAt?: number;\n  sendAs?: ApiPeer;\n  withMyScore?: boolean;\n  noAuthors?: boolean;\n  noCaptions?: boolean;\n  isCurrentUserPremium?: boolean;\n  wasDrafted?: boolean;\n  lastMessageId?: number;\n}) {\n  const messageIds = messages.map(({ id }) => id);\n  const randomIds = messages.map(generateRandomBigInt);\n  const localMessages: Record<string, ApiMessage> = {};\n\n  messages.forEach((message, index) => {\n    const localMessage = buildLocalForwardedMessage({\n      toChat,\n      toThreadId: Number(toThreadId),\n      message,\n      scheduledAt,\n      noAuthors,\n      noCaptions,\n      isCurrentUserPremium,\n      lastMessageId,\n    });\n    localMessages[randomIds[index].toString()] = localMessage;\n\n    onUpdate({\n      '@type': localMessage.isScheduled ? 'newScheduledMessage' : 'newMessage',\n      id: localMessage.id,\n      chatId: toChat.id,\n      message: localMessage,\n      wasDrafted,\n    });\n  });\n\n  try {\n    const update = await invokeRequest(new GramJs.messages.ForwardMessages({\n      fromPeer: buildInputPeer(fromChat.id, fromChat.accessHash),\n      toPeer: buildInputPeer(toChat.id, toChat.accessHash),\n      randomId: randomIds,\n      id: messageIds,\n      withMyScore: withMyScore || undefined,\n      silent: isSilent || undefined,\n      dropAuthor: noAuthors || undefined,\n      dropMediaCaptions: noCaptions || undefined,\n      ...(toThreadId && { topMsgId: Number(toThreadId) }),\n      ...(scheduledAt && { scheduleDate: scheduledAt }),\n      ...(sendAs && { sendAs: buildInputPeer(sendAs.id, sendAs.accessHash) }),\n    }), {\n      shouldThrow: true,\n      shouldIgnoreUpdates: true,\n    });\n    if (update) handleMultipleLocalMessagesUpdate(localMessages, update);\n  } catch (error: any) {\n    Object.values(localMessages).forEach((localMessage) => {\n      onUpdate({\n        '@type': 'updateMessageSendFailed',\n        chatId: toChat.id,\n        localId: localMessage.id,\n        error: error.message,\n      });\n    });\n  }\n}\n\nexport async function findFirstMessageIdAfterDate({\n  chat,\n  timestamp,\n}: {\n  chat: ApiChat;\n  timestamp: number;\n}) {\n  const result = await invokeRequest(new GramJs.messages.GetHistory({\n    peer: buildInputPeer(chat.id, chat.accessHash),\n    offsetDate: timestamp,\n    addOffset: -1,\n    limit: 1,\n  }));\n\n  if (\n    !result\n    || result instanceof GramJs.messages.MessagesNotModified\n    || !result.messages || !result.messages.length\n  ) {\n    return undefined;\n  }\n\n  return result.messages[0].id;\n}\n\nexport async function fetchScheduledHistory({ chat }: { chat: ApiChat }) {\n  const { id, accessHash } = chat;\n\n  const result = await invokeRequest(new GramJs.messages.GetScheduledHistory({\n    peer: buildInputPeer(id, accessHash),\n  }), {\n    abortControllerChatId: id,\n  });\n\n  if (\n    !result\n    || result instanceof GramJs.messages.MessagesNotModified\n    || !result.messages\n  ) {\n    return undefined;\n  }\n\n  updateLocalDb(result);\n\n  const messages = result.messages.map(buildApiMessage).filter(Boolean);\n  dispatchThreadInfoUpdates(result.messages);\n\n  return {\n    messages,\n  };\n}\n\nexport async function sendScheduledMessages({ chat, ids }: { chat: ApiChat; ids: number[] }) {\n  const { id, accessHash } = chat;\n\n  await invokeRequest(new GramJs.messages.SendScheduledMessages({\n    peer: buildInputPeer(id, accessHash),\n    id: ids,\n  }));\n}\n\nfunction updateLocalDb(result: (\n  GramJs.messages.MessagesSlice | GramJs.messages.Messages | GramJs.messages.ChannelMessages |\n  GramJs.messages.DiscussionMessage | GramJs.messages.SponsoredMessages | GramJs.messages.QuickReplies\n)) {\n  addEntitiesToLocalDb(result.users);\n  addEntitiesToLocalDb(result.chats);\n\n  result.messages.forEach((message) => {\n    addMessageToLocalDb(message);\n  });\n}\n\nexport async function fetchPinnedMessages({ chat, threadId }: { chat: ApiChat; threadId: ThreadId }) {\n  const result = await invokeRequest(new GramJs.messages.Search(\n    {\n      peer: buildInputPeer(chat.id, chat.accessHash),\n      filter: new GramJs.InputMessagesFilterPinned(),\n      q: '',\n      limit: PINNED_MESSAGES_LIMIT,\n      topMsgId: Number(threadId),\n    },\n  ), {\n    abortControllerChatId: chat.id,\n    abortControllerThreadId: threadId,\n  });\n\n  if (\n    !result\n    || result instanceof GramJs.messages.MessagesNotModified\n    || !result.messages\n  ) {\n    return undefined;\n  }\n\n  updateLocalDb(result);\n\n  const chats = result.chats.map((c) => buildApiChatFromPreview(c)).filter(Boolean);\n  const users = result.users.map(buildApiUser).filter(Boolean);\n  const messages = result.messages.map(buildApiMessage).filter(Boolean);\n  dispatchThreadInfoUpdates(result.messages);\n\n  return {\n    messages,\n    users,\n    chats,\n  };\n}\n\nexport async function fetchSeenBy({ chat, messageId }: { chat: ApiChat; messageId: number }) {\n  const result = await invokeRequest(new GramJs.messages.GetMessageReadParticipants({\n    peer: buildInputPeer(chat.id, chat.accessHash),\n    msgId: messageId,\n  }));\n\n  return result\n    ? result.reduce((acc, readDate) => {\n      acc[readDate.userId.toString()] = readDate.date;\n\n      return acc;\n    }, {} as Record<string, number>)\n    : undefined;\n}\n\nexport async function fetchSendAs({\n  chat,\n}: {\n  chat: ApiChat;\n}) {\n  const result = await invokeRequest(new GramJs.channels.GetSendAs({\n    peer: buildInputPeer(chat.id, chat.accessHash),\n  }), {\n    shouldIgnoreErrors: true,\n    abortControllerChatId: chat.id,\n  });\n\n  if (!result) {\n    return undefined;\n  }\n\n  addEntitiesToLocalDb(result.users);\n  addEntitiesToLocalDb(result.chats);\n\n  const users = result.users.map(buildApiUser).filter(Boolean);\n  const chats = result.chats.map((c) => buildApiChatFromPreview(c)).filter(Boolean);\n\n  return {\n    users,\n    chats,\n    sendAs: result.peers.map(buildApiSendAsPeerId),\n  };\n}\n\nexport function saveDefaultSendAs({\n  sendAs, chat,\n}: {\n  sendAs: ApiPeer; chat: ApiChat;\n}) {\n  return invokeRequest(new GramJs.messages.SaveDefaultSendAs({\n    peer: buildInputPeer(chat.id, chat.accessHash),\n    sendAs: buildInputPeer(sendAs.id, sendAs.accessHash),\n  }));\n}\n\nexport async function fetchSponsoredMessages({ chat }: { chat: ApiChat }) {\n  const result = await invokeRequest(new GramJs.channels.GetSponsoredMessages({\n    channel: buildInputPeer(chat.id, chat.accessHash),\n  }));\n\n  if (!result || result instanceof GramJs.messages.SponsoredMessagesEmpty || !result.messages.length) {\n    return undefined;\n  }\n\n  updateLocalDb(result);\n\n  const messages = result.messages.map(buildApiSponsoredMessage).filter(Boolean);\n  const users = result.users.map(buildApiUser).filter(Boolean);\n  const chats = result.chats.map((c) => buildApiChatFromPreview(c)).filter(Boolean);\n\n  return {\n    messages,\n    users,\n    chats,\n  };\n}\n\nexport async function viewSponsoredMessage({ chat, random }: { chat: ApiChat; random: string }) {\n  await invokeRequest(new GramJs.channels.ViewSponsoredMessage({\n    channel: buildInputPeer(chat.id, chat.accessHash),\n    randomId: deserializeBytes(random),\n  }));\n}\n\nexport function clickSponsoredMessage({ chat, random }: { chat: ApiChat; random: string }) {\n  return invokeRequest(new GramJs.channels.ClickSponsoredMessage({\n    channel: buildInputPeer(chat.id, chat.accessHash),\n    randomId: deserializeBytes(random),\n  }));\n}\n\nexport async function readAllMentions({\n  chat,\n}: {\n  chat: ApiChat;\n}) {\n  const result = await invokeRequest(new GramJs.messages.ReadMentions({\n    peer: buildInputPeer(chat.id, chat.accessHash),\n  }));\n\n  if (!result) return;\n\n  processAffectedHistory(chat, result);\n\n  if (result.offset) {\n    await readAllMentions({ chat });\n  }\n}\n\nexport async function readAllReactions({\n  chat,\n}: {\n  chat: ApiChat;\n}) {\n  const result = await invokeRequest(new GramJs.messages.ReadReactions({\n    peer: buildInputPeer(chat.id, chat.accessHash),\n  }));\n\n  if (!result) return;\n\n  processAffectedHistory(chat, result);\n\n  if (result.offset) {\n    await readAllReactions({ chat });\n  }\n}\n\nexport async function fetchUnreadMentions({\n  chat, ...pagination\n}: {\n  chat: ApiChat;\n  offsetId?: number;\n  addOffset?: number;\n  maxId?: number;\n  minId?: number;\n}) {\n  const result = await invokeRequest(new GramJs.messages.GetUnreadMentions({\n    peer: buildInputPeer(chat.id, chat.accessHash),\n    limit: MENTION_UNREAD_SLICE,\n    ...pagination,\n  }));\n\n  if (\n    !result\n    || result instanceof GramJs.messages.MessagesNotModified\n    || !result.messages\n  ) {\n    return undefined;\n  }\n\n  updateLocalDb(result);\n\n  const messages = result.messages.map(buildApiMessage).filter(Boolean);\n  dispatchThreadInfoUpdates(result.messages);\n  const users = result.users.map(buildApiUser).filter(Boolean);\n  const chats = result.chats.map((c) => buildApiChatFromPreview(c)).filter(Boolean);\n\n  return {\n    messages,\n    users,\n    chats,\n  };\n}\n\nexport async function fetchUnreadReactions({\n  chat, ...pagination\n}: {\n  chat: ApiChat;\n  offsetId?: number;\n  addOffset?: number;\n  maxId?: number;\n  minId?: number;\n}) {\n  const result = await invokeRequest(new GramJs.messages.GetUnreadReactions({\n    peer: buildInputPeer(chat.id, chat.accessHash),\n    limit: REACTION_UNREAD_SLICE,\n    ...pagination,\n  }));\n\n  if (\n    !result\n    || result instanceof GramJs.messages.MessagesNotModified\n    || !result.messages\n  ) {\n    return undefined;\n  }\n\n  updateLocalDb(result);\n\n  const messages = result.messages.map(buildApiMessage).filter(Boolean);\n  dispatchThreadInfoUpdates(result.messages);\n  const users = result.users.map(buildApiUser).filter(Boolean);\n  const chats = result.chats.map((c) => buildApiChatFromPreview(c)).filter(Boolean);\n\n  return {\n    messages,\n    users,\n    chats,\n  };\n}\n\nexport async function transcribeAudio({\n  chat, messageId,\n}: {\n  chat: ApiChat; messageId: number;\n}) {\n  const result = await invokeRequest(new GramJs.messages.TranscribeAudio({\n    msgId: messageId,\n    peer: buildInputPeer(chat.id, chat.accessHash),\n  }));\n\n  if (!result) return undefined;\n\n  onUpdate({\n    '@type': 'updateTranscribedAudio',\n    isPending: result.pending,\n    transcriptionId: result.transcriptionId.toString(),\n    text: result.text,\n  });\n\n  return result.transcriptionId.toString();\n}\n\nexport async function translateText(params: TranslateTextParams) {\n  let result;\n  const isMessageTranslation = 'chat' in params;\n  if (isMessageTranslation) {\n    const { chat, messageIds, toLanguageCode } = params;\n    result = await invokeRequest(new GramJs.messages.TranslateText({\n      peer: buildInputPeer(chat.id, chat.accessHash),\n      id: messageIds,\n      toLang: toLanguageCode,\n    }));\n  } else {\n    const { text, toLanguageCode } = params;\n    result = await invokeRequest(new GramJs.messages.TranslateText({\n      text: text.map((t) => buildInputTextWithEntities(t)),\n      toLang: toLanguageCode,\n    }));\n  }\n\n  if (!result) return undefined;\n\n  const formattedText = result.result.map((r) => buildApiFormattedText(r));\n\n  if (isMessageTranslation) {\n    onUpdate({\n      '@type': 'updateMessageTranslations',\n      chatId: params.chat.id,\n      messageIds: params.messageIds,\n      translations: formattedText,\n      toLanguageCode: params.toLanguageCode,\n    });\n  }\n\n  return formattedText;\n}\n\nfunction handleMultipleLocalMessagesUpdate(\n  localMessages: Record<string, ApiMessage>, update: GramJs.TypeUpdates,\n) {\n  if (!('updates' in update)) {\n    handleGramJsUpdate(update);\n    return;\n  }\n\n  update.updates.forEach((u) => {\n    if (u instanceof GramJs.UpdateMessageID) {\n      const localMessage = localMessages[u.randomId.toString()];\n      handleLocalMessageUpdate(localMessage, u);\n    } else {\n      handleGramJsUpdate(u);\n    }\n  });\n}\n\nfunction handleLocalMessageUpdate(localMessage: ApiMessage, update: GramJs.TypeUpdates) {\n  let messageUpdate;\n  if (update instanceof GramJs.UpdateShortSentMessage || update instanceof GramJs.UpdateMessageID) {\n    messageUpdate = update;\n  } else if ('updates' in update) {\n    messageUpdate = update.updates.find((u): u is GramJs.UpdateMessageID => u instanceof GramJs.UpdateMessageID);\n  }\n\n  if (!messageUpdate) {\n    handleGramJsUpdate(update);\n    return;\n  }\n\n  let newContent: MediaContent | undefined;\n  if (messageUpdate instanceof GramJs.UpdateShortSentMessage) {\n    if (localMessage.content.text && messageUpdate.entities) {\n      newContent = {\n        text: buildMessageTextContent(localMessage.content.text.text, messageUpdate.entities),\n      };\n    }\n    if (messageUpdate.media) {\n      newContent = {\n        ...newContent,\n        ...buildMessageMediaContent(messageUpdate.media),\n      };\n    }\n\n    const mtpMessage = buildMessageFromUpdate(messageUpdate.id, localMessage.chatId, messageUpdate);\n    addMessageToLocalDb(mtpMessage);\n  }\n\n  // Edge case for \"Send When Online\"\n  const isSentBefore = 'date' in messageUpdate && messageUpdate.date * 1000 < Date.now() + getServerTimeOffset() * 1000;\n\n  onUpdate({\n    '@type': localMessage.isScheduled && !isSentBefore\n      ? 'updateScheduledMessageSendSucceeded'\n      : 'updateMessageSendSucceeded',\n    chatId: localMessage.chatId,\n    localId: localMessage.id,\n    message: {\n      ...localMessage,\n      ...(newContent && {\n        content: {\n          ...localMessage.content,\n          ...newContent,\n        },\n      }),\n      id: messageUpdate.id,\n      sendingState: undefined,\n      ...('date' in messageUpdate && { date: messageUpdate.date }),\n    },\n  });\n\n  handleGramJsUpdate(update);\n}\n\nexport async function fetchOutboxReadDate({ chat, messageId }: { chat: ApiChat; messageId: number }) {\n  const { id, accessHash } = chat;\n  const peer = buildInputPeer(id, accessHash);\n\n  const result = await invokeRequest(new GramJs.messages.GetOutboxReadDate({\n    peer: peer as GramJs.TypeInputPeer,\n    msgId: messageId,\n  }), { shouldThrow: true });\n\n  if (!result) return undefined;\n\n  return { date: result.date };\n}\n\nexport async function fetchQuickReplies() {\n  const result = await invokeRequest(new GramJs.messages.GetQuickReplies({}));\n  if (!result || result instanceof GramJs.messages.QuickRepliesNotModified) return undefined;\n\n  updateLocalDb(result);\n\n  const messages = result.messages.map(buildApiMessage).filter(Boolean);\n  dispatchThreadInfoUpdates(result.messages);\n\n  const chats = result.chats.map((c) => buildApiChatFromPreview(c)).filter(Boolean);\n  const users = result.users.map(buildApiUser).filter(Boolean);\n\n  const quickReplies = result.quickReplies.map(buildApiQuickReply);\n\n  return {\n    messages,\n    chats,\n    users,\n    quickReplies,\n  };\n}\n\nexport async function sendQuickReply({\n  chat,\n  shortcutId,\n}: {\n  chat: ApiChat;\n  shortcutId: number;\n}) {\n  // Remove this request when the client fully supports quick replies and caches them\n  const messages = await invokeRequest(new GramJs.messages.GetQuickReplyMessages({\n    shortcutId,\n  }));\n  if (!messages || messages instanceof GramJs.messages.MessagesNotModified) return;\n\n  const ids = messages.messages.map((m) => m.id);\n  const randomIds = ids.map(generateRandomBigInt);\n\n  const result = await invokeRequest(new GramJs.messages.SendQuickReplyMessages({\n    peer: buildInputPeer(chat.id, chat.accessHash),\n    shortcutId,\n    id: ids,\n    randomId: randomIds,\n  }), {\n    shouldIgnoreUpdates: true,\n  });\n\n  if (!result) return;\n\n  // Hack to prevent client from thinking that those messages were local\n  if ('updates' in result) {\n    const filteredUpdates = result.updates\n      .filter((u): u is GramJs.UpdateMessageID => !(u instanceof GramJs.UpdateMessageID));\n    result.updates = filteredUpdates;\n  }\n\n  handleGramJsUpdate(result);\n}\n\nexport async function exportMessageLink({\n  id, chat, shouldIncludeThread, shouldIncludeGrouped,\n}: {\n  id: number;\n  chat: ApiChat;\n  shouldIncludeThread?: boolean;\n  shouldIncludeGrouped?: boolean;\n}) {\n  const result = await invokeRequest(new GramJs.channels.ExportMessageLink({\n    channel: buildInputEntity(chat.id, chat.accessHash) as GramJs.InputChannel,\n    id,\n    thread: shouldIncludeThread || undefined,\n    grouped: shouldIncludeGrouped || undefined,\n  }));\n\n  return result?.link;\n}\n","import BigInt from 'big-integer';\nimport { Api as GramJs } from '../../../lib/gramjs';\n\nimport type {\n  ApiChat, ApiInputStorePaymentPurpose, ApiPeer, ApiRequestInputInvoice,\n  ApiThemeParameters,\n  OnApiUpdate,\n} from '../../types';\n\nimport { DEBUG } from '../../../config';\nimport { buildApiChatFromPreview } from '../apiBuilders/chats';\nimport {\n  buildApiBoost,\n  buildApiBoostsStatus,\n  buildApiCheckedGiftCode,\n  buildApiGiveawayInfo,\n  buildApiInvoiceFromForm,\n  buildApiMyBoost,\n  buildApiPaymentForm,\n  buildApiPremiumGiftCodeOption,\n  buildApiPremiumPromo,\n  buildApiReceipt,\n  buildApiStarsTransaction,\n  buildApiStarTopupOption,\n  buildShippingOptions,\n} from '../apiBuilders/payments';\nimport { buildApiUser } from '../apiBuilders/users';\nimport {\n  buildInputInvoice, buildInputPeer, buildInputStorePaymentPurpose, buildInputThemeParams, buildShippingInfo,\n} from '../gramjsBuilders';\nimport {\n  addEntitiesToLocalDb,\n  addWebDocumentToLocalDb,\n  deserializeBytes,\n  serializeBytes,\n} from '../helpers';\nimport localDb from '../localDb';\nimport { handleGramJsUpdate, invokeRequest } from './client';\nimport { getTemporaryPaymentPassword } from './twoFaSettings';\n\nlet onUpdate: OnApiUpdate;\n\nexport function init(_onUpdate: OnApiUpdate) {\n  onUpdate = _onUpdate;\n}\n\nexport async function validateRequestedInfo({\n  inputInvoice,\n  requestInfo,\n  shouldSave,\n}: {\n  inputInvoice: ApiRequestInputInvoice;\n  requestInfo: GramJs.TypePaymentRequestedInfo;\n  shouldSave?: boolean;\n}): Promise<{\n    id: string;\n    shippingOptions: any;\n  } | undefined> {\n  const result = await invokeRequest(new GramJs.payments.ValidateRequestedInfo({\n    invoice: buildInputInvoice(inputInvoice),\n    save: shouldSave || undefined,\n    info: buildShippingInfo(requestInfo),\n  }));\n  if (!result) {\n    return undefined;\n  }\n\n  const { id, shippingOptions } = result;\n  if (!id) {\n    return undefined;\n  }\n\n  return {\n    id,\n    shippingOptions: buildShippingOptions(shippingOptions),\n  };\n}\n\nexport async function sendPaymentForm({\n  inputInvoice,\n  formId,\n  requestedInfoId,\n  shippingOptionId,\n  credentials,\n  savedCredentialId,\n  temporaryPassword,\n  tipAmount,\n}: {\n  inputInvoice: ApiRequestInputInvoice;\n  formId: string;\n  credentials: any;\n  requestedInfoId?: string;\n  shippingOptionId?: string;\n  savedCredentialId?: string;\n  temporaryPassword?: string;\n  tipAmount?: number;\n}) {\n  const inputCredentials = temporaryPassword && savedCredentialId\n    ? new GramJs.InputPaymentCredentialsSaved({\n      id: savedCredentialId,\n      tmpPassword: deserializeBytes(temporaryPassword),\n    })\n    : new GramJs.InputPaymentCredentials({\n      save: credentials.save,\n      data: new GramJs.DataJSON({ data: JSON.stringify(credentials.data) }),\n    });\n  const result = await invokeRequest(new GramJs.payments.SendPaymentForm({\n    formId: BigInt(formId),\n    invoice: buildInputInvoice(inputInvoice),\n    requestedInfoId,\n    shippingOptionId,\n    credentials: inputCredentials,\n    ...(tipAmount && { tipAmount: BigInt(tipAmount) }),\n  }));\n\n  if (!result) return false;\n\n  if (result instanceof GramJs.payments.PaymentVerificationNeeded) {\n    onUpdate({\n      '@type': 'updatePaymentVerificationNeeded',\n      url: result.url,\n    });\n\n    return undefined;\n  } else {\n    handleGramJsUpdate(result.updates);\n  }\n\n  return Boolean(result);\n}\n\nexport async function sendStarPaymentForm({\n  formId,\n  inputInvoice,\n}: {\n  formId: string;\n  inputInvoice: ApiRequestInputInvoice;\n}) {\n  const result = await invokeRequest(new GramJs.payments.SendStarsForm({\n    formId: BigInt(formId),\n    invoice: buildInputInvoice(inputInvoice),\n  }));\n\n  if (!result) return false;\n\n  if (result instanceof GramJs.payments.PaymentVerificationNeeded) {\n    if (DEBUG) {\n      // eslint-disable-next-line no-console\n      console.warn('Unexpected PaymentVerificationNeeded in sendStarsForm');\n    }\n\n    return undefined;\n  } else {\n    handleGramJsUpdate(result.updates);\n  }\n\n  return Boolean(result);\n}\n\nexport async function getPaymentForm(inputInvoice: ApiRequestInputInvoice, theme?: ApiThemeParameters) {\n  const result = await invokeRequest(new GramJs.payments.GetPaymentForm({\n    invoice: buildInputInvoice(inputInvoice),\n    themeParams: theme ? buildInputThemeParams(theme) : undefined,\n  }));\n\n  if (!result) {\n    return undefined;\n  }\n\n  if (result.photo) {\n    addWebDocumentToLocalDb(result.photo);\n  }\n\n  addEntitiesToLocalDb(result.users);\n\n  return {\n    form: buildApiPaymentForm(result),\n    invoice: buildApiInvoiceFromForm(result),\n    users: result.users.map(buildApiUser).filter(Boolean),\n  };\n}\n\nexport async function getReceipt(chat: ApiChat, msgId: number) {\n  const result = await invokeRequest(new GramJs.payments.GetPaymentReceipt({\n    peer: buildInputPeer(chat.id, chat.accessHash),\n    msgId,\n  }));\n\n  if (!result) {\n    return undefined;\n  }\n\n  addEntitiesToLocalDb(result.users);\n\n  return {\n    receipt: buildApiReceipt(result),\n    users: result.users.map(buildApiUser).filter(Boolean),\n  };\n}\n\nexport async function fetchPremiumPromo() {\n  const result = await invokeRequest(new GramJs.help.GetPremiumPromo());\n  if (!result) return undefined;\n\n  addEntitiesToLocalDb(result.users);\n\n  const users = result.users.map(buildApiUser).filter(Boolean);\n  result.videos.forEach((video) => {\n    if (video instanceof GramJs.Document) {\n      localDb.documents[video.id.toString()] = video;\n    }\n  });\n\n  return {\n    promo: buildApiPremiumPromo(result),\n    users,\n  };\n}\n\nexport async function fetchTemporaryPaymentPassword(password: string) {\n  const result = await getTemporaryPaymentPassword(password);\n\n  if (!result) {\n    return undefined;\n  }\n\n  if ('error' in result) {\n    return result;\n  }\n\n  return {\n    value: serializeBytes(result.tmpPassword),\n    validUntil: result.validUntil,\n  };\n}\n\nexport async function fetchMyBoosts() {\n  const result = await invokeRequest(new GramJs.premium.GetMyBoosts());\n\n  if (!result) return undefined;\n\n  addEntitiesToLocalDb(result.users);\n  addEntitiesToLocalDb(result.chats);\n\n  const users = result.users.map(buildApiUser).filter(Boolean);\n  const chats = result.chats.map((c) => buildApiChatFromPreview(c)).filter(Boolean);\n  const boosts = result.myBoosts.map(buildApiMyBoost);\n\n  return {\n    users,\n    chats,\n    boosts,\n  };\n}\n\nexport async function applyBoost({\n  chat,\n  slots,\n} : {\n  chat: ApiChat;\n  slots: number[];\n}) {\n  const result = await invokeRequest(new GramJs.premium.ApplyBoost({\n    peer: buildInputPeer(chat.id, chat.accessHash),\n    slots,\n  }));\n\n  if (!result) return undefined;\n\n  addEntitiesToLocalDb(result.users);\n  addEntitiesToLocalDb(result.chats);\n\n  const users = result.users.map(buildApiUser).filter(Boolean);\n  const chats = result.chats.map((c) => buildApiChatFromPreview(c)).filter(Boolean);\n  const boosts = result.myBoosts.map(buildApiMyBoost);\n\n  return {\n    users,\n    chats,\n    boosts,\n  };\n}\n\nexport async function fetchBoostStatus({\n  chat,\n}: {\n  chat: ApiChat;\n}) {\n  const result = await invokeRequest(new GramJs.premium.GetBoostsStatus({\n    peer: buildInputPeer(chat.id, chat.accessHash),\n  }));\n\n  if (!result) {\n    return undefined;\n  }\n\n  return buildApiBoostsStatus(result);\n}\n\nexport async function fetchBoostList({\n  chat,\n  isGifts,\n  offset = '',\n  limit,\n}: {\n  chat: ApiChat;\n  isGifts?: boolean;\n  offset?: string;\n  limit?: number;\n}) {\n  const result = await invokeRequest(new GramJs.premium.GetBoostsList({\n    peer: buildInputPeer(chat.id, chat.accessHash),\n    gifts: isGifts || undefined,\n    offset,\n    limit,\n  }));\n\n  if (!result) {\n    return undefined;\n  }\n\n  addEntitiesToLocalDb(result.users);\n\n  const users = result.users.map(buildApiUser).filter(Boolean);\n\n  const boostList = result.boosts.map(buildApiBoost);\n\n  return {\n    count: result.count,\n    boostList,\n    users,\n    nextOffset: result.nextOffset,\n  };\n}\n\nexport async function fetchGiveawayInfo({\n  peer,\n  messageId,\n}: {\n  peer: ApiPeer;\n  messageId: number;\n}) {\n  const result = await invokeRequest(new GramJs.payments.GetGiveawayInfo({\n    peer: buildInputPeer(peer.id, peer.accessHash),\n    msgId: messageId,\n  }));\n\n  if (!result) {\n    return undefined;\n  }\n\n  return buildApiGiveawayInfo(result);\n}\n\nexport async function checkGiftCode({\n  slug,\n}: {\n  slug: string;\n}) {\n  const result = await invokeRequest(new GramJs.payments.CheckGiftCode({\n    slug,\n  }));\n\n  if (!result) {\n    return undefined;\n  }\n\n  addEntitiesToLocalDb(result.users);\n  addEntitiesToLocalDb(result.chats);\n\n  return {\n    code: buildApiCheckedGiftCode(result),\n    users: result.users.map(buildApiUser).filter(Boolean),\n    chats: result.chats.map((c) => buildApiChatFromPreview(c)).filter(Boolean),\n  };\n}\n\nexport function applyGiftCode({\n  slug,\n}: {\n  slug: string;\n}) {\n  return invokeRequest(new GramJs.payments.ApplyGiftCode({\n    slug,\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n\nexport async function getPremiumGiftCodeOptions({\n  chat,\n}: {\n  chat?: ApiChat;\n}) {\n  const result = await invokeRequest(new GramJs.payments.GetPremiumGiftCodeOptions({\n    boostPeer: chat && buildInputPeer(chat.id, chat.accessHash),\n  }));\n\n  if (!result) {\n    return undefined;\n  }\n\n  return result.map(buildApiPremiumGiftCodeOption);\n}\n\nexport function launchPrepaidGiveaway({\n  chat,\n  giveawayId,\n  paymentPurpose,\n}: {\n  chat: ApiChat;\n  giveawayId: string;\n  paymentPurpose: ApiInputStorePaymentPurpose;\n}) {\n  return invokeRequest(new GramJs.payments.LaunchPrepaidGiveaway({\n    peer: buildInputPeer(chat.id, chat.accessHash),\n    giveawayId: BigInt(giveawayId),\n    purpose: buildInputStorePaymentPurpose(paymentPurpose),\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n\nexport async function fetchStarsStatus() {\n  const result = await invokeRequest(new GramJs.payments.GetStarsStatus({\n    peer: new GramJs.InputPeerSelf(),\n  }));\n\n  if (!result) {\n    return undefined;\n  }\n\n  const users = result.users.map(buildApiUser).filter(Boolean);\n  const chats = result.chats.map((c) => buildApiChatFromPreview(c)).filter(Boolean);\n\n  return {\n    users,\n    chats,\n    nextOffset: result.nextOffset,\n    history: result.history.map(buildApiStarsTransaction),\n    balance: result.balance.toJSNumber(),\n  };\n}\n\nexport async function fetchStarsTransactions({\n  offset,\n  isInbound,\n  isOutbound,\n}: {\n  offset?: string;\n  isInbound?: true;\n  isOutbound?: true;\n}) {\n  const result = await invokeRequest(new GramJs.payments.GetStarsTransactions({\n    peer: new GramJs.InputPeerSelf(),\n    offset,\n    inbound: isInbound,\n    outbound: isOutbound,\n  }));\n\n  if (!result) {\n    return undefined;\n  }\n\n  const users = result.users.map(buildApiUser).filter(Boolean);\n  const chats = result.chats.map((c) => buildApiChatFromPreview(c)).filter(Boolean);\n\n  return {\n    users,\n    chats,\n    nextOffset: result.nextOffset,\n    history: result.history.map(buildApiStarsTransaction),\n    balance: result.balance.toJSNumber(),\n  };\n}\n\nexport async function fetchStarsTopupOptions() {\n  const result = await invokeRequest(new GramJs.payments.GetStarsTopupOptions());\n\n  if (!result) {\n    return undefined;\n  }\n\n  return result.map(buildApiStarTopupOption);\n}\n","import type bigInt from 'big-integer';\nimport BigInt from 'big-integer';\nimport AuthKey from '../../../lib/gramjs/crypto/AuthKey';\nimport Logger from '../../../lib/gramjs/extensions/Logger';\nimport Helpers from '../../../lib/gramjs/Helpers';\nimport MTProtoState from '../../../lib/gramjs/network/MTProtoState';\n\ntype DhConfig = {\n  p: number[];\n  g: number;\n  random: number[];\n};\n\nlet currentPhoneCallState: PhoneCallState | undefined;\n\nclass PhoneCallState {\n  private state?: MTProtoState;\n\n  private seq = 0;\n\n  private gA?: bigInt.BigInteger;\n\n  private gB: any;\n\n  private p?: bigInt.BigInteger;\n\n  private random?: bigInt.BigInteger;\n\n  private waitForState: Promise<void>;\n\n  private resolveState?: VoidFunction;\n\n  constructor(\n    private isOutgoing: boolean,\n  ) {\n    this.waitForState = new Promise<void>((resolve) => {\n      this.resolveState = resolve;\n    });\n  }\n\n  async requestCall({ p, g, random }: DhConfig) {\n    const pBN = Helpers.readBigIntFromBuffer(Buffer.from(p), false);\n    const randomBN = Helpers.readBigIntFromBuffer(Buffer.from(random), false);\n\n    const gA = Helpers.modExp(BigInt(g), randomBN, pBN);\n\n    this.gA = gA;\n    this.p = pBN;\n    this.random = randomBN;\n\n    const gAHash: Buffer = await Helpers.sha256(Helpers.getByteArray(gA));\n    return Array.from(gAHash);\n  }\n\n  acceptCall({ p, g, random }: DhConfig) {\n    const pLast = Helpers.readBigIntFromBuffer(p, false);\n    const randomLast = Helpers.readBigIntFromBuffer(random, false);\n\n    const gB = Helpers.modExp(BigInt(g), randomLast, pLast);\n    this.gB = gB;\n    this.p = pLast;\n    this.random = randomLast;\n\n    return Array.from(Helpers.getByteArray(gB));\n  }\n\n  async confirmCall(gAOrB: number[], emojiData: Uint16Array, emojiOffsets: number[]) {\n    if (this.isOutgoing) {\n      this.gB = Helpers.readBigIntFromBuffer(Buffer.from(gAOrB), false);\n    } else {\n      this.gA = Helpers.readBigIntFromBuffer(Buffer.from(gAOrB), false);\n    }\n    const authKey = Helpers.modExp(\n      !this.isOutgoing ? this.gA : this.gB,\n      this.random,\n      this.p,\n    );\n    const fingerprint: Buffer = await Helpers.sha1(Helpers.getByteArray(authKey));\n    const keyFingerprint = Helpers.readBigIntFromBuffer(fingerprint.slice(-8).reverse(), false);\n\n    const emojis = await generateEmojiFingerprint(\n      Helpers.getByteArray(authKey),\n      Helpers.getByteArray(this.gA),\n      emojiData,\n      emojiOffsets,\n    );\n\n    const key = new AuthKey();\n    await key.setKey(Helpers.getByteArray(authKey));\n    this.state = new MTProtoState(key, new Logger(), true, this.isOutgoing);\n    this.resolveState!();\n\n    return { gA: Array.from(Helpers.getByteArray(this.gA)), keyFingerprint: keyFingerprint.toString(), emojis };\n  }\n\n  async encode(data: string) {\n    if (!this.state) return undefined;\n\n    const seqArray = new Uint32Array(1);\n    seqArray[0] = this.seq++;\n    const encodedData = await this.state.encryptMessageData(\n      Buffer.concat([Helpers.convertToLittle(seqArray), Buffer.from(data)]),\n    );\n    return Array.from(encodedData);\n  }\n\n  async decode(data: number[]): Promise<any> {\n    if (!this.state) {\n      return this.waitForState.then(() => {\n        return this.decode(data);\n      });\n    }\n\n    const message = await this.state.decryptMessageData(Buffer.from(data));\n\n    return JSON.parse(message.toString());\n  }\n}\n\n// https://github.com/TelegramV/App/blob/ead52320975362139cabad18cf8346f98c349a22/src/js/MTProto/Calls/Internal.js#L72\nfunction computeEmojiIndex(bytes: Uint8Array) {\n  return ((BigInt(bytes[0]).and(0x7F)).shiftLeft(56))\n    .or((BigInt(bytes[1]).shiftLeft(48)))\n    .or((BigInt(bytes[2]).shiftLeft(40)))\n    .or((BigInt(bytes[3]).shiftLeft(32)))\n    .or((BigInt(bytes[4]).shiftLeft(24)))\n    .or((BigInt(bytes[5]).shiftLeft(16)))\n    .or((BigInt(bytes[6]).shiftLeft(8)))\n    .or((BigInt(bytes[7])));\n}\n\nexport async function generateEmojiFingerprint(\n  authKey: Uint8Array, gA: Uint8Array, emojiData: Uint16Array, emojiOffsets: number[],\n) {\n  const hash = await Helpers.sha256(Buffer.concat([new Uint8Array(authKey), new Uint8Array(gA)]));\n  const result = [];\n  const emojiCount = emojiOffsets.length - 1;\n  const kPartSize = 8;\n  for (let partOffset = 0; partOffset !== hash.byteLength; partOffset += kPartSize) {\n    const value = computeEmojiIndex(hash.subarray(partOffset, partOffset + kPartSize));\n    const index = value.modPow(1, emojiCount).toJSNumber();\n    const offset = emojiOffsets[index];\n    const size = emojiOffsets[index + 1] - offset;\n    result.push(String.fromCharCode(...emojiData.subarray(offset, offset + size)));\n  }\n  return result.join('');\n}\n\nexport function createPhoneCallState(params: ConstructorParameters<typeof PhoneCallState>) {\n  currentPhoneCallState = new PhoneCallState(...params);\n}\n\nexport function destroyPhoneCallState() {\n  currentPhoneCallState = undefined;\n}\n\ntype FunctionPropertyOf<T> = {\n  [P in keyof T]: T[P] extends Function\n    ? P\n    : never\n}[keyof T];\n\ntype ParamsOf<T extends FunctionPropertyOf<PhoneCallState>> = Parameters<PhoneCallState[T]>;\ntype ReturnTypeOf<T extends FunctionPropertyOf<PhoneCallState>> = ReturnType<PhoneCallState[T]>;\n\nexport function encodePhoneCallData(params: ParamsOf<'encode'>): ReturnTypeOf<'encode'> {\n  return currentPhoneCallState!.encode(...params);\n}\n\nexport async function decodePhoneCallData(params: ParamsOf<'decode'>) {\n  if (!currentPhoneCallState) {\n    return undefined;\n  }\n  const result = await currentPhoneCallState.decode(...params);\n  return result;\n}\n\nexport function confirmPhoneCall(params: ParamsOf<'confirmCall'>): ReturnTypeOf<'confirmCall'> {\n  return currentPhoneCallState!.confirmCall(...params);\n}\n\nexport function acceptPhoneCall(params: ParamsOf<'acceptCall'>): ReturnTypeOf<'acceptCall'> {\n  return currentPhoneCallState!.acceptCall(...params);\n}\n\nexport function requestPhoneCall(params: ParamsOf<'requestCall'>): ReturnTypeOf<'requestCall'> {\n  return currentPhoneCallState!.requestCall(...params);\n}\n","import BigInt from 'big-integer';\nimport { Api as GramJs } from '../../../lib/gramjs';\n\nimport type {\n  ApiChat, ApiReaction, ApiSticker,\n} from '../../types';\n\nimport {\n  API_GENERAL_ID_LIMIT,\n  REACTION_LIST_LIMIT,\n  RECENT_REACTIONS_LIMIT,\n  TOP_REACTIONS_LIMIT,\n} from '../../../config';\nimport { split } from '../../../util/iteratees';\nimport { buildApiChatFromPreview } from '../apiBuilders/chats';\nimport {\n  buildApiAvailableEffect,\n  buildApiAvailableReaction,\n  buildApiReaction,\n  buildApiSavedReactionTag,\n  buildMessagePeerReaction,\n} from '../apiBuilders/reactions';\nimport { buildStickerFromDocument } from '../apiBuilders/symbols';\nimport { buildApiUser } from '../apiBuilders/users';\nimport { buildInputPeer, buildInputReaction } from '../gramjsBuilders';\nimport { addEntitiesToLocalDb } from '../helpers';\nimport localDb from '../localDb';\nimport { invokeRequest } from './client';\n\nexport function sendWatchingEmojiInteraction({\n  chat,\n  emoticon,\n}: {\n  chat: ApiChat; emoticon: string;\n}) {\n  return invokeRequest(new GramJs.messages.SetTyping({\n    peer: buildInputPeer(chat.id, chat.accessHash),\n    action: new GramJs.SendMessageEmojiInteractionSeen({\n      emoticon,\n    }),\n  }), {\n    abortControllerChatId: chat.id,\n  });\n}\n\nexport function sendEmojiInteraction({\n  chat,\n  emoticon,\n  messageId,\n  timestamps,\n}: {\n  chat: ApiChat; messageId: number; emoticon: string; timestamps: number[];\n}) {\n  return invokeRequest(new GramJs.messages.SetTyping({\n    peer: buildInputPeer(chat.id, chat.accessHash),\n    action: new GramJs.SendMessageEmojiInteraction({\n      emoticon,\n      msgId: messageId,\n      interaction: new GramJs.DataJSON({\n        data: JSON.stringify({\n          v: 1,\n          a: timestamps.map((t: number) => ({\n            t,\n            i: 1,\n          })),\n        }),\n      }),\n    }),\n  }), {\n    abortControllerChatId: chat.id,\n  });\n}\n\nexport async function fetchAvailableReactions() {\n  const result = await invokeRequest(new GramJs.messages.GetAvailableReactions({}));\n\n  if (!result || result instanceof GramJs.messages.AvailableReactionsNotModified) {\n    return undefined;\n  }\n\n  result.reactions.forEach((reaction) => {\n    if (reaction.staticIcon instanceof GramJs.Document) {\n      localDb.documents[String(reaction.staticIcon.id)] = reaction.staticIcon;\n    }\n    if (reaction.selectAnimation instanceof GramJs.Document) {\n      localDb.documents[String(reaction.selectAnimation.id)] = reaction.selectAnimation;\n    }\n    if (reaction.aroundAnimation instanceof GramJs.Document) {\n      localDb.documents[String(reaction.aroundAnimation.id)] = reaction.aroundAnimation;\n    }\n    if (reaction.appearAnimation instanceof GramJs.Document) {\n      localDb.documents[String(reaction.appearAnimation.id)] = reaction.appearAnimation;\n    }\n    if (reaction.centerIcon instanceof GramJs.Document) {\n      localDb.documents[String(reaction.centerIcon.id)] = reaction.centerIcon;\n    }\n  });\n\n  return result.reactions.map(buildApiAvailableReaction);\n}\n\nexport async function fetchAvailableEffects() {\n  const result = await invokeRequest(new GramJs.messages.GetAvailableEffects({}));\n\n  if (!result || result instanceof GramJs.messages.AvailableEffectsNotModified) {\n    return undefined;\n  }\n\n  const documentsMap = new Map(result.documents.map((doc) => [String(doc.id), doc]));\n\n  result.documents.forEach((document) => {\n    if (document instanceof GramJs.Document) {\n      localDb.documents[String(document.id)] = document;\n    }\n  });\n\n  const effects = result.effects.map(buildApiAvailableEffect);\n\n  const stickers : ApiSticker[] = [];\n  const emojis : ApiSticker[] = [];\n\n  for (const effect of effects) {\n    if (effect.effectAnimationId) {\n      const document = documentsMap.get(effect.effectStickerId);\n      const emoji = document && buildStickerFromDocument(document, false, effect.isPremium);\n      if (emoji) emojis.push(emoji);\n    } else {\n      const document = localDb.documents[effect.effectStickerId];\n      const sticker = buildStickerFromDocument(document);\n      if (sticker) { stickers.push(sticker); }\n    }\n  }\n\n  return { effects, emojis, stickers };\n}\n\nexport function sendReaction({\n  chat, messageId, reactions, shouldAddToRecent,\n}: {\n  chat: ApiChat;\n  messageId: number;\n  reactions?: ApiReaction[];\n  shouldAddToRecent?: boolean;\n}) {\n  return invokeRequest(new GramJs.messages.SendReaction({\n    reaction: reactions?.map((r) => buildInputReaction(r)),\n    peer: buildInputPeer(chat.id, chat.accessHash),\n    msgId: messageId,\n    ...(shouldAddToRecent && { addToRecent: true }),\n  }), {\n    shouldReturnTrue: true,\n    shouldThrow: true,\n  });\n}\n\nexport function fetchMessageReactions({\n  ids, chat,\n}: {\n  ids: number[]; chat: ApiChat;\n}) {\n  const chunks = split(ids, API_GENERAL_ID_LIMIT);\n  chunks.forEach((chunkIds) => {\n    invokeRequest(new GramJs.messages.GetMessagesReactions({\n      id: chunkIds,\n      peer: buildInputPeer(chat.id, chat.accessHash),\n    }), {\n      shouldReturnTrue: true,\n      abortControllerChatId: chat.id,\n    });\n  });\n}\n\nexport async function fetchMessageReactionsList({\n  chat, messageId, reaction, offset,\n}: {\n  chat: ApiChat; messageId: number; reaction?: ApiReaction; offset?: string;\n}) {\n  const result = await invokeRequest(new GramJs.messages.GetMessageReactionsList({\n    peer: buildInputPeer(chat.id, chat.accessHash),\n    id: messageId,\n    ...(reaction && { reaction: buildInputReaction(reaction) }),\n    limit: REACTION_LIST_LIMIT,\n    ...(offset && { offset }),\n  }));\n\n  if (!result) {\n    return undefined;\n  }\n\n  addEntitiesToLocalDb(result.users);\n  addEntitiesToLocalDb(result.chats);\n\n  const { nextOffset, reactions, count } = result;\n\n  return {\n    users: result.users.map(buildApiUser).filter(Boolean),\n    chats: result.chats.map((c) => buildApiChatFromPreview(c)).filter(Boolean),\n    nextOffset,\n    reactions: reactions.map(buildMessagePeerReaction).filter(Boolean),\n    count,\n  };\n}\n\nexport function setDefaultReaction({\n  reaction,\n}: {\n  reaction: ApiReaction;\n}) {\n  return invokeRequest(new GramJs.messages.SetDefaultReaction({\n    reaction: buildInputReaction(reaction),\n  }));\n}\n\nexport async function fetchTopReactions({ hash = '0' }: { hash?: string }) {\n  const result = await invokeRequest(new GramJs.messages.GetTopReactions({\n    limit: TOP_REACTIONS_LIMIT,\n    hash: BigInt(hash),\n  }));\n\n  if (!result || result instanceof GramJs.messages.ReactionsNotModified) {\n    return undefined;\n  }\n\n  return {\n    hash: String(result.hash),\n    reactions: result.reactions.map(buildApiReaction).filter(Boolean),\n  };\n}\n\nexport async function fetchRecentReactions({ hash = '0' }: { hash?: string }) {\n  const result = await invokeRequest(new GramJs.messages.GetRecentReactions({\n    limit: RECENT_REACTIONS_LIMIT,\n    hash: BigInt(hash),\n  }));\n\n  if (!result || result instanceof GramJs.messages.ReactionsNotModified) {\n    return undefined;\n  }\n\n  return {\n    hash: String(result.hash),\n    reactions: result.reactions.map(buildApiReaction).filter(Boolean),\n  };\n}\n\nexport function clearRecentReactions() {\n  return invokeRequest(new GramJs.messages.ClearRecentReactions());\n}\n\nexport async function fetchDefaultTagReactions({ hash = '0' }: { hash?: string }) {\n  const result = await invokeRequest(new GramJs.messages.GetDefaultTagReactions({\n    hash: BigInt(hash),\n  }));\n\n  if (!result || result instanceof GramJs.messages.ReactionsNotModified) {\n    return undefined;\n  }\n\n  return {\n    hash: String(result.hash),\n    reactions: result.reactions.map(buildApiReaction).filter(Boolean),\n  };\n}\n\nexport async function fetchSavedReactionTags({ hash = '0' }: { hash?: string }) {\n  const result = await invokeRequest(new GramJs.messages.GetSavedReactionTags({ hash: BigInt(hash) }));\n\n  if (!result || result instanceof GramJs.messages.SavedReactionTagsNotModified) {\n    return undefined;\n  }\n\n  return {\n    hash: String(result.hash),\n    tags: result.tags.map(buildApiSavedReactionTag).filter(Boolean),\n  };\n}\n\nexport function updateSavedReactionTag({\n  reaction,\n  title,\n}: {\n  reaction: ApiReaction;\n  title?: string;\n}) {\n  return invokeRequest(new GramJs.messages.UpdateSavedReactionTag({\n    reaction: buildInputReaction(reaction),\n    title,\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n","import BigInt from 'big-integer';\nimport { Api as GramJs } from '../../../lib/gramjs';\n\nimport type { LANG_PACKS } from '../../../config';\nimport type { ApiInputPrivacyRules, ApiPrivacyKey, LangCode } from '../../../types';\nimport type {\n  ApiAppConfig,\n  ApiConfig,\n  ApiError,\n  ApiLanguage,\n  ApiNotifyException,\n  ApiPhoto,\n  ApiUser,\n} from '../../types';\n\nimport { BLOCKED_LIST_LIMIT, DEFAULT_LANG_PACK, MAX_INT_32 } from '../../../config';\nimport { buildCollectionByKey } from '../../../util/iteratees';\nimport { getServerTime } from '../../../util/serverTime';\nimport { buildAppConfig } from '../apiBuilders/appConfig';\nimport { buildApiChatFromPreview } from '../apiBuilders/chats';\nimport { buildApiPhoto, buildPrivacyRules } from '../apiBuilders/common';\nimport {\n  buildApiConfig,\n  buildApiCountryList,\n  buildApiLanguage,\n  buildApiNotifyException,\n  buildApiPeerColors,\n  buildApiSession,\n  buildApiTimezone,\n  buildApiWallpaper,\n  buildApiWebSession,\n  buildLangStrings,\n  oldBuildLangPack,\n  oldBuildLangPackString,\n} from '../apiBuilders/misc';\nimport { getApiChatIdFromMtpPeer } from '../apiBuilders/peers';\nimport { buildApiUser } from '../apiBuilders/users';\nimport {\n  buildInputEntity, buildInputPeer, buildInputPhoto,\n  buildInputPrivacyKey,\n  buildInputPrivacyRules,\n} from '../gramjsBuilders';\nimport { addEntitiesToLocalDb, addPhotoToLocalDb } from '../helpers';\nimport localDb from '../localDb';\nimport { getClient, invokeRequest, uploadFile } from './client';\nimport { ACCEPTABLE_USERNAME_ERRORS } from './management';\n\nconst BETA_LANG_CODES = ['ar', 'fa', 'id', 'ko', 'uz', 'en'];\n\nexport function updateProfile({\n  firstName,\n  lastName,\n  about,\n}: {\n  firstName?: string;\n  lastName?: string;\n  about?: string;\n}) {\n  return invokeRequest(new GramJs.account.UpdateProfile({\n    firstName: firstName || '',\n    lastName: lastName || '',\n    about: about || '',\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n\nexport async function checkUsername(username: string) {\n  try {\n    const result = await invokeRequest(new GramJs.account.CheckUsername({\n      username,\n    }), {\n      shouldThrow: true,\n    });\n\n    return { result, error: undefined };\n  } catch (error) {\n    const errorMessage = (error as ApiError).message;\n\n    if (ACCEPTABLE_USERNAME_ERRORS.has(errorMessage)) {\n      return {\n        result: false,\n        error: errorMessage,\n      };\n    }\n\n    throw error;\n  }\n}\n\nexport function updateUsername(username: string) {\n  return invokeRequest(new GramJs.account.UpdateUsername({ username }), {\n    shouldReturnTrue: true,\n  });\n}\n\nexport async function updateProfilePhoto(photo?: ApiPhoto, isFallback?: boolean) {\n  const photoId = photo ? buildInputPhoto(photo) : new GramJs.InputPhotoEmpty();\n  const result = await invokeRequest(new GramJs.photos.UpdateProfilePhoto({\n    id: photoId,\n    ...(isFallback ? { fallback: true } : undefined),\n  }));\n  if (!result) return undefined;\n\n  addEntitiesToLocalDb(result.users);\n  if (result.photo instanceof GramJs.Photo) {\n    addPhotoToLocalDb(result.photo);\n    return {\n      users: result.users.map(buildApiUser).filter(Boolean),\n      photo: buildApiPhoto(result.photo),\n    };\n  }\n  return undefined;\n}\n\nexport async function uploadProfilePhoto(\n  file: File, isFallback?: boolean, isVideo = false, videoTs = 0, bot?: ApiUser,\n) {\n  const inputFile = await uploadFile(file);\n  const result = await invokeRequest(new GramJs.photos.UploadProfilePhoto({\n    ...(bot ? { bot: buildInputPeer(bot.id, bot.accessHash) } : undefined),\n    ...(isVideo ? { video: inputFile, videoStartTs: videoTs } : { file: inputFile }),\n    ...(isFallback ? { fallback: true } : undefined),\n  }));\n\n  if (!result) return undefined;\n\n  addEntitiesToLocalDb(result.users);\n  if (result.photo instanceof GramJs.Photo) {\n    addPhotoToLocalDb(result.photo);\n    return {\n      users: result.users.map(buildApiUser).filter(Boolean),\n      photo: buildApiPhoto(result.photo),\n    };\n  }\n  return undefined;\n}\n\nexport async function uploadContactProfilePhoto({\n  file, isSuggest, user,\n}: {\n  file?: File;\n  isSuggest?: boolean;\n  user: ApiUser;\n}) {\n  const inputFile = file ? await uploadFile(file) : undefined;\n  const result = await invokeRequest(new GramJs.photos.UploadContactProfilePhoto({\n    userId: buildInputEntity(user.id, user.accessHash) as GramJs.InputUser,\n    file: inputFile,\n    ...(isSuggest ? { suggest: true } : { save: true }),\n  }));\n\n  if (!result) return undefined;\n\n  addEntitiesToLocalDb(result.users);\n\n  const users = result.users.map(buildApiUser).filter(Boolean);\n\n  if (result.photo instanceof GramJs.Photo) {\n    addPhotoToLocalDb(result.photo);\n    return {\n      users,\n      photo: buildApiPhoto(result.photo),\n    };\n  }\n\n  return {\n    users,\n    photo: undefined,\n  };\n}\n\nexport async function deleteProfilePhotos(photos: ApiPhoto[]) {\n  const photoIds = photos.map(buildInputPhoto).filter(Boolean);\n  const isDeleted = await invokeRequest(new GramJs.photos.DeletePhotos({ id: photoIds }), {\n    shouldReturnTrue: true,\n  });\n  if (isDeleted) {\n    photos.forEach((photo) => {\n      delete localDb.photos[photo.id];\n    });\n  }\n  return isDeleted;\n}\n\nexport async function fetchWallpapers() {\n  const result = await invokeRequest(new GramJs.account.GetWallPapers({ hash: BigInt('0') }));\n\n  if (!result || result instanceof GramJs.account.WallPapersNotModified) {\n    return undefined;\n  }\n\n  const filteredWallpapers = result.wallpapers.filter((wallpaper) => {\n    if (\n      !(wallpaper instanceof GramJs.WallPaper)\n      || !(wallpaper.document instanceof GramJs.Document)\n    ) {\n      return false;\n    }\n\n    return !wallpaper.pattern && wallpaper.document.mimeType !== 'application/x-tgwallpattern';\n  }) as GramJs.WallPaper[];\n\n  filteredWallpapers.forEach((wallpaper) => {\n    localDb.documents[String(wallpaper.document.id)] = wallpaper.document as GramJs.Document;\n  });\n\n  return {\n    wallpapers: filteredWallpapers.map(buildApiWallpaper).filter(Boolean),\n  };\n}\n\nexport async function uploadWallpaper(file: File) {\n  const inputFile = await uploadFile(file);\n\n  const result = await invokeRequest(new GramJs.account.UploadWallPaper({\n    file: inputFile,\n    mimeType: file.type,\n    settings: new GramJs.WallPaperSettings(),\n  }));\n\n  if (!result || !(result instanceof GramJs.WallPaper)) {\n    return undefined;\n  }\n\n  const wallpaper = buildApiWallpaper(result);\n  if (!wallpaper) {\n    return undefined;\n  }\n\n  localDb.documents[String(result.document.id)] = result.document as GramJs.Document;\n\n  return { wallpaper };\n}\n\nexport async function fetchBlockedUsers({\n  isOnlyStories,\n}: {\n  isOnlyStories?: true;\n}) {\n  const result = await invokeRequest(new GramJs.contacts.GetBlocked({\n    myStoriesFrom: isOnlyStories,\n    limit: BLOCKED_LIST_LIMIT,\n  }));\n  if (!result) {\n    return undefined;\n  }\n\n  updateLocalDb(result);\n\n  return {\n    users: result.users.map(buildApiUser).filter(Boolean),\n    chats: result.chats.map((chat) => buildApiChatFromPreview(chat)).filter(Boolean),\n    blockedIds: result.blocked.map((blocked) => getApiChatIdFromMtpPeer(blocked.peerId)),\n    totalCount: result instanceof GramJs.contacts.BlockedSlice ? result.count : result.blocked.length,\n  };\n}\n\nexport function blockUser({\n  user,\n  isOnlyStories,\n}: {\n  user: ApiUser;\n  isOnlyStories?: true;\n}) {\n  return invokeRequest(new GramJs.contacts.Block({\n    id: buildInputPeer(user.id, user.accessHash),\n    myStoriesFrom: isOnlyStories,\n  }));\n}\n\nexport function unblockUser({\n  user,\n  isOnlyStories,\n}: {\n  user: ApiUser;\n  isOnlyStories?: true;\n}) {\n  return invokeRequest(new GramJs.contacts.Unblock({\n    id: buildInputPeer(user.id, user.accessHash),\n    myStoriesFrom: isOnlyStories,\n  }));\n}\n\nexport async function fetchAuthorizations() {\n  const result = await invokeRequest(new GramJs.account.GetAuthorizations());\n  if (!result) {\n    return undefined;\n  }\n\n  return {\n    authorizations: buildCollectionByKey(result.authorizations.map(buildApiSession), 'hash'),\n    ttlDays: result.authorizationTtlDays,\n  };\n}\n\nexport function terminateAuthorization(hash: string) {\n  return invokeRequest(new GramJs.account.ResetAuthorization({ hash: BigInt(hash) }));\n}\n\nexport function terminateAllAuthorizations() {\n  return invokeRequest(new GramJs.auth.ResetAuthorizations());\n}\n\nexport async function fetchWebAuthorizations() {\n  const result = await invokeRequest(new GramJs.account.GetWebAuthorizations());\n  if (!result) {\n    return undefined;\n  }\n  addEntitiesToLocalDb(result.users);\n\n  return {\n    users: result.users.map(buildApiUser).filter(Boolean),\n    webAuthorizations: buildCollectionByKey(result.authorizations.map(buildApiWebSession), 'hash'),\n  };\n}\n\nexport function terminateWebAuthorization(hash: string) {\n  return invokeRequest(new GramJs.account.ResetWebAuthorization({ hash: BigInt(hash) }));\n}\n\nexport function terminateAllWebAuthorizations() {\n  return invokeRequest(new GramJs.account.ResetWebAuthorizations());\n}\n\nexport async function fetchNotificationExceptions() {\n  const result = await invokeRequest(new GramJs.account.GetNotifyExceptions({\n    compareSound: true,\n  }), {\n    shouldIgnoreUpdates: true,\n  });\n\n  if (!(result instanceof GramJs.Updates || result instanceof GramJs.UpdatesCombined)) {\n    return undefined;\n  }\n\n  updateLocalDb(result);\n\n  return result.updates.reduce((acc, update) => {\n    if (!(update instanceof GramJs.UpdateNotifySettings && update.peer instanceof GramJs.NotifyPeer)) {\n      return acc;\n    }\n\n    acc.push(buildApiNotifyException(update.notifySettings, update.peer.peer));\n\n    return acc;\n  }, [] as ApiNotifyException[]);\n}\n\nexport async function fetchNotificationSettings() {\n  const [\n    isMutedContactSignUpNotification,\n    privateContactNotificationsSettings,\n    groupNotificationsSettings,\n    broadcastNotificationsSettings,\n  ] = await Promise.all([\n    invokeRequest(new GramJs.account.GetContactSignUpNotification()),\n    invokeRequest(new GramJs.account.GetNotifySettings({\n      peer: new GramJs.InputNotifyUsers(),\n    })),\n    invokeRequest(new GramJs.account.GetNotifySettings({\n      peer: new GramJs.InputNotifyChats(),\n    })),\n    invokeRequest(new GramJs.account.GetNotifySettings({\n      peer: new GramJs.InputNotifyBroadcasts(),\n    })),\n  ]);\n\n  if (!privateContactNotificationsSettings || !groupNotificationsSettings || !broadcastNotificationsSettings) {\n    return false;\n  }\n\n  const {\n    silent: privateSilent, muteUntil: privateMuteUntil, showPreviews: privateShowPreviews,\n  } = privateContactNotificationsSettings;\n  const {\n    silent: groupSilent, muteUntil: groupMuteUntil, showPreviews: groupShowPreviews,\n  } = groupNotificationsSettings;\n  const {\n    silent: broadcastSilent, muteUntil: broadcastMuteUntil, showPreviews: broadcastShowPreviews,\n  } = broadcastNotificationsSettings;\n\n  return {\n    hasContactJoinedNotifications: !isMutedContactSignUpNotification,\n    hasPrivateChatsNotifications: !(\n      privateSilent\n      || (typeof privateMuteUntil === 'number' && getServerTime() < privateMuteUntil)\n    ),\n    hasPrivateChatsMessagePreview: privateShowPreviews,\n    hasGroupNotifications: !(\n      groupSilent || (typeof groupMuteUntil === 'number'\n        && getServerTime() < groupMuteUntil)\n    ),\n    hasGroupMessagePreview: groupShowPreviews,\n    hasBroadcastNotifications: !(\n      broadcastSilent || (typeof broadcastMuteUntil === 'number'\n        && getServerTime() < broadcastMuteUntil)\n    ),\n    hasBroadcastMessagePreview: broadcastShowPreviews,\n  };\n}\n\nexport function updateContactSignUpNotification(isSilent: boolean) {\n  return invokeRequest(new GramJs.account.SetContactSignUpNotification({ silent: isSilent }));\n}\n\nexport function updateNotificationSettings(peerType: 'contact' | 'group' | 'broadcast', {\n  isSilent,\n  shouldShowPreviews,\n}: {\n  isSilent?: boolean;\n  shouldShowPreviews?: boolean;\n}) {\n  let peer: GramJs.TypeInputNotifyPeer;\n  if (peerType === 'contact') {\n    peer = new GramJs.InputNotifyUsers();\n  } else if (peerType === 'group') {\n    peer = new GramJs.InputNotifyChats();\n  } else {\n    peer = new GramJs.InputNotifyBroadcasts();\n  }\n\n  const settings = {\n    showPreviews: shouldShowPreviews,\n    silent: isSilent,\n    muteUntil: isSilent ? MAX_INT_32 : 0,\n  };\n\n  return invokeRequest(new GramJs.account.UpdateNotifySettings({\n    peer,\n    settings: new GramJs.InputPeerNotifySettings(settings),\n  }));\n}\n\nexport async function fetchLangPack({\n  langPack,\n  langCode,\n}: {\n  langPack: string;\n  langCode: string;\n}) {\n  const result = await invokeRequest(new GramJs.langpack.GetLangPack({\n    langPack,\n    langCode,\n  }));\n  if (!result) {\n    return undefined;\n  }\n\n  const { strings, keysToRemove } = buildLangStrings(result.strings);\n\n  return {\n    version: result.version,\n    strings,\n    keysToRemove,\n  };\n}\n\nexport async function fetchLangDifference({\n  langPack,\n  langCode,\n  fromVersion,\n}: {\n  langPack: string;\n  langCode: string;\n  fromVersion: number;\n}) {\n  const result = await invokeRequest(new GramJs.langpack.GetDifference({\n    langPack,\n    langCode,\n    fromVersion,\n  }));\n  if (!result) {\n    return undefined;\n  }\n\n  const { strings, keysToRemove } = buildLangStrings(result.strings);\n\n  return {\n    version: result.version,\n    strings,\n    keysToRemove,\n  };\n}\n\nexport async function fetchLanguages(): Promise<ApiLanguage[] | undefined> {\n  const result = await invokeRequest(new GramJs.langpack.GetLanguages({\n    langPack: DEFAULT_LANG_PACK,\n  }));\n  if (!result) {\n    return undefined;\n  }\n\n  return result.map(buildApiLanguage);\n}\n\nexport async function fetchLanguage({\n  langPack,\n  langCode,\n}: {\n  langPack: string;\n  langCode: string;\n}): Promise<ApiLanguage | undefined> {\n  const result = await invokeRequest(new GramJs.langpack.GetLanguage({\n    langPack,\n    langCode,\n  }));\n  if (!result) {\n    return undefined;\n  }\n\n  return buildApiLanguage(result);\n}\n\nexport async function oldFetchLangPack({ sourceLangPacks, langCode }: {\n  sourceLangPacks: typeof LANG_PACKS;\n  langCode: string;\n}) {\n  const results = await Promise.all(sourceLangPacks.map((langPack) => {\n    return invokeRequest(new GramJs.langpack.GetLangPack({\n      langPack,\n      langCode: BETA_LANG_CODES.includes(langCode) ? `${langCode}-raw` : langCode,\n    }));\n  }));\n\n  const collections = results.filter(Boolean).map(oldBuildLangPack);\n  if (!collections.length) {\n    return undefined;\n  }\n\n  return { langPack: Object.assign({}, ...collections.reverse()) as typeof collections[0] };\n}\n\nexport async function oldFetchLangStrings({ langPack, langCode, keys }: {\n  langPack: string; langCode: string; keys: string[];\n}) {\n  const result = await invokeRequest(new GramJs.langpack.GetStrings({\n    langPack,\n    langCode: BETA_LANG_CODES.includes(langCode) ? `${langCode}-raw` : langCode,\n    keys,\n  }));\n\n  if (!result) {\n    return undefined;\n  }\n\n  return result.map(oldBuildLangPackString);\n}\n\nexport async function fetchPrivacySettings(privacyKey: ApiPrivacyKey) {\n  const key = buildInputPrivacyKey(privacyKey);\n  const result = await invokeRequest(new GramJs.account.GetPrivacy({ key }));\n\n  if (!result) {\n    return undefined;\n  }\n\n  updateLocalDb(result);\n\n  return {\n    users: result.users.map(buildApiUser).filter(Boolean),\n    rules: buildPrivacyRules(result.rules),\n  };\n}\n\nexport function registerDevice(token: string) {\n  const client = getClient();\n  const secret = client.session.getAuthKey().getKey();\n  return invokeRequest(new GramJs.account.RegisterDevice({\n    tokenType: 10,\n    secret,\n    appSandbox: false,\n    otherUids: [],\n    token,\n  }));\n}\n\nexport function unregisterDevice(token: string) {\n  return invokeRequest(new GramJs.account.UnregisterDevice({\n    tokenType: 10,\n    otherUids: [],\n    token,\n  }));\n}\n\nexport async function setPrivacySettings(\n  privacyKey: ApiPrivacyKey, rules: ApiInputPrivacyRules,\n) {\n  const key = buildInputPrivacyKey(privacyKey);\n  const privacyRules = buildInputPrivacyRules(rules);\n\n  const result = await invokeRequest(new GramJs.account.SetPrivacy({ key, rules: privacyRules }));\n\n  if (!result) {\n    return undefined;\n  }\n\n  updateLocalDb(result);\n\n  return {\n    users: result.users.map(buildApiUser).filter(Boolean),\n    rules: buildPrivacyRules(result.rules),\n  };\n}\n\nexport async function updateIsOnline(isOnline: boolean) {\n  await invokeRequest(new GramJs.account.UpdateStatus({ offline: !isOnline }));\n}\n\nexport async function fetchContentSettings() {\n  const result = await invokeRequest(new GramJs.account.GetContentSettings());\n  if (!result) {\n    return undefined;\n  }\n\n  return {\n    isSensitiveEnabled: Boolean(result.sensitiveEnabled),\n    canChangeSensitive: Boolean(result.sensitiveCanChange),\n  };\n}\n\nexport function updateContentSettings(isEnabled: boolean) {\n  return invokeRequest(new GramJs.account.SetContentSettings({\n    sensitiveEnabled: isEnabled || undefined,\n  }));\n}\n\nexport async function fetchAppConfig(hash?: number): Promise<ApiAppConfig | undefined> {\n  const result = await invokeRequest(new GramJs.help.GetAppConfig({ hash }));\n  if (!result || result instanceof GramJs.help.AppConfigNotModified) return undefined;\n\n  const { config, hash: resultHash } = result;\n  return buildAppConfig(config, resultHash);\n}\n\nexport async function fetchConfig(): Promise<ApiConfig | undefined> {\n  const result = await invokeRequest(new GramJs.help.GetConfig());\n  if (!result) return undefined;\n\n  return buildApiConfig(result);\n}\n\nexport async function fetchPeerColors(hash?: number) {\n  const result = await invokeRequest(new GramJs.help.GetPeerColors({\n    hash,\n  }));\n  if (!result) return undefined;\n\n  const colors = buildApiPeerColors(result);\n  if (!colors) return undefined;\n\n  const newHash = result instanceof GramJs.help.PeerColors ? result.hash : undefined;\n\n  return {\n    colors,\n    hash: newHash,\n  };\n}\n\nexport async function fetchTimezones(hash?: number) {\n  const result = await invokeRequest(new GramJs.help.GetTimezonesList({\n    hash,\n  }));\n  if (!result || result instanceof GramJs.help.TimezonesListNotModified) return undefined;\n\n  const timezones = result.timezones.map(buildApiTimezone);\n\n  return {\n    timezones,\n    hash: result.hash,\n  };\n}\n\nfunction updateLocalDb(\n  result: (\n    GramJs.account.PrivacyRules | GramJs.contacts.Blocked | GramJs.contacts.BlockedSlice |\n    GramJs.Updates | GramJs.UpdatesCombined\n  ),\n) {\n  addEntitiesToLocalDb(result.users);\n  addEntitiesToLocalDb(result.chats);\n}\n\nexport async function fetchCountryList({ langCode = 'en' }: { langCode?: LangCode }) {\n  const countryList = await invokeRequest(new GramJs.help.GetCountriesList({\n    langCode,\n  }));\n\n  if (!(countryList instanceof GramJs.help.CountriesList)) {\n    return undefined;\n  }\n  return buildApiCountryList(countryList.countries);\n}\n\nexport async function fetchGlobalPrivacySettings() {\n  const result = await invokeRequest(new GramJs.account.GetGlobalPrivacySettings());\n\n  if (!result) {\n    return undefined;\n  }\n\n  return {\n    shouldArchiveAndMuteNewNonContact: Boolean(result.archiveAndMuteNewNoncontactPeers),\n    shouldHideReadMarks: Boolean(result.hideReadMarks),\n    shouldNewNonContactPeersRequirePremium: Boolean(result.newNoncontactPeersRequirePremium),\n  };\n}\n\nexport async function updateGlobalPrivacySettings({\n  shouldArchiveAndMuteNewNonContact,\n  shouldHideReadMarks,\n  shouldNewNonContactPeersRequirePremium,\n}: {\n  shouldArchiveAndMuteNewNonContact?: boolean;\n  shouldHideReadMarks?: boolean;\n  shouldNewNonContactPeersRequirePremium?: boolean;\n}) {\n  const result = await invokeRequest(new GramJs.account.SetGlobalPrivacySettings({\n    settings: new GramJs.GlobalPrivacySettings({\n      ...(shouldArchiveAndMuteNewNonContact && { archiveAndMuteNewNoncontactPeers: true }),\n      ...(shouldHideReadMarks && { hideReadMarks: true }),\n      ...(shouldNewNonContactPeersRequirePremium && { newNoncontactPeersRequirePremium: true }),\n    }),\n  }));\n\n  if (!result) {\n    return undefined;\n  }\n\n  return {\n    shouldArchiveAndMuteNewNonContact: Boolean(result.archiveAndMuteNewNoncontactPeers),\n    shouldHideReadMarks: Boolean(result.hideReadMarks),\n    shouldNewNonContactPeersRequirePremium: Boolean(result.newNoncontactPeersRequirePremium),\n  };\n}\n\nexport function toggleUsername({\n  chatId, accessHash, username, isActive,\n}: {\n  username: string;\n  isActive: boolean;\n  chatId?: string;\n  accessHash?: string;\n}) {\n  if (chatId) {\n    return invokeRequest(new GramJs.channels.ToggleUsername({\n      channel: buildInputEntity(chatId, accessHash) as GramJs.InputChannel,\n      username,\n      active: isActive,\n    }));\n  }\n\n  return invokeRequest(new GramJs.account.ToggleUsername({\n    username,\n    active: isActive,\n  }));\n}\n\nexport function reorderUsernames({ chatId, accessHash, usernames }: {\n  usernames: string[];\n  chatId?: string;\n  accessHash?: string;\n}) {\n  if (chatId) {\n    return invokeRequest(new GramJs.channels.ReorderUsernames({\n      channel: buildInputEntity(chatId, accessHash) as GramJs.InputChannel,\n      order: usernames,\n    }));\n  }\n\n  return invokeRequest(new GramJs.account.ReorderUsernames({\n    order: usernames,\n  }));\n}\n","import BigInt from 'big-integer';\nimport { Api as GramJs } from '../../../lib/gramjs';\n\nimport type {\n  ApiChat, ApiMessagePublicForward, ApiPostStatistics, ApiStoryPublicForward, ApiUser, StatisticsGraph,\n} from '../../types';\n\nimport { STATISTICS_PUBLIC_FORWARDS_LIMIT } from '../../../config';\nimport { buildApiChatFromPreview } from '../apiBuilders/chats';\nimport {\n  buildChannelStatistics,\n  buildGraph,\n  buildGroupStatistics,\n  buildMessagePublicForwards,\n  buildPostsStatistics,\n  buildStoryPublicForwards,\n} from '../apiBuilders/statistics';\nimport { buildApiUser } from '../apiBuilders/users';\nimport { buildInputEntity, buildInputPeer } from '../gramjsBuilders';\nimport { addEntitiesToLocalDb } from '../helpers';\nimport { invokeRequest } from './client';\n\nexport async function fetchChannelStatistics({\n  chat, dcId,\n}: { chat: ApiChat; dcId?: number }) {\n  const result = await invokeRequest(new GramJs.stats.GetBroadcastStats({\n    channel: buildInputEntity(chat.id, chat.accessHash) as GramJs.InputChannel,\n  }), {\n    dcId,\n  });\n\n  if (!result) {\n    return undefined;\n  }\n\n  return {\n    stats: buildChannelStatistics(result),\n    users: [],\n  };\n}\n\nexport async function fetchGroupStatistics({\n  chat, dcId,\n}: { chat: ApiChat; dcId?: number }) {\n  const result = await invokeRequest(new GramJs.stats.GetMegagroupStats({\n    channel: buildInputEntity(chat.id, chat.accessHash) as GramJs.InputChannel,\n  }), {\n    dcId,\n  });\n\n  if (!result) {\n    return undefined;\n  }\n\n  addEntitiesToLocalDb(result.users);\n\n  return {\n    users: result.users.map(buildApiUser).filter(Boolean),\n    stats: buildGroupStatistics(result),\n  };\n}\n\nexport async function fetchMessageStatistics({\n  chat,\n  messageId,\n  dcId,\n}: {\n  chat: ApiChat;\n  messageId: number;\n  dcId?: number;\n}): Promise<ApiPostStatistics | undefined> {\n  const result = await invokeRequest(new GramJs.stats.GetMessageStats({\n    channel: buildInputEntity(chat.id, chat.accessHash) as GramJs.InputChannel,\n    msgId: messageId,\n  }), {\n    dcId,\n  });\n\n  if (!result) {\n    return undefined;\n  }\n\n  return buildPostsStatistics(result);\n}\n\nexport async function fetchMessagePublicForwards({\n  chat,\n  messageId,\n  dcId,\n  offset,\n}: {\n  chat: ApiChat;\n  messageId: number;\n  dcId?: number;\n  offset?: string;\n}): Promise<{\n    forwards?: ApiMessagePublicForward[];\n    count?: number;\n    nextOffset?: string;\n    chats: ApiChat[];\n    users: ApiUser[];\n  } | undefined> {\n  const result = await invokeRequest(new GramJs.stats.GetMessagePublicForwards({\n    channel: buildInputEntity(chat.id, chat.accessHash) as GramJs.InputChannel,\n    msgId: messageId,\n    offset,\n    limit: STATISTICS_PUBLIC_FORWARDS_LIMIT,\n  }), {\n    dcId,\n  });\n\n  if (!result) {\n    return undefined;\n  }\n\n  addEntitiesToLocalDb(result.chats);\n  addEntitiesToLocalDb(result.users);\n\n  return {\n    forwards: buildMessagePublicForwards(result),\n    count: result.count,\n    nextOffset: result.nextOffset,\n    chats: result.chats.map((c) => buildApiChatFromPreview(c)).filter(Boolean),\n    users: result.users.map(buildApiUser).filter(Boolean),\n  };\n}\n\nexport async function fetchStatisticsAsyncGraph({\n  token,\n  x,\n  isPercentage,\n  dcId,\n}: {\n  token: string;\n  x?: number;\n  isPercentage?: boolean;\n  dcId?: number;\n}): Promise<StatisticsGraph | undefined> {\n  const result = await invokeRequest(new GramJs.stats.LoadAsyncGraph({\n    token,\n    ...(x && { x: BigInt(x) }),\n  }), {\n    dcId,\n  });\n\n  if (!result) {\n    return undefined;\n  }\n\n  return buildGraph(result as GramJs.StatsGraph, isPercentage);\n}\n\nexport async function fetchStoryStatistics({\n  chat,\n  storyId,\n  dcId,\n}: {\n  chat: ApiChat;\n  storyId: number;\n  dcId?: number;\n}): Promise<ApiPostStatistics | undefined> {\n  const result = await invokeRequest(new GramJs.stats.GetStoryStats({\n    peer: buildInputPeer(chat.id, chat.accessHash),\n    id: storyId,\n  }), {\n    dcId,\n  });\n\n  if (!result) {\n    return undefined;\n  }\n\n  return buildPostsStatistics(result);\n}\n\nexport async function fetchStoryPublicForwards({\n  chat,\n  storyId,\n  dcId,\n  offset,\n}: {\n  chat: ApiChat;\n  storyId: number;\n  dcId?: number;\n  offset?: string;\n}): Promise<{\n    publicForwards: (ApiMessagePublicForward | ApiStoryPublicForward)[] | undefined;\n    users: ApiUser[];\n    chats: ApiChat[];\n    count?: number;\n    nextOffset?: string;\n  } | undefined> {\n  const result = await invokeRequest(new GramJs.stats.GetStoryPublicForwards({\n    peer: buildInputPeer(chat.id, chat.accessHash),\n    id: storyId,\n    offset,\n    limit: STATISTICS_PUBLIC_FORWARDS_LIMIT,\n  }), {\n    dcId,\n  });\n\n  if (!result) {\n    return undefined;\n  }\n\n  addEntitiesToLocalDb(result.chats);\n  addEntitiesToLocalDb(result.users);\n\n  return {\n    publicForwards: buildStoryPublicForwards(result),\n    users: result.users.map(buildApiUser).filter(Boolean),\n    chats: result.chats.map((c) => buildApiChatFromPreview(c)).filter(Boolean),\n    count: result.count,\n    nextOffset: result.nextOffset,\n  };\n}\n","import { Api as GramJs } from '../../../lib/gramjs';\n\nimport type { ApiInputPrivacyRules } from '../../../types';\nimport type {\n  ApiChat,\n  ApiPeer,\n  ApiPeerStories,\n  ApiReaction,\n  ApiReportReason,\n  ApiStealthMode,\n  ApiTypeStory,\n  ApiUser,\n} from '../../types';\n\nimport { STORY_LIST_LIMIT } from '../../../config';\nimport { buildCollectionByCallback } from '../../../util/iteratees';\nimport { buildApiChatFromPreview } from '../apiBuilders/chats';\nimport { getApiChatIdFromMtpPeer } from '../apiBuilders/peers';\nimport {\n  buildApiPeerStories,\n  buildApiStealthMode,\n  buildApiStory,\n  buildApiStoryView,\n  buildApiStoryViews,\n} from '../apiBuilders/stories';\nimport { buildApiUser } from '../apiBuilders/users';\nimport {\n  buildInputPeer,\n  buildInputPrivacyRules,\n  buildInputReaction,\n  buildInputReportReason,\n} from '../gramjsBuilders';\nimport { addEntitiesToLocalDb, addStoryToLocalDb } from '../helpers';\nimport { invokeRequest } from './client';\n\nexport async function fetchAllStories({\n  stateHash,\n  isFirstRequest = false,\n  isHidden = false,\n}: {\n  isFirstRequest?: boolean;\n  stateHash?: string;\n  isHidden?: boolean;\n}): Promise<\n  undefined\n  | { state: string; stealthMode: ApiStealthMode }\n  | {\n    users: ApiUser[];\n    chats: ApiChat[];\n    peerStories: Record<string, ApiPeerStories>;\n    hasMore?: true;\n    state: string;\n    stealthMode: ApiStealthMode;\n  }> {\n  const params: ConstructorParameters<typeof GramJs.stories.GetAllStories>[0] = isFirstRequest\n    ? (isHidden ? { hidden: true } : {})\n    : { state: stateHash, next: true, ...(isHidden && { hidden: true }) };\n  const result = await invokeRequest(new GramJs.stories.GetAllStories(params));\n\n  if (!result) {\n    return undefined;\n  }\n\n  if (result instanceof GramJs.stories.AllStoriesNotModified) {\n    return {\n      state: result.state,\n      stealthMode: buildApiStealthMode(result.stealthMode),\n    };\n  }\n\n  addEntitiesToLocalDb(result.users);\n  addEntitiesToLocalDb(result.chats);\n  result.peerStories.forEach((peerStories) => (\n    peerStories.stories.forEach((story) => addStoryToLocalDb(story, getApiChatIdFromMtpPeer(peerStories.peer)))\n  ));\n\n  const allUserStories = result.peerStories.reduce<Record<string, ApiPeerStories>>((acc, peerStories) => {\n    const peerId = getApiChatIdFromMtpPeer(peerStories.peer);\n    const stories = buildApiPeerStories(peerStories);\n    const { profileIds, orderedIds, lastUpdatedAt } = Object.values(stories).reduce<\n    {\n      profileIds: number[];\n      orderedIds: number[];\n      lastUpdatedAt?: number;\n    }\n    >((dataAcc, story) => {\n      if ('isInProfile' in story && story.isInProfile) {\n        dataAcc.profileIds.push(story.id);\n      }\n      if (!('isDeleted' in story)) {\n        dataAcc.orderedIds.push(story.id);\n        dataAcc.lastUpdatedAt = Math.max(story.date, dataAcc.lastUpdatedAt || 0);\n      }\n\n      return dataAcc;\n    }, {\n      profileIds: [],\n      orderedIds: [],\n      lastUpdatedAt: undefined,\n    });\n\n    if (orderedIds.length === 0) {\n      return acc;\n    }\n\n    acc[peerId] = {\n      byId: stories,\n      orderedIds,\n      profileIds,\n      lastUpdatedAt,\n      lastReadId: peerStories.maxReadId,\n    };\n\n    return acc;\n  }, {});\n\n  return {\n    users: result.users.map(buildApiUser).filter(Boolean),\n    chats: result.chats.map((c) => buildApiChatFromPreview(c)).filter(Boolean),\n    peerStories: allUserStories,\n    hasMore: result.hasMore,\n    state: result.state,\n    stealthMode: buildApiStealthMode(result.stealthMode),\n  };\n}\n\nexport async function fetchPeerStories({\n  peer,\n}: {\n  peer: ApiPeer;\n}) {\n  const result = await invokeRequest(new GramJs.stories.GetPeerStories({\n    peer: buildInputPeer(peer.id, peer.accessHash),\n  }));\n\n  if (!result) {\n    return undefined;\n  }\n\n  addEntitiesToLocalDb(result.users);\n  result.stories.stories.forEach((story) => addStoryToLocalDb(story, peer.id));\n\n  const users = result.users.map(buildApiUser).filter(Boolean);\n  const chats = result.chats.map((c) => buildApiChatFromPreview(c)).filter(Boolean);\n  const stories = buildCollectionByCallback(result.stories.stories, (story) => (\n    [story.id, buildApiStory(peer.id, story)]\n  ));\n\n  return {\n    chats,\n    users,\n    stories,\n    lastReadStoryId: result.stories.maxReadId,\n  };\n}\n\nexport function fetchPeerProfileStories({\n  peer, offsetId,\n}: {\n  peer: ApiPeer;\n  offsetId?: number;\n}) {\n  return fetchCommonStoriesRequest({\n    method: new GramJs.stories.GetPinnedStories({\n      peer: buildInputPeer(peer.id, peer.accessHash),\n      offsetId,\n      limit: STORY_LIST_LIMIT,\n    }),\n    peerId: peer.id,\n  });\n}\n\nexport function fetchStoriesArchive({\n  peer,\n  offsetId,\n}: {\n  peer: ApiPeer;\n  offsetId?: number;\n}) {\n  return fetchCommonStoriesRequest({\n    method: new GramJs.stories.GetStoriesArchive({\n      peer: peer && buildInputPeer(peer.id, peer.accessHash),\n      offsetId,\n      limit: STORY_LIST_LIMIT,\n    }),\n    peerId: peer.id,\n  });\n}\n\nexport async function fetchPeerStoriesByIds({ peer, ids }: { peer: ApiPeer; ids: number[] }) {\n  const result = await invokeRequest(new GramJs.stories.GetStoriesByID({\n    peer: buildInputPeer(peer.id, peer.accessHash),\n    id: ids,\n  }));\n\n  if (!result) {\n    return undefined;\n  }\n\n  addEntitiesToLocalDb(result.users);\n  addEntitiesToLocalDb(result.chats);\n  result.stories.forEach((story) => addStoryToLocalDb(story, peer.id));\n\n  const users = result.users.map(buildApiUser).filter(Boolean);\n  const chats = result.chats.map((c) => buildApiChatFromPreview(c)).filter(Boolean);\n  const stories = ids.reduce<Record<string, ApiTypeStory>>((acc, id) => {\n    const story = result.stories.find(({ id: currentId }) => currentId === id);\n    if (story) {\n      acc[id] = buildApiStory(peer.id, story);\n    } else {\n      acc[id] = {\n        id,\n        peerId: peer.id,\n        isDeleted: true,\n      };\n    }\n\n    return acc;\n  }, {});\n\n  return {\n    chats,\n    users,\n    pinnedIds: result.pinnedToTop,\n    stories,\n  };\n}\n\nexport function viewStory({ peer, storyId }: { peer: ApiPeer; storyId: number }) {\n  return invokeRequest(new GramJs.stories.IncrementStoryViews({\n    peer: buildInputPeer(peer.id, peer.accessHash),\n    id: [storyId],\n  }));\n}\n\nexport function markStoryRead({ peer, storyId }: { peer: ApiPeer; storyId: number }) {\n  return invokeRequest(new GramJs.stories.ReadStories({\n    peer: buildInputPeer(peer.id, peer.accessHash),\n    maxId: storyId,\n  }));\n}\n\nexport function deleteStory({ peer, storyId }: { peer: ApiPeer; storyId: number }) {\n  return invokeRequest(new GramJs.stories.DeleteStories({\n    peer: buildInputPeer(peer.id, peer.accessHash),\n    id: [storyId],\n  }));\n}\n\nexport function toggleStoryInProfile({\n  peer, storyId, isInProfile,\n}: {\n  peer: ApiPeer; storyId: number; isInProfile?: boolean;\n}) {\n  return invokeRequest(new GramJs.stories.TogglePinned({\n    peer: buildInputPeer(peer.id, peer.accessHash),\n    id: [storyId],\n    pinned: isInProfile,\n  }));\n}\n\nexport function toggleStoryPinnedToTop({\n  peer, storyIds,\n}: {\n  peer: ApiPeer; storyIds: number[];\n}) {\n  return invokeRequest(new GramJs.stories.TogglePinnedToTop({\n    peer: buildInputPeer(peer.id, peer.accessHash),\n    id: storyIds,\n  }));\n}\n\nexport async function fetchStoryViewList({\n  peer,\n  storyId,\n  areJustContacts,\n  query,\n  areReactionsFirst,\n  limit = STORY_LIST_LIMIT,\n  offset = '',\n}: {\n  peer: ApiPeer;\n  storyId: number;\n  areJustContacts?: true;\n  areReactionsFirst?: true;\n  query?: string;\n  limit?: number;\n  offset?: string;\n}) {\n  const result = await invokeRequest(new GramJs.stories.GetStoryViewsList({\n    peer: buildInputPeer(peer.id, peer.accessHash),\n    id: storyId,\n    justContacts: areJustContacts,\n    q: query,\n    reactionsFirst: areReactionsFirst,\n    limit,\n    offset,\n  }));\n\n  if (!result) {\n    return undefined;\n  }\n\n  addEntitiesToLocalDb(result.users);\n  addEntitiesToLocalDb(result.chats);\n  const users = result.users.map(buildApiUser).filter(Boolean);\n  const chats = result.chats.map((c) => buildApiChatFromPreview(c)).filter(Boolean);\n  const views = result.views.map(buildApiStoryView).filter(Boolean);\n\n  return {\n    users,\n    chats,\n    views,\n    nextOffset: result.nextOffset,\n    reactionsCount: result.reactionsCount,\n    viewsCount: result.count,\n  };\n}\n\nexport async function fetchStoriesViews({\n  peer,\n  storyIds,\n}: {\n  peer: ApiPeer;\n  storyIds: number[];\n}) {\n  const result = await invokeRequest(new GramJs.stories.GetStoriesViews({\n    peer: buildInputPeer(peer.id, peer.accessHash),\n    id: storyIds,\n  }));\n\n  if (!result?.views[0]) {\n    return undefined;\n  }\n\n  addEntitiesToLocalDb(result.users);\n\n  const views = buildApiStoryViews(result.views[0]);\n  const users = result.users.map(buildApiUser).filter(Boolean);\n\n  return {\n    views,\n    users,\n  };\n}\n\nexport async function fetchStoryLink({ peer, storyId }: { peer: ApiPeer ; storyId: number }) {\n  const result = await invokeRequest(new GramJs.stories.ExportStoryLink({\n    peer: buildInputPeer(peer.id, peer.accessHash),\n    id: storyId,\n  }));\n\n  if (!result) {\n    return undefined;\n  }\n\n  return result.link;\n}\n\nexport function reportStory({\n  peer,\n  storyId,\n  reason,\n  description,\n}: {\n  peer: ApiPeer; storyId: number; reason: ApiReportReason; description?: string;\n}) {\n  return invokeRequest(new GramJs.stories.Report({\n    peer: buildInputPeer(peer.id, peer.accessHash),\n    id: [storyId],\n    reason: buildInputReportReason(reason),\n    message: description,\n  }));\n}\n\nexport function editStoryPrivacy({\n  peer,\n  id,\n  privacy,\n}: {\n  peer: ApiPeer;\n  id: number;\n  privacy: ApiInputPrivacyRules;\n}) {\n  return invokeRequest(new GramJs.stories.EditStory({\n    peer: buildInputPeer(peer.id, peer.accessHash),\n    id,\n    privacyRules: buildInputPrivacyRules(privacy),\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n\nexport function toggleStoriesHidden({\n  peer,\n  isHidden,\n}: {\n  peer: ApiPeer;\n  isHidden: boolean;\n}) {\n  return invokeRequest(new GramJs.stories.TogglePeerStoriesHidden({\n    peer: buildInputPeer(peer.id, peer.accessHash),\n    hidden: isHidden,\n  }));\n}\n\nexport function fetchStoriesMaxIds({\n  peers,\n}: {\n  peers: ApiPeer[];\n}) {\n  return invokeRequest(new GramJs.stories.GetPeerMaxIDs({\n    id: peers.map((peer) => buildInputPeer(peer.id, peer.accessHash)),\n  }), { shouldIgnoreErrors: true });\n}\n\nasync function fetchCommonStoriesRequest({ method, peerId }: {\n  method: GramJs.stories.GetPinnedStories | GramJs.stories.GetStoriesArchive;\n  peerId: string;\n}) {\n  const result = await invokeRequest(method);\n\n  if (!result) {\n    return undefined;\n  }\n\n  addEntitiesToLocalDb(result.users);\n  addEntitiesToLocalDb(result.chats);\n  result.stories.forEach((story) => addStoryToLocalDb(story, peerId));\n\n  const users = result.users.map(buildApiUser).filter(Boolean);\n  const chats = result.chats.map((c) => buildApiChatFromPreview(c)).filter(Boolean);\n  const stories = buildCollectionByCallback(result.stories, (story) => (\n    [story.id, buildApiStory(peerId, story)]\n  ));\n\n  return {\n    users,\n    chats,\n    stories,\n    pinnedIds: result.pinnedToTop,\n  };\n}\n\nexport function sendStoryReaction({\n  peer, storyId, reaction, shouldAddToRecent,\n}: {\n  peer: ApiPeer;\n  storyId: number;\n  reaction?: ApiReaction;\n  shouldAddToRecent?: boolean;\n}) {\n  return invokeRequest(new GramJs.stories.SendReaction({\n    reaction: reaction ? buildInputReaction(reaction) : new GramJs.ReactionEmpty(),\n    peer: buildInputPeer(peer.id, peer.accessHash),\n    storyId,\n    ...(shouldAddToRecent && { addToRecent: true }),\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n\nexport function activateStealthMode({\n  isForPast,\n  isForFuture,\n}: {\n  isForPast?: true;\n  isForFuture?: true;\n}) {\n  return invokeRequest(new GramJs.stories.ActivateStealthMode({\n    past: isForPast,\n    future: isForFuture,\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n","import BigInt from 'big-integer';\nimport { Api as GramJs } from '../../../lib/gramjs';\n\nimport type {\n  ApiSticker, ApiStickerSetInfo, ApiVideo, OnApiUpdate,\n} from '../../types';\n\nimport { DEFAULT_GIF_SEARCH_BOT_USERNAME, RECENT_STATUS_LIMIT, RECENT_STICKERS_LIMIT } from '../../../config';\nimport { buildVideoFromDocument } from '../apiBuilders/messageContent';\nimport { buildApiEmojiStatus } from '../apiBuilders/peers';\nimport {\n  buildStickerSet, buildStickerSetCovered, processStickerPackResult, processStickerResult,\n} from '../apiBuilders/symbols';\nimport { buildInputDocument, buildInputStickerSet, buildInputStickerSetShortName } from '../gramjsBuilders';\nimport localDb from '../localDb';\nimport { invokeRequest } from './client';\n\nlet onUpdate: OnApiUpdate;\n\nexport function init(_onUpdate: OnApiUpdate) {\n  onUpdate = _onUpdate;\n}\n\nexport async function fetchCustomEmojiSets({ hash = '0' }: { hash?: string }) {\n  const allStickers = await invokeRequest(new GramJs.messages.GetEmojiStickers({ hash: BigInt(hash) }));\n\n  if (!allStickers || allStickers instanceof GramJs.messages.AllStickersNotModified) {\n    return undefined;\n  }\n\n  allStickers.sets.forEach((stickerSet) => {\n    if (stickerSet.thumbs?.length || stickerSet.thumbDocumentId) {\n      localDb.stickerSets[String(stickerSet.id)] = stickerSet;\n    }\n  });\n\n  return {\n    hash: String(allStickers.hash),\n    sets: allStickers.sets.map(buildStickerSet),\n  };\n}\n\nexport async function fetchStickerSets({ hash = '0' }: { hash?: string }) {\n  const allStickers = await invokeRequest(new GramJs.messages.GetAllStickers({ hash: BigInt(hash) }));\n\n  if (!allStickers || allStickers instanceof GramJs.messages.AllStickersNotModified) {\n    return undefined;\n  }\n\n  allStickers.sets.forEach((stickerSet) => {\n    if (stickerSet.thumbs?.length) {\n      localDb.stickerSets[String(stickerSet.id)] = stickerSet;\n    }\n  });\n\n  return {\n    hash: String(allStickers.hash),\n    sets: allStickers.sets.map(buildStickerSet),\n  };\n}\n\nexport async function fetchRecentStickers({ hash = '0' }: { hash?: string }) {\n  const result = await invokeRequest(new GramJs.messages.GetRecentStickers({ hash: BigInt(hash) }));\n\n  if (!result || result instanceof GramJs.messages.RecentStickersNotModified) {\n    return undefined;\n  }\n\n  return {\n    hash: String(result.hash),\n    stickers: processStickerResult(result.stickers.slice(0, RECENT_STICKERS_LIMIT)),\n  };\n}\n\nexport async function fetchFavoriteStickers({ hash = '0' }: { hash?: string }) {\n  const result = await invokeRequest(new GramJs.messages.GetFavedStickers({ hash: BigInt(hash) }));\n\n  if (!result || result instanceof GramJs.messages.FavedStickersNotModified) {\n    return undefined;\n  }\n\n  return {\n    hash: String(result.hash),\n    stickers: processStickerResult(result.stickers),\n  };\n}\n\nexport async function fetchFeaturedStickers({ hash = '0' }: { hash?: string }) {\n  const result = await invokeRequest(new GramJs.messages.GetFeaturedStickers({ hash: BigInt(hash) }));\n\n  if (!result || result instanceof GramJs.messages.FeaturedStickersNotModified) {\n    return undefined;\n  }\n\n  return {\n    hash: String(result.hash),\n    isPremium: Boolean(result.premium),\n    sets: result.sets.map(buildStickerSetCovered),\n  };\n}\n\nexport async function fetchFeaturedEmojiStickers() {\n  const result = await invokeRequest(new GramJs.messages.GetFeaturedEmojiStickers({ hash: BigInt(0) }));\n\n  if (!result || result instanceof GramJs.messages.FeaturedStickersNotModified) {\n    return undefined;\n  }\n\n  result.sets.forEach(({ set }) => {\n    if (set.thumbDocumentId) {\n      localDb.stickerSets[String(set.id)] = set;\n    }\n  });\n\n  return {\n    isPremium: Boolean(result.premium),\n    sets: result.sets.map(buildStickerSetCovered),\n  };\n}\n\nexport async function faveSticker({\n  sticker,\n  unfave,\n}: {\n  sticker: ApiSticker;\n  unfave?: boolean;\n}) {\n  const request = new GramJs.messages.FaveSticker({\n    id: buildInputDocument(sticker),\n    unfave,\n  });\n\n  const result = await invokeRequest(request);\n  if (result) {\n    onUpdate({\n      '@type': 'updateFavoriteStickers',\n    });\n  }\n}\n\nexport function removeRecentSticker({\n  sticker,\n}: {\n  sticker: ApiSticker;\n}) {\n  const request = new GramJs.messages.SaveRecentSticker({\n    id: buildInputDocument(sticker),\n    unsave: true,\n  });\n\n  return invokeRequest(request);\n}\n\nexport function clearRecentStickers() {\n  return invokeRequest(new GramJs.messages.ClearRecentStickers());\n}\n\nexport async function fetchStickers(\n  { stickerSetInfo }:\n  { stickerSetInfo: ApiStickerSetInfo },\n) {\n  if ('isMissing' in stickerSetInfo) return undefined;\n  const result = await invokeRequest(new GramJs.messages.GetStickerSet({\n    stickerset: 'id' in stickerSetInfo\n      ? buildInputStickerSet(stickerSetInfo.id, stickerSetInfo.accessHash)\n      : buildInputStickerSetShortName(stickerSetInfo.shortName),\n  }), {\n    shouldThrow: true,\n  });\n\n  if (!(result instanceof GramJs.messages.StickerSet)) {\n    return undefined;\n  }\n\n  localDb.stickerSets[String(result.set.id)] = result.set;\n\n  return {\n    set: buildStickerSet(result.set),\n    stickers: processStickerResult(result.documents),\n    packs: processStickerPackResult(result.packs),\n  };\n}\n\nexport async function fetchCustomEmoji({ documentId }: { documentId: string[] }) {\n  if (!documentId.length) return undefined;\n  const result = await invokeRequest(new GramJs.messages.GetCustomEmojiDocuments({\n    documentId: documentId.map((id) => BigInt(id)),\n  }));\n  if (!result) return undefined;\n\n  return processStickerResult(result);\n}\n\nexport async function fetchAnimatedEmojis() {\n  const result = await invokeRequest(new GramJs.messages.GetStickerSet({\n    stickerset: new GramJs.InputStickerSetAnimatedEmoji(),\n  }));\n\n  if (!(result instanceof GramJs.messages.StickerSet)) {\n    return undefined;\n  }\n\n  return {\n    set: buildStickerSet(result.set),\n    stickers: processStickerResult(result.documents),\n  };\n}\n\nexport async function fetchAnimatedEmojiEffects() {\n  const result = await invokeRequest(new GramJs.messages.GetStickerSet({\n    stickerset: new GramJs.InputStickerSetAnimatedEmojiAnimations(),\n  }));\n\n  if (!(result instanceof GramJs.messages.StickerSet)) {\n    return undefined;\n  }\n\n  return {\n    set: buildStickerSet(result.set),\n    stickers: processStickerResult(result.documents),\n  };\n}\n\nexport async function fetchGenericEmojiEffects() {\n  const result = await invokeRequest(new GramJs.messages.GetStickerSet({\n    stickerset: new GramJs.InputStickerSetEmojiGenericAnimations(),\n  }));\n\n  if (!(result instanceof GramJs.messages.StickerSet)) {\n    return undefined;\n  }\n\n  return {\n    set: buildStickerSet(result.set),\n    stickers: processStickerResult(result.documents),\n  };\n}\n\nexport async function fetchPremiumGifts() {\n  const result = await invokeRequest(new GramJs.messages.GetStickerSet({\n    stickerset: new GramJs.InputStickerSetPremiumGifts(),\n  }));\n\n  if (!(result instanceof GramJs.messages.StickerSet)) {\n    return undefined;\n  }\n\n  return {\n    set: buildStickerSet(result.set),\n    stickers: processStickerResult(result.documents),\n  };\n}\n\nexport async function fetchDefaultTopicIcons() {\n  const result = await invokeRequest(new GramJs.messages.GetStickerSet({\n    stickerset: new GramJs.InputStickerSetEmojiDefaultTopicIcons(),\n  }));\n\n  if (!(result instanceof GramJs.messages.StickerSet)) {\n    return undefined;\n  }\n\n  return {\n    set: buildStickerSet(result.set),\n    stickers: processStickerResult(result.documents),\n  };\n}\n\nexport async function fetchDefaultStatusEmojis() {\n  const result = await invokeRequest(new GramJs.messages.GetStickerSet({\n    stickerset: new GramJs.InputStickerSetEmojiDefaultStatuses(),\n  }));\n\n  if (!(result instanceof GramJs.messages.StickerSet)) {\n    return undefined;\n  }\n\n  return {\n    set: buildStickerSet(result.set),\n    stickers: processStickerResult(result.documents),\n  };\n}\n\nexport async function searchStickers({ query, hash = '0' }: { query: string; hash?: string }) {\n  const result = await invokeRequest(new GramJs.messages.SearchStickerSets({\n    q: query,\n    hash: BigInt(hash),\n  }));\n\n  if (!result || result instanceof GramJs.messages.FoundStickerSetsNotModified) {\n    return undefined;\n  }\n\n  return {\n    hash: String(result.hash),\n    sets: result.sets.map(buildStickerSetCovered),\n  };\n}\n\nexport async function fetchSavedGifs({ hash = '0' }: { hash?: string }) {\n  const result = await invokeRequest(new GramJs.messages.GetSavedGifs({ hash: BigInt(hash) }));\n\n  if (!result || result instanceof GramJs.messages.SavedGifsNotModified) {\n    return undefined;\n  }\n\n  return {\n    hash: String(result.hash),\n    gifs: processGifResult(result.gifs),\n  };\n}\n\nexport function saveGif({ gif, shouldUnsave }: { gif: ApiVideo; shouldUnsave?: boolean }) {\n  const request = new GramJs.messages.SaveGif({\n    id: buildInputDocument(gif),\n    unsave: shouldUnsave,\n  });\n\n  return invokeRequest(request, { shouldReturnTrue: true });\n}\n\nexport async function installStickerSet({ stickerSetId, accessHash }: { stickerSetId: string; accessHash: string }) {\n  const result = await invokeRequest(new GramJs.messages.InstallStickerSet({\n    stickerset: buildInputStickerSet(stickerSetId, accessHash),\n  }));\n\n  if (result) {\n    onUpdate({\n      '@type': 'updateStickerSet',\n      id: stickerSetId,\n      stickerSet: { installedDate: Date.now() },\n    });\n  }\n}\n\nexport async function uninstallStickerSet({ stickerSetId, accessHash }: { stickerSetId: string; accessHash: string }) {\n  const result = await invokeRequest(new GramJs.messages.UninstallStickerSet({\n    stickerset: buildInputStickerSet(stickerSetId, accessHash),\n  }));\n\n  if (result) {\n    onUpdate({\n      '@type': 'updateStickerSet',\n      id: stickerSetId,\n      stickerSet: { installedDate: undefined },\n    });\n  }\n}\n\nlet inputGifBot: GramJs.InputUser | undefined;\n\nexport async function searchGifs({\n  query,\n  offset = '',\n  username = DEFAULT_GIF_SEARCH_BOT_USERNAME,\n}: { query: string; offset?: string; username?: string }) {\n  if (!inputGifBot) {\n    const resolvedPeer = await invokeRequest(new GramJs.contacts.ResolveUsername({\n      username,\n    }));\n    if (!resolvedPeer || !(resolvedPeer.users[0] instanceof GramJs.User)) {\n      return undefined;\n    }\n\n    inputGifBot = new GramJs.InputUser({\n      userId: (resolvedPeer.peer as GramJs.PeerUser).userId,\n      accessHash: resolvedPeer.users[0].accessHash!,\n    });\n  }\n\n  const result = await invokeRequest(new GramJs.messages.GetInlineBotResults({\n    bot: inputGifBot,\n    peer: new GramJs.InputPeerEmpty(),\n    query,\n    offset,\n  }));\n  if (!result) {\n    return undefined;\n  }\n\n  const documents = result.results\n    .map((foundGif) => {\n      if (foundGif instanceof GramJs.BotInlineMediaResult) {\n        return foundGif.document;\n      }\n\n      return undefined;\n    })\n    .filter(Boolean);\n\n  return {\n    nextOffset: result.nextOffset,\n    gifs: processGifResult(documents),\n  };\n}\n\nexport async function fetchStickersForEmoji({\n  emoji, hash = '0',\n}: { emoji: string; hash?: string }) {\n  const result = await invokeRequest(new GramJs.messages.GetStickers({\n    emoticon: emoji,\n    hash: BigInt(hash),\n  }));\n\n  if (!result || result instanceof GramJs.messages.StickersNotModified) {\n    return undefined;\n  }\n\n  return {\n    stickers: processStickerResult(result.stickers),\n    hash: String(result.hash),\n  };\n}\n\nexport async function fetchEmojiKeywords({ language, fromVersion }: {\n  language: string;\n  fromVersion?: number;\n}) {\n  const result = await invokeRequest(new GramJs.messages.GetEmojiKeywordsDifference({\n    langCode: language,\n    fromVersion,\n  }));\n\n  if (!result) {\n    return undefined;\n  }\n\n  return {\n    language: result.langCode,\n    version: result.version,\n    keywords: result.keywords.reduce((acc, emojiKeyword) => {\n      acc[emojiKeyword.keyword] = emojiKeyword.emoticons;\n\n      return acc;\n    }, {} as Record<string, string[]>),\n  };\n}\n\nexport async function fetchRecentEmojiStatuses(hash = '0') {\n  const result = await invokeRequest(new GramJs.account.GetRecentEmojiStatuses({ hash: BigInt(hash) }));\n\n  if (!result || result instanceof GramJs.account.EmojiStatusesNotModified) {\n    return undefined;\n  }\n\n  const documentIds = result.statuses\n    .slice(0, RECENT_STATUS_LIMIT)\n    .map(buildApiEmojiStatus)\n    .filter(Boolean)\n    .map(({ documentId }) => documentId);\n  const emojiStatuses = await fetchCustomEmoji({ documentId: documentIds });\n\n  return {\n    hash: String(result.hash),\n    emojiStatuses,\n  };\n}\n\nfunction processGifResult(gifs: GramJs.TypeDocument[]) {\n  return gifs\n    .map((document) => {\n      if (document instanceof GramJs.Document) {\n        const gif = buildVideoFromDocument(document);\n        if (gif) {\n          localDb.documents[String(document.id)] = document;\n\n          return gif;\n        }\n      }\n\n      return undefined;\n    })\n    .filter(Boolean);\n}\n","import { Api as GramJs, errors } from '../../../lib/gramjs';\n\nimport type { OnApiUpdate } from '../../types';\n\nimport { DEBUG } from '../../../config';\nimport { getTmpPassword, invokeRequest, updateTwoFaSettings } from './client';\n\nconst ApiErrors: { [k: string]: string } = {\n  EMAIL_UNCONFIRMED: 'Email unconfirmed',\n  EMAIL_HASH_EXPIRED: 'Email hash expired',\n  NEW_SALT_INVALID: 'The new salt is invalid',\n  NEW_SETTINGS_INVALID: 'The new password settings are invalid',\n  CODE_INVALID: 'Invalid Code',\n  PASSWORD_HASH_INVALID: 'Invalid Password',\n};\n\nconst emailCodeController: {\n  resolve?: Function;\n  reject?: Function;\n} = {};\n\nlet onUpdate: OnApiUpdate;\n\nexport function init(_onUpdate: OnApiUpdate) {\n  onUpdate = _onUpdate;\n}\n\nexport async function getPasswordInfo() {\n  const result = await invokeRequest(new GramJs.account.GetPassword());\n  if (!result) {\n    return undefined;\n  }\n\n  const { hint, hasPassword } = result;\n\n  return { hint, hasPassword };\n}\n\nfunction onRequestEmailCode(length: number) {\n  onUpdate({\n    '@type': 'updateTwoFaStateWaitCode',\n    length,\n  });\n\n  return new Promise<string>((resolve, reject) => {\n    emailCodeController.resolve = resolve;\n    emailCodeController.reject = reject;\n  });\n}\n\nexport function getTemporaryPaymentPassword(password: string, ttl?: number) {\n  return getTmpPassword(password, ttl);\n}\n\nexport async function checkPassword(currentPassword: string) {\n  try {\n    await updateTwoFaSettings({ isCheckPassword: true, currentPassword });\n\n    return true;\n  } catch (err: any) {\n    onError(err);\n\n    return false;\n  }\n}\n\nexport async function clearPassword(currentPassword: string) {\n  try {\n    await updateTwoFaSettings({ currentPassword });\n\n    return true;\n  } catch (err: any) {\n    onError(err);\n\n    return false;\n  }\n}\n\nexport async function updatePassword(currentPassword: string, password: string, hint?: string, email?: string) {\n  try {\n    await updateTwoFaSettings({\n      currentPassword,\n      newPassword: password,\n      hint,\n      email,\n      emailCodeCallback: onRequestEmailCode,\n      onEmailCodeError: onError,\n    });\n\n    return true;\n  } catch (err: any) {\n    onError(err);\n\n    return false;\n  }\n}\n\nexport async function updateRecoveryEmail(currentPassword: string, email: string) {\n  try {\n    await updateTwoFaSettings({\n      currentPassword,\n      newPassword: currentPassword,\n      email,\n      emailCodeCallback: onRequestEmailCode,\n      onEmailCodeError: onError,\n    });\n\n    return true;\n  } catch (err: any) {\n    onError(err);\n\n    return false;\n  }\n}\n\nexport function provideRecoveryEmailCode(code: string) {\n  emailCodeController.resolve!(code);\n}\n\nfunction onError(err: Error) {\n  let message: string;\n\n  if (err instanceof errors.FloodWaitError) {\n    const hours = Math.ceil(Number(err.seconds) / 60 / 60);\n    message = `Too many attempts. Try again in ${hours > 1 ? `${hours} hours` : 'an hour'}`;\n  } else {\n    message = ApiErrors[err.message];\n  }\n\n  if (!message) {\n    message = 'Unexpected Error';\n\n    if (DEBUG) {\n      // eslint-disable-next-line no-console\n      console.error(err);\n    }\n  }\n\n  onUpdate({\n    '@type': 'updateTwoFaError',\n    message,\n  });\n}\n","import BigInt from 'big-integer';\nimport { Api as GramJs } from '../../../lib/gramjs';\n\nimport type {\n  ApiChat, ApiPeer, ApiSticker,\n  ApiUser, OnApiUpdate,\n} from '../../types';\n\nimport { COMMON_CHATS_LIMIT, PROFILE_PHOTOS_LIMIT } from '../../../config';\nimport { buildApiChatFromPreview } from '../apiBuilders/chats';\nimport { buildApiPhoto } from '../apiBuilders/common';\nimport { buildApiPeerId } from '../apiBuilders/peers';\nimport { buildApiUser, buildApiUserFullInfo, buildApiUsersAndStatuses } from '../apiBuilders/users';\nimport {\n  buildInputContact,\n  buildInputEmojiStatus,\n  buildInputEntity,\n  buildInputPeer,\n  buildMtpPeerId,\n  getEntityTypeById,\n} from '../gramjsBuilders';\nimport { addEntitiesToLocalDb, addPhotoToLocalDb, addUserToLocalDb } from '../helpers';\nimport localDb from '../localDb';\nimport { invokeRequest } from './client';\nimport { searchMessagesLocal } from './messages';\n\nlet onUpdate: OnApiUpdate;\n\nexport function init(_onUpdate: OnApiUpdate) {\n  onUpdate = _onUpdate;\n}\n\nexport async function fetchFullUser({\n  id,\n  accessHash,\n}: {\n  id: string;\n  accessHash?: string;\n}) {\n  const input = buildInputEntity(id, accessHash);\n  if (!(input instanceof GramJs.InputUser)) {\n    return undefined;\n  }\n\n  const result = await invokeRequest(new GramJs.users.GetFullUser({ id: input }));\n\n  if (!result) {\n    return undefined;\n  }\n\n  updateLocalDb(result);\n  addEntitiesToLocalDb(result.users);\n  addEntitiesToLocalDb(result.chats);\n\n  if (result.fullUser.profilePhoto) {\n    addPhotoToLocalDb(result.fullUser.profilePhoto);\n  }\n\n  if (result.fullUser.personalPhoto) {\n    addPhotoToLocalDb(result.fullUser.personalPhoto);\n  }\n\n  if (result.fullUser.fallbackPhoto) {\n    addPhotoToLocalDb(result.fullUser.fallbackPhoto);\n  }\n\n  const botInfo = result.fullUser.botInfo;\n  if (botInfo?.descriptionPhoto) {\n    addPhotoToLocalDb(botInfo.descriptionPhoto);\n  }\n  if (botInfo?.descriptionDocument instanceof GramJs.Document) {\n    localDb.documents[botInfo.descriptionDocument.id.toString()] = botInfo.descriptionDocument;\n  }\n\n  if (result.fullUser.businessIntro?.sticker instanceof GramJs.Document) {\n    localDb.documents[result.fullUser.businessIntro.sticker.id.toString()] = result.fullUser.businessIntro.sticker;\n  }\n\n  const fullInfo = buildApiUserFullInfo(result);\n  const users = result.users.map(buildApiUser).filter(Boolean);\n  const chats = result.chats.map((c) => buildApiChatFromPreview(c)).filter(Boolean);\n\n  const user = users.find(({ id: userId }) => userId === id)!;\n\n  onUpdate({\n    '@type': 'updateUser',\n    id,\n    user: {\n      ...user,\n      avatarHash: user?.avatarHash || undefined,\n    },\n    fullInfo,\n  });\n\n  return {\n    user,\n    fullInfo,\n    users,\n    chats,\n  };\n}\n\nexport async function fetchCommonChats(id: string, accessHash?: string, maxId?: string) {\n  const commonChats = await invokeRequest(new GramJs.messages.GetCommonChats({\n    userId: buildInputEntity(id, accessHash) as GramJs.InputUser,\n    maxId: maxId ? buildMtpPeerId(maxId, getEntityTypeById(maxId)) : undefined,\n    limit: COMMON_CHATS_LIMIT,\n  }));\n\n  if (!commonChats) {\n    return undefined;\n  }\n\n  updateLocalDb(commonChats);\n\n  const chatIds: string[] = [];\n  const chats: ApiChat[] = [];\n\n  commonChats.chats.forEach((mtpChat) => {\n    const chat = buildApiChatFromPreview(mtpChat);\n\n    if (chat) {\n      chats.push(chat);\n      chatIds.push(chat.id);\n    }\n  });\n\n  return { chats, chatIds, isFullyLoaded: chatIds.length < COMMON_CHATS_LIMIT };\n}\n\nexport async function fetchNearestCountry() {\n  const dcInfo = await invokeRequest(new GramJs.help.GetNearestDc());\n\n  return dcInfo?.country;\n}\n\nexport async function fetchTopUsers() {\n  const topPeers = await invokeRequest(new GramJs.contacts.GetTopPeers({\n    correspondents: true,\n  }));\n  if (!(topPeers instanceof GramJs.contacts.TopPeers)) {\n    return undefined;\n  }\n\n  const users = topPeers.users.map(buildApiUser).filter((user) => Boolean(user) && !user.isSelf) as ApiUser[];\n  const ids = users.map(({ id }) => id);\n\n  return {\n    ids,\n    users,\n  };\n}\n\nexport async function fetchContactList() {\n  const result = await invokeRequest(new GramJs.contacts.GetContacts({ hash: BigInt('0') }));\n  if (!result || result instanceof GramJs.contacts.ContactsNotModified) {\n    return undefined;\n  }\n\n  addEntitiesToLocalDb(result.users);\n\n  const { users, userStatusesById } = buildApiUsersAndStatuses(result.users);\n\n  return {\n    users,\n    userStatusesById,\n    chats: result.users.map((user) => buildApiChatFromPreview(user)).filter(Boolean),\n  };\n}\n\nexport async function fetchUsers({ users }: { users: ApiUser[] }) {\n  const result = await invokeRequest(new GramJs.users.GetUsers({\n    id: users.map(({ id, accessHash }) => buildInputPeer(id, accessHash)),\n  }));\n  if (!result || !result.length) {\n    return undefined;\n  }\n\n  addEntitiesToLocalDb(result);\n\n  return buildApiUsersAndStatuses(result);\n}\n\nexport async function importContact({\n  phone,\n  firstName,\n  lastName,\n}: {\n  phone?: string;\n  firstName?: string;\n  lastName?: string;\n}) {\n  const result = await invokeRequest(new GramJs.contacts.ImportContacts({\n    contacts: [buildInputContact({\n      phone: phone || '',\n      firstName: firstName || '',\n      lastName: lastName || '',\n    })],\n  }));\n\n  if (result instanceof GramJs.contacts.ImportedContacts && result.users.length) {\n    addUserToLocalDb(result.users[0]);\n  }\n\n  return result?.imported.length ? buildApiPeerId(result.imported[0].userId, 'user') : undefined;\n}\n\nexport function updateContact({\n  id,\n  accessHash,\n  phoneNumber = '',\n  firstName = '',\n  lastName = '',\n  shouldSharePhoneNumber = false,\n}: {\n  id: string;\n  accessHash?: string;\n  phoneNumber?: string;\n  firstName?: string;\n  lastName?: string;\n  shouldSharePhoneNumber?: boolean;\n}) {\n  return invokeRequest(new GramJs.contacts.AddContact({\n    id: buildInputEntity(id, accessHash) as GramJs.InputUser,\n    firstName,\n    lastName,\n    phone: phoneNumber,\n    ...(shouldSharePhoneNumber && { addPhonePrivacyException: shouldSharePhoneNumber }),\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n\nexport async function deleteContact({\n  id,\n  accessHash,\n}: {\n  id: string;\n  accessHash?: string;\n}) {\n  const input = buildInputEntity(id, accessHash);\n  if (!(input instanceof GramJs.InputUser)) {\n    return;\n  }\n\n  const result = await invokeRequest(new GramJs.contacts.DeleteContacts({ id: [input] }));\n\n  if (!result) {\n    return;\n  }\n\n  onUpdate({\n    '@type': 'deleteContact',\n    id,\n  });\n}\n\nexport async function fetchProfilePhotos(user?: ApiUser, chat?: ApiChat) {\n  if (user) {\n    const { id, accessHash } = user;\n\n    const result = await invokeRequest(new GramJs.photos.GetUserPhotos({\n      userId: buildInputEntity(id, accessHash) as GramJs.InputUser,\n      limit: PROFILE_PHOTOS_LIMIT,\n      offset: 0,\n      maxId: BigInt('0'),\n    }));\n\n    if (!result) {\n      return undefined;\n    }\n\n    updateLocalDb(result);\n\n    return {\n      photos: result.photos\n        .filter((photo): photo is GramJs.Photo => photo instanceof GramJs.Photo)\n        .map((photo) => buildApiPhoto(photo)),\n      users: result.users.map(buildApiUser).filter(Boolean),\n    };\n  }\n\n  if (chat?.isRestricted) return undefined;\n\n  const result = await searchMessagesLocal({\n    chat: chat!,\n    type: 'profilePhoto',\n    limit: PROFILE_PHOTOS_LIMIT,\n  });\n\n  if (!result) {\n    return undefined;\n  }\n\n  const { messages, users } = result;\n\n  return {\n    photos: messages.map((message) => message.content.action!.photo).filter(Boolean),\n    users,\n  };\n}\n\nexport function reportSpam(userOrChat: ApiPeer) {\n  const { id, accessHash } = userOrChat;\n\n  return invokeRequest(new GramJs.messages.ReportSpam({\n    peer: buildInputPeer(id, accessHash),\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n\nexport function updateEmojiStatus(emojiStatus: ApiSticker, expires?: number) {\n  return invokeRequest(new GramJs.account.UpdateEmojiStatus({\n    emojiStatus: buildInputEmojiStatus(emojiStatus, expires),\n  }), {\n    shouldReturnTrue: true,\n  });\n}\n\nexport function saveCloseFriends(userIds: string[]) {\n  const id = userIds.map((userId) => buildMtpPeerId(userId, 'user'));\n\n  return invokeRequest(new GramJs.contacts.EditCloseFriends({ id }), {\n    shouldReturnTrue: true,\n  });\n}\n\nfunction updateLocalDb(result: (GramJs.photos.Photos | GramJs.photos.PhotosSlice | GramJs.messages.Chats)) {\n  if ('chats' in result) {\n    addEntitiesToLocalDb(result.chats);\n  }\n\n  if ('photos' in result) {\n    result.photos.forEach(addPhotoToLocalDb);\n  }\n\n  if ('users' in result) {\n    addEntitiesToLocalDb(result.users);\n  }\n}\n","import type { OnApiUpdate } from '../types';\n\nimport { MAX_INT_32 } from '../../config';\nimport { getServerTime } from '../../util/serverTime';\n\ntype UnmuteQueueItem = { chatId: string; topicId?: number; muteUntil: number };\nconst unmuteTimers = new Map<string, any>();\nconst unmuteQueue: Array<UnmuteQueueItem> = [];\nconst scheduleUnmute = (item: UnmuteQueueItem, onUpdate: NoneToVoidFunction) => {\n  const id = item.topicId ? `${item.chatId}-${item.topicId}` : item.chatId;\n  if (unmuteTimers.has(id)) {\n    clearTimeout(unmuteTimers.get(id));\n    unmuteTimers.delete(id);\n  }\n  if (item.muteUntil === MAX_INT_32 || item.muteUntil <= getServerTime()) return;\n  unmuteQueue.push(item);\n  unmuteQueue.sort((a, b) => b.muteUntil - a.muteUntil);\n  const next = unmuteQueue.pop();\n  if (!next) return;\n  const timer = setTimeout(() => {\n    onUpdate();\n    if (unmuteQueue.length) {\n      const afterNext = unmuteQueue.pop();\n      if (afterNext) scheduleUnmute(afterNext, onUpdate);\n    }\n  }, (item.muteUntil - getServerTime()) * 1000);\n  unmuteTimers.set(id, timer);\n};\n\nexport function scheduleMutedChatUpdate(chatId: string, muteUntil = 0, onUpdate: OnApiUpdate) {\n  scheduleUnmute({\n    chatId,\n    muteUntil,\n  }, () => onUpdate({\n    '@type': 'updateNotifyExceptions',\n    chatId,\n    isMuted: false,\n  }));\n}\n\nexport function scheduleMutedTopicUpdate(chatId: string, topicId: number, muteUntil = 0, onUpdate: OnApiUpdate) {\n  scheduleUnmute({\n    chatId,\n    topicId,\n    muteUntil,\n  }, () => onUpdate({\n    '@type': 'updateTopicNotifyExceptions',\n    chatId,\n    topicId,\n    isMuted: false,\n  }));\n}\n","/* eslint-disable max-classes-per-file */\nimport type { BigInteger } from 'big-integer';\n\nexport class LocalUpdatePts {\n  constructor(public pts: number, public ptsCount: number) {}\n}\n\nexport class LocalUpdateChannelPts {\n  constructor(public channelId: BigInteger, public pts: number, public ptsCount: number) {}\n}\n\nexport type UpdatePts = LocalUpdatePts | LocalUpdateChannelPts;\n\nexport function buildLocalUpdatePts(pts: number, ptsCount: number, channelId?: BigInteger) {\n  return channelId ? new LocalUpdateChannelPts(channelId, pts, ptsCount) : new LocalUpdatePts(pts, ptsCount);\n}\n","import { Api as GramJs } from '../../../lib/gramjs';\nimport { UpdateConnectionState, UpdateServerTimeOffset } from '../../../lib/gramjs/network';\n\nimport type { ApiChat } from '../../types';\nimport type { invokeRequest } from '../methods/client';\nimport type { Update } from './updater';\n\nimport { DEBUG } from '../../../config';\nimport SortedQueue from '../../../util/SortedQueue';\nimport { buildApiPeerId } from '../apiBuilders/peers';\nimport { buildInputEntity, buildMtpPeerId } from '../gramjsBuilders';\nimport { addEntitiesToLocalDb } from '../helpers';\nimport localDb from '../localDb';\nimport { dispatchUserAndChatUpdates, sendUpdate, updater } from './updater';\n\nimport { buildLocalUpdatePts, type UpdatePts } from './UpdatePts';\n\nexport type State = {\n  seq: number;\n  date: number;\n  pts: number;\n  qts: number;\n};\ntype SeqUpdate = (GramJs.Updates | GramJs.UpdatesCombined) & { _isFromDifference?: true };\ntype PtsUpdate = ((GramJs.TypeUpdate & { pts: number }) | UpdatePts) & { _isFromDifference?: true };\n\nconst COMMON_BOX_QUEUE_ID = '0';\nconst CHANNEL_DIFFERENCE_LIMIT = 1000;\nconst UPDATE_WAIT_TIMEOUT = 500;\n\nlet invoke: typeof invokeRequest;\nlet isInited = false;\n\nlet seqTimeout: ReturnType<typeof setTimeout> | undefined;\nconst PTS_TIMEOUTS = new Map<string, ReturnType<typeof setTimeout>>();\n\nconst SEQ_QUEUE = new SortedQueue<SeqUpdate>(seqComparator);\nconst PTS_QUEUE = new Map<string, SortedQueue<PtsUpdate>>();\n\nexport async function init(invokeReq: typeof invokeRequest) {\n  invoke = invokeReq;\n\n  await loadRemoteState();\n  isInited = true;\n\n  scheduleGetDifference();\n}\n\nexport function applyState(state: State) {\n  localDb.commonBoxState.seq = state.seq;\n  localDb.commonBoxState.date = state.date;\n  localDb.commonBoxState.pts = state.pts;\n  localDb.commonBoxState.qts = state.qts;\n}\n\nexport function processUpdate(update: Update, isFromDifference?: boolean, shouldOnlySave?: boolean) {\n  if (update instanceof UpdateConnectionState) {\n    if (update.state === UpdateConnectionState.connected && isInited) {\n      scheduleGetDifference();\n    }\n\n    updater(update);\n    return;\n  }\n\n  if (update instanceof UpdateServerTimeOffset) {\n    updater(update);\n    return;\n  }\n\n  if (localDb.commonBoxState.seq === undefined) {\n    // Drop updates received before first sync\n    return;\n  }\n\n  if (update instanceof GramJs.Updates || update instanceof GramJs.UpdatesCombined) {\n    if (isFromDifference) {\n      // eslint-disable-next-line no-underscore-dangle\n      (update as SeqUpdate)._isFromDifference = true;\n    }\n\n    saveSeqUpdate(update, shouldOnlySave);\n    return;\n  }\n\n  if ('pts' in update) {\n    if (update instanceof GramJs.UpdateChannelTooLong) {\n      getChannelDifference(getUpdateChannelId(update));\n      return;\n    }\n    if (isFromDifference) {\n      // eslint-disable-next-line no-underscore-dangle\n      (update as PtsUpdate)._isFromDifference = true;\n    }\n    savePtsUpdate(update, shouldOnlySave);\n    return;\n  }\n\n  updater(update);\n}\n\nexport function updateChannelState(channelId: string, pts: number) {\n  const channel = localDb.chats[channelId];\n  if (!(channel instanceof GramJs.Channel)) {\n    if (DEBUG) {\n      // eslint-disable-next-line no-console\n      console.error(`[UpdateManager] Channel ${channelId} not found in localDb`);\n    }\n    return;\n  }\n\n  const currentState = localDb.channelPtsById[channelId];\n\n  if (currentState && currentState < pts) {\n    scheduleGetChannelDifference(channelId);\n    return;\n  }\n\n  localDb.channelPtsById[channelId] = pts;\n}\n\nfunction applyUpdate(updateObject: SeqUpdate | PtsUpdate) {\n  if ('seq' in updateObject && updateObject.seq) {\n    localDb.commonBoxState.seq = updateObject.seq;\n    localDb.commonBoxState.date = updateObject.date;\n  }\n\n  if ('qts' in updateObject) {\n    localDb.commonBoxState.qts = updateObject.qts;\n  }\n\n  if ('pts' in updateObject) {\n    const channelId = getUpdateChannelId(updateObject);\n    if (channelId !== COMMON_BOX_QUEUE_ID) {\n      localDb.channelPtsById[channelId] = updateObject.pts;\n    } else {\n      localDb.commonBoxState.pts = updateObject.pts;\n    }\n  }\n\n  if (updateObject instanceof GramJs.UpdatesCombined || updateObject instanceof GramJs.Updates) {\n    const entities = updateObject.users.concat(updateObject.chats);\n\n    updateObject.updates.forEach((update) => {\n      if (entities) {\n        // eslint-disable-next-line no-underscore-dangle\n        (update as any)._entities = entities;\n      }\n\n      processUpdate(update);\n    });\n  } else {\n    updater(updateObject);\n  }\n}\n\nfunction saveSeqUpdate(update: GramJs.Updates | GramJs.UpdatesCombined, shouldOnlySave?: boolean) {\n  SEQ_QUEUE.add(update);\n\n  if (!shouldOnlySave) popSeqQueue();\n}\n\nfunction savePtsUpdate(update: PtsUpdate, shouldOnlySave?: boolean) {\n  const channelId = getUpdateChannelId(update);\n\n  const ptsQueue = PTS_QUEUE.get(channelId) || new SortedQueue<PtsUpdate>(ptsComparator);\n  ptsQueue.add(update);\n\n  PTS_QUEUE.set(channelId, ptsQueue);\n\n  if (!shouldOnlySave) popPtsQueue(channelId);\n}\n\nfunction popSeqQueue() {\n  if (!SEQ_QUEUE.size) return;\n\n  const update = SEQ_QUEUE.pop()!;\n  const localSeq = localDb.commonBoxState.seq;\n  const seqStart = 'seqStart' in update ? update.seqStart : update.seq;\n\n  // eslint-disable-next-line no-underscore-dangle\n  if (seqStart === 0 || (update._isFromDifference && seqStart >= localSeq + 1)) {\n    applyUpdate(update);\n  } else if (seqStart === localSeq + 1) {\n    clearTimeout(seqTimeout);\n    seqTimeout = undefined;\n\n    applyUpdate(update);\n  } else if (seqStart > localSeq + 1) {\n    SEQ_QUEUE.add(update); // Return update to queue\n    scheduleGetDifference();\n    return; // Prevent endless loop\n  }\n\n  popSeqQueue();\n}\n\nfunction popPtsQueue(channelId: string) {\n  const ptsQueue = PTS_QUEUE.get(channelId);\n  if (!ptsQueue?.size) return;\n\n  const update = ptsQueue.pop()!;\n  const localPts = channelId === COMMON_BOX_QUEUE_ID ? localDb.commonBoxState.pts : localDb.channelPtsById[channelId];\n  const pts = update.pts;\n  const ptsCount = getPtsCount(update);\n\n  // Sometimes server sends updates for channels that are opened in other clients. We ignore them\n  if (localPts === undefined) {\n    if (DEBUG) {\n      // Uncomment to debug missing updates\n      // eslint-disable-next-line no-console\n      // console.error('[UpdateManager] Got pts update without local state', channelId);\n    }\n    return;\n  }\n\n  // eslint-disable-next-line no-underscore-dangle\n  if (update._isFromDifference && pts >= localPts + ptsCount) {\n    applyUpdate(update);\n  } else if (pts === localPts + ptsCount) {\n    clearTimeout(PTS_TIMEOUTS.get(channelId));\n    PTS_TIMEOUTS.delete(channelId);\n\n    applyUpdate(update);\n  } else if (pts > localPts + ptsCount) {\n    ptsQueue.add(update); // Return update to queue\n    if (channelId === COMMON_BOX_QUEUE_ID) {\n      scheduleGetDifference();\n    } else {\n      scheduleGetChannelDifference(channelId);\n    }\n    return; // Prevent endless loop\n  }\n\n  popPtsQueue(channelId);\n}\n\nexport function scheduleGetChannelDifference(channelId: string) {\n  if (PTS_TIMEOUTS.has(channelId)) return;\n\n  const timeout = setTimeout(async () => {\n    await getChannelDifference(channelId);\n    PTS_TIMEOUTS.delete(channelId);\n  }, UPDATE_WAIT_TIMEOUT);\n  PTS_TIMEOUTS.set(channelId, timeout);\n}\n\nfunction scheduleGetDifference() {\n  if (seqTimeout) return;\n\n  seqTimeout = setTimeout(async () => {\n    await getDifference();\n    seqTimeout = undefined;\n  }, UPDATE_WAIT_TIMEOUT);\n}\n\nfunction getUpdateChannelId(update: Update) {\n  if ('channelId' in update && 'pts' in update) {\n    return buildApiPeerId(update.channelId, 'channel');\n  }\n\n  if (update instanceof GramJs.UpdateNewChannelMessage || update instanceof GramJs.UpdateEditChannelMessage) {\n    const peer = update.message.peerId as GramJs.PeerChannel;\n    return buildApiPeerId(peer.channelId, 'channel');\n  }\n\n  return COMMON_BOX_QUEUE_ID;\n}\n\nexport async function getDifference() {\n  if (!isInited) {\n    throw new Error('UpdatesManager not initialized');\n  }\n\n  if (!localDb.commonBoxState?.date) {\n    forceSync();\n    return;\n  }\n\n  sendUpdate({\n    '@type': 'updateFetchingDifference',\n    isFetching: true,\n  });\n\n  const response = await invoke(new GramJs.updates.GetDifference({\n    pts: localDb.commonBoxState.pts,\n    date: localDb.commonBoxState.date,\n    qts: localDb.commonBoxState.qts,\n  }));\n\n  if (!response || response instanceof GramJs.updates.DifferenceTooLong) {\n    forceSync();\n    return;\n  }\n\n  if (response instanceof GramJs.updates.DifferenceEmpty) {\n    localDb.commonBoxState.seq = response.seq;\n    localDb.commonBoxState.date = response.date;\n    sendUpdate({\n      '@type': 'updateFetchingDifference',\n      isFetching: false,\n    });\n    return;\n  }\n\n  processDifference(response);\n\n  const newState = response instanceof GramJs.updates.DifferenceSlice ? response.intermediateState : response.state;\n  applyState(newState);\n\n  if (response instanceof GramJs.updates.DifferenceSlice) {\n    getDifference();\n    return;\n  }\n\n  sendUpdate({\n    '@type': 'updateFetchingDifference',\n    isFetching: false,\n  });\n}\n\nasync function getChannelDifference(channelId: string) {\n  const channel = localDb.chats[channelId];\n  if (!channel || !(channel instanceof GramJs.Channel) || !channel.accessHash || !localDb.channelPtsById[channelId]) {\n    if (DEBUG) {\n      // eslint-disable-next-line no-console\n      console.error('[UpdateManager] Channel for difference not found', channelId, channel);\n    }\n    return;\n  }\n\n  const response = await invoke(new GramJs.updates.GetChannelDifference({\n    channel: buildInputEntity(channelId, channel.accessHash.toString()) as GramJs.InputChannel,\n    pts: localDb.channelPtsById[channelId],\n    filter: new GramJs.ChannelMessagesFilterEmpty(),\n    limit: CHANNEL_DIFFERENCE_LIMIT,\n  }));\n\n  if (!response) {\n    if (DEBUG) {\n      // eslint-disable-next-line no-console\n      console.warn('[UpdatesManager] Failed to get ChannelDifference', channelId, channel);\n    }\n    return;\n  }\n\n  if (response instanceof GramJs.updates.ChannelDifferenceTooLong) {\n    forceSync();\n    return;\n  }\n\n  localDb.channelPtsById[channelId] = response.pts;\n\n  if (response instanceof GramJs.updates.ChannelDifferenceEmpty) {\n    popPtsQueue(channelId); // Continue processing updates in queue\n    return;\n  }\n\n  processDifference(response, channelId);\n\n  if (!response.final) {\n    getChannelDifference(channelId);\n  }\n}\n\nfunction forceSync() {\n  reset();\n\n  sendUpdate({\n    '@type': 'requestSync',\n  });\n\n  loadRemoteState();\n}\n\nexport function reset() {\n  PTS_QUEUE.clear();\n  SEQ_QUEUE.clear();\n\n  clearTimeout(seqTimeout);\n  seqTimeout = undefined;\n\n  PTS_TIMEOUTS.forEach((timeout) => {\n    clearTimeout(timeout);\n  });\n  PTS_TIMEOUTS.clear();\n\n  localDb.commonBoxState = {};\n\n  Object.keys(localDb.channelPtsById).forEach((channelId) => {\n    localDb.channelPtsById[channelId] = 0;\n  });\n\n  isInited = false;\n}\n\nexport function processAffectedHistory(\n  chat: ApiChat, affected: GramJs.messages.AffectedMessages | GramJs.messages.AffectedHistory,\n) {\n  const isChannel = chat.type === 'chatTypeChannel' || chat.type === 'chatTypeSuperGroup';\n  const channeId = isChannel ? buildMtpPeerId(chat.id, 'channel') : undefined;\n  const update = buildLocalUpdatePts(affected.pts, affected.ptsCount, channeId);\n\n  processUpdate(update);\n}\n\nasync function loadRemoteState() {\n  const remoteState = await invoke(new GramJs.updates.GetState());\n  if (!remoteState) return;\n\n  applyState(remoteState);\n\n  isInited = true;\n}\n\nfunction processDifference(\n  difference: GramJs.updates.Difference | GramJs.updates.DifferenceSlice | GramJs.updates.ChannelDifference,\n  channelId?: string,\n) {\n  difference.newMessages.forEach((message) => {\n    updater(new GramJs.UpdateNewMessage({\n      message,\n      pts: 0,\n      ptsCount: 0,\n    }));\n  });\n\n  addEntitiesToLocalDb(difference.users);\n  addEntitiesToLocalDb(difference.chats);\n\n  dispatchUserAndChatUpdates(difference.users);\n  dispatchUserAndChatUpdates(difference.chats);\n\n  // Ignore `pts`/`seq` holes when applying updates from difference\n  // BUT, if we got an `UpdateChannelTooLong`, make sure to process other updates after receiving `ChannelDifference`\n  const channelTooLongIds = new Set<string>();\n\n  difference.otherUpdates.forEach((update) => {\n    const updateChannelId = getUpdateChannelId(update);\n\n    if (update instanceof GramJs.UpdateChannelTooLong) {\n      channelTooLongIds.add(getUpdateChannelId(update));\n    }\n\n    const shouldApplyImmediately = !channelTooLongIds.has(updateChannelId);\n    processUpdate(update, shouldApplyImmediately, !shouldApplyImmediately);\n  });\n\n  // Continue processing updates in queues\n  if (channelId) {\n    popPtsQueue(channelId);\n  } else {\n    popSeqQueue();\n  }\n}\n\nfunction getPtsCount(update: PtsUpdate) {\n  return 'ptsCount' in update ? update.ptsCount : 0;\n}\n\nfunction seqComparator(a: SeqUpdate, b: SeqUpdate) {\n  const seqA = 'seqStart' in a ? a.seqStart : a.seq;\n  const seqB = 'seqStart' in b ? b.seqStart : b.seq;\n\n  return seqA - seqB;\n}\n\nfunction ptsComparator(a: PtsUpdate, b: PtsUpdate) {\n  const diff = a.pts - b.pts;\n  if (diff !== 0) {\n    return diff;\n  }\n\n  return getPtsCount(b) - getPtsCount(a);\n}\n","import { Api as GramJs, connection } from '../../../lib/gramjs';\n\nimport type { GroupCallConnectionData } from '../../../lib/secret-sauce';\nimport type {\n  ApiMessage, ApiStory, ApiStorySkipped,\n  ApiUpdate, ApiUpdateConnectionStateType, OnApiUpdate,\n} from '../../types';\n\nimport { DEBUG, GENERAL_TOPIC_ID } from '../../../config';\nimport { compact, omit, pick } from '../../../util/iteratees';\nimport { getServerTimeOffset, setServerTimeOffset } from '../../../util/serverTime';\nimport { buildApiBotMenuButton } from '../apiBuilders/bots';\nimport {\n  buildApiGroupCall,\n  buildApiGroupCallParticipant,\n  buildPhoneCall,\n  getGroupCallId,\n} from '../apiBuilders/calls';\nimport {\n  buildApiChatFolder,\n  buildApiChatFromPreview,\n  buildApiChatSettings,\n  buildAvatarHash,\n  buildChatMember,\n  buildChatMembers,\n  buildChatTypingStatus,\n} from '../apiBuilders/chats';\nimport { buildApiPhoto, buildApiUsernames, buildPrivacyRules } from '../apiBuilders/common';\nimport { omitVirtualClassFields } from '../apiBuilders/helpers';\nimport {\n  buildApiMessageExtendedMediaPreview,\n  buildBoughtMediaContent,\n  buildPoll,\n  buildPollResults,\n} from '../apiBuilders/messageContent';\nimport {\n  buildApiMessage,\n  buildApiMessageFromNotification,\n  buildApiMessageFromShort,\n  buildApiMessageFromShortChat,\n  buildApiQuickReply,\n  buildApiThreadInfoFromMessage,\n  buildMessageDraft,\n} from '../apiBuilders/messages';\nimport {\n  buildApiNotifyException,\n  buildApiNotifyExceptionTopic,\n  buildPrivacyKey,\n} from '../apiBuilders/misc';\nimport { buildApiEmojiStatus, buildApiPeerId, getApiChatIdFromMtpPeer } from '../apiBuilders/peers';\nimport {\n  buildApiReaction,\n  buildMessageReactions,\n} from '../apiBuilders/reactions';\nimport { buildApiStealthMode, buildApiStory } from '../apiBuilders/stories';\nimport { buildApiEmojiInteraction, buildStickerSet } from '../apiBuilders/symbols';\nimport {\n  buildApiUser,\n  buildApiUserStatus,\n} from '../apiBuilders/users';\nimport {\n  buildChatPhotoForLocalDb,\n  buildMessageFromUpdate,\n} from '../gramjsBuilders';\nimport {\n  addEntitiesToLocalDb,\n  addMessageToLocalDb,\n  addPhotoToLocalDb,\n  addStoryToLocalDb,\n  isChatFolder,\n  log,\n  resolveMessageApiChatId,\n  serializeBytes,\n} from '../helpers';\nimport localDb from '../localDb';\nimport { scheduleMutedChatUpdate, scheduleMutedTopicUpdate } from '../scheduleUnmute';\n\nimport LocalUpdatePremiumFloodWait from './UpdatePremiumFloodWait';\nimport { LocalUpdateChannelPts, LocalUpdatePts, type UpdatePts } from './UpdatePts';\n\nexport type Update = (\n  (GramJs.TypeUpdate | GramJs.TypeUpdates) & { _entities?: (GramJs.TypeUser | GramJs.TypeChat)[] }\n) | typeof connection.UpdateConnectionState | UpdatePts | LocalUpdatePremiumFloodWait;\n\nlet onUpdate: OnApiUpdate;\n\nexport function init(_onUpdate: OnApiUpdate) {\n  onUpdate = _onUpdate;\n}\n\nconst sentMessageIds = new Set();\n\nexport function dispatchUserAndChatUpdates(entities: (GramJs.TypeUser | GramJs.TypeChat)[]) {\n  entities\n    .filter((e) => e instanceof GramJs.User)\n    .map(buildApiUser)\n    .forEach((user) => {\n      if (!user) {\n        return;\n      }\n\n      onUpdate({\n        '@type': 'updateUser',\n        id: user.id,\n        user,\n      });\n    });\n\n  entities\n    .filter((e) => (\n      e instanceof GramJs.Chat || e instanceof GramJs.ChatForbidden\n      || e instanceof GramJs.Channel || e instanceof GramJs.ChannelForbidden\n    ))\n    .map((e) => buildApiChatFromPreview(e))\n    .forEach((chat) => {\n      if (!chat) {\n        return;\n      }\n\n      onUpdate({\n        '@type': 'updateChat',\n        id: chat.id,\n        chat,\n      });\n    });\n}\n\nexport function dispatchThreadInfoUpdates(messages: (GramJs.TypeMessage | undefined)[]) {\n  const threadInfoUpdates = compact(messages).map(buildApiThreadInfoFromMessage).filter(Boolean);\n  if (!threadInfoUpdates.length) return;\n\n  onUpdate({\n    '@type': 'updateThreadInfos',\n    threadInfoUpdates,\n  });\n}\n\nexport function sendUpdate(update: ApiUpdate) {\n  onUpdate(update);\n}\n\nexport function updater(update: Update) {\n  if (update instanceof connection.UpdateServerTimeOffset) {\n    setServerTimeOffset(update.timeOffset);\n\n    onUpdate({\n      '@type': 'updateServerTimeOffset',\n      serverTimeOffset: update.timeOffset,\n    });\n  } else if (update instanceof connection.UpdateConnectionState) {\n    let connectionState: ApiUpdateConnectionStateType;\n\n    switch (update.state) {\n      case connection.UpdateConnectionState.disconnected:\n        connectionState = 'connectionStateConnecting';\n        break;\n      case connection.UpdateConnectionState.broken:\n        connectionState = 'connectionStateBroken';\n        break;\n      case connection.UpdateConnectionState.connected:\n      default:\n        connectionState = 'connectionStateReady';\n        break;\n    }\n\n    onUpdate({\n      '@type': 'updateConnectionState',\n      connectionState,\n    });\n\n    // Messages\n  } else if (\n    update instanceof GramJs.UpdateNewMessage\n    || update instanceof GramJs.UpdateNewScheduledMessage\n    || update instanceof GramJs.UpdateNewChannelMessage\n    || update instanceof GramJs.UpdateShortChatMessage\n    || update instanceof GramJs.UpdateShortMessage\n  ) {\n    let message: ApiMessage | undefined;\n    let shouldForceReply: boolean | undefined;\n\n    // eslint-disable-next-line no-underscore-dangle\n    const entities = update._entities;\n    if (entities) {\n      addEntitiesToLocalDb(entities);\n      dispatchUserAndChatUpdates(entities);\n    }\n\n    if (update instanceof GramJs.UpdateShortChatMessage) {\n      message = buildApiMessageFromShortChat(update);\n    } else if (update instanceof GramJs.UpdateShortMessage) {\n      message = buildApiMessageFromShort(update);\n    } else {\n      // TODO Remove if proven not reproducing\n      if (update.message instanceof GramJs.MessageEmpty) {\n        if (DEBUG) {\n          // eslint-disable-next-line no-console\n          console.error('Unexpected update:', update.className, update);\n        }\n\n        return;\n      }\n\n      addMessageToLocalDb(update.message);\n\n      message = buildApiMessage(update.message)!;\n      dispatchThreadInfoUpdates([update.message]);\n\n      shouldForceReply = 'replyMarkup' in update.message\n        && update.message?.replyMarkup instanceof GramJs.ReplyKeyboardForceReply\n        && (!update.message.replyMarkup.selective || message.isMentioned);\n    }\n\n    if (update instanceof GramJs.UpdateNewScheduledMessage) {\n      onUpdate({\n        '@type': sentMessageIds.has(message.id) ? 'updateScheduledMessage' : 'newScheduledMessage',\n        id: message.id,\n        chatId: message.chatId,\n        message,\n      });\n    } else {\n      // We don't have preview for action or 'via bot' messages, so `newMessage` update here is required\n      const hasLocalCopy = sentMessageIds.has(message.id) && !message.viaBotId && !message.content.action;\n      onUpdate({\n        '@type': hasLocalCopy ? 'updateMessage' : 'newMessage',\n        id: message.id,\n        chatId: message.chatId,\n        message,\n        shouldForceReply,\n      });\n    }\n\n    // Some updates to a Chat/Channel don't have a dedicated update class.\n    // We can get info on some updates from Service Messages.\n    if (update.message instanceof GramJs.MessageService) {\n      const { action } = update.message;\n\n      if (action instanceof GramJs.MessageActionChatEditTitle) {\n        onUpdate({\n          '@type': 'updateChat',\n          id: message.chatId,\n          chat: {\n            title: action.title,\n          },\n        });\n      } else if (action instanceof GramJs.MessageActionChatEditPhoto) {\n        const photo = buildChatPhotoForLocalDb(action.photo);\n        const avatarHash = buildAvatarHash(photo);\n\n        const localDbChatId = resolveMessageApiChatId(update.message)!;\n        if (localDb.chats[localDbChatId]) {\n          localDb.chats[localDbChatId].photo = photo;\n        }\n        addPhotoToLocalDb(action.photo);\n\n        if (avatarHash) {\n          onUpdate({\n            '@type': 'updateChat',\n            id: message.chatId,\n            chat: {\n              avatarHash,\n            },\n            ...(action.photo instanceof GramJs.Photo && { newProfilePhoto: buildApiPhoto(action.photo) }),\n          });\n        }\n      } else if (action instanceof GramJs.MessageActionChatDeletePhoto) {\n        const localDbChatId = resolveMessageApiChatId(update.message)!;\n        if (localDb.chats[localDbChatId]) {\n          localDb.chats[localDbChatId].photo = new GramJs.ChatPhotoEmpty();\n        }\n\n        onUpdate({\n          '@type': 'updateChat',\n          id: message.chatId,\n          chat: { avatarHash: undefined },\n        });\n      } else if (action instanceof GramJs.MessageActionChatDeleteUser) {\n        // eslint-disable-next-line no-underscore-dangle\n        if (update._entities && update._entities.some((e): e is GramJs.User => (\n          e instanceof GramJs.User && Boolean(e.self) && e.id === action.userId\n        ))) {\n          onUpdate({\n            '@type': 'updateChat',\n            id: message.chatId,\n            chat: {\n              isForbidden: true,\n              isNotJoined: true,\n            },\n          });\n        }\n      } else if (action instanceof GramJs.MessageActionChatAddUser) {\n        // eslint-disable-next-line no-underscore-dangle\n        if (update._entities && update._entities.some((e): e is GramJs.User => (\n          e instanceof GramJs.User && Boolean(e.self) && action.users.includes(e.id)\n        ))) {\n          onUpdate({\n            '@type': 'updateChatJoin',\n            id: message.chatId,\n          });\n        }\n      } else if (action instanceof GramJs.MessageActionGroupCall) {\n        if (!action.duration && action.call) {\n          onUpdate({\n            '@type': 'updateGroupCallChatId',\n            chatId: message.chatId,\n            call: {\n              id: action.call.id.toString(),\n              accessHash: action.call.accessHash.toString(),\n            },\n          });\n        }\n      } else if (action instanceof GramJs.MessageActionTopicEdit) {\n        const replyTo = update.message.replyTo instanceof GramJs.MessageReplyHeader\n          ? update.message.replyTo\n          : undefined;\n        const {\n          replyToMsgId, replyToTopId, forumTopic: isTopicReply,\n        } = replyTo || {};\n        const topicId = !isTopicReply ? GENERAL_TOPIC_ID : replyToTopId || replyToMsgId || GENERAL_TOPIC_ID;\n\n        onUpdate({\n          '@type': 'updateTopic',\n          chatId: getApiChatIdFromMtpPeer(update.message.peerId!),\n          topicId,\n        });\n      } else if (action instanceof GramJs.MessageActionTopicCreate) {\n        onUpdate({\n          '@type': 'updateTopics',\n          chatId: getApiChatIdFromMtpPeer(update.message.peerId!),\n        });\n      }\n    }\n  } else if (update instanceof GramJs.UpdateQuickReplyMessage) {\n    const message = buildApiMessage(update.message);\n    if (!message) return;\n\n    onUpdate({\n      '@type': 'updateQuickReplyMessage',\n      id: message.id,\n      message,\n    });\n  } else if (update instanceof GramJs.UpdateDeleteQuickReplyMessages) {\n    onUpdate({\n      '@type': 'deleteQuickReplyMessages',\n      quickReplyId: update.shortcutId,\n      messageIds: update.messages,\n    });\n  } else if (update instanceof GramJs.UpdateQuickReplies) {\n    const quickReplies = update.quickReplies.map(buildApiQuickReply);\n    onUpdate({\n      '@type': 'updateQuickReplies',\n      quickReplies,\n    });\n  } else if (update instanceof GramJs.UpdateNewQuickReply) {\n    const quickReply = buildApiQuickReply(update.quickReply);\n    onUpdate({\n      '@type': 'updateQuickReplies',\n      quickReplies: [quickReply],\n    });\n  } else if (update instanceof GramJs.UpdateDeleteQuickReply) {\n    onUpdate({\n      '@type': 'deleteQuickReply',\n      quickReplyId: update.shortcutId,\n    });\n  } else if (\n    update instanceof GramJs.UpdateEditMessage\n    || update instanceof GramJs.UpdateEditChannelMessage\n  ) {\n    // TODO Remove if proven not reproducing\n    if (update.message instanceof GramJs.MessageEmpty) {\n      if (DEBUG) {\n        // eslint-disable-next-line no-console\n        console.error('Unexpected update:', update.className, update);\n      }\n\n      return;\n    }\n\n    addMessageToLocalDb(update.message);\n\n    // Workaround for a weird server behavior when own message is marked as incoming\n    const message = omit(buildApiMessage(update.message)!, ['isOutgoing']);\n    dispatchThreadInfoUpdates([update.message]);\n\n    onUpdate({\n      '@type': 'updateMessage',\n      id: message.id,\n      chatId: message.chatId,\n      message,\n    });\n  } else if (update instanceof GramJs.UpdateMessageReactions) {\n    onUpdate({\n      '@type': 'updateMessageReactions',\n      id: update.msgId,\n      chatId: getApiChatIdFromMtpPeer(update.peer),\n      reactions: buildMessageReactions(update.reactions),\n    });\n  } else if (update instanceof GramJs.UpdateMessageExtendedMedia) {\n    const chatId = getApiChatIdFromMtpPeer(update.peer);\n    const isBought = update.extendedMedia[0] instanceof GramJs.MessageExtendedMedia;\n    if (isBought) {\n      const boughtMedia = buildBoughtMediaContent(update.extendedMedia);\n\n      if (!boughtMedia?.length) return;\n\n      onUpdate({\n        '@type': 'updateMessageExtendedMedia',\n        id: update.msgId,\n        chatId,\n        isBought,\n        extendedMedia: boughtMedia,\n      });\n      return;\n    }\n\n    const previewMedia = !isBought ? update.extendedMedia\n      .filter((m): m is GramJs.MessageExtendedMediaPreview => m instanceof GramJs.MessageExtendedMediaPreview)\n      .map((m) => buildApiMessageExtendedMediaPreview(m))\n      .filter(Boolean) : undefined;\n\n    if (!previewMedia?.length) return;\n\n    onUpdate({\n      '@type': 'updateMessageExtendedMedia',\n      id: update.msgId,\n      chatId,\n      extendedMedia: previewMedia,\n    });\n  } else if (update instanceof GramJs.UpdateDeleteMessages) {\n    onUpdate({\n      '@type': 'deleteMessages',\n      ids: update.messages,\n    });\n  } else if (update instanceof GramJs.UpdateDeleteScheduledMessages) {\n    onUpdate({\n      '@type': 'deleteScheduledMessages',\n      ids: update.messages,\n      chatId: getApiChatIdFromMtpPeer(update.peer),\n    });\n  } else if (update instanceof GramJs.UpdateDeleteChannelMessages) {\n    const chatId = buildApiPeerId(update.channelId, 'channel');\n\n    onUpdate({\n      '@type': 'deleteMessages',\n      ids: update.messages,\n      chatId,\n    });\n  } else if (update instanceof GramJs.UpdateServiceNotification) {\n    if (update.popup) {\n      onUpdate({\n        '@type': 'error',\n        error: {\n          message: update.message,\n        },\n      });\n    } else {\n      const currentDate = Date.now() / 1000 + getServerTimeOffset();\n      const message = buildApiMessageFromNotification(update, currentDate);\n\n      addMessageToLocalDb(buildMessageFromUpdate(message.id, message.chatId, update));\n\n      onUpdate({\n        '@type': 'updateServiceNotification',\n        message,\n      });\n    }\n  } else if (update instanceof GramJs.UpdateMessageID || update instanceof GramJs.UpdateShortSentMessage) {\n    sentMessageIds.add(update.id);\n  } else if (update instanceof GramJs.UpdateReadMessagesContents) {\n    onUpdate({\n      '@type': 'updateCommonBoxMessages',\n      ids: update.messages,\n      messageUpdate: {\n        hasUnreadMention: false,\n        isMediaUnread: false,\n      },\n    });\n  } else if (update instanceof GramJs.UpdateChannelReadMessagesContents) {\n    onUpdate({\n      '@type': 'updateChannelMessages',\n      channelId: buildApiPeerId(update.channelId, 'channel'),\n      ids: update.messages,\n      messageUpdate: {\n        hasUnreadMention: false,\n        isMediaUnread: false,\n      },\n    });\n  } else if (update instanceof GramJs.UpdateMessagePoll) {\n    const { pollId, poll, results } = update;\n    if (poll) {\n      const apiPoll = buildPoll(poll, results);\n\n      onUpdate({\n        '@type': 'updateMessagePoll',\n        pollId: String(pollId),\n        pollUpdate: apiPoll,\n      });\n    } else {\n      const pollResults = buildPollResults(results);\n      onUpdate({\n        '@type': 'updateMessagePoll',\n        pollId: String(pollId),\n        pollUpdate: { results: pollResults },\n      });\n    }\n  } else if (update instanceof GramJs.UpdateMessagePollVote) {\n    onUpdate({\n      '@type': 'updateMessagePollVote',\n      pollId: String(update.pollId),\n      peerId: getApiChatIdFromMtpPeer(update.peer),\n      options: update.options.map(serializeBytes),\n    });\n  } else if (update instanceof GramJs.UpdateChannelMessageViews) {\n    onUpdate({\n      '@type': 'updateMessage',\n      chatId: buildApiPeerId(update.channelId, 'channel'),\n      id: update.id,\n      message: { viewsCount: update.views },\n    });\n\n    // Chats\n  } else if (update instanceof GramJs.UpdateReadHistoryInbox) {\n    onUpdate({\n      '@type': 'updateChatInbox',\n      id: getApiChatIdFromMtpPeer(update.peer),\n      chat: {\n        lastReadInboxMessageId: update.maxId,\n        unreadCount: update.stillUnreadCount,\n      },\n    });\n  } else if (update instanceof GramJs.UpdateReadHistoryOutbox) {\n    onUpdate({\n      '@type': 'updateChat',\n      id: getApiChatIdFromMtpPeer(update.peer),\n      chat: {\n        lastReadOutboxMessageId: update.maxId,\n      },\n    });\n  } else if (update instanceof GramJs.UpdateReadChannelInbox) {\n    onUpdate({\n      '@type': 'updateChat',\n      id: buildApiPeerId(update.channelId, 'channel'),\n      chat: {\n        lastReadInboxMessageId: update.maxId,\n        unreadCount: update.stillUnreadCount,\n      },\n    });\n  } else if (update instanceof GramJs.UpdateReadChannelOutbox) {\n    onUpdate({\n      '@type': 'updateChat',\n      id: buildApiPeerId(update.channelId, 'channel'),\n      chat: {\n        lastReadOutboxMessageId: update.maxId,\n      },\n    });\n  } else if (update instanceof GramJs.UpdateReadChannelDiscussionInbox) {\n    onUpdate({\n      '@type': 'updateThreadInfos',\n      threadInfoUpdates: [{\n        chatId: buildApiPeerId(update.channelId, 'channel'),\n        threadId: update.topMsgId,\n        lastReadInboxMessageId: update.readMaxId,\n      }],\n    });\n  } else if (update instanceof GramJs.UpdateReadChannelDiscussionOutbox) {\n    onUpdate({\n      '@type': 'updateChat',\n      id: buildApiPeerId(update.channelId, 'channel'),\n      chat: {\n        lastReadOutboxMessageId: update.readMaxId,\n      },\n    });\n  } else if (\n    update instanceof GramJs.UpdateDialogPinned\n    && update.peer instanceof GramJs.DialogPeer\n  ) {\n    onUpdate({\n      '@type': 'updateChatPinned',\n      id: getApiChatIdFromMtpPeer(update.peer.peer),\n      isPinned: update.pinned || false,\n    });\n  } else if (update instanceof GramJs.UpdatePinnedDialogs) {\n    const ids = update.order\n      ? update.order\n        .filter((dp): dp is GramJs.DialogPeer => dp instanceof GramJs.DialogPeer)\n        .map((dp) => getApiChatIdFromMtpPeer(dp.peer))\n      : [];\n\n    onUpdate({\n      '@type': 'updatePinnedChatIds',\n      ids,\n      folderId: update.folderId || undefined,\n    });\n  } else if (\n    update instanceof GramJs.UpdateSavedDialogPinned\n    && update.peer instanceof GramJs.DialogPeer\n  ) {\n    onUpdate({\n      '@type': 'updateSavedDialogPinned',\n      id: getApiChatIdFromMtpPeer(update.peer.peer),\n      isPinned: update.pinned || false,\n    });\n  } else if (update instanceof GramJs.UpdatePinnedSavedDialogs) {\n    const ids = update.order\n      ? update.order\n        .filter((dp): dp is GramJs.DialogPeer => dp instanceof GramJs.DialogPeer)\n        .map((dp) => getApiChatIdFromMtpPeer(dp.peer))\n      : [];\n\n    onUpdate({\n      '@type': 'updatePinnedSavedDialogIds',\n      ids,\n    });\n  } else if (update instanceof GramJs.UpdateFolderPeers) {\n    update.folderPeers.forEach((folderPeer) => {\n      const { folderId, peer } = folderPeer;\n\n      onUpdate({\n        '@type': 'updateChatListType',\n        id: getApiChatIdFromMtpPeer(peer),\n        folderId,\n      });\n    });\n  } else if (update instanceof GramJs.UpdateDialogFilter) {\n    const { id, filter } = update;\n    const folder = isChatFolder(filter) ? buildApiChatFolder(filter) : undefined;\n\n    onUpdate({\n      '@type': 'updateChatFolder',\n      id,\n      folder,\n    });\n  } else if (update instanceof GramJs.UpdateDialogFilterOrder) {\n    onUpdate({\n      '@type': 'updateChatFoldersOrder',\n      orderedIds: update.order,\n    });\n  } else if (update instanceof GramJs.UpdateChatParticipants) {\n    const replacedMembers = buildChatMembers(update.participants);\n\n    onUpdate({\n      '@type': 'updateChatMembers',\n      id: buildApiPeerId(update.participants.chatId, 'chat'),\n      replacedMembers,\n    });\n  } else if (update instanceof GramJs.UpdateChatParticipantAdd) {\n    const addedMember = buildChatMember(\n      pick(update, ['userId', 'inviterId', 'date']) as GramJs.ChatParticipant,\n    );\n\n    onUpdate({\n      '@type': 'updateChatMembers',\n      id: buildApiPeerId(update.chatId, 'chat'),\n      addedMember,\n    });\n  } else if (update instanceof GramJs.UpdateChatParticipantDelete) {\n    onUpdate({\n      '@type': 'updateChatMembers',\n      id: buildApiPeerId(update.chatId, 'chat'),\n      deletedMemberId: buildApiPeerId(update.userId, 'user'),\n    });\n  } else if (\n    update instanceof GramJs.UpdatePinnedMessages\n    || update instanceof GramJs.UpdatePinnedChannelMessages\n  ) {\n    const chatId = update instanceof GramJs.UpdatePinnedMessages\n      ? getApiChatIdFromMtpPeer(update.peer)\n      : buildApiPeerId(update.channelId, 'channel');\n\n    onUpdate({\n      '@type': 'updatePinnedIds',\n      chatId,\n      messageIds: update.messages,\n      isPinned: update.pinned,\n    });\n  } else if (\n    update instanceof GramJs.UpdateNotifySettings\n    && update.peer instanceof GramJs.NotifyPeer\n  ) {\n    const payload = buildApiNotifyException(update.notifySettings, update.peer.peer);\n    scheduleMutedChatUpdate(payload.chatId, payload.muteUntil, onUpdate);\n    onUpdate({\n      '@type': 'updateNotifyExceptions',\n      ...payload,\n    });\n  } else if (\n    update instanceof GramJs.UpdateNotifySettings\n    && update.peer instanceof GramJs.NotifyForumTopic\n  ) {\n    const payload = buildApiNotifyExceptionTopic(\n      update.notifySettings, update.peer.peer, update.peer.topMsgId,\n    );\n    scheduleMutedTopicUpdate(payload.chatId, payload.topicId, payload.muteUntil, onUpdate);\n    onUpdate({\n      '@type': 'updateTopicNotifyExceptions',\n      ...payload,\n    });\n  } else if (\n    update instanceof GramJs.UpdateUserTyping\n    || update instanceof GramJs.UpdateChatUserTyping\n  ) {\n    const id = update instanceof GramJs.UpdateUserTyping\n      ? buildApiPeerId(update.userId, 'user')\n      : buildApiPeerId(update.chatId, 'chat');\n\n    if (update.action instanceof GramJs.SendMessageEmojiInteraction) {\n      onUpdate({\n        '@type': 'updateStartEmojiInteraction',\n        id,\n        emoji: update.action.emoticon,\n        messageId: update.action.msgId,\n        interaction: buildApiEmojiInteraction(JSON.parse(update.action.interaction.data)),\n      });\n    } else {\n      onUpdate({\n        '@type': 'updateChatTypingStatus',\n        id,\n        typingStatus: buildChatTypingStatus(update),\n      });\n    }\n  } else if (update instanceof GramJs.UpdateChannelUserTyping) {\n    const id = buildApiPeerId(update.channelId, 'channel');\n\n    onUpdate({\n      '@type': 'updateChatTypingStatus',\n      id,\n      threadId: update.topMsgId,\n      typingStatus: buildChatTypingStatus(update),\n    });\n  } else if (update instanceof GramJs.UpdateChannel) {\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    const { _entities } = update;\n    if (!_entities) {\n      return;\n    }\n\n    const channel = _entities.find((e): e is GramJs.Channel | GramJs.ChannelForbidden => (\n      e instanceof GramJs.Channel || e instanceof GramJs.ChannelForbidden\n    ));\n\n    if (channel instanceof GramJs.Channel) {\n      const chat = buildApiChatFromPreview(channel);\n      if (chat) {\n        onUpdate({\n          '@type': 'updateChat',\n          id: chat.id,\n          chat,\n        });\n\n        onUpdate({\n          '@type': chat.isNotJoined ? 'updateChatLeave' : 'updateChatJoin',\n          id: buildApiPeerId(update.channelId, 'channel'),\n        });\n      }\n    } else if (channel instanceof GramJs.ChannelForbidden) {\n      const chatId = buildApiPeerId(update.channelId, 'channel');\n\n      onUpdate({\n        '@type': 'updateChat',\n        id: chatId,\n        chat: {\n          isRestricted: true,\n        },\n      });\n\n      onUpdate({\n        '@type': 'updateChatLeave',\n        id: chatId,\n      });\n    } else if (_entities.length === 0) {\n      // The link to the discussion group may have been changed.\n      // No corresponding update available at this moment https://core.telegram.org/type/Updates\n      onUpdate({\n        '@type': 'resetMessages',\n        id: buildApiPeerId(update.channelId, 'channel'),\n      });\n    }\n  } else if (\n    update instanceof GramJs.UpdateDialogUnreadMark\n    && update.peer instanceof GramJs.DialogPeer\n  ) {\n    onUpdate({\n      '@type': 'updateChat',\n      id: getApiChatIdFromMtpPeer(update.peer.peer),\n      chat: {\n        hasUnreadMark: update.unread,\n      },\n    });\n  } else if (update instanceof GramJs.UpdateChatDefaultBannedRights) {\n    onUpdate({\n      '@type': 'updateChat',\n      id: getApiChatIdFromMtpPeer(update.peer),\n      chat: {\n        defaultBannedRights: omitVirtualClassFields(update.defaultBannedRights),\n      },\n    });\n\n    // Users\n  } else if (update instanceof GramJs.UpdateUserStatus) {\n    onUpdate({\n      '@type': 'updateUserStatus',\n      userId: buildApiPeerId(update.userId, 'user'),\n      status: buildApiUserStatus(update.status),\n    });\n  } else if (update instanceof GramJs.UpdateUser) {\n    onUpdate({\n      '@type': 'updateRequestUserUpdate',\n      id: buildApiPeerId(update.userId, 'user'),\n    });\n  } else if (update instanceof GramJs.UpdateUserEmojiStatus) {\n    const emojiStatus = buildApiEmojiStatus(update.emojiStatus);\n    onUpdate({\n      '@type': 'updateUserEmojiStatus',\n      userId: buildApiPeerId(update.userId, 'user'),\n      emojiStatus,\n    });\n  } else if (update instanceof GramJs.UpdateUserName) {\n    const apiUserId = buildApiPeerId(update.userId, 'user');\n    const updatedUser = localDb.users[apiUserId];\n\n    const user = updatedUser?.mutualContact && !updatedUser.self\n      ? pick(update, [])\n      : pick(update, ['firstName', 'lastName']);\n\n    const usernames = buildApiUsernames(update);\n\n    onUpdate({\n      '@type': 'updateUser',\n      id: apiUserId,\n      user: {\n        ...user,\n        usernames,\n      },\n    });\n  } else if (update instanceof GramJs.UpdateUserPhone) {\n    const { userId, phone } = update;\n\n    onUpdate({\n      '@type': 'updateUser',\n      id: buildApiPeerId(userId, 'user'),\n      user: { phoneNumber: phone },\n    });\n  } else if (update instanceof GramJs.UpdatePeerSettings) {\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    const { _entities, settings } = update;\n    if (!_entities) {\n      return;\n    }\n\n    if (_entities?.length) {\n      _entities\n        .filter((e) => e instanceof GramJs.User && !e.contact)\n        .forEach((user) => {\n          onUpdate({\n            '@type': 'deleteContact',\n            id: buildApiPeerId(user.id, 'user'),\n          });\n        });\n\n      _entities\n        .filter((e) => e instanceof GramJs.User && e.contact)\n        .map(buildApiUser)\n        .forEach((user) => {\n          if (!user) {\n            return;\n          }\n\n          onUpdate({\n            '@type': 'updateUser',\n            id: user.id,\n            user: {\n              ...user,\n              ...(settings && { settings: buildApiChatSettings(settings) }),\n            },\n          });\n        });\n    }\n\n    // Settings\n  } else if (update instanceof GramJs.UpdateNotifySettings) {\n    const {\n      notifySettings: {\n        showPreviews, silent, muteUntil,\n      },\n      peer: { className },\n    } = update;\n\n    const peerType = className === 'NotifyUsers'\n      ? 'contact'\n      : (className === 'NotifyChats'\n        ? 'group'\n        : (className === 'NotifyBroadcasts'\n          ? 'broadcast'\n          : undefined\n        )\n      );\n\n    if (!peerType) {\n      return;\n    }\n\n    onUpdate({\n      '@type': 'updateNotifySettings',\n      peerType,\n      isSilent: Boolean(silent\n        || (typeof muteUntil === 'number' && Date.now() + getServerTimeOffset() * 1000 < muteUntil * 1000)),\n      shouldShowPreviews: Boolean(showPreviews),\n    });\n  } else if (update instanceof GramJs.UpdatePeerBlocked) {\n    onUpdate({\n      '@type': 'updatePeerBlocked',\n      id: getApiChatIdFromMtpPeer(update.peerId),\n      isBlocked: update.blocked,\n      isBlockedFromStories: update.blockedMyStoriesFrom,\n    });\n  } else if (update instanceof GramJs.UpdatePrivacy) {\n    const key = buildPrivacyKey(update.key);\n    if (key) {\n      onUpdate({\n        '@type': 'updatePrivacy',\n        key,\n        rules: buildPrivacyRules(update.rules),\n      });\n    }\n\n    // Misc\n  } else if (update instanceof GramJs.UpdateDraftMessage) {\n    onUpdate({\n      '@type': 'draftMessage',\n      chatId: getApiChatIdFromMtpPeer(update.peer),\n      threadId: update.topMsgId,\n      draft: buildMessageDraft(update.draft),\n    });\n  } else if (update instanceof GramJs.UpdateContactsReset) {\n    onUpdate({ '@type': 'updateResetContactList' });\n  } else if (update instanceof GramJs.UpdateFavedStickers) {\n    onUpdate({ '@type': 'updateFavoriteStickers' });\n  } else if (update instanceof GramJs.UpdateRecentStickers) {\n    onUpdate({ '@type': 'updateRecentStickers' });\n  } else if (update instanceof GramJs.UpdateRecentReactions) {\n    onUpdate({ '@type': 'updateRecentReactions' });\n  } else if (update instanceof GramJs.UpdateSavedReactionTags) {\n    onUpdate({ '@type': 'updateSavedReactionTags' });\n  } else if (update instanceof GramJs.UpdateMoveStickerSetToTop) {\n    if (!update.masks) {\n      onUpdate({\n        '@type': 'updateMoveStickerSetToTop',\n        isCustomEmoji: update.emojis,\n        id: update.stickerset.toString(),\n      });\n    }\n  } else if (update instanceof GramJs.UpdateStickerSets) {\n    onUpdate({ '@type': 'updateStickerSets' });\n  } else if (update instanceof GramJs.UpdateStickerSetsOrder) {\n    if (!update.masks) {\n      onUpdate({\n        '@type': 'updateStickerSetsOrder',\n        order: update.order.map((n) => n.toString()),\n        isCustomEmoji: update.emojis,\n      });\n    }\n  } else if (update instanceof GramJs.UpdateNewStickerSet) {\n    if (update.stickerset instanceof GramJs.messages.StickerSet) {\n      const stickerSet = buildStickerSet(update.stickerset.set);\n      onUpdate({\n        '@type': 'updateStickerSet',\n        id: stickerSet.id,\n        stickerSet,\n      });\n    }\n  } else if (update instanceof GramJs.UpdateSavedGifs) {\n    onUpdate({ '@type': 'updateSavedGifs' });\n  } else if (update instanceof GramJs.UpdateGroupCall) {\n    // eslint-disable-next-line no-underscore-dangle\n    const entities = update._entities;\n    if (entities) {\n      addEntitiesToLocalDb(entities);\n      dispatchUserAndChatUpdates(entities);\n    }\n\n    onUpdate({\n      '@type': 'updateGroupCall',\n      call: buildApiGroupCall(update.call),\n    });\n  } else if (update instanceof GramJs.UpdateGroupCallConnection) {\n    onUpdate({\n      '@type': 'updateGroupCallConnection',\n      data: JSON.parse(update.params.data) as GroupCallConnectionData,\n      presentation: Boolean(update.presentation),\n    });\n  } else if (update instanceof GramJs.UpdateGroupCallParticipants) {\n    // eslint-disable-next-line no-underscore-dangle\n    const entities = update._entities;\n    if (entities) {\n      addEntitiesToLocalDb(entities);\n      dispatchUserAndChatUpdates(entities);\n    }\n\n    onUpdate({\n      '@type': 'updateGroupCallParticipants',\n      groupCallId: getGroupCallId(update.call),\n      participants: update.participants.map(buildApiGroupCallParticipant),\n    });\n  } else if (update instanceof GramJs.UpdatePendingJoinRequests) {\n    // eslint-disable-next-line no-underscore-dangle\n    const entities = update._entities;\n    if (entities) {\n      addEntitiesToLocalDb(entities);\n      dispatchUserAndChatUpdates(entities);\n    }\n\n    onUpdate({\n      '@type': 'updatePendingJoinRequests',\n      chatId: getApiChatIdFromMtpPeer(update.peer),\n      recentRequesterIds: update.recentRequesters.map((id) => buildApiPeerId(id, 'user')),\n      requestsPending: update.requestsPending,\n    });\n  } else if (update instanceof GramJs.UpdatePhoneCall) {\n    // eslint-disable-next-line no-underscore-dangle\n    const entities = update._entities;\n    if (entities) {\n      addEntitiesToLocalDb(entities);\n      dispatchUserAndChatUpdates(entities);\n    }\n\n    onUpdate({\n      '@type': 'updatePhoneCall',\n      call: buildPhoneCall(update.phoneCall),\n    });\n  } else if (update instanceof GramJs.UpdatePhoneCallSignalingData) {\n    onUpdate({\n      '@type': 'updatePhoneCallSignalingData',\n      callId: update.phoneCallId.toString(),\n      data: Array.from(update.data),\n    });\n  } else if (update instanceof GramJs.UpdateWebViewResultSent) {\n    const { queryId } = update;\n\n    onUpdate({\n      '@type': 'updateWebViewResultSent',\n      queryId: queryId.toString(),\n    });\n  } else if (update instanceof GramJs.UpdateBotMenuButton) {\n    const {\n      botId,\n      button,\n    } = update;\n\n    const id = buildApiPeerId(botId, 'user');\n\n    onUpdate({\n      '@type': 'updateBotMenuButton',\n      botId: id,\n      button: buildApiBotMenuButton(button),\n    });\n  } else if (update instanceof GramJs.UpdateTranscribedAudio) {\n    // eslint-disable-next-line no-underscore-dangle\n    const entities = update._entities;\n    if (entities) {\n      addEntitiesToLocalDb(entities);\n      dispatchUserAndChatUpdates(entities);\n    }\n\n    onUpdate({\n      '@type': 'updateTranscribedAudio',\n      transcriptionId: update.transcriptionId.toString(),\n      text: update.text,\n      isPending: update.pending,\n    });\n  } else if (update instanceof GramJs.UpdateConfig) {\n    // eslint-disable-next-line no-underscore-dangle\n    const entities = update._entities;\n    if (entities) {\n      addEntitiesToLocalDb(entities);\n      dispatchUserAndChatUpdates(entities);\n    }\n    onUpdate({ '@type': 'updateConfig' });\n  } else if (update instanceof GramJs.UpdateChannelPinnedTopic) {\n    onUpdate({\n      '@type': 'updatePinnedTopic',\n      chatId: buildApiPeerId(update.channelId, 'channel'),\n      topicId: update.topicId,\n      isPinned: Boolean(update.pinned),\n    });\n  } else if (update instanceof GramJs.UpdateChannelPinnedTopics) {\n    onUpdate({\n      '@type': 'updatePinnedTopicsOrder',\n      chatId: buildApiPeerId(update.channelId, 'channel'),\n      order: update.order || [],\n    });\n  } else if (update instanceof GramJs.UpdateRecentEmojiStatuses) {\n    onUpdate({ '@type': 'updateRecentEmojiStatuses' });\n  } else if (update instanceof GramJs.UpdateStory) {\n    // eslint-disable-next-line no-underscore-dangle\n    const entities = update._entities;\n    if (entities) {\n      addEntitiesToLocalDb(entities);\n      dispatchUserAndChatUpdates(entities);\n    }\n\n    const { story } = update;\n    const peerId = getApiChatIdFromMtpPeer(update.peer);\n    addStoryToLocalDb(story, peerId);\n\n    if (story instanceof GramJs.StoryItemDeleted) {\n      onUpdate({\n        '@type': 'deleteStory',\n        peerId,\n        storyId: story.id,\n      });\n    } else {\n      onUpdate({\n        '@type': 'updateStory',\n        peerId,\n        story: buildApiStory(peerId, story) as ApiStory | ApiStorySkipped,\n      });\n    }\n  } else if (update instanceof GramJs.UpdateReadStories) {\n    onUpdate({\n      '@type': 'updateReadStories',\n      peerId: getApiChatIdFromMtpPeer(update.peer),\n      lastReadId: update.maxId,\n    });\n  } else if (update instanceof GramJs.UpdateSentStoryReaction) {\n    onUpdate({\n      '@type': 'updateSentStoryReaction',\n      peerId: getApiChatIdFromMtpPeer(update.peer),\n      storyId: update.storyId,\n      reaction: buildApiReaction(update.reaction),\n    });\n  } else if (update instanceof GramJs.UpdateStoriesStealthMode) {\n    onUpdate({\n      '@type': 'updateStealthMode',\n      stealthMode: buildApiStealthMode(update.stealthMode),\n    });\n  } else if (update instanceof GramJs.UpdateAttachMenuBots) {\n    onUpdate({\n      '@type': 'updateAttachMenuBots',\n    });\n  } else if (update instanceof GramJs.UpdateNewAuthorization) {\n    onUpdate({\n      '@type': 'updateNewAuthorization',\n      hash: update.hash.toString(),\n      date: update.date,\n      device: update.device,\n      location: update.location,\n      isUnconfirmed: update.unconfirmed,\n    });\n  } else if (update instanceof GramJs.UpdateChannelViewForumAsMessages) {\n    onUpdate({\n      '@type': 'updateViewForumAsMessages',\n      chatId: buildApiPeerId(update.channelId, 'channel'),\n      isEnabled: update.enabled ? true : undefined,\n    });\n  } else if (update instanceof GramJs.UpdateStarsBalance) {\n    onUpdate({\n      '@type': 'updateStarsBalance',\n      balance: update.balance.toJSNumber(),\n    });\n  } else if (update instanceof LocalUpdatePremiumFloodWait) {\n    onUpdate({\n      '@type': 'updatePremiumFloodWait',\n      isUpload: update.isUpload,\n    });\n  } else if (update instanceof LocalUpdatePts || update instanceof LocalUpdateChannelPts) {\n    // Do nothing, handled on the manager side\n  } else if (DEBUG) {\n    const params = typeof update === 'object' && 'className' in update ? update.className : update;\n    log('UNEXPECTED UPDATE', params);\n  }\n}\n","/* eslint-disable no-console */\n\nimport type { DebugLevel } from '../../../util/debugConsole';\nimport type { ApiOnProgress, ApiUpdate } from '../../types';\nimport type { OriginMessageEvent, WorkerMessageData } from './types';\n\nimport { DEBUG } from '../../../config';\nimport { DEBUG_LEVELS } from '../../../util/debugConsole';\nimport { throttleWithTickEnd } from '../../../util/schedulers';\nimport { log } from '../helpers';\nimport { callApi, cancelApiProgress, initApi } from '../methods/init';\n\ndeclare const self: WorkerGlobalScope;\n\nconst ORIGINAL_FUNCTIONS = DEBUG_LEVELS.reduce((acc, level) => {\n  acc[level] = console[level];\n  return acc;\n}, {} as Record<DebugLevel, (...args: any[]) => void>);\n\nfunction enableDebugLog() {\n  DEBUG_LEVELS.forEach((level) => {\n    console[level] = (...args: any[]) => {\n      postMessage({\n        type: 'debugLog',\n        level,\n        args: JSON.parse(JSON.stringify(args, (key, value) => (typeof value === 'bigint'\n          ? value.toString()\n          : value))),\n      });\n    };\n  });\n}\n\nfunction disableDebugLog() {\n  DEBUG_LEVELS.forEach((level) => {\n    console[level] = ORIGINAL_FUNCTIONS[level];\n  });\n}\n\nhandleErrors();\n\nconst callbackState = new Map<string, ApiOnProgress>();\n\nif (DEBUG) {\n  console.log('>>> FINISH LOAD WORKER');\n}\n\nonmessage = async (message: OriginMessageEvent) => {\n  const { data } = message;\n\n  switch (data.type) {\n    case 'initApi': {\n      const { messageId, args } = data;\n      await initApi(onUpdate, args[0], args[1]);\n      if (messageId) {\n        sendToOrigin({\n          type: 'methodResponse',\n          messageId,\n          response: true,\n        });\n      }\n      break;\n    }\n    case 'callMethod': {\n      const {\n        messageId, name, args, withCallback,\n      } = data;\n      try {\n        if (messageId && withCallback) {\n          const callback = (...callbackArgs: any[]) => {\n            const lastArg = callbackArgs[callbackArgs.length - 1];\n\n            sendToOrigin({\n              type: 'methodCallback',\n              messageId,\n              callbackArgs,\n            }, lastArg instanceof ArrayBuffer ? lastArg : undefined);\n          };\n\n          callbackState.set(messageId, callback);\n\n          args.push(callback as never);\n        }\n\n        const response = await callApi(name, ...args);\n\n        if (DEBUG && typeof response === 'object' && 'CONSTRUCTOR_ID' in response) {\n          log('UNEXPECTED RESPONSE', `${name}: ${response.className}`);\n        }\n\n        const { arrayBuffer } = (typeof response === 'object' && 'arrayBuffer' in response && response) || {};\n\n        if (messageId) {\n          sendToOrigin({\n            type: 'methodResponse',\n            messageId,\n            response,\n          }, arrayBuffer);\n        }\n      } catch (error: any) {\n        if (DEBUG) {\n          console.error(error);\n        }\n\n        if (messageId) {\n          sendToOrigin({\n            type: 'methodResponse',\n            messageId,\n            error: { message: error.message },\n          });\n        }\n      }\n\n      if (messageId) {\n        callbackState.delete(messageId);\n      }\n\n      break;\n    }\n    case 'cancelProgress': {\n      const callback = callbackState.get(data.messageId);\n      if (callback) {\n        cancelApiProgress(callback);\n      }\n\n      break;\n    }\n    case 'ping': {\n      sendToOrigin({\n        type: 'methodResponse',\n        messageId: data.messageId!,\n      });\n\n      break;\n    }\n    case 'toggleDebugMode': {\n      if (data.isEnabled) {\n        enableDebugLog();\n      } else {\n        disableDebugLog();\n      }\n    }\n  }\n};\n\nfunction handleErrors() {\n  self.onerror = (e) => {\n    console.error(e);\n    sendToOrigin({ type: 'unhandledError', error: { message: e.error.message || 'Uncaught exception in worker' } });\n  };\n\n  self.addEventListener('unhandledrejection', (e) => {\n    console.error(e);\n    sendToOrigin({ type: 'unhandledError', error: { message: e.reason.message || 'Uncaught rejection in worker' } });\n  });\n}\n\nlet pendingUpdates: ApiUpdate[] = [];\n\nconst sendUpdatesOnTickEnd = throttleWithTickEnd(() => {\n  const currentUpdates = pendingUpdates;\n  pendingUpdates = [];\n\n  sendToOrigin({\n    type: 'updates',\n    updates: currentUpdates,\n  });\n});\n\nfunction onUpdate(update: ApiUpdate) {\n  if (DEBUG && update['@type'] !== 'updateUserStatus' && update['@type'] !== 'updateServerTimeOffset') {\n    log('UPDATE', update['@type'], update);\n  }\n\n  pendingUpdates.push(update);\n  sendUpdatesOnTickEnd();\n}\n\nfunction sendToOrigin(data: WorkerMessageData, arrayBuffer?: ArrayBuffer) {\n  if (arrayBuffer) {\n    postMessage(data, [arrayBuffer]);\n  } else {\n    postMessage(data);\n  }\n}\n","export * from './users';\nexport * from './chats';\nexport * from './messages';\nexport * from './updates';\nexport * from './media';\nexport * from './payments';\nexport * from './settings';\nexport * from './bots';\nexport * from './misc';\nexport * from './calls';\nexport * from './statistics';\nexport * from './stories';\nexport * from './business';\n","// We cache avatars as Data URI for faster initial load\n// and messages media as Blob for smaller size.\n\nexport enum ApiMediaFormat {\n  BlobUrl,\n  Progressive,\n  DownloadUrl,\n  Text,\n}\n\nexport type ApiParsedMedia = string | Blob | ArrayBuffer;\nexport type ApiPreparedMedia = string;\n","import type { ThreadId } from '../../types';\nimport type { ApiWebDocument } from './bots';\nimport type { ApiGroupCall, PhoneCallAction } from './calls';\nimport type { ApiChat, ApiPeerColor } from './chats';\nimport type { ApiInputStorePaymentPurpose, ApiPremiumGiftCodeOption, ApiStarTopupOption } from './payments';\nimport type { ApiMessageStoryData, ApiWebPageStickerData, ApiWebPageStoryData } from './stories';\n\nexport interface ApiDimensions {\n  width: number;\n  height: number;\n}\n\nexport interface ApiPhotoSize extends ApiDimensions {\n  type: 's' | 'm' | 'x' | 'y' | 'w';\n}\n\nexport interface ApiVideoSize extends ApiDimensions {\n  type: 'u' | 'v';\n  videoStartTs: number;\n  size: number;\n}\n\nexport interface ApiThumbnail extends ApiDimensions {\n  dataUri: string;\n}\n\nexport interface ApiPhoto {\n  mediaType: 'photo';\n  id: string;\n  date: number;\n  thumbnail?: ApiThumbnail;\n  isVideo?: boolean;\n  sizes: ApiPhotoSize[];\n  videoSizes?: ApiVideoSize[];\n  blobUrl?: string;\n  isSpoiler?: boolean;\n}\n\nexport interface ApiSticker {\n  mediaType: 'sticker';\n  id: string;\n  stickerSetInfo: ApiStickerSetInfo;\n  emoji?: string;\n  isCustomEmoji?: boolean;\n  isLottie: boolean;\n  isVideo: boolean;\n  width?: number;\n  height?: number;\n  thumbnail?: ApiThumbnail;\n  isPreloadedGlobally?: boolean;\n  hasEffect?: boolean;\n  isFree?: boolean;\n  shouldUseTextColor?: boolean;\n}\n\nexport interface ApiStickerSet {\n  isArchived?: true;\n  isEmoji?: true;\n  installedDate?: number;\n  id: string;\n  accessHash: string;\n  title: string;\n  hasThumbnail?: boolean;\n  hasStaticThumb?: boolean;\n  hasAnimatedThumb?: boolean;\n  hasVideoThumb?: boolean;\n  thumbCustomEmojiId?: string;\n  count: number;\n  stickers?: ApiSticker[];\n  packs?: Record<string, ApiSticker[]>;\n  covers?: ApiSticker[];\n  shortName: string;\n}\n\ntype ApiStickerSetInfoShortName = {\n  shortName: string;\n};\n\ntype ApiStickerSetInfoId = {\n  id: string;\n  accessHash: string;\n};\n\ntype ApiStickerSetInfoMissing = {\n  isMissing: true;\n};\n\nexport type ApiStickerSetInfo = ApiStickerSetInfoShortName | ApiStickerSetInfoId | ApiStickerSetInfoMissing;\n\nexport interface ApiVideo {\n  mediaType: 'video';\n  id: string;\n  mimeType: string;\n  duration: number;\n  fileName: string;\n  width?: number;\n  height?: number;\n  supportsStreaming?: boolean;\n  isRound?: boolean;\n  isGif?: boolean;\n  isSpoiler?: boolean;\n  thumbnail?: ApiThumbnail;\n  blobUrl?: string;\n  previewBlobUrl?: string;\n  size: number;\n  noSound?: boolean;\n}\n\nexport interface ApiAudio {\n  mediaType: 'audio';\n  id: string;\n  size: number;\n  mimeType: string;\n  fileName: string;\n  duration: number;\n  performer?: string;\n  title?: string;\n  thumbnailSizes?: ApiPhotoSize[];\n}\n\nexport interface ApiVoice {\n  mediaType: 'voice';\n  id: string;\n  duration: number;\n  waveform?: number[];\n  size: number;\n}\n\nexport interface ApiDocument {\n  mediaType: 'document';\n  id?: string;\n  fileName: string;\n  size: number;\n  timestamp?: number;\n  mimeType: string;\n  thumbnail?: ApiThumbnail;\n  previewBlobUrl?: string;\n  innerMediaType?: 'photo' | 'video';\n  mediaSize?: ApiDimensions;\n}\n\nexport interface ApiContact {\n  mediaType: 'contact';\n  firstName: string;\n  lastName: string;\n  phoneNumber: string;\n  userId: string;\n}\n\nexport type ApiPaidMedia = {\n  mediaType: 'paidMedia';\n  starsAmount: number;\n} & ({\n  isBought?: true;\n  extendedMedia: BoughtPaidMedia[];\n} | {\n  isBought?: undefined;\n  extendedMedia: ApiMediaExtendedPreview[];\n});\n\nexport interface ApiPollAnswer {\n  text: ApiFormattedText;\n  option: string;\n}\n\nexport interface ApiPollResult {\n  isChosen?: true;\n  isCorrect?: true;\n  option: string;\n  votersCount: number;\n}\n\nexport interface ApiPoll {\n  mediaType: 'poll';\n  id: string;\n  summary: {\n    closed?: true;\n    isPublic?: true;\n    multipleChoice?: true;\n    quiz?: true;\n    question: ApiFormattedText;\n    answers: ApiPollAnswer[];\n    closePeriod?: number;\n    closeDate?: number;\n  };\n  results: {\n    isMin?: true;\n    results?: ApiPollResult[];\n    totalVoters?: number;\n    recentVoterIds?: string[];\n    solution?: string;\n    solutionEntities?: ApiMessageEntity[];\n  };\n}\n\n/* Used for Invoice UI */\nexport type ApiInputInvoiceMessage = {\n  type: 'message';\n  chatId: string;\n  messageId: number;\n  isExtendedMedia?: boolean;\n};\n\nexport type ApiInputInvoiceSlug = {\n  type: 'slug';\n  slug: string;\n};\n\nexport type ApiInputInvoiceGiveaway = {\n  type: 'giveaway';\n  chatId: string;\n  additionalChannelIds?: string[];\n  isOnlyForNewSubscribers?: boolean;\n  areWinnersVisible?: boolean;\n  prizeDescription?: string;\n  countries?: string[];\n  untilDate: number;\n  currency: string;\n  amount: number;\n  option: ApiPremiumGiftCodeOption;\n};\n\nexport type ApiInputInvoiceGiftCode = {\n  type: 'giftcode';\n  userIds: string[];\n  boostChannelId?: string;\n  currency: string;\n  amount: number;\n  option: ApiPremiumGiftCodeOption;\n};\n\nexport type ApiInputInvoiceStars = {\n  type: 'stars';\n  option: ApiStarTopupOption;\n};\n\nexport type ApiInputInvoice = ApiInputInvoiceMessage | ApiInputInvoiceSlug | ApiInputInvoiceGiveaway\n| ApiInputInvoiceGiftCode | ApiInputInvoiceStars;\n\n/* Used for Invoice request */\nexport type ApiRequestInputInvoiceMessage = {\n  type: 'message';\n  chat: ApiChat;\n  messageId: number;\n};\n\nexport type ApiRequestInputInvoiceSlug = {\n  type: 'slug';\n  slug: string;\n};\n\nexport type ApiRequestInputInvoiceGiveaway = {\n  type: 'giveaway';\n  purpose: ApiInputStorePaymentPurpose;\n  option: ApiPremiumGiftCodeOption;\n};\n\nexport type ApiRequestInputInvoiceStars = {\n  type: 'stars';\n  option: ApiStarTopupOption;\n};\n\nexport type ApiRequestInputInvoice = ApiRequestInputInvoiceMessage | ApiRequestInputInvoiceSlug\n| ApiRequestInputInvoiceGiveaway | ApiRequestInputInvoiceStars;\n\nexport interface ApiInvoice {\n  mediaType: 'invoice';\n  text: string;\n  title: string;\n  photo?: ApiWebDocument;\n  amount: number;\n  currency: string;\n  receiptMsgId?: number;\n  isTest?: boolean;\n  isRecurring?: boolean;\n  termsUrl?: string;\n  extendedMedia?: ApiMediaExtendedPreview;\n  maxTipAmount?: number;\n  suggestedTipAmounts?: number[];\n}\n\nexport interface ApiMediaExtendedPreview {\n  mediaType: 'extendedMediaPreview';\n  width?: number;\n  height?: number;\n  thumbnail?: ApiThumbnail;\n  duration?: number;\n}\n\nexport interface ApiPaymentCredentials {\n  id: string;\n  title: string;\n}\n\nexport interface ApiGeoPoint {\n  long: number;\n  lat: number;\n  accessHash: string;\n  accuracyRadius?: number;\n}\n\ninterface ApiGeo {\n  mediaType: 'geo';\n  geo: ApiGeoPoint;\n}\n\ninterface ApiVenue {\n  mediaType: 'venue';\n  geo: ApiGeoPoint;\n  title: string;\n  address: string;\n  provider: string;\n  venueId: string;\n  venueType: string;\n}\n\ninterface ApiGeoLive {\n  mediaType: 'geoLive';\n  geo: ApiGeoPoint;\n  heading?: number;\n  period: number;\n}\n\nexport type ApiLocation = ApiGeo | ApiVenue | ApiGeoLive;\n\nexport type ApiGame = {\n  mediaType: 'game';\n  title: string;\n  description: string;\n  photo?: ApiPhoto;\n  shortName: string;\n  id: string;\n  accessHash: string;\n  document?: ApiDocument;\n};\n\nexport type ApiGiveaway = {\n  mediaType: 'giveaway';\n  quantity: number;\n  months: number;\n  untilDate: number;\n  isOnlyForNewSubscribers?: true;\n  countries?: string[];\n  channelIds: string[];\n  prizeDescription?: string;\n};\n\nexport type ApiGiveawayResults = {\n  mediaType: 'giveawayResults';\n  months: number;\n  untilDate: number;\n  isRefunded?: true;\n  isOnlyForNewSubscribers?: true;\n  channelId: string;\n  prizeDescription?: string;\n  winnersCount?: number;\n  winnerIds: string[];\n  additionalPeersCount?: number;\n  launchMessageId: number;\n  unclaimedCount: number;\n};\n\nexport type ApiNewPoll = {\n  summary: ApiPoll['summary'];\n  quiz?: {\n    correctAnswers: string[];\n    solution?: string;\n    solutionEntities?: ApiMessageEntity[];\n  };\n};\n\nexport interface ApiAction {\n  mediaType: 'action';\n  text: string;\n  targetUserIds?: string[];\n  targetChatId?: string;\n  type:\n  | 'historyClear'\n  | 'contactSignUp'\n  | 'chatCreate'\n  | 'topicCreate'\n  | 'suggestProfilePhoto'\n  | 'joinedChannel'\n  | 'chatBoost'\n  | 'receipt'\n  | 'other';\n  photo?: ApiPhoto;\n  amount?: number;\n  currency?: string;\n  giftCryptoInfo?: {\n    currency: string;\n    amount: number;\n  };\n  translationValues: string[];\n  call?: Partial<ApiGroupCall>;\n  phoneCall?: PhoneCallAction;\n  score?: number;\n  months?: number;\n  topicEmojiIconId?: string;\n  isTopicAction?: boolean;\n  slug?: string;\n  isGiveaway?: boolean;\n  isUnclaimed?: boolean;\n  pluralValue?: number;\n}\n\nexport interface ApiWebPage {\n  mediaType: 'webpage';\n  id: number;\n  url: string;\n  displayUrl: string;\n  type?: string;\n  siteName?: string;\n  title?: string;\n  description?: string;\n  photo?: ApiPhoto;\n  audio?: ApiAudio;\n  duration?: number;\n  document?: ApiDocument;\n  video?: ApiVideo;\n  story?: ApiWebPageStoryData;\n  stickers?: ApiWebPageStickerData;\n}\n\nexport interface ApiSponsoredWebPage {\n  url: string;\n  siteName: string;\n  photo?: ApiPhoto;\n}\n\nexport type ApiReplyInfo = ApiMessageReplyInfo | ApiStoryReplyInfo;\n\nexport interface ApiMessageReplyInfo {\n  type: 'message';\n  replyToMsgId?: number;\n  replyToPeerId?: string;\n  replyFrom?: ApiMessageForwardInfo;\n  replyMedia?: MediaContent;\n  replyToTopId?: number;\n  isForumTopic?: true;\n  isQuote?: true;\n  quoteText?: ApiFormattedText;\n}\n\nexport interface ApiStoryReplyInfo {\n  type: 'story';\n  peerId: string;\n  storyId: number;\n}\n\nexport interface ApiInputMessageReplyInfo {\n  type: 'message';\n  replyToMsgId: number;\n  replyToTopId?: number;\n  replyToPeerId?: string;\n  quoteText?: ApiFormattedText;\n}\n\nexport interface ApiInputStoryReplyInfo {\n  type: 'story';\n  peerId: string;\n  storyId: number;\n}\n\nexport type ApiInputReplyInfo = ApiInputMessageReplyInfo | ApiInputStoryReplyInfo;\n\nexport interface ApiMessageForwardInfo {\n  date: number;\n  savedDate?: number;\n  isImported?: boolean;\n  isChannelPost: boolean;\n  channelPostId?: number;\n  isLinkedChannelPost?: boolean;\n  fromChatId?: string;\n  fromId?: string;\n  savedFromPeerId?: string;\n  fromMessageId?: number;\n  hiddenUserName?: string;\n  postAuthorTitle?: string;\n}\n\nexport interface ApiStoryForwardInfo {\n  fromPeerId?: string;\n  fromName?: string;\n  storyId?: number;\n  isModified?: boolean;\n}\n\nexport type ApiMessageEntityDefault = {\n  type: Exclude<\n  `${ApiMessageEntityTypes}`,\n  `${ApiMessageEntityTypes.Pre}` | `${ApiMessageEntityTypes.TextUrl}` | `${ApiMessageEntityTypes.MentionName}` |\n  `${ApiMessageEntityTypes.CustomEmoji}` | `${ApiMessageEntityTypes.Blockquote}`\n  >;\n  offset: number;\n  length: number;\n};\n\nexport type ApiMessageEntityPre = {\n  type: ApiMessageEntityTypes.Pre;\n  offset: number;\n  length: number;\n  language?: string;\n};\n\nexport type ApiMessageEntityTextUrl = {\n  type: ApiMessageEntityTypes.TextUrl;\n  offset: number;\n  length: number;\n  url: string;\n};\n\nexport type ApiMessageEntityMentionName = {\n  type: ApiMessageEntityTypes.MentionName;\n  offset: number;\n  length: number;\n  userId: string;\n};\n\nexport type ApiMessageEntityBlockquote = {\n  type: ApiMessageEntityTypes.Blockquote;\n  offset: number;\n  length: number;\n  canCollapse?: boolean;\n};\n\nexport type ApiMessageEntityCustomEmoji = {\n  type: ApiMessageEntityTypes.CustomEmoji;\n  offset: number;\n  length: number;\n  documentId: string;\n};\n\nexport type ApiMessageEntity = ApiMessageEntityDefault | ApiMessageEntityPre | ApiMessageEntityTextUrl |\nApiMessageEntityMentionName | ApiMessageEntityCustomEmoji | ApiMessageEntityBlockquote;\n\nexport enum ApiMessageEntityTypes {\n  Bold = 'MessageEntityBold',\n  Blockquote = 'MessageEntityBlockquote',\n  BotCommand = 'MessageEntityBotCommand',\n  Cashtag = 'MessageEntityCashtag',\n  Code = 'MessageEntityCode',\n  Email = 'MessageEntityEmail',\n  Hashtag = 'MessageEntityHashtag',\n  Italic = 'MessageEntityItalic',\n  MentionName = 'MessageEntityMentionName',\n  Mention = 'MessageEntityMention',\n  Phone = 'MessageEntityPhone',\n  Pre = 'MessageEntityPre',\n  Strike = 'MessageEntityStrike',\n  TextUrl = 'MessageEntityTextUrl',\n  Url = 'MessageEntityUrl',\n  Underline = 'MessageEntityUnderline',\n  Spoiler = 'MessageEntitySpoiler',\n  CustomEmoji = 'MessageEntityCustomEmoji',\n  Unknown = 'MessageEntityUnknown',\n}\n\nexport interface ApiFormattedText {\n  text: string;\n  entities?: ApiMessageEntity[];\n}\n\nexport type MediaContent = {\n  text?: ApiFormattedText;\n  photo?: ApiPhoto;\n  video?: ApiVideo;\n  altVideo?: ApiVideo;\n  document?: ApiDocument;\n  sticker?: ApiSticker;\n  contact?: ApiContact;\n  poll?: ApiPoll;\n  action?: ApiAction;\n  webPage?: ApiWebPage;\n  audio?: ApiAudio;\n  voice?: ApiVoice;\n  invoice?: ApiInvoice;\n  location?: ApiLocation;\n  game?: ApiGame;\n  storyData?: ApiMessageStoryData;\n  giveaway?: ApiGiveaway;\n  giveawayResults?: ApiGiveawayResults;\n  paidMedia?: ApiPaidMedia;\n  isExpiredVoice?: boolean;\n  isExpiredRoundVideo?: boolean;\n  ttlSeconds?: number;\n};\nexport type MediaContainer = {\n  content: MediaContent;\n};\n\nexport type BoughtPaidMedia = Pick<MediaContent, 'photo' | 'video'>;\n\nexport interface ApiMessage {\n  id: number;\n  chatId: string;\n  content: MediaContent;\n  date: number;\n  isOutgoing: boolean;\n  senderId?: string;\n  replyInfo?: ApiReplyInfo;\n  sendingState?: 'messageSendingStatePending' | 'messageSendingStateFailed';\n  forwardInfo?: ApiMessageForwardInfo;\n  isDeleting?: boolean;\n  previousLocalId?: number;\n  viewsCount?: number;\n  forwardsCount?: number;\n  isEdited?: boolean;\n  editDate?: number;\n  isMentioned?: boolean;\n  isMediaUnread?: boolean;\n  groupedId?: string;\n  isInAlbum?: boolean;\n  hasUnreadMention?: boolean;\n  inlineButtons?: ApiKeyboardButtons;\n  keyboardButtons?: ApiKeyboardButtons;\n  keyboardPlaceholder?: string;\n  isKeyboardSingleUse?: boolean;\n  isKeyboardSelective?: boolean;\n  viaBotId?: string;\n  viaBusinessBotId?: string;\n  postAuthorTitle?: string;\n  isScheduled?: boolean;\n  shouldHideKeyboardButtons?: boolean;\n  isHideKeyboardSelective?: boolean;\n  isFromScheduled?: boolean;\n  isSilent?: boolean;\n  isPinned?: boolean;\n  seenByDates?: Record<string, number>;\n  isProtected?: boolean;\n  isForwardingAllowed?: boolean;\n  transcriptionId?: string;\n  isTranscriptionError?: boolean;\n  emojiOnlyCount?: number;\n  reactors?: {\n    nextOffset?: string;\n    count: number;\n    reactions: ApiPeerReaction[];\n  };\n  reactions?: ApiReactions;\n  hasComments?: boolean;\n  readDate?: number;\n  savedPeerId?: string;\n  senderBoosts?: number;\n  factCheck?: ApiFactCheck;\n  effectId?: string;\n  isInvertedMedia?: true;\n}\n\nexport interface ApiReactions {\n  canSeeList?: boolean;\n  areTags?: boolean;\n  results: ApiReactionCount[];\n  recentReactions?: ApiPeerReaction[];\n}\n\nexport interface ApiPeerReaction {\n  peerId: string;\n  reaction: ApiReaction;\n  isOwn?: boolean;\n  isBig?: boolean;\n  isUnread?: boolean;\n  addedDate: number;\n}\n\nexport interface ApiReactionCount {\n  chosenOrder?: number;\n  count: number;\n  reaction: ApiReaction;\n}\n\nexport interface ApiAvailableReaction {\n  selectAnimation?: ApiDocument;\n  appearAnimation?: ApiDocument;\n  activateAnimation?: ApiDocument;\n  effectAnimation?: ApiDocument;\n  staticIcon?: ApiDocument;\n  centerIcon?: ApiDocument;\n  aroundAnimation?: ApiDocument;\n  reaction: ApiReactionEmoji;\n  title: string;\n  isInactive?: boolean;\n  isPremium?: boolean;\n}\n\nexport interface ApiAvailableEffect {\n  id: string;\n  emoticon: string;\n  staticIconId?: string;\n  effectAnimationId?: string;\n  effectStickerId: string;\n  isPremium?: boolean;\n}\n\ntype ApiChatReactionsAll = {\n  type: 'all';\n  areCustomAllowed?: true;\n};\n\ntype ApiChatReactionsSome = {\n  type: 'some';\n  allowed: ApiReaction[];\n};\n\nexport type ApiChatReactions = ApiChatReactionsAll | ApiChatReactionsSome;\n\nexport type ApiReactionEmoji = {\n  emoticon: string;\n};\n\nexport type ApiReactionCustomEmoji = {\n  documentId: string;\n};\n\nexport type ApiReaction = ApiReactionEmoji | ApiReactionCustomEmoji;\n\nexport type ApiReactionKey = `${string}-${string}`;\n\nexport type ApiSavedReactionTag = {\n  reaction: ApiReaction;\n  title?: string;\n  count: number;\n};\n\ninterface ApiBaseThreadInfo {\n  chatId: string;\n  messagesCount: number;\n  lastMessageId?: number;\n  lastReadInboxMessageId?: number;\n  recentReplierIds?: string[];\n}\n\nexport interface ApiCommentsInfo extends ApiBaseThreadInfo {\n  isCommentsInfo: true;\n  threadId?: ThreadId;\n  originChannelId: string;\n  originMessageId: number;\n}\n\nexport interface ApiMessageThreadInfo extends ApiBaseThreadInfo {\n  isCommentsInfo: false;\n  threadId: ThreadId;\n  // For linked messages in discussion\n  fromChannelId?: string;\n  fromMessageId?: number;\n}\n\nexport type ApiThreadInfo = ApiCommentsInfo | ApiMessageThreadInfo;\n\nexport type ApiMessageOutgoingStatus = 'read' | 'succeeded' | 'pending' | 'failed';\n\nexport type ApiSponsoredMessage = {\n  randomId: string;\n  isRecommended?: true;\n  text: ApiFormattedText;\n  webPage?: ApiSponsoredWebPage;\n  expiresAt: number;\n  sponsorInfo?: string;\n  additionalInfo?: string;\n  buttonText?: string;\n  canReport?: true;\n  title: string;\n  url: string;\n  photo?: ApiPhoto;\n  peerColor?: ApiPeerColor;\n};\n\n// KeyboardButtons\n\ninterface ApiKeyboardButtonSimple {\n  type: 'unsupported' | 'buy' | 'command' | 'requestPhone' | 'game';\n  text: string;\n}\n\ninterface ApiKeyboardButtonReceipt {\n  type: 'receipt';\n  receiptMessageId: number;\n}\n\ninterface ApiKeyboardButtonUrl {\n  type: 'url';\n  text: string;\n  url: string;\n}\n\ninterface ApiKeyboardButtonSimpleWebView {\n  type: 'simpleWebView';\n  text: string;\n  url: string;\n}\n\ninterface ApiKeyboardButtonWebView {\n  type: 'webView';\n  text: string;\n  url: string;\n}\n\ninterface ApiKeyboardButtonCallback {\n  type: 'callback';\n  text: string;\n  data: string;\n}\n\ninterface ApiKeyboardButtonRequestPoll {\n  type: 'requestPoll';\n  text: string;\n  isQuiz?: boolean;\n}\n\ninterface ApiKeyboardButtonSwitchBotInline {\n  type: 'switchBotInline';\n  text: string;\n  query: string;\n  isSamePeer?: boolean;\n}\n\ninterface ApiKeyboardButtonUserProfile {\n  type: 'userProfile';\n  text: string;\n  userId: string;\n}\n\ninterface ApiKeyboardButtonUrlAuth {\n  type: 'urlAuth';\n  text: string;\n  url: string;\n  buttonId: number;\n}\n\nexport type ApiTranscription = {\n  text: string;\n  isPending?: boolean;\n  transcriptionId: string;\n};\n\nexport type ApiKeyboardButton = (\n  ApiKeyboardButtonSimple\n  | ApiKeyboardButtonReceipt\n  | ApiKeyboardButtonUrl\n  | ApiKeyboardButtonCallback\n  | ApiKeyboardButtonRequestPoll\n  | ApiKeyboardButtonSwitchBotInline\n  | ApiKeyboardButtonUserProfile\n  | ApiKeyboardButtonWebView\n  | ApiKeyboardButtonSimpleWebView\n  | ApiKeyboardButtonUrlAuth\n);\n\nexport type ApiKeyboardButtons = ApiKeyboardButton[][];\nexport type ApiReplyKeyboard = {\n  keyboardPlaceholder?: string;\n  isKeyboardSingleUse?: boolean;\n  isKeyboardSelective?: boolean;\n} & {\n  [K in 'inlineButtons' | 'keyboardButtons']?: ApiKeyboardButtons;\n};\n\nexport type ApiMessageSearchType = 'text' | 'media' | 'documents' | 'links' | 'audio' | 'voice' | 'profilePhoto';\nexport type ApiGlobalMessageSearchType = 'text' | 'channels' | 'media' | 'documents' | 'links' | 'audio' | 'voice';\n\nexport type ApiReportReason = 'spam' | 'violence' | 'pornography' | 'childAbuse'\n| 'copyright' | 'geoIrrelevant' | 'fake' | 'illegalDrugs' | 'personalDetails' | 'other';\n\nexport type ApiSendMessageAction = {\n  type: 'cancel' | 'typing' | 'recordAudio' | 'chooseSticker' | 'playingGame';\n};\n\nexport type ApiThemeParameters = {\n  bg_color: string;\n  text_color: string;\n  hint_color: string;\n  link_color: string;\n  button_color: string;\n  button_text_color: string;\n  secondary_bg_color: string;\n  header_bg_color: string;\n  accent_text_color: string;\n  section_bg_color: string;\n  section_header_text_color: string;\n  subtitle_text_color: string;\n  destructive_text_color: string;\n  section_separator_color: string;\n};\n\nexport type ApiBotApp = {\n  id: string;\n  accessHash: string;\n  title: string;\n  shortName: string;\n  description: string;\n  photo?: ApiPhoto;\n  document?: ApiDocument;\n};\n\nexport type ApiMessagesBotApp = ApiBotApp & {\n  isInactive?: boolean;\n  shouldRequestWriteAccess?: boolean;\n};\n\nexport type ApiQuickReply = {\n  id: number;\n  shortcut: string;\n  topMessageId: number;\n};\n\nexport type ApiFactCheck = {\n  shouldFetch?: true;\n  hash: string;\n  countryCode?: string;\n  text?: ApiFormattedText;\n};\n\nexport type ApiSponsoredMessageReportResult = {\n  type: 'reported' | 'hidden' | 'premiumRequired';\n} | {\n  type: 'selectOption';\n  title: string;\n  options: {\n    text: string;\n    option: string;\n  }[];\n};\n\nexport const MAIN_THREAD_ID = -1;\n\n// `Symbol` can not be transferred from worker\nexport const MESSAGE_DELETED = 'MESSAGE_DELETED';\n","// Copyright Twitter Inc. Licensed under MIT\n// https://github.com/twitter/twemoji-parser/blob/master/LICENSE.md\n// Emoji 15.0.2 support was taken here https://github.com/mei23/twemoji-parser\n// Version 3d4dedc 15.12.2023\n\nconst vs16RegExp = /\\uFE0F/g;\n// avoid using a string literal like `\\u200D` here because minifiers expand it inline\nconst zeroWidthJoiner = String.fromCharCode(0x200d);\n\nexport function removeVS16s(rawEmoji) {\n  return rawEmoji.indexOf(zeroWidthJoiner) < 0 ? rawEmoji.replace(vs16RegExp, '') : rawEmoji;\n}\n\n// Default Twemoji regex was modified here.\n// An exception for ascii emoji has been added to the beginning of the regular string: .\n// UTF-16 endcoding are `\\ud83c\\udd70`, `\\ud83c\\udd71`, `\\ud83c\\udd7e` and `\\ud83c\\udd7f`.\n// These emojis in the graphic version must end with the `\\ufe0f` symbol.\n// Therefore, they should be excluded from the regular expression.\n// You must remove next substring `\\udd70\\udd71\\udd7e\\udd7f` from the middle of the regex on every update.\n\n// This file is generated by source/emoji/scripts/generate.sh\n// eslint-disable-next-line max-len\nexport default /(?:\\ud83c[\\udd70\\udd71\\udd7e\\udd7f]\\ufe0f)|(?:\\ud83d\\udc68\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83e\\uddd1\\ud83c[\\udffc-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83e\\uddd1\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83e\\uddd1\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83e\\uddd1\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83e\\uddd1\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udffe]|\\ud83d\\udc68\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffb\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffc-\\udfff]|\\ud83d\\udc68\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffc\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83d\\udc68\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffd\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83d\\udc68\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffe\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83d\\udc68\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udfff\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udffe]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffc-\\udfff]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffc-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udffe]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udffe]|\\ud83e\\uddd1\\ud83c\\udffb\\u200d\\u2764\\ufe0f\\u200d\\ud83e\\uddd1\\ud83c[\\udffc-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffb\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffc\\u200d\\u2764\\ufe0f\\u200d\\ud83e\\uddd1\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffc\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffd\\u200d\\u2764\\ufe0f\\u200d\\ud83e\\uddd1\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83e\\uddd1\\ud83c\\udffd\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffe\\u200d\\u2764\\ufe0f\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83e\\uddd1\\ud83c\\udffe\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udfff\\u200d\\u2764\\ufe0f\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udffe]|\\ud83e\\uddd1\\ud83c\\udfff\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68|\\ud83d\\udc69\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d[\\udc68\\udc69]|\\ud83e\\udef1\\ud83c\\udffb\\u200d\\ud83e\\udef2\\ud83c[\\udffc-\\udfff]|\\ud83e\\udef1\\ud83c\\udffc\\u200d\\ud83e\\udef2\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83e\\udef1\\ud83c\\udffd\\u200d\\ud83e\\udef2\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83e\\udef1\\ud83c\\udffe\\u200d\\ud83e\\udef2\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83e\\udef1\\ud83c\\udfff\\u200d\\ud83e\\udef2\\ud83c[\\udffb-\\udffe]|\\ud83d\\udc68\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68|\\ud83d\\udc69\\u200d\\u2764\\ufe0f\\u200d\\ud83d[\\udc68\\udc69]|\\ud83e\\uddd1\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1|\\ud83d\\udc6b\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc6c\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc6d\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc8f\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc91\\ud83c[\\udffb-\\udfff]|\\ud83e\\udd1d\\ud83c[\\udffb-\\udfff]|\\ud83d[\\udc6b-\\udc6d\\udc8f\\udc91]|\\ud83e\\udd1d)|(?:\\ud83c\\udfc3|\\ud83d\\udeb6|\\ud83e\\uddce)(?:\\ud83c[\\udffb-\\udfff])?(?:\\u200d[\\u2640\\u2642]\\ufe0f)?(?:\\u200d\\u27a1\\ufe0f)|(?:\\ud83d[\\udc68\\udc69]|\\ud83e\\uddd1)(?:\\ud83c[\\udffb-\\udfff])?\\u200d(?:\\ud83e[\\uddaf\\uddbc\\uddbd])(?:\\u200d\\u27a1\\ufe0f)|(?:\\ud83d[\\udc68\\udc69]|\\ud83e\\uddd1)(?:\\ud83c[\\udffb-\\udfff])?\\u200d(?:\\u2695\\ufe0f|\\u2696\\ufe0f|\\u2708\\ufe0f|\\ud83c[\\udf3e\\udf73\\udf7c\\udf84\\udf93\\udfa4\\udfa8\\udfeb\\udfed]|\\ud83d[\\udcbb\\udcbc\\udd27\\udd2c\\ude80\\ude92]|\\ud83e[\\uddaf\\uddaf-\\uddb3\\uddbc\\uddbc\\uddbd\\uddbd])|(?:\\ud83c[\\udfcb\\udfcc]|\\ud83d[\\udd74\\udd75]|\\u26f9)((?:\\ud83c[\\udffb-\\udfff]|\\ufe0f)\\u200d[\\u2640\\u2642]\\ufe0f)|(?:\\ud83c[\\udfc3\\udfc3\\udfc4\\udfca]|\\ud83d[\\udc6e\\udc70\\udc71\\udc73\\udc77\\udc81\\udc82\\udc86\\udc87\\ude45-\\ude47\\ude4b\\ude4d\\ude4e\\udea3\\udeb4-\\udeb6\\udeb6]|\\ud83e[\\udd26\\udd35\\udd37-\\udd39\\udd3d\\udd3e\\uddb8\\uddb9\\uddcd\\uddce\\uddce\\uddcf\\uddd4\\uddd6-\\udddd])(?:\\ud83c[\\udffb-\\udfff])?\\u200d[\\u2640\\u2642]\\ufe0f|(?:\\ud83d\\udc68\\u200d\\ud83d\\udc68\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc68\\u200d\\ud83d\\udc68\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc68\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc68\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc69\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83e\\uddd1\\u200d\\ud83e\\uddd1\\u200d\\ud83e\\uddd2\\u200d\\ud83e\\uddd2|\\ud83d\\udc68\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc68\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc68\\u200d\\ud83d\\udc68\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc68\\u200d\\ud83d\\udc69\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc69\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\ud83d\\udc69\\u200d\\ud83d[\\udc66\\udc67]|\\ud83e\\uddd1\\u200d\\ud83e\\uddd1\\u200d\\ud83e\\uddd2|\\ud83e\\uddd1\\u200d\\ud83e\\uddd2\\u200d\\ud83e\\uddd2|\\ud83c\\udff3\\ufe0f\\u200d\\u26a7\\ufe0f|\\ud83c\\udff3\\ufe0f\\u200d\\ud83c\\udf08|\\ud83d\\ude36\\u200d\\ud83c\\udf2b\\ufe0f|\\u26d3\\ufe0f\\u200d\\ud83d\\udca5|\\u2764\\ufe0f\\u200d\\ud83d\\udd25|\\u2764\\ufe0f\\u200d\\ud83e\\ude79|\\ud83c\\udf44\\u200d\\ud83d\\udfeb|\\ud83c\\udf4b\\u200d\\ud83d\\udfe9|\\ud83c\\udff4\\u200d\\u2620\\ufe0f|\\ud83d\\udc15\\u200d\\ud83e\\uddba|\\ud83d\\udc26\\u200d\\ud83d\\udd25|\\ud83d\\udc3b\\u200d\\u2744\\ufe0f|\\ud83d\\udc41\\u200d\\ud83d\\udde8|\\ud83d\\udc68\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc6f\\u200d\\u2640\\ufe0f|\\ud83d\\udc6f\\u200d\\u2642\\ufe0f|\\ud83d\\ude2e\\u200d\\ud83d\\udca8|\\ud83d\\ude35\\u200d\\ud83d\\udcab|\\ud83d\\ude42\\u200d\\u2194\\ufe0f|\\ud83d\\ude42\\u200d\\u2195\\ufe0f|\\ud83e\\udd3c\\u200d\\u2640\\ufe0f|\\ud83e\\udd3c\\u200d\\u2642\\ufe0f|\\ud83e\\uddd1\\u200d\\ud83e\\uddd2|\\ud83e\\uddde\\u200d\\u2640\\ufe0f|\\ud83e\\uddde\\u200d\\u2642\\ufe0f|\\ud83e\\udddf\\u200d\\u2640\\ufe0f|\\ud83e\\udddf\\u200d\\u2642\\ufe0f|\\ud83d\\udc08\\u200d\\u2b1b|\\ud83d\\udc26\\u200d\\u2b1b)|[#*0-9]\\ufe0f?\\u20e3|(?:[\\u2122\\u265f]\\ufe0f)|(?:\\ud83c[\\udc04\\ude02\\ude1a\\ude2f\\ude37\\udf21\\udf24-\\udf2c\\udf36\\udf7d\\udf96\\udf97\\udf99-\\udf9b\\udf9e\\udf9f\\udfcd\\udfce\\udfd4-\\udfdf\\udff3\\udff5\\udff7]|\\ud83d[\\udc3f\\udc41\\udcfd\\udd49\\udd4a\\udd6f\\udd70\\udd73\\udd76-\\udd79\\udd87\\udd8a-\\udd8d\\udda5\\udda8\\uddb1\\uddb2\\uddbc\\uddc2-\\uddc4\\uddd1-\\uddd3\\udddc-\\uddde\\udde1\\udde3\\udde8\\uddef\\uddf3\\uddfa\\udecb\\udecd-\\udecf\\udee0-\\udee5\\udee9\\udef0\\udef3]|[\\u203c\\u2049\\u2139\\u2194-\\u2199\\u21a9\\u21aa\\u231a\\u231b\\u2328\\u23cf\\u23ed-\\u23ef\\u23f1\\u23f2\\u23f8-\\u23fa\\u24c2\\u25aa\\u25ab\\u25b6\\u25c0\\u25fb-\\u25fe\\u2600-\\u2604\\u260e\\u2611\\u2614\\u2615\\u2618\\u2620\\u2622\\u2623\\u2626\\u262a\\u262e\\u262f\\u2638-\\u263a\\u2640\\u2642\\u2648-\\u2653\\u2660\\u2663\\u2665\\u2666\\u2668\\u267b\\u267f\\u2692-\\u2697\\u2699\\u269b\\u269c\\u26a0\\u26a1\\u26a7\\u26aa\\u26ab\\u26b0\\u26b1\\u26bd\\u26be\\u26c4\\u26c5\\u26c8\\u26cf\\u26d1\\u26d3\\u26d4\\u26e9\\u26ea\\u26f0-\\u26f5\\u26f8\\u26fa\\u26fd\\u2702\\u2708\\u2709\\u270f\\u2712\\u2714\\u2716\\u271d\\u2721\\u2733\\u2734\\u2744\\u2747\\u2757\\u2763\\u2764\\u27a1\\u2934\\u2935\\u2b05-\\u2b07\\u2b1b\\u2b1c\\u2b50\\u2b55\\u3030\\u303d\\u3297\\u3299])(?:\\ufe0f|(?!\\ufe0e))|(?:(?:\\ud83c[\\udfcb\\udfcc]|\\ud83d[\\udd74\\udd75\\udd90]|\\ud83e\\udef0|[\\u261d\\u26f7\\u26f9\\u270c\\u270d])(?:\\ufe0f|(?!\\ufe0e))|(?:\\ud83c[\\udf85\\udfc2-\\udfc4\\udfc7\\udfca]|\\ud83d[\\udc42\\udc43\\udc46-\\udc50\\udc66-\\udc69\\udc6e\\udc70-\\udc78\\udc7c\\udc81-\\udc83\\udc85-\\udc87\\udcaa\\udd7a\\udd95\\udd96\\ude45-\\ude47\\ude4b-\\ude4f\\udea3\\udeb4-\\udeb6\\udec0\\udecc]|\\ud83e[\\udd0c\\udd0f\\udd18-\\udd1c\\udd1e\\udd1f\\udd26\\udd30-\\udd39\\udd3d\\udd3e\\udd77\\uddb5\\uddb6\\uddb8\\uddb9\\uddbb\\uddcd-\\uddcf\\uddd1-\\udddd\\udec3-\\udec5\\udef1-\\udef8]|[\\u270a\\u270b]))(?:\\ud83c[\\udffb-\\udfff])?|(?:\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40\\udc65\\udb40\\udc6e\\udb40\\udc67\\udb40\\udc7f|\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40\\udc73\\udb40\\udc63\\udb40\\udc74\\udb40\\udc7f|\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40\\udc77\\udb40\\udc6c\\udb40\\udc73\\udb40\\udc7f|\\ud83c\\udde6\\ud83c[\\udde8-\\uddec\\uddee\\uddf1\\uddf2\\uddf4\\uddf6-\\uddfa\\uddfc\\uddfd\\uddff]|\\ud83c\\udde7\\ud83c[\\udde6\\udde7\\udde9-\\uddef\\uddf1-\\uddf4\\uddf6-\\uddf9\\uddfb\\uddfc\\uddfe\\uddff]|\\ud83c\\udde8\\ud83c[\\udde6\\udde8\\udde9\\uddeb-\\uddee\\uddf0-\\uddf5\\uddf7\\uddfa-\\uddff]|\\ud83c\\udde9\\ud83c[\\uddea\\uddec\\uddef\\uddf0\\uddf2\\uddf4\\uddff]|\\ud83c\\uddea\\ud83c[\\udde6\\udde8\\uddea\\uddec\\udded\\uddf7-\\uddfa]|\\ud83c\\uddeb\\ud83c[\\uddee-\\uddf0\\uddf2\\uddf4\\uddf7]|\\ud83c\\uddec\\ud83c[\\udde6\\udde7\\udde9-\\uddee\\uddf1-\\uddf3\\uddf5-\\uddfa\\uddfc\\uddfe]|\\ud83c\\udded\\ud83c[\\uddf0\\uddf2\\uddf3\\uddf7\\uddf9\\uddfa]|\\ud83c\\uddee\\ud83c[\\udde8-\\uddea\\uddf1-\\uddf4\\uddf6-\\uddf9]|\\ud83c\\uddef\\ud83c[\\uddea\\uddf2\\uddf4\\uddf5]|\\ud83c\\uddf0\\ud83c[\\uddea\\uddec-\\uddee\\uddf2\\uddf3\\uddf5\\uddf7\\uddfc\\uddfe\\uddff]|\\ud83c\\uddf1\\ud83c[\\udde6-\\udde8\\uddee\\uddf0\\uddf7-\\uddfb\\uddfe]|\\ud83c\\uddf2\\ud83c[\\udde6\\udde8-\\udded\\uddf0-\\uddff]|\\ud83c\\uddf3\\ud83c[\\udde6\\udde8\\uddea-\\uddec\\uddee\\uddf1\\uddf4\\uddf5\\uddf7\\uddfa\\uddff]|\\ud83c\\uddf4\\ud83c\\uddf2|\\ud83c\\uddf5\\ud83c[\\udde6\\uddea-\\udded\\uddf0-\\uddf3\\uddf7-\\uddf9\\uddfc\\uddfe]|\\ud83c\\uddf6\\ud83c\\udde6|\\ud83c\\uddf7\\ud83c[\\uddea\\uddf4\\uddf8\\uddfa\\uddfc]|\\ud83c\\uddf8\\ud83c[\\udde6-\\uddea\\uddec-\\uddf4\\uddf7-\\uddf9\\uddfb\\uddfd-\\uddff]|\\ud83c\\uddf9\\ud83c[\\udde6\\udde8\\udde9\\uddeb-\\udded\\uddef-\\uddf4\\uddf7\\uddf9\\uddfb\\uddfc\\uddff]|\\ud83c\\uddfa\\ud83c[\\udde6\\uddec\\uddf2\\uddf3\\uddf8\\uddfe\\uddff]|\\ud83c\\uddfb\\ud83c[\\udde6\\udde8\\uddea\\uddec\\uddee\\uddf3\\uddfa]|\\ud83c\\uddfc\\ud83c[\\uddeb\\uddf8]|\\ud83c\\uddfd\\ud83c\\uddf0|\\ud83c\\uddfe\\ud83c[\\uddea\\uddf9]|\\ud83c\\uddff\\ud83c[\\udde6\\uddf2\\uddfc]|\\ud83c[\\udccf\\udd8e\\udd91-\\udd9a\\udde6-\\uddff\\ude01\\ude32-\\ude36\\ude38-\\ude3a\\ude50\\ude51\\udf00-\\udf20\\udf2d-\\udf35\\udf37-\\udf7c\\udf7e-\\udf84\\udf86-\\udf93\\udfa0-\\udfc1\\udfc5\\udfc6\\udfc8\\udfc9\\udfcf-\\udfd3\\udfe0-\\udff0\\udff4\\udff8-\\udfff]|\\ud83d[\\udc00-\\udc3e\\udc40\\udc44\\udc45\\udc51-\\udc65\\udc6a\\udc6f\\udc79-\\udc7b\\udc7d-\\udc80\\udc84\\udc88-\\udc8e\\udc90\\udc92-\\udca9\\udcab-\\udcfc\\udcff-\\udd3d\\udd4b-\\udd4e\\udd50-\\udd67\\udda4\\uddfb-\\ude44\\ude48-\\ude4a\\ude80-\\udea2\\udea4-\\udeb3\\udeb7-\\udebf\\udec1-\\udec5\\uded0-\\uded2\\uded5-\\uded7\\udedc-\\udedf\\udeeb\\udeec\\udef4-\\udefc\\udfe0-\\udfeb\\udff0]|\\ud83e[\\udd0d\\udd0e\\udd10-\\udd17\\udd20-\\udd25\\udd27-\\udd2f\\udd3a\\udd3c\\udd3f-\\udd45\\udd47-\\udd76\\udd78-\\uddb4\\uddb7\\uddba\\uddbc-\\uddcc\\uddd0\\uddde-\\uddff\\ude70-\\ude7c\\ude80-\\ude88\\ude90-\\udebd\\udebf-\\udec2\\udece-\\udedb\\udee0-\\udee8]|[\\u23e9-\\u23ec\\u23f0\\u23f3\\u267e\\u26ce\\u2705\\u2728\\u274c\\u274e\\u2753-\\u2755\\u2795-\\u2797\\u27b0\\u27bf\\ue50a])|\\ufe0f/g;\n","export default class Deferred<T = void> {\n  promise: Promise<T>;\n\n  reject!: (reason?: any) => void;\n\n  resolve!: (value: T | PromiseLike<T>) => void;\n\n  constructor() {\n    this.promise = new Promise((resolve, reject) => {\n      this.reject = reject;\n      this.resolve = resolve;\n    });\n  }\n\n  static resolved(): Deferred<void>;\n  static resolved<T>(value: T): Deferred<T>;\n  static resolved<T>(value?: T): Deferred<T | void> {\n    const deferred = new Deferred<T | void>();\n    deferred.resolve(value);\n    return deferred;\n  }\n}\n","export default class SortedQueue<T> {\n  private queue: T[];\n\n  constructor(private comparator: (a: T, b: T) => number) {\n    this.queue = [];\n  }\n\n  add(item: T): void {\n    const index = this.binarySearch(item);\n    this.queue.splice(index, 0, item);\n  }\n\n  pop(): T | undefined {\n    return this.queue.shift();\n  }\n\n  get size(): number {\n    return this.queue.length;\n  }\n\n  clear(): void {\n    this.queue = [];\n  }\n\n  private binarySearch(item: T): number {\n    let left = 0;\n    let right = this.queue.length;\n\n    while (left < right) {\n      const middle = Math.floor((left + right) / 2);\n      const comparison = this.comparator(item, this.queue[middle]);\n\n      if (comparison === 0) {\n        return middle;\n      } else if (comparison > 0) {\n        left = middle + 1;\n      } else {\n        right = middle;\n      }\n    }\n\n    return left;\n  }\n}\n","import { ELECTRON_HOST_URL, IS_PACKAGED_ELECTRON } from '../config';\n\n// eslint-disable-next-line no-restricted-globals\nconst cacheApi = self.caches;\n\nlet isSupported: boolean | undefined;\n\nexport async function isCacheApiSupported() {\n  if (!cacheApi) return false;\n\n  isSupported = isSupported ?? await cacheApi.has('test').then(() => true).catch(() => false);\n  return isSupported;\n}\n\nexport enum Type {\n  Text,\n  Blob,\n  Json,\n  ArrayBuffer,\n}\n\nexport async function fetch(\n  cacheName: string, key: string, type: Type, isHtmlAllowed = false,\n) {\n  if (!cacheApi) {\n    return undefined;\n  }\n\n  try {\n    // To avoid the error \"Request scheme 'webdocument' is unsupported\"\n    const request = IS_PACKAGED_ELECTRON\n      ? `${ELECTRON_HOST_URL}/${key.replace(/:/g, '_')}`\n      : new Request(key.replace(/:/g, '_'));\n    const cache = await cacheApi.open(cacheName);\n    const response = await cache.match(request);\n    if (!response) {\n      return undefined;\n    }\n\n    const contentType = response.headers.get('Content-Type');\n\n    switch (type) {\n      case Type.Text:\n        return await response.text();\n      case Type.Blob: {\n        // Ignore deprecated data-uri avatars\n        if (key.startsWith('avatar') && contentType && contentType.startsWith('text')) {\n          return undefined;\n        }\n\n        const blob = await response.blob();\n        const shouldRecreate = !blob.type || (!isHtmlAllowed && blob.type.includes('html'));\n        // iOS Safari fails to preserve `type` in cache\n        let resolvedType = blob.type || contentType;\n\n        if (!(shouldRecreate && resolvedType)) {\n          return blob;\n        }\n\n        // Prevent HTML-in-video attacks (for files that were cached before fix)\n        if (!isHtmlAllowed) {\n          resolvedType = resolvedType.replace(/html/gi, '');\n        }\n\n        return new Blob([blob], { type: resolvedType });\n      }\n      case Type.Json:\n        return await response.json();\n      case Type.ArrayBuffer:\n        return await response.arrayBuffer();\n      default:\n        return undefined;\n    }\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(err);\n    return undefined;\n  }\n}\n\nexport async function save(cacheName: string, key: string, data: AnyLiteral | Blob | ArrayBuffer | string) {\n  if (!cacheApi) {\n    return false;\n  }\n\n  try {\n    const cacheData = typeof data === 'string' || data instanceof Blob || data instanceof ArrayBuffer\n      ? data\n      : JSON.stringify(data);\n    // To avoid the error \"Request scheme 'webdocument' is unsupported\"\n    const request = IS_PACKAGED_ELECTRON\n      ? `${ELECTRON_HOST_URL}/${key.replace(/:/g, '_')}`\n      : new Request(key.replace(/:/g, '_'));\n    const response = new Response(cacheData);\n    const cache = await cacheApi.open(cacheName);\n    await cache.put(request, response);\n    return true;\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(err);\n    return false;\n  }\n}\n\nexport async function remove(cacheName: string, key: string) {\n  try {\n    if (!cacheApi) {\n      return undefined;\n    }\n\n    const cache = await cacheApi.open(cacheName);\n    return await cache.delete(key);\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(err);\n    return undefined;\n  }\n}\n\nexport async function clear(cacheName: string) {\n  try {\n    if (!cacheApi) {\n      return undefined;\n    }\n\n    return await cacheApi.delete(cacheName);\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(err);\n    return undefined;\n  }\n}\n","/* eslint-disable no-console */\n\nexport const DEBUG_LEVELS = ['log', 'error', 'warn', 'info', 'debug'] as const;\nexport type DebugLevel = typeof DEBUG_LEVELS[number];\n// @ts-ignore\nconst ORIGINAL_FUNCTIONS: Record<DebugLevel, (...args: any[]) => void> = DEBUG_LEVELS.reduce((acc, level) => {\n  // @ts-ignore\n  acc[level] = console[level];\n  return acc;\n}, {});\n\ntype DebugEntry = {\n  level: DebugLevel;\n  args: any[];\n  date: Date;\n};\nlet DEBUG_LOGS: DebugEntry[] = [];\n\nexport function logDebugMessage(level: DebugLevel, ...args: any[]) {\n  DEBUG_LOGS.push({\n    level,\n    args,\n    date: new Date(),\n  });\n  ORIGINAL_FUNCTIONS[level](...args);\n}\n\nexport function initDebugConsole() {\n  DEBUG_LOGS = [];\n  DEBUG_LEVELS.forEach((level) => {\n    // @ts-ignore\n    console[level] = (...args: any[]) => {\n      logDebugMessage(level, ...args);\n    };\n  });\n}\n\nexport function disableDebugConsole() {\n  DEBUG_LEVELS.forEach((level) => {\n    // @ts-ignore\n    console[level] = ORIGINAL_FUNCTIONS[level];\n  });\n  DEBUG_LOGS = [];\n}\n\nexport function getDebugLogs() {\n  return JSON.stringify(DEBUG_LOGS, (key, value) => (typeof value === 'bigint'\n    ? value.toString()\n    : value));\n}\n","import EMOJI_REGEX from '../../lib/twemojiRegex';\n\n// Non-standard variations of emojis, used on some devices\nconst EMOJI_EXCEPTIONS: [string | RegExp, string][] = [\n  [/\\u{1f3f3}\\u200d\\u{1f308}/gu, '\\u{1f3f3}\\ufe0f\\u200d\\u{1f308}'], // \n  [/\\u{1f3f3}\\u200d\\u26a7\\ufe0f?/gu, '\\u{1f3f3}\\ufe0f\\u200d\\u26a7\\ufe0f'], // \n  [/\\u26d3\\u200d\\u{1f4a5}/gu, '\\u26d3\\ufe0f\\u200d\\u{1f4a5}'], // \n  [/\\u200d([\\u2640\\u2642])(?!\\ufe0f)/gu, '\\u200d$1\\ufe0f'], // Gender variation without 0xFE0F\n];\n\nexport default function fixNonStandardEmoji(text: string) {\n  // Non-standard sequences typically parsed as separate emojis, so no need to fix text without any\n  if (!text.match(EMOJI_REGEX)) return text;\n  // eslint-disable-next-line no-restricted-syntax\n  for (const [regex, replacement] of EMOJI_EXCEPTIONS) {\n    text = text.replace(regex, replacement);\n  }\n\n  return text;\n}\n","import twemojiRegex from '../../lib/twemojiRegex';\nimport fixNonStandardEmoji from './fixNonStandardEmoji';\n\nconst DETECT_UP_TO = 100;\nconst MAX_LENGTH = DETECT_UP_TO * 8; // Maximum 8 per one emoji.\nconst RE_EMOJI_ONLY = new RegExp(`^(?:${twemojiRegex.source})+$`, '');\n\nconst parseEmojiOnlyString = (text: string): number | false => {\n  const standardizedText = fixNonStandardEmoji(text);\n  const lines = standardizedText.split('\\n');\n  const textWithoutNewlines = lines.join('');\n  if (textWithoutNewlines.length > MAX_LENGTH) {\n    return false;\n  }\n\n  const isEmojiOnly = Boolean(textWithoutNewlines.match(RE_EMOJI_ONLY));\n  if (!isEmojiOnly) {\n    return false;\n  }\n  const countPerLine = lines.map((line) => {\n    let emojiCount = 0;\n    while (twemojiRegex.exec(line)) {\n      emojiCount++;\n\n      if (emojiCount > DETECT_UP_TO) {\n        twemojiRegex.lastIndex = 0;\n        return -1;\n      }\n    }\n\n    return emojiCount;\n  });\n\n  let max = lines.length;\n  for (let i = 0; i < countPerLine.length; i++) {\n    if (countPerLine[i] === -1) {\n      return false;\n    }\n    if (countPerLine[i] > max) {\n      max = countPerLine[i];\n    }\n  }\n\n  return max;\n};\n\nexport default parseEmojiOnlyString;\n","import { CONTENT_TYPES_WITH_PREVIEW } from '../config';\nimport { pause } from './schedulers';\n\n// Polyfill for Safari: `File` is not available in web worker\nif (typeof File === 'undefined') {\n  // eslint-disable-next-line no-global-assign, no-restricted-globals, func-names\n  self.File = class extends Blob {\n    name: string;\n\n    constructor(fileBits: BlobPart[], fileName: string, options?: FilePropertyBag) {\n      if (options) {\n        const { type, ...rest } = options;\n        super(fileBits, { type });\n        Object.assign(this, rest);\n      } else {\n        super(fileBits);\n      }\n\n      this.name = fileName;\n    }\n  } as typeof File;\n}\n\nexport function dataUriToBlob(dataUri: string) {\n  const arr = dataUri.split(',');\n  const mime = arr[0].match(/:(.*?);/)![1];\n  const bstr = atob(arr[1]);\n  let n = bstr.length;\n  const u8arr = new Uint8Array(n);\n\n  while (n--) {\n    u8arr[n] = bstr.charCodeAt(n);\n  }\n\n  return new Blob([u8arr], { type: mime });\n}\n\nexport function blobToDataUri(blob: Blob): Promise<string> {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n\n    reader.onload = (e: ProgressEvent<FileReader>) => {\n      const { result } = e.target || {};\n      if (typeof result === 'string') {\n        resolve(result);\n      }\n\n      reject(new Error('Failed to read blob'));\n    };\n\n    reader.onerror = reject;\n    reader.readAsDataURL(blob);\n  });\n}\n\nexport function blobToFile(blob: Blob, fileName: string) {\n  return new File([blob], fileName, {\n    lastModified: Date.now(),\n    type: blob.type,\n  });\n}\n\nexport function preloadImage(url: string): Promise<HTMLImageElement> {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    img.onload = () => resolve(img);\n    img.onerror = reject;\n    img.src = url;\n  });\n}\n\nexport function preloadVideo(url: string): Promise<HTMLVideoElement> {\n  return new Promise((resolve, reject) => {\n    const video = document.createElement('video');\n    video.volume = 0;\n    video.onloadedmetadata = () => resolve(video);\n    video.onerror = reject;\n    video.src = url;\n  });\n}\n\nexport async function createPosterForVideo(url: string): Promise<string | undefined> {\n  try {\n    const video = await preloadVideo(url);\n\n    return await Promise.race([\n      pause(2000) as Promise<undefined>,\n      new Promise<string | undefined>((resolve, reject) => {\n        video.onseeked = () => {\n          if (!video.videoWidth || !video.videoHeight) {\n            resolve(undefined);\n          }\n\n          const canvas = document.createElement('canvas');\n          canvas.width = video.videoWidth;\n          canvas.height = video.videoHeight;\n          const ctx = canvas.getContext('2d')!;\n          ctx.drawImage(video, 0, 0);\n\n          canvas.toBlob((blob) => {\n            resolve(blob ? URL.createObjectURL(blob) : undefined);\n          });\n        };\n        video.onerror = reject;\n        video.currentTime = Math.min(video.duration, 1);\n      }),\n    ]);\n  } catch (e) {\n    return undefined;\n  }\n}\n\nexport async function fetchBlob(blobUrl: string) {\n  const response = await fetch(blobUrl);\n  return response.blob();\n}\n\nexport async function fetchFile(blobUrl: string, fileName: string) {\n  const blob = await fetchBlob(blobUrl);\n  return blobToFile(blob, fileName);\n}\n\nexport function imgToCanvas(img: HTMLImageElement) {\n  const canvas = document.createElement('canvas');\n  canvas.width = img.width;\n  canvas.height = img.height;\n\n  const ctx = canvas.getContext('2d')!;\n  ctx.drawImage(img, 0, 0);\n\n  return canvas;\n}\n\nexport function hasPreview(file: File) {\n  return CONTENT_TYPES_WITH_PREVIEW.has(file.type);\n}\n\nexport function validateFiles(files: File[] | FileList | null): File[] | undefined {\n  if (!files?.length) {\n    return undefined;\n  }\n  return Array.from(files).map(fixMovMime).filter((file) => file.size);\n}\n\n// .mov MIME type not reported sometimes https://developer.mozilla.org/en-US/docs/Web/API/File/type#sect1\nfunction fixMovMime(file: File) {\n  const ext = file.name.split('.').pop()!;\n  if (!file.type && ext.toLowerCase() === 'mov') {\n    return new File([file], file.name, { type: 'video/quicktime' });\n  }\n  return file;\n}\n","type CollectionByKey<Member> = Record<number | string, Member>;\n\ntype OrderDirection =\n  'asc'\n  | 'desc';\n\ninterface OrderCallback<T> {\n  (member: T): any;\n}\n\nexport function buildCollectionByKey<T extends AnyLiteral>(collection: T[], key: keyof T) {\n  return collection.reduce((byKey: CollectionByKey<T>, member: T) => {\n    byKey[member[key]] = member;\n\n    return byKey;\n  }, {});\n}\n\nexport function buildCollectionByCallback<T extends AnyLiteral, K extends number | string, R extends unknown>(\n  collection: T[],\n  callback: (member: T) => [K, R],\n) {\n  return collection.reduce((byKey: Record<K, R>, member: T) => {\n    const [key, value] = callback(member);\n    byKey[key] = value;\n\n    return byKey;\n  }, {} as Record<K, R>);\n}\n\nexport function mapValues<R extends any, M extends any>(\n  byKey: CollectionByKey<M>,\n  callback: (member: M, key: string, index: number, originalByKey: CollectionByKey<M>) => R,\n): CollectionByKey<R> {\n  return Object.keys(byKey).reduce((newByKey: CollectionByKey<R>, key, index) => {\n    newByKey[key] = callback(byKey[key], key, index, byKey);\n    return newByKey;\n  }, {});\n}\n\nexport function pick<T, K extends keyof T>(object: T, keys: K[]) {\n  return keys.reduce((result, key) => {\n    result[key] = object[key];\n    return result;\n  }, {} as Pick<T, K>);\n}\n\nexport function pickTruthy<T, K extends keyof T>(object: T, keys: K[]) {\n  return keys.reduce((result, key) => {\n    if (object[key]) {\n      result[key] = object[key];\n    }\n\n    return result;\n  }, {} as Pick<T, K>);\n}\n\nexport function omit<T extends object, K extends keyof T>(object: T, keys: K[]): Omit<T, K> {\n  const stringKeys = new Set(keys.map(String));\n  const savedKeys = Object.keys(object)\n    .filter((key) => !stringKeys.has(key)) as Array<Exclude<keyof T, K>>;\n\n  return pick(object, savedKeys);\n}\n\nexport function omitUndefined<T extends object>(object: T): T {\n  return Object.keys(object).reduce((result, stringKey) => {\n    const key = stringKey as keyof T;\n    if (object[key] !== undefined) {\n      result[key as keyof T] = object[key];\n    }\n    return result;\n  }, {} as T);\n}\n\nexport function orderBy<T>(\n  collection: T[],\n  orderRule: (keyof T) | OrderCallback<T> | ((keyof T) | OrderCallback<T>)[],\n  mode: OrderDirection | [OrderDirection, OrderDirection] = 'asc',\n): T[] {\n  function compareValues(a: T, b: T, currentOrderRule: (keyof T) | OrderCallback<T>, isAsc: boolean) {\n    const aValue = (typeof currentOrderRule === 'function' ? currentOrderRule(a) : a[currentOrderRule]) || 0;\n    const bValue = (typeof currentOrderRule === 'function' ? currentOrderRule(b) : b[currentOrderRule]) || 0;\n\n    return isAsc ? aValue - bValue : bValue - aValue;\n  }\n\n  if (Array.isArray(orderRule)) {\n    const [mode1, mode2] = Array.isArray(mode) ? mode : [mode, mode];\n    const [orderRule1, orderRule2] = orderRule;\n    const isAsc1 = mode1 === 'asc';\n    const isAsc2 = mode2 === 'asc';\n\n    return collection.sort((a, b) => {\n      return compareValues(a, b, orderRule1, isAsc1) || compareValues(a, b, orderRule2, isAsc2);\n    });\n  }\n\n  const isAsc = mode === 'asc';\n  return collection.sort((a, b) => {\n    return compareValues(a, b, orderRule, isAsc);\n  });\n}\n\nexport function unique<T extends any>(array: T[]): T[] {\n  return Array.from(new Set(array));\n}\n\nexport function uniqueByField<T extends any>(array: T[], field: keyof T): T[] {\n  return [...new Map(array.map((item) => [item[field], item])).values()];\n}\n\nexport function compact<T extends any>(array: T[]) {\n  return array.filter(Boolean);\n}\n\nexport function areSortedArraysEqual(array1: any[], array2: any[]) {\n  if (array1.length !== array2.length) {\n    return false;\n  }\n\n  return array1.every((item, i) => item === array2[i]);\n}\n\nexport function areSortedArraysIntersecting(array1: any[], array2: any[]) {\n  return array1[0] <= array2[array2.length - 1] && array1[array1.length - 1] >= array2[0];\n}\nexport function isInsideSortedArrayRange(value:any, array: any[]) {\n  return array[0] <= value && value <= array[array.length - 1];\n}\n\nexport function findIntersectionWithSet<T>(array: T[], set: Set<T>): T[] {\n  return array.filter((a) => set.has(a));\n}\n/**\n * Exlude elements from base array. Both arrays should be sorted in same order\n * @param base\n * @param toExclude\n * @returns New array without excluded elements\n */\nexport function excludeSortedArray<T extends any>(base: T[], toExclude: T[]) {\n  if (!base?.length) return base;\n\n  const result: T[] = [];\n\n  let excludeIndex = 0;\n\n  for (let i = 0; i < base.length; i++) {\n    if (toExclude[excludeIndex] === base[i]) {\n      excludeIndex += 1;\n    } else {\n      result.push(base[i]);\n    }\n  }\n\n  return result;\n}\n\nexport function split<T extends any>(array: T[], chunkSize: number) {\n  const result: T[][] = [];\n  for (let i = 0; i < array.length; i += chunkSize) {\n    result.push(array.slice(i, i + chunkSize));\n  }\n\n  return result;\n}\n\nexport function partition<T extends unknown>(\n  array: T[], filter: (value: T, index: number, array: T[]) => boolean | undefined,\n): [T[], T[]] {\n  const pass: T[] = [];\n  const fail: T[] = [];\n\n  array.forEach((e, idx, arr) => (filter(e, idx, arr) ? pass : fail).push(e));\n\n  return [pass, fail];\n}\n\nexport function cloneDeep<T>(value: T): T {\n  if (!isObject(value)) {\n    return value;\n  }\n\n  if (Array.isArray(value)) {\n    return value.map(cloneDeep) as typeof value;\n  }\n\n  return Object.keys(value).reduce((acc, key) => {\n    acc[key as keyof T] = cloneDeep(value[key as keyof T]);\n    return acc;\n  }, {} as T);\n}\n\nexport function isLiteralObject(value: any): value is AnyLiteral {\n  return isObject(value) && !Array.isArray(value);\n}\n\nfunction isObject(value: any): value is object {\n  // eslint-disable-next-line no-null/no-null\n  return typeof value === 'object' && value !== null;\n}\n\nexport function findLast<T>(array: Array<T>, predicate: (value: T, index: number, obj: T[]) => boolean): T | undefined {\n  let cursor = array.length;\n\n  while (cursor--) {\n    if (predicate(array[cursor], cursor, array)) {\n      return array[cursor];\n    }\n  }\n\n  return undefined;\n}\n\nexport function compareFields<T>(a: T, b: T) {\n  return Number(b) - Number(a);\n}\n","import type { ApiMessage } from '../api/types';\n\nexport type MessageKey = `msg${string}-${number}`;\n\nexport function getMessageKey(message: ApiMessage): MessageKey {\n  const { chatId, id, previousLocalId } = message;\n\n  return buildMessageKey(chatId, previousLocalId || id);\n}\n\nexport function getMessageServerKey(message: ApiMessage): MessageKey | undefined {\n  if (isLocalMessageId(message.id)) {\n    return undefined;\n  }\n  const { chatId, id } = message;\n  return buildMessageKey(chatId, id);\n}\n\nexport function buildMessageKey(chatId: string, msgId: number): MessageKey {\n  return `msg${chatId}-${msgId}`;\n}\n\nexport function parseMessageKey(key: MessageKey) {\n  const match = key.match(/^msg(-?\\d+)-(\\d+)/)!;\n\n  return { chatId: match[1], messageId: Number(match[2]) };\n}\n\nexport function isLocalMessageId(id: number) {\n  return !Number.isInteger(id);\n}\n","export type Scheduler = typeof requestAnimationFrame | typeof onTickEnd;\n\nexport function debounce<F extends AnyToVoidFunction>(\n  fn: F,\n  ms: number,\n  shouldRunFirst = true,\n  shouldRunLast = true,\n) {\n  let waitingTimeout: number | undefined;\n\n  return (...args: Parameters<F>) => {\n    if (waitingTimeout) {\n      clearTimeout(waitingTimeout);\n      waitingTimeout = undefined;\n    } else if (shouldRunFirst) {\n      fn(...args);\n    }\n\n    // eslint-disable-next-line no-restricted-globals\n    waitingTimeout = self.setTimeout(() => {\n      if (shouldRunLast) {\n        fn(...args);\n      }\n\n      waitingTimeout = undefined;\n    }, ms);\n  };\n}\n\nexport function throttle<F extends AnyToVoidFunction>(\n  fn: F,\n  ms: number,\n  shouldRunFirst = true,\n) {\n  let interval: number | undefined;\n  let isPending: boolean;\n  let args: Parameters<F>;\n\n  return (..._args: Parameters<F>) => {\n    isPending = true;\n    args = _args;\n\n    if (!interval) {\n      if (shouldRunFirst) {\n        isPending = false;\n        fn(...args);\n      }\n\n      // eslint-disable-next-line no-restricted-globals\n      interval = self.setInterval(() => {\n        if (!isPending) {\n          // eslint-disable-next-line no-restricted-globals\n          self.clearInterval(interval!);\n          interval = undefined;\n          return;\n        }\n\n        isPending = false;\n        fn(...args);\n      }, ms);\n    }\n  };\n}\n\nexport function throttleWithTickEnd<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith(onTickEnd, fn);\n}\n\nexport function throttleWith<F extends AnyToVoidFunction>(schedulerFn: Scheduler, fn: F) {\n  let waiting = false;\n  let args: Parameters<F>;\n\n  return (..._args: Parameters<F>) => {\n    args = _args;\n\n    if (!waiting) {\n      waiting = true;\n\n      schedulerFn(() => {\n        waiting = false;\n        fn(...args);\n      });\n    }\n  };\n}\n\nexport function onIdle(cb: NoneToVoidFunction, timeout?: number) {\n  // eslint-disable-next-line no-restricted-globals\n  if (self.requestIdleCallback) {\n    // eslint-disable-next-line no-restricted-globals\n    self.requestIdleCallback(cb, { timeout });\n  } else {\n    onTickEnd(cb);\n  }\n}\n\nexport const pause = (ms: number) => new Promise<void>((resolve) => {\n  setTimeout(() => resolve(), ms);\n});\n\nexport function rafPromise() {\n  return new Promise<void>((resolve) => {\n    fastRaf(resolve);\n  });\n}\n\nconst FAST_RAF_TIMEOUT_FALLBACK_MS = 35; // < 30 FPS\n\nlet fastRafCallbacks: Set<NoneToVoidFunction> | undefined;\nlet fastRafFallbackCallbacks: Set<NoneToVoidFunction> | undefined;\nlet fastRafFallbackTimeout: number | undefined;\n\n// May result in an immediate execution if called from another RAF callback which was scheduled\n// (and therefore is executed) earlier than RAF callback scheduled by `fastRaf`\nexport function fastRaf(callback: NoneToVoidFunction, withTimeoutFallback = false) {\n  if (!fastRafCallbacks) {\n    fastRafCallbacks = new Set([callback]);\n\n    requestAnimationFrame(() => {\n      const currentCallbacks = fastRafCallbacks!;\n\n      fastRafCallbacks = undefined;\n      fastRafFallbackCallbacks = undefined;\n\n      if (fastRafFallbackTimeout) {\n        clearTimeout(fastRafFallbackTimeout);\n        fastRafFallbackTimeout = undefined;\n      }\n\n      currentCallbacks.forEach((cb) => cb());\n    });\n  } else {\n    fastRafCallbacks.add(callback);\n  }\n\n  if (withTimeoutFallback) {\n    if (!fastRafFallbackCallbacks) {\n      fastRafFallbackCallbacks = new Set([callback]);\n    } else {\n      fastRafFallbackCallbacks.add(callback);\n    }\n\n    if (!fastRafFallbackTimeout) {\n      fastRafFallbackTimeout = window.setTimeout(() => {\n        const currentTimeoutCallbacks = fastRafFallbackCallbacks!;\n\n        if (fastRafCallbacks) {\n          currentTimeoutCallbacks.forEach(fastRafCallbacks.delete, fastRafCallbacks);\n        }\n        fastRafFallbackCallbacks = undefined;\n\n        if (fastRafFallbackTimeout) {\n          clearTimeout(fastRafFallbackTimeout);\n          fastRafFallbackTimeout = undefined;\n        }\n\n        currentTimeoutCallbacks.forEach((cb) => cb());\n      }, FAST_RAF_TIMEOUT_FALLBACK_MS);\n    }\n  }\n}\n\nlet onTickEndCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onTickEnd(callback: NoneToVoidFunction) {\n  if (!onTickEndCallbacks) {\n    onTickEndCallbacks = [callback];\n\n    Promise.resolve().then(() => {\n      const currentCallbacks = onTickEndCallbacks!;\n      onTickEndCallbacks = undefined;\n      currentCallbacks.forEach((cb) => cb());\n    });\n  } else {\n    onTickEndCallbacks.push(callback);\n  }\n}\n\nlet beforeUnloadCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onBeforeUnload(callback: NoneToVoidFunction, isLast = false) {\n  if (!beforeUnloadCallbacks) {\n    beforeUnloadCallbacks = [];\n    // eslint-disable-next-line no-restricted-globals\n    self.addEventListener('beforeunload', () => {\n      beforeUnloadCallbacks!.forEach((cb) => cb());\n    });\n  }\n\n  if (isLast) {\n    beforeUnloadCallbacks.push(callback);\n  } else {\n    beforeUnloadCallbacks.unshift(callback);\n  }\n\n  return () => {\n    beforeUnloadCallbacks = beforeUnloadCallbacks!.filter((cb) => cb !== callback);\n  };\n}\n","let serverTimeOffset = 0;\n\nexport function setServerTimeOffset(_serverTimeOffset: number) {\n  serverTimeOffset = _serverTimeOffset;\n}\n\nexport function getServerTimeOffset() {\n  return serverTimeOffset;\n}\n\nexport function getServerTime() {\n  return Math.floor(Date.now() / 1000) + serverTimeOffset;\n}\n","/* eslint-disable no-bitwise */\n\n// Ref: https://github.com/telegramdesktop/tdesktop/blob/0743e71ab6b928d2ee5bae1aed991849b1e2b291/Telegram/SourceFiles/data/data_document.cpp#L1018\nexport function decodeWaveform(encoded5bit: Uint8Array) {\n  const bitsCount = encoded5bit.length * 8;\n  const valuesCount = Math.floor(bitsCount / 5);\n  if (!valuesCount) {\n    return [];\n  }\n\n  // Read each 5 bit of encoded5bit as 0-31 unsigned char.\n  // We count the index of the byte in which the desired 5-bit sequence starts.\n  // And then we read a uint16 starting from that byte to guarantee to get all of those 5 bits.\n  //\n  // BUT! if it is the last byte we have, we're not allowed to read a uint16 starting with it.\n  // Because it will be an overflow (we'll access one byte after the available memory).\n  // We see, that only the last 5 bits could start in the last available byte and be problematic.\n  // So we read in a general way all the entries in a general way except the last one.\n  const result = Array(valuesCount);\n  const bitsData = encoded5bit;\n  for (let i = 0, l = valuesCount - 1; i !== l; ++i) {\n    const byteIndex = Math.floor((i * 5) / 8);\n    const bitShift = Math.floor((i * 5) % 8);\n    const value = bitsData[byteIndex] + (bitsData[byteIndex + 1] << 8);\n    result[i] = ((value >> bitShift) & 0x1F);\n  }\n  const lastByteIndex = Math.floor(((valuesCount - 1) * 5) / 8);\n  const lastBitShift = Math.floor(((valuesCount - 1) * 5) % 8);\n  const lastValue = bitsData[lastByteIndex] + (bitsData[lastByteIndex + 1] << 8);\n  result[valuesCount - 1] = (lastValue >> lastBitShift) & 0x1F;\n\n  return result;\n}\n\nexport function interpolateArray(data: number[], fitCount: number) {\n  let peak = 0;\n  const newData = new Array(fitCount);\n  const springFactor = data.length / fitCount;\n  const leftFiller = data[0];\n  const rightFiller = data[data.length - 1];\n  for (let i = 0; i < fitCount; i++) {\n    const idx = Math.floor(i * springFactor);\n    const val = ((data[idx - 1] ?? leftFiller) + (data[idx] ?? leftFiller) + (data[idx + 1] ?? rightFiller)) / 3;\n    newData[i] = val;\n    if (peak < val) {\n      peak = val;\n    }\n  }\n  return { data: newData, peak };\n}\n","function promisifyRequest(request) {\n    return new Promise((resolve, reject) => {\n        // @ts-ignore - file size hacks\n        request.oncomplete = request.onsuccess = () => resolve(request.result);\n        // @ts-ignore - file size hacks\n        request.onabort = request.onerror = () => reject(request.error);\n    });\n}\nfunction createStore(dbName, storeName) {\n    const request = indexedDB.open(dbName);\n    request.onupgradeneeded = () => request.result.createObjectStore(storeName);\n    const dbp = promisifyRequest(request);\n    return (txMode, callback) => dbp.then((db) => callback(db.transaction(storeName, txMode).objectStore(storeName)));\n}\nlet defaultGetStoreFunc;\nfunction defaultGetStore() {\n    if (!defaultGetStoreFunc) {\n        defaultGetStoreFunc = createStore('keyval-store', 'keyval');\n    }\n    return defaultGetStoreFunc;\n}\n/**\n * Get a value by its key.\n *\n * @param key\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction get(key, customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => promisifyRequest(store.get(key)));\n}\n/**\n * Set a value with a key.\n *\n * @param key\n * @param value\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction set(key, value, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.put(value, key);\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Set multiple values at once. This is faster than calling set() multiple times.\n * It's also atomic  if one of the pairs can't be added, none will be added.\n *\n * @param entries Array of entries, where each entry is an array of `[key, value]`.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction setMany(entries, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        entries.forEach((entry) => store.put(entry[1], entry[0]));\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Get multiple values by their keys\n *\n * @param keys\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction getMany(keys, customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => Promise.all(keys.map((key) => promisifyRequest(store.get(key)))));\n}\n/**\n * Update a value. This lets you see the old value and update it as an atomic operation.\n *\n * @param key\n * @param updater A callback that takes the old value and returns a new value.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction update(key, updater, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => \n    // Need to create the promise manually.\n    // If I try to chain promises, the transaction closes in browsers\n    // that use a promise polyfill (IE10/11).\n    new Promise((resolve, reject) => {\n        store.get(key).onsuccess = function () {\n            try {\n                store.put(updater(this.result), key);\n                resolve(promisifyRequest(store.transaction));\n            }\n            catch (err) {\n                reject(err);\n            }\n        };\n    }));\n}\n/**\n * Delete a particular key from the store.\n *\n * @param key\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction del(key, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.delete(key);\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Delete multiple keys at once.\n *\n * @param keys List of keys to delete.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction delMany(keys, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        keys.forEach((key) => store.delete(key));\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Clear all values in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction clear(customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.clear();\n        return promisifyRequest(store.transaction);\n    });\n}\nfunction eachCursor(store, callback) {\n    store.openCursor().onsuccess = function () {\n        if (!this.result)\n            return;\n        callback(this.result);\n        this.result.continue();\n    };\n    return promisifyRequest(store.transaction);\n}\n/**\n * Get all keys in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction keys(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        if (store.getAllKeys) {\n            return promisifyRequest(store.getAllKeys());\n        }\n        const items = [];\n        return eachCursor(store, (cursor) => items.push(cursor.key)).then(() => items);\n    });\n}\n/**\n * Get all values in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction values(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        if (store.getAll) {\n            return promisifyRequest(store.getAll());\n        }\n        const items = [];\n        return eachCursor(store, (cursor) => items.push(cursor.value)).then(() => items);\n    });\n}\n/**\n * Get all entries in the store. Each entry is an array of `[key, value]`.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction entries(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        // (although, hopefully we'll get a simpler path some day)\n        if (store.getAll && store.getAllKeys) {\n            return Promise.all([\n                promisifyRequest(store.getAllKeys()),\n                promisifyRequest(store.getAll()),\n            ]).then(([keys, values]) => keys.map((key, i) => [key, values[i]]));\n        }\n        const items = [];\n        return customStore('readonly', (store) => eachCursor(store, (cursor) => items.push([cursor.key, cursor.value])).then(() => items));\n    });\n}\n\nexport { clear, createStore, del, delMany, entries, get, getMany, keys, promisifyRequest, set, setMany, update, values };\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n__webpack_require__.x = () => {\n\t// Load entry module and return exports\n\t// This entry module depends on other loaded chunks and execution need to be delayed\n\tvar __webpack_exports__ = __webpack_require__.O(undefined, [\"vendors-node_modules_pako_dist_pako_inflate_js\",\"vendors-node_modules_buffer_index_js\",\"vendors-node_modules_cryptography_aes_dist_es_aes_js-node_modules_async-mutex_lib_index_js-no-6f4388\",\"src_config_ts\",\"src_api_gramjs_apiBuilders_messages_ts\"], () => (__webpack_require__(\"./src/api/gramjs/worker/worker.ts\")))\n\t__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n\treturn __webpack_exports__;\n};\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".\" + {\"vendors-node_modules_pako_dist_pako_inflate_js\":\"5f75bdcaf063c6c088d2\",\"vendors-node_modules_buffer_index_js\":\"45268dee2535cd31950d\",\"vendors-node_modules_cryptography_aes_dist_es_aes_js-node_modules_async-mutex_lib_index_js-no-6f4388\":\"4528306738c1d7badd5d\",\"src_config_ts\":\"d91d981f0690dbfe91a9\",\"src_api_gramjs_apiBuilders_messages_ts\":\"79fa57eddc7356ae8f68\"}[chunkId] + \".js\";\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","// no baseURI\n\n// object to store loaded chunks\n// \"1\" means \"already loaded\"\nvar installedChunks = {\n\t\"src_api_gramjs_worker_worker_ts-src_util_Deferred_ts-src_util_emoji_parseEmojiOnlyString_ts-n-0abdd2\": 1\n};\n\n// importScripts chunk loading\nvar installChunk = (data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\twhile(chunkIds.length)\n\t\tinstalledChunks[chunkIds.pop()] = 1;\n\tparentChunkLoadingFunction(data);\n};\n__webpack_require__.f.i = (chunkId, promises) => {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\timportScripts(__webpack_require__.p + __webpack_require__.u(chunkId));\n\t\t}\n\t}\n};\n\nvar chunkLoadingGlobal = self[\"webpackChunktelegram_t\"] = self[\"webpackChunktelegram_t\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = installChunk;\n\n// no HMR\n\n// no HMR manifest","var next = __webpack_require__.x;\n__webpack_require__.x = () => {\n\treturn Promise.all([\"vendors-node_modules_pako_dist_pako_inflate_js\",\"vendors-node_modules_buffer_index_js\",\"vendors-node_modules_cryptography_aes_dist_es_aes_js-node_modules_async-mutex_lib_index_js-no-6f4388\",\"src_config_ts\",\"src_api_gramjs_apiBuilders_messages_ts\"].map(__webpack_require__.e, __webpack_require__)).then(next);\n};","","// run startup\nvar __webpack_exports__ = __webpack_require__.x();\n",""],"names":["ChatAbortController","AbortController","constructor","arguments","_defineProperty","Map","getThreadSignal","threadId","controller","threads","get","set","signal","abortThread","reason","abort","delete","forEach","clear","BigInt","Api","GramJs","DEFAULT_LIMITS","SERVICE_NOTIFICATIONS_USER_ID","STORY_EXPIRE_PERIOD","STORY_VIEWERS_EXPIRE_PERIOD","localDb","buildJson","buildEmojiSounds","appConfig","emojies_sounds","Object","keys","reduce","acc","key","l","documents","id","Document","accessHash","access_hash","dcId","mimeType","fileReference","Buffer","alloc","size","getLimit","fallbackKey","defaultLimit","premiumLimit","buildAppConfig","json","hash","emojiSounds","seenByMaxChatMembers","chat_read_mark_size_threshold","seenByExpiresAt","chat_read_mark_expire_period","readDateExpiresAt","pm_read_date_expire_period","autologinDomains","autologin_domains","urlAuthDomains","url_auth_domains","maxUniqueReactions","reactions_uniq_max","premiumBotUsername","premium_bot_username","premiumInvoiceSlug","premium_invoice_slug","premiumPromoOrder","premium_promo_order","isPremiumPurchaseBlocked","premium_purchase_blocked","isGiveawayGiftsPurchaseAvailable","giveaway_gifts_purchase_available","defaultEmojiStatusesStickerSetId","default_emoji_statuses_stickerset_id","topicsPinnedLimit","topics_pinned_limit","maxUserReactionsDefault","reactions_user_max_default","maxUserReactionsPremium","reactions_user_max_premium","hiddenMembersMinCount","hidden_members_group_size_min","giveawayAddPeersMax","giveaway_add_peers_max","giveawayBoostsPerPremium","giveaway_boosts_per_premium","giveawayCountriesMax","giveaway_countries_max","boostsPerSentGift","boosts_per_sent_gift","canDisplayAutoarchiveSetting","autoarchive_setting_available","limits","uploadMaxFileparts","stickersFaved","savedGifs","dialogFiltersChats","dialogFilters","dialogFolderPinned","captionLength","channels","channelsPublic","aboutLength","chatlistInvites","chatlistJoined","recommendedChannels","savedDialogsPinned","areStoriesHidden","stories_all_hidden","storyExpirePeriod","story_expire_period","storyViewersExpirePeriod","story_viewers_expire_period","storyChangelogUserId","stories_changelog_user_id","toString","maxPinnedStoriesCount","stories_pinned_to_top_count_max","groupTranscribeLevelMin","group_transcribe_level_min","canLimitNewMessagesWithoutPremium","new_noncontact_peers_require_premium_without_ownpremium","bandwidthPremiumNotifyPeriod","upload_premium_speedup_notify_period","bandwidthPremiumUploadSpeedup","upload_premium_speedup_upload","bandwidthPremiumDownloadSpeedup","upload_premium_speedup_download","channelRestrictAdsLevelMin","channel_restrict_sponsored_level_min","pick","addDocumentToLocalDb","buildApiPhoto","buildApiThumbnailFromStripped","omitVirtualClassFields","buildApiDocument","buildApiWebDocument","buildVideoFromDocument","buildApiPeerId","buildStickerFromDocument","buildApiBotInlineResult","result","queryId","type","title","description","url","thumb","webThumbnail","buildApiBotInlineMediaResult","photo","document","sticker","Photo","gif","thumbnail","thumbs","buildBotSwitchPm","switchPm","undefined","buildBotSwitchWebview","switchWebview","buildApiAttachBot","bot","botId","shouldRequestWriteAccess","requestWriteAccess","shortName","isForAttachMenu","showInAttachMenu","isForSideMenu","showInSideMenu","attachMenuPeerTypes","peerTypes","map","buildApiAttachMenuPeerType","icons","buildApiAttachMenuIcon","filter","Boolean","isInactive","inactive","isDisclaimerNeeded","sideMenuDisclaimerNeeded","peerType","AttachMenuPeerTypeBotPM","AttachMenuPeerTypePM","AttachMenuPeerTypeChat","AttachMenuPeerTypeBroadcast","AttachMenuPeerTypeSameBotPM","icon","name","buildApiBotInfo","botInfo","chatId","descriptionPhoto","descriptionDocument","userId","commands","menuButton","commandsArray","command","buildApiBotCommand","buildApiBotMenuButton","length","BotMenuButton","text","buildApiBotApp","app","BotAppNotModified","apiPhoto","apiDocument","buildApiMessagesBotApp","botApp","baseApp","buildGeoPoint","buildApiBusinessLocation","location","address","geoPoint","geo","buildApiBusinessWorkHours","workHours","timezoneId","weeklyOpen","_ref","startMinute","endMinute","buildApiBusinessIntro","intro","omitUndefined","pickTruthy","getServerTime","getServerTimeOffset","serializeBytes","buildApiUsernames","buildApiEmojiStatus","buildApiPeerColor","getApiChatIdFromMtpPeer","isPeerChat","isPeerUser","buildApiReaction","buildApiChatFieldsFromPeerEntity","peerEntity","isSupport","isMin","min","String","hasVideoAvatar","hasVideo","avatarHash","buildAvatarHash","isSignaturesShown","signatures","hasPrivateLink","hasLink","isScam","scam","isFake","fake","isJoinToSend","joinToSend","isJoinRequest","joinRequest","usernames","isForum","forum","storiesHidden","maxStoryId","storiesMaxId","storiesUnavailable","color","emojiStatus","boostLevel","level","isVerified","verified","isCallActive","callActive","isCallNotEmpty","callNotEmpty","creationDate","date","participantsCount","membersCount","isProtected","noforwards","buildApiChatPermissions","isCreator","creator","buildApiChatRestrictions","buildApiChatMigrationInfo","fakeType","hasStories","buildApiChatFromDialog","dialog","peer","folderId","unreadMark","unreadCount","unreadMentionsCount","unreadReactionsCount","notifySettings","silent","muteUntil","readOutboxMaxId","readInboxMaxId","draft","viewForumAsMessages","isMuted","getApiChatTypeFromPeerEntity","getApiChatTitleFromMtpPeer","lastReadOutboxMessageId","lastReadInboxMessageId","hasUnreadMark","DraftMessage","draftDate","isForumAsMessages","buildApiChatFromSavedDialog","Chat","Channel","adminRights","currentUserBannedRights","bannedRights","defaultBannedRights","ChatForbidden","isForbidden","ChannelForbidden","isRestricted","restrictions","restrictionReason","restricted","buildApiChatRestrictionReason","assign","isNotJoined","left","migratedTo","InputChannelEmpty","InputChannel","restrictionReasons","targetReason","find","platform","buildApiChatFromPreview","preview","ChatEmpty","UserEmpty","User","getUserName","megagroup","getPeerKey","channelId","user","firstName","lastName","photoId","buildChatMember","member","ChannelParticipantBanned","ChannelParticipantLeft","inviterId","joinedDate","kickedByUserId","kickedBy","promotedByUserId","promotedBy","customTitle","rank","ChannelParticipantAdmin","ChatParticipantAdmin","isAdmin","ChannelParticipantCreator","ChatParticipantCreator","isOwner","buildChatMembers","participants","ChatParticipants","ChannelParticipants","buildChatTypingStatus","update","action","emoticon","SendMessageCancelAction","SendMessageTypingAction","SendMessageRecordVideoAction","SendMessageUploadVideoAction","SendMessageRecordAudioAction","SendMessageUploadAudioAction","SendMessageUploadPhotoAction","SendMessageUploadDocumentAction","SendMessageGeoLocationAction","SendMessageChooseContactAction","SendMessageGamePlayAction","SendMessageRecordRoundAction","SendMessageUploadRoundAction","SendMessageChooseStickerAction","SpeakingInGroupCallAction","SendMessageEmojiInteractionSeen","SendMessageEmojiInteraction","emoji","UpdateUserTyping","fromId","timestamp","Date","now","buildApiChatFolder","DialogFilterChatlist","excludedChatIds","includedChatIds","includePeers","pinnedChatIds","pinnedPeers","hasMyInvites","isChatList","broadcasts","excludePeers","buildApiChatFolderFromSuggested","_ref2","DialogFilter","buildApiChatBotCommands","botInfos","botCommands","concat","mtpCommand","buildApiExportedInvite","invite","revoked","expireDate","link","permanent","startDate","usage","usageLimit","requested","requestNeeded","adminId","isRevoked","isPermanent","isRequestNeeded","buildChatInviteImporter","importer","about","viaChatlist","isRequested","isFromChatList","buildApiChatSettings","_ref3","autoarchived","reportSpam","addContact","blockContact","isAutoArchived","canReportSpam","canAddContact","canBlockContact","buildApiChatReactions","chatReactions","ChatReactionsAll","areCustomAllowed","allowCustom","ChatReactionsSome","allowed","reactions","buildApiSendAsPeerId","sendAs","isPremium","premiumRequired","buildApiTopic","forumTopic","ForumTopicDeleted","my","closed","pinned","hidden","short","iconColor","iconEmojiId","topMessage","isClosed","isPinned","isHidden","lastMessageId","buildApiChatlistInvite","slug","chatlists","ChatlistInvite","peerIds","peers","ChatlistInviteAlready","filterId","missingPeerIds","missingPeers","alreadyPeerIds","alreadyPeers","buildApiChatlistExportedInvite","ExportedChatlistInvite","buildApiMissingInvitedUser","isRequiringPremiumToMessage","premiumRequiredForPm","isRequiringPremiumToInvite","premiumWouldAllowInvite","buildApiSponsoredMessageReportResult","SponsoredMessageReportResultReported","SponsoredMessageReportResultAdsHidden","options","option","buildCollectionByCallback","omit","addUserToLocalDb","buildMessageTextContent","buildApiUser","buildApiWallpaper","wallpaper","WallPaperNoFile","buildApiSession","session","isCurrent","current","isOfficialApp","officialApp","isPasswordPending","passwordPending","areCallsEnabled","callRequestsDisabled","areSecretChatsEnabled","encryptedRequestsDisabled","isUnconfirmed","unconfirmed","buildApiWebSession","buildPrivacyKey","className","buildApiNotifyException","showPreviews","otherSound","hasSound","NotificationSoundNone","isSilent","shouldShowPreviews","buildApiNotifyExceptionTopic","topicId","buildApiCountry","country","code","iso2","defaultName","countryCode","prefixes","patterns","buildApiCountryList","countries","nonHiddenCountries","listByCode","countryCodes","flat","sort","a","b","localeCompare","generalList","phoneCodes","general","JsonNull","JsonString","JsonBool","JsonNumber","value","JsonArray","el","buildApiUrlAuthResult","UrlAuthResultRequest","domain","UrlAuthResultAccepted","UrlAuthResultDefault","buildApiConfig","config","defaultReaction","reactionsDefault","expiresAt","expires","gifSearchUsername","maxGroupSize","chatSizeMax","autologinToken","oldBuildLangPack","mtpLangPack","strings","mtpString","oldBuildLangPackString","LangPackString","LangPackStringPluralized","buildLangStrings","keysToRemove","apiStrings","LangPackStringDeleted","push","zero","zeroValue","one","oneValue","two","twoValue","few","fewValue","many","manyValue","other","otherValue","buildApiLanguage","lang","nativeName","langCode","pluralCode","rtl","stringsCount","translatedCount","translationsUrl","beta","official","isRtl","isBeta","isOfficial","buildApiPeerColorSet","colorSet","help","PeerColorSet","colors","padStart","buildApiPeerColors","wrapper","PeerColors","colorId","darkColors","buildApiTimezone","timezone","utcOffset","buildApiChatLink","data","message","entities","buildApiCollectibleInfo","info","amount","currency","cryptoAmount","cryptoCurrency","purchaseDate","toJSNumber","addWebDocumentToLocalDb","buildApiMessageEntity","buildMessageMediaContent","buildPrepaidGiveaway","buildStatisticsPercentage","buildShippingOptions","shippingOptions","values","prices","ac","cur","label","buildApiReceipt","receipt","payments","PaymentReceiptStars","totalAmount","transactionId","invoice","shipping","credentialsTitle","tipAmount","shippingAddress","phone","mappedPrices","shippingPrices","shippingMethod","buildApiPaymentForm","form","PaymentFormStars","formId","canSaveCredentials","passwordMissing","isPasswordMissing","providerId","nativeProvider","nativeParams","savedInfo","savedCredentials","test","isTest","nameRequested","isNameRequested","phoneRequested","isPhoneRequested","emailRequested","isEmailRequested","shippingAddressRequested","isShippingAddressRequested","flexible","isFlexible","phoneToProvider","shouldSendPhoneToProvider","emailToProvider","shouldSendEmailToProvider","_ref4","cleanedInfo","nativeData","JSON","parse","invoiceContainer","needCardholderName","need_cardholder_name","needCountry","need_country","needZip","need_zip","publishableKey","publishable_key","publicToken","public_token","tokenizeUrl","tokenize_url","buildApiPaymentCredentials","buildApiInvoiceFromForm","recurring","termsUrl","maxTipAmount","suggestedTipAmounts","mediaType","isRecurring","tip","buildApiPremiumPromo","promo","statusText","statusEntities","videos","videoSections","periodOptions","buildApiPremiumSubscriptionOption","canPurchaseUpgrade","botUrl","months","credentials","_ref5","buildApiBoostsStatus","boostStatus","boostUrl","boosts","myBoost","currentLevelBoosts","nextLevelBoosts","premiumAudience","prepaidGiveaways","hasMyBoost","premiumSubscribers","buildApiBoost","boost","multiplier","giveaway","gift","isFromGiveaway","isGift","buildApiMyBoost","slot","cooldownUntilDate","cooldownUntil","buildApiGiveawayInfo","GiveawayInfo","adminDisallowedChatId","disallowedCountry","joinedTooEarlyDate","participating","preparingResults","isParticipating","isPreparingResults","activatedCount","finishDate","giftCodeSlug","winner","refunded","winnersCount","isRefunded","isWinner","buildApiCheckedGiftCode","giftcode","giveawayMsgId","toId","usedDate","viaGiveaway","usedAt","giveawayMessageId","buildApiPremiumGiftCodeOption","users","buildApiStarsTransactionPeer","StarsTransactionPeerAppStore","StarsTransactionPeerPlayMarket","StarsTransactionPeerPremiumBot","StarsTransactionPeerFragment","StarsTransactionPeerAds","StarsTransactionPeer","buildApiStarsTransaction","transaction","stars","refund","extendedMedia","failed","msgId","pending","boughtExtendedMedia","m","isRefund","hasFailed","isPending","messageId","buildApiStarTopupOption","extended","isExtended","buildChannelStatistics","stats","growthGraph","buildGraph","followersGraph","muteGraph","topHoursGraph","languagesGraph","token","viewsBySourceGraph","newFollowersBySourceGraph","interactionsGraph","reactionsByEmotionGraph","storyInteractionsGraph","storyReactionsByEmotionGraph","followers","buildStatisticsOverview","viewsPerPost","sharesPerPost","enabledNotifications","reactionsPerPost","viewsPerStory","sharesPerStory","reactionsPerStory","recentPosts","recentPostsInteractions","buildApiPostInteractionCounter","interaction","PostInteractionCountersMessage","forwardsCount","forwards","viewsCount","views","reactionsCount","PostInteractionCountersStory","storyId","buildGroupStatistics","membersGraph","messagesGraph","actionsGraph","period","getOverviewPeriod","members","viewers","messages","posters","buildPostsStatistics","viewsGraph","reactionsGraph","buildMessagePublicForwards","buildApiMessagePublicForward","chats","buildStoryPublicForwards","forward","PublicForwardMessage","story","peerId","isPercentage","error","x","y","columns","hasSecondYAxis","y_scaled","types","y0","zoomToken","labelFormatter","xTickFormatter","tooltipFormatter","xTooltipFormatter","labels","slice","hideCaption","subchart","show","isStacked","stacked","datasets","item","names","extractColor","calculateMinimapRange","defaultZoom","substring","indexOf","range","max","minIndex","maxIndex","index","begin","Math","end","minimapRange","labelFromIndex","labelToIndex","previous","change","percentage","abs","toFixed","part","total","prepaidGiveaway","quantity","maxDate","minDate","channel","c","chat","buildPrivacyRules","buildApiMessage","buildReactionCount","buildApiStory","StoryItemDeleted","isDeleted","StoryItemSkipped","closeFriends","isForCloseFriends","edited","caption","media","privacy","public","isPublic","contacts","selectedContacts","mediaAreas","sentReaction","out","fwdFrom","content","isEdited","isInProfile","isForContacts","isForSelectedContacts","noForwards","buildApiStoryViews","isOut","visibility","buildApiMediaArea","forwardInfo","buildApiStoryForwardInfo","hasViewers","recentViewerIds","recentViewers","viewerId","buildApiStoryView","view","blockedMyStoriesFrom","blocked","StoryView","reaction","areStoriesBlocked","isUserBlocked","StoryViewPublicForward","StoryViewPublicRepost","buildApiStealthMode","stealthMode","activeUntil","activeUntilDate","buildApiMediaAreaCoordinates","coordinates","w","h","rotation","radius","width","height","area","MediaAreaVenue","point","MediaAreaGeoPoint","MediaAreaSuggestedReaction","dark","flipped","apiReaction","isDark","isFlipped","MediaAreaChannelPost","MediaAreaUrl","buildApiPeerStories","peerStories","stories","forwardHeader","from","fromName","modified","fromPeerId","isModified","buildApiUserFullInfo","mtpUserFull","fullUser","commonChatsCount","pinnedMsgId","profilePhoto","voiceMessagesForbidden","premiumGifts","fallbackPhoto","personalPhoto","translationsDisabled","storiesPinnedAvailable","contactRequirePremium","businessWorkHours","businessLocation","businessIntro","birthday","personalChannelId","personalChannelMessage","sponsoredEnabled","bio","pinnedMessageId","isBlocked","noVoiceMessages","hasPinnedStories","isTranslationDisabled","buildApiPremiumGiftOption","isContactRequirePremium","buildApiBirthday","personalChannelMessageId","areAdsEnabled","mtpUser","support","closeFriend","UserProfilePhoto","userType","buildApiUserType","self","isSelf","premium","isCloseFriend","contact","mutualContact","isContact","canEditBot","botCanEdit","canBeInvitedToGroup","botNochats","phoneNumber","noStatus","status","botInlinePlaceholder","botPlaceholder","botAttachMenu","isAttachBot","deleted","buildApiUserStatus","mtpStatus","UserStatusEmpty","UserStatusOnline","UserStatusOffline","wasOnline","UserStatusRecently","isReadDateRestrictedByMe","byMe","UserStatusLastWeek","buildApiUsersAndStatuses","mtpUsers","userStatusesById","usersById","duplicateUser","buildInputPeer","buildInputPhoto","buildInputReportReason","invokeRequest","reportPeer","account","ReportPeer","reportProfilePhoto","ReportProfilePhoto","changeSessionSettings","isConfirmed","ChangeAuthorizationSettings","confirmed","changeSessionTtl","days","SetAuthorizationTTL","authorizationTtlDays","resolveBusinessChatLink","ResolveBusinessChatLink","shouldIgnoreErrors","chatLink","toggleSponsoredMessages","_ref6","enabled","ToggleSponsoredMessages","shouldReturnTrue","errors","DEBUG","ApiErrors","PHONE_NUMBER_INVALID","PHONE_CODE_INVALID","PASSWORD_HASH_INVALID","PHONE_PASSWORD_FLOOD","PHONE_NUMBER_BANNED","authController","onUpdate","init","_onUpdate","onWebAuthTokenFailed","onRequestPhoneNumber","buildAuthStateUpdate","Promise","resolve","reject","onRequestCode","isCodeViaApp","onRequestPassword","hint","noReset","onRequestRegistration","onRequestQrCode","qrCode","btoa","fromCharCode","replace","onAuthError","err","FloodWaitError","hours","ceil","Number","seconds","console","onAuthReady","onCurrentUserUpdate","currentUser","currentUserFullInfo","authorizationState","provideAuthPhoneNumber","provideAuthCode","provideAuthPassword","password","provideAuthRegistration","registration","restartAuth","Error","restartAuthWithQr","WEB_APP_PLATFORM","buildCollectionByKey","buildInputBotApp","buildInputEntity","buildInputReplyTo","buildInputThemeParams","generateRandomBigInt","addEntitiesToLocalDb","addPhotoToLocalDb","deserializeBytes","answerCallbackButton","isGame","GetBotCallbackAnswer","game","fetchTopInlineBots","topPeers","GetTopPeers","botsInline","TopPeers","ids","fetchInlineBot","username","resolvedPeer","ResolveUsername","fetchInlineBotResults","query","offset","GetInlineBotResults","isGallery","gallery","nextOffset","getInlineBotResultsNextOffset","results","processInlineBotResult","cacheTime","sendInlineBotResult","replyInfo","resultId","scheduleDate","randomId","SendInlineBotResult","clearDraft","replyTo","startBot","startParam","StartBot","requestWebView","_ref7","theme","isFromBotMenu","RequestWebView","themeParams","fromBotMenu","WebViewResultUrl","requestSimpleWebView","_ref8","isFromSwitchWebView","isFromSideMenu","RequestSimpleWebView","fromSwitchWebview","fromSideMenu","fetchBotApp","_ref9","appName","GetBotApp","InputBotAppShortName","requestAppWebView","_ref10","isWriteAllowed","RequestAppWebView","writeAllowed","prolongWebView","_ref11","ProlongWebView","sendWebViewData","_ref12","buttonText","SendWebViewData","loadAttachBots","_ref13","GetAttachMenuBots","AttachMenuBots","bots","loadAttachBot","_ref14","GetAttachMenuBot","AttachMenuBotsBot","toggleAttachBot","_ref15","isEnabled","ToggleBotInAttachMenu","requestBotUrlAuth","_ref16","buttonId","RequestUrlAuth","authResult","acceptBotUrlAuth","_ref17","AcceptUrlAuth","requestLinkUrlAuth","_ref18","acceptLinkUrlAuth","_ref19","fetchBotCanSendMessage","_ref20","CanSendMessage","allowBotSendMessages","_ref21","AllowSendMessage","invokeWebViewCustomMethod","_ref22","customMethod","parameters","InvokeWebViewCustomMethod","params","DataJSON","shouldThrow","e","BotInlineMediaResult","setBotInfo","_ref23","SetBotInfo","GROUP_CALL_PARTICIPANTS_LIMIT","buildApiGroupCall","buildApiGroupCallParticipant","buildCallProtocol","buildPhoneCall","buildInputGroupCall","buildInputPhoneCall","generateRandomInt","invokeRequestBeacon","getGroupCall","call","GetGroupCall","groupCall","discardGroupCall","DiscardGroupCall","editGroupCallParticipant","participant","muted","presentationPaused","videoStopped","videoPaused","volume","raiseHand","EditGroupCallParticipant","editGroupCallTitle","EditGroupCallTitle","exportGroupCallInvite","canSelfUnmute","ExportGroupCallInvite","fetchGroupCallParticipants","GetGroupParticipants","sources","limit","groupCallId","leaveGroupCall","isPageUnload","request","LeaveGroupCall","joinGroupCall","inviteHash","JoinGroupCall","joinAs","InputPeerSelf","stringify","shouldRetryOnTimeout","abortControllerGroup","Updates","updates","u","UpdateGroupCall","createGroupCall","CreateGroupCall","joinGroupCallPresentation","JoinGroupCallPresentation","toggleGroupCallStartSubscription","subscribed","ToggleGroupCallStartSubscription","leaveGroupCallPresentation","LeaveGroupCallPresentation","getDhConfig","dhConfig","GetDhConfig","DhConfigNotModified","g","p","Array","random","discardCall","isBusy","DiscardCall","PhoneCallDiscardReasonBusy","PhoneCallDiscardReasonHangup","requestCall","gAHash","isVideo","RequestCall","video","protocol","phoneCall","setCallRating","rating","comment","SetCallRating","receivedCall","ReceivedCall","acceptCall","gB","AcceptCall","confirmCall","gA","keyFingerprint","ConfirmCall","sendSignalingData","SendSignalingData","ALL_FOLDER_ID","ARCHIVED_FOLDER_ID","GENERAL_TOPIC_ID","GLOBAL_SEARCH_CONTACTS_LIMIT","MAX_INT_32","MEMBERS_LOAD_SLICE","TOPICS_SLICE","buildMessageDraft","buildStickerSet","buildChatAdminRights","buildChatBannedRights","buildFilterFromApiFolder","buildInputChatReactions","buildMtpMessageEntity","addMessageToLocalDb","isChatFolder","scheduleMutedChatUpdate","applyState","processAffectedHistory","updateChannelState","dispatchThreadInfoUpdates","handleGramJsUpdate","uploadFile","fetchChats","offsetDate","archived","withPinned","lastLocalServiceMessageId","GetDialogs","offsetPeer","InputPeerEmpty","excludePinned","resultPinned","GetPinnedDialogs","DialogsNotModified","updateLocalDb","peersByKey","preparePeers","draftsById","dialogs","orderedPinnedIds","lastMessageByChatId","Dialog","pts","isListed","chatIds","totalChatCount","DialogsSlice","count","fetchSavedChats","GetSavedDialogs","GetPinnedSavedDialogs","SavedDialogsNotModified","hasPinned","SavedDialogsSlice","fetchFullChat","input","getFullChannelInfo","getFullChatInfo","fetchChatSettings","GetPeerSettings","abortControllerChatId","settings","searchChats","Search","q","accountPeerIds","myResults","globalPeerIds","includes","accountResultIds","globalResultIds","fetchChat","GetUsers","InputUserSelf","GetSupport","requestChatUpdate","lastLocalMessage","noLastMessage","GetPeerDialogs","InputDialogPeer","lastRemoteMessage","lastMessage","chatUpdate","state","saveDraft","SaveDraft","GetFullChat","fullChat","ChatFull","exportedInvite","availableReactions","recentRequesters","requestsPending","chatPhoto","adminMembers","inviteLink","ChatInviteExported","fullInfo","adminMembersById","canViewMembers","enabledReactions","recentRequesterIds","isPreHistoryHidden","isLoaded","connectionState","version","GetFullChannel","ChannelFull","onlineCount","slowmodeSeconds","slowmodeNextSendDate","migratedFromChatId","migratedFromMaxId","canViewParticipants","canViewStats","linkedChatId","hiddenPrehistory","defaultSendAs","statsDc","stickerset","participantsHidden","emojiset","boostsApplied","boostsUnrestrict","fetchMembers","kickedMembers","bannedUsers","bannedStatusesById","adminUsers","adminStatusesById","mtpLinkedChat","statusesById","slowMode","nextSendDate","migratedFrom","maxMessageId","canViewStatistics","sendAsId","statisticsDcId","stickerSet","emojiSet","areParticipantsHidden","boostsToUnrestrict","updateChatMutedState","UpdateNotifySettings","InputNotifyPeer","InputPeerNotifySettings","updateTopicMutedState","InputNotifyForumTopic","topMsgId","createChannel","CreateChannel","broadcast","newChannel","missingUsers","invitedUsers","InviteToChannel","missingInvitees","joinChannel","JoinChannel","deleteChatUser","DeleteChatUser","deleteChat","DeleteChat","leaveChannel","LeaveChannel","deleteChannel","DeleteChannel","createGroupChat","CreateChat","newChat","editChatPhoto","inputEntity","inputPhoto","File","uploadedPhoto","InputChatUploadedPhoto","file","InputChatPhoto","InputChatPhotoEmpty","EditPhoto","EditChatPhoto","toggleChatPinned","shouldBePinned","isActionSuccessful","ToggleDialogPin","toggleSavedDialogPinned","ToggleSavedDialogPin","toggleChatArchived","folders","EditPeerFolders","folderPeers","InputFolderPeer","fetchChatFolders","GetDialogFilters","filters","defaultFolderPosition","findIndex","folder","DialogFilterDefault","orderedIds","splice","byId","fetchRecommendedChatFolders","GetSuggestedDialogFilters","editChatFolder","_ref24","folderUpdate","UpdateDialogFilter","deleteChatFolder","recommendedChatFolders","sortChatFolders","UpdateDialogFiltersOrder","order","toggleDialogUnread","_ref25","MarkDialogUnread","unread","getChatByPhoneNumber","ResolvePhone","processResolvedPeer","getChatByUsername","togglePreHistoryHidden","_ref26","TogglePreHistoryHidden","updateChatDefaultBannedRights","_ref27","EditChatDefaultBannedRights","updateChatMemberBannedRights","_ref28","untilDate","EditBanned","updateChatAdmin","_ref29","EditAdmin","updateChatTitle","EditTitle","EditChatTitle","updateChatAbout","EditChatAbout","toggleSignatures","_ref30","ToggleSignatures","memberFilter","ChannelParticipantsKicked","ChannelParticipantsAdmins","ChannelParticipantsRecent","GetParticipants","ChannelParticipantsNotModified","fetchGroupsForDiscussion","GetGroupsForDiscussion","setDiscussionGroup","_ref31","SetDiscussionGroup","group","migrateChat","MigrateChat","newChannelId","UpdateChannel","openChatByInvite","CheckChatInvite","ChatInvite","isChannel","addChatMembers","addChatUsersResult","all","AddChatUser","deleteChatMember","viewMessages","sendMessages","sendMedia","sendStickers","sendGifs","sendGames","sendInline","embedLinks","sendPolls","changeInfo","inviteUsers","pinMessages","manageTopics","sendPhotos","sendVideos","sendRoundvideos","sendAudios","sendVoices","sendDocs","sendPlain","toggleJoinToSend","ToggleJoinToSend","toggleJoinRequest","ToggleJoinRequest","currentStore","store","importChatInvite","_ref32","ImportChatInvite","setChatEnabledReactions","_ref33","SetChatAvailableReactions","toggleIsProtected","_ref34","ToggleNoForwards","toggleParticipantsHidden","_ref35","ToggleParticipantsHidden","toggleForum","_ref36","ToggleForum","createTopic","_ref37","CreateForumTopic","UpdateMessageID","fetchTopics","_ref38","offsetTopicId","offsetId","GetForumTopics","offsetTopic","orderByCreateDate","topics","topic","ForumTopic","readInboxMessageIdByTopicId","shouldOrderByCreateDate","fetchTopicById","_ref39","GetForumTopicsByID","deleteTopic","_ref40","DeleteTopicHistory","togglePinnedTopic","_ref41","UpdatePinnedForumTopic","editTopic","_ref42","EditForumTopic","checkChatlistInvite","_ref43","CheckChatlistInvite","joinChatlistInvite","_ref44","JoinChatlistInvite","fetchLeaveChatlistSuggestions","_ref45","GetLeaveChatlistSuggestions","chatlist","InputChatlistDialogFilter","leaveChatlist","_ref46","LeaveChatlist","createChalistInvite","_ref47","ExportChatlistInvite","deleteChatlistInvite","_ref48","DeleteExportedInvite","editChatlistInvite","_ref49","EditExportedInvite","fetchChatlistInvites","_ref50","GetExportedInvites","invites","togglePeerTranslations","_ref51","TogglePeerTranslations","disabled","setViewForumAsMessages","_ref52","ToggleViewForumAsMessages","fetchChannelRecommendations","_ref53","GetChannelRecommendations","similarChannels","ChatsSlice","reportSponsoredMessage","_ref54","ReportSponsoredMessage","sessions","TelegramClient","Logger","GramJsLogger","APP_CODE_NAME","DEBUG_GRAMJS","IS_TEST","UPLOAD_WORKERS","pause","setMessageBuilderCurrentUserId","buildInputPeerFromLocalDb","addStoryToLocalDb","isResponseUpdate","log","clearLocalDb","getDifference","initUpdatesManager","processUpdate","reset","resetUpdatesManager","scheduleGetChannelDifference","downloadMediaWithClient","parseMediaUrl","DEFAULT_USER_AGENT","DEFAULT_PLATFORM","setLevel","gramJsUpdateEventBuilder","build","CHAT_ABORT_CONTROLLERS","ABORT_CONTROLLERS","client","currentUserId","initialArgs","userAgent","sessionData","isWebmSupported","maxBufferSize","webAuthToken","mockScenario","shouldForceHttpTransport","shouldAllowHttpTransport","shouldDebugExportedSenders","CallbackSession","onSessionUpdate","process","env","TELEGRAM_API_ID","TELEGRAM_API_HASH","deviceModel","navigator","systemVersion","appVersion","APP_VERSION","useWSS","additionalDcsDisabled","testServers","addEventHandler","invoke","setPingCallback","start","phoneCode","firstAndLastNames","onError","initialMethod","shouldThrowIfUnauthorized","webAuthTokenFailed","getSessionData","fetchCurrentUser","setIsPremium","LOG_OUT_TIMEOUT","destroy","noLogOut","noClearLocalDb","isConnected","race","auth","LogOut","disconnect","getClient","UpdatesTooLong","handleTerminatedSession","nestedUpdate","UpdateConfig","_entities","entity","shouldIgnoreUpdates","abortControllerThreadId","abortSignal","debug","dispatchErrorUpdate","invokeBeacon","downloadMedia","args","onProgress","startsWith","isFileReferenceRepaired","repairFileReference","workers","updateTwoFaSettings","getTmpPassword","currentPassword","ttl","abortChatRequests","abortRequestGroup","userFull","GetFullUser","isSlowMode","SendMessage","SendMedia","SendMultiMedia","hasErrorKey","parsed","entityId","mediaMatchType","webDocuments","photos","repairableEntity","localRepairInfo","repairStoryMedia","repairMessageMedia","GetMessages","InputMessageID","MessagesNotModified","MessageEmpty","apiMessage","GetStoriesByID","apiStory","setForceHttpTransport","forceHttpTransport","setAllowHttpTransport","allowHttpTransport","setShouldDebugExportedSenders","requestChannelDifference","fetchCollectionInfo","collectible","inputCollectible","InputCollectibleUsername","InputCollectiblePhone","fragment","GetCollectibleInfo","fetchMessages","fetchMessage","sendMessage","pinMessage","unpinAllMessages","deleteMessages","deleteHistory","markMessageListRead","markMessagesRead","searchMessagesLocal","searchMessagesGlobal","fetchWebPagePreview","editMessage","forwardMessages","loadPollOptionResults","sendPollVote","findFirstMessageIdAfterDate","fetchPinnedMessages","fetchScheduledHistory","sendScheduledMessages","rescheduleMessage","deleteScheduledMessages","reportMessages","sendMessageAction","fetchSeenBy","fetchSponsoredMessages","viewSponsoredMessage","fetchSendAs","saveDefaultSendAs","fetchUnreadReactions","readAllReactions","fetchUnreadMentions","readAllMentions","transcribeAudio","closePoll","fetchExtendedMedia","translateText","fetchMessageViews","fetchDiscussionMessage","clickSponsoredMessage","fetchOutboxReadDate","exportMessageLink","fetchQuickReplies","sendQuickReply","fetchFactChecks","deleteSavedHistory","fetchFullUser","fetchNearestCountry","fetchTopUsers","fetchContactList","fetchUsers","updateContact","importContact","deleteContact","fetchProfilePhotos","fetchCommonChats","updateEmojiStatus","saveCloseFriends","fetchStickerSets","fetchRecentStickers","fetchFavoriteStickers","fetchFeaturedStickers","fetchRecentEmojiStatuses","faveSticker","fetchStickers","fetchSavedGifs","saveGif","searchStickers","installStickerSet","uninstallStickerSet","searchGifs","fetchAnimatedEmojis","fetchStickersForEmoji","fetchEmojiKeywords","fetchAnimatedEmojiEffects","removeRecentSticker","clearRecentStickers","fetchCustomEmoji","fetchPremiumGifts","fetchCustomEmojiSets","fetchFeaturedEmojiStickers","fetchGenericEmojiEffects","fetchDefaultTopicIcons","fetchDefaultStatusEmojis","checkChatUsername","setChatUsername","updatePrivateLink","deactivateAllUsernames","fetchExportedChatInvites","editExportedChatInvite","exportChatInvite","deleteExportedChatInvite","deleteRevokedExportedChatInvites","fetchChatInviteImporters","hideChatJoinRequest","hideAllChatJoinRequests","hideChatReportPanel","getPasswordInfo","checkPassword","clearPassword","updatePassword","updateRecoveryEmail","provideRecoveryEmailCode","fetchChannelStatistics","fetchGroupStatistics","fetchMessageStatistics","fetchMessagePublicForwards","fetchStatisticsAsyncGraph","fetchStoryStatistics","fetchStoryPublicForwards","acceptPhoneCall","confirmPhoneCall","requestPhoneCall","decodePhoneCallData","createPhoneCallState","destroyPhoneCallState","encodePhoneCallData","broadcastLocalDbUpdateFull","validateRequestedInfo","sendPaymentForm","getPaymentForm","getReceipt","fetchPremiumPromo","fetchTemporaryPaymentPassword","applyBoost","fetchBoostList","fetchBoostStatus","fetchGiveawayInfo","fetchMyBoosts","applyGiftCode","checkGiftCode","getPremiumGiftCodeOptions","launchPrepaidGiveaway","fetchStarsStatus","fetchStarsTopupOptions","fetchStarsTransactions","sendStarPaymentForm","API_THROTTLE_RESET_UPDATES","API_UPDATE_THROTTLE","throttle","throttleWithTickEnd","updateFullLocalDb","initUpdater","initAuth","initBots","initCalls","initChats","initClient","methods","initManagement","initMessages","initPayments","initStickers","initTwoFaSettings","initUsers","initApi","initialLocalDb","handleUpdate","callApi","fnName","_len","_key","cancelApiProgress","progressCallback","isCanceled","flushUpdatesOnTickEnd","flushUpdates","flushUpdatesThrottled","currentThrottleId","pendingUpdates","has","throttleId","currentUpdates","USERNAME_PURCHASE_ERROR","ACCEPTABLE_USERNAME_ERRORS","Set","CheckUsername","errorMessage","UpdateUsername","isEditable","isActive","DeactivateAllUsernames","ExportChatInvite","admin","exportedInvites","GetExportedChatInvites","EditExportedChatInvite","ExportedChatInvite","replaceInvite","oldInvite","newInvite","ExportedChatInviteReplaced","DeleteExportedChatInvite","DeleteRevokedExportedChatInvites","offsetUser","GetChatInviteImporters","InputUserEmpty","importers","isApproved","HideChatJoinRequest","approved","HideAllChatJoinRequests","HidePeerSettingsBar","ApiMediaFormat","DOWNLOAD_WORKERS","MEDIA_CACHE_DISABLED","MEDIA_CACHE_MAX_BYTES","MEDIA_CACHE_NAME","MEDIA_CACHE_NAME_AVATARS","cacheApi","getEntityTypeById","MEDIA_ENTITY_TYPES","JPEG_SIZE_TYPES","MP4_SIZES_TYPES","mediaFormat","isHtmlAllowed","fullSize","download","parseMedia","canCache","Progressive","BlobUrl","cacheName","save","dataBlob","arrayBuffer","entityType","sizeType","parsedParams","URLSearchParams","long","lat","zoom","scale","accuracyRadius","downloadStaticMap","stickerSets","WebDocument","downloadStickerSetThumb","getMimeType","downloadProfilePhoto","Blob","Text","DownloadUrl","buffer","fallbackMimeType","signature","subarray","byte","mediaMatch","match","MAIN_THREAD_ID","MESSAGE_DELETED","API_GENERAL_ID_LIMIT","GIF_MIME_TYPE","MENTION_UNREAD_SLICE","PINNED_MESSAGES_LIMIT","REACTION_UNREAD_SLICE","SUPPORTED_IMAGE_CONTENT_TYPES","SUPPORTED_VIDEO_CONTENT_TYPES","getEmojiOnlyCountForMessage","fetchFile","compact","split","getMessageKey","interpolateArray","buildApiFormattedText","buildWebPage","buildApiFactCheck","buildApiQuickReply","buildApiSponsoredMessage","buildApiThreadInfo","buildLocalForwardedMessage","buildLocalMessage","buildUploadingMedia","buildInputMediaDocument","buildInputPoll","buildInputPollFromExisting","buildInputReaction","buildInputStory","buildInputTextWithEntities","buildMessageFromUpdate","buildSendMessageAction","FAST_SEND_TIMEOUT","INPUT_WAVEFORM_LENGTH","isSavedDialog","pagination","RequestClass","GetHistory","GetSavedHistory","GetReplies","Messages","mtpMessage","mediaQueue","attachment","poll","scheduledAt","groupedId","noWebPage","shouldUpdateStickerSetOrder","wasDrafted","isInvertedMedia","effectId","localMessage","isScheduled","timeout","setTimeout","sendingState","sendGroupedMedia","messagePromise","uploadMedia","warn","InputMediaContact","vcard","noWebpage","updateStickersetsOrder","invertMedia","effect","handleLocalMessageUpdate","localId","clearTimeout","groupedUploads","groupIndex","counter","singleMediaByIndex","localMessages","prevMediaQueue","inputMedia","fetchInputMedia","InputSingleMedia","multiMedia","handleMultipleLocalMessagesUpdate","uploadedMedia","messageMedia","UploadMedia","isSpoiler","spoiler","MessageMediaPhoto","InputMediaPhoto","InputPhoto","MessageMediaDocument","InputMediaDocument","InputDocument","shouldSendAsFile","newContent","messageUpdate","emojiOnlyCount","mediaUpdate","mtpEntities","EditMessage","messageErr","filename","blobUrl","quick","voice","audio","previewBlobUrl","shouldSendAsSpoiler","ttlSeconds","patchedOnProgress","progress","fetchAndUpload","shouldUploadThumb","inputFile","attributes","DocumentAttributeFilename","fileName","InputMediaUploadedPhoto","duration","DocumentAttributeVideo","supportsStreaming","performer","DocumentAttributeAudio","waveform","inputWaveform","InputMediaUploadedDocument","forceFile","isUnpin","isOneSide","UpdatePinnedMessage","unpin","pmOneside","UnpinAllMessages","messageIds","shouldDeleteForAll","DeleteMessages","revoke","DeleteScheduledMessages","DeleteHistory","just_clear","DeleteSavedHistory","Report","gramAction","SetTyping","maxId","fixedMaxId","ReadHistory","ReadDiscussion","readMaxId","ReadMessageContents","hasUnreadMention","isMediaUnread","shouldIncrement","chunks","chunkIds","GetMessagesViews","increment","some","viewsList","flatMap","viewsInfo","replies","threadInfo","GetFactCheck","GetDiscussionMessage","addOffset","topMessages","firstMessageId","savedTag","InputMessagesFilterPhotoVideo","InputMessagesFilterDocument","InputMessagesFilterUrl","InputMessagesFilterMusic","InputMessagesFilterRoundVoice","InputMessagesFilterChatPhotos","InputMessagesFilterEmpty","savedPeerId","savedReaction","totalCount","nextOffsetId","MessagesSlice","ChannelMessages","offsetRate","SearchGlobal","broadcastsOnly","nextRate","textWithEntities","GetWebPagePreview","SendVote","shouldResetVoters","GetPollVotes","votes","vote","GetExtendedMedia","fromChat","toChat","toThreadId","withMyScore","noAuthors","noCaptions","isCurrentUserPremium","randomIds","ForwardMessages","fromPeer","toPeer","dropAuthor","dropMediaCaptions","GetScheduledHistory","SendScheduledMessages","InputMessagesFilterPinned","GetMessageReadParticipants","readDate","GetSendAs","SaveDefaultSendAs","GetSponsoredMessages","SponsoredMessagesEmpty","ViewSponsoredMessage","ClickSponsoredMessage","ReadMentions","ReadReactions","GetUnreadMentions","GetUnreadReactions","TranscribeAudio","transcriptionId","isMessageTranslation","toLanguageCode","TranslateText","toLang","t","formattedText","r","translations","UpdateShortSentMessage","isSentBefore","GetOutboxReadDate","GetQuickReplies","QuickRepliesNotModified","quickReplies","shortcutId","GetQuickReplyMessages","SendQuickReplyMessages","filteredUpdates","shouldIncludeThread","shouldIncludeGrouped","ExportMessageLink","thread","grouped","buildInputInvoice","buildInputStorePaymentPurpose","buildShippingInfo","getTemporaryPaymentPassword","inputInvoice","requestInfo","shouldSave","ValidateRequestedInfo","requestedInfoId","shippingOptionId","savedCredentialId","temporaryPassword","inputCredentials","InputPaymentCredentialsSaved","tmpPassword","InputPaymentCredentials","SendPaymentForm","PaymentVerificationNeeded","SendStarsForm","GetPaymentForm","GetPaymentReceipt","GetPremiumPromo","validUntil","GetMyBoosts","myBoosts","slots","ApplyBoost","GetBoostsStatus","isGifts","GetBoostsList","gifts","boostList","GetGiveawayInfo","CheckGiftCode","ApplyGiftCode","GetPremiumGiftCodeOptions","boostPeer","giveawayId","paymentPurpose","LaunchPrepaidGiveaway","purpose","GetStarsStatus","history","balance","isInbound","isOutbound","GetStarsTransactions","inbound","outbound","GetStarsTopupOptions","AuthKey","Helpers","MTProtoState","currentPhoneCallState","PhoneCallState","isOutgoing","waitForState","resolveState","pBN","readBigIntFromBuffer","randomBN","modExp","sha256","getByteArray","pLast","randomLast","gAOrB","emojiData","emojiOffsets","authKey","fingerprint","sha1","reverse","emojis","generateEmojiFingerprint","setKey","encode","seqArray","Uint32Array","seq","encodedData","encryptMessageData","convertToLittle","decode","then","decryptMessageData","computeEmojiIndex","bytes","and","shiftLeft","or","Uint8Array","emojiCount","kPartSize","partOffset","byteLength","modPow","join","REACTION_LIST_LIMIT","RECENT_REACTIONS_LIMIT","TOP_REACTIONS_LIMIT","buildApiAvailableEffect","buildApiAvailableReaction","buildApiSavedReactionTag","buildMessagePeerReaction","sendWatchingEmojiInteraction","sendEmojiInteraction","timestamps","v","i","fetchAvailableReactions","GetAvailableReactions","AvailableReactionsNotModified","staticIcon","selectAnimation","aroundAnimation","appearAnimation","centerIcon","fetchAvailableEffects","GetAvailableEffects","AvailableEffectsNotModified","documentsMap","doc","effects","stickers","effectAnimationId","effectStickerId","sendReaction","shouldAddToRecent","SendReaction","addToRecent","fetchMessageReactions","GetMessagesReactions","fetchMessageReactionsList","GetMessageReactionsList","setDefaultReaction","SetDefaultReaction","fetchTopReactions","GetTopReactions","ReactionsNotModified","fetchRecentReactions","GetRecentReactions","clearRecentReactions","ClearRecentReactions","fetchDefaultTagReactions","GetDefaultTagReactions","fetchSavedReactionTags","GetSavedReactionTags","SavedReactionTagsNotModified","tags","updateSavedReactionTag","UpdateSavedReactionTag","BLOCKED_LIST_LIMIT","DEFAULT_LANG_PACK","buildInputPrivacyKey","buildInputPrivacyRules","BETA_LANG_CODES","updateProfile","UpdateProfile","checkUsername","updateUsername","updateProfilePhoto","isFallback","InputPhotoEmpty","UpdateProfilePhoto","fallback","uploadProfilePhoto","videoTs","UploadProfilePhoto","videoStartTs","uploadContactProfilePhoto","isSuggest","UploadContactProfilePhoto","suggest","deleteProfilePhotos","photoIds","DeletePhotos","fetchWallpapers","GetWallPapers","WallPapersNotModified","filteredWallpapers","wallpapers","WallPaper","pattern","uploadWallpaper","UploadWallPaper","WallPaperSettings","fetchBlockedUsers","isOnlyStories","GetBlocked","myStoriesFrom","blockedIds","BlockedSlice","blockUser","Block","unblockUser","Unblock","fetchAuthorizations","GetAuthorizations","authorizations","ttlDays","terminateAuthorization","ResetAuthorization","terminateAllAuthorizations","ResetAuthorizations","fetchWebAuthorizations","GetWebAuthorizations","webAuthorizations","terminateWebAuthorization","ResetWebAuthorization","terminateAllWebAuthorizations","ResetWebAuthorizations","fetchNotificationExceptions","GetNotifyExceptions","compareSound","UpdatesCombined","NotifyPeer","fetchNotificationSettings","isMutedContactSignUpNotification","privateContactNotificationsSettings","groupNotificationsSettings","broadcastNotificationsSettings","GetContactSignUpNotification","GetNotifySettings","InputNotifyUsers","InputNotifyChats","InputNotifyBroadcasts","privateSilent","privateMuteUntil","privateShowPreviews","groupSilent","groupMuteUntil","groupShowPreviews","broadcastSilent","broadcastMuteUntil","broadcastShowPreviews","hasContactJoinedNotifications","hasPrivateChatsNotifications","hasPrivateChatsMessagePreview","hasGroupNotifications","hasGroupMessagePreview","hasBroadcastNotifications","hasBroadcastMessagePreview","updateContactSignUpNotification","SetContactSignUpNotification","updateNotificationSettings","fetchLangPack","langPack","langpack","GetLangPack","fetchLangDifference","fromVersion","GetDifference","fetchLanguages","GetLanguages","fetchLanguage","GetLanguage","oldFetchLangPack","sourceLangPacks","collections","oldFetchLangStrings","GetStrings","fetchPrivacySettings","privacyKey","GetPrivacy","rules","registerDevice","secret","getAuthKey","getKey","RegisterDevice","tokenType","appSandbox","otherUids","unregisterDevice","UnregisterDevice","setPrivacySettings","privacyRules","SetPrivacy","updateIsOnline","isOnline","UpdateStatus","offline","fetchContentSettings","GetContentSettings","isSensitiveEnabled","sensitiveEnabled","canChangeSensitive","sensitiveCanChange","updateContentSettings","SetContentSettings","fetchAppConfig","GetAppConfig","AppConfigNotModified","resultHash","fetchConfig","GetConfig","fetchPeerColors","GetPeerColors","newHash","fetchTimezones","GetTimezonesList","TimezonesListNotModified","timezones","fetchCountryList","countryList","GetCountriesList","CountriesList","fetchGlobalPrivacySettings","GetGlobalPrivacySettings","shouldArchiveAndMuteNewNonContact","archiveAndMuteNewNoncontactPeers","shouldHideReadMarks","hideReadMarks","shouldNewNonContactPeersRequirePremium","newNoncontactPeersRequirePremium","updateGlobalPrivacySettings","SetGlobalPrivacySettings","GlobalPrivacySettings","toggleUsername","ToggleUsername","active","reorderUsernames","ReorderUsernames","STATISTICS_PUBLIC_FORWARDS_LIMIT","GetBroadcastStats","GetMegagroupStats","GetMessageStats","GetMessagePublicForwards","LoadAsyncGraph","GetStoryStats","GetStoryPublicForwards","publicForwards","STORY_LIST_LIMIT","fetchAllStories","stateHash","isFirstRequest","next","GetAllStories","AllStoriesNotModified","allUserStories","profileIds","lastUpdatedAt","dataAcc","lastReadId","maxReadId","hasMore","fetchPeerStories","GetPeerStories","lastReadStoryId","fetchPeerProfileStories","fetchCommonStoriesRequest","method","GetPinnedStories","fetchStoriesArchive","GetStoriesArchive","fetchPeerStoriesByIds","currentId","pinnedIds","pinnedToTop","viewStory","IncrementStoryViews","markStoryRead","ReadStories","deleteStory","DeleteStories","toggleStoryInProfile","TogglePinned","toggleStoryPinnedToTop","storyIds","TogglePinnedToTop","fetchStoryViewList","areJustContacts","areReactionsFirst","GetStoryViewsList","justContacts","reactionsFirst","fetchStoriesViews","GetStoriesViews","fetchStoryLink","ExportStoryLink","reportStory","editStoryPrivacy","EditStory","toggleStoriesHidden","TogglePeerStoriesHidden","fetchStoriesMaxIds","GetPeerMaxIDs","sendStoryReaction","ReactionEmpty","activateStealthMode","isForPast","isForFuture","ActivateStealthMode","past","future","DEFAULT_GIF_SEARCH_BOT_USERNAME","RECENT_STATUS_LIMIT","RECENT_STICKERS_LIMIT","buildStickerSetCovered","processStickerPackResult","processStickerResult","buildInputDocument","buildInputStickerSet","buildInputStickerSetShortName","allStickers","GetEmojiStickers","AllStickersNotModified","sets","thumbDocumentId","GetAllStickers","GetRecentStickers","RecentStickersNotModified","GetFavedStickers","FavedStickersNotModified","GetFeaturedStickers","FeaturedStickersNotModified","GetFeaturedEmojiStickers","unfave","FaveSticker","SaveRecentSticker","unsave","ClearRecentStickers","stickerSetInfo","GetStickerSet","StickerSet","packs","documentId","GetCustomEmojiDocuments","InputStickerSetAnimatedEmoji","InputStickerSetAnimatedEmojiAnimations","InputStickerSetEmojiGenericAnimations","InputStickerSetPremiumGifts","InputStickerSetEmojiDefaultTopicIcons","InputStickerSetEmojiDefaultStatuses","SearchStickerSets","FoundStickerSetsNotModified","GetSavedGifs","SavedGifsNotModified","gifs","processGifResult","shouldUnsave","SaveGif","stickerSetId","InstallStickerSet","installedDate","UninstallStickerSet","inputGifBot","InputUser","foundGif","GetStickers","StickersNotModified","language","GetEmojiKeywordsDifference","keywords","emojiKeyword","keyword","emoticons","GetRecentEmojiStatuses","EmojiStatusesNotModified","documentIds","statuses","emojiStatuses","EMAIL_UNCONFIRMED","EMAIL_HASH_EXPIRED","NEW_SALT_INVALID","NEW_SETTINGS_INVALID","CODE_INVALID","emailCodeController","GetPassword","hasPassword","onRequestEmailCode","isCheckPassword","email","newPassword","emailCodeCallback","onEmailCodeError","COMMON_CHATS_LIMIT","PROFILE_PHOTOS_LIMIT","buildInputContact","buildInputEmojiStatus","buildMtpPeerId","commonChats","GetCommonChats","mtpChat","isFullyLoaded","dcInfo","GetNearestDc","correspondents","GetContacts","ContactsNotModified","ImportContacts","ImportedContacts","imported","shouldSharePhoneNumber","AddContact","addPhonePrivacyException","DeleteContacts","GetUserPhotos","userOrChat","ReportSpam","UpdateEmojiStatus","userIds","EditCloseFriends","unmuteTimers","unmuteQueue","scheduleUnmute","pop","timer","afterNext","scheduleMutedTopicUpdate","LocalUpdatePts","ptsCount","LocalUpdateChannelPts","buildLocalUpdatePts","UpdateConnectionState","UpdateServerTimeOffset","SortedQueue","dispatchUserAndChatUpdates","sendUpdate","updater","COMMON_BOX_QUEUE_ID","CHANNEL_DIFFERENCE_LIMIT","UPDATE_WAIT_TIMEOUT","isInited","seqTimeout","PTS_TIMEOUTS","SEQ_QUEUE","seqComparator","PTS_QUEUE","invokeReq","loadRemoteState","scheduleGetDifference","commonBoxState","qts","isFromDifference","shouldOnlySave","connected","_isFromDifference","saveSeqUpdate","UpdateChannelTooLong","getChannelDifference","getUpdateChannelId","savePtsUpdate","currentState","channelPtsById","applyUpdate","updateObject","add","popSeqQueue","ptsQueue","ptsComparator","popPtsQueue","localSeq","seqStart","localPts","getPtsCount","UpdateNewChannelMessage","UpdateEditChannelMessage","forceSync","isFetching","response","DifferenceTooLong","DifferenceEmpty","processDifference","newState","DifferenceSlice","intermediateState","GetChannelDifference","ChannelMessagesFilterEmpty","ChannelDifferenceTooLong","ChannelDifferenceEmpty","final","affected","channeId","remoteState","GetState","difference","newMessages","UpdateNewMessage","channelTooLongIds","otherUpdates","updateChannelId","shouldApplyImmediately","seqA","seqB","diff","connection","setServerTimeOffset","getGroupCallId","buildApiMessageExtendedMediaPreview","buildBoughtMediaContent","buildPoll","buildPollResults","buildApiMessageFromNotification","buildApiMessageFromShort","buildApiMessageFromShortChat","buildApiThreadInfoFromMessage","buildMessageReactions","buildApiEmojiInteraction","buildChatPhotoForLocalDb","resolveMessageApiChatId","LocalUpdatePremiumFloodWait","sentMessageIds","threadInfoUpdates","timeOffset","serverTimeOffset","disconnected","broken","UpdateNewScheduledMessage","UpdateShortChatMessage","UpdateShortMessage","shouldForceReply","replyMarkup","ReplyKeyboardForceReply","selective","isMentioned","hasLocalCopy","viaBotId","MessageService","MessageActionChatEditTitle","MessageActionChatEditPhoto","localDbChatId","newProfilePhoto","MessageActionChatDeletePhoto","ChatPhotoEmpty","MessageActionChatDeleteUser","MessageActionChatAddUser","MessageActionGroupCall","MessageActionTopicEdit","MessageReplyHeader","replyToMsgId","replyToTopId","isTopicReply","MessageActionTopicCreate","UpdateQuickReplyMessage","UpdateDeleteQuickReplyMessages","quickReplyId","UpdateQuickReplies","UpdateNewQuickReply","quickReply","UpdateDeleteQuickReply","UpdateEditMessage","UpdateMessageReactions","UpdateMessageExtendedMedia","isBought","MessageExtendedMedia","boughtMedia","previewMedia","MessageExtendedMediaPreview","UpdateDeleteMessages","UpdateDeleteScheduledMessages","UpdateDeleteChannelMessages","UpdateServiceNotification","popup","currentDate","UpdateReadMessagesContents","UpdateChannelReadMessagesContents","UpdateMessagePoll","pollId","apiPoll","pollUpdate","pollResults","UpdateMessagePollVote","UpdateChannelMessageViews","UpdateReadHistoryInbox","stillUnreadCount","UpdateReadHistoryOutbox","UpdateReadChannelInbox","UpdateReadChannelOutbox","UpdateReadChannelDiscussionInbox","UpdateReadChannelDiscussionOutbox","UpdateDialogPinned","DialogPeer","UpdatePinnedDialogs","dp","UpdateSavedDialogPinned","UpdatePinnedSavedDialogs","UpdateFolderPeers","folderPeer","UpdateDialogFilterOrder","UpdateChatParticipants","replacedMembers","UpdateChatParticipantAdd","addedMember","UpdateChatParticipantDelete","deletedMemberId","UpdatePinnedMessages","UpdatePinnedChannelMessages","payload","NotifyForumTopic","UpdateChatUserTyping","typingStatus","UpdateChannelUserTyping","UpdateDialogUnreadMark","UpdateChatDefaultBannedRights","UpdateUserStatus","UpdateUser","UpdateUserEmojiStatus","UpdateUserName","apiUserId","updatedUser","UpdateUserPhone","UpdatePeerSettings","UpdatePeerBlocked","isBlockedFromStories","UpdatePrivacy","UpdateDraftMessage","UpdateContactsReset","UpdateFavedStickers","UpdateRecentStickers","UpdateRecentReactions","UpdateSavedReactionTags","UpdateMoveStickerSetToTop","masks","isCustomEmoji","UpdateStickerSets","UpdateStickerSetsOrder","n","UpdateNewStickerSet","UpdateSavedGifs","UpdateGroupCallConnection","presentation","UpdateGroupCallParticipants","UpdatePendingJoinRequests","UpdatePhoneCall","UpdatePhoneCallSignalingData","callId","phoneCallId","UpdateWebViewResultSent","UpdateBotMenuButton","button","UpdateTranscribedAudio","UpdateChannelPinnedTopic","UpdateChannelPinnedTopics","UpdateRecentEmojiStatuses","UpdateStory","UpdateReadStories","UpdateSentStoryReaction","UpdateStoriesStealthMode","UpdateAttachMenuBots","UpdateNewAuthorization","device","UpdateChannelViewForumAsMessages","UpdateStarsBalance","isUpload","DEBUG_LEVELS","ORIGINAL_FUNCTIONS","enableDebugLog","postMessage","disableDebugLog","handleErrors","callbackState","onmessage","sendToOrigin","withCallback","callback","_len2","callbackArgs","_key2","lastArg","ArrayBuffer","onerror","addEventListener","sendUpdatesOnTickEnd","ApiMessageEntityTypes","vs16RegExp","zeroWidthJoiner","removeVS16s","rawEmoji","Deferred","promise","resolved","deferred","comparator","queue","binarySearch","shift","right","middle","floor","comparison","ELECTRON_HOST_URL","IS_PACKAGED_ELECTRON","caches","isSupported","isCacheApiSupported","catch","Type","fetch","Request","cache","open","contentType","headers","blob","shouldRecreate","resolvedType","Json","cacheData","Response","put","remove","DEBUG_LOGS","logDebugMessage","initDebugConsole","disableDebugConsole","getDebugLogs","EMOJI_REGEX","EMOJI_EXCEPTIONS","fixNonStandardEmoji","regex","replacement","twemojiRegex","DETECT_UP_TO","MAX_LENGTH","RE_EMOJI_ONLY","RegExp","source","parseEmojiOnlyString","standardizedText","lines","textWithoutNewlines","isEmojiOnly","countPerLine","line","exec","lastIndex","CONTENT_TYPES_WITH_PREVIEW","fileBits","rest","dataUriToBlob","dataUri","arr","mime","bstr","atob","u8arr","charCodeAt","blobToDataUri","reader","FileReader","onload","target","readAsDataURL","blobToFile","lastModified","preloadImage","img","Image","src","preloadVideo","createElement","onloadedmetadata","createPosterForVideo","onseeked","videoWidth","videoHeight","canvas","ctx","getContext","drawImage","toBlob","URL","createObjectURL","currentTime","fetchBlob","imgToCanvas","hasPreview","validateFiles","files","fixMovMime","ext","toLowerCase","collection","byKey","mapValues","newByKey","object","stringKeys","savedKeys","stringKey","orderBy","orderRule","mode","compareValues","currentOrderRule","isAsc","aValue","bValue","isArray","mode1","mode2","orderRule1","orderRule2","isAsc1","isAsc2","unique","array","uniqueByField","field","areSortedArraysEqual","array1","array2","every","areSortedArraysIntersecting","isInsideSortedArrayRange","findIntersectionWithSet","excludeSortedArray","base","toExclude","excludeIndex","chunkSize","partition","pass","fail","idx","cloneDeep","isObject","isLiteralObject","findLast","predicate","cursor","compareFields","previousLocalId","buildMessageKey","getMessageServerKey","isLocalMessageId","parseMessageKey","isInteger","debounce","fn","ms","shouldRunFirst","shouldRunLast","waitingTimeout","interval","_args","setInterval","clearInterval","throttleWith","onTickEnd","schedulerFn","waiting","_len3","_key3","onIdle","cb","requestIdleCallback","rafPromise","fastRaf","FAST_RAF_TIMEOUT_FALLBACK_MS","fastRafCallbacks","fastRafFallbackCallbacks","fastRafFallbackTimeout","withTimeoutFallback","requestAnimationFrame","currentCallbacks","window","currentTimeoutCallbacks","onTickEndCallbacks","beforeUnloadCallbacks","onBeforeUnload","isLast","unshift","_serverTimeOffset","decodeWaveform","encoded5bit","bitsCount","valuesCount","bitsData","byteIndex","bitShift","lastByteIndex","lastBitShift","lastValue","fitCount","peak","newData","springFactor","leftFiller","rightFiller","val"],"sourceRoot":""}