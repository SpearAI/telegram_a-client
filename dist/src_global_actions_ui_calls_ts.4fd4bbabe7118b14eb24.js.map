{"version":3,"file":"src_global_actions_ui_calls_ts.4fd4bbabe7118b14eb24.js","mappings":"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","sources":["webpack://telegram-t/./src/global/actions/api/chats.ts","webpack://telegram-t/./src/global/actions/ui/calls.ts","webpack://telegram-t/./src/global/reducers/calls.ts"],"sourcesContent":["import type {\n  ApiChat, ApiChatFolder, ApiChatlistExportedInvite,\n  ApiChatMember, ApiError, ApiMissingInvitedUser, ApiUser,\n} from '../../../api/types';\nimport type { RequiredGlobalActions } from '../../index';\nimport type {\n  ActionReturnType,\n  ChatListType, GlobalState, TabArgs,\n} from '../../types';\nimport { MAIN_THREAD_ID } from '../../../api/types';\nimport {\n  ChatCreationProgress,\n  ManagementProgress,\n  NewChatMembersProgress,\n  SettingsScreens,\n  type ThreadId,\n} from '../../../types';\n\nimport {\n  ALL_FOLDER_ID,\n  ARCHIVED_FOLDER_ID,\n  CHAT_LIST_LOAD_SLICE,\n  DEBUG,\n  GLOBAL_STATE_CACHE_ARCHIVED_CHAT_LIST_LIMIT,\n  GLOBAL_SUGGESTED_CHANNELS_ID,\n  RE_TG_LINK,\n  SAVED_FOLDER_ID,\n  SERVICE_NOTIFICATIONS_USER_ID,\n  TME_WEB_DOMAINS,\n  TMP_CHAT_ID,\n  TOP_CHAT_MESSAGES_PRELOAD_LIMIT,\n  TOPICS_SLICE,\n  TOPICS_SLICE_SECOND_LOAD,\n} from '../../../config';\nimport { copyTextToClipboard } from '../../../util/clipboard';\nimport { formatShareText, parseChooseParameter, processDeepLink } from '../../../util/deeplink';\nimport { isDeepLink } from '../../../util/deepLinkParser';\nimport { getCurrentTabId } from '../../../util/establishMultitabRole';\nimport { getOrderedIds } from '../../../util/folderManager';\nimport { buildCollectionByKey, omit, pick } from '../../../util/iteratees';\nimport { isLocalMessageId } from '../../../util/messageKey';\nimport * as langProvider from '../../../util/oldLangProvider';\nimport { debounce, pause, throttle } from '../../../util/schedulers';\nimport { extractCurrentThemeParams } from '../../../util/themeStyle';\nimport { callApi } from '../../../api/gramjs';\nimport {\n  getIsSavedDialog,\n  isChatArchived,\n  isChatBasicGroup,\n  isChatChannel,\n  isChatSuperGroup,\n  isUserBot,\n  toChannelId,\n} from '../../helpers';\nimport {\n  addActionHandler, getGlobal, setGlobal,\n} from '../../index';\nimport {\n  addChatMembers,\n  addChats,\n  addMessages,\n  addSimilarChannels,\n  addUsers,\n  addUserStatuses,\n  deleteChatMessages,\n  deleteTopic,\n  leaveChat,\n  removeChatFromChatLists,\n  replaceChatFullInfo,\n  replaceChatListIds,\n  replaceChats,\n  replaceThreadParam,\n  replaceUsers,\n  replaceUserStatuses,\n  toggleSimilarChannels,\n  updateChat,\n  updateChatFullInfo,\n  updateChatLastMessageId,\n  updateChatListIds,\n  updateChatListSecondaryInfo,\n  updateChats,\n  updateChatsLastMessageId,\n  updateListedTopicIds,\n  updateManagementProgress,\n  updateMissingInvitedUsers,\n  updatePeerFullInfo,\n  updateThread,\n  updateThreadInfo,\n  updateTopic,\n  updateTopics,\n  updateUser,\n} from '../../reducers';\nimport { updateGroupCall } from '../../reducers/calls';\nimport { updateTabState } from '../../reducers/tabs';\nimport {\n  selectChat,\n  selectChatByUsername,\n  selectChatFolder,\n  selectChatFullInfo,\n  selectChatLastMessage,\n  selectChatLastMessageId,\n  selectChatListType,\n  selectChatMessages,\n  selectCurrentChat,\n  selectCurrentMessageList,\n  selectDraft,\n  selectIsChatPinned,\n  selectIsChatWithSelf,\n  selectLastServiceNotification,\n  selectSimilarChannelIds,\n  selectStickerSet,\n  selectSupportChat,\n  selectTabState,\n  selectThread,\n  selectThreadInfo,\n  selectUser,\n  selectUserByPhoneNumber,\n  selectVisibleUsers,\n} from '../../selectors';\nimport { selectGroupCall } from '../../selectors/calls';\nimport { selectCurrentLimit } from '../../selectors/limits';\n\nconst TOP_CHAT_MESSAGES_PRELOAD_INTERVAL = 100;\nconst INFINITE_LOOP_MARKER = 100;\n\nconst SERVICE_NOTIFICATIONS_USER_MOCK: ApiUser = {\n  id: SERVICE_NOTIFICATIONS_USER_ID,\n  accessHash: '0',\n  type: 'userTypeRegular',\n  isMin: true,\n  phoneNumber: '',\n};\nconst CHATLIST_LIMIT_ERROR_LIST = new Set([\n  'FILTERS_TOO_MUCH',\n  'CHATLISTS_TOO_MUCH',\n  'INVITES_TOO_MUCH',\n]);\n\nconst runThrottledForLoadTopChats = throttle((cb) => cb(), 3000, true);\nconst runDebouncedForLoadFullChat = debounce((cb) => cb(), 500, false, true);\n\naddActionHandler('preloadTopChatMessages', async (global, actions): Promise<void> => {\n  const preloadedChatIds = new Set<string>();\n\n  for (let i = 0; i < TOP_CHAT_MESSAGES_PRELOAD_LIMIT; i++) {\n    await pause(TOP_CHAT_MESSAGES_PRELOAD_INTERVAL);\n\n    global = getGlobal();\n    const currentChatIds = Object.values(global.byTabId)\n      // eslint-disable-next-line @typescript-eslint/no-loop-func\n      .map(({ id: tabId }) => selectCurrentMessageList(global, tabId)?.chatId)\n      .filter(Boolean);\n\n    const folderAllOrderedIds = getOrderedIds(ALL_FOLDER_ID);\n    const nextChatId = folderAllOrderedIds?.find((id) => !currentChatIds.includes(id) && !preloadedChatIds.has(id));\n    if (!nextChatId) {\n      return;\n    }\n\n    preloadedChatIds.add(nextChatId);\n\n    actions.loadViewportMessages({ chatId: nextChatId, threadId: MAIN_THREAD_ID, tabId: getCurrentTabId() });\n  }\n});\n\nfunction abortChatRequests(chatId: string, threadId?: ThreadId) {\n  callApi('abortChatRequests', { chatId, threadId });\n}\n\nfunction abortChatRequestsForCurrentChat<T extends GlobalState>(\n  global: T, newChatId?: string, newThreadId?: ThreadId,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const currentMessageList = selectCurrentMessageList(global, tabId);\n  const currentChatId = currentMessageList?.chatId;\n  const currentThreadId = currentMessageList?.threadId;\n\n  if (currentChatId && (currentChatId !== newChatId || currentThreadId !== newThreadId)) {\n    const [isChatOpened, isThreadOpened] = Object.values(global.byTabId)\n      .reduce(([accHasChatOpened, accHasThreadOpened], { id: otherTabId }) => {\n        if (otherTabId === tabId || (accHasChatOpened && accHasThreadOpened)) {\n          return [accHasChatOpened, accHasThreadOpened];\n        }\n\n        const otherMessageList = selectCurrentMessageList(global, otherTabId);\n        const isSameChat = otherMessageList?.chatId === currentChatId;\n        const isSameThread = isSameChat && otherMessageList?.threadId === currentThreadId;\n\n        return [accHasChatOpened || isSameChat, accHasThreadOpened || isSameThread];\n      }, [currentChatId === newChatId, false]);\n\n    const shouldAbortChatRequests = !isChatOpened || !isThreadOpened;\n\n    if (shouldAbortChatRequests) {\n      abortChatRequests(currentChatId, isChatOpened ? currentThreadId : undefined);\n    }\n  }\n}\n\naddActionHandler('openChat', (global, actions, payload): ActionReturnType => {\n  const {\n    id, type, noForumTopicPanel, shouldReplaceHistory, shouldReplaceLast,\n    tabId = getCurrentTabId(),\n  } = payload;\n\n  actions.processOpenChatOrThread({\n    chatId: id,\n    type,\n    threadId: MAIN_THREAD_ID,\n    noForumTopicPanel,\n    shouldReplaceHistory,\n    shouldReplaceLast,\n    tabId,\n  });\n\n  abortChatRequestsForCurrentChat(global, id, MAIN_THREAD_ID, tabId);\n\n  if (!id || id === TMP_CHAT_ID) {\n    return;\n  }\n\n  const chat = selectChat(global, id);\n\n  if (chat?.hasUnreadMark) {\n    actions.toggleChatUnread({ id });\n  }\n\n  const isChatOnlySummary = !selectChatLastMessageId(global, id);\n\n  if (!chat) {\n    if (selectIsChatWithSelf(global, id)) {\n      void callApi('fetchChat', { type: 'self' });\n    } else {\n      const user = selectUser(global, id);\n      if (user) {\n        void callApi('fetchChat', { type: 'user', user });\n      }\n    }\n  } else if (isChatOnlySummary && !chat.isMin) {\n    actions.requestChatUpdate({ chatId: id });\n  }\n  actions.closeStoryViewer({ tabId });\n  actions.closeStarsBalanceModal({ tabId });\n});\n\naddActionHandler('openSavedDialog', (global, actions, payload): ActionReturnType => {\n  const { chatId, tabId = getCurrentTabId(), ...otherParams } = payload;\n\n  actions.openThread({\n    chatId: global.currentUserId!,\n    threadId: chatId,\n    tabId,\n    ...otherParams,\n  });\n});\n\naddActionHandler('openThread', async (global, actions, payload): Promise<void> => {\n  const {\n    type, isComments, noForumTopicPanel, shouldReplaceHistory, shouldReplaceLast,\n    focusMessageId,\n    tabId = getCurrentTabId(),\n  } = payload;\n  let { chatId } = payload;\n  let threadId: ThreadId | undefined;\n  let loadingChatId: string;\n  let loadingThreadId: ThreadId;\n\n  if (!isComments) {\n    loadingChatId = payload.chatId;\n    threadId = payload.threadId;\n    loadingThreadId = threadId;\n\n    const originalChat = selectChat(global, loadingChatId);\n    if (threadId === MAIN_THREAD_ID) {\n      actions.openChat({\n        id: chatId,\n        type,\n        noForumTopicPanel,\n        shouldReplaceHistory,\n        shouldReplaceLast,\n        tabId,\n      });\n      return;\n    } else if (originalChat?.isForum || (chatId && getIsSavedDialog(chatId, threadId, global.currentUserId))) {\n      actions.processOpenChatOrThread({\n        chatId,\n        type,\n        threadId,\n        isComments,\n        noForumTopicPanel,\n        shouldReplaceHistory,\n        shouldReplaceLast,\n        tabId,\n      });\n      return;\n    }\n  } else {\n    const { originChannelId, originMessageId } = payload;\n\n    loadingChatId = originChannelId;\n    loadingThreadId = originMessageId;\n  }\n\n  const chat = selectChat(global, loadingChatId);\n  const threadInfo = selectThreadInfo(global, loadingChatId, loadingThreadId);\n  const thread = selectThread(global, loadingChatId, loadingThreadId);\n  if (!chat) return;\n\n  abortChatRequestsForCurrentChat(global, loadingChatId, loadingThreadId, tabId);\n\n  if (chatId\n    && threadInfo?.threadId\n    && (isComments || (thread?.listedIds?.length && thread.listedIds.includes(Number(threadInfo.threadId))))) {\n    global = updateTabState(global, {\n      loadingThread: undefined,\n    }, tabId);\n    setGlobal(global);\n    actions.processOpenChatOrThread({\n      chatId,\n      type,\n      threadId: threadInfo.threadId,\n      isComments,\n      noForumTopicPanel,\n      shouldReplaceHistory,\n      shouldReplaceLast,\n      tabId,\n    });\n    return;\n  }\n\n  let { loadingThread } = selectTabState(global, tabId);\n  if (loadingThread) {\n    abortChatRequests(loadingThread.loadingChatId, loadingThread.loadingMessageId);\n  }\n\n  global = updateTabState(global, {\n    loadingThread: {\n      loadingChatId,\n      loadingMessageId: Number(loadingThreadId),\n    },\n  }, tabId);\n  setGlobal(global);\n\n  const openPreviousChat = () => {\n    // eslint-disable-next-line eslint-multitab-tt/no-immediate-global\n    const currentGlobal = getGlobal();\n    if (isComments\n      || selectCurrentMessageList(currentGlobal, tabId)?.chatId !== loadingChatId\n      || selectCurrentMessageList(currentGlobal, tabId)?.threadId !== loadingThreadId) {\n      return;\n    }\n    actions.openPreviousChat({ tabId });\n  };\n\n  if (!isComments) {\n    actions.processOpenChatOrThread({\n      chatId,\n      type,\n      threadId: threadId!,\n      tabId,\n      isComments,\n      noForumTopicPanel,\n      shouldReplaceHistory,\n      shouldReplaceLast,\n    });\n  }\n\n  const result = await callApi('fetchDiscussionMessage', {\n    chat: selectChat(global, loadingChatId)!,\n    messageId: Number(loadingThreadId),\n  });\n\n  global = getGlobal();\n  loadingThread = selectTabState(global, tabId).loadingThread;\n  if (loadingThread?.loadingChatId !== loadingChatId || loadingThread?.loadingMessageId !== loadingThreadId) {\n    openPreviousChat();\n    return;\n  }\n\n  if (!result) {\n    global = updateTabState(global, {\n      loadingThread: undefined,\n    }, tabId);\n    setGlobal(global);\n\n    actions.showNotification({\n      message: langProvider.oldTranslate(isComments ? 'ChannelPostDeleted' : 'lng_message_not_found'),\n      tabId,\n    });\n\n    openPreviousChat();\n    return;\n  }\n\n  threadId ??= result.threadId;\n  chatId ??= result.chatId;\n\n  if (!chatId) {\n    openPreviousChat();\n    return;\n  }\n\n  global = getGlobal();\n  global = addUsers(global, buildCollectionByKey(result.users, 'id'));\n  global = addChats(global, buildCollectionByKey(result.chats, 'id'));\n  global = addMessages(global, result.messages);\n  if (isComments) {\n    global = updateThreadInfo(global, loadingChatId, loadingThreadId, {\n      threadId,\n    });\n\n    global = updateThreadInfo(global, chatId, threadId, {\n      isCommentsInfo: false,\n      threadId,\n      chatId,\n      fromChannelId: loadingChatId,\n      fromMessageId: loadingThreadId,\n      ...(threadInfo\n        && pick(threadInfo, ['messagesCount', 'lastMessageId', 'lastReadInboxMessageId', 'recentReplierIds'])),\n    });\n  }\n  global = updateThread(global, chatId, threadId, {\n    firstMessageId: result.firstMessageId,\n  });\n  setGlobal(global);\n\n  if (focusMessageId) {\n    actions.focusMessage({\n      chatId,\n      threadId: threadId!,\n      messageId: focusMessageId,\n      tabId,\n    });\n  }\n\n  actions.loadViewportMessages({\n    chatId,\n    threadId,\n    tabId,\n    onError: () => {\n      global = getGlobal();\n      global = updateTabState(global, {\n        loadingThread: undefined,\n      }, tabId);\n      setGlobal(global);\n\n      actions.showNotification({\n        message: langProvider.oldTranslate('Group.ErrorAccessDenied'),\n        tabId,\n      });\n    },\n    onLoaded: () => {\n      global = getGlobal();\n      loadingThread = selectTabState(global, tabId).loadingThread;\n      if (loadingThread?.loadingChatId !== loadingChatId || loadingThread?.loadingMessageId !== loadingThreadId) {\n        return;\n      }\n\n      global = updateTabState(global, {\n        loadingThread: undefined,\n      }, tabId);\n      setGlobal(global);\n\n      actions.processOpenChatOrThread({\n        chatId,\n        type,\n        threadId: threadId!,\n        tabId,\n        isComments,\n        noForumTopicPanel,\n        shouldReplaceHistory,\n        shouldReplaceLast,\n      });\n    },\n  });\n});\n\naddActionHandler('openLinkedChat', async (global, actions, payload): Promise<void> => {\n  const { id, tabId = getCurrentTabId() } = payload!;\n  const chat = selectChat(global, id);\n  if (!chat) {\n    return;\n  }\n\n  const chatFullInfo = await callApi('fetchFullChat', chat);\n\n  if (chatFullInfo?.fullInfo?.linkedChatId) {\n    actions.openChat({ id: chatFullInfo.fullInfo.linkedChatId, tabId });\n  }\n});\n\naddActionHandler('openSupportChat', async (global, actions, payload): Promise<void> => {\n  const { tabId = getCurrentTabId() } = payload || {};\n  const chat = selectSupportChat(global);\n  if (chat) {\n    actions.openChat({ id: chat.id, shouldReplaceHistory: true, tabId });\n    return;\n  }\n\n  actions.openChat({ id: TMP_CHAT_ID, shouldReplaceHistory: true, tabId });\n\n  const result = await callApi('fetchChat', { type: 'support' });\n  if (result) {\n    actions.openChat({ id: result.chatId, shouldReplaceHistory: true, tabId });\n  }\n});\n\naddActionHandler('loadAllChats', async (global, actions, payload): Promise<void> => {\n  const listType = payload.listType;\n  const { onReplace } = payload;\n  let { shouldReplace } = payload;\n  let i = 0;\n\n  const getOrderDate = (chat: ApiChat) => {\n    return selectChatLastMessage(global, chat.id, listType === 'saved' ? 'saved' : 'all')?.date || chat.creationDate;\n  };\n\n  while (shouldReplace || !global.chats.isFullyLoaded[listType]) {\n    if (i++ >= INFINITE_LOOP_MARKER) {\n      if (DEBUG) {\n        // eslint-disable-next-line no-console\n        console.error('`actions/loadAllChats`: Infinite loop detected');\n      }\n\n      return;\n    }\n\n    global = getGlobal();\n\n    if (global.connectionState !== 'connectionStateReady' || global.authState !== 'authorizationStateReady') {\n      return;\n    }\n\n    const listIds = !shouldReplace && global.chats.listIds[listType];\n    const oldestChat = listIds\n      ? listIds\n        /* eslint-disable @typescript-eslint/no-loop-func */\n        .map((id) => global.chats.byId[id])\n        .filter((chat) => (\n          Boolean(chat && getOrderDate(chat))\n          && chat.id !== SERVICE_NOTIFICATIONS_USER_ID\n          && !selectIsChatPinned(global, chat.id)\n        ))\n        /* eslint-enable @typescript-eslint/no-loop-func */\n        .sort((chat1, chat2) => getOrderDate(chat1)! - getOrderDate(chat2)!)[0]\n      : undefined;\n\n    await loadChats(\n      listType,\n      oldestChat?.id,\n      oldestChat ? getOrderDate(oldestChat) : undefined,\n      shouldReplace,\n      true,\n    );\n\n    if (shouldReplace) {\n      onReplace?.();\n      shouldReplace = false;\n    }\n\n    global = getGlobal();\n  }\n});\n\naddActionHandler('loadFullChat', (global, actions, payload): ActionReturnType => {\n  const {\n    chatId, force, tabId = getCurrentTabId(), withPhotos,\n  } = payload!;\n  const chat = selectChat(global, chatId);\n  if (!chat) {\n    return;\n  }\n\n  const loadChat = async () => {\n    await loadFullChat(global, actions, chat, tabId);\n    if (withPhotos) {\n      actions.loadProfilePhotos({ profileId: chatId });\n    }\n  };\n\n  if (force) {\n    void loadChat();\n  } else {\n    runDebouncedForLoadFullChat(loadChat);\n  }\n});\n\naddActionHandler('loadTopChats', (): ActionReturnType => {\n  runThrottledForLoadTopChats(() => {\n    loadChats('active');\n    loadChats('archived');\n  });\n});\n\naddActionHandler('requestChatUpdate', (global, actions, payload): ActionReturnType => {\n  const { chatId } = payload;\n  const chat = selectChat(global, chatId);\n  if (!chat) {\n    return;\n  }\n\n  void callApi('requestChatUpdate', {\n    chat,\n    ...(chatId === SERVICE_NOTIFICATIONS_USER_ID && {\n      lastLocalMessage: selectLastServiceNotification(global)?.message,\n    }),\n  });\n});\n\naddActionHandler('requestSavedDialogUpdate', async (global, actions, payload): Promise<void> => {\n  const { chatId } = payload;\n  const chat = selectChat(global, chatId);\n  if (!chat) {\n    return;\n  }\n\n  const result = await callApi('fetchMessages', {\n    chat,\n    isSavedDialog: true,\n    limit: 1,\n  });\n\n  if (!result) return;\n\n  global = getGlobal();\n\n  global = addMessages(global, result.messages);\n  global = addUsers(global, buildCollectionByKey(result.users, 'id'));\n  global = addChats(global, buildCollectionByKey(result.chats, 'id'));\n\n  if (result.messages.length) {\n    global = updateChatLastMessageId(global, chatId, result.messages[0].id, 'saved');\n    global = updateChatListIds(global, 'saved', [chatId]);\n\n    setGlobal(global);\n  } else {\n    global = removeChatFromChatLists(global, chatId, 'saved');\n\n    setGlobal(global);\n\n    Object.values(global.byTabId).forEach(({ id: tabId }) => {\n      const currentMessageList = selectCurrentMessageList(global, tabId);\n      if (!currentMessageList) return;\n      const { chatId: tabChatId, threadId } = currentMessageList;\n\n      if (selectIsChatWithSelf(global, tabChatId) && threadId === chatId) {\n        actions.openChat({ id: undefined, tabId });\n      }\n    });\n  }\n});\n\naddActionHandler('updateChatMutedState', (global, actions, payload): ActionReturnType => {\n  const { chatId, muteUntil = 0 } = payload;\n  const chat = selectChat(global, chatId);\n  if (!chat) {\n    return;\n  }\n\n  const isMuted = payload.isMuted ?? muteUntil > 0;\n\n  global = updateChat(global, chatId, { isMuted });\n  setGlobal(global);\n  void callApi('updateChatMutedState', { chat, isMuted, muteUntil });\n});\n\naddActionHandler('updateTopicMutedState', (global, actions, payload): ActionReturnType => {\n  const { chatId, topicId, muteUntil = 0 } = payload;\n  const chat = selectChat(global, chatId);\n  if (!chat) {\n    return;\n  }\n\n  const isMuted = payload.isMuted ?? muteUntil > 0;\n\n  global = updateTopic(global, chatId, topicId, { isMuted });\n  setGlobal(global);\n  void callApi('updateTopicMutedState', {\n    chat, topicId, isMuted, muteUntil,\n  });\n});\n\naddActionHandler('createChannel', async (global, actions, payload): Promise<void> => {\n  const {\n    title, about, photo, memberIds, tabId = getCurrentTabId(),\n  } = payload;\n\n  const users = (memberIds as string[])\n    .map((id) => selectUser(global, id))\n    .filter(Boolean);\n\n  global = updateTabState(global, {\n    chatCreation: {\n      progress: ChatCreationProgress.InProgress,\n    },\n  }, tabId);\n  setGlobal(global);\n\n  let createdChannel: ApiChat | undefined;\n  let missingInvitedUsers: ApiMissingInvitedUser[] | undefined;\n  try {\n    const result = await callApi('createChannel', { title, about, users });\n    createdChannel = result?.channel;\n    missingInvitedUsers = result?.missingUsers;\n  } catch (error) {\n    global = getGlobal();\n\n    global = updateTabState(global, {\n      chatCreation: {\n        progress: ChatCreationProgress.Error,\n      },\n    }, tabId);\n\n    setGlobal(global);\n\n    if ((error as ApiError).message === 'CHANNELS_TOO_MUCH') {\n      actions.openLimitReachedModal({ limit: 'channels', tabId });\n    } else {\n      actions.showDialog({ data: { ...(error as ApiError), hasErrorKey: true }, tabId });\n    }\n  }\n\n  if (!createdChannel) {\n    return;\n  }\n\n  const { id: channelId, accessHash } = createdChannel;\n\n  global = getGlobal();\n  global = updateChat(global, channelId, createdChannel);\n  global = updateTabState(global, {\n    chatCreation: {\n      ...selectTabState(global, tabId).chatCreation,\n      progress: createdChannel ? ChatCreationProgress.Complete : ChatCreationProgress.Error,\n    },\n  }, tabId);\n  setGlobal(global);\n  actions.openChat({ id: channelId, shouldReplaceHistory: true, tabId });\n\n  if (missingInvitedUsers) {\n    global = getGlobal();\n    global = updateMissingInvitedUsers(global, channelId, missingInvitedUsers, tabId);\n    setGlobal(global);\n  }\n\n  if (channelId && accessHash && photo) {\n    await callApi('editChatPhoto', { chatId: channelId, accessHash, photo });\n  }\n});\n\naddActionHandler('joinChannel', async (global, actions, payload): Promise<void> => {\n  const { chatId, tabId = getCurrentTabId() } = payload!;\n  const chat = selectChat(global, chatId);\n  if (!chat) {\n    return;\n  }\n\n  const { id: channelId, accessHash } = chat;\n\n  if (!(channelId && accessHash)) {\n    return;\n  }\n\n  try {\n    await callApi('joinChannel', { channelId, accessHash });\n  } catch (error) {\n    if ((error as ApiError).message === 'CHANNELS_TOO_MUCH') {\n      actions.openLimitReachedModal({ limit: 'channels', tabId });\n    } else {\n      actions.showDialog({ data: { ...(error as ApiError), hasErrorKey: true }, tabId });\n    }\n  }\n});\n\naddActionHandler('deleteChatUser', (global, actions, payload): ActionReturnType => {\n  const { chatId, userId, tabId = getCurrentTabId() } = payload;\n  const chat = selectChat(global, chatId);\n  const user = selectUser(global, userId);\n  if (!chat || !user) {\n    return;\n  }\n\n  global = leaveChat(global, chatId);\n  setGlobal(global);\n\n  if (selectCurrentMessageList(global, tabId)?.chatId === chatId) {\n    actions.openChat({ id: undefined, tabId });\n  }\n\n  void callApi('deleteChatUser', { chat, user });\n});\n\naddActionHandler('deleteChat', (global, actions, payload): ActionReturnType => {\n  const { chatId, tabId = getCurrentTabId() } = payload!;\n  const chat = selectChat(global, chatId);\n  if (!chat) {\n    return;\n  }\n\n  global = leaveChat(global, chatId);\n  setGlobal(global);\n\n  if (selectCurrentMessageList(global, tabId)?.chatId === chatId) {\n    actions.openChat({ id: undefined, tabId });\n  }\n\n  void callApi('deleteChat', { chatId: chat.id });\n});\n\naddActionHandler('leaveChannel', async (global, actions, payload): Promise<void> => {\n  const { chatId, tabId = getCurrentTabId() } = payload!;\n  const chat = selectChat(global, chatId);\n  if (!chat) {\n    return;\n  }\n\n  global = leaveChat(global, chatId);\n  setGlobal(global);\n\n  if (selectCurrentMessageList(global, tabId)?.chatId === chatId) {\n    actions.openChat({ id: undefined, tabId });\n  }\n\n  const { id: channelId, accessHash } = chat;\n  if (channelId && accessHash) {\n    await callApi('leaveChannel', { channelId, accessHash });\n    global = getGlobal();\n    const chatMessages = selectChatMessages(global, chatId);\n    const localMessageIds = Object.keys(chatMessages).map(Number).filter(isLocalMessageId);\n    global = deleteChatMessages(global, chatId, localMessageIds);\n    setGlobal(global);\n  }\n});\n\naddActionHandler('deleteChannel', (global, actions, payload): ActionReturnType => {\n  const { chatId, tabId = getCurrentTabId() } = payload;\n  const chat = selectChat(global, chatId);\n  if (!chat) {\n    return;\n  }\n\n  global = leaveChat(global, chatId);\n  setGlobal(global);\n\n  if (selectCurrentMessageList(global, tabId)?.chatId === chatId) {\n    actions.openChat({ id: undefined, tabId });\n  }\n\n  const { id: channelId, accessHash } = chat;\n  if (channelId && accessHash) {\n    void callApi('deleteChannel', { channelId, accessHash });\n  }\n});\n\naddActionHandler('createGroupChat', async (global, actions, payload): Promise<void> => {\n  const {\n    title, memberIds, photo, tabId = getCurrentTabId(),\n  } = payload;\n  const users = (memberIds as string[])\n    .map((id) => selectUser(global, id))\n    .filter(Boolean);\n\n  global = updateTabState(global, {\n    chatCreation: {\n      progress: ChatCreationProgress.InProgress,\n    },\n  }, tabId);\n  setGlobal(global);\n\n  try {\n    const { chat: createdChat, missingUsers } = await callApi('createGroupChat', {\n      title,\n      users,\n    }) ?? {};\n\n    if (!createdChat) {\n      return;\n    }\n\n    const { id: chatId } = createdChat;\n\n    global = getGlobal();\n    global = updateChat(global, chatId, createdChat);\n    global = updateTabState(global, {\n      chatCreation: {\n        ...selectTabState(global, tabId).chatCreation,\n        progress: createdChat ? ChatCreationProgress.Complete : ChatCreationProgress.Error,\n      },\n    }, tabId);\n    setGlobal(global);\n    actions.openChat({\n      id: chatId,\n      shouldReplaceHistory: true,\n      tabId,\n    });\n\n    if (missingUsers) {\n      global = getGlobal();\n      global = updateMissingInvitedUsers(global, chatId, missingUsers, tabId);\n      setGlobal(global);\n    }\n\n    if (chatId && photo) {\n      await callApi('editChatPhoto', {\n        chatId,\n        photo,\n      });\n    }\n  } catch (err) {\n    if ((err as ApiError).message === 'USERS_TOO_FEW') {\n      global = getGlobal();\n      global = updateTabState(global, {\n        chatCreation: {\n          ...selectTabState(global, tabId).chatCreation,\n          progress: ChatCreationProgress.Error,\n          error: 'CreateGroupError',\n        },\n      }, tabId);\n      setGlobal(global);\n    }\n  }\n});\n\naddActionHandler('toggleChatPinned', (global, actions, payload): ActionReturnType => {\n  const { id, folderId, tabId = getCurrentTabId() } = payload!;\n  const chat = selectChat(global, id);\n  if (!chat) {\n    return;\n  }\n\n  const limit = selectCurrentLimit(global, 'dialogFolderPinned');\n\n  if (folderId) {\n    const folder = selectChatFolder(global, folderId);\n    if (folder) {\n      const shouldBePinned = !selectIsChatPinned(global, id, folderId);\n\n      const { pinnedChatIds, includedChatIds } = folder;\n      const newPinnedIds = shouldBePinned\n        ? [id, ...(pinnedChatIds || [])]\n        : (pinnedChatIds || []).filter((pinnedId) => pinnedId !== id);\n\n      // With both Pin and Unpin we need to re-add a user to the included group\n      const newIncludedChatIds = [id, ...includedChatIds];\n\n      void callApi('editChatFolder', {\n        id: folderId,\n        folderUpdate: {\n          ...folder,\n          pinnedChatIds: newPinnedIds,\n          includedChatIds: newIncludedChatIds,\n        },\n      });\n    }\n  } else {\n    const listType = selectChatListType(global, id);\n    const isPinned = selectIsChatPinned(global, id, listType === 'archived' ? ARCHIVED_FOLDER_ID : undefined);\n\n    const ids = global.chats.orderedPinnedIds[listType === 'archived' ? 'archived' : 'active'];\n    if ((ids?.length || 0) >= limit && !isPinned) {\n      actions.openLimitReachedModal({\n        limit: 'dialogFolderPinned',\n        tabId,\n      });\n      return;\n    }\n    void callApi('toggleChatPinned', { chat, shouldBePinned: !isPinned });\n  }\n});\n\naddActionHandler('toggleChatArchived', (global, actions, payload): ActionReturnType => {\n  const { id } = payload!;\n  const chat = selectChat(global, id);\n  if (chat) {\n    void callApi('toggleChatArchived', {\n      chat,\n      folderId: isChatArchived(chat) ? 0 : ARCHIVED_FOLDER_ID,\n    });\n  }\n});\n\naddActionHandler('toggleSavedDialogPinned', (global, actions, payload): ActionReturnType => {\n  const { id, tabId = getCurrentTabId() } = payload!;\n  const chat = selectChat(global, id);\n  if (!chat) {\n    return;\n  }\n\n  const limit = selectCurrentLimit(global, 'savedDialogsPinned');\n\n  const isPinned = selectIsChatPinned(global, id, SAVED_FOLDER_ID);\n\n  const ids = global.chats.orderedPinnedIds.saved;\n  if ((ids?.length || 0) >= limit && !isPinned) {\n    actions.openLimitReachedModal({\n      limit: 'savedDialogsPinned',\n      tabId,\n    });\n    return;\n  }\n  void callApi('toggleSavedDialogPinned', { chat, shouldBePinned: !isPinned });\n});\n\naddActionHandler('loadChatFolders', async (global): Promise<void> => {\n  const chatFolders = await callApi('fetchChatFolders');\n\n  if (chatFolders) {\n    global = getGlobal();\n\n    global = {\n      ...global,\n      chatFolders: {\n        ...global.chatFolders,\n        ...chatFolders,\n      },\n    };\n    setGlobal(global);\n  }\n});\n\naddActionHandler('loadRecommendedChatFolders', async (global): Promise<void> => {\n  const recommendedChatFolders = await callApi('fetchRecommendedChatFolders');\n\n  if (recommendedChatFolders) {\n    global = getGlobal();\n\n    global = {\n      ...global,\n      chatFolders: {\n        ...global.chatFolders,\n        recommended: recommendedChatFolders,\n      },\n    };\n    setGlobal(global);\n  }\n});\n\naddActionHandler('editChatFolders', (global, actions, payload): ActionReturnType => {\n  const {\n    chatId, idsToRemove, idsToAdd, tabId = getCurrentTabId(),\n  } = payload;\n  const limit = selectCurrentLimit(global, 'dialogFiltersChats');\n\n  const isLimitReached = idsToAdd\n    .some((id) => selectChatFolder(global, id)!.includedChatIds.length >= limit);\n  if (isLimitReached) {\n    actions.openLimitReachedModal({ limit: 'dialogFiltersChats', tabId });\n    return;\n  }\n\n  idsToRemove.forEach(async (id) => {\n    const folder = selectChatFolder(global, id);\n    if (folder) {\n      await callApi('editChatFolder', {\n        id,\n        folderUpdate: {\n          ...folder,\n          pinnedChatIds: folder.pinnedChatIds?.filter((pinnedId) => pinnedId !== chatId),\n          includedChatIds: folder.includedChatIds.filter((includedId) => includedId !== chatId),\n        },\n      });\n    }\n  });\n\n  idsToAdd.forEach(async (id) => {\n    const folder = selectChatFolder(global, id);\n    if (folder) {\n      await callApi('editChatFolder', {\n        id,\n        folderUpdate: {\n          ...folder,\n          includedChatIds: folder.includedChatIds.concat(chatId),\n        },\n      });\n    }\n  });\n});\n\naddActionHandler('editChatFolder', (global, actions, payload): ActionReturnType => {\n  const { id, folderUpdate } = payload!;\n  const folder = selectChatFolder(global, id);\n\n  if (folder) {\n    void callApi('editChatFolder', {\n      id,\n      folderUpdate: {\n        id,\n        emoticon: folder.emoticon,\n        pinnedChatIds: folder.pinnedChatIds,\n        ...folderUpdate,\n      },\n    });\n  }\n});\n\naddActionHandler('addChatFolder', async (global, actions, payload): Promise<void> => {\n  const { folder, tabId = getCurrentTabId() } = payload!;\n  const { orderedIds, byId } = global.chatFolders;\n\n  const limit = selectCurrentLimit(global, 'dialogFilters');\n  if (Object.keys(byId).length >= limit) {\n    actions.openLimitReachedModal({\n      limit: 'dialogFilters',\n      tabId,\n    });\n    return;\n  }\n\n  const maxId = Math.max(...(orderedIds || []), ARCHIVED_FOLDER_ID);\n\n  // Clear fields from recommended folders\n  const { id: recommendedId, description, ...newFolder } = folder;\n\n  const newId = maxId + 1;\n  const folderUpdate = {\n    id: newId,\n    ...newFolder,\n  };\n  await callApi('editChatFolder', {\n    id: newId,\n    folderUpdate,\n  });\n\n  // Update called from the above `callApi` is throttled, but we need to apply changes immediately\n  actions.apiUpdate({\n    '@type': 'updateChatFolder',\n    id: newId,\n    folder: folderUpdate,\n  });\n\n  actions.requestNextSettingsScreen({\n    foldersAction: {\n      type: 'setFolderId',\n      payload: maxId + 1,\n    },\n    tabId,\n  });\n\n  if (!description) {\n    return;\n  }\n\n  global = getGlobal();\n  const { recommended } = global.chatFolders;\n\n  if (recommended) {\n    global = {\n      ...global,\n      chatFolders: {\n        ...global.chatFolders,\n        recommended: recommended.filter(({ id }) => id !== recommendedId),\n      },\n    };\n    setGlobal(global);\n  }\n});\n\naddActionHandler('sortChatFolders', async (global, actions, payload): Promise<void> => {\n  const { folderIds } = payload!;\n\n  const result = await callApi('sortChatFolders', folderIds);\n  if (result) {\n    global = getGlobal();\n    global = {\n      ...global,\n      chatFolders: {\n        ...global.chatFolders,\n        orderedIds: folderIds,\n      },\n    };\n    setGlobal(global);\n  }\n});\n\naddActionHandler('deleteChatFolder', async (global, actions, payload): Promise<void> => {\n  const { id } = payload;\n  const folder = selectChatFolder(global, id);\n\n  if (folder) {\n    await callApi('deleteChatFolder', id);\n  }\n});\n\naddActionHandler('toggleChatUnread', (global, actions, payload): ActionReturnType => {\n  const { id } = payload;\n  const chat = selectChat(global, id);\n  if (chat) {\n    if (chat.unreadCount) {\n      void callApi('markMessageListRead', { chat, threadId: MAIN_THREAD_ID });\n    } else {\n      void callApi('toggleDialogUnread', {\n        chat,\n        hasUnreadMark: !chat.hasUnreadMark,\n      });\n    }\n  }\n});\n\naddActionHandler('markTopicRead', (global, actions, payload): ActionReturnType => {\n  const { chatId, topicId } = payload;\n  const chat = selectChat(global, chatId);\n  if (!chat) return;\n\n  const lastTopicMessageId = chat.topics?.[topicId]?.lastMessageId;\n  if (!lastTopicMessageId) return;\n\n  void callApi('markMessageListRead', {\n    chat,\n    threadId: topicId,\n    maxId: lastTopicMessageId,\n  });\n\n  global = getGlobal();\n  global = updateTopic(global, chatId, topicId, {\n    unreadCount: 0,\n  });\n  global = updateThreadInfo(global, chatId, topicId, {\n    lastReadInboxMessageId: lastTopicMessageId,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('openChatByInvite', async (global, actions, payload): Promise<void> => {\n  const { hash, tabId = getCurrentTabId() } = payload!;\n\n  const result = await callApi('openChatByInvite', hash);\n  if (!result) {\n    return;\n  }\n\n  actions.openChat({ id: result.chatId, tabId });\n});\n\naddActionHandler('openChatByPhoneNumber', async (global, actions, payload): Promise<void> => {\n  const {\n    phoneNumber, startAttach, attach, text, tabId = getCurrentTabId(),\n  } = payload!;\n\n  // Open temporary empty chat to make the click response feel faster\n  actions.openChat({ id: TMP_CHAT_ID, tabId });\n\n  const chat = await fetchChatByPhoneNumber(global, phoneNumber);\n  if (!chat) {\n    actions.openPreviousChat({ tabId });\n    actions.showNotification({\n      message: langProvider.oldTranslate('lng_username_by_phone_not_found').replace('{phone}', phoneNumber),\n      tabId,\n    });\n    return;\n  }\n\n  if (text) {\n    actions.openChatWithDraft({ chatId: chat.id, text: { text }, tabId });\n  } else {\n    actions.openChat({ id: chat.id, tabId });\n  }\n\n  if (attach) {\n    global = getGlobal();\n    openAttachMenuFromLink(global, actions, chat.id, attach, startAttach, tabId);\n  }\n});\n\naddActionHandler('openTelegramLink', (global, actions, payload): ActionReturnType => {\n  const {\n    url,\n    tabId = getCurrentTabId(),\n  } = payload;\n\n  if (isDeepLink(url)) {\n    const isProcessed = processDeepLink(url);\n    if (isProcessed || url.match(RE_TG_LINK)) {\n      return;\n    }\n  }\n\n  const {\n    openChatByPhoneNumber,\n    openChatByInvite,\n    openStickerSet,\n    openChatWithDraft,\n    joinVoiceChatByLink,\n    focusMessage,\n    openInvoice,\n    processAttachBotParameters,\n    checkChatlistInvite,\n    openChatByUsername: openChatByUsernameAction,\n    openStoryViewerByUsername,\n    processBoostParameters,\n    checkGiftCode,\n  } = actions;\n\n  if (isDeepLink(url)) {\n    const isProcessed = processDeepLink(url);\n    if (isProcessed || url.match(RE_TG_LINK)) {\n      return;\n    }\n  }\n\n  const uri = new URL(url.toLowerCase().startsWith('http') ? url : `https://${url}`);\n  if (TME_WEB_DOMAINS.has(uri.hostname) && uri.pathname === '/') {\n    window.open(uri.toString(), '_blank', 'noopener');\n    return;\n  }\n\n  const hostname = TME_WEB_DOMAINS.has(uri.hostname) ? 't.me' : uri.hostname;\n  const hostParts = hostname.split('.');\n  if (hostParts.length > 3) return;\n\n  const adaptedPathname = uri.pathname.replace(/^\\/?s\\//, '');\n  const pathname = hostParts.length === 3 ? `${hostParts[0]}/${adaptedPathname}` : adaptedPathname;\n  const [part1, part2, part3] = pathname.split('/').filter(Boolean).map((part) => decodeURI(part));\n  const params = Object.fromEntries(uri.searchParams);\n\n  let hash: string | undefined;\n  if (part1 === 'joinchat') {\n    hash = part2;\n  }\n\n  const hasStartAttach = params.hasOwnProperty('startattach');\n  const hasStartApp = params.hasOwnProperty('startapp');\n  const choose = parseChooseParameter(params.choose);\n  const storyId = part2 === 's' && (Number(part3) || undefined);\n  const hasBoost = params.hasOwnProperty('boost');\n\n  if (part1.match(/^\\+([0-9]+)(\\?|$)/)) {\n    openChatByPhoneNumber({\n      phoneNumber: part1.substr(1, part1.length - 1),\n      startAttach: params.startattach,\n      attach: params.attach,\n      text: params.text,\n      tabId,\n    });\n    return;\n  }\n\n  if (storyId) {\n    openStoryViewerByUsername({\n      username: part1,\n      storyId,\n      tabId,\n    });\n\n    return;\n  }\n\n  if (part1.startsWith(' ') || part1.startsWith('+')) {\n    hash = part1.substr(1, part1.length - 1);\n  }\n\n  if (hash) {\n    openChatByInvite({ hash, tabId });\n    return;\n  }\n\n  if (part1 === 'addstickers' || part1 === 'addemoji') {\n    openStickerSet({\n      stickerSetInfo: {\n        shortName: part2,\n      },\n      tabId,\n    });\n    return;\n  }\n\n  if (part1 === 'share') {\n    const text = formatShareText(params.url, params.text);\n    openChatWithDraft({ text, tabId });\n    return;\n  }\n\n  if (part1 === 'addlist') {\n    const slug = part2;\n    checkChatlistInvite({ slug, tabId });\n    return;\n  }\n\n  if (part1 === 'giftcode') {\n    const slug = part2;\n    checkGiftCode({ slug, tabId });\n    return;\n  }\n\n  const chatOrChannelPostId = part2 || undefined;\n  const messageId = part3 ? Number(part3) : undefined;\n  const commentId = params.comment ? Number(params.comment) : undefined;\n\n  if (params.hasOwnProperty('voicechat') || params.hasOwnProperty('livestream')) {\n    joinVoiceChatByLink({\n      username: part1,\n      inviteHash: params.voicechat || params.livestream,\n      tabId,\n    });\n  } else if (part1 === 'boost') {\n    const username = part2;\n    const id = params.c;\n\n    const isPrivate = !username && Boolean(id);\n\n    processBoostParameters({\n      usernameOrId: username || id,\n      isPrivate,\n      tabId,\n    });\n  } else if (hasBoost) {\n    const isPrivate = part1 === 'c' && Boolean(chatOrChannelPostId);\n    processBoostParameters({\n      usernameOrId: chatOrChannelPostId || part1,\n      isPrivate,\n      tabId,\n    });\n  } else if (part1 === 'c' && chatOrChannelPostId && messageId) {\n    focusMessage({\n      chatId: toChannelId(chatOrChannelPostId),\n      messageId,\n      tabId,\n    });\n  } else if (part1.startsWith('$')) {\n    openInvoice({\n      type: 'slug',\n      slug: part1.substring(1),\n      tabId,\n    });\n  } else if (part1 === 'invoice') {\n    openInvoice({\n      type: 'slug',\n      slug: part2,\n      tabId,\n    });\n  } else if ((hasStartAttach && choose) || (!part2 && hasStartApp)) {\n    processAttachBotParameters({\n      username: part1,\n      filter: choose,\n      startParam: params.startattach || params.startapp,\n      tabId,\n    });\n  } else {\n    openChatByUsernameAction({\n      username: part1,\n      messageId: messageId || Number(chatOrChannelPostId),\n      threadId: messageId ? Number(chatOrChannelPostId) : undefined,\n      commentId,\n      startParam: params.start,\n      startAttach: params.startattach,\n      attach: params.attach,\n      startApp: params.startapp,\n      originalParts: [part1, part2, part3],\n      tabId,\n    });\n  }\n});\n\naddActionHandler('processBoostParameters', async (global, actions, payload): Promise<void> => {\n  const { usernameOrId, isPrivate, tabId = getCurrentTabId() } = payload;\n\n  let chat: ApiChat | undefined;\n\n  if (isPrivate) {\n    const chatId = toChannelId(usernameOrId);\n    chat = selectChat(global, chatId);\n    if (!chat) {\n      actions.showNotification({ message: 'Chat does not exist', tabId });\n      return;\n    }\n  } else {\n    chat = await fetchChatByUsername(global, usernameOrId);\n    if (!chat) {\n      actions.showNotification({ message: 'User does not exist', tabId });\n      return;\n    }\n  }\n\n  if (!isChatChannel(chat) && !isChatSuperGroup(chat)) {\n    actions.openChat({ id: chat.id, tabId });\n    return;\n  }\n\n  actions.openBoostModal({\n    chatId: chat.id,\n    tabId,\n  });\n});\n\naddActionHandler('acceptInviteConfirmation', async (global, actions, payload): Promise<void> => {\n  const { hash, tabId = getCurrentTabId() } = payload!;\n  const result = await callApi('importChatInvite', { hash });\n  if (!result) {\n    return;\n  }\n\n  actions.openChat({ id: result.id, tabId });\n});\n\naddActionHandler('openChatByUsername', async (global, actions, payload): Promise<void> => {\n  const {\n    username, messageId, commentId, startParam, startAttach, attach, threadId, originalParts, startApp, text,\n    tabId = getCurrentTabId(),\n  } = payload!;\n\n  const chat = selectCurrentChat(global, tabId);\n  const webAppName = originalParts?.[1];\n  const isWebApp = webAppName && !Number(webAppName) && !originalParts?.[2];\n\n  if (!commentId) {\n    if (startAttach === undefined && messageId && !startParam\n      && chat?.usernames?.some((c) => c.username === username)) {\n      actions.focusMessage({\n        chatId: chat.id, threadId, messageId, tabId,\n      });\n      return;\n    }\n    if (!isWebApp) {\n      await openChatByUsername(\n        global, actions, {\n          username,\n          threadId,\n          channelPostId: messageId,\n          startParam,\n          startAttach,\n          attach,\n          text,\n        }, tabId,\n      );\n      return;\n    }\n  }\n\n  const usernameChat = selectChatByUsername(global, username);\n  if (commentId && messageId && usernameChat) {\n    actions.openThread({\n      isComments: true,\n      originChannelId: usernameChat.id,\n      originMessageId: messageId,\n      tabId,\n      focusMessageId: commentId,\n    });\n    return;\n  }\n\n  if (!isWebApp) actions.openChat({ id: TMP_CHAT_ID, tabId });\n\n  const chatByUsername = await fetchChatByUsername(global, username);\n\n  if (!chatByUsername) return;\n\n  if (isWebApp && chatByUsername) {\n    const theme = extractCurrentThemeParams();\n\n    actions.requestAppWebView({\n      appName: webAppName,\n      botId: chatByUsername.id,\n      tabId,\n      startApp,\n      theme,\n    });\n    return;\n  }\n\n  if (!messageId) return;\n\n  actions.openThread({\n    isComments: true,\n    originChannelId: chatByUsername.id,\n    originMessageId: messageId,\n    tabId,\n    focusMessageId: commentId,\n  });\n});\n\naddActionHandler('togglePreHistoryHidden', async (global, actions, payload): Promise<void> => {\n  const {\n    chatId, isEnabled,\n    tabId = getCurrentTabId(),\n  } = payload!;\n\n  const chat = await ensureIsSuperGroup(global, actions, chatId, tabId);\n  if (!chat) {\n    return;\n  }\n\n  global = getGlobal();\n  global = updateChatFullInfo(global, chat.id, { isPreHistoryHidden: isEnabled });\n  setGlobal(global);\n\n  void callApi('togglePreHistoryHidden', { chat, isEnabled });\n});\n\naddActionHandler('updateChatDefaultBannedRights', (global, actions, payload): ActionReturnType => {\n  const { chatId, bannedRights } = payload!;\n  const chat = selectChat(global, chatId);\n\n  if (!chat) {\n    return;\n  }\n\n  void callApi('updateChatDefaultBannedRights', { chat, bannedRights });\n});\n\naddActionHandler('updateChatMemberBannedRights', async (global, actions, payload): Promise<void> => {\n  const {\n    chatId, userId, bannedRights,\n    tabId = getCurrentTabId(),\n  } = payload!;\n\n  const user = selectUser(global, userId);\n\n  if (!user) {\n    return;\n  }\n\n  const chat = await ensureIsSuperGroup(global, actions, chatId, tabId);\n\n  if (!chat) return;\n\n  await callApi('updateChatMemberBannedRights', { chat, user, bannedRights });\n\n  global = getGlobal();\n\n  const updatedFullInfo = selectChatFullInfo(global, chat.id);\n  if (!updatedFullInfo) {\n    return;\n  }\n\n  const { members, kickedMembers } = updatedFullInfo;\n\n  const isBanned = Boolean(bannedRights.viewMessages);\n  const isUnblocked = !Object.keys(bannedRights).length;\n\n  global = updateChatFullInfo(global, chat.id, {\n    ...(members && isBanned && {\n      members: members.filter((m) => m.userId !== userId),\n    }),\n    ...(members && !isBanned && {\n      members: members.map((m) => (\n        m.userId === userId\n          ? { ...m, bannedRights }\n          : m\n      )),\n    }),\n    ...(isUnblocked && kickedMembers && {\n      kickedMembers: kickedMembers.filter((m) => m.userId !== userId),\n    }),\n  });\n  setGlobal(global);\n});\n\naddActionHandler('updateChatAdmin', async (global, actions, payload): Promise<void> => {\n  const {\n    chatId, userId, adminRights, customTitle,\n    tabId = getCurrentTabId(),\n  } = payload!;\n\n  const user = selectUser(global, userId);\n  if (!user) {\n    return;\n  }\n\n  const chat = await ensureIsSuperGroup(global, actions, chatId, tabId);\n\n  if (!chat) return;\n\n  await callApi('updateChatAdmin', {\n    chat, user, adminRights, customTitle,\n  });\n\n  const chatAfterUpdate = await callApi('fetchFullChat', chat);\n  if (!chatAfterUpdate?.fullInfo) {\n    return;\n  }\n\n  const { adminMembersById } = chatAfterUpdate.fullInfo;\n  const isDismissed = !Object.keys(adminRights).length;\n  let newAdminMembersById: Record<string, ApiChatMember> | undefined;\n  if (adminMembersById) {\n    if (isDismissed) {\n      const { [userId]: remove, ...rest } = adminMembersById;\n      newAdminMembersById = rest;\n    } else {\n      newAdminMembersById = {\n        ...adminMembersById,\n        [userId]: {\n          ...adminMembersById[userId],\n          adminRights,\n          customTitle,\n        },\n      };\n    }\n  }\n\n  if (newAdminMembersById) {\n    global = getGlobal();\n    global = updateChatFullInfo(global, chat.id, { adminMembersById: newAdminMembersById });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('updateChat', async (global, actions, payload): Promise<void> => {\n  const {\n    chatId, title, about, photo, tabId = getCurrentTabId(),\n  } = payload;\n\n  const chat = selectChat(global, chatId);\n  const fullInfo = selectChatFullInfo(global, chatId);\n  if (!chat) {\n    return;\n  }\n\n  global = getGlobal();\n  global = updateManagementProgress(global, ManagementProgress.InProgress, tabId);\n  setGlobal(global);\n\n  await Promise.all([\n    chat.title !== title\n      ? callApi('updateChatTitle', chat, title)\n      : undefined,\n    fullInfo?.about !== about\n      ? callApi('updateChatAbout', chat, about)\n      : undefined,\n    photo\n      ? callApi('editChatPhoto', { chatId, accessHash: chat.accessHash, photo })\n      : undefined,\n  ]);\n\n  global = getGlobal();\n  global = updateManagementProgress(global, ManagementProgress.Complete, tabId);\n  setGlobal(global);\n\n  if (photo) {\n    actions.loadFullChat({ chatId, tabId, withPhotos: true });\n  }\n});\n\naddActionHandler('updateChatPhoto', async (global, actions, payload): Promise<void> => {\n  const { photo, chatId, tabId = getCurrentTabId() } = payload;\n  const chat = selectChat(global, chatId);\n  if (!chat) return;\n  global = updateChat(global, chatId, { avatarHash: undefined });\n  global = updateChatFullInfo(global, chatId, { profilePhoto: undefined });\n  setGlobal(global);\n  // This method creates a new entry in photos array\n  await callApi('editChatPhoto', {\n    chatId,\n    accessHash: chat.accessHash,\n    photo,\n  });\n  // Explicitly delete the old photo reference\n  await callApi('deleteProfilePhotos', [photo]);\n  actions.loadFullChat({ chatId, tabId, withPhotos: true });\n});\n\naddActionHandler('deleteChatPhoto', async (global, actions, payload): Promise<void> => {\n  const { photo, chatId, tabId = getCurrentTabId() } = payload;\n  const chat = selectChat(global, chatId);\n  if (!chat) return;\n  const photosToDelete = [photo];\n  if (chat.avatarHash === photo.id) {\n    // Select next photo to set as avatar\n    const nextPhoto = chat.photos?.[1];\n    if (nextPhoto) {\n      photosToDelete.push(nextPhoto);\n    }\n    global = updateChat(global, chatId, { avatarHash: undefined });\n    global = updateChatFullInfo(global, chatId, { profilePhoto: undefined });\n    setGlobal(global);\n    // Set next photo as avatar\n    await callApi('editChatPhoto', {\n      chatId,\n      accessHash: chat.accessHash,\n      photo: nextPhoto,\n    });\n  }\n\n  const { photos = [] } = chat;\n\n  const newPhotos = photos.filter((p) => photosToDelete.some((toDelete) => toDelete.id !== p.id));\n  global = getGlobal();\n  global = updateChat(global, chatId, { photos: newPhotos });\n\n  setGlobal(global);\n\n  // Delete references to the old photos\n  const result = await callApi('deleteProfilePhotos', photosToDelete);\n  if (!result) return;\n  actions.loadFullChat({ chatId, tabId, withPhotos: true });\n});\n\naddActionHandler('toggleSignatures', (global, actions, payload): ActionReturnType => {\n  const { chatId, isEnabled } = payload;\n  const chat = selectChat(global, chatId);\n\n  if (!chat) {\n    return;\n  }\n\n  void callApi('toggleSignatures', { chat, isEnabled });\n});\n\naddActionHandler('loadGroupsForDiscussion', async (global): Promise<void> => {\n  const groups = await callApi('fetchGroupsForDiscussion');\n  if (!groups) {\n    return;\n  }\n\n  const addedById = groups.reduce((result, group) => {\n    if (group && !group.isForum) {\n      result[group.id] = group;\n    }\n\n    return result;\n  }, {} as Record<string, ApiChat>);\n\n  global = getGlobal();\n  global = addChats(global, addedById);\n  global = {\n    ...global,\n    chats: {\n      ...global.chats,\n      forDiscussionIds: Object.keys(addedById),\n    },\n  };\n  setGlobal(global);\n});\n\naddActionHandler('linkDiscussionGroup', async (global, actions, payload): Promise<void> => {\n  const { channelId, chatId, tabId = getCurrentTabId() } = payload || {};\n\n  const channel = selectChat(global, channelId);\n  if (!channel) {\n    return;\n  }\n\n  const chat = await ensureIsSuperGroup(global, actions, chatId, tabId);\n\n  if (!chat) return;\n\n  let fullInfo = selectChatFullInfo(global, chat.id);\n  if (!fullInfo) {\n    const fullChat = await callApi('fetchFullChat', chat);\n    if (!fullChat) {\n      return;\n    }\n\n    fullInfo = fullChat.fullInfo;\n  }\n\n  if (fullInfo!.isPreHistoryHidden) {\n    global = getGlobal();\n    global = updateChatFullInfo(global, chat.id, { isPreHistoryHidden: false });\n    setGlobal(global);\n\n    await callApi('togglePreHistoryHidden', { chat, isEnabled: false });\n  }\n\n  void callApi('setDiscussionGroup', { channel, chat });\n});\n\naddActionHandler('unlinkDiscussionGroup', async (global, actions, payload): Promise<void> => {\n  const { channelId, tabId = getCurrentTabId() } = payload;\n\n  const channel = selectChat(global, channelId);\n  if (!channel) {\n    return;\n  }\n\n  const fullInfo = selectChatFullInfo(global, channelId);\n  let chat: ApiChat | undefined;\n  if (fullInfo?.linkedChatId) {\n    chat = selectChat(global, fullInfo.linkedChatId);\n  }\n\n  await callApi('setDiscussionGroup', { channel });\n  if (chat) {\n    global = getGlobal();\n    loadFullChat(global, actions, chat, tabId);\n  }\n});\n\naddActionHandler('setActiveChatFolder', (global, actions, payload): ActionReturnType => {\n  const { activeChatFolder, tabId = getCurrentTabId() } = payload;\n  const maxFolders = selectCurrentLimit(global, 'dialogFilters');\n\n  const isBlocked = activeChatFolder + 1 > maxFolders;\n\n  if (isBlocked) {\n    actions.openLimitReachedModal({\n      limit: 'dialogFilters',\n      tabId,\n    });\n    return undefined;\n  }\n\n  return updateTabState(global, {\n    activeChatFolder,\n  }, tabId);\n});\n\naddActionHandler('resetOpenChatWithDraft', (global, actions, payload): ActionReturnType => {\n  const { tabId = getCurrentTabId() } = payload || {};\n\n  return updateTabState(global, {\n    requestedDraft: undefined,\n  }, tabId);\n});\n\naddActionHandler('loadMoreMembers', async (global, actions, payload): Promise<void> => {\n  const { tabId = getCurrentTabId() } = payload || {};\n  const { chatId } = selectCurrentMessageList(global, tabId) || {};\n  const chat = chatId ? selectChat(global, chatId) : undefined;\n  if (!chat || isChatBasicGroup(chat)) {\n    return;\n  }\n\n  const offset = selectChatFullInfo(global, chat.id)?.members?.length;\n  if (offset !== undefined && chat.membersCount !== undefined && offset >= chat.membersCount) return;\n\n  const result = await callApi('fetchMembers', chat.id, chat.accessHash!, 'recent', offset);\n  if (!result) {\n    return;\n  }\n\n  const { members, users, userStatusesById } = result;\n  if (!members || !members.length) {\n    return;\n  }\n\n  global = getGlobal();\n  global = addUsers(global, buildCollectionByKey(users, 'id'));\n  global = addUserStatuses(global, userStatusesById);\n  global = addChatMembers(global, chat, members);\n  setGlobal(global);\n});\n\naddActionHandler('addChatMembers', async (global, actions, payload): Promise<void> => {\n  const { chatId, memberIds, tabId = getCurrentTabId() } = payload;\n  const chat = selectChat(global, chatId);\n  const users = memberIds.map((userId) => selectUser(global, userId)).filter(Boolean);\n\n  if (!chat || !users.length) {\n    return;\n  }\n\n  actions.setNewChatMembersDialogState({ newChatMembersProgress: NewChatMembersProgress.Loading, tabId });\n  const missingUsers = await callApi('addChatMembers', chat, users);\n  if (missingUsers) {\n    global = getGlobal();\n    global = updateMissingInvitedUsers(global, chatId, missingUsers, tabId);\n    setGlobal(global);\n  }\n  actions.setNewChatMembersDialogState({ newChatMembersProgress: NewChatMembersProgress.Closed, tabId });\n  global = getGlobal();\n  loadFullChat(global, actions, chat, tabId);\n});\n\naddActionHandler('deleteChatMember', async (global, actions, payload): Promise<void> => {\n  const { chatId, userId, tabId = getCurrentTabId() } = payload;\n  const chat = selectChat(global, chatId);\n  const user = selectUser(global, userId);\n\n  if (!chat || !user) {\n    return;\n  }\n\n  await callApi('deleteChatMember', chat, user);\n  global = getGlobal();\n  loadFullChat(global, actions, chat, tabId);\n});\n\naddActionHandler('toggleIsProtected', (global, actions, payload): ActionReturnType => {\n  const { chatId, isProtected } = payload;\n  const chat = selectChat(global, chatId);\n\n  if (!chat) {\n    return;\n  }\n\n  void callApi('toggleIsProtected', { chat, isProtected });\n});\n\naddActionHandler('setChatEnabledReactions', async (global, actions, payload): Promise<void> => {\n  const { chatId, enabledReactions, tabId = getCurrentTabId() } = payload;\n  const chat = selectChat(global, chatId);\n  if (!chat) return;\n\n  await callApi('setChatEnabledReactions', {\n    chat,\n    enabledReactions,\n  });\n\n  global = getGlobal();\n  void loadFullChat(global, actions, chat, tabId);\n});\n\naddActionHandler('fetchChat', (global, actions, payload): ActionReturnType => {\n  const { chatId } = payload;\n  const chat = selectChat(global, chatId);\n\n  if (chat) {\n    return;\n  }\n\n  if (selectIsChatWithSelf(global, chatId)) {\n    void callApi('fetchChat', { type: 'self' });\n  } else {\n    const user = selectUser(global, chatId);\n    if (user) {\n      void callApi('fetchChat', { type: 'user', user });\n    }\n  }\n});\n\naddActionHandler('loadChatSettings', async (global, actions, payload): Promise<void> => {\n  const { chatId } = payload;\n  const chat = selectChat(global, chatId);\n  if (!chat) return;\n\n  const result = await callApi('fetchChatSettings', chat);\n  if (!result) return;\n  const { settings, users } = result;\n  global = getGlobal();\n\n  global = addUsers(global, buildCollectionByKey(users, 'id'));\n\n  global = updateChat(global, chat.id, { settings });\n  setGlobal(global);\n});\n\naddActionHandler('toggleJoinToSend', async (global, actions, payload): Promise<void> => {\n  const { chatId, isEnabled } = payload;\n  const chat = selectChat(global, chatId);\n  if (!chat) return;\n  if (!isChatSuperGroup(chat) && !isChatChannel(chat)) return;\n\n  await callApi('toggleJoinToSend', chat, isEnabled);\n});\n\naddActionHandler('toggleJoinRequest', async (global, actions, payload): Promise<void> => {\n  const { chatId, isEnabled } = payload;\n  const chat = selectChat(global, chatId);\n  if (!chat) return;\n  if (!isChatSuperGroup(chat) && !isChatChannel(chat)) return;\n\n  await callApi('toggleJoinRequest', chat, isEnabled);\n});\n\naddActionHandler('openForumPanel', (global, actions, payload): ActionReturnType => {\n  const { chatId, tabId = getCurrentTabId() } = payload;\n  actions.toggleStoryRibbon({ isShown: false, tabId });\n  actions.toggleStoryRibbon({ isShown: false, isArchived: true, tabId });\n  return updateTabState(global, {\n    forumPanelChatId: chatId,\n  }, tabId);\n});\n\naddActionHandler('closeForumPanel', (global, actions, payload): ActionReturnType => {\n  const { tabId = getCurrentTabId() } = payload || {};\n  return updateTabState(global, {\n    forumPanelChatId: undefined,\n  }, tabId);\n});\n\naddActionHandler('processAttachBotParameters', async (global, actions, payload): Promise<void> => {\n  const {\n    username, filter, startParam, tabId = getCurrentTabId(),\n  } = payload;\n  const bot = await getAttachBotOrNotify(global, actions, username, tabId);\n  if (!bot) return;\n\n  const isForChat = Boolean(filter);\n\n  if (!isForChat) {\n    actions.callAttachBot({\n      isFromSideMenu: true,\n      bot,\n      startParam,\n      tabId,\n    });\n    return;\n  }\n\n  global = getGlobal();\n  const { attachMenu: { bots } } = global;\n  if (!bots[bot.id]) {\n    global = updateTabState(global, {\n      requestedAttachBotInstall: {\n        bot,\n        onConfirm: {\n          action: 'requestAttachBotInChat',\n          payload: {\n            bot,\n            filter,\n            startParam,\n          },\n        },\n      },\n    }, tabId);\n    setGlobal(global);\n    return;\n  }\n  actions.requestAttachBotInChat({\n    bot,\n    filter,\n    startParam,\n    tabId,\n  });\n});\n\naddActionHandler('loadTopics', async (global, actions, payload): Promise<void> => {\n  const { chatId, force } = payload;\n  const chat = selectChat(global, chatId);\n  if (!chat) return;\n\n  if (!force && chat.listedTopicIds && chat.listedTopicIds.length === chat.topicsCount) {\n    return;\n  }\n\n  const offsetTopic = !force && chat.listedTopicIds ? chat.listedTopicIds.reduce((acc, el) => {\n    const topic = chat.topics?.[el];\n    const accTopic = chat.topics?.[acc];\n    if (!topic) return acc;\n    if (!accTopic || topic.lastMessageId < accTopic.lastMessageId) {\n      return el;\n    }\n    return acc;\n  }) : undefined;\n\n  const { id: offsetTopicId, date: offsetDate, lastMessageId: offsetId } = (offsetTopic\n    && chat.topics?.[offsetTopic]) || {};\n  const result = await callApi('fetchTopics', {\n    chat, offsetTopicId, offsetId, offsetDate, limit: offsetTopicId ? TOPICS_SLICE : TOPICS_SLICE_SECOND_LOAD,\n  });\n\n  if (!result) return;\n\n  global = getGlobal();\n  global = addUsers(global, buildCollectionByKey(result.users, 'id'));\n  global = addChats(global, buildCollectionByKey(result.chats, 'id'));\n  global = addMessages(global, result.messages);\n  global = updateTopics(global, chatId, result.count, result.topics);\n  global = updateListedTopicIds(global, chatId, result.topics.map((topic) => topic.id));\n  Object.entries(result.draftsById || {}).forEach(([threadId, draft]) => {\n    global = replaceThreadParam(global, chatId, Number(threadId), 'draft', draft);\n  });\n  Object.entries(result.readInboxMessageIdByTopicId || {}).forEach(([topicId, messageId]) => {\n    global = updateThreadInfo(global, chatId, Number(topicId), { lastReadInboxMessageId: messageId });\n  });\n\n  setGlobal(global);\n});\n\naddActionHandler('loadTopicById', async (global, actions, payload): Promise<void> => {\n  const { chatId, topicId } = payload;\n\n  const chat = selectChat(global, chatId);\n  if (!chat) return;\n\n  const result = await callApi('fetchTopicById', { chat, topicId });\n\n  if (!result) {\n    if ('tabId' in payload && payload.shouldCloseChatOnError) {\n      const { tabId = getCurrentTabId() } = payload;\n      actions.openChat({ id: undefined, tabId });\n    }\n    return;\n  }\n\n  global = getGlobal();\n  global = addUsers(global, buildCollectionByKey(result.users, 'id'));\n  global = addChats(global, buildCollectionByKey(result.chats, 'id'));\n  global = addMessages(global, result.messages);\n  global = updateTopic(global, chatId, topicId, result.topic);\n\n  setGlobal(global);\n});\n\naddActionHandler('toggleForum', async (global, actions, payload): Promise<void> => {\n  const { chatId, isEnabled, tabId = getCurrentTabId() } = payload;\n\n  const chat = await ensureIsSuperGroup(global, actions, chatId, tabId);\n  if (!chat) {\n    return;\n  }\n\n  let result: true | undefined;\n  try {\n    result = await callApi('toggleForum', { chat, isEnabled });\n  } catch (error) {\n    if ((error as ApiError).message.startsWith('A wait of')) {\n      actions.showNotification({ message: langProvider.oldTranslate('FloodWait'), tabId });\n    } else {\n      actions.showDialog({ data: { ...(error as ApiError), hasErrorKey: true }, tabId });\n    }\n  }\n\n  if (result) {\n    global = getGlobal();\n    global = updateChat(global, chat.id, { isForum: isEnabled });\n    setGlobal(global);\n\n    if (!isEnabled) {\n      actions.closeForumPanel({ tabId });\n    } else {\n      actions.openForumPanel({ chatId: chat.id, tabId });\n    }\n  }\n});\n\naddActionHandler('toggleParticipantsHidden', async (global, actions, payload): Promise<void> => {\n  const { chatId, isEnabled } = payload;\n  const chat = selectChat(global, chatId);\n  if (!chat) {\n    return;\n  }\n\n  const prevIsEnabled = selectChatFullInfo(global, chat.id)?.areParticipantsHidden;\n  global = updateChatFullInfo(global, chatId, { areParticipantsHidden: isEnabled });\n  setGlobal(global);\n\n  const result = await callApi('toggleParticipantsHidden', { chat, isEnabled });\n\n  if (!result && prevIsEnabled !== undefined) {\n    global = getGlobal();\n    global = updateChatFullInfo(global, chatId, { areParticipantsHidden: prevIsEnabled });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('createTopic', async (global, actions, payload): Promise<void> => {\n  const {\n    chatId, title, iconColor, iconEmojiId,\n    tabId = getCurrentTabId(),\n  } = payload;\n  const chat = selectChat(global, chatId);\n  if (!chat) return;\n\n  if (selectTabState(global, tabId).createTopicPanel) {\n    global = updateTabState(global, {\n      createTopicPanel: {\n        chatId,\n        isLoading: true,\n      },\n    }, tabId);\n    setGlobal(global);\n  }\n\n  const topicId = await callApi('createTopic', {\n    chat, title, iconColor, iconEmojiId,\n  });\n  if (topicId) {\n    actions.openThread({\n      chatId, threadId: topicId, shouldReplaceHistory: true, tabId,\n    });\n  }\n  actions.closeCreateTopicPanel({ tabId });\n});\n\naddActionHandler('deleteTopic', async (global, actions, payload): Promise<void> => {\n  const { chatId, topicId } = payload;\n  const chat = selectChat(global, chatId);\n  if (!chat) return;\n\n  await callApi('deleteTopic', { chat, topicId });\n\n  global = getGlobal();\n  global = deleteTopic(global, chatId, topicId);\n  setGlobal(global);\n});\n\naddActionHandler('editTopic', async (global, actions, payload): Promise<void> => {\n  const {\n    chatId, topicId, tabId = getCurrentTabId(), ...rest\n  } = payload;\n  const chat = selectChat(global, chatId);\n  const topic = chat?.topics?.[topicId];\n  if (!chat || !topic) return;\n\n  if (selectTabState(global, tabId).editTopicPanel) {\n    global = updateTabState(global, {\n      editTopicPanel: {\n        chatId,\n        topicId,\n        isLoading: true,\n      },\n    }, tabId);\n    setGlobal(global);\n  }\n\n  const result = await callApi('editTopic', { chat, topicId, ...rest });\n  if (!result) return;\n\n  global = getGlobal();\n  global = updateTopic(global, chatId, topicId, rest);\n  setGlobal(global);\n\n  actions.closeEditTopicPanel({ tabId });\n});\n\naddActionHandler('toggleTopicPinned', (global, actions, payload): ActionReturnType => {\n  const {\n    chatId, topicId, isPinned, tabId = getCurrentTabId(),\n  } = payload;\n\n  const { topicsPinnedLimit } = global.appConfig || {};\n  const chat = selectChat(global, chatId);\n  if (!chat || !chat.topics || !topicsPinnedLimit) return;\n\n  if (isPinned && Object.values(chat.topics).filter((topic) => topic.isPinned).length >= topicsPinnedLimit) {\n    actions.showNotification({\n      message: langProvider.oldTranslate('LimitReachedPinnedTopics', topicsPinnedLimit, 'i'),\n      tabId,\n    });\n    return;\n  }\n\n  void callApi('togglePinnedTopic', { chat, topicId, isPinned });\n});\n\naddActionHandler('checkChatlistInvite', async (global, actions, payload): Promise<void> => {\n  const { slug, tabId = getCurrentTabId() } = payload;\n\n  const result = await callApi('checkChatlistInvite', { slug });\n  if (!result) {\n    actions.showNotification({\n      message: langProvider.oldTranslate('lng_group_invite_bad_link'),\n      tabId,\n    });\n    return;\n  }\n\n  global = getGlobal();\n\n  global = addUsers(global, buildCollectionByKey(result.users, 'id'));\n  global = addChats(global, buildCollectionByKey(result.chats, 'id'));\n\n  global = updateTabState(global, {\n    chatlistModal: {\n      invite: result.invite,\n    },\n  }, tabId);\n\n  setGlobal(global);\n});\n\naddActionHandler('joinChatlistInvite', async (global, actions, payload): Promise<void> => {\n  const { invite, peerIds, tabId = getCurrentTabId() } = payload;\n\n  const peers = peerIds.map((peerId) => selectChat(global, peerId)).filter(Boolean);\n  const notJoinedCount = peers.filter((peer) => peer.isNotJoined).length;\n\n  const folder = 'folderId' in invite ? selectChatFolder(global, invite.folderId) : undefined;\n  const folderTitle = 'title' in invite ? invite.title : folder?.title;\n\n  try {\n    const result = await callApi('joinChatlistInvite', { slug: invite.slug, peers });\n    if (!result) return;\n\n    actions.showNotification({\n      title: langProvider.oldTranslate(folder ? 'FolderLinkUpdatedTitle' : 'FolderLinkAddedTitle', folderTitle),\n      message: langProvider.oldTranslate('FolderLinkAddedSubtitle', notJoinedCount, 'i'),\n      tabId,\n    });\n  } catch (error) {\n    if ((error as ApiError).message === 'CHATLISTS_TOO_MUCH') {\n      actions.openLimitReachedModal({ limit: 'chatlistJoined', tabId });\n    } else {\n      actions.showDialog({ data: { ...(error as ApiError), hasErrorKey: true }, tabId });\n    }\n  }\n});\n\naddActionHandler('leaveChatlist', async (global, actions, payload): Promise<void> => {\n  const { folderId, peerIds, tabId = getCurrentTabId() } = payload;\n\n  const folder = selectChatFolder(global, folderId);\n\n  const peers = peerIds?.map((peerId) => selectChat(global, peerId)).filter(Boolean) || [];\n\n  const result = await callApi('leaveChatlist', { folderId, peers });\n\n  if (!result) return;\n\n  actions.showNotification({\n    title: langProvider.oldTranslate('FolderLinkDeletedTitle', folder.title),\n    message: langProvider.oldTranslate('FolderLinkDeletedSubtitle', peers.length, 'i'),\n    tabId,\n  });\n});\n\naddActionHandler('loadChatlistInvites', async (global, actions, payload): Promise<void> => {\n  const { folderId } = payload;\n\n  const result = await callApi('fetchChatlistInvites', { folderId });\n\n  if (!result) return;\n\n  global = getGlobal();\n\n  global = addUsers(global, buildCollectionByKey(result.users, 'id'));\n  global = addChats(global, buildCollectionByKey(result.chats, 'id'));\n  global = {\n    ...global,\n    chatFolders: {\n      ...global.chatFolders,\n      invites: {\n        ...global.chatFolders.invites,\n        [folderId]: result.invites,\n      },\n    },\n  };\n  setGlobal(global);\n});\n\naddActionHandler('createChatlistInvite', async (global, actions, payload): Promise<void> => {\n  const { folderId, tabId = getCurrentTabId() } = payload;\n\n  const folder = selectChatFolder(global, folderId);\n  if (!folder) return;\n\n  global = updateTabState(global, {\n    shareFolderScreen: {\n      ...selectTabState(global, tabId).shareFolderScreen!,\n      isLoading: true,\n    },\n  }, tabId);\n  setGlobal(global);\n\n  let result: { filter: ApiChatFolder; invite: ApiChatlistExportedInvite | undefined } | undefined;\n\n  try {\n    result = await callApi('createChalistInvite', {\n      folderId,\n      peers: folder.includedChatIds.concat(folder.pinnedChatIds || [])\n        .map((chatId) => selectChat(global, chatId) || selectUser(global, chatId)).filter(Boolean),\n    });\n  } catch (error) {\n    if (CHATLIST_LIMIT_ERROR_LIST.has((error as ApiError).message)) {\n      actions.openLimitReachedModal({ limit: 'chatlistInvites', tabId });\n      actions.requestNextSettingsScreen({ screen: SettingsScreens.Folders, tabId });\n    } else {\n      actions.showDialog({ data: { ...(error as ApiError), hasErrorKey: true }, tabId });\n    }\n  }\n\n  if (!result || !result.invite) return;\n\n  const { shareFolderScreen } = selectTabState(global, tabId);\n\n  if (!shareFolderScreen) return;\n\n  global = getGlobal();\n  global = {\n    ...global,\n    chatFolders: {\n      ...global.chatFolders,\n      byId: {\n        ...global.chatFolders.byId,\n        [folderId]: {\n          ...global.chatFolders.byId[folderId],\n          ...result.filter,\n        },\n      },\n      invites: {\n        ...global.chatFolders.invites,\n        [folderId]: [\n          ...(global.chatFolders.invites[folderId] || []),\n          result.invite,\n        ],\n      },\n    },\n  };\n  global = updateTabState(global, {\n    shareFolderScreen: {\n      ...shareFolderScreen,\n      url: result.invite.url,\n      isLoading: false,\n    },\n  }, tabId);\n  setGlobal(global);\n});\n\naddActionHandler('editChatlistInvite', async (global, actions, payload): Promise<void> => {\n  const {\n    folderId, peerIds, url, tabId = getCurrentTabId(),\n  } = payload;\n\n  const slug = url.split('/').pop();\n  if (!slug) return;\n\n  const peers = peerIds\n    .map((chatId) => selectChat(global, chatId) || selectUser(global, chatId)).filter(Boolean);\n\n  global = updateTabState(global, {\n    shareFolderScreen: {\n      ...selectTabState(global, tabId).shareFolderScreen!,\n      isLoading: true,\n    },\n  }, tabId);\n  setGlobal(global);\n\n  try {\n    const result = await callApi('editChatlistInvite', { folderId, slug, peers });\n\n    if (!result) {\n      return;\n    }\n\n    global = getGlobal();\n    global = {\n      ...global,\n      chatFolders: {\n        ...global.chatFolders,\n        invites: {\n          ...global.chatFolders.invites,\n          [folderId]: global.chatFolders.invites[folderId]?.map((invite) => {\n            if (invite.url === url) {\n              return result;\n            }\n            return invite;\n          }),\n        },\n      },\n    };\n    setGlobal(global);\n  } catch (error) {\n    actions.showDialog({ data: { ...(error as ApiError), hasErrorKey: true }, tabId });\n  } finally {\n    global = getGlobal();\n\n    global = updateTabState(global, {\n      shareFolderScreen: {\n        ...selectTabState(global, tabId).shareFolderScreen!,\n        isLoading: false,\n      },\n    }, tabId);\n    setGlobal(global);\n  }\n});\n\naddActionHandler('deleteChatlistInvite', async (global, actions, payload): Promise<void> => {\n  const { folderId, url } = payload;\n\n  const slug = url.split('/').pop();\n\n  if (!slug) return;\n\n  const result = await callApi('deleteChatlistInvite', { folderId, slug });\n\n  if (!result) return;\n\n  global = getGlobal();\n  global = {\n    ...global,\n    chatFolders: {\n      ...global.chatFolders,\n      invites: {\n        ...global.chatFolders.invites,\n        [folderId]: global.chatFolders.invites[folderId]?.filter((invite) => invite.url !== url),\n      },\n    },\n  };\n  setGlobal(global);\n});\n\naddActionHandler('openDeleteChatFolderModal', async (global, actions, payload): Promise<void> => {\n  const { folderId, isConfirmedForChatlist, tabId = getCurrentTabId() } = payload;\n  const folder = selectChatFolder(global, folderId);\n  if (!folder) return;\n\n  if (folder.isChatList && (!folder.hasMyInvites || isConfirmedForChatlist)) {\n    const suggestions = await callApi('fetchLeaveChatlistSuggestions', { folderId });\n    global = getGlobal();\n    global = updateTabState(global, {\n      chatlistModal: {\n        removal: {\n          folderId,\n          suggestedPeerIds: suggestions,\n        },\n      },\n    }, tabId);\n    setGlobal(global);\n    return;\n  }\n\n  global = updateTabState(global, {\n    deleteFolderDialogModal: folderId,\n  }, tabId);\n\n  setGlobal(global);\n});\n\naddActionHandler('updateChatDetectedLanguage', (global, actions, payload): ActionReturnType => {\n  const { chatId, detectedLanguage } = payload;\n\n  global = getGlobal();\n  global = updateChat(global, chatId, {\n    detectedLanguage,\n  });\n\n  return global;\n});\n\naddActionHandler('togglePeerTranslations', async (global, actions, payload): Promise<void> => {\n  const { chatId, isEnabled } = payload;\n  const chat = selectChat(global, chatId);\n  if (!chat) return;\n\n  const result = await callApi('togglePeerTranslations', { chat, isEnabled });\n\n  if (result === undefined) return;\n\n  global = getGlobal();\n  global = updatePeerFullInfo(global, chatId, {\n    isTranslationDisabled: isEnabled ? undefined : true,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setViewForumAsMessages', (global, actions, payload): ActionReturnType => {\n  const { chatId, isEnabled } = payload;\n\n  const chat = selectChat(global, chatId);\n  if (!chat?.isForum || chat.isForumAsMessages === isEnabled) {\n    return;\n  }\n\n  global = updateChat(global, chatId, { isForumAsMessages: isEnabled || undefined });\n  setGlobal(global);\n\n  void callApi('setViewForumAsMessages', { chat, isEnabled });\n});\n\naddActionHandler('loadChannelRecommendations', async (global, actions, payload): Promise<void> => {\n  const { chatId } = payload;\n  const chat = chatId ? selectChat(global, chatId) : undefined;\n\n  if (chatId && !chat) {\n    return;\n  }\n\n  if (!chatId) {\n    const similarChannelIds = selectSimilarChannelIds(global, GLOBAL_SUGGESTED_CHANNELS_ID);\n    if (similarChannelIds) return; // Already cached\n  }\n\n  const result = await callApi('fetchChannelRecommendations', {\n    chat,\n  });\n\n  if (!result) {\n    return;\n  }\n\n  const { similarChannels, count } = result;\n\n  const chatsById = buildCollectionByKey(similarChannels, 'id');\n\n  global = getGlobal();\n  global = addChats(global, chatsById);\n  global = addSimilarChannels(global, chatId || GLOBAL_SUGGESTED_CHANNELS_ID, Object.keys(chatsById), count);\n  setGlobal(global);\n});\n\naddActionHandler('toggleChannelRecommendations', (global, actions, payload): ActionReturnType => {\n  const { chatId } = payload;\n  const chat = selectChat(global, chatId);\n\n  if (!chat) {\n    return;\n  }\n\n  global = toggleSimilarChannels(global, chatId);\n  setGlobal(global);\n});\n\naddActionHandler('resolveBusinessChatLink', async (global, actions, payload): Promise<void> => {\n  const { slug, tabId = getCurrentTabId() } = payload;\n  const result = await callApi('resolveBusinessChatLink', { slug });\n  if (!result) {\n    actions.showNotification({\n      message: langProvider.oldTranslate('BusinessLink.ErrorExpired'),\n      tabId,\n    });\n    return;\n  }\n\n  const { users, chats, chatLink } = result;\n\n  global = getGlobal();\n  global = addUsers(global, buildCollectionByKey(users, 'id'));\n  global = addChats(global, buildCollectionByKey(chats, 'id'));\n  setGlobal(global);\n\n  actions.openChatWithDraft({\n    chatId: chatLink.chatId,\n    text: chatLink.text,\n    tabId,\n  });\n});\n\naddActionHandler('requestCollectibleInfo', async (global, actions, payload): Promise<void> => {\n  const {\n    type, collectible, peerId, tabId = getCurrentTabId(),\n  } = payload;\n\n  let inputCollectible;\n  if (type === 'phone') {\n    inputCollectible = { phone: collectible };\n  }\n  if (type === 'username') {\n    inputCollectible = { username: collectible };\n  }\n  if (!inputCollectible) return;\n\n  const result = await callApi('fetchCollectionInfo', inputCollectible);\n  if (!result) {\n    copyTextToClipboard(collectible);\n    return;\n  }\n\n  global = getGlobal();\n  global = updateTabState(global, {\n    collectibleInfoModal: {\n      ...result,\n      type,\n      collectible,\n      peerId,\n    },\n  }, tabId);\n  setGlobal(global);\n});\n\nasync function loadChats(\n  listType: ChatListType,\n  offsetId?: string,\n  offsetDate?: number,\n  shouldReplace = false,\n  isFullDraftSync?: boolean,\n) {\n  // eslint-disable-next-line eslint-multitab-tt/no-immediate-global\n  let global = getGlobal();\n  let lastLocalServiceMessageId = selectLastServiceNotification(global)?.id;\n  const result = listType === 'saved' ? await callApi('fetchSavedChats', {\n    limit: CHAT_LIST_LOAD_SLICE,\n    offsetDate,\n    withPinned: shouldReplace,\n  }) : await callApi('fetchChats', {\n    limit: CHAT_LIST_LOAD_SLICE,\n    offsetDate,\n    archived: listType === 'archived',\n    withPinned: shouldReplace,\n    lastLocalServiceMessageId,\n  });\n\n  if (!result) {\n    return;\n  }\n\n  const { chatIds } = result;\n\n  if (chatIds.length > 0 && chatIds[0] === offsetId) {\n    chatIds.shift();\n  }\n\n  global = getGlobal();\n  lastLocalServiceMessageId = selectLastServiceNotification(global)?.id;\n\n  if (shouldReplace) {\n    if (listType === 'active') {\n      // Always include service notifications chat\n      if (!chatIds.includes(SERVICE_NOTIFICATIONS_USER_ID)) {\n        const result2 = await callApi('fetchChat', {\n          type: 'user',\n          user: SERVICE_NOTIFICATIONS_USER_MOCK,\n        });\n\n        global = getGlobal();\n\n        const notificationsChat = result2 && selectChat(global, result2.chatId);\n        if (notificationsChat) {\n          chatIds.unshift(notificationsChat.id);\n          result.chats.unshift(notificationsChat);\n          if (lastLocalServiceMessageId) {\n            result.lastMessageByChatId[notificationsChat.id] = lastLocalServiceMessageId;\n          }\n        }\n      }\n\n      const tabStates = Object.values(global.byTabId);\n      const topArchivedChats = getOrderedIds(ARCHIVED_FOLDER_ID)\n        ?.slice(0, GLOBAL_STATE_CACHE_ARCHIVED_CHAT_LIST_LIMIT)\n        .map((chatId) => selectChat(global, chatId))\n        .filter(Boolean);\n      const visibleChats = tabStates.flatMap(({ id: tabId }) => {\n        const currentChat = selectCurrentChat(global, tabId);\n        return currentChat ? [currentChat] : [];\n      });\n      const chatsToSave = visibleChats.concat(topArchivedChats || []);\n\n      const visibleUsers = tabStates.flatMap(({ id: tabId }) => {\n        return selectVisibleUsers(global, tabId) || [];\n      });\n\n      if (global.currentUserId && global.users.byId[global.currentUserId]) {\n        visibleUsers.push(global.users.byId[global.currentUserId]);\n      }\n\n      global = replaceUsers(global, buildCollectionByKey(visibleUsers.concat(result.users), 'id'));\n      global = replaceUserStatuses(global, result.userStatusesById);\n      global = replaceChats(global, buildCollectionByKey(chatsToSave.concat(result.chats), 'id'));\n      global = replaceChatListIds(global, listType, chatIds);\n    } else {\n      // Archived and Saved\n      global = addUsers(global, buildCollectionByKey(result.users, 'id'));\n      global = addUserStatuses(global, result.userStatusesById);\n      global = updateChats(global, buildCollectionByKey(result.chats, 'id'));\n      global = replaceChatListIds(global, listType, chatIds);\n    }\n  } else {\n    const newChats = buildCollectionByKey(result.chats, 'id');\n\n    global = addUsers(global, buildCollectionByKey(result.users, 'id'));\n    global = addUserStatuses(global, result.userStatusesById);\n    global = updateChats(global, newChats);\n    global = updateChatListIds(global, listType, chatIds);\n  }\n\n  global = updateChatListSecondaryInfo(global, listType, result);\n  global = addMessages(global, result.messages);\n  global = updateChatsLastMessageId(global, result.lastMessageByChatId, listType);\n\n  const idsToUpdateDraft = isFullDraftSync ? result.chatIds : Object.keys(result.draftsById);\n  idsToUpdateDraft.forEach((chatId) => {\n    const draft = result.draftsById[chatId];\n    const thread = selectThread(global, chatId, MAIN_THREAD_ID);\n\n    if (!draft && !thread) return;\n\n    if (!selectDraft(global, chatId, MAIN_THREAD_ID)?.isLocal) {\n      global = replaceThreadParam(\n        global, chatId, MAIN_THREAD_ID, 'draft', draft,\n      );\n    }\n  });\n\n  if ((chatIds.length === 0 || chatIds.length === result.totalChatCount) && !global.chats.isFullyLoaded[listType]) {\n    global = {\n      ...global,\n      chats: {\n        ...global.chats,\n        isFullyLoaded: {\n          ...global.chats.isFullyLoaded,\n          [listType]: true,\n        },\n      },\n    };\n  }\n\n  setGlobal(global);\n}\n\nexport async function loadFullChat<T extends GlobalState>(\n  global: T, actions: RequiredGlobalActions, chat: ApiChat,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const result = await callApi('fetchFullChat', chat);\n  if (!result) {\n    return undefined;\n  }\n\n  const {\n    chats, users, userStatusesById, fullInfo, groupCall, membersCount, isForumAsMessages,\n  } = result;\n\n  global = getGlobal();\n  global = addUsers(global, buildCollectionByKey(users, 'id'));\n  global = updateChats(global, buildCollectionByKey(chats, 'id'));\n\n  if (userStatusesById) {\n    global = addUserStatuses(global, userStatusesById);\n  }\n\n  if (groupCall) {\n    const existingGroupCall = selectGroupCall(global, groupCall.id!);\n    global = updateGroupCall(\n      global,\n      groupCall.id!,\n      omit(groupCall, ['connectionState', 'isLoaded']),\n      undefined,\n      existingGroupCall ? undefined : groupCall.participantsCount,\n    );\n  }\n\n  if (membersCount !== undefined) {\n    global = updateChat(global, chat.id, { membersCount });\n  }\n  if (chat.isForum) {\n    global = updateChat(global, chat.id, { isForumAsMessages });\n  }\n  global = replaceChatFullInfo(global, chat.id, fullInfo);\n  setGlobal(global);\n\n  const stickerSet = fullInfo.stickerSet;\n  const localSet = stickerSet && selectStickerSet(global, stickerSet);\n  if (stickerSet && !localSet) {\n    actions.loadStickers({\n      stickerSetInfo: {\n        id: stickerSet.id,\n        accessHash: stickerSet.accessHash,\n      },\n      tabId,\n    });\n  }\n\n  const emojiSet = fullInfo.emojiSet;\n  const localEmojiSet = emojiSet && selectStickerSet(global, emojiSet);\n  if (emojiSet && !localEmojiSet) {\n    actions.loadStickers({\n      stickerSetInfo: {\n        id: emojiSet.id,\n        accessHash: emojiSet.accessHash,\n      },\n      tabId,\n    });\n  }\n\n  return result;\n}\n\nexport async function migrateChat<T extends GlobalState>(\n  global: T, actions: RequiredGlobalActions, chat: ApiChat,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n): Promise<ApiChat | undefined> {\n  try {\n    const supergroup = await callApi('migrateChat', chat);\n\n    return supergroup;\n  } catch (error) {\n    if ((error as ApiError).message === 'CHANNELS_TOO_MUCH') {\n      actions.openLimitReachedModal({ limit: 'channels', tabId });\n    } else {\n      actions.showDialog({ data: { ...(error as ApiError), hasErrorKey: true }, tabId });\n    }\n\n    return undefined;\n  }\n}\n\nexport async function fetchChatByUsername<T extends GlobalState>(\n  global: T,\n  username: string,\n) {\n  global = getGlobal();\n  const localChat = selectChatByUsername(global, username);\n  if (localChat && !localChat.isMin) {\n    return localChat;\n  }\n\n  const { chat, user } = await callApi('getChatByUsername', username) || {};\n  if (!chat) {\n    return undefined;\n  }\n\n  global = getGlobal();\n  global = updateChat(global, chat.id, chat);\n  if (user) {\n    global = updateUser(global, user.id, user);\n  }\n\n  setGlobal(global);\n\n  return chat;\n}\n\nexport async function fetchChatByPhoneNumber<T extends GlobalState>(global: T, phoneNumber: string) {\n  global = getGlobal();\n  const localUser = selectUserByPhoneNumber(global, phoneNumber);\n  if (localUser && !localUser.isMin) {\n    return selectChat(global, localUser.id);\n  }\n\n  const { chat, user } = await callApi('getChatByPhoneNumber', phoneNumber) || {};\n  if (!chat) {\n    return undefined;\n  }\n\n  global = getGlobal();\n  global = updateChat(global, chat.id, chat);\n\n  if (user) {\n    global = updateUser(global, user.id, user);\n  }\n  setGlobal(global);\n\n  return chat;\n}\n\nasync function getAttachBotOrNotify<T extends GlobalState>(\n  global: T, actions: RequiredGlobalActions, username: string,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const chat = await fetchChatByUsername(global, username);\n  if (!chat) return undefined;\n\n  global = getGlobal();\n  const user = selectUser(global, chat.id);\n  if (!user) return undefined;\n\n  const isBot = isUserBot(user);\n  if (!isBot) return undefined;\n  const result = await callApi('loadAttachBot', {\n    bot: user,\n  });\n\n  global = getGlobal();\n  if (!result) {\n    actions.showNotification({\n      message: langProvider.oldTranslate('WebApp.AddToAttachmentUnavailableError'),\n      tabId,\n    });\n\n    return undefined;\n  }\n\n  global = addUsers(global, buildCollectionByKey(result.users, 'id'));\n  setGlobal(global);\n\n  return result.bot;\n}\n\nasync function openChatByUsername<T extends GlobalState>(\n  global: T,\n  actions: RequiredGlobalActions,\n  params: {\n    username: string;\n    threadId?: ThreadId;\n    channelPostId?: number;\n    startParam?: string;\n    startAttach?: string;\n    attach?: string;\n    text?: string;\n  },\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const {\n    username, threadId, channelPostId, startParam, startAttach, attach, text,\n  } = params;\n  global = getGlobal();\n  const currentChat = selectCurrentChat(global, tabId);\n\n  // Attach in the current chat\n  if (startAttach !== undefined && !attach) {\n    const bot = await getAttachBotOrNotify(global, actions, username, tabId);\n\n    if (!bot) return;\n\n    actions.callAttachBot({\n      bot,\n      chatId: currentChat?.id || bot.id,\n      startParam: startAttach,\n      tabId,\n    });\n\n    return;\n  }\n\n  const isCurrentChat = currentChat?.usernames?.some((c) => c.username === username);\n\n  if (!isCurrentChat) {\n    // Open temporary empty chat to make the click response feel faster\n    actions.openChat({ id: TMP_CHAT_ID, tabId });\n  }\n\n  const chat = await fetchChatByUsername(global, username);\n  if (!chat) {\n    if (!isCurrentChat) {\n      actions.openPreviousChat({ tabId });\n      actions.showNotification({ message: 'User does not exist', tabId });\n    }\n\n    return;\n  }\n\n  if (channelPostId) {\n    actions.focusMessage({\n      chatId: chat.id, threadId, messageId: channelPostId, tabId,\n    });\n  } else if (!isCurrentChat) {\n    actions.openThread({ chatId: chat.id, threadId: threadId ?? MAIN_THREAD_ID, tabId });\n  }\n\n  if (startParam) {\n    actions.startBot({ botId: chat.id, param: startParam });\n  }\n\n  if (attach) {\n    global = getGlobal();\n    openAttachMenuFromLink(global, actions, chat.id, attach, startAttach, tabId);\n  }\n\n  if (text) {\n    actions.openChatWithDraft({ chatId: chat.id, text: { text }, tabId });\n  }\n}\n\nasync function openAttachMenuFromLink<T extends GlobalState>(\n  global: T,\n  actions: RequiredGlobalActions,\n  chatId: string,\n  attach: string,\n  startAttach?: string | boolean,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  global = getGlobal();\n  const bot = await getAttachBotOrNotify(global, actions, attach, tabId);\n  if (!bot) return;\n\n  actions.callAttachBot({\n    bot,\n    chatId,\n    ...(typeof startAttach === 'string' && { startParam: startAttach }),\n    tabId,\n  });\n}\n\nexport async function ensureIsSuperGroup<T extends GlobalState>(\n  global: T,\n  actions: RequiredGlobalActions,\n  chatId: string,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  const chat = selectChat(global, chatId);\n  if (!chat || !isChatBasicGroup(chat)) {\n    return chat;\n  }\n\n  const newChat = await migrateChat(global, actions, chat, tabId);\n  if (!newChat) {\n    return undefined;\n  }\n\n  actions.loadFullChat({ chatId: newChat.id, tabId });\n  actions.openChat({ id: newChat.id, tabId });\n\n  return newChat;\n}\n","import type { ApiGroupCall } from '../../../api/types';\nimport type { RequiredGlobalActions } from '../../index';\nimport type {\n  ActionReturnType, CallSound, GlobalState, TabArgs,\n} from '../../types';\n\nimport { requestNextMutation } from '../../../lib/fasterdom/fasterdom';\nimport { copyTextToClipboard } from '../../../util/clipboard';\nimport { getCurrentTabId } from '../../../util/establishMultitabRole';\nimport { buildCollectionByKey, omit } from '../../../util/iteratees';\nimport * as langProvider from '../../../util/oldLangProvider';\nimport safePlay from '../../../util/safePlay';\nimport { ARE_CALLS_SUPPORTED } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api/gramjs';\nimport { getMainUsername } from '../../helpers';\nimport {\n  addActionHandler, getGlobal,\n  setGlobal,\n} from '../../index';\nimport { addChats, addUsers } from '../../reducers';\nimport { updateGroupCall } from '../../reducers/calls';\nimport { updateTabState } from '../../reducers/tabs';\nimport {\n  selectChat, selectChatFullInfo, selectTabState, selectUser,\n} from '../../selectors';\nimport { selectActiveGroupCall, selectChatGroupCall, selectGroupCall } from '../../selectors/calls';\nimport { fetchChatByUsername, loadFullChat } from '../api/chats';\n\n// This is a tiny MP3 file that is silent - retrieved from https://bigsoundbank.com and then modified\n// eslint-disable-next-line max-len\nconst silentSound = 'data:audio/mpeg;base64,SUQzBAAAAAABEVRYWFgAAAAtAAADY29tbWVudABCaWdTb3VuZEJhbmsuY29tIC8gTGFTb25vdGhlcXVlLm9yZwBURU5DAAAAHQAAA1N3aXRjaCBQbHVzIMKpIE5DSCBTb2Z0d2FyZQBUSVQyAAAABgAAAzIyMzUAVFNTRQAAAA8AAANMYXZmNTcuODMuMTAwAAAAAAAAAAAAAAD/80DEAAAAA0gAAAAATEFNRTMuMTAwVVVVVVVVVVVVVUxBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/zQsRbAAADSAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/zQMSkAAADSAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV';\n\nlet audioElement: HTMLAudioElement | undefined;\nlet audioContext: AudioContext | undefined;\nlet sounds: Record<CallSound, HTMLAudioElement>;\n\n// Workaround: this function is called once on the first user interaction.\n// After that, it will be possible to play the notification on iOS without problems.\n// https://rosswintle.uk/2019/01/skirting-the-ios-safari-audio-auto-play-policy-for-ui-sound-effects/\nexport function initializeSoundsForSafari() {\n  initializeSounds();\n\n  return Promise.all(Object.values(sounds).map((sound) => {\n    const prevSrc = sound.src;\n    sound.src = silentSound;\n    sound.muted = true;\n    sound.volume = 0.0001;\n    return sound.play()\n      .then(() => {\n        sound.pause();\n        sound.volume = 1;\n        sound.currentTime = 0;\n        sound.muted = false;\n\n        requestNextMutation(() => {\n          sound.src = prevSrc;\n        });\n      });\n  }));\n}\n\nexport function initializeSounds() {\n  if (sounds) {\n    return;\n  }\n  const joinAudio = new Audio('./voicechat_join.mp3');\n  const connectingAudio = new Audio('./voicechat_connecting.mp3');\n  connectingAudio.loop = true;\n  const leaveAudio = new Audio('./voicechat_leave.mp3');\n  const allowTalkAudio = new Audio('./voicechat_onallowtalk.mp3');\n  const busyAudio = new Audio('./call_busy.mp3');\n  const connectAudio = new Audio('./call_connect.mp3');\n  const endAudio = new Audio('./call_end.mp3');\n  const incomingAudio = new Audio('./call_incoming.mp3');\n  incomingAudio.loop = true;\n  const ringingAudio = new Audio('./call_ringing.mp3');\n  ringingAudio.loop = true;\n\n  sounds = {\n    join: joinAudio,\n    allowTalk: allowTalkAudio,\n    leave: leaveAudio,\n    connecting: connectingAudio,\n    incoming: incomingAudio,\n    end: endAudio,\n    connect: connectAudio,\n    busy: busyAudio,\n    ringing: ringingAudio,\n  };\n}\n\nasync function fetchGroupCall<T extends GlobalState>(global: T, groupCall: Partial<ApiGroupCall>) {\n  const result = await callApi('getGroupCall', {\n    call: groupCall,\n  });\n\n  if (!result) return undefined;\n\n  global = getGlobal();\n\n  const existingGroupCall = selectGroupCall(global, groupCall.id!);\n\n  global = updateGroupCall(\n    global,\n    groupCall.id!,\n    omit(result.groupCall, ['connectionState']),\n    undefined,\n    existingGroupCall?.isLoaded ? undefined : result.groupCall.participantsCount,\n  );\n  global = addUsers(global, buildCollectionByKey(result.users, 'id'));\n  global = addChats(global, buildCollectionByKey(result.chats, 'id'));\n\n  setGlobal(global);\n\n  return result.groupCall;\n}\n\nasync function fetchGroupCallParticipants<T extends GlobalState>(\n  global: T,\n  groupCall: Partial<ApiGroupCall>, nextOffset?: string,\n) {\n  const result = await callApi('fetchGroupCallParticipants', {\n    call: groupCall as ApiGroupCall,\n    offset: nextOffset,\n  });\n\n  if (!result) return;\n\n  global = getGlobal();\n\n  global = addUsers(global, buildCollectionByKey(result.users, 'id'));\n  global = addChats(global, buildCollectionByKey(result.chats, 'id'));\n\n  setGlobal(global);\n}\n\naddActionHandler('toggleGroupCallPanel', (global, actions, payload): ActionReturnType => {\n  const { force, tabId = getCurrentTabId() } = payload || {};\n  return updateTabState(global, {\n    isCallPanelVisible: 'force' in (payload || {}) ? force : !selectTabState(global, tabId).isCallPanelVisible,\n  }, tabId);\n});\n\naddActionHandler('subscribeToGroupCallUpdates', async (global, actions, payload): Promise<void> => {\n  const { subscribed, id } = payload!;\n  const groupCall = selectGroupCall(global, id);\n\n  if (!groupCall) return;\n\n  if (subscribed) {\n    await fetchGroupCall(global, groupCall);\n    global = getGlobal();\n    await fetchGroupCallParticipants(global, groupCall);\n  }\n\n  await callApi('toggleGroupCallStartSubscription', {\n    subscribed,\n    call: groupCall,\n  });\n});\n\naddActionHandler('createGroupCall', async (global, actions, payload): Promise<void> => {\n  const { chatId, tabId = getCurrentTabId() } = payload;\n\n  const chat = selectChat(global, chatId);\n  if (!chat) {\n    return;\n  }\n\n  const result = await callApi('createGroupCall', {\n    peer: chat,\n  });\n\n  if (!result) return;\n\n  global = getGlobal();\n  global = updateGroupCall(global, result.id, {\n    ...result,\n    chatId,\n  });\n  setGlobal(global);\n\n  actions.requestMasterAndJoinGroupCall({ id: result.id, accessHash: result.accessHash, tabId });\n});\n\naddActionHandler('createGroupCallInviteLink', async (global, actions, payload): Promise<void> => {\n  const { tabId = getCurrentTabId() } = payload || {};\n  const groupCall = selectActiveGroupCall(global);\n\n  if (!groupCall || !groupCall.chatId) {\n    return;\n  }\n\n  const chat = selectChat(global, groupCall.chatId);\n  if (!chat) {\n    return;\n  }\n\n  const hasPublicUsername = Boolean(getMainUsername(chat));\n\n  let inviteLink = selectChatFullInfo(global, chat.id)?.inviteLink;\n  if (hasPublicUsername) {\n    inviteLink = await callApi('exportGroupCallInvite', {\n      call: groupCall,\n      canSelfUnmute: false,\n    });\n  }\n\n  if (!inviteLink) {\n    return;\n  }\n\n  copyTextToClipboard(inviteLink);\n  actions.showNotification({\n    message: 'Link copied to clipboard',\n    tabId,\n  });\n});\n\naddActionHandler('joinVoiceChatByLink', async (global, actions, payload): Promise<void> => {\n  const { username, inviteHash, tabId = getCurrentTabId() } = payload;\n\n  const chat = await fetchChatByUsername(global, username);\n\n  if (!chat) {\n    actions.showNotification({ message: langProvider.oldTranslate('NoUsernameFound'), tabId });\n    return;\n  }\n\n  global = getGlobal();\n  const full = await loadFullChat(global, actions, chat, tabId);\n\n  if (full?.groupCall) {\n    actions.requestMasterAndJoinGroupCall({\n      id: full.groupCall.id,\n      accessHash: full.groupCall.accessHash,\n      inviteHash,\n      tabId,\n    });\n  }\n});\n\naddActionHandler('requestMasterAndJoinGroupCall', (global, actions, payload): ActionReturnType => {\n  actions.requestMasterAndCallAction({\n    action: 'joinGroupCall',\n    payload,\n    tabId: payload.tabId || getCurrentTabId(),\n  });\n});\n\naddActionHandler('requestMasterAndAcceptCall', (global, actions, payload): ActionReturnType => {\n  actions.requestMasterAndCallAction({\n    action: 'acceptCall',\n    payload: undefined,\n    tabId: payload?.tabId || getCurrentTabId(),\n  });\n});\n\naddActionHandler('joinGroupCall', async (global, actions, payload): Promise<void> => {\n  const {\n    chatId, id, accessHash, inviteHash, tabId = getCurrentTabId(),\n  } = payload;\n\n  if (!ARE_CALLS_SUPPORTED) {\n    actions.showNotification({\n      message: \"Sorry, your browser doesn't support group calls\",\n      tabId,\n    });\n    return;\n  }\n\n  if (global.phoneCall) {\n    actions.toggleGroupCallPanel({ tabId });\n    return;\n  }\n\n  createAudioElement();\n\n  initializeSounds();\n  global = getGlobal();\n  void checkNavigatorUserMediaPermissions(global, actions, true, tabId);\n\n  const { groupCalls: { activeGroupCallId } } = global;\n  let groupCall = id ? selectGroupCall(global, id) : selectChatGroupCall(global, chatId!);\n\n  if (groupCall && groupCall.id === activeGroupCallId) {\n    actions.toggleGroupCallPanel({ tabId });\n    return;\n  }\n\n  if (activeGroupCallId) {\n    if ('leaveGroupCall' in actions) {\n      actions.leaveGroupCall({\n        rejoin: payload,\n        tabId,\n      });\n    }\n    return;\n  }\n\n  if (groupCall && activeGroupCallId === groupCall.id) {\n    actions.toggleGroupCallPanel({ tabId });\n    return;\n  }\n\n  if (!groupCall && (!id || !accessHash) && chatId) {\n    const chat = selectChat(global, chatId);\n\n    if (!chat) return;\n\n    await loadFullChat(global, actions, chat, tabId);\n    global = getGlobal();\n    groupCall = selectChatGroupCall(global, chatId);\n  } else if (!groupCall && id && accessHash) {\n    groupCall = await fetchGroupCall(global, {\n      id,\n      accessHash,\n    });\n  }\n\n  if (!groupCall) return;\n\n  global = getGlobal();\n  global = updateGroupCall(\n    global,\n    groupCall.id,\n    {\n      ...groupCall,\n      inviteHash,\n    },\n    undefined,\n    groupCall.participantsCount + 1,\n  );\n  global = {\n    ...global,\n    groupCalls: {\n      ...global.groupCalls,\n      activeGroupCallId: groupCall.id,\n    },\n  };\n\n  setGlobal(global);\n\n  actions.toggleGroupCallPanel({ force: false, tabId });\n});\n\naddActionHandler('playGroupCallSound', (global, actions, payload): ActionReturnType => {\n  const { sound } = payload!;\n\n  if (!sounds[sound]) {\n    return;\n  }\n\n  const doPlay = () => {\n    if (sound !== 'connecting') {\n      sounds.connecting.pause();\n    }\n    if (sound !== 'incoming') {\n      sounds.incoming.pause();\n    }\n    if (sound !== 'ringing') {\n      sounds.ringing.pause();\n    }\n    safePlay(sounds[sound]);\n  };\n\n  doPlay();\n});\n\naddActionHandler('loadMoreGroupCallParticipants', (global): ActionReturnType => {\n  const groupCall = selectActiveGroupCall(global);\n  if (!groupCall) {\n    return;\n  }\n\n  void fetchGroupCallParticipants(global, groupCall, groupCall.nextOffset);\n});\n\naddActionHandler('requestMasterAndRequestCall', (global, actions, payload): ActionReturnType => {\n  actions.requestMasterAndCallAction({\n    action: 'requestCall',\n    payload,\n    tabId: payload.tabId || getCurrentTabId(),\n  });\n});\n\naddActionHandler('requestCall', (global, actions, payload): ActionReturnType => {\n  const { userId, isVideo, tabId = getCurrentTabId() } = payload;\n\n  if (global.phoneCall) {\n    actions.toggleGroupCallPanel({ tabId });\n    return;\n  }\n\n  const user = selectUser(global, userId);\n\n  if (!user) {\n    return;\n  }\n\n  initializeSounds();\n  global = getGlobal();\n  void checkNavigatorUserMediaPermissions(global, actions, isVideo, tabId);\n\n  global = getGlobal();\n  global = {\n    ...global,\n    phoneCall: {\n      id: '',\n      state: 'requesting',\n      participantId: userId,\n      isVideo,\n      adminId: global.currentUserId,\n    },\n  };\n  setGlobal(global);\n\n  actions.toggleGroupCallPanel({ force: false, tabId });\n});\n\nfunction createAudioContext() {\n  return (new (window.AudioContext || (window as any).webkitAudioContext)());\n}\n\nconst silence = (ctx: AudioContext) => {\n  const oscillator = ctx.createOscillator();\n  const dst = oscillator.connect(ctx.createMediaStreamDestination());\n  oscillator.start();\n  return new MediaStream([Object.assign((dst as any).stream.getAudioTracks()[0], { enabled: false })]);\n};\n\nfunction createAudioElement() {\n  const ctx = createAudioContext();\n  audioElement = new Audio();\n  audioContext = ctx;\n  audioElement.srcObject = silence(ctx);\n  safePlay(audioElement);\n}\n\nexport function getGroupCallAudioElement() {\n  return audioElement;\n}\n\nexport function getGroupCallAudioContext() {\n  return audioContext;\n}\n\nexport function removeGroupCallAudioElement() {\n  audioElement?.pause();\n  audioContext = undefined;\n  audioElement = undefined;\n}\n\n// This method is used instead of a navigator.permissions.query to determine permission to use a microphone,\n// because Firefox does not have support for 'microphone' and 'camera' permissions\n// https://github.com/mozilla/standards-positions/issues/19#issuecomment-370158947\nexport function checkNavigatorUserMediaPermissions<T extends GlobalState>(\n  global: T,\n  actions: RequiredGlobalActions, isVideo?: boolean,\n  ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  if (isVideo) {\n    navigator.mediaDevices.getUserMedia({ video: true })\n      .then((stream) => {\n        if (stream.getVideoTracks().length === 0) {\n          actions.showNotification({\n            message: langProvider.oldTranslate('Call.Camera.Error'),\n            tabId,\n          });\n        } else {\n          stream.getTracks().forEach((track) => track.stop());\n          checkMicrophonePermission(global, actions, tabId);\n        }\n      })\n      .catch(() => {\n        actions.showNotification({\n          message: langProvider.oldTranslate('Call.Camera.Error'),\n          tabId,\n        });\n      });\n  } else {\n    checkMicrophonePermission(global, actions, tabId);\n  }\n}\n\nfunction checkMicrophonePermission<T extends GlobalState>(\n  global: T, actions: RequiredGlobalActions, ...[tabId = getCurrentTabId()]: TabArgs<T>\n) {\n  navigator.mediaDevices.getUserMedia({ audio: true })\n    .then((stream) => {\n      if (stream.getAudioTracks().length === 0) {\n        actions.showNotification({\n          message: langProvider.oldTranslate('RequestAcces.Error.HaveNotAccess.Call'),\n          tabId,\n        });\n      } else {\n        stream.getTracks().forEach((track) => track.stop());\n      }\n    })\n    .catch(() => {\n      actions.showNotification({\n        message: langProvider.oldTranslate('RequestAcces.Error.HaveNotAccess.Call'),\n        tabId,\n      });\n    });\n}\n","import type { ApiGroupCall } from '../../api/types';\nimport type { GroupCallParticipant } from '../../lib/secret-sauce';\nimport type { GlobalState } from '../types';\n\nimport { omit } from '../../util/iteratees';\nimport { selectChat } from '../selectors';\nimport { selectGroupCall } from '../selectors/calls';\nimport { updateChatFullInfo } from './chats';\n\nexport function updateGroupCall<T extends GlobalState>(\n  global: T,\n  groupCallId: string,\n  groupCallUpdate: Partial<ApiGroupCall>,\n  addToParticipantCount?: number,\n  resetParticipantCount?: number,\n): T {\n  const unfiltered = Object.values({\n    ...global.groupCalls.byId[groupCallId]?.participants,\n    ...groupCallUpdate.participants,\n  });\n  const filtered = unfiltered.filter(({ isLeft }) => !isLeft);\n  const participants = filtered.reduce((acc: Record<string, GroupCallParticipant>, el) => {\n    acc[el.id] = el;\n    return acc;\n  }, {});\n\n  return {\n    ...global,\n    groupCalls: {\n      ...global.groupCalls,\n      byId: {\n        ...global.groupCalls.byId,\n        [groupCallId]: {\n          ...global.groupCalls.byId[groupCallId],\n          ...omit(groupCallUpdate, ['participantsCount']),\n          ...(addToParticipantCount && {\n            participantsCount: global.groupCalls.byId[groupCallId].participantsCount + addToParticipantCount,\n          }),\n          ...(resetParticipantCount !== undefined && {\n            participantsCount: resetParticipantCount,\n          }),\n          participants,\n        },\n      },\n    },\n  };\n}\n\nexport function removeGroupCall<T extends GlobalState>(\n  global: T,\n  groupCallId: string,\n): T {\n  const groupCall = selectGroupCall(global, groupCallId);\n  if (groupCall && groupCall.chatId) {\n    const chat = selectChat(global, groupCall.chatId);\n    if (chat) {\n      global = updateChatFullInfo(global, groupCall.chatId, {\n        groupCallId: undefined,\n      });\n    }\n  }\n\n  return {\n    ...global,\n    groupCalls: {\n      ...global.groupCalls,\n      byId: {\n        ...omit(global.groupCalls.byId, [groupCallId.toString()]),\n      },\n    },\n  };\n}\n\nexport function updateActiveGroupCall<T extends GlobalState>(\n  global: T,\n  groupCallUpdate: Partial<ApiGroupCall>,\n  resetParticipantCount?: number,\n): T {\n  if (!global.groupCalls.activeGroupCallId) {\n    return global;\n  }\n\n  return updateGroupCall(global,\n    global.groupCalls.activeGroupCallId,\n    groupCallUpdate,\n    undefined,\n    resetParticipantCount);\n}\n\nexport function updateGroupCallParticipant<T extends GlobalState>(\n  global: T,\n  groupCallId: string,\n  userId: string,\n  participantUpdate: Partial<GroupCallParticipant>,\n  noUpdateCount = false,\n): T {\n  const groupCall = selectGroupCall(global, groupCallId);\n  if (!groupCall) {\n    return global;\n  }\n\n  return updateGroupCall(global, groupCallId, {\n    participants: {\n      ...groupCall.participants,\n      [userId]: {\n        ...groupCall.participants[userId],\n        ...participantUpdate,\n      },\n    },\n  }, participantUpdate.isLeft\n    ? (noUpdateCount ? 0 : -1)\n    : (groupCall.participants[userId] || noUpdateCount ? 0 : 1));\n}\n"],"names":["MAIN_THREAD_ID","ChatCreationProgress","ManagementProgress","NewChatMembersProgress","SettingsScreens","ALL_FOLDER_ID","ARCHIVED_FOLDER_ID","CHAT_LIST_LOAD_SLICE","DEBUG","GLOBAL_STATE_CACHE_ARCHIVED_CHAT_LIST_LIMIT","GLOBAL_SUGGESTED_CHANNELS_ID","RE_TG_LINK","SAVED_FOLDER_ID","SERVICE_NOTIFICATIONS_USER_ID","TME_WEB_DOMAINS","TMP_CHAT_ID","TOP_CHAT_MESSAGES_PRELOAD_LIMIT","TOPICS_SLICE","TOPICS_SLICE_SECOND_LOAD","copyTextToClipboard","formatShareText","parseChooseParameter","processDeepLink","isDeepLink","getCurrentTabId","getOrderedIds","buildCollectionByKey","omit","pick","isLocalMessageId","langProvider","debounce","pause","throttle","extractCurrentThemeParams","callApi","getIsSavedDialog","isChatArchived","isChatBasicGroup","isChatChannel","isChatSuperGroup","isUserBot","toChannelId","addActionHandler","getGlobal","setGlobal","addChatMembers","addChats","addMessages","addSimilarChannels","addUsers","addUserStatuses","deleteChatMessages","deleteTopic","leaveChat","removeChatFromChatLists","replaceChatFullInfo","replaceChatListIds","replaceChats","replaceThreadParam","replaceUsers","replaceUserStatuses","toggleSimilarChannels","updateChat","updateChatFullInfo","updateChatLastMessageId","updateChatListIds","updateChatListSecondaryInfo","updateChats","updateChatsLastMessageId","updateListedTopicIds","updateManagementProgress","updateMissingInvitedUsers","updatePeerFullInfo","updateThread","updateThreadInfo","updateTopic","updateTopics","updateUser","updateGroupCall","updateTabState","selectChat","selectChatByUsername","selectChatFolder","selectChatFullInfo","selectChatLastMessage","selectChatLastMessageId","selectChatListType","selectChatMessages","selectCurrentChat","selectCurrentMessageList","selectDraft","selectIsChatPinned","selectIsChatWithSelf","selectLastServiceNotification","selectSimilarChannelIds","selectStickerSet","selectSupportChat","selectTabState","selectThread","selectThreadInfo","selectUser","selectUserByPhoneNumber","selectVisibleUsers","selectGroupCall","selectCurrentLimit","TOP_CHAT_MESSAGES_PRELOAD_INTERVAL","INFINITE_LOOP_MARKER","SERVICE_NOTIFICATIONS_USER_MOCK","id","accessHash","type","isMin","phoneNumber","CHATLIST_LIMIT_ERROR_LIST","Set","runThrottledForLoadTopChats","cb","runDebouncedForLoadFullChat","global","actions","preloadedChatIds","i","currentChatIds","Object","values","byTabId","map","_ref","tabId","chatId","filter","Boolean","folderAllOrderedIds","nextChatId","find","includes","has","add","loadViewportMessages","threadId","abortChatRequests","abortChatRequestsForCurrentChat","newChatId","newThreadId","_len","arguments","length","_ref2","Array","_key","currentMessageList","currentChatId","currentThreadId","isChatOpened","isThreadOpened","reduce","_ref3","_ref4","accHasChatOpened","accHasThreadOpened","otherTabId","otherMessageList","isSameChat","isSameThread","shouldAbortChatRequests","undefined","payload","noForumTopicPanel","shouldReplaceHistory","shouldReplaceLast","processOpenChatOrThread","chat","hasUnreadMark","toggleChatUnread","isChatOnlySummary","user","requestChatUpdate","closeStoryViewer","closeStarsBalanceModal","otherParams","openThread","currentUserId","isComments","focusMessageId","loadingChatId","loadingThreadId","originalChat","openChat","isForum","originChannelId","originMessageId","threadInfo","thread","listedIds","Number","loadingThread","loadingMessageId","openPreviousChat","currentGlobal","result","messageId","showNotification","message","oldTranslate","users","chats","messages","isCommentsInfo","fromChannelId","fromMessageId","firstMessageId","focusMessage","onError","onLoaded","chatFullInfo","fullInfo","linkedChatId","listType","onReplace","shouldReplace","getOrderDate","date","creationDate","isFullyLoaded","console","error","connectionState","authState","listIds","oldestChat","byId","sort","chat1","chat2","loadChats","force","withPhotos","loadChat","loadFullChat","loadProfilePhotos","profileId","lastLocalMessage","isSavedDialog","limit","forEach","_ref5","tabChatId","muteUntil","isMuted","topicId","title","about","photo","memberIds","chatCreation","progress","InProgress","createdChannel","missingInvitedUsers","channel","missingUsers","Error","openLimitReachedModal","showDialog","data","hasErrorKey","channelId","Complete","userId","chatMessages","localMessageIds","keys","createdChat","err","folderId","folder","shouldBePinned","pinnedChatIds","includedChatIds","newPinnedIds","pinnedId","newIncludedChatIds","folderUpdate","isPinned","ids","orderedPinnedIds","saved","chatFolders","recommendedChatFolders","recommended","idsToRemove","idsToAdd","isLimitReached","some","includedId","concat","emoticon","orderedIds","maxId","Math","max","recommendedId","description","newFolder","newId","apiUpdate","requestNextSettingsScreen","foldersAction","_ref6","folderIds","unreadCount","lastTopicMessageId","topics","lastMessageId","lastReadInboxMessageId","hash","startAttach","attach","text","fetchChatByPhoneNumber","replace","openChatWithDraft","openAttachMenuFromLink","url","isProcessed","match","openChatByPhoneNumber","openChatByInvite","openStickerSet","joinVoiceChatByLink","openInvoice","processAttachBotParameters","checkChatlistInvite","openChatByUsername","openChatByUsernameAction","openStoryViewerByUsername","processBoostParameters","checkGiftCode","uri","URL","toLowerCase","startsWith","hostname","pathname","window","open","toString","hostParts","split","adaptedPathname","part1","part2","part3","part","decodeURI","params","fromEntries","searchParams","hasStartAttach","hasOwnProperty","hasStartApp","choose","storyId","hasBoost","substr","startattach","username","stickerSetInfo","shortName","slug","chatOrChannelPostId","commentId","comment","inviteHash","voicechat","livestream","c","isPrivate","usernameOrId","substring","startParam","startapp","start","startApp","originalParts","fetchChatByUsername","openBoostModal","webAppName","isWebApp","usernames","channelPostId","usernameChat","chatByUsername","theme","requestAppWebView","appName","botId","isEnabled","ensureIsSuperGroup","isPreHistoryHidden","bannedRights","updatedFullInfo","members","kickedMembers","isBanned","viewMessages","isUnblocked","m","adminRights","customTitle","chatAfterUpdate","adminMembersById","isDismissed","newAdminMembersById","remove","rest","Promise","all","avatarHash","profilePhoto","photosToDelete","nextPhoto","photos","push","newPhotos","p","toDelete","groups","addedById","group","forDiscussionIds","fullChat","activeChatFolder","maxFolders","isBlocked","requestedDraft","offset","membersCount","userStatusesById","setNewChatMembersDialogState","newChatMembersProgress","Loading","Closed","isProtected","enabledReactions","settings","toggleStoryRibbon","isShown","isArchived","forumPanelChatId","bot","getAttachBotOrNotify","isForChat","callAttachBot","isFromSideMenu","attachMenu","bots","requestedAttachBotInstall","onConfirm","action","requestAttachBotInChat","listedTopicIds","topicsCount","offsetTopic","acc","el","topic","accTopic","offsetTopicId","offsetDate","offsetId","count","entries","draftsById","_ref7","draft","readInboxMessageIdByTopicId","_ref8","shouldCloseChatOnError","closeForumPanel","openForumPanel","prevIsEnabled","areParticipantsHidden","iconColor","iconEmojiId","createTopicPanel","isLoading","closeCreateTopicPanel","editTopicPanel","closeEditTopicPanel","topicsPinnedLimit","appConfig","chatlistModal","invite","peerIds","peers","peerId","notJoinedCount","peer","isNotJoined","folderTitle","invites","shareFolderScreen","screen","Folders","pop","isConfirmedForChatlist","isChatList","hasMyInvites","suggestions","removal","suggestedPeerIds","deleteFolderDialogModal","detectedLanguage","isTranslationDisabled","isForumAsMessages","similarChannelIds","similarChannels","chatsById","chatLink","collectible","inputCollectible","phone","collectibleInfoModal","isFullDraftSync","lastLocalServiceMessageId","withPinned","archived","chatIds","shift","result2","notificationsChat","unshift","lastMessageByChatId","tabStates","topArchivedChats","slice","visibleChats","flatMap","_ref9","currentChat","chatsToSave","visibleUsers","_ref10","newChats","idsToUpdateDraft","isLocal","totalChatCount","_len2","_ref11","_key2","groupCall","existingGroupCall","participantsCount","stickerSet","localSet","loadStickers","emojiSet","localEmojiSet","migrateChat","_len3","_ref12","_key3","supergroup","localChat","localUser","_len4","_ref13","_key4","isBot","_len5","_ref14","_key5","isCurrentChat","startBot","param","_len6","_ref15","_key6","_len7","_ref16","_key7","newChat","requestNextMutation","safePlay","ARE_CALLS_SUPPORTED","getMainUsername","selectActiveGroupCall","selectChatGroupCall","silentSound","audioElement","audioContext","sounds","initializeSoundsForSafari","initializeSounds","sound","prevSrc","src","muted","volume","play","then","currentTime","joinAudio","Audio","connectingAudio","loop","leaveAudio","allowTalkAudio","busyAudio","connectAudio","endAudio","incomingAudio","ringingAudio","join","allowTalk","leave","connecting","incoming","end","connect","busy","ringing","fetchGroupCall","call","isLoaded","fetchGroupCallParticipants","nextOffset","isCallPanelVisible","subscribed","requestMasterAndJoinGroupCall","hasPublicUsername","inviteLink","canSelfUnmute","full","requestMasterAndCallAction","phoneCall","toggleGroupCallPanel","createAudioElement","checkNavigatorUserMediaPermissions","groupCalls","activeGroupCallId","leaveGroupCall","rejoin","doPlay","isVideo","state","participantId","adminId","createAudioContext","AudioContext","webkitAudioContext","silence","ctx","oscillator","createOscillator","dst","createMediaStreamDestination","MediaStream","assign","stream","getAudioTracks","enabled","srcObject","getGroupCallAudioElement","getGroupCallAudioContext","removeGroupCallAudioElement","navigator","mediaDevices","getUserMedia","video","getVideoTracks","getTracks","track","stop","checkMicrophonePermission","catch","audio","groupCallId","groupCallUpdate","addToParticipantCount","resetParticipantCount","unfiltered","participants","filtered","isLeft","removeGroupCall","updateActiveGroupCall","updateGroupCallParticipant","participantUpdate","noUpdateCount"],"sourceRoot":""}