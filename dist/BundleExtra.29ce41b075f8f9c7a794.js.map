{"version":3,"file":"BundleExtra.29ce41b075f8f9c7a794.js","mappings":"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K,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAC9D,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAC9D,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAC3D,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAC5D,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAC5D,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAC3D,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAC7D,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAC9D,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAC/D,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAC7D,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAC9D,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAC9D,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,I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","sources":["webpack://telegram-t/./src/bundles/extra.ts","webpack://telegram-t/./src/components/common/AboutAdsModal.tsx","webpack://telegram-t/./src/components/common/CalendarModal.tsx","webpack://telegram-t/./src/components/common/ChatOrUserPicker.tsx","webpack://telegram-t/./src/components/common/CountryPickerModal.tsx","webpack://telegram-t/./src/components/common/CustomEmojiPicker.tsx","webpack://telegram-t/./src/components/common/CustomEmojiSetsModal.tsx","webpack://telegram-t/./src/components/common/DeleteMessageModal.tsx","webpack://telegram-t/./src/components/common/DeleteProfilePhotoModal.tsx","webpack://telegram-t/./src/components/common/GifButton.tsx","webpack://telegram-t/./src/components/common/ManageUsernames.tsx","webpack://telegram-t/./src/components/common/PasswordMonkey.tsx","webpack://telegram-t/./src/components/common/PinMessageModal.async.tsx","webpack://telegram-t/./src/components/common/PinMessageModal.tsx","webpack://telegram-t/./src/components/common/PrivacySettingsNoticeModal.tsx","webpack://telegram-t/./src/components/common/ReactionEmoji.tsx","webpack://telegram-t/./src/components/common/RecipientPicker.tsx","webpack://telegram-t/./src/components/common/SeenByModal.tsx","webpack://telegram-t/./src/components/common/SliderDots.tsx","webpack://telegram-t/./src/components/common/StickerButton.tsx","webpack://telegram-t/./src/components/common/StickerSet.tsx","webpack://telegram-t/./src/components/common/StickerSetCard.tsx","webpack://telegram-t/./src/components/common/StickerSetModal.tsx","webpack://telegram-t/./src/components/common/UnpinAllMessagesModal.tsx","webpack://telegram-t/./src/components/common/UsernameInput.tsx","webpack://telegram-t/./src/components/common/embedded/EmbeddedStoryForward.tsx","webpack://telegram-t/./src/components/common/helpers/detectCardType.ts","webpack://telegram-t/./src/components/common/hooks/useStickerPickerObservers.ts","webpack://telegram-t/./src/components/left/ArchivedChats.tsx","webpack://telegram-t/./src/components/left/ChatFolderModal.tsx","webpack://telegram-t/./src/components/left/MuteChatModal.tsx","webpack://telegram-t/./src/components/left/main/ContactList.tsx","webpack://telegram-t/./src/components/left/main/StatusPickerMenu.tsx","webpack://telegram-t/./src/components/left/newChat/NewChat.tsx","webpack://telegram-t/./src/components/left/newChat/NewChatStep1.tsx","webpack://telegram-t/./src/components/left/newChat/NewChatStep2.tsx","webpack://telegram-t/./src/components/left/search/AudioResults.tsx","webpack://telegram-t/./src/components/left/search/ChatMessage.tsx","webpack://telegram-t/./src/components/left/search/ChatMessageResults.tsx","webpack://telegram-t/./src/components/left/search/ChatResults.tsx","webpack://telegram-t/./src/components/left/search/DateSuggest.tsx","webpack://telegram-t/./src/components/left/search/FileResults.tsx","webpack://telegram-t/./src/components/left/search/LeftSearch.tsx","webpack://telegram-t/./src/components/left/search/LeftSearchResultChat.tsx","webpack://telegram-t/./src/components/left/search/LeftSearchResultTopic.tsx","webpack://telegram-t/./src/components/left/search/LinkResults.tsx","webpack://telegram-t/./src/components/left/search/MediaResults.tsx","webpack://telegram-t/./src/components/left/search/RecentContacts.tsx","webpack://telegram-t/./src/components/left/search/helpers/createMapStateToProps.ts","webpack://telegram-t/./src/components/left/settings/BlockUserModal.tsx","webpack://telegram-t/./src/components/left/settings/PremiumStatusItem.tsx","webpack://telegram-t/./src/components/left/settings/PrivacyLockedOption.tsx","webpack://telegram-t/./src/components/left/settings/PrivacyMessages.tsx","webpack://telegram-t/./src/components/left/settings/Settings.tsx","webpack://telegram-t/./src/components/left/settings/SettingsActiveSession.tsx","webpack://telegram-t/./src/components/left/settings/SettingsActiveSessions.tsx","webpack://telegram-t/./src/components/left/settings/SettingsActiveWebsite.tsx","webpack://telegram-t/./src/components/left/settings/SettingsActiveWebsites.tsx","webpack://telegram-t/./src/components/left/settings/SettingsCustomEmoji.tsx","webpack://telegram-t/./src/components/left/settings/SettingsDataStorage.tsx","webpack://telegram-t/./src/components/left/settings/SettingsDoNotTranslate.tsx","webpack://telegram-t/./src/components/left/settings/SettingsEditProfile.tsx","webpack://telegram-t/./src/components/left/settings/SettingsExperimental.tsx","webpack://telegram-t/./src/components/left/settings/SettingsGeneral.tsx","webpack://telegram-t/./src/components/left/settings/SettingsGeneralBackground.tsx","webpack://telegram-t/./src/components/left/settings/SettingsGeneralBackgroundColor.tsx","webpack://telegram-t/./src/components/left/settings/SettingsHeader.tsx","webpack://telegram-t/./src/components/left/settings/SettingsLanguage.tsx","webpack://telegram-t/./src/components/left/settings/SettingsMain.tsx","webpack://telegram-t/./src/components/left/settings/SettingsNotifications.tsx","webpack://telegram-t/./src/components/left/settings/SettingsPasswordForm.tsx","webpack://telegram-t/./src/components/left/settings/SettingsPerformance.tsx","webpack://telegram-t/./src/components/left/settings/SettingsPrivacy.tsx","webpack://telegram-t/./src/components/left/settings/SettingsPrivacyBlockedUsers.tsx","webpack://telegram-t/./src/components/left/settings/SettingsPrivacyLastSeen.tsx","webpack://telegram-t/./src/components/left/settings/SettingsPrivacyPublicProfilePhoto.tsx","webpack://telegram-t/./src/components/left/settings/SettingsPrivacyVisibility.tsx","webpack://telegram-t/./src/components/left/settings/SettingsPrivacyVisibilityExceptionList.tsx","webpack://telegram-t/./src/components/left/settings/SettingsQuickReaction.tsx","webpack://telegram-t/./src/components/left/settings/SettingsStickers.tsx","webpack://telegram-t/./src/components/left/settings/WallpaperTile.tsx","webpack://telegram-t/./src/components/left/settings/folders/SettingsFolders.tsx","webpack://telegram-t/./src/components/left/settings/folders/SettingsFoldersChatFilters.tsx","webpack://telegram-t/./src/components/left/settings/folders/SettingsFoldersEdit.tsx","webpack://telegram-t/./src/components/left/settings/folders/SettingsFoldersMain.tsx","webpack://telegram-t/./src/components/left/settings/folders/SettingsShareChatlist.tsx","webpack://telegram-t/./src/components/left/settings/helpers/getSessionIcon.ts","webpack://telegram-t/./src/components/left/settings/helpers/privacy.ts","webpack://telegram-t/./src/components/left/settings/passcode/SettingsPasscode.tsx","webpack://telegram-t/./src/components/left/settings/passcode/SettingsPasscodeCongratulations.tsx","webpack://telegram-t/./src/components/left/settings/passcode/SettingsPasscodeEnabled.tsx","webpack://telegram-t/./src/components/left/settings/passcode/SettingsPasscodeStart.tsx","webpack://telegram-t/./src/components/left/settings/twoFa/SettingsTwoFa.tsx","webpack://telegram-t/./src/components/left/settings/twoFa/SettingsTwoFaCongratulations.tsx","webpack://telegram-t/./src/components/left/settings/twoFa/SettingsTwoFaEmailCode.tsx","webpack://telegram-t/./src/components/left/settings/twoFa/SettingsTwoFaEnabled.tsx","webpack://telegram-t/./src/components/left/settings/twoFa/SettingsTwoFaSkippableForm.tsx","webpack://telegram-t/./src/components/left/settings/twoFa/SettingsTwoFaStart.tsx","webpack://telegram-t/./src/components/main/AppendEntityPickerModal.tsx","webpack://telegram-t/./src/components/main/AttachBotRecipientPicker.tsx","webpack://telegram-t/./src/components/main/BotTrustModal.tsx","webpack://telegram-t/./src/components/main/DeleteFolderDialog.tsx","webpack://telegram-t/./src/components/main/Dialogs.tsx","webpack://telegram-t/./src/components/main/DraftRecipientPicker.tsx","webpack://telegram-t/./src/components/main/ForwardRecipientPicker.tsx","webpack://telegram-t/./src/components/main/HistoryCalendar.tsx","webpack://telegram-t/./src/components/main/NewContactModal.tsx","webpack://telegram-t/./src/components/main/Notifications.tsx","webpack://telegram-t/./src/components/main/SafeLinkModal.tsx","webpack://telegram-t/./src/components/main/premium/GiftPremiumModal.tsx","webpack://telegram-t/./src/components/main/premium/GiveawayModal.tsx","webpack://telegram-t/./src/components/main/premium/GiveawayTypeOption.tsx","webpack://telegram-t/./src/components/main/premium/PremiumFeatureItem.tsx","webpack://telegram-t/./src/components/main/premium/PremiumFeatureModal.tsx","webpack://telegram-t/./src/components/main/premium/PremiumGiftingModal.tsx","webpack://telegram-t/./src/components/main/premium/PremiumMainModal.tsx","webpack://telegram-t/./src/components/main/premium/PremiumSubscriptionOption.tsx","webpack://telegram-t/./src/components/main/premium/common/PremiumLimitPreview.tsx","webpack://telegram-t/./src/components/main/premium/common/PremiumLimitReachedModal.tsx","webpack://telegram-t/./src/components/main/premium/common/PremiumLimitsCompare.tsx","webpack://telegram-t/./src/components/main/premium/previews/PremiumFeaturePreviewStickers.tsx","webpack://telegram-t/./src/components/main/premium/previews/PremiumFeaturePreviewStories.tsx","webpack://telegram-t/./src/components/main/premium/previews/PremiumFeaturePreviewVideo.tsx","webpack://telegram-t/./src/components/mediaViewer/MediaViewer.tsx","webpack://telegram-t/./src/components/mediaViewer/MediaViewerActions.tsx","webpack://telegram-t/./src/components/mediaViewer/MediaViewerContent.tsx","webpack://telegram-t/./src/components/mediaViewer/MediaViewerFooter.tsx","webpack://telegram-t/./src/components/mediaViewer/MediaViewerSlides.tsx","webpack://telegram-t/./src/components/mediaViewer/SeekLine.tsx","webpack://telegram-t/./src/components/mediaViewer/SenderInfo.tsx","webpack://telegram-t/./src/components/mediaViewer/VideoPlayer.tsx","webpack://telegram-t/./src/components/mediaViewer/VideoPlayerControls.tsx","webpack://telegram-t/./src/components/mediaViewer/helpers/getViewableMedia.ts","webpack://telegram-t/./src/components/mediaViewer/helpers/ghostAnimation.ts","webpack://telegram-t/./src/components/mediaViewer/hooks/useControlsSignal.ts","webpack://telegram-t/./src/components/mediaViewer/hooks/useMediaProps.ts","webpack://telegram-t/./src/components/mediaViewer/hooks/useVideoWaitingSignal.ts","webpack://telegram-t/./src/components/mediaViewer/hooks/useZoomChangeSignal.ts","webpack://telegram-t/./src/components/middle/ChatLanguageModal.tsx","webpack://telegram-t/./src/components/middle/DeleteSelectedMessageModal.tsx","webpack://telegram-t/./src/components/middle/EmojiInteractionAnimation.tsx","webpack://telegram-t/./src/components/middle/HeaderMenuContainer.tsx","webpack://telegram-t/./src/components/middle/MessageSelectToolbar.tsx","webpack://telegram-t/./src/components/middle/MobileSearch.tsx","webpack://telegram-t/./src/components/middle/ReactorListModal.tsx","webpack://telegram-t/./src/components/middle/composer/AttachmentModal.tsx","webpack://telegram-t/./src/components/middle/composer/AttachmentModalItem.tsx","webpack://telegram-t/./src/components/middle/composer/BotCommandMenu.tsx","webpack://telegram-t/./src/components/middle/composer/ChatCommand.tsx","webpack://telegram-t/./src/components/middle/composer/ChatCommandTooltip.tsx","webpack://telegram-t/./src/components/middle/composer/CustomEmojiButton.tsx","webpack://telegram-t/./src/components/middle/composer/CustomEmojiTooltip.tsx","webpack://telegram-t/./src/components/middle/composer/CustomSendMenu.tsx","webpack://telegram-t/./src/components/middle/composer/EmojiButton.tsx","webpack://telegram-t/./src/components/middle/composer/EmojiCategory.tsx","webpack://telegram-t/./src/components/middle/composer/EmojiPicker.tsx","webpack://telegram-t/./src/components/middle/composer/EmojiTooltip.tsx","webpack://telegram-t/./src/components/middle/composer/GifPicker.tsx","webpack://telegram-t/./src/components/middle/composer/InlineBotTooltip.tsx","webpack://telegram-t/./src/components/middle/composer/MentionTooltip.tsx","webpack://telegram-t/./src/components/middle/composer/PollModal.tsx","webpack://telegram-t/./src/components/middle/composer/SendAsMenu.tsx","webpack://telegram-t/./src/components/middle/composer/StickerPicker.tsx","webpack://telegram-t/./src/components/middle/composer/StickerSetCover.tsx","webpack://telegram-t/./src/components/middle/composer/StickerTooltip.tsx","webpack://telegram-t/./src/components/middle/composer/SymbolMenu.tsx","webpack://telegram-t/./src/components/middle/composer/SymbolMenuFooter.tsx","webpack://telegram-t/./src/components/middle/composer/TextFormatter.tsx","webpack://telegram-t/./src/components/middle/composer/helpers/getHtmlTextLength.ts","webpack://telegram-t/./src/components/middle/composer/hooks/useKeyboardNavigation.ts","webpack://telegram-t/./src/components/middle/composer/inlineResults/ArticleResult.tsx","webpack://telegram-t/./src/components/middle/composer/inlineResults/BaseResult.tsx","webpack://telegram-t/./src/components/middle/composer/inlineResults/GifResult.tsx","webpack://telegram-t/./src/components/middle/composer/inlineResults/MediaResult.tsx","webpack://telegram-t/./src/components/middle/composer/inlineResults/StickerResult.tsx","webpack://telegram-t/./src/components/middle/helpers/inputFormatters.ts","webpack://telegram-t/./src/components/middle/hooks/useCopySelectedMessages.ts","webpack://telegram-t/./src/components/middle/message/ContextMenuContainer.tsx","webpack://telegram-t/./src/components/middle/message/MessageContextMenu.tsx","webpack://telegram-t/./src/components/middle/message/ReadTimeMenuItem.tsx","webpack://telegram-t/./src/components/middle/message/SponsoredMessageContextMenuContainer.tsx","webpack://telegram-t/./src/components/middle/message/helpers/copyOptions.ts","webpack://telegram-t/./src/components/middle/message/helpers/getSelectionAsFormattedText.ts","webpack://telegram-t/./src/components/middle/message/helpers/isSelectionRangeInsideMessage.ts","webpack://telegram-t/./src/components/middle/message/reactions/ReactionPicker.tsx","webpack://telegram-t/./src/components/middle/message/reactions/ReactionPickerLimited.tsx","webpack://telegram-t/./src/components/modals/attachBotInstall/AttachBotInstallModal.tsx","webpack://telegram-t/./src/components/modals/boost/BoostModal.tsx","webpack://telegram-t/./src/components/modals/chatlist/ChatlistAlready.tsx","webpack://telegram-t/./src/components/modals/chatlist/ChatlistDelete.tsx","webpack://telegram-t/./src/components/modals/chatlist/ChatlistModal.tsx","webpack://telegram-t/./src/components/modals/chatlist/ChatlistNew.tsx","webpack://telegram-t/./src/components/modals/collectible/CollectibleInfoModal.tsx","webpack://telegram-t/./src/components/modals/common/TableInfoModal.tsx","webpack://telegram-t/./src/components/modals/giftcode/GiftCodeModal.tsx","webpack://telegram-t/./src/components/modals/inviteViaLink/InviteViaLinkModal.tsx","webpack://telegram-t/./src/components/modals/map/MapModal.tsx","webpack://telegram-t/./src/components/modals/oneTimeMedia/OneTimeMediaModal.tsx","webpack://telegram-t/./src/components/modals/reportAd/ReportAdModal.tsx","webpack://telegram-t/./src/components/modals/stars/BalanceBlock.tsx","webpack://telegram-t/./src/components/modals/stars/PaidMediaThumb.tsx","webpack://telegram-t/./src/components/modals/stars/StarsBalanceModal.tsx","webpack://telegram-t/./src/components/modals/stars/StarsPaymentModal.tsx","webpack://telegram-t/./src/components/modals/stars/StarsTransactionItem.tsx","webpack://telegram-t/./src/components/modals/urlAuth/UrlAuthModal.tsx","webpack://telegram-t/./src/components/modals/webApp/WebAppModal.tsx","webpack://telegram-t/./src/components/modals/webApp/hooks/usePopupLimit.ts","webpack://telegram-t/./src/components/modals/webApp/hooks/useWebAppFrame.ts","webpack://telegram-t/./src/components/payment/CardInput.tsx","webpack://telegram-t/./src/components/payment/Checkout.tsx","webpack://telegram-t/./src/components/payment/ConfirmPayment.tsx","webpack://telegram-t/./src/components/payment/ExpiryInput.tsx","webpack://telegram-t/./src/components/payment/PasswordConfirm.tsx","webpack://telegram-t/./src/components/payment/PaymentInfo.tsx","webpack://telegram-t/./src/components/payment/PaymentModal.tsx","webpack://telegram-t/./src/components/payment/ReceiptModal.tsx","webpack://telegram-t/./src/components/payment/SavedPaymentCredentials.tsx","webpack://telegram-t/./src/components/payment/Shipping.tsx","webpack://telegram-t/./src/components/payment/ShippingInfo.tsx","webpack://telegram-t/./src/components/right/CreateTopic.tsx","webpack://telegram-t/./src/components/right/EditTopic.tsx","webpack://telegram-t/./src/components/right/GifSearch.tsx","webpack://telegram-t/./src/components/right/PollAnswerResults.tsx","webpack://telegram-t/./src/components/right/PollResults.tsx","webpack://telegram-t/./src/components/right/RightSearch.tsx","webpack://telegram-t/./src/components/right/StickerSearch.tsx","webpack://telegram-t/./src/components/right/StickerSetResult.tsx","webpack://telegram-t/./src/components/right/hooks/useManagePermissions.ts","webpack://telegram-t/./src/components/right/management/JoinRequest.tsx","webpack://telegram-t/./src/components/right/management/ManageBot.tsx","webpack://telegram-t/./src/components/right/management/ManageChannel.tsx","webpack://telegram-t/./src/components/right/management/ManageChatAdministrators.tsx","webpack://telegram-t/./src/components/right/management/ManageChatPrivacyType.tsx","webpack://telegram-t/./src/components/right/management/ManageChatRemovedUsers.tsx","webpack://telegram-t/./src/components/right/management/ManageDiscussion.tsx","webpack://telegram-t/./src/components/right/management/ManageGroup.tsx","webpack://telegram-t/./src/components/right/management/ManageGroupAdminRights.tsx","webpack://telegram-t/./src/components/right/management/ManageGroupMembers.tsx","webpack://telegram-t/./src/components/right/management/ManageGroupPermissions.tsx","webpack://telegram-t/./src/components/right/management/ManageGroupUserPermissions.tsx","webpack://telegram-t/./src/components/right/management/ManageGroupUserPermissionsCreate.tsx","webpack://telegram-t/./src/components/right/management/ManageInvite.tsx","webpack://telegram-t/./src/components/right/management/ManageInviteInfo.tsx","webpack://telegram-t/./src/components/right/management/ManageInvites.tsx","webpack://telegram-t/./src/components/right/management/ManageJoinRequests.tsx","webpack://telegram-t/./src/components/right/management/ManageReactions.tsx","webpack://telegram-t/./src/components/right/management/ManageUser.tsx","webpack://telegram-t/./src/components/right/management/Management.tsx","webpack://telegram-t/./src/components/right/management/RemoveGroupUserModal.tsx","webpack://telegram-t/./src/components/right/statistics/MessageStatistics.tsx","webpack://telegram-t/./src/components/right/statistics/Statistics.tsx","webpack://telegram-t/./src/components/right/statistics/StatisticsMessagePublicForward.tsx","webpack://telegram-t/./src/components/right/statistics/StatisticsRecentMessage.tsx","webpack://telegram-t/./src/components/right/statistics/StatisticsRecentPostMeta.tsx","webpack://telegram-t/./src/components/right/statistics/StatisticsRecentStory.tsx","webpack://telegram-t/./src/components/right/statistics/StatisticsStoryPublicForward.tsx","webpack://telegram-t/./src/components/right/statistics/StoryStatistics.tsx","webpack://telegram-t/./src/components/story/StealthModeModal.tsx","webpack://telegram-t/./src/components/story/Story.tsx","webpack://telegram-t/./src/components/story/StoryCaption.tsx","webpack://telegram-t/./src/components/story/StoryDeleteConfirmModal.tsx","webpack://telegram-t/./src/components/story/StoryFooter.tsx","webpack://telegram-t/./src/components/story/StoryPreview.tsx","webpack://telegram-t/./src/components/story/StoryProgress.tsx","webpack://telegram-t/./src/components/story/StorySettings.tsx","webpack://telegram-t/./src/components/story/StorySlides.tsx","webpack://telegram-t/./src/components/story/StoryView.tsx","webpack://telegram-t/./src/components/story/StoryViewModal.tsx","webpack://telegram-t/./src/components/story/StoryViewer.tsx","webpack://telegram-t/./src/components/story/helpers/dimensions.ts","webpack://telegram-t/./src/components/story/helpers/ghostAnimation.ts","webpack://telegram-t/./src/components/story/hooks/useSlideSizes.ts","webpack://telegram-t/./src/components/story/hooks/useStoryProps.ts","webpack://telegram-t/./src/components/story/privacy/AllowDenyList.tsx","webpack://telegram-t/./src/components/story/privacy/CloseFriends.tsx","webpack://telegram-t/./src/hooks/reducers/usePaymentReducer.ts","webpack://telegram-t/./src/hooks/reducers/useTwoFaReducer.ts","webpack://telegram-t/./src/hooks/useBlur.ts","webpack://telegram-t/./src/hooks/useBlurSync.ts","webpack://telegram-t/./src/hooks/useCurrentTimeSignal.ts","webpack://telegram-t/./src/hooks/useFocusAfterAnimation.tsx","webpack://telegram-t/./src/hooks/useLongPress.ts","webpack://telegram-t/./src/hooks/useMultiClick.ts","webpack://telegram-t/./src/hooks/usePictureInPicture.ts","webpack://telegram-t/./src/hooks/useScrolledState.ts","webpack://telegram-t/./src/hooks/useSelectWithEnter.ts","webpack://telegram-t/./src/hooks/useSignalRef.ts","webpack://telegram-t/./src/lib/video-preview/VideoPreview.ts","webpack://telegram-t/./src/util/findInViewport.ts","webpack://telegram-t/./src/util/getKeyFromEvent.ts","webpack://telegram-t/./src/util/isFullyVisible.ts","webpack://telegram-t/./src/util/launchMediaWorkers.ts","webpack://telegram-t/./src/util/scrollLock.ts","webpack://telegram-t/./src/util/setTooltipItemVisible.ts","webpack://telegram-t/./src/components/common/AboutAdsModal.module.scss?0072","webpack://telegram-t/./src/components/common/CalendarModal.scss?bb12","webpack://telegram-t/./src/components/common/ChatOrUserPicker.scss?18e0","webpack://telegram-t/./src/components/common/CountryPickerModal.module.scss?d5e6","webpack://telegram-t/./src/components/common/CustomEmojiPicker.module.scss?b9fd","webpack://telegram-t/./src/components/common/CustomEmojiSetsModal.module.scss?b138","webpack://telegram-t/./src/components/common/GifButton.scss?c321","webpack://telegram-t/./src/components/common/ManageUsernames.module.scss?3086","webpack://telegram-t/./src/components/common/PasswordMonkey.scss?1551","webpack://telegram-t/./src/components/common/PrivacySettingsNoticeModal.module.scss?a8aa","webpack://telegram-t/./src/components/common/ReactionEmoji.module.scss?b399","webpack://telegram-t/./src/components/common/SeenByModal.module.scss?1d45","webpack://telegram-t/./src/components/common/SliderDots.module.scss?afdd","webpack://telegram-t/./src/components/common/StickerButton.scss?10e2","webpack://telegram-t/./src/components/common/StickerSetCard.scss?6f54","webpack://telegram-t/./src/components/common/StickerSetModal.scss?201a","webpack://telegram-t/./src/components/left/ArchivedChats.scss?10ff","webpack://telegram-t/./src/components/left/main/StatusPickerMenu.module.scss?d7cd","webpack://telegram-t/./src/components/left/newChat/NewChat.scss?3455","webpack://telegram-t/./src/components/left/search/ChatMessage.scss?2b95","webpack://telegram-t/./src/components/left/search/DateSuggest.scss?c63d","webpack://telegram-t/./src/components/left/search/LeftSearch.scss?9c67","webpack://telegram-t/./src/components/left/search/RecentContacts.scss?0f5b","webpack://telegram-t/./src/components/left/settings/PrivacyLockedOption.module.scss?16a3","webpack://telegram-t/./src/components/left/settings/Settings.scss?0c00","webpack://telegram-t/./src/components/left/settings/SettingsActiveSession.module.scss?ead4","webpack://telegram-t/./src/components/left/settings/SettingsActiveSessions.scss?d095","webpack://telegram-t/./src/components/left/settings/SettingsActiveWebsite.module.scss?99ae","webpack://telegram-t/./src/components/left/settings/SettingsActiveWebsites.module.scss?28f4","webpack://telegram-t/./src/components/left/settings/SettingsDoNotTranslate.module.scss?24c7","webpack://telegram-t/./src/components/left/settings/SettingsGeneralBackground.scss?59ab","webpack://telegram-t/./src/components/left/settings/SettingsGeneralBackgroundColor.scss?3b01","webpack://telegram-t/./src/components/left/settings/SettingsPrivacyPublicPhoto.module.scss?04c5","webpack://telegram-t/./src/components/left/settings/WallpaperTile.scss?552e","webpack://telegram-t/./src/components/left/settings/folders/SettingsFolders.scss?7088","webpack://telegram-t/./src/components/main/AppendEntityPicker.module.scss?b380","webpack://telegram-t/./src/components/main/NewContactModal.scss?8bc4","webpack://telegram-t/./src/components/main/premium/GiftPremiumModal.module.scss?1c3e","webpack://telegram-t/./src/components/main/premium/GiveawayModal.module.scss?ac86","webpack://telegram-t/./src/components/main/premium/GiveawayTypeOption.module.scss?6d7c","webpack://telegram-t/./src/components/main/premium/PremiumFeatureItem.module.scss?7431","webpack://telegram-t/./src/components/main/premium/PremiumFeatureModal.module.scss?b65b","webpack://telegram-t/./src/components/main/premium/PremiumGiftingModal.module.scss?a8f0","webpack://telegram-t/./src/components/main/premium/PremiumMainModal.module.scss?323f","webpack://telegram-t/./src/components/main/premium/PremiumSubscriptionOption.module.scss?b798","webpack://telegram-t/./src/components/main/premium/common/PremiumLimitPreview.module.scss?28b4","webpack://telegram-t/./src/components/main/premium/common/PremiumLimitReachedModal.module.scss?434e","webpack://telegram-t/./src/components/main/premium/common/PremiumLimitsCompare.module.scss?00e6","webpack://telegram-t/./src/components/main/premium/previews/PremiumFeaturePreviewStickers.module.scss?0900","webpack://telegram-t/./src/components/main/premium/previews/PremiumFeaturePreviewStories.module.scss?e925","webpack://telegram-t/./src/components/main/premium/previews/PremiumFeaturePreviewVideo.module.scss?0228","webpack://telegram-t/./src/components/mediaViewer/MediaViewer.scss?b2fb","webpack://telegram-t/./src/components/mediaViewer/MediaViewerActions.scss?09ff","webpack://telegram-t/./src/components/mediaViewer/MediaViewerContent.scss?e880","webpack://telegram-t/./src/components/mediaViewer/MediaViewerFooter.scss?393f","webpack://telegram-t/./src/components/mediaViewer/MediaViewerSlides.scss?5d35","webpack://telegram-t/./src/components/mediaViewer/SeekLine.module.scss?dc47","webpack://telegram-t/./src/components/mediaViewer/SenderInfo.scss?4550","webpack://telegram-t/./src/components/mediaViewer/VideoPlayer.scss?09ff","webpack://telegram-t/./src/components/mediaViewer/VideoPlayerControls.scss?b8fe","webpack://telegram-t/./src/components/middle/ChatLanguageModal.module.scss?68c3","webpack://telegram-t/./src/components/middle/EmojiInteractionAnimation.scss?c0d5","webpack://telegram-t/./src/components/middle/HeaderMenuContainer.scss?0bb9","webpack://telegram-t/./src/components/middle/MessageSelectToolbar.scss?4c27","webpack://telegram-t/./src/components/middle/MobileSearch.scss?bd9c","webpack://telegram-t/./src/components/middle/ReactorListModal.scss?24e4","webpack://telegram-t/./src/components/middle/composer/AttachmentModal.module.scss?23ea","webpack://telegram-t/./src/components/middle/composer/AttachmentModalItem.module.scss?41a0","webpack://telegram-t/./src/components/middle/composer/BotCommandMenu.scss?e540","webpack://telegram-t/./src/components/middle/composer/ChatCommand.scss?89f0","webpack://telegram-t/./src/components/middle/composer/ChatCommandTooltip.module.scss?f347","webpack://telegram-t/./src/components/middle/composer/CustomEmojiTooltip.module.scss?c44f","webpack://telegram-t/./src/components/middle/composer/CustomSendMenu.scss?bddb","webpack://telegram-t/./src/components/middle/composer/EmojiButton.scss?aeeb","webpack://telegram-t/./src/components/middle/composer/EmojiPicker.scss?0146","webpack://telegram-t/./src/components/middle/composer/EmojiTooltip.scss?32f6","webpack://telegram-t/./src/components/middle/composer/GifPicker.scss?2170","webpack://telegram-t/./src/components/middle/composer/InlineBotTooltip.scss?a57c","webpack://telegram-t/./src/components/middle/composer/MentionTooltip.scss?cbcc","webpack://telegram-t/./src/components/middle/composer/PollModal.scss?0f09","webpack://telegram-t/./src/components/middle/composer/SendAsMenu.scss?45d2","webpack://telegram-t/./src/components/middle/composer/StickerPicker.module.scss?0978","webpack://telegram-t/./src/components/middle/composer/StickerSetCover.module.scss?4629","webpack://telegram-t/./src/components/middle/composer/StickerTooltip.scss?1c75","webpack://telegram-t/./src/components/middle/composer/SymbolMenu.scss?9cdf","webpack://telegram-t/./src/components/middle/composer/TextFormatter.scss?7561","webpack://telegram-t/./src/components/middle/composer/inlineResults/BaseResult.scss?771f","webpack://telegram-t/./src/components/middle/composer/inlineResults/MediaResult.scss?8bb2","webpack://telegram-t/./src/components/middle/message/MessageContextMenu.scss?b215","webpack://telegram-t/./src/components/middle/message/ReadTimeMenuItem.module.scss?c38f","webpack://telegram-t/./src/components/middle/message/reactions/ReactionPicker.module.scss?695a","webpack://telegram-t/./src/components/middle/message/reactions/ReactionPickerLimited.module.scss?0536","webpack://telegram-t/./src/components/modals/boost/BoostModal.module.scss?aeb4","webpack://telegram-t/./src/components/modals/chatlist/ChatlistModal.module.scss?f731","webpack://telegram-t/./src/components/modals/collectible/CollectibleInfoModal.module.scss?497f","webpack://telegram-t/./src/components/modals/common/TableInfoModal.module.scss?4f33","webpack://telegram-t/./src/components/modals/giftcode/GiftCodeModal.module.scss?1c77","webpack://telegram-t/./src/components/modals/inviteViaLink/InviteViaLinkModal.module.scss?717b","webpack://telegram-t/./src/components/modals/map/MapModal.module.scss?0842","webpack://telegram-t/./src/components/modals/oneTimeMedia/OneTimeMediaModal.module.scss?de6c","webpack://telegram-t/./src/components/modals/reportAd/ReportAdModal.module.scss?b26e","webpack://telegram-t/./src/components/modals/stars/PaidMediaThumb.module.scss?e2b6","webpack://telegram-t/./src/components/modals/stars/StarsBalanceModal.module.scss?bbd4","webpack://telegram-t/./src/components/modals/stars/StarsTransactionItem.module.scss?2a3b","webpack://telegram-t/./src/components/modals/urlAuth/UrlAuthModal.module.scss?df39","webpack://telegram-t/./src/components/modals/webApp/WebAppModal.module.scss?615e","webpack://telegram-t/./src/components/payment/CardInput.scss?81a6","webpack://telegram-t/./src/components/payment/Checkout.module.scss?4e47","webpack://telegram-t/./src/components/payment/ConfirmPayment.scss?8f81","webpack://telegram-t/./src/components/payment/PaymentInfo.scss?30c9","webpack://telegram-t/./src/components/payment/PaymentModal.scss?a6c5","webpack://telegram-t/./src/components/payment/ReceiptModal.module.scss?dbb9","webpack://telegram-t/./src/components/payment/Shipping.scss?daec","webpack://telegram-t/./src/components/payment/ShippingInfo.scss?19df","webpack://telegram-t/./src/components/right/GifSearch.scss?871f","webpack://telegram-t/./src/components/right/ManageTopic.module.scss?04dd","webpack://telegram-t/./src/components/right/PollAnswerResults.scss?9ced","webpack://telegram-t/./src/components/right/PollResults.scss?c2e3","webpack://telegram-t/./src/components/right/RightSearch.scss?7f21","webpack://telegram-t/./src/components/right/StickerSearch.scss?dcd7","webpack://telegram-t/./src/components/right/management/JoinRequest.scss?481f","webpack://telegram-t/./src/components/right/management/Management.scss?0868","webpack://telegram-t/./src/components/right/statistics/Statistics.module.scss?96a0","webpack://telegram-t/./src/components/right/statistics/StatisticsPublicForward.module.scss?bbd6","webpack://telegram-t/./src/components/right/statistics/StatisticsRecentPost.module.scss?fea0","webpack://telegram-t/./src/components/story/StealthModeModal.module.scss?40cf","webpack://telegram-t/./src/components/story/StoryFooter.module.scss?19b1","webpack://telegram-t/./src/components/story/StoryProgress.module.scss?59b4","webpack://telegram-t/./src/components/story/StorySettings.module.scss?b887","webpack://telegram-t/./src/components/story/StoryViewModal.module.scss?06b1","webpack://telegram-t/./src/components/story/StoryViewer.module.scss?5f32","webpack://telegram-t/./src/components/story/privacy/CloseFriends.module.scss?5d02"],"sourcesContent":["export { default as MediaViewer } from '../components/mediaViewer/MediaViewer';\nexport { default as StoryViewer } from '../components/story/StoryViewer';\n\nexport { default as ForwardRecipientPicker } from '../components/main/ForwardRecipientPicker';\nexport { default as DraftRecipientPicker } from '../components/main/DraftRecipientPicker';\nexport { default as AttachBotRecipientPicker } from '../components/main/AttachBotRecipientPicker';\nexport { default as Dialogs } from '../components/main/Dialogs';\nexport { default as Notifications } from '../components/main/Notifications';\nexport { default as SafeLinkModal } from '../components/main/SafeLinkModal';\nexport { default as MapModal } from '../components/modals/map/MapModal';\nexport { default as UrlAuthModal } from '../components/modals/urlAuth/UrlAuthModal';\nexport { default as HistoryCalendar } from '../components/main/HistoryCalendar';\nexport { default as NewContactModal } from '../components/main/NewContactModal';\nexport { default as WebAppModal } from '../components/modals/webApp/WebAppModal';\nexport { default as BotTrustModal } from '../components/main/BotTrustModal';\nexport { default as AttachBotInstallModal } from '../components/modals/attachBotInstall/AttachBotInstallModal';\nexport { default as DeleteFolderDialog } from '../components/main/DeleteFolderDialog';\nexport { default as PremiumMainModal } from '../components/main/premium/PremiumMainModal';\nexport { default as GiftPremiumModal } from '../components/main/premium/GiftPremiumModal';\nexport { default as GiveawayModal } from '../components/main/premium/GiveawayModal';\nexport { default as PremiumGiftingModal } from '../components/main/premium/PremiumGiftingModal';\nexport { default as AppendEntityPickerModal } from '../components/main/AppendEntityPickerModal';\nexport { default as PremiumLimitReachedModal } from '../components/main/premium/common/PremiumLimitReachedModal';\nexport { default as StatusPickerMenu } from '../components/left/main/StatusPickerMenu';\nexport { default as BoostModal } from '../components/modals/boost/BoostModal';\nexport { default as GiftCodeModal } from '../components/modals/giftcode/GiftCodeModal';\nexport { default as ChatlistModal } from '../components/modals/chatlist/ChatlistModal';\nexport { default as StarsBalanceModal } from '../components/modals/stars/StarsBalanceModal';\nexport { default as StarPaymentModal } from '../components/modals/stars/StarsPaymentModal';\n\nexport { default as AboutAdsModal } from '../components/common/AboutAdsModal';\nexport { default as ReportAdModal } from '../components/modals/reportAd/ReportAdModal';\nexport { default as CalendarModal } from '../components/common/CalendarModal';\nexport { default as DeleteMessageModal } from '../components/common/DeleteMessageModal';\nexport { default as PinMessageModal } from '../components/common/PinMessageModal';\nexport { default as UnpinAllMessagesModal } from '../components/common/UnpinAllMessagesModal';\nexport { default as MessageSelectToolbar } from '../components/middle/MessageSelectToolbar';\nexport { default as SeenByModal } from '../components/common/SeenByModal';\nexport { default as PrivacySettingsNoticeModal } from '../components/common/PrivacySettingsNoticeModal';\nexport { default as CountryPickerModal } from '../components/common/CountryPickerModal';\nexport { default as ReactorListModal } from '../components/middle/ReactorListModal';\nexport { default as EmojiInteractionAnimation } from '../components/middle/EmojiInteractionAnimation';\nexport { default as ChatLanguageModal } from '../components/middle/ChatLanguageModal';\nexport { default as CollectibleInfoModal } from '../components/modals/collectible/CollectibleInfoModal';\n\nexport { default as LeftSearch } from '../components/left/search/LeftSearch';\nexport { default as Settings } from '../components/left/settings/Settings';\nexport { default as ContactList } from '../components/left/main/ContactList';\nexport { default as NewChat } from '../components/left/newChat/NewChat';\nexport { default as ArchivedChats } from '../components/left/ArchivedChats';\nexport { default as ChatFolderModal } from '../components/left/ChatFolderModal';\nexport { default as MuteChatModal } from '../components/left/MuteChatModal';\n\nexport { default as ContextMenuContainer } from '../components/middle/message/ContextMenuContainer';\nexport { default as SponsoredMessageContextMenuContainer }\n  from '../components/middle/message/SponsoredMessageContextMenuContainer';\nexport { default as StickerSetModal } from '../components/common/StickerSetModal';\nexport { default as CustomEmojiSetsModal } from '../components/common/CustomEmojiSetsModal';\nexport { default as HeaderMenuContainer } from '../components/middle/HeaderMenuContainer';\nexport { default as MobileSearch } from '../components/middle/MobileSearch';\nexport { default as ReactionPicker } from '../components/middle/message/reactions/ReactionPicker';\n\nexport { default as AttachmentModal } from '../components/middle/composer/AttachmentModal';\nexport { default as PollModal } from '../components/middle/composer/PollModal';\nexport { default as SymbolMenu } from '../components/middle/composer/SymbolMenu';\nexport { default as ChatCommandTooltip } from '../components/middle/composer/ChatCommandTooltip';\nexport { default as BotCommandMenu } from '../components/middle/composer/BotCommandMenu';\nexport { default as MentionTooltip } from '../components/middle/composer/MentionTooltip';\nexport { default as StickerTooltip } from '../components/middle/composer/StickerTooltip';\nexport { default as CustomEmojiTooltip } from '../components/middle/composer/CustomEmojiTooltip';\nexport { default as CustomSendMenu } from '../components/middle/composer/CustomSendMenu';\nexport { default as DropArea } from '../components/middle/composer/DropArea';\nexport { default as TextFormatter } from '../components/middle/composer/TextFormatter';\nexport { default as EmojiTooltip } from '../components/middle/composer/EmojiTooltip';\nexport { default as InlineBotTooltip } from '../components/middle/composer/InlineBotTooltip';\nexport { default as SendAsMenu } from '../components/middle/composer/SendAsMenu';\n\nexport { default as RightSearch } from '../components/right/RightSearch';\nexport { default as StickerSearch } from '../components/right/StickerSearch';\nexport { default as GifSearch } from '../components/right/GifSearch';\nexport { default as Statistics } from '../components/right/statistics/Statistics';\nexport { default as MessageStatistics } from '../components/right/statistics/MessageStatistics';\nexport { default as StoryStatistics } from '../components/right/statistics/StoryStatistics';\nexport { default as PollResults } from '../components/right/PollResults';\nexport { default as CreateTopic } from '../components/right/CreateTopic';\nexport { default as EditTopic } from '../components/right/EditTopic';\n\nexport { default as Management } from '../components/right/management/Management';\n\nexport { default as PaymentModal } from '../components/payment/PaymentModal';\nexport { default as ReceiptModal } from '../components/payment/ReceiptModal';\nexport { default as InviteViaLinkModal } from '../components/modals/inviteViaLink/InviteViaLinkModal';\nexport { default as OneTimeMediaModal } from '../components/modals/oneTimeMedia/OneTimeMediaModal';\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport renderText from './helpers/renderText';\n\nimport useSelectorSignal from '../../hooks/data/useSelectorSignal';\nimport useDerivedState from '../../hooks/useDerivedState';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport Button from '../ui/Button';\nimport ListItem from '../ui/ListItem';\nimport Modal from '../ui/Modal';\nimport Separator from '../ui/Separator';\nimport Icon from './icons/Icon';\nimport SafeLink from './SafeLink';\n\nimport styles from './AboutAdsModal.module.scss';\n\nexport type OwnProps = {\n  isOpen: boolean;\n  isRevenueSharing?: boolean;\n  onClose: NoneToVoidFunction;\n};\n\nconst AboutAdsModal: FC<OwnProps> = ({\n  isOpen,\n  isRevenueSharing,\n  onClose,\n}) => {\n  const lang = useOldLang();\n\n  const minLevelSignal = useSelectorSignal((global) => global.appConfig?.channelRestrictAdsLevelMin);\n  const minLevelToRestrictAds = useDerivedState(minLevelSignal);\n\n  const regularAdContent = useMemo(() => {\n    return (\n      <>\n        <h3>{lang('SponsoredMessageInfoScreen.Title')}</h3>\n        <p>{renderText(lang('SponsoredMessageInfoDescription1'), ['br'])}</p>\n        <p>{renderText(lang('SponsoredMessageInfoDescription2'), ['br'])}</p>\n        <p>{renderText(lang('SponsoredMessageInfoDescription3'), ['br'])}</p>\n        <p>\n          <SafeLink\n            url={lang('SponsoredMessageAlertLearnMoreUrl')}\n            text={lang('SponsoredMessageAlertLearnMoreUrl')}\n          />\n        </p>\n        <p>{renderText(lang('SponsoredMessageInfoDescription4'), ['br'])}</p>\n      </>\n    );\n  }, [lang]);\n\n  const revenueSharingAdContent = useMemo(() => {\n    return (\n      <>\n        <div className={styles.topIcon}><Icon name=\"channel\" /></div>\n        <h3 className={styles.title}>{lang('AboutRevenueSharingAds')}</h3>\n        <p className={buildClassName(styles.description, styles.secondary)}>\n          {lang('RevenueSharingAdsAlertSubtitle')}\n        </p>\n        <ListItem\n          isStatic\n          multiline\n          icon=\"lock\"\n        >\n          <span className=\"title\">{lang('RevenueSharingAdsInfo1Title')}</span>\n          <span className=\"subtitle\">\n            {renderText(lang('RevenueSharingAdsInfo1Subtitle'), ['simple_markdown'])}\n          </span>\n        </ListItem>\n        <ListItem\n          isStatic\n          multiline\n          icon=\"revenue-split\"\n        >\n          <span className=\"title\">{lang('RevenueSharingAdsInfo2Title')}</span>\n          <span className=\"subtitle\">\n            {renderText(lang('RevenueSharingAdsInfo2Subtitle'), ['simple_markdown'])}\n          </span>\n        </ListItem>\n        <ListItem\n          isStatic\n          multiline\n          icon=\"nochannel\"\n        >\n          <span className=\"title\">{lang('RevenueSharingAdsInfo3Title')}</span>\n          <span className=\"subtitle\">\n            {renderText(lang('RevenueSharingAdsInfo3Subtitle', minLevelToRestrictAds), ['simple_markdown'])}\n          </span>\n        </ListItem>\n        <Separator className={styles.separator} />\n        <h3 className={styles.title}>{renderText(lang('RevenueSharingAdsInfo4Title'), ['simple_markdown'])}</h3>\n        <p className={styles.description}>\n          {renderText(lang('RevenueSharingAdsInfo4Subtitle2', ''), ['simple_markdown'])}\n          <SafeLink\n            url={lang('PromoteUrl')}\n            text={lang('LearnMoreArrow')}\n          />\n        </p>\n      </>\n    );\n  }, [lang, minLevelToRestrictAds]);\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      contentClassName={styles.content}\n      onClose={onClose}\n    >\n      {isRevenueSharing ? revenueSharingAdContent : regularAdContent}\n      <Button\n        size=\"smaller\"\n        onClick={onClose}\n      >\n        {lang('RevenueSharingAdsUnderstood')}\n      </Button>\n    </Modal>\n  );\n};\n\nexport default memo(AboutAdsModal);\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\n\nimport type { LangFn } from '../../hooks/useOldLang';\n\nimport { MAX_INT_32 } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { formatDateToString, formatTime, getDayStart } from '../../util/dates/dateFormat';\n\nimport useFlag from '../../hooks/useFlag';\nimport useOldLang from '../../hooks/useOldLang';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\n\nimport './CalendarModal.scss';\n\nconst MAX_SAFE_DATE = MAX_INT_32 * 1000;\nconst MIN_SAFE_DATE = 0;\n\nexport type OwnProps = {\n  selectedAt?: number;\n  minAt?: number;\n  maxAt?: number;\n  isFutureMode?: boolean;\n  isPastMode?: boolean;\n  isOpen: boolean;\n  withTimePicker?: boolean;\n  submitButtonLabel?: string;\n  secondButtonLabel?: string;\n  onClose: () => void;\n  onSubmit: (date: Date) => void;\n  onSecondButtonClick?: NoneToVoidFunction;\n};\n\nconst WEEKDAY_LETTERS = [\n  'lng_weekday1',\n  'lng_weekday2',\n  'lng_weekday3',\n  'lng_weekday4',\n  'lng_weekday5',\n  'lng_weekday6',\n  'lng_weekday7',\n];\n\nconst CalendarModal: FC<OwnProps> = ({\n  selectedAt,\n  minAt,\n  maxAt,\n  isFutureMode,\n  isPastMode,\n  isOpen,\n  withTimePicker,\n  submitButtonLabel,\n  secondButtonLabel,\n  onClose,\n  onSubmit,\n  onSecondButtonClick,\n}) => {\n  const lang = useOldLang();\n  const now = new Date();\n\n  const minDate = useMemo(() => {\n    if (isFutureMode && !minAt) return new Date();\n    return new Date(Math.max(minAt || MIN_SAFE_DATE, MIN_SAFE_DATE));\n  }, [isFutureMode, minAt]);\n  const maxDate = useMemo(() => {\n    if (isPastMode && !maxAt) return new Date();\n    return new Date(Math.min(maxAt || MAX_SAFE_DATE, MAX_SAFE_DATE));\n  }, [isPastMode, maxAt]);\n\n  const passedSelectedDate = useMemo(() => (selectedAt ? new Date(selectedAt) : new Date()), [selectedAt]);\n  const prevIsOpen = usePrevious(isOpen);\n  const [isTimeInputFocused, markTimeInputAsFocused] = useFlag(false);\n\n  const [selectedDate, setSelectedDate] = useState<Date>(passedSelectedDate);\n  const [currentMonthAndYear, setCurrentMonthAndYear] = useState<Date>(\n    new Date(selectedDate.getFullYear(), selectedDate.getMonth(), 1),\n  );\n  const [selectedHours, setSelectedHours] = useState<string>(\n    formatInputTime(passedSelectedDate.getHours()),\n  );\n  const [selectedMinutes, setSelectedMinutes] = useState<string>(\n    formatInputTime(passedSelectedDate.getMinutes()),\n  );\n\n  const selectedDay = formatDay(selectedDate.getFullYear(), selectedDate.getMonth(), selectedDate.getDate());\n  const currentYear = currentMonthAndYear.getFullYear();\n  const currentMonth = currentMonthAndYear.getMonth();\n\n  const isDisabled = (isFutureMode && selectedDate.getTime() < minDate.getTime())\n    || (isPastMode && selectedDate.getTime() > maxDate.getTime());\n\n  useEffect(() => {\n    if (!prevIsOpen && isOpen) {\n      setSelectedDate(passedSelectedDate);\n      setCurrentMonthAndYear(new Date(passedSelectedDate.getFullYear(), passedSelectedDate.getMonth(), 1));\n      if (withTimePicker) {\n        setSelectedHours(formatInputTime(passedSelectedDate.getHours()));\n        setSelectedMinutes(formatInputTime(passedSelectedDate.getMinutes()));\n      }\n    }\n  }, [passedSelectedDate, isOpen, prevIsOpen, withTimePicker]);\n\n  useEffect(() => {\n    if (isFutureMode && !isTimeInputFocused && selectedDate.getTime() < minDate.getTime()) {\n      setSelectedDate(minDate);\n      setSelectedHours(formatInputTime(minDate.getHours()));\n      setSelectedMinutes(formatInputTime(minDate.getMinutes()));\n    }\n  }, [isFutureMode, isTimeInputFocused, minDate, selectedDate]);\n\n  useEffect(() => {\n    if (isPastMode && !isTimeInputFocused && selectedDate.getTime() > maxDate.getTime()) {\n      setSelectedDate(maxDate);\n      setSelectedHours(formatInputTime(maxDate.getHours()));\n      setSelectedMinutes(formatInputTime(maxDate.getMinutes()));\n    }\n  }, [isFutureMode, isPastMode, isTimeInputFocused, maxDate, minDate, selectedDate]);\n\n  useEffect(() => {\n    if (selectedAt) {\n      const newSelectedDate = new Date(selectedAt);\n      setSelectedDate(newSelectedDate);\n      setSelectedHours(formatInputTime(newSelectedDate.getHours()));\n      setSelectedMinutes(formatInputTime(newSelectedDate.getMinutes()));\n    }\n  }, [selectedAt]);\n\n  const shouldDisableNextMonth = (isPastMode && currentYear >= now.getFullYear() && currentMonth >= now.getMonth())\n    || (maxDate && currentYear >= maxDate.getFullYear() && currentMonth >= maxDate.getMonth());\n  const shouldDisablePrevMonth = isFutureMode && currentYear <= now.getFullYear() && currentMonth <= now.getMonth();\n\n  const { prevMonthGrid, currentMonthGrid, nextMonthGrid } = useMemo(() => (\n    buildCalendarGrid(currentYear, currentMonth)\n  ), [currentMonth, currentYear]);\n\n  const submitLabel = useMemo(() => {\n    return submitButtonLabel || formatSubmitLabel(lang, selectedDate);\n  }, [lang, selectedDate, submitButtonLabel]);\n\n  function handlePrevMonth() {\n    setCurrentMonthAndYear((d) => {\n      const dateCopy = new Date(d);\n      dateCopy.setMonth(dateCopy.getMonth() - 1);\n\n      return dateCopy;\n    });\n  }\n\n  function handleNextMonth() {\n    setCurrentMonthAndYear((d) => {\n      const dateCopy = new Date(d);\n      dateCopy.setMonth(dateCopy.getMonth() + 1);\n\n      return dateCopy;\n    });\n  }\n\n  function handleDateSelect(date: number) {\n    setSelectedDate((d) => {\n      const dateCopy = new Date(d);\n      dateCopy.setDate(date);\n      dateCopy.setMonth(currentMonth);\n      dateCopy.setFullYear(currentYear);\n\n      return dateCopy;\n    });\n  }\n\n  const handleSubmit = useCallback(() => {\n    if (isFutureMode && selectedDate < minDate) {\n      onSubmit(minDate);\n    } else if (isPastMode && selectedDate > maxDate) {\n      onSubmit(maxDate);\n    } else {\n      onSubmit(selectedDate);\n    }\n  }, [isFutureMode, isPastMode, minDate, maxDate, onSubmit, selectedDate]);\n\n  const handleChangeHours = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value.replace(/[^\\d]+/g, '');\n    if (!value.length) {\n      setSelectedHours('');\n      e.target.value = '';\n      return;\n    }\n\n    const hours = Math.max(0, Math.min(Number(value), 23));\n\n    const date = new Date(selectedDate.getTime());\n    date.setHours(hours);\n    setSelectedDate(date);\n\n    const hoursStr = formatInputTime(hours);\n    setSelectedHours(hoursStr);\n    e.target.value = hoursStr;\n  }, [selectedDate]);\n\n  const handleChangeMinutes = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value.replace(/[^\\d]+/g, '');\n    if (!value.length) {\n      setSelectedMinutes('');\n      e.target.value = '';\n      return;\n    }\n\n    const minutes = Math.max(0, Math.min(Number(value), 59));\n\n    const date = new Date(selectedDate.getTime());\n    date.setMinutes(minutes);\n    setSelectedDate(date);\n\n    const minutesStr = formatInputTime(minutes);\n    setSelectedMinutes(minutesStr);\n    e.target.value = minutesStr;\n  }, [selectedDate]);\n\n  function renderTimePicker() {\n    return (\n      <div className=\"timepicker\">\n        <input\n          type=\"text\"\n          className=\"form-control\"\n          inputMode=\"decimal\"\n          value={selectedHours}\n          onChange={handleChangeHours}\n          onFocus={markTimeInputAsFocused}\n        />\n        :\n        <input\n          type=\"text\"\n          className=\"form-control\"\n          inputMode=\"decimal\"\n          value={selectedMinutes}\n          onChange={handleChangeMinutes}\n          onFocus={markTimeInputAsFocused}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      className=\"CalendarModal\"\n      onEnter={handleSubmit}\n    >\n      <div className=\"container\">\n        <div className=\"month-selector\">\n          <Button\n            round\n            size=\"smaller\"\n            color=\"translucent\"\n            onClick={onClose}\n          >\n            <i className=\"icon icon-close\" />\n          </Button>\n\n          <h4>\n            {lang(`lng_month${currentMonth + 1}`)}\n            {' '}\n            {currentYear}\n          </h4>\n\n          <Button\n            round\n            size=\"smaller\"\n            color=\"translucent\"\n            disabled={shouldDisablePrevMonth}\n            onClick={!shouldDisablePrevMonth ? handlePrevMonth : undefined}\n          >\n            <i className=\"icon icon-previous\" />\n          </Button>\n\n          <Button\n            round\n            size=\"smaller\"\n            color=\"translucent\"\n            disabled={shouldDisableNextMonth}\n            onClick={!shouldDisableNextMonth ? handleNextMonth : undefined}\n          >\n            <i className=\"icon icon-next\" />\n          </Button>\n        </div>\n      </div>\n\n      <div className=\"calendar-wrapper\">\n        <div className=\"calendar-grid\">\n          {WEEKDAY_LETTERS.map((day) => (\n            <div className=\"day-button faded weekday\">\n              <span>{lang(day)}</span>\n            </div>\n          ))}\n          {prevMonthGrid.map((gridDate) => (\n            <div className=\"day-button disabled\"><span>{gridDate}</span></div>\n          ))}\n          {currentMonthGrid.map((gridDate) => (\n            <div\n              role=\"button\"\n              tabIndex={0}\n              onClick={() => handleDateSelect(gridDate)}\n              className={buildClassName(\n                'day-button',\n                'div-button',\n                isDisabledDay(\n                  currentYear, currentMonth, gridDate, minDate, maxDate,\n                )\n                  ? 'disabled'\n                  : `${gridDate ? 'clickable' : ''}`,\n                selectedDay === formatDay(currentYear, currentMonth, gridDate) && 'selected',\n              )}\n            >\n              {Boolean(gridDate) && (\n                <span>{gridDate}</span>\n              )}\n            </div>\n          ))}\n          {nextMonthGrid.map((gridDate) => (\n            <div className=\"day-button disabled\"><span>{gridDate}</span></div>\n          ))}\n        </div>\n      </div>\n\n      {withTimePicker && renderTimePicker()}\n\n      <div className=\"footer\">\n        <div className=\"footer\">\n          <Button\n            onClick={handleSubmit}\n            disabled={isDisabled}\n          >\n            {submitLabel}\n          </Button>\n          {secondButtonLabel && (\n            <Button onClick={onSecondButtonClick} isText>\n              {secondButtonLabel}\n            </Button>\n          )}\n        </div>\n      </div>\n    </Modal>\n  );\n};\n\nfunction buildCalendarGrid(year: number, month: number) {\n  const prevMonthGrid: number[] = [];\n  const currentMonthGrid: number[] = [];\n  const nextMonthGrid: number[] = [];\n\n  const date = new Date();\n  date.setDate(1);\n  date.setMonth(month);\n  date.setFullYear(year);\n  const firstDay = date.getDay() || 7;\n  const totalDaysInPrevMonth = new Date(year, month, 0).getDate();\n\n  for (let i = 1; i < firstDay; i++) {\n    prevMonthGrid.push(totalDaysInPrevMonth - firstDay + i + 1);\n  }\n\n  while (date.getMonth() === month) {\n    const gridDate = date.getDate();\n    currentMonthGrid.push(gridDate);\n    date.setDate(gridDate + 1);\n  }\n\n  const lastRowDaysCount = (currentMonthGrid.length + prevMonthGrid.length) % 7;\n  if (lastRowDaysCount > 0) {\n    for (let i = 1; i <= 7 - lastRowDaysCount; i++) {\n      nextMonthGrid.push(i);\n    }\n  }\n\n  return { prevMonthGrid, currentMonthGrid, nextMonthGrid };\n}\n\nfunction isDisabledDay(year: number, month: number, day: number, minDate?: Date, maxDate?: Date) {\n  const selectedDay = new Date(year, month, day);\n  const fixedMinDate = minDate && getDayStart(minDate);\n  const fixedMaxDate = maxDate && getDayStart(maxDate);\n\n  if (fixedMaxDate && selectedDay > fixedMaxDate) {\n    return true;\n  } else if (fixedMinDate && selectedDay < fixedMinDate) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction formatInputTime(value: string | number) {\n  return String(value).padStart(2, '0');\n}\n\nfunction formatDay(year: number, month: number, day: number) {\n  return `${year}-${month + 1}-${day}`;\n}\n\nfunction formatSubmitLabel(lang: LangFn, date: Date) {\n  const day = formatDateToString(date, lang.code);\n  const today = formatDateToString(new Date(), lang.code);\n\n  if (day === today) {\n    return lang('Conversation.ScheduleMessage.SendToday', formatTime(lang, date));\n  }\n\n  return lang('Conversation.ScheduleMessage.SendOn', [day, formatTime(lang, date)]);\n}\n\nexport default memo(CalendarModal);\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, getGlobal } from '../../global';\n\nimport type { ApiTopic } from '../../api/types';\nimport type { ThreadId } from '../../types';\n\nimport { CHAT_HEIGHT_PX } from '../../config';\nimport { getCanPostInChat, isUserId } from '../../global/helpers';\nimport buildClassName from '../../util/buildClassName';\nimport { REM } from './helpers/mediaDimensions';\nimport renderText from './helpers/renderText';\n\nimport useInfiniteScroll from '../../hooks/useInfiniteScroll';\nimport useInputFocusOnOpen from '../../hooks/useInputFocusOnOpen';\nimport useKeyboardListNavigation from '../../hooks/useKeyboardListNavigation';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport Button from '../ui/Button';\nimport InfiniteScroll from '../ui/InfiniteScroll';\nimport InputText from '../ui/InputText';\nimport ListItem from '../ui/ListItem';\nimport Loading from '../ui/Loading';\nimport Modal from '../ui/Modal';\nimport Transition from '../ui/Transition';\nimport GroupChatInfo from './GroupChatInfo';\nimport PrivateChatInfo from './PrivateChatInfo';\nimport TopicIcon from './TopicIcon';\n\nimport './ChatOrUserPicker.scss';\n\nexport type OwnProps = {\n  currentUserId?: string;\n  chatOrUserIds: string[];\n  isOpen: boolean;\n  searchPlaceholder: string;\n  search: string;\n  className?: string;\n  loadMore?: NoneToVoidFunction;\n  onSearchChange: (search: string) => void;\n  onSelectChatOrUser: (chatOrUserId: string, threadId?: ThreadId) => void;\n  onClose: NoneToVoidFunction;\n  onCloseAnimationEnd?: NoneToVoidFunction;\n};\n\nconst CHAT_LIST_SLIDE = 0;\nconst TOPIC_LIST_SLIDE = 1;\nconst TOPIC_ICON_SIZE = 2.75 * REM;\n\nconst ChatOrUserPicker: FC<OwnProps> = ({\n  isOpen,\n  currentUserId,\n  chatOrUserIds,\n  search,\n  searchPlaceholder,\n  className,\n  loadMore,\n  onSearchChange,\n  onSelectChatOrUser,\n  onClose,\n  onCloseAnimationEnd,\n}) => {\n  const { loadTopics } = getActions();\n\n  const lang = useOldLang();\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const topicContainerRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const searchRef = useRef<HTMLInputElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const topicSearchRef = useRef<HTMLInputElement>(null);\n  const [viewportIds, getMore] = useInfiniteScroll(loadMore, chatOrUserIds, Boolean(search));\n  const [forumId, setForumId] = useState<string | undefined>(undefined);\n  const [topicSearch, setTopicSearch] = useState<string>('');\n  const activeKey = forumId ? TOPIC_LIST_SLIDE : CHAT_LIST_SLIDE;\n  const viewportOffset = chatOrUserIds!.indexOf(viewportIds![0]);\n\n  const resetSearch = useLastCallback(() => {\n    onSearchChange('');\n  });\n  useInputFocusOnOpen(searchRef, isOpen && activeKey === CHAT_LIST_SLIDE, resetSearch);\n  useInputFocusOnOpen(topicSearchRef, isOpen && activeKey === TOPIC_LIST_SLIDE);\n\n  const [topicIds, topics] = useMemo(() => {\n    const global = getGlobal();\n    const chatsById = global.chats.byId;\n    const chatFullInfoById = global.chats.fullInfoById;\n\n    const topicsResult = forumId ? chatsById[forumId].topics : undefined;\n    if (!topicsResult) {\n      return [undefined, undefined];\n    }\n\n    const searchTitle = topicSearch.toLowerCase();\n\n    const result = topicsResult\n      ? Object.values(topicsResult).reduce((acc, topic) => {\n        if (\n          getCanPostInChat(chatsById[forumId!], topic.id, undefined, chatFullInfoById[forumId!])\n          && (!searchTitle || topic.title.toLowerCase().includes(searchTitle))\n        ) {\n          acc[topic.id] = topic;\n        }\n\n        return acc;\n      }, {} as Record<number, ApiTopic>)\n      : topicsResult;\n\n    return [Object.keys(result).map(Number), result];\n  }, [forumId, topicSearch]);\n\n  const handleHeaderBackClick = useLastCallback(() => {\n    setForumId(undefined);\n    setTopicSearch('');\n  });\n\n  const handleSearchChange = useLastCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    onSearchChange(e.currentTarget.value);\n  });\n\n  const handleTopicSearchChange = useLastCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setTopicSearch(e.currentTarget.value);\n  });\n\n  const handleKeyDown = useKeyboardListNavigation(containerRef, isOpen, (index) => {\n    if (viewportIds && viewportIds.length > 0) {\n      const chatsById = getGlobal().chats.byId;\n\n      const chatId = viewportIds[index === -1 ? 0 : index];\n      const chat = chatsById[chatId];\n      if (chat?.isForum) {\n        if (!chat.topics) loadTopics({ chatId });\n        setForumId(chatId);\n      } else {\n        onSelectChatOrUser(chatId);\n      }\n    }\n  }, '.ListItem-button', true);\n\n  const handleTopicKeyDown = useKeyboardListNavigation(topicContainerRef, isOpen, (index) => {\n    if (topicIds?.length) {\n      onSelectChatOrUser(forumId!, topicIds[index === -1 ? 0 : index]);\n    }\n  }, '.ListItem-button', true);\n\n  const handleClick = useLastCallback((e: React.MouseEvent, chatId: string) => {\n    const chatsById = getGlobal().chats.byId;\n    const chat = chatsById?.[chatId];\n    if (chat?.isForum) {\n      if (!chat.topics) loadTopics({ chatId });\n      setForumId(chatId);\n      resetSearch();\n    } else {\n      onSelectChatOrUser(chatId);\n    }\n  });\n\n  const handleTopicClick = useLastCallback((e: React.MouseEvent, topicId: number) => {\n    onSelectChatOrUser(forumId!, topicId);\n  });\n\n  function renderTopicList() {\n    return (\n      <>\n        <div className=\"modal-header\" dir={lang.isRtl ? 'rtl' : undefined}>\n          <Button round color=\"translucent\" size=\"smaller\" ariaLabel={lang('Back')} onClick={handleHeaderBackClick}>\n            <i className=\"icon icon-arrow-left\" />\n          </Button>\n          <InputText\n            ref={topicSearchRef}\n            value={topicSearch}\n            onChange={handleTopicSearchChange}\n            onKeyDown={handleTopicKeyDown}\n            placeholder={searchPlaceholder}\n          />\n        </div>\n        <InfiniteScroll\n          ref={topicContainerRef}\n          className=\"picker-list custom-scroll\"\n          items={topicIds}\n          withAbsolutePositioning\n          maxHeight={!topicIds ? 0 : topicIds.length * CHAT_HEIGHT_PX}\n          onKeyDown={handleTopicKeyDown}\n        >\n          {topicIds\n            ? topicIds.map((topicId, i) => (\n              <ListItem\n                key={`${forumId}_${topicId}`}\n                className=\"chat-item-clickable force-rounded-corners small-icon topic-item\"\n                style={`top: ${i * CHAT_HEIGHT_PX}px;`}\n                onClick={handleTopicClick}\n                clickArg={topicId}\n              >\n                <TopicIcon\n                  size={TOPIC_ICON_SIZE}\n                  topic={topics[topicId]}\n                  className=\"topic-icon\"\n                  letterClassName=\"topic-icon-letter\"\n                />\n                <div dir=\"auto\" className=\"fullName\">{renderText(topics[topicId].title)}</div>\n              </ListItem>\n            ))\n            : <Loading />}\n        </InfiniteScroll>\n      </>\n    );\n  }\n\n  function renderChatList() {\n    return (\n      <>\n        <div className=\"modal-header\" dir={lang.isRtl ? 'rtl' : undefined}>\n          <Button\n            round\n            color=\"translucent\"\n            size=\"smaller\"\n            ariaLabel={lang('Close')}\n            onClick={onClose}\n          >\n            <i className=\"icon icon-close\" />\n          </Button>\n          <InputText\n            ref={searchRef}\n            value={search}\n            onChange={handleSearchChange}\n            onKeyDown={handleKeyDown}\n            placeholder={searchPlaceholder}\n          />\n        </div>\n        {viewportIds?.length ? (\n          <InfiniteScroll\n            ref={containerRef}\n            className=\"picker-list custom-scroll\"\n            items={viewportIds}\n            onLoadMore={getMore}\n            withAbsolutePositioning\n            maxHeight={chatOrUserIds!.length * CHAT_HEIGHT_PX}\n            onKeyDown={handleKeyDown}\n          >\n            {viewportIds.map((id, i) => (\n              <ListItem\n                key={id}\n                className=\"chat-item-clickable force-rounded-corners small-icon\"\n                style={`height: ${CHAT_HEIGHT_PX}px; top: ${(viewportOffset + i) * CHAT_HEIGHT_PX}px;`}\n                onClick={handleClick}\n                clickArg={id}\n              >\n                {isUserId(id) ? (\n                  <PrivateChatInfo\n                    status={id === currentUserId ? lang('SavedMessagesInfo') : undefined}\n                    userId={id}\n                  />\n                ) : (\n                  <GroupChatInfo chatId={id} />\n                )}\n              </ListItem>\n            ))}\n          </InfiniteScroll>\n        ) : viewportIds && !viewportIds.length ? (\n          <p className=\"no-results\">{lang('lng_blocked_list_not_found')}</p>\n        ) : (\n          <Loading />\n        )}\n      </>\n    );\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      className={buildClassName('ChatOrUserPicker', className)}\n      onClose={onClose}\n      onCloseAnimationEnd={onCloseAnimationEnd}\n    >\n      <Transition activeKey={activeKey} name=\"slideFade\" slideClassName=\"ChatOrUserPicker_slide\">\n        {() => {\n          return activeKey === TOPIC_LIST_SLIDE ? renderTopicList() : renderChatList();\n        }}\n      </Transition>\n    </Modal>\n  );\n};\n\nexport default memo(ChatOrUserPicker);\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiCountry } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useOldLang from '../../hooks/useOldLang';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport Icon from './icons/Icon';\nimport Picker from './Picker';\n\nimport styles from './CountryPickerModal.module.scss';\n\nexport type OwnProps = {\n  isOpen: boolean;\n  onClose: () => void;\n  onSubmit: (value: string[]) => void;\n  countryList: ApiCountry[];\n  selectionLimit?: number | undefined;\n};\n\nconst CountryPickerModal: FC<OwnProps> = ({\n  isOpen,\n  onClose,\n  onSubmit,\n  countryList,\n  selectionLimit,\n}) => {\n  const { showNotification } = getActions();\n\n  const lang = useOldLang();\n\n  const [selectedCountryIds, setSelectedCountryIds] = useState<string[]>([]);\n  const prevSelectedCountryIds = usePrevious(selectedCountryIds);\n  const noPickerScrollRestore = prevSelectedCountryIds === selectedCountryIds;\n\n  const displayedIds = useMemo(() => {\n    if (!countryList) {\n      return [];\n    }\n\n    return countryList\n      .filter((country) => !country.isHidden)\n      .map((country) => country.iso2);\n  }, [countryList]);\n\n  const handleSelectedIdsChange = useLastCallback((newSelectedIds: string[]) => {\n    if (selectionLimit && newSelectedIds.length > selectionLimit) {\n      showNotification({\n        message: lang('BoostingSelectUpToWarningCountries', selectionLimit),\n      });\n      return;\n    }\n    setSelectedCountryIds(newSelectedIds);\n  });\n\n  const handleSubmit = useLastCallback(() => {\n    onSubmit(selectedCountryIds);\n    onClose();\n  });\n\n  return (\n    <Modal\n      className={styles.root}\n      isOpen={isOpen}\n      onClose={onClose}\n      onEnter={handleSubmit}\n    >\n      <div className={styles.container}>\n        <div className={styles.pickerSelector}>\n          <Button\n            round\n            size=\"smaller\"\n            color=\"translucent\"\n            onClick={onClose}\n          >\n            <Icon name=\"close\" />\n          </Button>\n\n          <h4 className={styles.pickerTitle}>\n            {lang('BoostingSelectCountry')}\n          </h4>\n        </div>\n      </div>\n\n      <div className={buildClassName(styles.main, 'custom-scroll')}>\n        <Picker\n          className={styles.picker}\n          itemIds={displayedIds}\n          selectedIds={selectedCountryIds}\n          onSelectedIdsChange={handleSelectedIdsChange}\n          noScrollRestore={noPickerScrollRestore}\n          isCountryList\n          countryList={countryList}\n        />\n      </div>\n\n      <div className={styles.footer}>\n        <Button\n          size=\"smaller\"\n          onClick={handleSubmit}\n        >\n          {lang('SelectCountries.OK')}\n        </Button>\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(CountryPickerModal);\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useRef,\n} from '../../lib/teact/teact';\nimport { getGlobal, withGlobal } from '../../global';\n\nimport type {\n  ApiAvailableReaction, ApiReaction, ApiSticker, ApiStickerSet,\n} from '../../api/types';\nimport type { StickerSetOrReactionsSetOrRecent } from '../../types';\n\nimport {\n  FAVORITE_SYMBOL_SET_ID,\n  POPULAR_SYMBOL_SET_ID,\n  RECENT_SYMBOL_SET_ID,\n  SLIDE_TRANSITION_DURATION,\n  STICKER_PICKER_MAX_SHARED_COVERS,\n  STICKER_SIZE_PICKER_HEADER,\n  TOP_SYMBOL_SET_ID,\n} from '../../config';\nimport { isSameReaction } from '../../global/helpers';\nimport {\n  selectCanPlayAnimatedEmojis,\n  selectChatFullInfo,\n  selectIsAlwaysHighPriorityEmoji,\n  selectIsChatWithSelf,\n  selectIsCurrentUserPremium,\n} from '../../global/selectors';\nimport animateHorizontalScroll from '../../util/animateHorizontalScroll';\nimport buildClassName from '../../util/buildClassName';\nimport { pickTruthy, unique } from '../../util/iteratees';\nimport { IS_TOUCH_ENV } from '../../util/windowEnvironment';\nimport { REM } from './helpers/mediaDimensions';\n\nimport useAppLayout from '../../hooks/useAppLayout';\nimport useHorizontalScroll from '../../hooks/useHorizontalScroll';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useOldLang from '../../hooks/useOldLang';\nimport useScrolledState from '../../hooks/useScrolledState';\nimport useAsyncRendering from '../right/hooks/useAsyncRendering';\nimport { useStickerPickerObservers } from './hooks/useStickerPickerObservers';\n\nimport StickerSetCover from '../middle/composer/StickerSetCover';\nimport Button from '../ui/Button';\nimport Loading from '../ui/Loading';\nimport Icon from './icons/Icon';\nimport StickerButton from './StickerButton';\nimport StickerSet from './StickerSet';\n\nimport pickerStyles from '../middle/composer/StickerPicker.module.scss';\nimport styles from './CustomEmojiPicker.module.scss';\n\ntype OwnProps = {\n  chatId?: string;\n  className?: string;\n  pickerListClassName?: string;\n  isHidden?: boolean;\n  loadAndPlay: boolean;\n  idPrefix?: string;\n  withDefaultTopicIcons?: boolean;\n  onCustomEmojiSelect: (sticker: ApiSticker) => void;\n  onReactionSelect?: (reaction: ApiReaction) => void;\n  selectedReactionIds?: string[];\n  isStatusPicker?: boolean;\n  isReactionPicker?: boolean;\n  isTranslucent?: boolean;\n  onContextMenuOpen?: NoneToVoidFunction;\n  onContextMenuClose?: NoneToVoidFunction;\n  onContextMenuClick?: NoneToVoidFunction;\n};\n\ntype StateProps = {\n  customEmojisById?: Record<string, ApiSticker>;\n  recentCustomEmojiIds?: string[];\n  recentStatusEmojis?: ApiSticker[];\n  chatEmojiSetId?: string;\n  topReactions?: ApiReaction[];\n  recentReactions?: ApiReaction[];\n  defaultTagReactions?: ApiReaction[];\n  stickerSetsById: Record<string, ApiStickerSet>;\n  availableReactions?: ApiAvailableReaction[];\n  addedCustomEmojiIds?: string[];\n  defaultTopicIconsId?: string;\n  defaultStatusIconsId?: string;\n  customEmojiFeaturedIds?: string[];\n  canAnimate?: boolean;\n  isSavedMessages?: boolean;\n  isCurrentUserPremium?: boolean;\n};\n\nconst HEADER_BUTTON_WIDTH = 2.5 * REM; // px (including margin)\n\nconst DEFAULT_ID_PREFIX = 'custom-emoji-set';\nconst TOP_REACTIONS_COUNT = 16;\nconst RECENT_REACTIONS_COUNT = 32;\nconst FADED_BUTTON_SET_IDS = new Set([RECENT_SYMBOL_SET_ID, FAVORITE_SYMBOL_SET_ID, POPULAR_SYMBOL_SET_ID]);\nconst STICKER_SET_IDS_WITH_COVER = new Set([\n  RECENT_SYMBOL_SET_ID,\n  FAVORITE_SYMBOL_SET_ID,\n  POPULAR_SYMBOL_SET_ID,\n]);\n\nconst CustomEmojiPicker: FC<OwnProps & StateProps> = ({\n  className,\n  pickerListClassName,\n  isHidden,\n  loadAndPlay,\n  addedCustomEmojiIds,\n  customEmojisById,\n  recentCustomEmojiIds,\n  selectedReactionIds,\n  recentStatusEmojis,\n  stickerSetsById,\n  chatEmojiSetId,\n  topReactions,\n  recentReactions,\n  availableReactions,\n  idPrefix = DEFAULT_ID_PREFIX,\n  customEmojiFeaturedIds,\n  canAnimate,\n  isReactionPicker,\n  isStatusPicker,\n  isTranslucent,\n  isSavedMessages,\n  isCurrentUserPremium,\n  withDefaultTopicIcons,\n  defaultTopicIconsId,\n  defaultStatusIconsId,\n  defaultTagReactions,\n  onCustomEmojiSelect,\n  onReactionSelect,\n  onContextMenuOpen,\n  onContextMenuClose,\n  onContextMenuClick,\n}) => {\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const headerRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const sharedCanvasRef = useRef<HTMLCanvasElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const sharedCanvasHqRef = useRef<HTMLCanvasElement>(null);\n\n  const { isMobile } = useAppLayout();\n  const {\n    handleScroll: handleContentScroll,\n    isAtBeginning: shouldHideTopBorder,\n  } = useScrolledState();\n\n  const recentCustomEmojis = useMemo(() => {\n    return isStatusPicker\n      ? recentStatusEmojis\n      : Object.values(pickTruthy(customEmojisById!, recentCustomEmojiIds!));\n  }, [customEmojisById, isStatusPicker, recentCustomEmojiIds, recentStatusEmojis]);\n\n  const prefix = `${idPrefix}-custom-emoji`;\n  const {\n    activeSetIndex,\n    observeIntersectionForSet,\n    observeIntersectionForPlayingItems,\n    observeIntersectionForShowingItems,\n    observeIntersectionForCovers,\n    selectStickerSet,\n  } = useStickerPickerObservers(containerRef, headerRef, prefix, isHidden);\n\n  const lang = useOldLang();\n\n  const areAddedLoaded = Boolean(addedCustomEmojiIds);\n\n  const allSets = useMemo(() => {\n    const defaultSets: StickerSetOrReactionsSetOrRecent[] = [];\n\n    if (isReactionPicker && isSavedMessages) {\n      if (defaultTagReactions?.length) {\n        defaultSets.push({\n          id: TOP_SYMBOL_SET_ID,\n          accessHash: '',\n          title: lang('PremiumPreviewTags'),\n          reactions: defaultTagReactions,\n          count: defaultTagReactions.length,\n          isEmoji: true,\n        });\n      }\n    }\n\n    if (isReactionPicker && !isSavedMessages) {\n      const topReactionsSlice = topReactions?.slice(0, TOP_REACTIONS_COUNT) || [];\n      if (topReactionsSlice?.length) {\n        defaultSets.push({\n          id: TOP_SYMBOL_SET_ID,\n          accessHash: '',\n          title: lang('Reactions'),\n          reactions: topReactionsSlice,\n          count: topReactionsSlice.length,\n          isEmoji: true,\n        });\n      }\n\n      const cleanRecentReactions = (recentReactions || [])\n        .filter((reaction) => !topReactionsSlice.some((topReaction) => isSameReaction(topReaction, reaction)))\n        .slice(0, RECENT_REACTIONS_COUNT);\n      const cleanAvailableReactions = (availableReactions || [])\n        .filter(({ isInactive }) => !isInactive)\n        .map(({ reaction }) => reaction)\n        .filter((reaction) => {\n          return !topReactionsSlice.some((topReaction) => isSameReaction(topReaction, reaction))\n            && !cleanRecentReactions.some((topReaction) => isSameReaction(topReaction, reaction));\n        });\n      if (cleanAvailableReactions?.length || cleanRecentReactions?.length) {\n        const isPopular = !cleanRecentReactions?.length;\n        const allRecentReactions = cleanRecentReactions.concat(cleanAvailableReactions);\n        defaultSets.push({\n          id: isPopular ? POPULAR_SYMBOL_SET_ID : RECENT_SYMBOL_SET_ID,\n          accessHash: '',\n          title: lang(isPopular ? 'PopularReactions' : 'RecentStickers'),\n          reactions: allRecentReactions,\n          count: allRecentReactions.length,\n          isEmoji: true,\n        });\n      }\n    } else if (isStatusPicker) {\n      const defaultStatusIconsPack = stickerSetsById[defaultStatusIconsId!];\n      if (defaultStatusIconsPack?.stickers?.length) {\n        const stickers = (defaultStatusIconsPack.stickers || []).concat(recentCustomEmojis || []);\n        defaultSets.push({\n          ...defaultStatusIconsPack,\n          stickers,\n          count: stickers.length,\n          id: RECENT_SYMBOL_SET_ID,\n          title: lang('RecentStickers'),\n        });\n      }\n    } else if (withDefaultTopicIcons) {\n      const defaultTopicIconsPack = stickerSetsById[defaultTopicIconsId!];\n      if (defaultTopicIconsPack.stickers?.length) {\n        defaultSets.push({\n          ...defaultTopicIconsPack,\n          id: RECENT_SYMBOL_SET_ID,\n          title: lang('RecentStickers'),\n        });\n      }\n    } else if (recentCustomEmojis?.length) {\n      defaultSets.push({\n        id: RECENT_SYMBOL_SET_ID,\n        accessHash: '0',\n        title: lang('RecentStickers'),\n        stickers: recentCustomEmojis,\n        count: recentCustomEmojis.length,\n        isEmoji: true,\n      });\n    }\n\n    const userSetIds = [...(addedCustomEmojiIds || [])];\n    if (chatEmojiSetId) {\n      userSetIds.unshift(chatEmojiSetId);\n    }\n\n    const setIdsToDisplay = unique(userSetIds.concat(customEmojiFeaturedIds || []));\n\n    const setsToDisplay = Object.values(pickTruthy(stickerSetsById, setIdsToDisplay));\n\n    return [\n      ...defaultSets,\n      ...setsToDisplay,\n    ];\n  }, [\n    addedCustomEmojiIds, isReactionPicker, isStatusPicker, withDefaultTopicIcons, recentCustomEmojis,\n    customEmojiFeaturedIds, stickerSetsById, topReactions, availableReactions, lang, recentReactions,\n    defaultStatusIconsId, defaultTopicIconsId, isSavedMessages, defaultTagReactions, chatEmojiSetId,\n  ]);\n\n  const noPopulatedSets = useMemo(() => (\n    areAddedLoaded\n    && allSets.filter((set) => set.stickers?.length).length === 0\n  ), [allSets, areAddedLoaded]);\n\n  const canRenderContent = useAsyncRendering([], SLIDE_TRANSITION_DURATION);\n  const shouldRenderContent = areAddedLoaded && canRenderContent && !noPopulatedSets;\n\n  useHorizontalScroll(headerRef, isMobile || !shouldRenderContent);\n\n  // Scroll container and header when active set changes\n  useEffect(() => {\n    if (!areAddedLoaded) {\n      return;\n    }\n\n    const header = headerRef.current;\n    if (!header) {\n      return;\n    }\n\n    const newLeft = activeSetIndex * HEADER_BUTTON_WIDTH - (header.offsetWidth / 2 - HEADER_BUTTON_WIDTH / 2);\n\n    animateHorizontalScroll(header, newLeft);\n  }, [areAddedLoaded, activeSetIndex]);\n\n  const handleEmojiSelect = useLastCallback((emoji: ApiSticker) => {\n    onCustomEmojiSelect(emoji);\n  });\n\n  const handleReactionSelect = useLastCallback((reaction: ApiReaction) => {\n    onReactionSelect?.(reaction);\n  });\n\n  function renderCover(stickerSet: StickerSetOrReactionsSetOrRecent, index: number) {\n    const firstSticker = stickerSet.stickers?.[0];\n    const buttonClassName = buildClassName(\n      pickerStyles.stickerCover,\n      index === activeSetIndex && styles.activated,\n    );\n\n    const withSharedCanvas = index < STICKER_PICKER_MAX_SHARED_COVERS;\n    const isHq = selectIsAlwaysHighPriorityEmoji(getGlobal(), stickerSet as ApiStickerSet);\n\n    if (stickerSet.id === TOP_SYMBOL_SET_ID) {\n      return undefined;\n    }\n\n    if (STICKER_SET_IDS_WITH_COVER.has(stickerSet.id) || stickerSet.hasThumbnail || !firstSticker) {\n      const isRecent = stickerSet.id === RECENT_SYMBOL_SET_ID || stickerSet.id === POPULAR_SYMBOL_SET_ID;\n      const isFaded = FADED_BUTTON_SET_IDS.has(stickerSet.id);\n      return (\n        <Button\n          key={stickerSet.id}\n          className={buttonClassName}\n          ariaLabel={stickerSet.title}\n          round\n          faded={isFaded}\n          color=\"translucent\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => selectStickerSet(isRecent ? 0 : index)}\n        >\n          {isRecent ? (\n            <Icon name=\"recent\" />\n          ) : (\n            <StickerSetCover\n              stickerSet={stickerSet as ApiStickerSet}\n              noPlay={!canAnimate || !loadAndPlay}\n              forcePlayback\n              observeIntersection={observeIntersectionForCovers}\n              sharedCanvasRef={withSharedCanvas ? (isHq ? sharedCanvasHqRef : sharedCanvasRef) : undefined}\n            />\n          )}\n        </Button>\n      );\n    }\n\n    return (\n      <StickerButton\n        key={stickerSet.id}\n        sticker={firstSticker}\n        size={STICKER_SIZE_PICKER_HEADER}\n        title={stickerSet.title}\n        className={buttonClassName}\n        noPlay={!canAnimate || !loadAndPlay}\n        observeIntersection={observeIntersectionForCovers}\n        noContextMenu\n        isCurrentUserPremium\n        sharedCanvasRef={withSharedCanvas ? (isHq ? sharedCanvasHqRef : sharedCanvasRef) : undefined}\n        withTranslucentThumb={isTranslucent}\n        onClick={selectStickerSet}\n        clickArg={index}\n        forcePlayback\n      />\n    );\n  }\n\n  const fullClassName = buildClassName('StickerPicker', styles.root, className);\n\n  if (!shouldRenderContent) {\n    return (\n      <div className={fullClassName}>\n        {noPopulatedSets ? (\n          <div className={pickerStyles.pickerDisabled}>{lang('NoStickers')}</div>\n        ) : (\n          <Loading />\n        )}\n      </div>\n    );\n  }\n\n  const headerClassName = buildClassName(\n    pickerStyles.header,\n    'no-scrollbar',\n    !shouldHideTopBorder && pickerStyles.headerWithBorder,\n  );\n  const listClassName = buildClassName(\n    pickerStyles.main,\n    pickerStyles.main_customEmoji,\n    IS_TOUCH_ENV ? 'no-scrollbar' : 'custom-scroll',\n    pickerListClassName,\n    pickerStyles.hasHeader,\n  );\n\n  return (\n    <div className={fullClassName}>\n      <div\n        ref={headerRef}\n        className={headerClassName}\n      >\n        <div className=\"shared-canvas-container\">\n          <canvas ref={sharedCanvasRef} className=\"shared-canvas\" />\n          <canvas ref={sharedCanvasHqRef} className=\"shared-canvas\" />\n          {allSets.map(renderCover)}\n        </div>\n      </div>\n      <div\n        ref={containerRef}\n        onScroll={handleContentScroll}\n        className={listClassName}\n      >\n        {allSets.map((stickerSet, i) => {\n          const shouldHideHeader = stickerSet.id === TOP_SYMBOL_SET_ID\n            || (stickerSet.id === RECENT_SYMBOL_SET_ID && (withDefaultTopicIcons || isStatusPicker));\n          const isChatEmojiSet = stickerSet.id === chatEmojiSetId;\n\n          return (\n            <StickerSet\n              key={stickerSet.id}\n              stickerSet={stickerSet}\n              loadAndPlay={Boolean(canAnimate && loadAndPlay)}\n              index={i}\n              idPrefix={prefix}\n              observeIntersection={observeIntersectionForSet}\n              observeIntersectionForPlayingItems={observeIntersectionForPlayingItems}\n              observeIntersectionForShowingItems={observeIntersectionForShowingItems}\n              isNearActive={activeSetIndex >= i - 1 && activeSetIndex <= i + 1}\n              isSavedMessages={isSavedMessages}\n              isStatusPicker={isStatusPicker}\n              isReactionPicker={isReactionPicker}\n              shouldHideHeader={shouldHideHeader}\n              withDefaultTopicIcon={withDefaultTopicIcons && stickerSet.id === RECENT_SYMBOL_SET_ID}\n              withDefaultStatusIcon={isStatusPicker && stickerSet.id === RECENT_SYMBOL_SET_ID}\n              isChatEmojiSet={isChatEmojiSet}\n              isCurrentUserPremium={isCurrentUserPremium}\n              selectedReactionIds={selectedReactionIds}\n              availableReactions={availableReactions}\n              isTranslucent={isTranslucent}\n              onReactionSelect={handleReactionSelect}\n              onStickerSelect={handleEmojiSelect}\n              onContextMenuOpen={onContextMenuOpen}\n              onContextMenuClose={onContextMenuClose}\n              onContextMenuClick={onContextMenuClick}\n              forcePlayback\n            />\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { chatId, isStatusPicker, isReactionPicker }): StateProps => {\n    const {\n      stickers: {\n        setsById: stickerSetsById,\n      },\n      customEmojis: {\n        byId: customEmojisById,\n        featuredIds: customEmojiFeaturedIds,\n        statusRecent: {\n          emojis: recentStatusEmojis,\n        },\n      },\n      recentCustomEmojis: recentCustomEmojiIds,\n      reactions: {\n        availableReactions,\n        recentReactions,\n        topReactions,\n        defaultTags,\n      },\n    } = global;\n\n    const isSavedMessages = Boolean(chatId && selectIsChatWithSelf(global, chatId));\n    const chatFullInfo = chatId ? selectChatFullInfo(global, chatId) : undefined;\n\n    return {\n      customEmojisById: !isStatusPicker ? customEmojisById : undefined,\n      recentCustomEmojiIds: !isStatusPicker ? recentCustomEmojiIds : undefined,\n      recentStatusEmojis: isStatusPicker ? recentStatusEmojis : undefined,\n      stickerSetsById,\n      addedCustomEmojiIds: global.customEmojis.added.setIds,\n      canAnimate: selectCanPlayAnimatedEmojis(global),\n      isSavedMessages,\n      isCurrentUserPremium: selectIsCurrentUserPremium(global),\n      customEmojiFeaturedIds,\n      defaultTopicIconsId: global.defaultTopicIconsId,\n      defaultStatusIconsId: global.defaultStatusIconsId,\n      topReactions: isReactionPicker ? topReactions : undefined,\n      recentReactions: isReactionPicker ? recentReactions : undefined,\n      chatEmojiSetId: chatFullInfo?.emojiSet?.id,\n      availableReactions: isReactionPicker ? availableReactions : undefined,\n      defaultTagReactions: isReactionPicker ? defaultTags : undefined,\n    };\n  },\n)(CustomEmojiPicker));\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useRef,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiSticker, ApiStickerSet } from '../../api/types';\n\nimport { selectCanPlayAnimatedEmojis } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\n\nimport { useIntersectionObserver } from '../../hooks/useIntersectionObserver';\nimport useOldLang from '../../hooks/useOldLang';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport Modal from '../ui/Modal';\nimport StickerSetCard from './StickerSetCard';\n\nimport styles from './CustomEmojiSetsModal.module.scss';\n\nexport type OwnProps = {\n  customEmojiSetIds?: string[];\n  onClose: () => void;\n};\n\ntype StateProps = {\n  customEmojiSets?: ApiStickerSet[];\n  canPlayAnimatedEmojis?: boolean;\n};\n\nconst CustomEmojiSetsModal: FC<OwnProps & StateProps> = ({\n  customEmojiSets,\n  canPlayAnimatedEmojis,\n  onClose,\n}) => {\n  const { openStickerSet } = getActions();\n  const lang = useOldLang();\n\n  // eslint-disable-next-line no-null/no-null\n  const customEmojiModalRef = useRef<HTMLDivElement>(null);\n  const { observe: observeIntersectionForCovers } = useIntersectionObserver({\n    rootRef: customEmojiModalRef, isDisabled: !customEmojiSets,\n  });\n\n  const prevCustomEmojiSets = usePrevious(customEmojiSets);\n  const renderingCustomEmojiSets = customEmojiSets || prevCustomEmojiSets;\n\n  const handleSetClick = useCallback((sticker: ApiSticker) => {\n    openStickerSet({\n      stickerSetInfo: sticker.stickerSetInfo,\n    });\n  }, [openStickerSet]);\n\n  return (\n    <Modal\n      isOpen={Boolean(customEmojiSets)}\n      className={styles.root}\n      onClose={onClose}\n      hasCloseButton\n      title={lang('lng_custom_emoji_used_sets')}\n    >\n      <div className={buildClassName(styles.sets, 'custom-scroll')} ref={customEmojiModalRef} teactFastList>\n        {renderingCustomEmojiSets?.map((customEmojiSet) => (\n          <StickerSetCard\n            key={customEmojiSet.id}\n            className={styles.setCard}\n            stickerSet={customEmojiSet}\n            onClick={handleSetClick}\n            observeIntersection={observeIntersectionForCovers}\n            noPlay={!canPlayAnimatedEmojis}\n          />\n        ))}\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { customEmojiSetIds }): StateProps => {\n    const customEmojiSets = customEmojiSetIds?.map((id) => global.stickers.setsById[id]);\n\n    return {\n      customEmojiSets,\n      canPlayAnimatedEmojis: selectCanPlayAnimatedEmojis(global),\n    };\n  },\n)(CustomEmojiSetsModal));\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo, useCallback } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiMessage } from '../../api/types';\nimport type { IAlbum } from '../../types';\n\nimport {\n  getPrivateChatUserId,\n  getUserFirstOrLastName,\n  isChatBasicGroup,\n  isChatSuperGroup,\n  isUserId,\n} from '../../global/helpers';\nimport {\n  selectAllowedMessageActions,\n  selectBot,\n  selectChat,\n  selectCurrentMessageList,\n  selectUser,\n} from '../../global/selectors';\nimport renderText from './helpers/renderText';\n\nimport useOldLang from '../../hooks/useOldLang';\n\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\n\nexport type OwnProps = {\n  isOpen: boolean;\n  isSchedule: boolean;\n  message: ApiMessage;\n  album?: IAlbum;\n  onClose: NoneToVoidFunction;\n  onConfirm?: NoneToVoidFunction;\n};\n\ntype StateProps = {\n  canDeleteForAll?: boolean;\n  contactName?: string;\n  willDeleteForCurrentUserOnly?: boolean;\n  willDeleteForAll?: boolean;\n};\n\nconst DeleteMessageModal: FC<OwnProps & StateProps> = ({\n  isOpen,\n  isSchedule,\n  message,\n  album,\n  canDeleteForAll,\n  contactName,\n  willDeleteForCurrentUserOnly,\n  willDeleteForAll,\n  onConfirm,\n  onClose,\n}) => {\n  const {\n    deleteMessages,\n    deleteScheduledMessages,\n  } = getActions();\n\n  const handleDeleteMessageForAll = useCallback(() => {\n    onConfirm?.();\n    const messageIds = album?.messages\n      ? album.messages.map(({ id }) => id)\n      : [message.id];\n    deleteMessages({ messageIds, shouldDeleteForAll: true });\n    onClose();\n  }, [onConfirm, album, message.id, deleteMessages, onClose]);\n\n  const handleDeleteMessageForSelf = useCallback(() => {\n    onConfirm?.();\n    const messageIds = album?.messages\n      ? album.messages.map(({ id }) => id)\n      : [message.id];\n    if (isSchedule) {\n      deleteScheduledMessages({ messageIds });\n    } else {\n      deleteMessages({\n        messageIds,\n        shouldDeleteForAll: false,\n      });\n    }\n    onClose();\n  }, [onConfirm, album, message.id, isSchedule, onClose, deleteScheduledMessages, deleteMessages]);\n\n  const lang = useOldLang();\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      onEnter={isOpen && !canDeleteForAll ? handleDeleteMessageForSelf : undefined}\n      className=\"delete\"\n      title={lang('DeleteSingleMessagesTitle')}\n    >\n      <p>{lang('AreYouSureDeleteSingleMessage')}</p>\n      {willDeleteForCurrentUserOnly && (\n        <p>{lang('lng_delete_for_me_chat_hint', 1, 'i')}</p>\n      )}\n      {willDeleteForAll && (\n        <p>{lang('lng_delete_for_everyone_hint', 1, 'i')}</p>\n      )}\n      <div className={canDeleteForAll ? 'dialog-buttons-column' : 'dialog-buttons'}>\n        {canDeleteForAll && (\n          <Button color=\"danger\" className=\"confirm-dialog-button\" isText onClick={handleDeleteMessageForAll}>\n            {contactName && renderText(lang('Conversation.DeleteMessagesFor', contactName))}\n            {!contactName && lang('Conversation.DeleteMessagesForEveryone')}\n          </Button>\n        )}\n        <Button color=\"danger\" className=\"confirm-dialog-button\" isText onClick={handleDeleteMessageForSelf}>\n          {lang(canDeleteForAll ? 'ChatList.DeleteForCurrentUser' : 'Delete')}\n        </Button>\n        <Button className=\"confirm-dialog-button\" isText onClick={onClose}>{lang('Cancel')}</Button>\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { message, isSchedule }): StateProps => {\n    const { threadId } = selectCurrentMessageList(global) || {};\n    const { canDeleteForAll } = (threadId && selectAllowedMessageActions(global, message, threadId)) || {};\n    const chat = selectChat(global, message.chatId);\n    const contactName = chat && isUserId(chat.id)\n      ? getUserFirstOrLastName(selectUser(global, getPrivateChatUserId(chat)!))\n      : undefined;\n    const isChatWithBot = Boolean(selectBot(global, message.chatId));\n\n    const willDeleteForCurrentUserOnly = (chat && isChatBasicGroup(chat) && !canDeleteForAll) || isChatWithBot;\n    const willDeleteForAll = chat && isChatSuperGroup(chat);\n\n    return {\n      canDeleteForAll: !isSchedule && canDeleteForAll,\n      contactName,\n      willDeleteForCurrentUserOnly,\n      willDeleteForAll,\n    };\n  },\n)(DeleteMessageModal));\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo, useCallback } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiPhoto } from '../../api/types';\n\nimport { isUserId } from '../../global/helpers';\n\nimport useOldLang from '../../hooks/useOldLang';\n\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\n\nexport type OwnProps = {\n  isOpen: boolean;\n  photo: ApiPhoto;\n  profileId: string;\n  onConfirm?: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n};\n\nconst DeleteProfilePhotoModal: FC<OwnProps> = ({\n  isOpen,\n  photo,\n  profileId,\n  onClose,\n  onConfirm,\n}) => {\n  const {\n    deleteProfilePhoto,\n    deleteChatPhoto,\n  } = getActions();\n\n  const handleDeletePhoto = useCallback(() => {\n    onConfirm?.();\n    if (isUserId(profileId)) {\n      deleteProfilePhoto({ photo });\n    } else {\n      deleteChatPhoto({\n        photo,\n        chatId: profileId,\n      });\n    }\n    onClose();\n  }, [onConfirm, profileId, onClose, deleteProfilePhoto, photo, deleteChatPhoto]);\n\n  const lang = useOldLang();\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      onEnter={handleDeletePhoto}\n      className=\"delete dialog-buttons-column\"\n      title={lang('AreYouSure')}\n    >\n      <div className=\"dialog-buttons mt-2\">\n        <Button color=\"danger\" className=\"confirm-dialog-button\" isText onClick={handleDeletePhoto}>\n          {lang('Preview.DeletePhoto')}\n        </Button>\n        <Button className=\"confirm-dialog-button\" isText onClick={onClose}>{lang('Cancel')}</Button>\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(DeleteProfilePhotoModal);\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport type { ApiVideo } from '../../api/types';\nimport type { ObserveFn } from '../../hooks/useIntersectionObserver';\nimport { ApiMediaFormat } from '../../api/types';\n\nimport { getVideoMediaHash } from '../../global/helpers';\nimport buildClassName from '../../util/buildClassName';\nimport { IS_TOUCH_ENV } from '../../util/windowEnvironment';\nimport { preventMessageInputBlurWithBubbling } from '../middle/helpers/preventMessageInputBlur';\n\nimport useBuffering from '../../hooks/useBuffering';\nimport useCanvasBlur from '../../hooks/useCanvasBlur';\nimport useContextMenuHandlers from '../../hooks/useContextMenuHandlers';\nimport { useIsIntersecting } from '../../hooks/useIntersectionObserver';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useMedia from '../../hooks/useMedia';\nimport useMenuPosition from '../../hooks/useMenuPosition';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport Button from '../ui/Button';\nimport Menu from '../ui/Menu';\nimport MenuItem from '../ui/MenuItem';\nimport OptimizedVideo from '../ui/OptimizedVideo';\nimport Spinner from '../ui/Spinner';\n\nimport './GifButton.scss';\n\ntype OwnProps = {\n  gif: ApiVideo;\n  observeIntersection: ObserveFn;\n  isDisabled?: boolean;\n  className?: string;\n  onClick?: (gif: ApiVideo, isSilent?: boolean, shouldSchedule?: boolean) => void;\n  onUnsaveClick?: (gif: ApiVideo) => void;\n  isSavedMessages?: boolean;\n};\n\nconst GifButton: FC<OwnProps> = ({\n  gif,\n  isDisabled,\n  className,\n  observeIntersection,\n  onClick,\n  onUnsaveClick,\n  isSavedMessages,\n}) => {\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLDivElement>(null);\n\n  const lang = useOldLang();\n\n  const isIntersecting = useIsIntersecting(ref, observeIntersection);\n  const loadAndPlay = isIntersecting && !isDisabled;\n  const previewBlobUrl = useMedia(getVideoMediaHash(gif, 'preview'), !loadAndPlay, ApiMediaFormat.BlobUrl);\n  const [withThumb] = useState(gif.thumbnail?.dataUri && !previewBlobUrl);\n  const thumbRef = useCanvasBlur(gif.thumbnail?.dataUri, !withThumb);\n  const videoData = useMedia(getVideoMediaHash(gif, 'full'), !loadAndPlay, ApiMediaFormat.BlobUrl);\n  const shouldRenderVideo = Boolean(loadAndPlay && videoData);\n  const { isBuffered, bufferingHandlers } = useBuffering(true);\n  const shouldRenderSpinner = loadAndPlay && !isBuffered;\n  const isVideoReady = loadAndPlay && isBuffered;\n\n  const {\n    isContextMenuOpen, contextMenuPosition,\n    handleBeforeContextMenu, handleContextMenu,\n    handleContextMenuClose, handleContextMenuHide,\n  } = useContextMenuHandlers(ref);\n\n  const getTriggerElement = useLastCallback(() => ref.current);\n  const getRootElement = useLastCallback(() => ref.current!.closest('.custom-scroll, .no-scrollbar'));\n  const getMenuElement = useLastCallback(() => ref.current!.querySelector('.gif-context-menu .bubble'));\n\n  const {\n    positionX, positionY, transformOriginX, transformOriginY, style: menuStyle,\n  } = useMenuPosition(\n    contextMenuPosition,\n    getTriggerElement,\n    getRootElement,\n    getMenuElement,\n  );\n\n  const handleClick = useLastCallback(() => {\n    if (isContextMenuOpen || !onClick) return;\n    onClick({\n      ...gif,\n      blobUrl: videoData,\n    });\n  });\n\n  const handleUnsaveClick = useLastCallback((e: React.MouseEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n    onUnsaveClick!(gif);\n  });\n\n  const handleContextDelete = useLastCallback(() => {\n    onUnsaveClick?.(gif);\n  });\n\n  const handleSendQuiet = useLastCallback(() => {\n    onClick!({\n      ...gif,\n      blobUrl: videoData,\n    }, true);\n  });\n\n  const handleSendScheduled = useLastCallback(() => {\n    onClick!({\n      ...gif,\n      blobUrl: videoData,\n    }, undefined, true);\n  });\n\n  const handleMouseDown = useLastCallback((e: React.MouseEvent<HTMLElement>) => {\n    preventMessageInputBlurWithBubbling(e);\n    handleBeforeContextMenu(e);\n  });\n\n  useEffect(() => {\n    if (isDisabled) handleContextMenuClose();\n  }, [handleContextMenuClose, isDisabled]);\n\n  const fullClassName = buildClassName(\n    'GifButton',\n    gif.width && gif.height && gif.width < gif.height ? 'vertical' : 'horizontal',\n    onClick && 'interactive',\n    className,\n  );\n\n  return (\n    <div\n      ref={ref}\n      className={fullClassName}\n      onMouseDown={handleMouseDown}\n      onClick={handleClick}\n      onContextMenu={handleContextMenu}\n    >\n      {!IS_TOUCH_ENV && onUnsaveClick && (\n        <Button\n          className=\"gif-unsave-button\"\n          color=\"dark\"\n          pill\n          noFastClick\n          onClick={handleUnsaveClick}\n        >\n          <i className=\"icon icon-close gif-unsave-button-icon\" />\n        </Button>\n      )}\n      {withThumb && (\n        <canvas\n          ref={thumbRef}\n          className=\"thumbnail canvas-blur-setup\"\n          // We need to always render to avoid blur re-calculation\n          style={isVideoReady ? 'display: none;' : undefined}\n        />\n      )}\n      {previewBlobUrl && !isVideoReady && (\n        <img\n          src={previewBlobUrl}\n          alt=\"\"\n          className=\"preview\"\n          draggable={false}\n        />\n      )}\n      {shouldRenderVideo && (\n        <OptimizedVideo\n          canPlay\n          src={videoData}\n          autoPlay\n          loop\n          muted\n          disablePictureInPicture\n          playsInline\n          preload=\"none\"\n          // eslint-disable-next-line react/jsx-props-no-spreading\n          {...bufferingHandlers}\n        />\n      )}\n      {shouldRenderSpinner && (\n        <Spinner color={previewBlobUrl || withThumb ? 'white' : 'black'} />\n      )}\n      {onClick && contextMenuPosition !== undefined && (\n        <Menu\n          isOpen={isContextMenuOpen}\n          transformOriginX={transformOriginX}\n          transformOriginY={transformOriginY}\n          positionX={positionX}\n          positionY={positionY}\n          style={menuStyle}\n          className=\"gif-context-menu\"\n          autoClose\n          onClose={handleContextMenuClose}\n          onCloseAnimationEnd={handleContextMenuHide}\n        >\n          {!isSavedMessages && <MenuItem onClick={handleSendQuiet} icon=\"mute\">{lang('SendWithoutSound')}</MenuItem>}\n          <MenuItem onClick={handleSendScheduled} icon=\"calendar\">\n            {lang(isSavedMessages ? 'SetReminder' : 'ScheduleMessage')}\n          </MenuItem>\n          {onUnsaveClick && (\n            <MenuItem destructive icon=\"delete\" onClick={handleContextDelete}>{lang('Delete')}</MenuItem>\n          )}\n        </Menu>\n      )}\n    </div>\n  );\n};\n\nexport default memo(GifButton);\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiUsername } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { copyTextToClipboard } from '../../util/clipboard';\nimport { isBetween } from '../../util/math';\n\nimport useOldLang from '../../hooks/useOldLang';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport ConfirmDialog from '../ui/ConfirmDialog';\nimport Draggable from '../ui/Draggable';\nimport ListItem from '../ui/ListItem';\n\nimport styles from './ManageUsernames.module.scss';\n\ntype SortState = {\n  orderedUsernames?: string[];\n  dragOrderUsernames?: string[];\n  draggedIndex?: number;\n};\n\ntype OwnProps = {\n  chatId?: string;\n  usernames: ApiUsername[];\n  onEditUsername: (username: string) => void;\n};\n\nconst USERNAME_HEIGHT_PX = 60;\n\nconst ManageUsernames: FC<OwnProps> = ({\n  chatId,\n  usernames,\n  onEditUsername,\n}) => {\n  const {\n    showNotification,\n    toggleUsername,\n    toggleChatUsername,\n    sortUsernames,\n    sortChatUsernames,\n  } = getActions();\n  const lang = useOldLang();\n  const [usernameForConfirm, setUsernameForConfirm] = useState<ApiUsername | undefined>();\n\n  const usernameList = useMemo(() => usernames.map(({ username }) => username), [usernames]);\n  const prevUsernameList = usePrevious(usernameList);\n\n  const [state, setState] = useState<SortState>({\n    orderedUsernames: usernameList,\n    dragOrderUsernames: usernameList,\n    draggedIndex: undefined,\n  });\n\n  // Sync folders state after changing folders in other clients\n  useEffect(() => {\n    if (prevUsernameList !== usernameList) {\n      setState({\n        orderedUsernames: usernameList,\n        dragOrderUsernames: usernameList,\n        draggedIndex: undefined,\n      });\n    }\n  }, [prevUsernameList, usernameList]);\n\n  const handleCopyUsername = useCallback((value: string) => {\n    copyTextToClipboard(`@${value}`);\n    showNotification({\n      message: lang('UsernameCopied'),\n    });\n  }, [lang, showNotification]);\n\n  const handleUsernameClick = useCallback((data: ApiUsername) => {\n    if (data.isEditable) {\n      onEditUsername(data.username);\n    } else {\n      setUsernameForConfirm(data);\n    }\n  }, [onEditUsername]);\n\n  const closeConfirmUsernameDialog = useCallback(() => {\n    setUsernameForConfirm(undefined);\n  }, []);\n\n  const handleUsernameToggle = useCallback(() => {\n    if (!usernameForConfirm) {\n      return;\n    }\n\n    if (chatId) {\n      toggleChatUsername({\n        chatId,\n        username: usernameForConfirm.username,\n        isActive: !usernameForConfirm.isActive,\n      });\n    } else {\n      toggleUsername({\n        username: usernameForConfirm.username,\n        isActive: !usernameForConfirm.isActive,\n      });\n    }\n    closeConfirmUsernameDialog();\n  }, [chatId, closeConfirmUsernameDialog, toggleChatUsername, toggleUsername, usernameForConfirm]);\n\n  const handleDrag = useCallback((translation: { x: number; y: number }, id: string | number) => {\n    const delta = Math.round(translation.y / USERNAME_HEIGHT_PX);\n    const index = state.orderedUsernames?.indexOf(id as string) || 0;\n    const dragOrderUsernames = state.orderedUsernames?.filter((username) => username !== id);\n\n    if (!dragOrderUsernames || !isBetween(index + delta, 0, usernameList.length)) {\n      return;\n    }\n\n    dragOrderUsernames.splice(index + delta, 0, id as string);\n    setState((current) => ({\n      ...current,\n      draggedIndex: index,\n      dragOrderUsernames,\n    }));\n  }, [state.orderedUsernames, usernameList.length]);\n\n  const handleDragEnd = useCallback(() => {\n    setState((current) => {\n      if (chatId) {\n        sortChatUsernames({\n          chatId,\n          usernames: current.dragOrderUsernames!,\n        });\n      } else {\n        sortUsernames({ usernames: current.dragOrderUsernames! });\n      }\n\n      return {\n        ...current,\n        orderedUsernames: current.dragOrderUsernames,\n        draggedIndex: undefined,\n      };\n    });\n  }, [chatId, sortChatUsernames, sortUsernames]);\n\n  return (\n    <>\n      <div className={styles.container}>\n        <h4 className={styles.header} dir={lang.isRtl ? 'rtl' : undefined}>\n          {lang('lng_usernames_subtitle')}\n        </h4>\n        <div className={styles.sortableContainer} style={`height: ${(usernames.length) * USERNAME_HEIGHT_PX}px`}>\n          {usernames.map((usernameData, i) => {\n            const isDragged = state.draggedIndex === i;\n            const draggedTop = (state.orderedUsernames?.indexOf(usernameData.username) ?? 0) * USERNAME_HEIGHT_PX;\n            const top = (state.dragOrderUsernames?.indexOf(usernameData.username) ?? 0) * USERNAME_HEIGHT_PX;\n            const subtitle = usernameData.isEditable\n              ? 'lng_usernames_edit'\n              : (usernameData.isActive ? 'lng_usernames_active' : 'lng_usernames_non_active');\n\n            return (\n              <Draggable\n                key={usernameData.username}\n                id={usernameData.username}\n                onDrag={handleDrag}\n                onDragEnd={handleDragEnd}\n                style={`top: ${isDragged ? draggedTop : top}px;`}\n                knobStyle={`${lang.isRtl ? 'left' : 'right'}: 3rem;`}\n                isDisabled={!usernameData.isActive}\n              >\n                <ListItem\n                  key={usernameData.username}\n                  className={buildClassName('drag-item mb-2 no-icon', styles.item)}\n                  narrow\n                  secondaryIcon=\"more\"\n                  icon={usernameData.isActive ? 'link' : 'link-broken'}\n                  multiline\n                  contextActions={[\n                    {\n                      handler: () => {\n                        handleCopyUsername(usernameData.username);\n                      },\n                      title: lang('Copy'),\n                      icon: 'copy',\n                    },\n                  ]}\n                  // eslint-disable-next-line react/jsx-no-bind\n                  onClick={() => {\n                    handleUsernameClick(usernameData);\n                  }}\n                >\n                  <span className=\"title\">@{usernameData.username}</span>\n                  <span className=\"subtitle\">{lang(subtitle)}</span>\n                </ListItem>\n              </Draggable>\n            );\n          })}\n        </div>\n        <p className={styles.description} dir={lang.isRtl ? 'rtl' : undefined}>\n          {lang('lng_usernames_description')}\n        </p>\n      </div>\n      <ConfirmDialog\n        isOpen={Boolean(usernameForConfirm)}\n        onClose={closeConfirmUsernameDialog}\n        title={lang(usernameForConfirm?.isActive ? 'Username.DeactivateAlertTitle' : 'Username.ActivateAlertTitle')}\n        text={lang(usernameForConfirm?.isActive ? 'Username.DeactivateAlertText' : 'Username.ActivateAlertText')}\n        confirmLabel={lang(usernameForConfirm?.isActive\n          ? 'Username.DeactivateAlertHide'\n          : 'Username.ActivateAlertShow')}\n        confirmHandler={handleUsernameToggle}\n        confirmIsDestructive={!usernameForConfirm?.isActive}\n      />\n    </>\n  );\n};\n\nexport default memo(ManageUsernames);\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo, useCallback } from '../../lib/teact/teact';\n\nimport { STICKER_SIZE_AUTH, STICKER_SIZE_AUTH_MOBILE, STICKER_SIZE_TWO_FA } from '../../config';\nimport { LOCAL_TGS_URLS } from './helpers/animatedAssets';\n\nimport useTimeout from '../../hooks/schedulers/useTimeout';\nimport useAppLayout from '../../hooks/useAppLayout';\nimport useFlag from '../../hooks/useFlag';\n\nimport AnimatedSticker from './AnimatedSticker';\n\nimport './PasswordMonkey.scss';\n\ntype OwnProps = {\n  isPasswordVisible: boolean;\n  isBig?: boolean;\n};\n\nconst PEEK_MONKEY_SHOW_DELAY = 2000;\nconst SEGMENT_COVER_EYES: [number, number] = [0, 50];\nconst SEGMENT_UNCOVER_EYE: [number, number] = [0, 20];\nconst SEGMENT_COVER_EYE: [number, number] = [20, 0];\n\nconst PasswordMonkey: FC<OwnProps> = ({ isPasswordVisible, isBig }) => {\n  const [isFirstMonkeyLoaded, markFirstMonkeyLoaded] = useFlag(false);\n  const [isPeekShown, markPeekShown] = useFlag(false);\n  const { isMobile } = useAppLayout();\n\n  const stikerSize = isMobile ? STICKER_SIZE_AUTH_MOBILE : STICKER_SIZE_AUTH;\n\n  useTimeout(markPeekShown, PEEK_MONKEY_SHOW_DELAY);\n  const handleFirstMonkeyLoad = useCallback(markFirstMonkeyLoaded, [markFirstMonkeyLoaded]);\n\n  return (\n    <div id=\"monkey\" className={isBig ? 'big' : ''}>\n      {!isFirstMonkeyLoaded && (\n        <div className=\"monkey-preview\" />\n      )}\n      <AnimatedSticker\n        size={isBig ? STICKER_SIZE_TWO_FA : stikerSize}\n        className={isPeekShown ? 'hidden' : 'shown'}\n        tgsUrl={LOCAL_TGS_URLS.MonkeyClose}\n        playSegment={SEGMENT_COVER_EYES}\n        noLoop\n        onLoad={handleFirstMonkeyLoad}\n      />\n      <AnimatedSticker\n        size={isBig ? STICKER_SIZE_TWO_FA : stikerSize}\n        className={isPeekShown ? 'shown' : 'hidden'}\n        tgsUrl={LOCAL_TGS_URLS.MonkeyPeek}\n        playSegment={isPasswordVisible ? SEGMENT_UNCOVER_EYE : SEGMENT_COVER_EYE}\n        noLoop\n      />\n    </div>\n  );\n};\n\nexport default memo(PasswordMonkey);\n","import type { FC } from '../../lib/teact/teact';\nimport React from '../../lib/teact/teact';\n\nimport type { OwnProps } from './PinMessageModal';\n\nimport { Bundles } from '../../util/moduleLoader';\n\nimport useModuleLoader from '../../hooks/useModuleLoader';\n\nconst PinMessageModalAsync: FC<OwnProps> = (props) => {\n  const { isOpen } = props;\n  const PinMessageModal = useModuleLoader(Bundles.Extra, 'PinMessageModal', !isOpen);\n\n  // eslint-disable-next-line react/jsx-props-no-spreading\n  return PinMessageModal ? <PinMessageModal {...props} /> : undefined;\n};\n\nexport default PinMessageModalAsync;\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo, useCallback } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport {\n  getPrivateChatUserId,\n  getUserFirstOrLastName,\n  isChatBasicGroup,\n  isChatChannel,\n  isChatSuperGroup,\n  isUserId,\n} from '../../global/helpers';\nimport { selectChat, selectIsChatWithSelf, selectUser } from '../../global/selectors';\nimport renderText from './helpers/renderText';\n\nimport useOldLang from '../../hooks/useOldLang';\n\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\n\nexport type OwnProps = {\n  isOpen: boolean;\n  chatId: string;\n  messageId: number;\n  onClose: () => void;\n};\n\ntype StateProps = {\n  isChannel: boolean;\n  isPrivateChat: boolean;\n  isChatWithSelf: boolean;\n  isGroup: boolean;\n  isSuperGroup: boolean;\n  canPinForAll: boolean;\n  contactName?: string;\n};\n\nconst PinMessageModal: FC<OwnProps & StateProps> = ({\n  isOpen,\n  messageId,\n  isChannel,\n  isGroup,\n  isSuperGroup,\n  canPinForAll,\n  contactName,\n  onClose,\n}) => {\n  const { pinMessage } = getActions();\n\n  const handlePinMessageForAll = useCallback(() => {\n    pinMessage({\n      messageId, isUnpin: false,\n    });\n    onClose();\n  }, [pinMessage, messageId, onClose]);\n\n  const handlePinMessage = useCallback(() => {\n    pinMessage({\n      messageId, isUnpin: false, isOneSide: true, isSilent: true,\n    });\n    onClose();\n  }, [messageId, onClose, pinMessage]);\n\n  const lang = useOldLang();\n\n  function renderMessage() {\n    if (isChannel) {\n      return lang('PinMessageAlertChannel');\n    }\n\n    if (isGroup || isSuperGroup) {\n      return lang('PinMessageAlert');\n    }\n\n    return lang('PinMessageAlertChat');\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      className=\"pin\"\n      title={lang('PinMessageAlertTitle')}\n    >\n      <p>{renderMessage()}</p>\n      <div className=\"dialog-buttons-column\">\n        <Button className=\"confirm-dialog-button\" isText onClick={handlePinMessage}>\n          {lang('DialogPin')}\n        </Button>\n        {canPinForAll && (\n          <Button className=\"confirm-dialog-button\" isText onClick={handlePinMessageForAll}>\n            {contactName\n              ? renderText(lang('Conversation.PinMessagesFor', contactName))\n              : lang('Conversation.PinMessageAlert.PinAndNotifyMembers')}\n          </Button>\n        )}\n        <Button className=\"confirm-dialog-button\" isText onClick={onClose}>{lang('Cancel')}</Button>\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { chatId }): StateProps => {\n    const isPrivateChat = isUserId(chatId);\n    const isChatWithSelf = selectIsChatWithSelf(global, chatId);\n    const chat = selectChat(global, chatId);\n    const isChannel = Boolean(chat) && isChatChannel(chat);\n    const isGroup = Boolean(chat) && isChatBasicGroup(chat);\n    const isSuperGroup = Boolean(chat) && isChatSuperGroup(chat);\n    const canPinForAll = (isPrivateChat && !isChatWithSelf) || isSuperGroup || isGroup;\n    const contactName = chat && isUserId(chat.id)\n      ? getUserFirstOrLastName(selectUser(global, getPrivateChatUserId(chat)!))\n      : undefined;\n\n    return {\n      isPrivateChat,\n      isChatWithSelf,\n      isChannel,\n      isGroup,\n      isSuperGroup,\n      canPinForAll,\n      contactName,\n    };\n  },\n)(PinMessageModal));\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiUser } from '../../api/types';\n\nimport { ANIMATION_END_DELAY } from '../../config';\nimport { getUserFirstOrLastName } from '../../global/helpers';\nimport { selectTabState, selectUser } from '../../global/selectors';\nimport { LOCAL_TGS_URLS } from './helpers/animatedAssets';\nimport renderText from './helpers/renderText';\n\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport Button from '../ui/Button';\nimport Modal, { ANIMATION_DURATION } from '../ui/Modal';\nimport Separator from '../ui/Separator';\nimport AnimatedIconWithPreview from './AnimatedIconWithPreview';\nimport Icon from './icons/Icon';\n\nimport styles from './PrivacySettingsNoticeModal.module.scss';\n\nexport type OwnProps = {\n  isOpen: boolean;\n};\n\ntype StateProps = {\n  user?: ApiUser;\n  isReadDate?: boolean;\n};\n\nconst CLOSE_ANIMATION_DURATION = ANIMATION_DURATION + ANIMATION_END_DELAY;\n\nconst PrivacySettingsNoticeModal = ({ isOpen, isReadDate, user }: OwnProps & StateProps) => {\n  const lang = useOldLang();\n  const {\n    updateGlobalPrivacySettings,\n    openPremiumModal,\n    closePrivacySettingsNoticeModal,\n    showNotification,\n    setPrivacyVisibility,\n    loadUser,\n  } = getActions();\n  const userName = getUserFirstOrLastName(user);\n\n  const handleShowReadTime = useLastCallback(() => {\n    updateGlobalPrivacySettings({ shouldHideReadMarks: false });\n    closePrivacySettingsNoticeModal();\n\n    setTimeout(() => {\n      showNotification({ message: lang('PremiumReadSet') });\n    }, CLOSE_ANIMATION_DURATION);\n  });\n\n  const handleShowLastSeen = useLastCallback(() => {\n    setPrivacyVisibility({\n      privacyKey: 'lastSeen',\n      visibility: 'everybody',\n      onSuccess: () => loadUser({ userId: user!.id }),\n    });\n    closePrivacySettingsNoticeModal();\n\n    setTimeout(() => {\n      showNotification({ message: lang('PremiumLastSeenSet') });\n    }, CLOSE_ANIMATION_DURATION);\n  });\n\n  const handleOpenPremium = useLastCallback(() => {\n    closePrivacySettingsNoticeModal();\n\n    setTimeout(() => {\n      openPremiumModal({ initialSection: 'last_seen' });\n    }, CLOSE_ANIMATION_DURATION);\n  });\n\n  const handleClose = useLastCallback(() => {\n    closePrivacySettingsNoticeModal();\n  });\n\n  return (\n    <Modal isSlim isOpen={isOpen} onClose={handleClose}>\n      <div className={styles.container} dir={lang.isRtl ? 'rtl' : undefined}>\n        <Button\n          className={styles.closeButton}\n          color=\"translucent\"\n          round\n          size=\"smaller\"\n          onClick={handleClose}\n          ariaLabel=\"Close\"\n        >\n          <Icon name=\"close\" />\n        </Button>\n        <AnimatedIconWithPreview\n          tgsUrl={isReadDate ? LOCAL_TGS_URLS.ReadTime : LOCAL_TGS_URLS.LastSeen}\n          size={84}\n          className={styles.icon}\n          nonInteractive\n          noLoop\n        />\n        <h2 className={styles.header}>\n          {lang(isReadDate ? 'PremiumReadHeader1' : 'PremiumLastSeenHeader1')}\n        </h2>\n        <p className={styles.desc}>\n          {renderText(\n            lang(\n              isReadDate ? 'PremiumReadText1' : 'PremiumLastSeenText1Locked',\n              userName,\n            ),\n            ['simple_markdown'],\n          )}\n        </p>\n        <Button\n          size=\"smaller\"\n          onClick={isReadDate ? handleShowReadTime : handleShowLastSeen}\n          className={styles.button}\n        >\n          {lang(isReadDate ? 'PremiumReadButton1' : 'PremiumLastSeenButton1')}\n        </Button>\n        <Separator className={styles.separator}>{lang('PremiumOr')}</Separator>\n        <h2 className={styles.header}>{lang('PremiumReadHeader2')}</h2>\n        <p className={styles.desc}>\n          {renderText(\n            lang(isReadDate ? 'PremiumReadText2' : 'PremiumLastSeenText2', userName),\n            ['simple_markdown'],\n          )}\n        </p>\n        <Button\n          withPremiumGradient\n          size=\"smaller\"\n          onClick={handleOpenPremium}\n          className={styles.button}\n        >\n          {lang('PremiumLastSeenButton2')}\n        </Button>\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(\n  withGlobal<OwnProps>((global): StateProps => {\n    const { chatId, isReadDate } = selectTabState(global).privacySettingsNoticeModal || {};\n    const user = chatId ? selectUser(global, chatId) : undefined;\n\n    return { user, isReadDate };\n  })(PrivacySettingsNoticeModal),\n);\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useMemo, useRef,\n} from '../../lib/teact/teact';\n\nimport type { ApiAvailableReaction, ApiReaction } from '../../api/types';\nimport type { ObserveFn } from '../../hooks/useIntersectionObserver';\n\nimport { EMOJI_SIZE_PICKER } from '../../config';\nimport { getDocumentMediaHash, isSameReaction } from '../../global/helpers';\nimport buildClassName from '../../util/buildClassName';\n\nimport useCoordsInSharedCanvas from '../../hooks/useCoordsInSharedCanvas';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useMedia from '../../hooks/useMedia';\nimport useMediaTransition from '../../hooks/useMediaTransition';\n\nimport AnimatedIconWithPreview from './AnimatedIconWithPreview';\nimport CustomEmoji from './CustomEmoji';\n\nimport styles from './ReactionEmoji.module.scss';\n\ntype OwnProps = {\n  reaction: ApiReaction;\n  availableReactions?: ApiAvailableReaction[];\n  className?: string;\n  isSelected?: boolean;\n  loadAndPlay?: boolean;\n  observeIntersection?: ObserveFn;\n  sharedCanvasRef?: React.RefObject<HTMLCanvasElement>;\n  sharedCanvasHqRef?: React.RefObject<HTMLCanvasElement>;\n  forcePlayback?: boolean;\n  onClick: (reaction: ApiReaction) => void;\n};\n\nconst ReactionEmoji: FC<OwnProps> = ({\n  reaction,\n  availableReactions,\n  isSelected,\n  loadAndPlay,\n  observeIntersection,\n  sharedCanvasRef,\n  sharedCanvasHqRef,\n  forcePlayback,\n  onClick,\n}) => {\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLDivElement>(null);\n  const isCustom = 'documentId' in reaction;\n  const availableReaction = useMemo(() => (\n    availableReactions?.find((available) => isSameReaction(available.reaction, reaction))\n  ), [availableReactions, reaction]);\n  const thumbDataUri = availableReaction?.staticIcon?.thumbnail?.dataUri;\n  const animationId = availableReaction?.selectAnimation?.id;\n  const coords = useCoordsInSharedCanvas(ref, sharedCanvasRef);\n  const mediaData = useMedia(\n    availableReaction?.selectAnimation ? getDocumentMediaHash(availableReaction.selectAnimation, 'full') : undefined,\n    !animationId,\n  );\n  const handleClick = useLastCallback(() => {\n    onClick(reaction);\n  });\n\n  const transitionClassNames = useMediaTransition(mediaData);\n  const fullClassName = buildClassName(\n    styles.root,\n    isSelected && styles.selected,\n    !isCustom && 'sticker-reaction',\n  );\n\n  return (\n    <div\n      ref={ref}\n      className={fullClassName}\n      onClick={handleClick}\n      title={availableReaction?.title}\n      data-sticker-id={isCustom ? reaction.documentId : undefined}\n    >\n      {isCustom ? (\n        <CustomEmoji\n          ref={ref}\n          documentId={reaction.documentId}\n          size={EMOJI_SIZE_PICKER}\n          noPlay={!loadAndPlay}\n          observeIntersectionForPlaying={observeIntersection}\n          sharedCanvasRef={sharedCanvasRef}\n          sharedCanvasHqRef={sharedCanvasHqRef}\n          withTranslucentThumb\n          forceAlways={forcePlayback}\n        />\n      ) : (\n        <AnimatedIconWithPreview\n          tgsUrl={mediaData}\n          thumbDataUri={thumbDataUri}\n          play={loadAndPlay}\n          noLoop={false}\n          size={EMOJI_SIZE_PICKER}\n          isLowPriority\n          className={transitionClassNames}\n          sharedCanvas={sharedCanvasRef!.current || undefined}\n          sharedCanvasCoords={coords}\n          forceAlways={forcePlayback}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default memo(ReactionEmoji);\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo, useMemo, useState } from '../../lib/teact/teact';\nimport { getGlobal, withGlobal } from '../../global';\n\nimport type { ApiChatType } from '../../api/types';\nimport type { ThreadId } from '../../types';\nimport { MAIN_THREAD_ID } from '../../api/types';\n\nimport { API_CHAT_TYPES } from '../../config';\nimport {\n  filterChatsByName,\n  filterUsersByName,\n  getCanPostInChat,\n  isDeletedUser,\n} from '../../global/helpers';\nimport { filterChatIdsByType } from '../../global/selectors';\nimport { unique } from '../../util/iteratees';\nimport sortChatIds from './helpers/sortChatIds';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport ChatOrUserPicker from './ChatOrUserPicker';\n\nexport type OwnProps = {\n  isOpen: boolean;\n  searchPlaceholder: string;\n  className?: string;\n  filter?: ApiChatType[];\n  loadMore?: NoneToVoidFunction;\n  onSelectRecipient: (peerId: string, threadId?: ThreadId) => void;\n  onClose: NoneToVoidFunction;\n  onCloseAnimationEnd?: NoneToVoidFunction;\n};\n\ntype StateProps = {\n  currentUserId?: string;\n  activeListIds?: string[];\n  archivedListIds?: string[];\n  pinnedIds?: string[];\n  contactIds?: string[];\n};\n\nconst RecipientPicker: FC<OwnProps & StateProps> = ({\n  isOpen,\n  currentUserId,\n  activeListIds,\n  archivedListIds,\n  pinnedIds,\n  contactIds,\n  filter = API_CHAT_TYPES,\n  className,\n  searchPlaceholder,\n  loadMore,\n  onSelectRecipient,\n  onClose,\n  onCloseAnimationEnd,\n}) => {\n  const lang = useOldLang();\n  const [search, setSearch] = useState('');\n  const ids = useMemo(() => {\n    if (!isOpen) return undefined;\n\n    let priorityIds = pinnedIds || [];\n    if (currentUserId) {\n      priorityIds = unique([currentUserId, ...priorityIds]);\n    }\n\n    // No need for expensive global updates on users, so we avoid them\n    const global = getGlobal();\n    const usersById = global.users.byId;\n    const chatsById = global.chats.byId;\n    const chatFullInfoById = global.chats.fullInfoById;\n\n    const chatIds = [\n      ...(activeListIds || []),\n      ...((search && archivedListIds) || []),\n    ].filter((id) => {\n      const chat = chatsById[id];\n      const user = usersById[id];\n      if (user && isDeletedUser(user)) return false;\n\n      return chat && getCanPostInChat(chat, MAIN_THREAD_ID, undefined, chatFullInfoById[id]);\n    });\n\n    const sorted = sortChatIds(unique([\n      ...filterChatsByName(lang, chatIds, chatsById, search, currentUserId),\n      ...(contactIds && filter.includes('users') ? filterUsersByName(contactIds, usersById, search) : []),\n    ]), undefined, priorityIds);\n\n    return filterChatIdsByType(global, sorted, filter);\n  }, [pinnedIds, currentUserId, activeListIds, search, archivedListIds, lang, contactIds, filter, isOpen]);\n\n  const renderingIds = useCurrentOrPrev(ids, true)!;\n\n  return (\n    <ChatOrUserPicker\n      isOpen={isOpen}\n      className={className}\n      chatOrUserIds={renderingIds}\n      searchPlaceholder={searchPlaceholder}\n      search={search}\n      onSearchChange={setSearch}\n      loadMore={loadMore}\n      onSelectChatOrUser={onSelectRecipient}\n      onClose={onClose}\n      onCloseAnimationEnd={onCloseAnimationEnd}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const {\n      chats: {\n        listIds,\n        orderedPinnedIds,\n      },\n      currentUserId,\n    } = global;\n\n    return {\n      activeListIds: listIds.active,\n      archivedListIds: listIds.archived,\n      pinnedIds: orderedPinnedIds.active,\n      contactIds: global.contactList?.userIds,\n      currentUserId,\n    };\n  },\n)(RecipientPicker));\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { selectChatMessage, selectTabState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { formatDateAtTime } from '../../util/dates/dateFormat';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport Button from '../ui/Button';\nimport ListItem from '../ui/ListItem';\nimport Modal from '../ui/Modal';\nimport PrivateChatInfo from './PrivateChatInfo';\n\nimport styles from './SeenByModal.module.scss';\n\nexport type OwnProps = {\n  isOpen: boolean;\n};\n\nexport type StateProps = {\n  seenByDates?: Record<string, number>;\n};\n\nconst CLOSE_ANIMATION_DURATION = 100;\n\nfunction SeenByModal({\n  isOpen,\n  seenByDates,\n}: OwnProps & StateProps) {\n  const {\n    openChat,\n    closeSeenByModal,\n  } = getActions();\n\n  const lang = useOldLang();\n\n  const renderingSeenByDates = useCurrentOrPrev(seenByDates, true);\n  const memberIds = useMemo(() => {\n    if (!renderingSeenByDates) {\n      return undefined;\n    }\n\n    const result = Object.keys(renderingSeenByDates);\n    result.sort((leftId, rightId) => renderingSeenByDates[rightId] - renderingSeenByDates[leftId]);\n\n    return result;\n  }, [renderingSeenByDates]);\n\n  const handleClick = useLastCallback((userId: string) => {\n    closeSeenByModal();\n\n    setTimeout(() => {\n      openChat({ id: userId });\n    }, CLOSE_ANIMATION_DURATION);\n  });\n\n  const handleCloseSeenByModal = useLastCallback(() => {\n    closeSeenByModal();\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={closeSeenByModal}\n      className={buildClassName(styles.modal, 'narrow')}\n      title={`Seen by ${memberIds?.length} users`}\n    >\n      <div dir={lang.isRtl ? 'rtl' : undefined}>\n        {memberIds && memberIds.map((userId) => (\n          <ListItem\n            key={userId}\n            className=\"chat-item-clickable scroll-item small-icon\"\n            // eslint-disable-next-line react/jsx-no-bind\n            onClick={() => handleClick(userId)}\n          >\n            <PrivateChatInfo\n              userId={userId}\n              noStatusOrTyping\n              status={formatDateAtTime(lang, renderingSeenByDates![userId] * 1000)}\n              statusIcon=\"message-read\"\n            />\n          </ListItem>\n        ))}\n      </div>\n      <div className=\"dialog-buttons mt-2\">\n        <Button\n          className=\"confirm-dialog-button\"\n          isText\n          onClick={handleCloseSeenByModal}\n        >\n          {lang('Close')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const { chatId, messageId } = selectTabState(global).seenByModal || {};\n    if (!chatId || !messageId) {\n      return {};\n    }\n\n    return {\n      seenByDates: selectChatMessage(global, chatId, messageId)?.seenByDates,\n    };\n  },\n)(SeenByModal));\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo, useCallback } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport { IS_TOUCH_ENV } from '../../util/windowEnvironment';\n\nimport Button from '../ui/Button';\n\nimport styles from './SliderDots.module.scss';\n\ntype OwnProps = {\n  length: number;\n  active: number;\n  onSelectSlide: (index: number) => void;\n};\n\nconst SliderDots: FC<OwnProps> = ({\n  length,\n  active,\n  onSelectSlide,\n}) => {\n  const startFrom = Math.max(0, Math.min(length - 8, active - 4));\n  const isPreLastBatch = startFrom === length - 8 - 1;\n  const isLastBatch = startFrom === length - 8;\n  const isFirstBatch = startFrom === 0;\n  const isPreFirstBatch = startFrom === 1;\n  const shownDotsCount = Math.min(length, 8);\n\n  const handleGoForward = useCallback(() => {\n    onSelectSlide(active + 1);\n  }, [active, onSelectSlide]);\n\n  const handleGoBack = useCallback(() => {\n    onSelectSlide(active - 1);\n  }, [active, onSelectSlide]);\n\n  const count = Math.min(8, length);\n\n  return (\n    <div>\n      {!IS_TOUCH_ENV && (\n        <Button\n          className={buildClassName(styles.arrow, active === 0 && styles.arrowHidden)}\n          color=\"translucent\"\n          disabled={active === 0}\n          round\n          onClick={handleGoBack}\n        >\n          <i className=\"icon icon-previous\" />\n        </Button>\n      )}\n      <div className={styles.root} style={`--start-from: ${startFrom}; --length: ${length}; --count: ${count};`}>\n        {Array(length).fill(undefined).map((_, i) => {\n          const index = i;\n          const isLast = (i === startFrom + shownDotsCount - 1 && !isLastBatch && !isPreLastBatch);\n          const isPreLast = (i === startFrom + shownDotsCount - 2 && !isPreLastBatch && !isLastBatch)\n            || (i === startFrom + shownDotsCount - 1 && isPreLastBatch);\n          const isFirst = (i === startFrom) && !isFirstBatch && !isPreFirstBatch;\n          const isPreFirst = ((i === startFrom + 1) && !isFirstBatch && !isPreFirstBatch)\n            || (i === startFrom && isPreFirstBatch);\n          const isInvisible = i < startFrom || i >= startFrom + shownDotsCount;\n          return (\n            <div\n              onClick={() => onSelectSlide(i)}\n              className={buildClassName(\n                styles.dot,\n                index === active && styles.active,\n                (isPreLast || isPreFirst) && styles.medium,\n                (isLast || isFirst || isInvisible) && styles.small,\n                isInvisible && styles.invisible,\n              )}\n            />\n          );\n        })}\n      </div>\n      {!IS_TOUCH_ENV && (\n        <Button\n          className={buildClassName(styles.arrow, active === length - 1 && styles.arrowHidden, styles.right)}\n          color=\"translucent\"\n          round\n          disabled={active === length - 1}\n          onClick={handleGoForward}\n        >\n          <i className=\"icon icon-next\" />\n        </Button>\n      )}\n    </div>\n  );\n};\n\nexport default memo(SliderDots);\n","import type { MouseEvent as ReactMouseEvent, ReactNode } from 'react';\nimport React, {\n  memo, useEffect, useMemo, useRef,\n} from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiBotInlineMediaResult, ApiSticker } from '../../api/types';\nimport type { ObserveFn } from '../../hooks/useIntersectionObserver';\n\nimport buildClassName from '../../util/buildClassName';\nimport { getServerTimeOffset } from '../../util/serverTime';\nimport { IS_TOUCH_ENV } from '../../util/windowEnvironment';\nimport { preventMessageInputBlurWithBubbling } from '../middle/helpers/preventMessageInputBlur';\n\nimport useDynamicColorListener from '../../hooks/stickers/useDynamicColorListener';\nimport useContextMenuHandlers from '../../hooks/useContextMenuHandlers';\nimport { useIsIntersecting } from '../../hooks/useIntersectionObserver';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useMenuPosition from '../../hooks/useMenuPosition';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport Button from '../ui/Button';\nimport Menu from '../ui/Menu';\nimport MenuItem from '../ui/MenuItem';\nimport Icon from './icons/Icon';\nimport StickerView from './StickerView';\n\nimport './StickerButton.scss';\n\ntype OwnProps<T> = {\n  sticker: ApiSticker;\n  size: number;\n  noPlay?: boolean;\n  title?: string;\n  className?: string;\n  noContextMenu?: boolean;\n  isSavedMessages?: boolean;\n  isStatusPicker?: boolean;\n  canViewSet?: boolean;\n  isSelected?: boolean;\n  isCurrentUserPremium?: boolean;\n  shouldIgnorePremium?: boolean;\n  sharedCanvasRef?: React.RefObject<HTMLCanvasElement>;\n  withTranslucentThumb?: boolean;\n  forcePlayback?: boolean;\n  observeIntersection: ObserveFn;\n  observeIntersectionForShowing?: ObserveFn;\n  noShowPremium?: boolean;\n  onClick?: (arg: OwnProps<T>['clickArg'], isSilent?: boolean, shouldSchedule?: boolean) => void;\n  clickArg: T;\n  onFaveClick?: (sticker: ApiSticker) => void;\n  onUnfaveClick?: (sticker: ApiSticker) => void;\n  onRemoveRecentClick?: (sticker: ApiSticker) => void;\n  onContextMenuOpen?: NoneToVoidFunction;\n  onContextMenuClose?: NoneToVoidFunction;\n  onContextMenuClick?: NoneToVoidFunction;\n  isEffectEmoji?: boolean;\n};\n\nconst contentForStatusMenuContext = [\n  { title: 'SetTimeoutFor.Hours', value: 1, arg: 3600 },\n  { title: 'SetTimeoutFor.Hours', value: 2, arg: 7200 },\n  { title: 'SetTimeoutFor.Hours', value: 8, arg: 28800 },\n  { title: 'SetTimeoutFor.Days', value: 1, arg: 86400 },\n  { title: 'SetTimeoutFor.Days', value: 2, arg: 172800 },\n];\n\nconst StickerButton = <T extends number | ApiSticker | ApiBotInlineMediaResult | undefined = undefined>({\n  sticker,\n  size,\n  noPlay,\n  title,\n  className,\n  noContextMenu,\n  isSavedMessages,\n  isStatusPicker,\n  canViewSet,\n  observeIntersection,\n  observeIntersectionForShowing,\n  isSelected,\n  isCurrentUserPremium,\n  shouldIgnorePremium,\n  noShowPremium,\n  sharedCanvasRef,\n  withTranslucentThumb,\n  forcePlayback,\n  onClick,\n  clickArg,\n  onFaveClick,\n  onUnfaveClick,\n  onRemoveRecentClick,\n  onContextMenuOpen,\n  onContextMenuClose,\n  onContextMenuClick,\n  isEffectEmoji,\n}: OwnProps<T>) => {\n  const { openStickerSet, openPremiumModal, setEmojiStatus } = getActions();\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const menuRef = useRef<HTMLDivElement>(null);\n  const lang = useOldLang();\n  const hasCustomColor = sticker.shouldUseTextColor;\n  const customColor = useDynamicColorListener(ref, !hasCustomColor);\n\n  const {\n    id, stickerSetInfo,\n  } = sticker;\n\n  const isPremium = (!sticker.isFree && isEffectEmoji) || sticker.hasEffect;\n  const isCustomEmoji = sticker.isCustomEmoji || isEffectEmoji;\n  const isLocked = !isCurrentUserPremium && isPremium && !shouldIgnorePremium;\n\n  const isIntersecting = useIsIntersecting(ref, observeIntersection);\n  const shouldLoad = isIntersecting;\n  const shouldPlay = isIntersecting && !noPlay;\n\n  const isIntesectingForShowing = useIsIntersecting(ref, observeIntersectionForShowing);\n\n  const {\n    isContextMenuOpen, contextMenuPosition,\n    handleBeforeContextMenu, handleContextMenu,\n    handleContextMenuClose, handleContextMenuHide,\n  } = useContextMenuHandlers(ref);\n  const shouldRenderContextMenu = Boolean(!noContextMenu && contextMenuPosition);\n\n  const getTriggerElement = useLastCallback(() => ref.current);\n  const getRootElement = useLastCallback(() => ref.current!.closest('.custom-scroll, .no-scrollbar'));\n  const getMenuElement = useLastCallback(() => {\n    return isStatusPicker ? menuRef.current : ref.current!.querySelector('.sticker-context-menu .bubble');\n  });\n\n  const getLayout = () => ({ withPortal: isStatusPicker, shouldAvoidNegativePosition: true });\n\n  const {\n    positionX, positionY, transformOriginX, transformOriginY, style: menuStyle,\n  } = useMenuPosition(\n    contextMenuPosition,\n    getTriggerElement,\n    getRootElement,\n    getMenuElement,\n    getLayout,\n  );\n\n  useEffect(() => {\n    if (isContextMenuOpen) {\n      onContextMenuOpen?.();\n    } else {\n      onContextMenuClose?.();\n    }\n  }, [isContextMenuOpen, onContextMenuClose, onContextMenuOpen]);\n\n  useEffect(() => {\n    if (!isIntersecting) handleContextMenuClose();\n  }, [handleContextMenuClose, isIntersecting]);\n\n  const handleClick = () => {\n    if (isContextMenuOpen) return;\n    if (isLocked) {\n      openPremiumModal({ initialSection: 'premium_stickers' });\n      return;\n    }\n    onClick?.(clickArg);\n  };\n\n  const handleMouseDown = (e: React.MouseEvent<HTMLElement>) => {\n    preventMessageInputBlurWithBubbling(e);\n    handleBeforeContextMenu(e);\n  };\n\n  const handleRemoveClick = useLastCallback((e: ReactMouseEvent<HTMLButtonElement, MouseEvent>) => {\n    e.stopPropagation();\n    e.preventDefault();\n\n    onRemoveRecentClick!(sticker);\n  });\n\n  const handleContextRemoveRecent = useLastCallback(() => {\n    onRemoveRecentClick!(sticker);\n  });\n\n  const handleContextUnfave = useLastCallback(() => {\n    onUnfaveClick!(sticker);\n  });\n\n  const handleContextFave = useLastCallback(() => {\n    onFaveClick!(sticker);\n  });\n\n  const handleSendQuiet = useLastCallback(() => {\n    onClick?.(clickArg, true);\n  });\n\n  const handleSendScheduled = useLastCallback(() => {\n    onClick?.(clickArg, undefined, true);\n  });\n\n  const handleOpenSet = useLastCallback(() => {\n    openStickerSet({ stickerSetInfo });\n  });\n\n  const handleEmojiStatusExpiresClick = useLastCallback((e: React.SyntheticEvent, duration = 0) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    handleContextMenuClose();\n    onContextMenuClick?.();\n    setEmojiStatus({\n      emojiStatus: sticker,\n      expires: Date.now() / 1000 + duration + getServerTimeOffset(),\n    });\n  });\n\n  const shouldShowCloseButton = !IS_TOUCH_ENV && onRemoveRecentClick;\n\n  const fullClassName = buildClassName(\n    'StickerButton',\n    onClick && 'interactive',\n    isSelected && 'selected',\n    isCustomEmoji && 'custom-emoji',\n    isEffectEmoji && 'effect-emoji',\n    className,\n  );\n\n  const contextMenuItems = useMemo(() => {\n    if (!shouldRenderContextMenu || noContextMenu || (isCustomEmoji && !isStatusPicker)) return [];\n\n    const items: ReactNode[] = [];\n\n    if (isCustomEmoji) {\n      contentForStatusMenuContext.forEach((item) => {\n        items.push(\n          <MenuItem onClick={handleEmojiStatusExpiresClick} clickArg={item.arg}>\n            {lang(item.title, item.value, 'i')}\n          </MenuItem>,\n        );\n      });\n\n      return items;\n    }\n\n    if (onUnfaveClick) {\n      items.push(\n        <MenuItem icon=\"favorite\" onClick={handleContextUnfave}>\n          {lang('Stickers.RemoveFromFavorites')}\n        </MenuItem>,\n      );\n    }\n\n    if (onFaveClick) {\n      items.push(\n        <MenuItem icon=\"favorite\" onClick={handleContextFave}>\n          {lang('Stickers.AddToFavorites')}\n        </MenuItem>,\n      );\n    }\n\n    if (!isLocked && onClick) {\n      if (!isSavedMessages) {\n        items.push(<MenuItem onClick={handleSendQuiet} icon=\"muted\">{lang('SendWithoutSound')}</MenuItem>);\n      }\n      items.push(\n        <MenuItem onClick={handleSendScheduled} icon=\"calendar\">\n          {lang(isSavedMessages ? 'SetReminder' : 'ScheduleMessage')}\n        </MenuItem>,\n      );\n    }\n\n    if (canViewSet) {\n      items.push(\n        <MenuItem onClick={handleOpenSet} icon=\"stickers\">\n          {lang('ViewPackPreview')}\n        </MenuItem>,\n      );\n    }\n    if (onRemoveRecentClick) {\n      items.push(\n        <MenuItem icon=\"delete\" onClick={handleContextRemoveRecent}>\n          {lang('DeleteFromRecent')}\n        </MenuItem>,\n      );\n    }\n    return items;\n  }, [\n    shouldRenderContextMenu, noContextMenu, isCustomEmoji, isStatusPicker, onUnfaveClick, onFaveClick, isLocked,\n    onClick, canViewSet, onRemoveRecentClick, handleEmojiStatusExpiresClick, lang, handleContextUnfave,\n    handleContextFave, isSavedMessages, handleSendScheduled, handleSendQuiet, handleOpenSet, handleContextRemoveRecent,\n  ]);\n\n  return (\n    <div\n      ref={ref}\n      className={fullClassName}\n      title={title || (sticker?.emoji)}\n      data-sticker-id={id}\n      onMouseDown={handleMouseDown}\n      onClick={handleClick}\n      onContextMenu={handleContextMenu}\n    >\n      {isIntesectingForShowing && (\n        <StickerView\n          containerRef={ref}\n          sticker={sticker}\n          isSmall\n          size={size}\n          shouldLoop\n          shouldPreloadPreview\n          noLoad={!shouldLoad}\n          noPlay={!shouldPlay}\n          withSharedAnimation\n          sharedCanvasRef={sharedCanvasRef}\n          withTranslucentThumb={withTranslucentThumb}\n          customColor={customColor}\n          forceAlways={forcePlayback}\n        />\n      )}\n      {!noShowPremium && isLocked && (\n        <div\n          className=\"sticker-locked\"\n        >\n          <Icon name=\"lock-badge\" />\n        </div>\n      )}\n      {!noShowPremium && isPremium && !isLocked && (\n        <div className=\"sticker-premium\">\n          <Icon name=\"star\" />\n        </div>\n      )}\n      {shouldShowCloseButton && (\n        <Button\n          className=\"sticker-remove-button\"\n          color=\"dark\"\n          round\n          noFastClick\n          onClick={handleRemoveClick}\n        >\n          <Icon name=\"close\" />\n        </Button>\n      )}\n      {Boolean(contextMenuItems.length) && (\n        <Menu\n          ref={menuRef}\n          isOpen={isContextMenuOpen}\n          transformOriginX={transformOriginX}\n          transformOriginY={transformOriginY}\n          positionX={positionX}\n          positionY={positionY}\n          style={menuStyle}\n          className=\"sticker-context-menu\"\n          autoClose\n          withPortal={isStatusPicker}\n          onClose={handleContextMenuClose}\n          onCloseAnimationEnd={handleContextMenuHide}\n        >\n          {contextMenuItems}\n        </Menu>\n      )}\n    </div>\n  );\n};\n\nexport default memo(StickerButton);\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, getGlobal } from '../../global';\n\nimport type { ApiAvailableReaction, ApiReaction, ApiSticker } from '../../api/types';\nimport type { ObserveFn } from '../../hooks/useIntersectionObserver';\nimport type { StickerSetOrReactionsSetOrRecent } from '../../types';\n\nimport {\n  DEFAULT_STATUS_ICON_ID,\n  DEFAULT_TOPIC_ICON_STICKER_ID,\n  EFFECT_EMOJIS_SET_ID,\n  EFFECT_STICKERS_SET_ID,\n  EMOJI_SIZE_PICKER,\n  FAVORITE_SYMBOL_SET_ID,\n  POPULAR_SYMBOL_SET_ID,\n  RECENT_SYMBOL_SET_ID,\n  STICKER_SIZE_PICKER,\n} from '../../config';\nimport { getReactionKey } from '../../global/helpers';\nimport { selectIsAlwaysHighPriorityEmoji, selectIsSetPremium } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\n\nimport useAppLayout from '../../hooks/useAppLayout';\nimport useFlag from '../../hooks/useFlag';\nimport { useIsIntersecting } from '../../hooks/useIntersectionObserver';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useMediaTransition from '../../hooks/useMediaTransition';\nimport useOldLang from '../../hooks/useOldLang';\nimport useResizeObserver from '../../hooks/useResizeObserver';\nimport useWindowSize from '../../hooks/window/useWindowSize';\n\nimport Button from '../ui/Button';\nimport ConfirmDialog from '../ui/ConfirmDialog';\nimport Icon from './icons/Icon';\nimport ReactionEmoji from './ReactionEmoji';\nimport StickerButton from './StickerButton';\n\nimport grey from '../../assets/icons/forumTopic/grey.svg';\n\ntype OwnProps = {\n  stickerSet: StickerSetOrReactionsSetOrRecent;\n  loadAndPlay: boolean;\n  index: number;\n  idPrefix: string;\n  isNearActive: boolean;\n  favoriteStickers?: ApiSticker[];\n  isSavedMessages?: boolean;\n  isStatusPicker?: boolean;\n  isReactionPicker?: boolean;\n  isCurrentUserPremium?: boolean;\n  shouldHideHeader?: boolean;\n  selectedReactionIds?: string[];\n  withDefaultTopicIcon?: boolean;\n  withDefaultStatusIcon?: boolean;\n  isChatEmojiSet?: boolean;\n  isChatStickerSet?: boolean;\n  isTranslucent?: boolean;\n  noContextMenus?: boolean;\n  forcePlayback?: boolean;\n  observeIntersection?: ObserveFn;\n  observeIntersectionForPlayingItems: ObserveFn;\n  observeIntersectionForShowingItems: ObserveFn;\n  availableReactions?: ApiAvailableReaction[];\n  onStickerSelect?: (sticker: ApiSticker, isSilent?: boolean, shouldSchedule?: boolean) => void;\n  onReactionSelect?: (reaction: ApiReaction) => void;\n  onStickerUnfave?: (sticker: ApiSticker) => void;\n  onStickerFave?: (sticker: ApiSticker) => void;\n  onStickerRemoveRecent?: (sticker: ApiSticker) => void;\n  onContextMenuOpen?: NoneToVoidFunction;\n  onContextMenuClose?: NoneToVoidFunction;\n  onContextMenuClick?: NoneToVoidFunction;\n};\n\nconst ITEMS_PER_ROW_FALLBACK = 8;\nconst ITEMS_MOBILE_PER_ROW_FALLBACK = 7;\nconst ITEMS_MINI_MOBILE_PER_ROW_FALLBACK = 6;\nconst MOBILE_WIDTH_THRESHOLD_PX = 440;\nconst MINI_MOBILE_WIDTH_THRESHOLD_PX = 362;\n\nconst StickerSet: FC<OwnProps> = ({\n  stickerSet,\n  loadAndPlay,\n  index,\n  idPrefix,\n  isNearActive,\n  favoriteStickers,\n  availableReactions,\n  isSavedMessages,\n  isStatusPicker,\n  isReactionPicker,\n  isCurrentUserPremium,\n  shouldHideHeader,\n  withDefaultTopicIcon,\n  selectedReactionIds,\n  withDefaultStatusIcon,\n  isChatEmojiSet,\n  isChatStickerSet,\n  isTranslucent,\n  noContextMenus,\n  forcePlayback,\n  observeIntersection,\n  observeIntersectionForPlayingItems,\n  observeIntersectionForShowingItems,\n  onReactionSelect,\n  onStickerSelect,\n  onStickerUnfave,\n  onStickerFave,\n  onStickerRemoveRecent,\n  onContextMenuOpen,\n  onContextMenuClose,\n  onContextMenuClick,\n}) => {\n  const {\n    clearRecentStickers,\n    clearRecentCustomEmoji,\n    clearRecentReactions,\n    openPremiumModal,\n    toggleStickerSet,\n    loadStickers,\n  } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLDivElement>(null);\n\n  // eslint-disable-next-line no-null/no-null\n  const sharedCanvasRef = useRef<HTMLCanvasElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const sharedCanvasHqRef = useRef<HTMLCanvasElement>(null);\n\n  const lang = useOldLang();\n  const { width: windowWidth } = useWindowSize();\n  const [isConfirmModalOpen, openConfirmModal, closeConfirmModal] = useFlag();\n  const { isMobile } = useAppLayout();\n\n  const [itemsPerRow, setItemsPerRow] = useState(getItemsPerRowFallback(windowWidth));\n\n  const isIntersecting = useIsIntersecting(ref, observeIntersection ?? observeIntersectionForShowingItems);\n  const transitionClassNames = useMediaTransition(isIntersecting);\n\n  // `isNearActive` is set in advance during animation, but it is not reliable for short sets\n  const shouldRender = isNearActive || isIntersecting;\n\n  const stickerMarginPx = isMobile ? 8 : 4;\n  const emojiMarginPx = isMobile ? 8 : 10;\n  const emojiVerticalMarginPx = isMobile ? 8 : 4;\n  const isRecent = stickerSet.id === RECENT_SYMBOL_SET_ID;\n  const isFavorite = stickerSet.id === FAVORITE_SYMBOL_SET_ID;\n  const isPopular = stickerSet.id === POPULAR_SYMBOL_SET_ID;\n  const isEmoji = stickerSet.isEmoji;\n  const isPremiumSet = !isRecent && selectIsSetPremium(stickerSet);\n\n  const handleClearRecent = useLastCallback(() => {\n    if (isReactionPicker) {\n      clearRecentReactions();\n    } else if (isEmoji) {\n      clearRecentCustomEmoji();\n    } else {\n      clearRecentStickers();\n    }\n    closeConfirmModal();\n  });\n\n  const handleAddClick = useLastCallback(() => {\n    if (isPremiumSet && !isCurrentUserPremium) {\n      openPremiumModal({\n        initialSection: 'animated_emoji',\n      });\n    } else {\n      toggleStickerSet({\n        stickerSetId: stickerSet.id,\n      });\n    }\n  });\n\n  const handleDefaultTopicIconClick = useLastCallback(() => {\n    onStickerSelect?.({\n      mediaType: 'sticker',\n      id: DEFAULT_TOPIC_ICON_STICKER_ID,\n      isLottie: false,\n      isVideo: false,\n      stickerSetInfo: {\n        shortName: 'dummy',\n      },\n    } satisfies ApiSticker);\n  });\n\n  const handleDefaultStatusIconClick = useLastCallback(() => {\n    onStickerSelect?.({\n      mediaType: 'sticker',\n      id: DEFAULT_STATUS_ICON_ID,\n      isLottie: false,\n      isVideo: false,\n      stickerSetInfo: {\n        shortName: 'dummy',\n      },\n    } satisfies ApiSticker);\n  });\n\n  const itemSize = isEmoji ? EMOJI_SIZE_PICKER : STICKER_SIZE_PICKER;\n  const margin = isEmoji ? emojiMarginPx : stickerMarginPx;\n  const verticalMargin = isEmoji ? emojiVerticalMarginPx : stickerMarginPx;\n\n  const calculateItemsPerRow = useLastCallback((width: number) => {\n    if (!width) {\n      return getItemsPerRowFallback(windowWidth);\n    }\n\n    return Math.floor((width + margin) / (itemSize + margin));\n  });\n\n  const handleResize = useLastCallback((entry: ResizeObserverEntry) => {\n    setItemsPerRow(calculateItemsPerRow(entry.contentRect.width));\n  });\n\n  useResizeObserver(ref, handleResize);\n\n  useEffect(() => {\n    if (!ref.current) return;\n    setItemsPerRow(calculateItemsPerRow(ref.current.clientWidth));\n  }, [calculateItemsPerRow]);\n\n  useEffect(() => {\n    if (shouldRender && !stickerSet.stickers?.length && !stickerSet.reactions?.length && stickerSet.accessHash) {\n      loadStickers({\n        stickerSetInfo: {\n          id: stickerSet.id,\n          accessHash: stickerSet.accessHash,\n        },\n      });\n    }\n  }, [shouldRender, loadStickers, stickerSet]);\n\n  const isLocked = !isSavedMessages && !isCurrentUserPremium && isPremiumSet && !isChatEmojiSet;\n\n  const isInstalled = stickerSet.installedDate && !stickerSet.isArchived;\n\n  const canCut = !isInstalled && stickerSet.id !== RECENT_SYMBOL_SET_ID\n    && stickerSet.id !== POPULAR_SYMBOL_SET_ID && stickerSet.id !== EFFECT_EMOJIS_SET_ID\n    && stickerSet.id !== EFFECT_STICKERS_SET_ID && !isChatEmojiSet && !isChatStickerSet;\n\n  const [isCut, , expand] = useFlag(canCut);\n  const itemsBeforeCutout = itemsPerRow * 3 - 1;\n  const totalItemsCount = withDefaultTopicIcon ? stickerSet.count + 1 : stickerSet.count;\n\n  const itemHeight = itemSize + verticalMargin;\n  const heightWhenCut = Math.ceil(Math.min(itemsBeforeCutout, totalItemsCount) / itemsPerRow)\n    * itemHeight - verticalMargin;\n  const height = isCut ? heightWhenCut : Math.ceil(totalItemsCount / itemsPerRow) * itemHeight - verticalMargin;\n\n  const favoriteStickerIdsSet = useMemo(() => (\n    favoriteStickers ? new Set(favoriteStickers.map(({ id }) => id)) : undefined\n  ), [favoriteStickers]);\n  const withAddSetButton = !shouldHideHeader && !isRecent && isEmoji && !isPopular && !isChatEmojiSet\n    && (!isInstalled || (!isCurrentUserPremium && !isSavedMessages));\n  const addSetButtonText = useMemo(() => {\n    if (isLocked) {\n      if (isInstalled) return lang('lng_emoji_premium_restore');\n      return lang('Unlock');\n    }\n\n    return lang('Add');\n  }, [isLocked, lang, isInstalled]);\n\n  return (\n    <div\n      ref={ref}\n      key={stickerSet.id}\n      id={`${idPrefix}-${index}`}\n      className={\n        buildClassName('symbol-set', isLocked && 'symbol-set-locked')\n      }\n    >\n      {!shouldHideHeader && (\n        <div className=\"symbol-set-header\">\n          <p className={buildClassName('symbol-set-title', withAddSetButton && 'symbol-set-title-external')}>\n            {isLocked && <Icon name=\"lock-badge\" className=\"symbol-set-locked-icon\" />}\n            <span className=\"symbol-set-name\">{stickerSet.title}</span>\n            {(isChatEmojiSet || isChatStickerSet) && (\n              <span className=\"symbol-set-chat\">{lang(isChatEmojiSet ? 'GroupEmoji' : 'GroupStickers')}</span>\n            )}\n            {withAddSetButton && Boolean(stickerSet.stickers) && (\n              <span className=\"symbol-set-amount\">\n                {lang(isEmoji ? 'EmojiCount' : 'Stickers', stickerSet.stickers.length, 'i')}\n              </span>\n            )}\n          </p>\n          {isRecent && (\n            <Icon className=\"symbol-set-remove\" name=\"close\" onClick={openConfirmModal} />\n          )}\n          {withAddSetButton && (\n            <Button\n              className=\"symbol-set-add-button\"\n              withPremiumGradient={isPremiumSet && !isCurrentUserPremium}\n              onClick={handleAddClick}\n              pill\n              size=\"tiny\"\n              fluid\n            >\n              {addSetButtonText}\n            </Button>\n          )}\n        </div>\n      )}\n      <div\n        className={buildClassName(\n          'symbol-set-container shared-canvas-container',\n          transitionClassNames,\n          stickerSet.id === EFFECT_EMOJIS_SET_ID && 'effect-emojis',\n        )}\n        style={`height: ${height}px;`}\n      >\n        <canvas\n          ref={sharedCanvasRef}\n          className=\"shared-canvas\"\n          style={canCut ? `height: ${heightWhenCut}px;` : undefined}\n        />\n        {(isRecent || isFavorite || canCut) && <canvas ref={sharedCanvasHqRef} className=\"shared-canvas\" />}\n        {withDefaultTopicIcon && (\n          <Button\n            className=\"StickerButton custom-emoji\"\n            color=\"translucent\"\n            onClick={handleDefaultTopicIconClick}\n            key=\"default-topic-icon\"\n          >\n            <img src={grey} alt=\"Reset\" className=\"sticker-media\" draggable={false} />\n          </Button>\n        )}\n        {withDefaultStatusIcon && (\n          <Button\n            className=\"StickerButton custom-emoji status-default\"\n            color=\"translucent\"\n            onClick={handleDefaultStatusIconClick}\n            key=\"default-status-icon\"\n          >\n            <Icon name=\"star\" />\n          </Button>\n        )}\n        {shouldRender && stickerSet.reactions?.map((reaction) => {\n          const reactionId = getReactionKey(reaction);\n          const isSelected = reactionId ? selectedReactionIds?.includes(reactionId) : undefined;\n\n          return (\n            <ReactionEmoji\n              key={`${stickerSet.id}_${reactionId}`}\n              reaction={reaction}\n              isSelected={isSelected}\n              loadAndPlay={loadAndPlay}\n              availableReactions={availableReactions}\n              observeIntersection={observeIntersectionForPlayingItems}\n              onClick={onReactionSelect!}\n              sharedCanvasRef={sharedCanvasRef}\n              sharedCanvasHqRef={sharedCanvasHqRef}\n              forcePlayback={forcePlayback}\n            />\n          );\n        })}\n        {shouldRender && stickerSet.stickers?.slice(0, isCut ? itemsBeforeCutout : stickerSet.stickers.length)\n          .map((sticker, i) => {\n            const isHqEmoji = (isRecent || isFavorite)\n              && selectIsAlwaysHighPriorityEmoji(getGlobal(), sticker.stickerSetInfo);\n            const canvasRef = (canCut && i >= itemsBeforeCutout) || isHqEmoji\n              ? sharedCanvasHqRef\n              : sharedCanvasRef;\n            const reactionId = sticker.isCustomEmoji ? sticker.id : sticker.emoji;\n            const isSelected = reactionId ? selectedReactionIds?.includes(reactionId) : undefined;\n\n            return (\n              <StickerButton\n                key={sticker.id}\n                sticker={sticker}\n                size={itemSize}\n                observeIntersection={observeIntersectionForPlayingItems}\n                observeIntersectionForShowing={observeIntersectionForShowingItems}\n                noPlay={!loadAndPlay}\n                isSavedMessages={isSavedMessages}\n                isStatusPicker={isStatusPicker}\n                canViewSet\n                noContextMenu={noContextMenus}\n                isCurrentUserPremium={isCurrentUserPremium}\n                shouldIgnorePremium={isChatEmojiSet}\n                sharedCanvasRef={canvasRef}\n                withTranslucentThumb={isTranslucent}\n                onClick={onStickerSelect}\n                clickArg={sticker}\n                isSelected={isSelected}\n                onUnfaveClick={isFavorite && favoriteStickerIdsSet?.has(sticker.id) ? onStickerUnfave : undefined}\n                onFaveClick={!favoriteStickerIdsSet?.has(sticker.id) ? onStickerFave : undefined}\n                onRemoveRecentClick={isRecent ? onStickerRemoveRecent : undefined}\n                onContextMenuOpen={onContextMenuOpen}\n                onContextMenuClose={onContextMenuClose}\n                onContextMenuClick={onContextMenuClick}\n                forcePlayback={forcePlayback}\n                isEffectEmoji={stickerSet.id === EFFECT_EMOJIS_SET_ID}\n                noShowPremium={isCurrentUserPremium\n                  && (stickerSet.id === EFFECT_STICKERS_SET_ID || stickerSet.id === EFFECT_EMOJIS_SET_ID)}\n              />\n            );\n          })}\n        {isCut && totalItemsCount > itemsBeforeCutout && (\n          <Button\n            className=\"StickerButton custom-emoji set-expand\"\n            round\n            color=\"translucent\"\n            onClick={expand}\n            key=\"more\"\n          >\n            +{totalItemsCount - itemsBeforeCutout}\n          </Button>\n        )}\n      </div>\n\n      {isRecent && (\n        <ConfirmDialog\n          text={lang(isReactionPicker ? 'ClearRecentReactionsAlertMessage' : 'ClearRecentStickersAlertMessage')}\n          isOpen={isConfirmModalOpen}\n          onClose={closeConfirmModal}\n          confirmHandler={handleClearRecent}\n          confirmIsDestructive\n        />\n      )}\n    </div>\n  );\n};\n\nexport default memo(StickerSet);\n\nfunction getItemsPerRowFallback(windowWidth: number): number {\n  return windowWidth > MOBILE_WIDTH_THRESHOLD_PX\n    ? ITEMS_PER_ROW_FALLBACK\n    : (windowWidth < MINI_MOBILE_WIDTH_THRESHOLD_PX\n      ? ITEMS_MINI_MOBILE_PER_ROW_FALLBACK\n      : ITEMS_MOBILE_PER_ROW_FALLBACK);\n}\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo, useCallback } from '../../lib/teact/teact';\n\nimport type { ApiSticker, ApiStickerSet } from '../../api/types';\nimport type { ObserveFn } from '../../hooks/useIntersectionObserver';\n\nimport { CHAT_HEIGHT_PX, STICKER_SIZE_GENERAL_SETTINGS } from '../../config';\nimport buildClassName from '../../util/buildClassName';\n\nimport useOldLang from '../../hooks/useOldLang';\n\nimport StickerSetCover from '../middle/composer/StickerSetCover';\nimport Button from '../ui/Button';\nimport ListItem from '../ui/ListItem';\nimport StickerButton from './StickerButton';\n\nimport './StickerSetCard.scss';\n\ntype OwnProps = {\n  stickerSet?: ApiStickerSet;\n  noPlay?: boolean;\n  className?: string;\n  observeIntersection: ObserveFn;\n  onClick: (value: ApiSticker) => void;\n};\n\nconst StickerSetCard: FC<OwnProps> = ({\n  stickerSet,\n  noPlay,\n  className,\n  observeIntersection,\n  onClick,\n}) => {\n  const lang = useOldLang();\n\n  const firstSticker = stickerSet?.stickers?.[0];\n\n  const handleCardClick = useCallback(() => {\n    if (firstSticker) onClick(firstSticker);\n  }, [firstSticker, onClick]);\n\n  if (!stickerSet || !stickerSet.stickers) {\n    return undefined;\n  }\n\n  function renderPreview() {\n    if (!stickerSet) return undefined;\n    if (stickerSet.hasThumbnail || !firstSticker) {\n      return (\n        <Button\n          ariaLabel={stickerSet.title}\n          color=\"translucent\"\n          isRtl={lang.isRtl}\n        >\n          <StickerSetCover\n            stickerSet={stickerSet}\n            size={STICKER_SIZE_GENERAL_SETTINGS}\n            noPlay={noPlay}\n            observeIntersection={observeIntersection}\n          />\n        </Button>\n      );\n    } else {\n      return (\n        <StickerButton\n          sticker={firstSticker}\n          size={STICKER_SIZE_GENERAL_SETTINGS}\n          title={stickerSet.title}\n          noPlay={noPlay}\n          observeIntersection={observeIntersection}\n          noContextMenu\n          isCurrentUserPremium\n          clickArg={undefined}\n        />\n      );\n    }\n  }\n\n  return (\n    <ListItem\n      narrow\n      className={buildClassName('StickerSetCard', 'chat-item-clickable small-icon', className)}\n      style={`height: ${CHAT_HEIGHT_PX}px;`}\n      inactive={!firstSticker}\n      onClick={handleCardClick}\n    >\n      {renderPreview()}\n      <div className=\"multiline-menu-item\">\n        <div className=\"title\">{stickerSet.title}</div>\n        <div className=\"subtitle\">{lang('StickerPack.StickerCount', stickerSet.count, 'i')}</div>\n      </div>\n    </ListItem>\n  );\n};\n\nexport default memo(StickerSetCard);\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect, useMemo, useRef,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiSticker, ApiStickerSet } from '../../api/types';\nimport type { MessageList } from '../../global/types';\n\nimport { EMOJI_SIZE_MODAL, STICKER_SIZE_MODAL, TME_LINK_PREFIX } from '../../config';\nimport { getAllowedAttachmentOptions, getCanPostInChat } from '../../global/helpers';\nimport {\n  selectCanScheduleUntilOnline,\n  selectChat,\n  selectChatFullInfo,\n  selectCurrentMessageList,\n  selectIsChatWithSelf,\n  selectIsCurrentUserPremium,\n  selectShouldSchedule,\n  selectStickerSet,\n  selectThreadInfo,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { copyTextToClipboard } from '../../util/clipboard';\nimport renderText from './helpers/renderText';\n\nimport useAppLayout from '../../hooks/useAppLayout';\nimport { useIntersectionObserver } from '../../hooks/useIntersectionObserver';\nimport useOldLang from '../../hooks/useOldLang';\nimport usePrevious from '../../hooks/usePrevious';\nimport useSchedule from '../../hooks/useSchedule';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport Button from '../ui/Button';\nimport DropdownMenu from '../ui/DropdownMenu';\nimport Loading from '../ui/Loading';\nimport MenuItem from '../ui/MenuItem';\nimport Modal from '../ui/Modal';\nimport StickerButton from './StickerButton';\n\nimport './StickerSetModal.scss';\n\nexport type OwnProps = {\n  isOpen: boolean;\n  fromSticker?: ApiSticker;\n  stickerSetShortName?: string;\n  onClose: () => void;\n};\n\ntype StateProps = {\n  currentMessageList?: MessageList;\n  canSendStickers?: boolean;\n  stickerSet?: ApiStickerSet;\n  canScheduleUntilOnline?: boolean;\n  shouldSchedule?: boolean;\n  isSavedMessages?: boolean;\n  isCurrentUserPremium?: boolean;\n  shouldUpdateStickerSetOrder?: boolean;\n};\n\nconst INTERSECTION_THROTTLE = 200;\n\nconst StickerSetModal: FC<OwnProps & StateProps> = ({\n  isOpen,\n  fromSticker,\n  stickerSetShortName,\n  stickerSet,\n  canSendStickers,\n  canScheduleUntilOnline,\n  shouldSchedule,\n  isSavedMessages,\n  isCurrentUserPremium,\n  shouldUpdateStickerSetOrder,\n  currentMessageList,\n  onClose,\n}) => {\n  const {\n    loadStickers,\n    toggleStickerSet,\n    sendMessage,\n    showNotification,\n  } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const sharedCanvasRef = useRef<HTMLCanvasElement>(null);\n\n  const lang = useOldLang();\n\n  const { isMobile } = useAppLayout();\n\n  const prevStickerSet = usePrevious(stickerSet);\n  const renderingStickerSet = stickerSet || prevStickerSet;\n\n  const isAdded = Boolean(!renderingStickerSet?.isArchived && renderingStickerSet?.installedDate);\n  const isEmoji = renderingStickerSet?.isEmoji;\n\n  const [requestCalendar, calendar] = useSchedule(canScheduleUntilOnline);\n  const {\n    handleScroll: handleContentScroll,\n    isAtBeginning: shouldHideTopBorder,\n  } = useScrolledState();\n\n  const {\n    observe: observeIntersection,\n  } = useIntersectionObserver({ rootRef: containerRef, throttleMs: INTERSECTION_THROTTLE, isDisabled: !isOpen });\n\n  useEffect(() => {\n    if (isOpen && !renderingStickerSet?.stickers) {\n      loadStickers({\n        stickerSetInfo: fromSticker ? fromSticker.stickerSetInfo : { shortName: stickerSetShortName! },\n      });\n    }\n  }, [isOpen, fromSticker, loadStickers, stickerSetShortName, renderingStickerSet]);\n\n  const handleSelect = useCallback((sticker: ApiSticker, isSilent?: boolean, isScheduleRequested?: boolean) => {\n    if (!currentMessageList) {\n      return;\n    }\n    sticker = {\n      ...sticker,\n      isPreloadedGlobally: true,\n    };\n\n    if (shouldSchedule || isScheduleRequested) {\n      requestCalendar((scheduledAt) => {\n        sendMessage({\n          messageList: currentMessageList, sticker, isSilent, scheduledAt,\n        });\n        onClose();\n      });\n    } else {\n      sendMessage({\n        messageList: currentMessageList,\n        sticker,\n        isSilent,\n        shouldUpdateStickerSetOrder: shouldUpdateStickerSetOrder && isAdded,\n      });\n      onClose();\n    }\n  }, [currentMessageList, shouldSchedule, requestCalendar, onClose, shouldUpdateStickerSetOrder, isAdded]);\n\n  const handleButtonClick = useCallback(() => {\n    if (renderingStickerSet) {\n      toggleStickerSet({ stickerSetId: renderingStickerSet.id });\n      onClose();\n    }\n  }, [onClose, renderingStickerSet, toggleStickerSet]);\n\n  const handleCopyLink = useCallback(() => {\n    if (!renderingStickerSet) return;\n    const { shortName } = renderingStickerSet;\n    const suffix = isEmoji ? 'addemoji' : 'addstickers';\n    const url = `${TME_LINK_PREFIX}${suffix}/${shortName}`;\n    copyTextToClipboard(url);\n    showNotification({\n      message: lang('LinkCopied'),\n    });\n  }, [isEmoji, lang, renderingStickerSet, showNotification]);\n\n  const renderButtonText = () => {\n    if (!renderingStickerSet) return lang('Loading');\n\n    const suffix = isEmoji ? 'Emoji' : 'Sticker';\n\n    return lang(\n      isAdded ? `StickerPack.Remove${suffix}Count` : `StickerPack.Add${suffix}Count`,\n      renderingStickerSet.count,\n      'i',\n    );\n  };\n\n  const MoreMenuButton: FC<{ onTrigger: () => void; isOpen?: boolean }> = useMemo(() => {\n    return ({ onTrigger, isOpen: isMenuOpen }) => (\n      <Button\n        round\n        ripple={!isMobile}\n        size=\"smaller\"\n        color=\"translucent\"\n        className={isMenuOpen ? 'active' : ''}\n        onClick={onTrigger}\n        ariaLabel=\"More actions\"\n      >\n        <i className=\"icon icon-more\" />\n      </Button>\n    );\n  }, [isMobile]);\n\n  function renderHeader() {\n    const fullClassName = buildClassName('modal-header', !shouldHideTopBorder && 'with-top-border');\n\n    return (\n      <div className={fullClassName} dir={lang.isRtl ? 'rtl' : undefined}>\n        <Button round color=\"translucent\" size=\"smaller\" ariaLabel={lang('Close')} onClick={onClose}>\n          <i className=\"icon icon-close\" />\n        </Button>\n        <div className=\"modal-title\">\n          {renderingStickerSet ? renderText(renderingStickerSet.title, ['emoji', 'links']) : lang('AccDescrStickerSet')}\n        </div>\n        <DropdownMenu\n          className=\"stickers-more-menu with-menu-transitions\"\n          trigger={MoreMenuButton}\n          positionX=\"right\"\n        >\n          <MenuItem icon=\"copy\" onClick={handleCopyLink}>{lang('StickersCopy')}</MenuItem>\n        </DropdownMenu>\n      </div>\n    );\n  }\n\n  return (\n    <Modal\n      className={buildClassName('StickerSetModal', isEmoji && 'custom-emoji')}\n      isOpen={isOpen}\n      onClose={onClose}\n      header={renderHeader()}\n    >\n      {renderingStickerSet?.stickers ? (\n        <>\n          <div ref={containerRef} className=\"stickers custom-scroll\" onScroll={handleContentScroll}>\n            <div className=\"shared-canvas-container stickers-grid\">\n              <canvas ref={sharedCanvasRef} className=\"shared-canvas\" />\n              {renderingStickerSet.stickers.map((sticker) => (\n                <StickerButton\n                  sticker={sticker}\n                  size={isEmoji ? EMOJI_SIZE_MODAL : STICKER_SIZE_MODAL}\n                  observeIntersection={observeIntersection}\n                  onClick={canSendStickers && !isEmoji ? handleSelect : undefined}\n                  clickArg={sticker}\n                  isSavedMessages={isSavedMessages}\n                  isCurrentUserPremium={isCurrentUserPremium}\n                  sharedCanvasRef={sharedCanvasRef}\n                />\n              ))}\n            </div>\n          </div>\n          <div className=\"button-wrapper\">\n            <Button\n              size=\"smaller\"\n              fluid\n              color={isAdded ? 'danger' : 'primary'}\n              onClick={handleButtonClick}\n            >\n              {renderButtonText()}\n            </Button>\n          </div>\n        </>\n      ) : (\n        <Loading />\n      )}\n      {calendar}\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { fromSticker, stickerSetShortName }): StateProps => {\n    const currentMessageList = selectCurrentMessageList(global);\n    const { chatId, threadId } = currentMessageList || {};\n    const chat = chatId && selectChat(global, chatId);\n    const chatFullInfo = chatId ? selectChatFullInfo(global, chatId) : undefined;\n    const sendOptions = chat ? getAllowedAttachmentOptions(chat, chatFullInfo) : undefined;\n    const threadInfo = chatId && threadId ? selectThreadInfo(global, chatId, threadId) : undefined;\n    const isMessageThread = Boolean(!threadInfo?.isCommentsInfo && threadInfo?.fromChannelId);\n    const canSendStickers = Boolean(\n      chat && threadId && getCanPostInChat(chat, threadId, isMessageThread, chatFullInfo)\n        && sendOptions?.canSendStickers,\n    );\n    const isSavedMessages = Boolean(chatId) && selectIsChatWithSelf(global, chatId);\n\n    const stickerSetInfo = fromSticker ? fromSticker.stickerSetInfo\n      : stickerSetShortName ? { shortName: stickerSetShortName } : undefined;\n\n    const stickerSet = stickerSetInfo ? selectStickerSet(global, stickerSetInfo) : undefined;\n\n    return {\n      canScheduleUntilOnline: Boolean(chatId) && selectCanScheduleUntilOnline(global, chatId),\n      canSendStickers,\n      isSavedMessages,\n      shouldSchedule: selectShouldSchedule(global),\n      stickerSet,\n      isCurrentUserPremium: selectIsCurrentUserPremium(global),\n      shouldUpdateStickerSetOrder: global.settings.byKey.shouldUpdateStickerSetOrder,\n      currentMessageList,\n    };\n  },\n)(StickerSetModal));\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport useOldLang from '../../hooks/useOldLang';\n\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\n\nexport type OwnProps = {\n  isOpen: boolean;\n  chatId?: string;\n  pinnedMessagesCount?: number;\n  onClose: () => void;\n  onUnpin: () => void;\n};\n\nconst UnpinAllMessagesModal: FC<OwnProps> = ({\n  isOpen,\n  pinnedMessagesCount = 0,\n  onClose,\n  onUnpin,\n}) => {\n  const lang = useOldLang();\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      className=\"unpin-all\"\n      title={lang('Chat.PanelUnpinAllMessages')}\n    >\n      <p>{lang('Chat.UnpinAllMessagesConfirmation', pinnedMessagesCount, 'i')}</p>\n      <div className=\"dialog-buttons mt-2\">\n        <Button className=\"confirm-dialog-button\" isText onClick={onUnpin}>\n          {lang('DialogUnpin')}\n        </Button>\n        <Button className=\"confirm-dialog-button\" isText onClick={onClose}>{lang('Cancel')}</Button>\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(UnpinAllMessagesModal);\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { TME_LINK_PREFIX } from '../../config';\nimport { debounce } from '../../util/schedulers';\nimport {\n  isUsernameValid, MAX_USERNAME_LENGTH, MIN_UPDATE_USERNAME_LENGTH, USERNAME_REGEX,\n} from '../../util/username';\n\nimport useOldLang from '../../hooks/useOldLang';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport InputText from '../ui/InputText';\n\ntype OwnProps = {\n  currentUsername?: string;\n  asLink?: boolean;\n  isLoading?: boolean;\n  isUsernameAvailable?: boolean;\n  checkedUsername?: string;\n  onChange: (value: string) => void;\n};\n\nconst LINK_PREFIX_REGEX = /https:\\/\\/t\\.me\\/?/i;\n\nconst runDebouncedForCheckUsername = debounce((cb) => cb(), 250, false);\n\nconst UsernameInput: FC<OwnProps> = ({\n  currentUsername,\n  asLink,\n  isLoading,\n  isUsernameAvailable,\n  checkedUsername,\n  onChange,\n}) => {\n  const { checkUsername, checkPublicLink } = getActions();\n  const [username, setUsername] = useState(currentUsername || '');\n\n  const lang = useOldLang();\n  const langPrefix = asLink ? 'SetUrl' : 'Username';\n  const label = asLink ? lang('SetUrlPlaceholder') : lang('Username');\n\n  const previousIsUsernameAvailable = usePrevious(isUsernameAvailable);\n  const renderingIsUsernameAvailable = currentUsername !== username\n    ? (isUsernameAvailable ?? previousIsUsernameAvailable) : undefined;\n  const isChecking = username && currentUsername !== username && checkedUsername !== username;\n\n  const [usernameSuccess, usernameError] = useMemo(() => {\n    if (!username.length) {\n      return [];\n    }\n\n    if (username.length < MIN_UPDATE_USERNAME_LENGTH) {\n      return [undefined, lang(`${langPrefix}InvalidShort`)];\n    }\n    if (username.length > MAX_USERNAME_LENGTH) {\n      return [undefined, lang(`${langPrefix}InvalidLong`)];\n    }\n    if (!USERNAME_REGEX.test(username)) {\n      return [undefined, lang(`${langPrefix}Invalid`)];\n    }\n\n    if (renderingIsUsernameAvailable === undefined || isChecking) {\n      return [];\n    }\n\n    // Variable `isUsernameAvailable` is initialized with `undefined`, so a strict false check is required\n    return [\n      renderingIsUsernameAvailable ? lang(`${langPrefix}Available`, label) : undefined,\n      renderingIsUsernameAvailable === false ? lang(`${langPrefix}InUse`) : undefined,\n    ];\n  }, [username, renderingIsUsernameAvailable, isChecking, lang, langPrefix, label]);\n\n  useEffect(() => {\n    setUsername(currentUsername || '');\n  }, [asLink, currentUsername]);\n\n  const handleUsernameChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value.trim();\n    // Prevent prefix editing\n    if (asLink && !value.match(LINK_PREFIX_REGEX)) {\n      if (!value.length) {\n        setUsername('');\n        onChange?.('');\n      }\n      return;\n    }\n    const newUsername = value.replace(LINK_PREFIX_REGEX, '');\n\n    setUsername(newUsername);\n\n    const isValid = newUsername === '' ? true : isUsernameValid(newUsername, true);\n    if (!isValid) return;\n\n    onChange?.(newUsername);\n\n    runDebouncedForCheckUsername(() => {\n      if (newUsername !== currentUsername) {\n        const check = asLink ? checkPublicLink : checkUsername;\n        check({ username: newUsername });\n      }\n    });\n  }, [asLink, checkPublicLink, checkUsername, currentUsername, onChange]);\n\n  return (\n    <InputText\n      value={`${asLink ? TME_LINK_PREFIX : ''}${username}`}\n      onChange={handleUsernameChange}\n      label={isChecking ? lang('Checking') : label}\n      error={usernameError}\n      success={usernameSuccess}\n      readOnly={isLoading}\n      teactExperimentControlled\n    />\n  );\n};\n\nexport default memo(UsernameInput);\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useEffect, useRef } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiPeer,\n  ApiStoryForwardInfo,\n  ApiTypeStory,\n} from '../../../api/types';\nimport type { IconName } from '../../../types/icons';\n\nimport {\n  getSenderTitle,\n  isUserId,\n} from '../../../global/helpers';\nimport { selectPeer, selectPeerStory } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { getPeerColorClass } from '../helpers/peerColor';\nimport renderText from '../helpers/renderText';\nimport { renderTextWithEntities } from '../helpers/renderTextWithEntities';\n\nimport { useFastClick } from '../../../hooks/useFastClick';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Icon from '../icons/Icon';\nimport EmojiIconBackground from './EmojiIconBackground';\n\nimport './EmbeddedMessage.scss';\n\ntype OwnProps = {\n  forwardInfo: ApiStoryForwardInfo;\n  className?: string;\n};\n\ntype StateProps = {\n  sender?: ApiPeer;\n  story?: ApiTypeStory;\n};\n\nconst EmbeddedStoryForward: FC<OwnProps & StateProps> = ({\n  className,\n  forwardInfo,\n  sender,\n  story,\n}) => {\n  const { openStoryViewer, loadPeerStoriesByIds, openChat } = getActions();\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLDivElement>(null);\n\n  const lang = useOldLang();\n\n  useEffect(() => {\n    if (!story && forwardInfo.fromPeerId && forwardInfo.storyId) {\n      loadPeerStoriesByIds({\n        peerId: forwardInfo.fromPeerId,\n        storyIds: [forwardInfo.storyId],\n      });\n    }\n  }, [forwardInfo, story]);\n\n  const senderTitle = sender ? getSenderTitle(lang, sender) : forwardInfo.fromName;\n\n  const openOriginalStory = useLastCallback(() => {\n    const { fromPeerId, storyId } = forwardInfo;\n    if (!fromPeerId) return;\n\n    const isStoryReady = story && !('isDeleted' in story && story.isDeleted);\n\n    if (isStoryReady) {\n      openStoryViewer({\n        peerId: fromPeerId,\n        storyId,\n        isSingleStory: true,\n      });\n    } else {\n      openChat({ id: fromPeerId });\n    }\n  });\n\n  const { handleClick, handleMouseDown } = useFastClick(openOriginalStory);\n\n  function renderTextContent() {\n    if (story && 'content' in story && story.content.text) {\n      return (\n        <p className=\"embedded-text-wrapper\">\n          {renderTextWithEntities(story.content.text)}\n        </p>\n      );\n    }\n\n    return undefined;\n  }\n\n  function renderSender() {\n    if (!sender || !senderTitle) {\n      return undefined;\n    }\n\n    const icon: IconName | undefined = !isUserId(sender.id) ? 'channel-filled' : 'user-filled';\n\n    return (\n      <>\n        {icon && <Icon name={icon} className=\"embedded-chat-icon\" />}\n        {senderTitle && renderText(senderTitle)}\n      </>\n    );\n  }\n\n  return (\n    <div\n      ref={ref}\n      className={buildClassName(\n        'EmbeddedMessage',\n        className,\n        getPeerColorClass(sender, true, true),\n      )}\n      dir={lang.isRtl ? 'rtl' : undefined}\n      onClick={handleClick}\n      onMouseDown={handleMouseDown}\n    >\n      {sender?.color?.backgroundEmojiId && (\n        <EmojiIconBackground\n          emojiDocumentId={sender.color.backgroundEmojiId}\n          className=\"EmbeddedMessage--background-icons\"\n        />\n      )}\n      <div className=\"message-text\">\n        {renderTextContent()}\n        <div className=\"message-title\">\n          {renderSender()}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { forwardInfo }): StateProps => {\n    const sender = forwardInfo.fromPeerId ? selectPeer(global, forwardInfo.fromPeerId) : undefined;\n    const story = forwardInfo.storyId && forwardInfo.fromPeerId\n      ? selectPeerStory(global, forwardInfo.fromPeerId, forwardInfo.storyId) : undefined;\n    return {\n      sender,\n      story,\n    };\n  },\n)(EmbeddedStoryForward));\n","const VISA = /^4\\d/;\nconst MASTERCARD1 = /^5[1-5]/;\nconst MASTERCARD2 = /^2[2-7]\\d{2}/;\nconst MIR = /^220[0-4]/;\n\nexport enum CardType {\n  Default,\n  Visa,\n  Mastercard,\n  Mir,\n}\n\nconst cards: Record<number, string> = {\n  [CardType.Default]: '',\n  [CardType.Visa]: 'visa',\n  [CardType.Mastercard]: 'mastercard',\n  [CardType.Mir]: 'mir',\n};\n\nexport function detectCardType(cardNumber: string): number {\n  cardNumber = cardNumber.replace(/\\s/g, '');\n  if (VISA.test(cardNumber)) {\n    return CardType.Visa;\n  }\n  if (MIR.test(cardNumber)) {\n    return CardType.Mir;\n  }\n  if (MASTERCARD1.test(cardNumber) || MASTERCARD2.test(cardNumber)) {\n    return CardType.Mastercard;\n  }\n  return CardType.Default;\n}\n\nexport function detectCardTypeText(cardNumber: string): string {\n  const cardType = detectCardType(cardNumber);\n  return cards[cardType as number] || '';\n}\n","import type { RefObject } from 'react';\nimport { useRef, useState } from '../../../lib/teact/teact';\n\nimport { ANIMATION_END_DELAY } from '../../../config';\nimport animateScroll from '../../../util/animateScroll';\nimport { REM } from '../helpers/mediaDimensions';\n\nimport { useIntersectionObserver } from '../../../hooks/useIntersectionObserver';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useSyncEffect from '../../../hooks/useSyncEffect';\n\nconst STICKER_INTERSECTION_THROTTLE = 200;\nconst STICKER_INTERSECTION_MARGIN = 100;\nconst SLIDE_TRANSITION_DURATION = 350 + ANIMATION_END_DELAY;\nconst SCROLL_MAX_DISTANCE_WHEN_CLOSE = 200;\nconst SCROLL_MAX_DISTANCE_WHEN_FAR = 80;\nconst FOCUS_MARGIN = 0.5 * REM;\n\nexport function useStickerPickerObservers(\n  containerRef: RefObject<HTMLDivElement>,\n  headerRef: RefObject<HTMLDivElement>,\n  idPrefix: string,\n  isHidden?: boolean,\n) {\n  const stickerSetIntersectionsRef = useRef<boolean[]>([]);\n\n  const [activeSetIndex, setActiveSetIndex] = useState<number>(0);\n\n  const {\n    observe: observeIntersectionForSet,\n    freeze: freezeForSet,\n    unfreeze: unfreezeForSet,\n  } = useIntersectionObserver({\n    rootRef: containerRef,\n  }, (entries) => {\n    const stickerSetIntersections = stickerSetIntersectionsRef.current;\n\n    entries.forEach((entry) => {\n      const index = Number(entry.target.id.replace(`${idPrefix}-`, ''));\n      stickerSetIntersections[index] = entry.isIntersecting;\n    });\n\n    const minIntersectingIndex = stickerSetIntersections.reduce((lowestIndex, isIntersecting, index) => {\n      return isIntersecting && index < lowestIndex ? index : lowestIndex;\n    }, Infinity);\n\n    if (minIntersectingIndex === Infinity) {\n      return;\n    }\n\n    setActiveSetIndex(minIntersectingIndex);\n  });\n\n  const {\n    observe: observeIntersectionForShowingItems,\n    freeze: freezeForShowingItems,\n    unfreeze: unfreezeForShowingItems,\n  } = useIntersectionObserver({\n    rootRef: containerRef,\n    throttleMs: STICKER_INTERSECTION_THROTTLE,\n    margin: STICKER_INTERSECTION_MARGIN,\n  });\n\n  const {\n    observe: observeIntersectionForPlayingItems,\n  } = useIntersectionObserver({\n    rootRef: containerRef,\n    throttleMs: STICKER_INTERSECTION_THROTTLE,\n    margin: STICKER_INTERSECTION_MARGIN,\n  });\n\n  const {\n    observe: observeIntersectionForCovers,\n  } = useIntersectionObserver({\n    rootRef: headerRef,\n  });\n\n  useSyncEffect(() => {\n    if (isHidden) {\n      freezeForSet();\n      freezeForShowingItems();\n    } else {\n      setTimeout(() => {\n        unfreezeForShowingItems();\n        unfreezeForSet();\n      }, SLIDE_TRANSITION_DURATION);\n    }\n  }, [freezeForSet, freezeForShowingItems, isHidden, unfreezeForSet, unfreezeForShowingItems]);\n\n  const selectStickerSet = useLastCallback((index: number) => {\n    setActiveSetIndex((currentIndex) => {\n      const stickerSetEl = document.getElementById(`${idPrefix}-${index}`)!;\n      const isClose = Math.abs(currentIndex - index) === 1;\n\n      animateScroll(\n        containerRef.current!,\n        stickerSetEl,\n        'start',\n        FOCUS_MARGIN,\n        isClose ? SCROLL_MAX_DISTANCE_WHEN_CLOSE : SCROLL_MAX_DISTANCE_WHEN_FAR,\n      );\n\n      return index;\n    });\n  });\n\n  return {\n    activeSetIndex,\n    observeIntersectionForSet,\n    observeIntersectionForShowingItems,\n    observeIntersectionForPlayingItems,\n    observeIntersectionForCovers,\n    selectStickerSet,\n  };\n}\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { GlobalState } from '../../global/types';\nimport type { FolderEditDispatch } from '../../hooks/reducers/useFoldersReducer';\nimport type { LeftColumnContent, SettingsScreens } from '../../types';\n\nimport { ANIMATION_END_DELAY } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATION_DURATION } from '../story/helpers/ribbonAnimation';\n\nimport useForumPanelRender from '../../hooks/useForumPanelRender';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useOldLang from '../../hooks/useOldLang';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport useLeftHeaderButtonRtlForumTransition from './main/hooks/useLeftHeaderButtonRtlForumTransition';\n\nimport StoryRibbon from '../story/StoryRibbon';\nimport StoryToggler from '../story/StoryToggler';\nimport Button from '../ui/Button';\nimport DropdownMenu from '../ui/DropdownMenu';\nimport MenuItem from '../ui/MenuItem';\nimport ChatList from './main/ChatList';\nimport ForumPanel from './main/ForumPanel';\n\nimport './ArchivedChats.scss';\n\nexport type OwnProps = {\n  isActive: boolean;\n  isForumPanelOpen?: boolean;\n  archiveSettings: GlobalState['archiveSettings'];\n  isStoryRibbonShown?: boolean;\n  onReset: () => void;\n  onTopicSearch: NoneToVoidFunction;\n  onSettingsScreenSelect: (screen: SettingsScreens) => void;\n  foldersDispatch: FolderEditDispatch;\n  onLeftColumnContentChange: (content: LeftColumnContent) => void;\n};\n\nconst ArchivedChats: FC<OwnProps> = ({\n  isActive,\n  isForumPanelOpen,\n  archiveSettings,\n  isStoryRibbonShown,\n  onReset,\n  onTopicSearch,\n  onSettingsScreenSelect,\n  onLeftColumnContentChange,\n  foldersDispatch,\n}) => {\n  const { updateArchiveSettings } = getActions();\n  const lang = useOldLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onReset,\n  });\n\n  const handleDisplayArchiveInChats = useLastCallback(() => {\n    updateArchiveSettings({ isHidden: false });\n  });\n\n  const {\n    shouldDisableDropdownMenuTransitionRef,\n    handleDropdownMenuTransitionEnd,\n  } = useLeftHeaderButtonRtlForumTransition(isForumPanelOpen);\n\n  const {\n    shouldRender: shouldRenderTitle,\n    transitionClassNames: titleClassNames,\n  } = useShowTransition(!isForumPanelOpen);\n\n  const {\n    shouldRenderForumPanel, handleForumPanelAnimationEnd,\n    handleForumPanelAnimationStart, isAnimationStarted,\n  } = useForumPanelRender(isForumPanelOpen);\n  const isForumPanelVisible = isForumPanelOpen && isAnimationStarted;\n\n  const {\n    shouldRender: shouldRenderStoryRibbon,\n    transitionClassNames: storyRibbonClassNames,\n    isClosing: isStoryRibbonClosing,\n  } = useShowTransition(isStoryRibbonShown, undefined, undefined, '', false, ANIMATION_DURATION + ANIMATION_END_DELAY);\n\n  return (\n    <div className=\"ArchivedChats\">\n      <div className={buildClassName('left-header', !shouldRenderStoryRibbon && 'left-header-shadow')}>\n        {lang.isRtl && <div className=\"DropdownMenuFiller\" />}\n        <Button\n          round\n          size=\"smaller\"\n          color=\"translucent\"\n          onClick={onReset}\n          ariaLabel=\"Return to chat list\"\n          className={buildClassName(\n            lang.isRtl && 'rtl',\n            isForumPanelVisible && lang.isRtl && 'right-aligned',\n            shouldDisableDropdownMenuTransitionRef.current && lang.isRtl && 'disable-transition',\n          )}\n          onTransitionEnd={handleDropdownMenuTransitionEnd}\n        >\n          <i className=\"icon icon-arrow-left\" />\n        </Button>\n        {shouldRenderTitle && <h3 className={titleClassNames}>{lang('ArchivedChats')}</h3>}\n        <div className=\"story-toggler-wrapper\">\n          <StoryToggler canShow isArchived />\n        </div>\n        {archiveSettings.isHidden && (\n          <DropdownMenu\n            className=\"archived-chats-more-menu\"\n            positionX=\"right\"\n            onTransitionEnd={lang.isRtl ? handleDropdownMenuTransitionEnd : undefined}\n          >\n            <MenuItem icon=\"archive-from-main\" onClick={handleDisplayArchiveInChats}>\n              {lang('lng_context_archive_to_list')}\n            </MenuItem>\n          </DropdownMenu>\n        )}\n      </div>\n      <div\n        className={buildClassName(\n          'chat-list-wrapper',\n          shouldRenderStoryRibbon && 'with-story-ribbon',\n          storyRibbonClassNames,\n        )}\n      >\n        {shouldRenderStoryRibbon && (\n          <StoryRibbon isArchived className=\"left-header-shadow\" isClosing={isStoryRibbonClosing} />\n        )}\n        <ChatList\n          folderType=\"archived\"\n          isActive={isActive}\n          isForumPanelOpen={isForumPanelVisible}\n          onSettingsScreenSelect={onSettingsScreenSelect}\n          onLeftColumnContentChange={onLeftColumnContentChange}\n          foldersDispatch={foldersDispatch}\n          archiveSettings={archiveSettings}\n        />\n      </div>\n      {shouldRenderForumPanel && (\n        <ForumPanel\n          isOpen={isForumPanelOpen}\n          onTopicSearch={onTopicSearch}\n          onOpenAnimationStart={handleForumPanelAnimationStart}\n          onCloseAnimationEnd={handleForumPanelAnimationEnd}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default memo(ArchivedChats);\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiChatFolder } from '../../api/types';\n\nimport { ALL_FOLDER_ID } from '../../config';\n\nimport useOldLang from '../../hooks/useOldLang';\n\nimport Button from '../ui/Button';\nimport CheckboxGroup from '../ui/CheckboxGroup';\nimport Modal from '../ui/Modal';\n\nexport type OwnProps = {\n  isOpen: boolean;\n  chatId: string;\n  onClose: () => void;\n  onCloseAnimationEnd?: () => void;\n};\n\ntype StateProps = {\n  foldersById?: Record<number, ApiChatFolder>;\n  folderOrderedIds?: number[];\n};\n\nconst ChatFolderModal: FC<OwnProps & StateProps> = ({\n  isOpen,\n  chatId,\n  foldersById,\n  folderOrderedIds,\n  onClose,\n  onCloseAnimationEnd,\n}) => {\n  const { editChatFolders } = getActions();\n\n  const lang = useOldLang();\n\n  const initialSelectedFolderIds = useMemo(() => {\n    if (!foldersById) {\n      return [];\n    }\n\n    return Object.keys(foldersById).reduce((result, folderId) => {\n      const { includedChatIds, pinnedChatIds } = foldersById[Number(folderId)];\n      if (includedChatIds.includes(chatId) || pinnedChatIds?.includes(chatId)) {\n        result.push(folderId);\n      }\n\n      return result;\n    }, [] as string[]);\n  }, [chatId, foldersById]);\n\n  const [selectedFolderIds, setSelectedFolderIds] = useState<string[]>(initialSelectedFolderIds);\n\n  const folders = useMemo(() => {\n    return folderOrderedIds?.filter((folderId) => folderId !== ALL_FOLDER_ID).map((folderId) => ({\n      label: foldersById ? foldersById[folderId].title : '',\n      value: String(folderId),\n    })) || [];\n  }, [folderOrderedIds, foldersById]);\n\n  const handleSubmit = useCallback(() => {\n    const idsToRemove = initialSelectedFolderIds.filter((id) => !selectedFolderIds.includes(id)).map(Number);\n    const idsToAdd = selectedFolderIds.filter((id) => !initialSelectedFolderIds.includes(id)).map(Number);\n\n    editChatFolders({ chatId, idsToRemove, idsToAdd });\n    onClose();\n  }, [chatId, editChatFolders, initialSelectedFolderIds, onClose, selectedFolderIds]);\n\n  if (!foldersById || !folderOrderedIds) {\n    return undefined;\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      onCloseAnimationEnd={onCloseAnimationEnd}\n      onEnter={handleSubmit}\n      className=\"delete\"\n      title={lang('FilterAddTo')}\n    >\n      <CheckboxGroup\n        options={folders}\n        selected={selectedFolderIds}\n        onChange={setSelectedFolderIds}\n        round\n      />\n      <div className=\"dialog-buttons\">\n        <Button color=\"primary\" className=\"confirm-dialog-button\" isText onClick={handleSubmit}>\n          {lang('FilterAddTo')}\n        </Button>\n        <Button className=\"confirm-dialog-button\" isText onClick={onClose}>{lang('Cancel')}</Button>\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const { byId: foldersById, orderedIds: folderOrderedIds } = global.chatFolders;\n\n    return {\n      foldersById,\n      folderOrderedIds,\n    };\n  },\n)(ChatFolderModal));\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { MAX_INT_32 } from '../../config';\n\nimport useOldLang from '../../hooks/useOldLang';\n\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport RadioGroup from '../ui/RadioGroup';\n\nexport type OwnProps = {\n  isOpen: boolean;\n  chatId: string;\n  topicId?: number;\n  onClose: () => void;\n  onCloseAnimationEnd?: () => void;\n};\n\nenum MuteDuration {\n  OneHour = '3600',\n  FourHours = '14400',\n  EightHours = '28800',\n  OneDay = '86400',\n  ThreeDays = '259200',\n  Forever = '-1',\n}\n\nconst MuteChatModal: FC<OwnProps> = ({\n  isOpen,\n  chatId,\n  topicId,\n  onClose,\n  onCloseAnimationEnd,\n}) => {\n  const [muteUntilOption, setMuteUntilOption] = useState(MuteDuration.Forever);\n  const { updateChatMutedState, updateTopicMutedState } = getActions();\n\n  const lang = useOldLang();\n\n  const muteForOptions = useMemo(() => [\n    { label: lang('MuteFor.Hours', 1), value: MuteDuration.OneHour },\n    { label: lang('MuteFor.Hours', 4), value: MuteDuration.FourHours },\n    { label: lang('MuteFor.Hours', 8), value: MuteDuration.EightHours },\n    { label: lang('MuteFor.Days', 1), value: MuteDuration.OneDay },\n    { label: lang('MuteFor.Days', 3), value: MuteDuration.ThreeDays },\n    { label: lang('MuteFor.Forever'), value: MuteDuration.Forever },\n  ], [lang]);\n\n  const handleSubmit = useCallback(() => {\n    let muteUntil: number;\n    if (muteUntilOption === MuteDuration.Forever) {\n      muteUntil = MAX_INT_32;\n    } else {\n      muteUntil = Math.floor(Date.now() / 1000) + Number(muteUntilOption);\n    }\n    if (topicId) {\n      updateTopicMutedState({ chatId, topicId, muteUntil });\n    } else {\n      updateChatMutedState({ chatId, muteUntil });\n    }\n    onClose();\n  }, [chatId, muteUntilOption, onClose, topicId]);\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      onCloseAnimationEnd={onCloseAnimationEnd}\n      onEnter={handleSubmit}\n      className=\"delete\"\n      title={lang('Notifications')}\n    >\n      <RadioGroup\n        name=\"muteFor\"\n        options={muteForOptions}\n        selected={muteUntilOption}\n        onChange={setMuteUntilOption as any}\n      />\n      <div className=\"dialog-buttons\">\n        <Button color=\"primary\" className=\"confirm-dialog-button\" isText onClick={handleSubmit}>\n          {lang('Common.Done')}\n        </Button>\n        <Button className=\"confirm-dialog-button\" isText onClick={onClose}>{lang('Cancel')}</Button>\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(MuteChatModal);\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useCallback, useMemo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiUser, ApiUserStatus } from '../../../api/types';\nimport { StoryViewerOrigin } from '../../../types';\n\nimport { filterUsersByName, sortUserIds } from '../../../global/helpers';\n\nimport useAppLayout from '../../../hooks/useAppLayout';\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useInfiniteScroll from '../../../hooks/useInfiniteScroll';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport PrivateChatInfo from '../../common/PrivateChatInfo';\nimport FloatingActionButton from '../../ui/FloatingActionButton';\nimport InfiniteScroll from '../../ui/InfiniteScroll';\nimport ListItem from '../../ui/ListItem';\nimport Loading from '../../ui/Loading';\n\nexport type OwnProps = {\n  filter: string;\n  isActive: boolean;\n  onReset: () => void;\n};\n\ntype StateProps = {\n  usersById: Record<string, ApiUser>;\n  userStatusesById: Record<string, ApiUserStatus>;\n  contactIds?: string[];\n};\n\nconst ContactList: FC<OwnProps & StateProps> = ({\n  isActive,\n  filter,\n  usersById,\n  userStatusesById,\n  contactIds,\n  onReset,\n}) => {\n  const {\n    openChat,\n    openNewContactDialog,\n  } = getActions();\n\n  const lang = useOldLang();\n  const { isMobile } = useAppLayout();\n\n  useHistoryBack({\n    isActive,\n    onBack: onReset,\n  });\n\n  const handleClick = useCallback((id: string) => {\n    openChat({ id, shouldReplaceHistory: true });\n  }, [openChat]);\n\n  const listIds = useMemo(() => {\n    if (!contactIds) {\n      return undefined;\n    }\n\n    const filteredIds = filterUsersByName(contactIds, usersById, filter);\n\n    return sortUserIds(filteredIds, usersById, userStatusesById);\n  }, [contactIds, filter, usersById, userStatusesById]);\n\n  const [viewportIds, getMore] = useInfiniteScroll(undefined, listIds, Boolean(filter));\n\n  return (\n    <InfiniteScroll items={viewportIds} onLoadMore={getMore} className=\"chat-list custom-scroll\">\n      {viewportIds?.length ? (\n        viewportIds.map((id) => (\n          <ListItem\n            key={id}\n            className=\"chat-item-clickable contact-list-item\"\n            // eslint-disable-next-line react/jsx-no-bind\n            onClick={() => handleClick(id)}\n          >\n            <PrivateChatInfo\n              userId={id}\n              forceShowSelf\n              avatarSize=\"large\"\n              withStory\n              storyViewerOrigin={StoryViewerOrigin.ChatList}\n              ripple={!isMobile}\n            />\n          </ListItem>\n        ))\n      ) : viewportIds && !viewportIds.length ? (\n        <p className=\"no-results\" key=\"no-results\" dir=\"auto\">\n          {filter.length ? 'No contacts matched your search.' : 'Contact list is empty.'}\n        </p>\n      ) : (\n        <Loading key=\"loading\" />\n      )}\n      <FloatingActionButton\n        key=\"create-new-contact\"\n        isShown\n        onClick={openNewContactDialog}\n        ariaLabel={lang('CreateNewContact')}\n      >\n        <i className=\"icon icon-add-user-filled\" />\n      </FloatingActionButton>\n    </InfiniteScroll>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const { userIds: contactIds } = global.contactList || {};\n    const { byId: usersById, statusesById: userStatusesById } = global.users;\n\n    return {\n      usersById,\n      userStatusesById,\n      contactIds,\n    };\n  },\n)(ContactList));\n","import type { RefObject } from 'react';\nimport type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect, useRef,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiSticker } from '../../../api/types';\n\nimport { selectIsContextMenuTranslucent } from '../../../global/selectors';\n\nimport useFlag from '../../../hooks/useFlag';\n\nimport CustomEmojiPicker from '../../common/CustomEmojiPicker';\nimport Menu from '../../ui/Menu';\nimport Portal from '../../ui/Portal';\n\nimport styles from './StatusPickerMenu.module.scss';\n\nexport type OwnProps = {\n  isOpen: boolean;\n  statusButtonRef: RefObject<HTMLButtonElement>;\n  onEmojiStatusSelect: (emojiStatus: ApiSticker) => void;\n  onClose: () => void;\n};\n\ninterface StateProps {\n  areFeaturedStickersLoaded?: boolean;\n  isTranslucent?: boolean;\n}\n\nconst StatusPickerMenu: FC<OwnProps & StateProps> = ({\n  isOpen,\n  statusButtonRef,\n  areFeaturedStickersLoaded,\n  isTranslucent,\n  onEmojiStatusSelect,\n  onClose,\n}) => {\n  const { loadFeaturedEmojiStickers } = getActions();\n\n  const transformOriginX = useRef<number>();\n  const [isContextMenuShown, markContextMenuShown, unmarkContextMenuShown] = useFlag();\n  useEffect(() => {\n    transformOriginX.current = statusButtonRef.current!.getBoundingClientRect().right;\n  }, [isOpen, statusButtonRef]);\n\n  useEffect(() => {\n    if (isOpen && !areFeaturedStickersLoaded) {\n      loadFeaturedEmojiStickers();\n    }\n  }, [areFeaturedStickersLoaded, isOpen, loadFeaturedEmojiStickers]);\n\n  const handleEmojiSelect = useCallback((sticker: ApiSticker) => {\n    onEmojiStatusSelect(sticker);\n    onClose();\n  }, [onClose, onEmojiStatusSelect]);\n\n  return (\n    <Portal>\n      <Menu\n        isOpen={isOpen}\n        noCompact\n        positionX=\"right\"\n        bubbleClassName={styles.menuContent}\n        onClose={onClose}\n        transformOriginX={transformOriginX.current}\n        noCloseOnBackdrop={isContextMenuShown}\n      >\n        <CustomEmojiPicker\n          idPrefix=\"status-emoji-set-\"\n          loadAndPlay={isOpen}\n          isHidden={!isOpen}\n          isStatusPicker\n          isTranslucent={isTranslucent}\n          onContextMenuOpen={markContextMenuShown}\n          onContextMenuClose={unmarkContextMenuShown}\n          onCustomEmojiSelect={handleEmojiSelect}\n          onContextMenuClick={onClose}\n        />\n      </Menu>\n    </Portal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    areFeaturedStickersLoaded: Boolean(global.customEmojis.featuredIds?.length),\n    isTranslucent: selectIsContextMenuTranslucent(global),\n  };\n})(StatusPickerMenu));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useCallback, useState } from '../../../lib/teact/teact';\n\nimport { LeftColumnContent } from '../../../types';\n\nimport { LAYERS_ANIMATION_NAME } from '../../../util/windowEnvironment';\n\nimport Transition from '../../ui/Transition';\nimport NewChatStep1 from './NewChatStep1';\nimport NewChatStep2 from './NewChatStep2';\n\nimport './NewChat.scss';\n\nexport type OwnProps = {\n  isActive: boolean;\n  isChannel?: boolean;\n  content: LeftColumnContent;\n  onContentChange: (content: LeftColumnContent) => void;\n  onReset: () => void;\n};\n\nconst RENDER_COUNT = Object.keys(LeftColumnContent).length / 2;\n\nconst NewChat: FC<OwnProps> = ({\n  isActive,\n  isChannel = false,\n  content,\n  onContentChange,\n  onReset,\n}) => {\n  const [newChatMemberIds, setNewChatMemberIds] = useState<string[]>([]);\n\n  const handleNextStep = useCallback(() => {\n    onContentChange(isChannel ? LeftColumnContent.NewChannelStep2 : LeftColumnContent.NewGroupStep2);\n  }, [isChannel, onContentChange]);\n\n  return (\n    <Transition\n      id=\"NewChat\"\n      name={LAYERS_ANIMATION_NAME}\n      renderCount={RENDER_COUNT}\n      activeKey={content}\n    >\n      {(isStepActive) => {\n        switch (content) {\n          case LeftColumnContent.NewChannelStep1:\n          case LeftColumnContent.NewGroupStep1:\n            return (\n              <NewChatStep1\n                isChannel={isChannel}\n                isActive={isActive}\n                selectedMemberIds={newChatMemberIds}\n                onSelectedMemberIdsChange={setNewChatMemberIds}\n                onNextStep={handleNextStep}\n                onReset={onReset}\n              />\n            );\n          case LeftColumnContent.NewChannelStep2:\n          case LeftColumnContent.NewGroupStep2:\n            return (\n              <NewChatStep2\n                isChannel={isChannel}\n                isActive={isStepActive && isActive}\n                memberIds={newChatMemberIds}\n                onReset={onReset}\n              />\n            );\n          default:\n            return undefined;\n        }\n      }}\n    </Transition>\n  );\n};\n\nexport default memo(NewChat);\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useCallback, useMemo } from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport { filterUsersByName, isUserBot } from '../../../global/helpers';\nimport { selectTabState } from '../../../global/selectors';\nimport { unique } from '../../../util/iteratees';\nimport sortChatIds from '../../common/helpers/sortChatIds';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Picker from '../../common/Picker';\nimport Button from '../../ui/Button';\nimport FloatingActionButton from '../../ui/FloatingActionButton';\n\nexport type OwnProps = {\n  isChannel?: boolean;\n  isActive: boolean;\n  selectedMemberIds: string[];\n  onSelectedMemberIdsChange: (ids: string[]) => void;\n  onNextStep: () => void;\n  onReset: () => void;\n};\n\ntype StateProps = {\n  localContactIds?: string[];\n  searchQuery?: string;\n  isSearching?: boolean;\n  localPeerIds?: string[];\n  globalPeerIds?: string[];\n};\n\nconst NewChatStep1: FC<OwnProps & StateProps> = ({\n  isChannel,\n  isActive,\n  selectedMemberIds,\n  localContactIds,\n  searchQuery,\n  isSearching,\n  localPeerIds,\n  globalPeerIds,\n  onSelectedMemberIdsChange,\n  onNextStep,\n  onReset,\n}) => {\n  const {\n    setGlobalSearchQuery,\n  } = getActions();\n\n  const lang = useOldLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onReset,\n  });\n\n  const handleFilterChange = useCallback((query: string) => {\n    setGlobalSearchQuery({ query });\n  }, []);\n\n  const displayedIds = useMemo(() => {\n    // No need for expensive global updates on users, so we avoid them\n    const usersById = getGlobal().users.byId;\n    const foundContactIds = localContactIds ? filterUsersByName(localContactIds, usersById, searchQuery) : [];\n\n    return sortChatIds(\n      unique([\n        ...foundContactIds,\n        ...(localPeerIds || []),\n        ...(globalPeerIds || []),\n      ]).filter((contactId) => {\n        const user = usersById[contactId];\n\n        return user && !user.isSelf && (user.canBeInvitedToGroup || !isUserBot(user));\n      }),\n      false,\n      selectedMemberIds,\n    );\n  }, [localContactIds, searchQuery, localPeerIds, globalPeerIds, selectedMemberIds]);\n\n  const handleNextStep = useCallback(() => {\n    setGlobalSearchQuery({ query: '' });\n    onNextStep();\n  }, [onNextStep]);\n\n  return (\n    <div className=\"NewChat step-1\">\n      <div className=\"left-header\">\n        <Button\n          round\n          size=\"smaller\"\n          color=\"translucent\"\n          onClick={onReset}\n          ariaLabel=\"Return to Chat List\"\n        >\n          <i className=\"icon icon-arrow-left\" />\n        </Button>\n        <h3>{lang('GroupAddMembers')}</h3>\n      </div>\n      <div className=\"NewChat-inner step-1\">\n        <Picker\n          itemIds={displayedIds}\n          selectedIds={selectedMemberIds}\n          filterValue={searchQuery}\n          filterPlaceholder={lang('SendMessageTo')}\n          searchInputId=\"new-group-picker-search\"\n          isLoading={isSearching}\n          isSearchable\n          onSelectedIdsChange={onSelectedMemberIdsChange}\n          onFilterChange={handleFilterChange}\n        />\n\n        <FloatingActionButton\n          isShown\n          onClick={handleNextStep}\n          ariaLabel={isChannel ? 'Continue To Channel Info' : 'Continue To Group Info'}\n        >\n          <i className=\"icon icon-arrow-right\" />\n        </FloatingActionButton>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const { userIds: localContactIds } = global.contactList || {};\n\n    const {\n      query: searchQuery,\n      fetchingStatus,\n      globalResults,\n      localResults,\n    } = selectTabState(global).globalSearch;\n    const { peerIds: globalPeerIds } = globalResults || {};\n    const { peerIds: localPeerIds } = localResults || {};\n\n    return {\n      localContactIds,\n      searchQuery,\n      isSearching: fetchingStatus?.chats,\n      globalPeerIds,\n      localPeerIds,\n    };\n  },\n)(NewChatStep1));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo,\n  useCallback, useEffect, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport { ChatCreationProgress } from '../../../types';\n\nimport { getUserFirstOrLastName } from '../../../global/helpers';\nimport { selectTabState } from '../../../global/selectors';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport PrivateChatInfo from '../../common/PrivateChatInfo';\nimport AvatarEditable from '../../ui/AvatarEditable';\nimport Button from '../../ui/Button';\nimport FloatingActionButton from '../../ui/FloatingActionButton';\nimport InputText from '../../ui/InputText';\nimport ListItem from '../../ui/ListItem';\nimport Spinner from '../../ui/Spinner';\n\nexport type OwnProps = {\n  isChannel?: boolean;\n  isActive: boolean;\n  memberIds: string[];\n  onReset: (forceReturnToChatList?: boolean) => void;\n};\n\ntype StateProps = {\n  creationProgress?: ChatCreationProgress;\n  creationError?: string;\n  maxGroupSize?: number;\n};\n\nconst MAX_MEMBERS_FOR_GENERATE_CHAT_NAME = 4;\n\nconst NewChatStep2: FC<OwnProps & StateProps > = ({\n  isChannel,\n  isActive,\n  memberIds,\n  maxGroupSize,\n  creationProgress,\n  creationError,\n  onReset,\n}) => {\n  const {\n    createGroupChat,\n    createChannel,\n  } = getActions();\n\n  const lang = useOldLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onReset,\n  });\n\n  const [title, setTitle] = useState('');\n  const [about, setAbout] = useState('');\n  const [photo, setPhoto] = useState<File | undefined>();\n  const [error, setError] = useState<string | undefined>();\n\n  const chatTitleEmptyError = 'Chat title can\\'t be empty';\n  const channelTitleEmptyError = 'Channel title can\\'t be empty';\n  const chatTooManyUsersError = 'Sorry, creating supergroups is not yet supported';\n\n  const isLoading = creationProgress === ChatCreationProgress.InProgress;\n\n  useEffect(() => {\n    if (isChannel) {\n      return;\n    }\n    if (!memberIds.length || memberIds.length > MAX_MEMBERS_FOR_GENERATE_CHAT_NAME) {\n      setTitle('');\n      return;\n    }\n    const global = getGlobal();\n    const usersById = global.users.byId;\n    const memberFirstNames = [global.currentUserId!, ...memberIds]\n      .map((userId) => getUserFirstOrLastName(usersById[userId]))\n      .filter(Boolean);\n    const generatedChatName = memberFirstNames.slice(0, -1).join(', ')\n      + lang('CreateGroup.PeersTitleLastDelimeter')\n      + memberFirstNames[memberFirstNames.length - 1];\n    setTitle(generatedChatName);\n  }, [isChannel, memberIds, lang]);\n\n  const handleTitleChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const { value } = e.currentTarget;\n    const newValue = value.replace(/^\\s+/, '');\n\n    setTitle(newValue);\n\n    if (newValue !== value) {\n      e.currentTarget.value = newValue;\n    }\n  }, []);\n\n  const handleDescriptionChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setAbout(e.currentTarget.value);\n  }, []);\n\n  const handleCreateGroup = useCallback(() => {\n    if (!title.length) {\n      setError(chatTitleEmptyError);\n      return;\n    }\n\n    if (maxGroupSize && memberIds.length >= maxGroupSize) {\n      setError(chatTooManyUsersError);\n      return;\n    }\n\n    createGroupChat({\n      title,\n      photo,\n      memberIds,\n    });\n  }, [title, memberIds, maxGroupSize, createGroupChat, photo]);\n\n  const handleCreateChannel = useCallback(() => {\n    if (!title.length) {\n      setError(channelTitleEmptyError);\n      return;\n    }\n\n    createChannel({\n      title,\n      about,\n      photo,\n      memberIds,\n    });\n  }, [title, createChannel, about, photo, memberIds, channelTitleEmptyError]);\n\n  useEffect(() => {\n    if (creationProgress === ChatCreationProgress.Complete) {\n      onReset(true);\n    }\n  }, [creationProgress, onReset]);\n\n  const renderedError = (creationError && lang(creationError)) || (\n    error !== chatTitleEmptyError && error !== channelTitleEmptyError\n      ? error\n      : undefined\n  );\n\n  return (\n    <div className=\"NewChat\">\n      <div className=\"left-header\">\n        <Button\n          round\n          size=\"smaller\"\n          color=\"translucent\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => onReset()}\n          ariaLabel=\"Return to member selection\"\n        >\n          <i className=\"icon icon-arrow-left\" />\n        </Button>\n        <h3>{lang(isChannel ? 'NewChannel' : 'NewGroup')}</h3>\n      </div>\n      <div className=\"NewChat-inner step-2\">\n        <AvatarEditable\n          onChange={setPhoto}\n          title={lang('AddPhoto')}\n        />\n        <InputText\n          value={title}\n          onChange={handleTitleChange}\n          label={lang(isChannel ? 'EnterChannelName' : 'GroupName')}\n          error={error === chatTitleEmptyError || error === channelTitleEmptyError ? error : undefined}\n        />\n        {isChannel && (\n          <>\n            <InputText\n              value={about}\n              onChange={handleDescriptionChange}\n              label={lang('DescriptionOptionalPlaceholder')}\n            />\n            <p className=\"note\">{lang('DescriptionInfo')}</p>\n          </>\n        )}\n\n        {renderedError && (\n          <p className=\"error\">{renderedError}</p>\n        )}\n\n        {memberIds.length > 0 && (\n          <>\n            <h3 className=\"chat-members-heading\">{lang('GroupInfo.ParticipantCount', memberIds.length, 'i')}</h3>\n\n            <div className=\"chat-members-list custom-scroll\">\n              {memberIds.map((id) => (\n                <ListItem inactive className=\"chat-item-clickable\">\n                  <PrivateChatInfo userId={id} />\n                </ListItem>\n              ))}\n            </div>\n          </>\n        )}\n      </div>\n\n      <FloatingActionButton\n        isShown={title.length !== 0}\n        onClick={isChannel ? handleCreateChannel : handleCreateGroup}\n        disabled={isLoading}\n        ariaLabel={isChannel ? lang('ChannelIntro.CreateChannel') : 'Create Group'}\n      >\n        {isLoading ? (\n          <Spinner color=\"white\" />\n        ) : (\n          <i className=\"icon icon-arrow-right\" />\n        )}\n      </FloatingActionButton>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const {\n      progress: creationProgress,\n      error: creationError,\n    } = selectTabState(global).chatCreation || {};\n\n    return {\n      creationProgress,\n      creationError,\n      maxGroupSize: global.config?.maxGroupSize,\n    };\n  },\n)(NewChatStep2));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useCallback, useMemo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiMessage } from '../../../api/types';\nimport type { StateProps } from './helpers/createMapStateToProps';\nimport { AudioOrigin, LoadMoreDirection } from '../../../types';\n\nimport { SLIDE_TRANSITION_DURATION } from '../../../config';\nimport { getIsDownloading } from '../../../global/helpers';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatMonthAndYear, toYearMonth } from '../../../util/dates/dateFormat';\nimport { MEMO_EMPTY_ARRAY } from '../../../util/memo';\nimport { throttle } from '../../../util/schedulers';\nimport { createMapStateToProps } from './helpers/createMapStateToProps';\nimport { getSenderName } from './helpers/getSenderName';\n\nimport useOldLang from '../../../hooks/useOldLang';\nimport useAsyncRendering from '../../right/hooks/useAsyncRendering';\n\nimport Audio from '../../common/Audio';\nimport NothingFound from '../../common/NothingFound';\nimport InfiniteScroll from '../../ui/InfiniteScroll';\nimport Loading from '../../ui/Loading';\n\nexport type OwnProps = {\n  isVoice?: boolean;\n  searchQuery?: string;\n};\n\nconst runThrottled = throttle((cb) => cb(), 500, true);\n\nconst AudioResults: FC<OwnProps & StateProps> = ({\n  theme,\n  isVoice,\n  searchQuery,\n  isLoading,\n  chatsById,\n  usersById,\n  globalMessagesByChatId,\n  foundIds,\n  activeDownloads,\n}) => {\n  const {\n    searchMessagesGlobal,\n    focusMessage,\n    openAudioPlayer,\n  } = getActions();\n\n  const lang = useOldLang();\n  const currentType = isVoice ? 'voice' : 'audio';\n  const handleLoadMore = useCallback(({ direction }: { direction: LoadMoreDirection }) => {\n    if (direction === LoadMoreDirection.Backwards) {\n      runThrottled(() => {\n        searchMessagesGlobal({\n          type: currentType,\n        });\n      });\n    }\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps -- `searchQuery` is required to prevent infinite message loading\n  }, [currentType, searchMessagesGlobal, searchQuery]);\n\n  const foundMessages = useMemo(() => {\n    if (!foundIds || !globalMessagesByChatId) {\n      return MEMO_EMPTY_ARRAY;\n    }\n\n    return foundIds.map((id) => {\n      const [chatId, messageId] = id.split('_');\n\n      return globalMessagesByChatId[chatId]?.byId[Number(messageId)];\n    }).filter(Boolean);\n  }, [globalMessagesByChatId, foundIds]);\n\n  const handleMessageFocus = useCallback((message: ApiMessage) => {\n    focusMessage({ chatId: message.chatId, messageId: message.id });\n  }, [focusMessage]);\n\n  const handlePlayAudio = useCallback((messageId: number, chatId: string) => {\n    openAudioPlayer({ chatId, messageId });\n  }, [openAudioPlayer]);\n\n  function renderList() {\n    return foundMessages.map((message, index) => {\n      const isFirst = index === 0;\n      const shouldDrawDateDivider = isFirst\n        || toYearMonth(message.date) !== toYearMonth(foundMessages[index - 1].date);\n      return (\n        <div\n          className=\"ListItem small-icon\"\n          key={message.id}\n        >\n          {shouldDrawDateDivider && (\n            <p\n              className={buildClassName(\n                'section-heading',\n                isFirst && 'section-heading-first',\n                !isFirst && 'section-heading-with-border',\n              )}\n              dir={lang.isRtl ? 'rtl' : undefined}\n            >\n              {formatMonthAndYear(lang, new Date(message.date * 1000))}\n            </p>\n          )}\n          <Audio\n            key={message.id}\n            theme={theme}\n            message={message}\n            origin={AudioOrigin.Search}\n            senderTitle={getSenderName(lang, message, chatsById, usersById)}\n            date={message.date}\n            className=\"scroll-item\"\n            onPlay={handlePlayAudio}\n            onDateClick={handleMessageFocus}\n            canDownload={!chatsById[message.chatId]?.isProtected && !message.isProtected}\n            isDownloading={getIsDownloading(activeDownloads, message.content.audio!)}\n          />\n        </div>\n      );\n    });\n  }\n\n  const canRenderContents = useAsyncRendering([searchQuery], SLIDE_TRANSITION_DURATION) && !isLoading;\n\n  return (\n    <div className=\"LeftSearch\">\n      <InfiniteScroll\n        className=\"search-content documents-list custom-scroll\"\n        items={foundMessages}\n        onLoadMore={handleLoadMore}\n        noFastList\n      >\n        {!canRenderContents && <Loading />}\n        {canRenderContents && (!foundIds || foundIds.length === 0) && (\n          <NothingFound\n            text={lang('ChatList.Search.NoResults')}\n            description={lang('ChatList.Search.NoResultsDescription')}\n          />\n        )}\n        {canRenderContents && foundIds && foundIds.length > 0 && renderList()}\n      </InfiniteScroll>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  createMapStateToProps('audio'),\n)(AudioResults));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiChat, ApiMessage, ApiMessageOutgoingStatus,\n  ApiUser,\n} from '../../../api/types';\nimport type { LangFn } from '../../../hooks/useOldLang';\n\nimport {\n  getMessageIsSpoiler,\n  getMessageMediaHash,\n  getMessageMediaThumbDataUri,\n  getMessageRoundVideo,\n  getMessageSticker,\n  getMessageVideo,\n  getPrivateChatUserId,\n} from '../../../global/helpers';\nimport { selectChat, selectUser } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatPastTimeShort } from '../../../util/dates/dateFormat';\nimport { renderMessageSummary } from '../../common/helpers/renderMessageText';\n\nimport useAppLayout from '../../../hooks/useAppLayout';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useMedia from '../../../hooks/useMedia';\nimport useOldLang from '../../../hooks/useOldLang';\nimport useSelectWithEnter from '../../../hooks/useSelectWithEnter';\n\nimport Avatar from '../../common/Avatar';\nimport FullNameTitle from '../../common/FullNameTitle';\nimport Link from '../../ui/Link';\nimport ListItem from '../../ui/ListItem';\n\nimport './ChatMessage.scss';\n\ntype OwnProps = {\n  searchQuery?: string;\n  message: ApiMessage;\n  chatId: string;\n};\n\ntype StateProps = {\n  chat?: ApiChat;\n  privateChatUser?: ApiUser;\n  lastMessageOutgoingStatus?: ApiMessageOutgoingStatus;\n};\n\nconst ChatMessage: FC<OwnProps & StateProps> = ({\n  message,\n  searchQuery,\n  chatId,\n  chat,\n  privateChatUser,\n}) => {\n  const { focusMessage } = getActions();\n\n  const { isMobile } = useAppLayout();\n  const mediaThumbnail = !getMessageSticker(message) ? getMessageMediaThumbDataUri(message) : undefined;\n  const mediaBlobUrl = useMedia(getMessageMediaHash(message, 'micro'));\n  const isRoundVideo = Boolean(getMessageRoundVideo(message));\n\n  const handleClick = useLastCallback(() => {\n    focusMessage({ chatId, messageId: message.id, shouldReplaceHistory: true });\n  });\n\n  const lang = useOldLang();\n\n  const buttonRef = useSelectWithEnter(handleClick);\n\n  if (!chat) {\n    return undefined;\n  }\n\n  const peer = privateChatUser || chat;\n\n  return (\n    <ListItem\n      className=\"ChatMessage chat-item-clickable\"\n      ripple={!isMobile}\n      onClick={handleClick}\n      buttonRef={buttonRef}\n    >\n      <Avatar\n        peer={peer}\n        isSavedMessages={privateChatUser?.isSelf}\n      />\n      <div className=\"info\">\n        <div className=\"info-row\">\n          <FullNameTitle\n            peer={peer}\n            withEmojiStatus\n            isSavedMessages={chatId === privateChatUser?.id && privateChatUser?.isSelf}\n          />\n          <div className=\"message-date\">\n            <Link className=\"date\">\n              {formatPastTimeShort(lang, message.date * 1000)}\n            </Link>\n          </div>\n\n        </div>\n        <div className=\"subtitle\">\n          <div className=\"message\" dir=\"auto\">\n            {renderSummary(lang, message, mediaBlobUrl || mediaThumbnail, searchQuery, isRoundVideo)}\n          </div>\n        </div>\n      </div>\n    </ListItem>\n  );\n};\n\nfunction renderSummary(\n  lang: LangFn, message: ApiMessage, blobUrl?: string, searchQuery?: string, isRoundVideo?: boolean,\n) {\n  if (!blobUrl) {\n    return renderMessageSummary(lang, message, undefined, searchQuery);\n  }\n\n  const isSpoiler = getMessageIsSpoiler(message);\n\n  return (\n    <span className=\"media-preview\">\n      <img\n        src={blobUrl}\n        alt=\"\"\n        className={\n          buildClassName('media-preview--image', isRoundVideo && 'round', isSpoiler && 'media-preview-spoiler')\n        }\n        draggable={false}\n      />\n      {getMessageVideo(message) && <i className=\"icon icon-play\" />}\n      {renderMessageSummary(lang, message, true, searchQuery)}\n    </span>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { chatId }): StateProps => {\n    const chat = selectChat(global, chatId);\n    if (!chat) {\n      return {};\n    }\n\n    const privateChatUserId = getPrivateChatUserId(chat);\n    const privateChatUser = privateChatUserId ? selectUser(global, privateChatUserId) : undefined;\n\n    return {\n      chat,\n      ...(privateChatUserId && { privateChatUser }),\n    };\n  },\n)(ChatMessage));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useCallback, useMemo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiChat, ApiMessage } from '../../../api/types';\nimport { LoadMoreDirection } from '../../../types';\n\nimport { selectTabState } from '../../../global/selectors';\nimport { MEMO_EMPTY_ARRAY } from '../../../util/memo';\nimport { throttle } from '../../../util/schedulers';\nimport { renderMessageSummary } from '../../common/helpers/renderMessageText';\n\nimport useAppLayout from '../../../hooks/useAppLayout';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport NothingFound from '../../common/NothingFound';\nimport InfiniteScroll from '../../ui/InfiniteScroll';\nimport ChatMessage from './ChatMessage';\nimport DateSuggest from './DateSuggest';\nimport LeftSearchResultTopic from './LeftSearchResultTopic';\n\nexport type OwnProps = {\n  searchQuery?: string;\n  dateSearchQuery?: string;\n  onReset: () => void;\n  onSearchDateSelect: (value: Date) => void;\n};\n\ntype StateProps = {\n  currentUserId?: string;\n  foundIds?: string[];\n  globalMessagesByChatId?: Record<string, { byId: Record<number, ApiMessage> }>;\n  chatsById: Record<string, ApiChat>;\n  fetchingStatus?: { chats?: boolean; messages?: boolean };\n  foundTopicIds?: number[];\n  searchChatId?: string;\n};\n\nconst runThrottled = throttle((cb) => cb(), 500, true);\n\nconst ChatMessageResults: FC<OwnProps & StateProps> = ({\n  searchQuery,\n  dateSearchQuery,\n  foundIds,\n  globalMessagesByChatId,\n  chatsById,\n  fetchingStatus,\n  foundTopicIds,\n  searchChatId,\n  onSearchDateSelect,\n  onReset,\n}) => {\n  const { searchMessagesGlobal, openThread } = getActions();\n\n  const lang = useOldLang();\n  const { isMobile } = useAppLayout();\n\n  const handleLoadMore = useCallback(({ direction }: { direction: LoadMoreDirection }) => {\n    if (direction === LoadMoreDirection.Backwards) {\n      runThrottled(() => {\n        searchMessagesGlobal({\n          type: 'text',\n        });\n      });\n    }\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps -- `searchQuery` is required to prevent infinite message loading\n  }, [searchQuery]);\n\n  const handleTopicClick = useCallback(\n    (id: number) => {\n      if (!searchChatId) return;\n      openThread({ chatId: searchChatId, threadId: id, shouldReplaceHistory: true });\n\n      if (!isMobile) {\n        onReset();\n      }\n    },\n    [searchChatId, isMobile, onReset],\n  );\n\n  const foundMessages = useMemo(() => {\n    if (!foundIds || foundIds.length === 0) {\n      return MEMO_EMPTY_ARRAY;\n    }\n\n    return foundIds\n      .map((id) => {\n        const [chatId, messageId] = id.split('_');\n\n        return globalMessagesByChatId?.[chatId]?.byId[Number(messageId)];\n      })\n      .filter(Boolean)\n      .sort((a, b) => b.date - a.date);\n  }, [foundIds, globalMessagesByChatId]);\n\n  function renderFoundMessage(message: ApiMessage) {\n    const text = renderMessageSummary(lang, message);\n    const chat = chatsById[message.chatId];\n\n    if (!text || !chat) {\n      return undefined;\n    }\n\n    return (\n      <ChatMessage\n        chatId={message.chatId}\n        message={message}\n        searchQuery={searchQuery}\n      />\n    );\n  }\n\n  const nothingFound = fetchingStatus && !fetchingStatus.chats && !fetchingStatus.messages && !foundMessages.length\n    && !foundTopicIds?.length;\n\n  return (\n    <div className=\"LeftSearch\">\n      <InfiniteScroll\n        className=\"search-content custom-scroll chat-list\"\n        items={foundMessages}\n        onLoadMore={handleLoadMore}\n        noFastList\n      >\n        {dateSearchQuery && (\n          <div className=\"chat-selection no-scrollbar\">\n            <DateSuggest\n              searchDate={dateSearchQuery}\n              onSelect={onSearchDateSelect}\n            />\n          </div>\n        )}\n        {nothingFound && (\n          <NothingFound\n            text={lang('ChatList.Search.NoResults')}\n            description={lang('ChatList.Search.NoResultsDescription')}\n          />\n        )}\n        {Boolean(foundTopicIds?.length) && (\n          <div className=\"pb-2\">\n            <h3 className=\"section-heading topic-search-heading\" dir={lang.isRtl ? 'auto' : undefined}>\n              {lang('Topics')}\n            </h3>\n            {foundTopicIds!.map((id) => {\n              return (\n                <LeftSearchResultTopic\n                  chatId={searchChatId!}\n                  topicId={id}\n                  onClick={handleTopicClick}\n                />\n              );\n            })}\n          </div>\n        )}\n        {Boolean(foundMessages.length) && (\n          <div className=\"pb-2\">\n            <h3 className=\"section-heading topic-search-heading\" dir={lang.isRtl ? 'auto' : undefined}>\n              {lang('SearchMessages')}\n            </h3>\n            {foundMessages.map(renderFoundMessage)}\n          </div>\n        )}\n      </InfiniteScroll>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const { byId: chatsById } = global.chats;\n    const { currentUserId, messages: { byChatId: globalMessagesByChatId } } = global;\n    const {\n      fetchingStatus, resultsByType, foundTopicIds, chatId: searchChatId,\n    } = selectTabState(global).globalSearch;\n\n    const { foundIds } = (resultsByType?.text) || {};\n\n    return {\n      currentUserId,\n      foundIds,\n      globalMessagesByChatId,\n      chatsById,\n      fetchingStatus,\n      foundTopicIds,\n      searchChatId,\n    };\n  },\n)(ChatMessageResults));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useMemo, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type { ApiMessage } from '../../../api/types';\nimport { LoadMoreDirection } from '../../../types';\n\nimport { ALL_FOLDER_ID, GLOBAL_SUGGESTED_CHANNELS_ID } from '../../../config';\nimport {\n  filterChatsByName,\n  filterUsersByName,\n  isChatChannel,\n} from '../../../global/helpers';\nimport { selectSimilarChannelIds, selectTabState } from '../../../global/selectors';\nimport { getOrderedIds } from '../../../util/folderManager';\nimport { unique } from '../../../util/iteratees';\nimport { MEMO_EMPTY_ARRAY } from '../../../util/memo';\nimport { throttle } from '../../../util/schedulers';\nimport { renderMessageSummary } from '../../common/helpers/renderMessageText';\nimport sortChatIds from '../../common/helpers/sortChatIds';\n\nimport useAppLayout from '../../../hooks/useAppLayout';\nimport useEffectOnce from '../../../hooks/useEffectOnce';\nimport useHorizontalScroll from '../../../hooks/useHorizontalScroll';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport NothingFound from '../../common/NothingFound';\nimport PickerSelectedItem from '../../common/PickerSelectedItem';\nimport InfiniteScroll from '../../ui/InfiniteScroll';\nimport Link from '../../ui/Link';\nimport ChatMessage from './ChatMessage';\nimport DateSuggest from './DateSuggest';\nimport LeftSearchResultChat from './LeftSearchResultChat';\nimport RecentContacts from './RecentContacts';\n\nexport type OwnProps = {\n  searchQuery?: string;\n  dateSearchQuery?: string;\n  searchDate?: number;\n  isChannelList?: boolean;\n  onReset: () => void;\n  onSearchDateSelect: (value: Date) => void;\n};\n\ntype StateProps = {\n  currentUserId?: string;\n  contactIds?: string[];\n  accountPeerIds?: string[];\n  globalPeerIds?: string[];\n  foundIds?: string[];\n  globalMessagesByChatId?: Record<string, { byId: Record<number, ApiMessage> }>;\n  fetchingStatus?: { chats?: boolean; messages?: boolean };\n  suggestedChannelIds?: string[];\n};\n\nconst MIN_QUERY_LENGTH_FOR_GLOBAL_SEARCH = 4;\nconst LESS_LIST_ITEMS_AMOUNT = 5;\n\nconst runThrottled = throttle((cb) => cb(), 500, false);\n\nconst ChatResults: FC<OwnProps & StateProps> = ({\n  isChannelList,\n  searchQuery,\n  searchDate,\n  dateSearchQuery,\n  currentUserId,\n  contactIds,\n  accountPeerIds,\n  globalPeerIds,\n  foundIds,\n  globalMessagesByChatId,\n  fetchingStatus,\n  suggestedChannelIds,\n  onReset,\n  onSearchDateSelect,\n}) => {\n  const {\n    openChat, addRecentlyFoundChatId, searchMessagesGlobal, setGlobalSearchChatId, loadChannelRecommendations,\n  } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const chatSelectionRef = useRef<HTMLDivElement>(null);\n\n  const lang = useOldLang();\n\n  const { isMobile } = useAppLayout();\n  const [shouldShowMoreLocal, setShouldShowMoreLocal] = useState<boolean>(false);\n  const [shouldShowMoreGlobal, setShouldShowMoreGlobal] = useState<boolean>(false);\n\n  useEffectOnce(() => {\n    if (isChannelList) loadChannelRecommendations({});\n  });\n\n  const handleLoadMore = useCallback(({ direction }: { direction: LoadMoreDirection }) => {\n    if (direction === LoadMoreDirection.Backwards) {\n      runThrottled(() => {\n        searchMessagesGlobal({\n          type: isChannelList ? 'channels' : 'text',\n        });\n      });\n    }\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps -- `searchQuery` is required to prevent infinite message loading\n  }, [searchQuery]);\n\n  const handleChatClick = useCallback(\n    (id: string) => {\n      openChat({ id, shouldReplaceHistory: true });\n\n      if (id !== currentUserId) {\n        addRecentlyFoundChatId({ id });\n      }\n\n      if (!isMobile) {\n        onReset();\n      }\n    },\n    [openChat, currentUserId, isMobile, addRecentlyFoundChatId, onReset],\n  );\n\n  const handlePickerItemClick = useCallback((id: string) => {\n    setGlobalSearchChatId({ id });\n  }, [setGlobalSearchChatId]);\n\n  const localResults = useMemo(() => {\n    if (!isChannelList && (!searchQuery || (searchQuery.startsWith('@') && searchQuery.length < 2))) {\n      return MEMO_EMPTY_ARRAY;\n    }\n\n    // No need for expensive global updates, so we avoid them\n    const usersById = getGlobal().users.byId;\n    const chatsById = getGlobal().chats.byId;\n\n    const orderedChatIds = getOrderedIds(ALL_FOLDER_ID) ?? [];\n    const filteredChatIds = orderedChatIds.filter((id) => {\n      if (!isChannelList) return true;\n      const chat = chatsById[id];\n      return chat && isChatChannel(chat);\n    });\n    const localChatIds = filterChatsByName(lang, filteredChatIds, chatsById, searchQuery, currentUserId);\n\n    if (isChannelList) return localChatIds;\n\n    const contactIdsWithMe = [\n      ...(currentUserId ? [currentUserId] : []),\n      ...(contactIds || []),\n    ];\n\n    const localContactIds = filterUsersByName(\n      contactIdsWithMe, usersById, searchQuery, currentUserId, lang('SavedMessages'),\n    );\n\n    const localPeerIds = unique([\n      ...localContactIds,\n      ...localChatIds,\n    ]);\n\n    return unique([\n      ...sortChatIds(localPeerIds, undefined, currentUserId ? [currentUserId] : undefined),\n      ...sortChatIds(accountPeerIds || []),\n    ]);\n  }, [searchQuery, lang, currentUserId, contactIds, accountPeerIds, isChannelList]);\n\n  useHorizontalScroll(chatSelectionRef, !localResults.length || isChannelList, true);\n\n  const globalResults = useMemo(() => {\n    if (!searchQuery || searchQuery.length < MIN_QUERY_LENGTH_FOR_GLOBAL_SEARCH || !globalPeerIds) {\n      return MEMO_EMPTY_ARRAY;\n    }\n\n    // No need for expensive global updates, so we avoid them\n    const chatsById = getGlobal().chats.byId;\n\n    const filteredIds = globalPeerIds.filter((id) => {\n      if (!isChannelList) return true;\n      const chat = chatsById[id];\n      return chat && isChatChannel(chat);\n    });\n\n    return sortChatIds(filteredIds, true);\n  }, [globalPeerIds, isChannelList, searchQuery]);\n\n  const foundMessages = useMemo(() => {\n    if ((!searchQuery && !searchDate) || !foundIds || foundIds.length === 0) {\n      return MEMO_EMPTY_ARRAY;\n    }\n\n    // No need for expensive global updates, so we avoid them\n    const chatsById = getGlobal().chats.byId;\n\n    return foundIds\n      .map((id) => {\n        const [chatId, messageId] = id.split('_');\n        const chat = chatsById[chatId];\n        if (!chat) return undefined;\n        if (isChannelList && !isChatChannel(chat)) return undefined;\n\n        return globalMessagesByChatId?.[chatId]?.byId[Number(messageId)];\n      })\n      .filter(Boolean);\n  }, [searchQuery, searchDate, foundIds, isChannelList, globalMessagesByChatId]);\n\n  const handleClickShowMoreLocal = useCallback(() => {\n    setShouldShowMoreLocal(!shouldShowMoreLocal);\n  }, [shouldShowMoreLocal]);\n\n  const handleClickShowMoreGlobal = useCallback(() => {\n    setShouldShowMoreGlobal(!shouldShowMoreGlobal);\n  }, [shouldShowMoreGlobal]);\n\n  function renderFoundMessage(message: ApiMessage) {\n    const chatsById = getGlobal().chats.byId;\n\n    const text = renderMessageSummary(lang, message);\n    const chat = chatsById[message.chatId];\n\n    if (!text || !chat) {\n      return undefined;\n    }\n\n    return (\n      <ChatMessage\n        chatId={message.chatId}\n        message={message}\n        searchQuery={searchQuery}\n      />\n    );\n  }\n\n  const nothingFound = fetchingStatus && !fetchingStatus.chats && !fetchingStatus.messages\n    && !localResults.length && !globalResults.length && !foundMessages.length;\n\n  if (!searchQuery && !searchDate && !isChannelList) {\n    return <RecentContacts onReset={onReset} />;\n  }\n\n  return (\n    <InfiniteScroll\n      className=\"LeftSearch custom-scroll\"\n      items={foundMessages}\n      onLoadMore={handleLoadMore}\n      // To prevent scroll jumps caused by delayed local results rendering\n      noScrollRestoreOnTop\n      noFastList\n    >\n      {dateSearchQuery && (\n        <div className=\"chat-selection no-scrollbar\">\n          <DateSuggest\n            searchDate={dateSearchQuery}\n            onSelect={onSearchDateSelect}\n          />\n        </div>\n      )}\n      {nothingFound && (\n        <NothingFound\n          text={lang('ChatList.Search.NoResults')}\n          description={lang('ChatList.Search.NoResultsDescription')}\n        />\n      )}\n      {Boolean(localResults.length) && !isChannelList && (\n        <div\n          className=\"chat-selection no-scrollbar\"\n          dir={lang.isRtl ? 'rtl' : undefined}\n          ref={chatSelectionRef}\n        >\n          {localResults.map((id) => (\n            <PickerSelectedItem\n              peerId={id}\n              onClick={handlePickerItemClick}\n              clickArg={id}\n            />\n          ))}\n        </div>\n      )}\n      {Boolean(localResults.length) && (\n        <div className=\"search-section\">\n          <h3 className=\"section-heading\" dir={lang.isRtl ? 'auto' : undefined}>\n            {localResults.length > LESS_LIST_ITEMS_AMOUNT && (\n              <Link className=\"Link\" onClick={handleClickShowMoreLocal}>\n                {lang(shouldShowMoreLocal ? 'ChatList.Search.ShowLess' : 'ChatList.Search.ShowMore')}\n              </Link>\n            )}\n            {lang(isChannelList ? 'SearchMyChannels' : 'DialogList.SearchSectionDialogs')}\n          </h3>\n          {localResults.map((id, index) => {\n            if (!shouldShowMoreLocal && index >= LESS_LIST_ITEMS_AMOUNT) {\n              return undefined;\n            }\n\n            return (\n              <LeftSearchResultChat\n                chatId={id}\n                onClick={handleChatClick}\n              />\n            );\n          })}\n        </div>\n      )}\n      {Boolean(globalResults.length) && (\n        <div className=\"search-section\">\n          <h3 className=\"section-heading\" dir={lang.isRtl ? 'auto' : undefined}>\n            {globalResults.length > LESS_LIST_ITEMS_AMOUNT && (\n              <Link className=\"Link\" onClick={handleClickShowMoreGlobal}>\n                {lang(shouldShowMoreGlobal ? 'ChatList.Search.ShowLess' : 'ChatList.Search.ShowMore')}\n              </Link>\n            )}\n            {lang('DialogList.SearchSectionGlobal')}\n          </h3>\n          {globalResults.map((id, index) => {\n            if (!shouldShowMoreGlobal && index >= LESS_LIST_ITEMS_AMOUNT) {\n              return undefined;\n            }\n\n            return (\n              <LeftSearchResultChat\n                chatId={id}\n                withUsername\n                onClick={handleChatClick}\n              />\n            );\n          })}\n        </div>\n      )}\n      {Boolean(suggestedChannelIds?.length) && !searchQuery && (\n        <div className=\"search-section\">\n          <h3 className=\"section-heading\" dir={lang.isRtl ? 'auto' : undefined}>\n            {lang('SearchRecommendedChannels')}\n          </h3>\n          {suggestedChannelIds.map((id) => {\n            return (\n              <LeftSearchResultChat\n                chatId={id}\n                withUsername\n                onClick={handleChatClick}\n              />\n            );\n          })}\n        </div>\n      )}\n      {Boolean(foundMessages.length) && (\n        <div className=\"search-section\">\n          <h3 className=\"section-heading\" dir={lang.isRtl ? 'auto' : undefined}>{lang('SearchMessages')}</h3>\n          {foundMessages.map(renderFoundMessage)}\n        </div>\n      )}\n    </InfiniteScroll>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { isChannelList }): StateProps => {\n    const { userIds: contactIds } = global.contactList || {};\n    const {\n      currentUserId, messages,\n    } = global;\n\n    if (!contactIds) {\n      return {};\n    }\n\n    const {\n      fetchingStatus, globalResults, localResults, resultsByType,\n    } = selectTabState(global).globalSearch;\n    const { peerIds: globalPeerIds } = globalResults || {};\n    const { peerIds: accountPeerIds } = localResults || {};\n    const { byChatId: globalMessagesByChatId } = messages;\n    const foundIds = resultsByType?.[isChannelList ? 'channels' : 'text']?.foundIds;\n    const { similarChannelIds } = selectSimilarChannelIds(global, GLOBAL_SUGGESTED_CHANNELS_ID) || {};\n\n    return {\n      currentUserId,\n      contactIds,\n      accountPeerIds,\n      globalPeerIds,\n      foundIds,\n      globalMessagesByChatId,\n      fetchingStatus,\n      suggestedChannelIds: similarChannelIds,\n    };\n  },\n)(ChatResults));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useMemo } from '../../../lib/teact/teact';\n\nimport { formatDateToString } from '../../../util/dates/dateFormat';\n\nimport './DateSuggest.scss';\n\nconst SUGGESTION_COUNT = 8;\n\nexport type OwnProps = {\n  searchDate: string;\n  onSelect: (value: Date) => void;\n};\n\nconst DateSuggest: FC<OwnProps> = ({\n  searchDate, onSelect,\n}) => {\n  const suggestions = useMemo(() => getSuggestionsFromDate(searchDate), [searchDate]);\n  return (\n    <section className=\"DateSuggest custom-scroll custom-scroll-x\">\n      {suggestions.map(({ date, text }) => {\n        return (\n          <div\n            onClick={() => onSelect(date)}\n            className=\"date-item\"\n            key={text}\n          >\n            <i className=\"icon icon-calendar\" />\n            <span>{text}</span>\n          </div>\n        );\n      })}\n    </section>\n  );\n};\n\nfunction getSuggestionsFromDate(searchDate: string) {\n  const hasYear = searchDate.match(/^\\d{2,4}-\\d{2}-\\d{2}$/g);\n  if (hasYear) {\n    const date = new Date(searchDate);\n    return [{ date, text: formatDateToString(date) }];\n  }\n\n  const suggestion = [];\n  const currentDate = new Date();\n  const currentYear = currentDate.getFullYear();\n  const latestYear = currentDate.getTime() > (new Date(`${currentYear}-${searchDate}`)).getTime()\n    ? currentYear\n    : currentYear - 1;\n\n  for (let i = 0; i < SUGGESTION_COUNT; i++) {\n    const date = new Date(`${latestYear - i}-${searchDate}`);\n    suggestion.push({ date, text: formatDateToString(date) });\n  }\n\n  return suggestion;\n}\n\nexport default memo(DateSuggest);\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useMemo, useRef,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiMessage } from '../../../api/types';\nimport type { StateProps } from './helpers/createMapStateToProps';\nimport { LoadMoreDirection } from '../../../types';\n\nimport { SLIDE_TRANSITION_DURATION } from '../../../config';\nimport { getIsDownloading, getMessageDocument } from '../../../global/helpers';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatMonthAndYear, toYearMonth } from '../../../util/dates/dateFormat';\nimport { MEMO_EMPTY_ARRAY } from '../../../util/memo';\nimport { throttle } from '../../../util/schedulers';\nimport { createMapStateToProps } from './helpers/createMapStateToProps';\nimport { getSenderName } from './helpers/getSenderName';\n\nimport { useIntersectionObserver } from '../../../hooks/useIntersectionObserver';\nimport useOldLang from '../../../hooks/useOldLang';\nimport useAsyncRendering from '../../right/hooks/useAsyncRendering';\n\nimport Document from '../../common/Document';\nimport NothingFound from '../../common/NothingFound';\nimport InfiniteScroll from '../../ui/InfiniteScroll';\nimport Loading from '../../ui/Loading';\n\nexport type OwnProps = {\n  searchQuery?: string;\n};\n\nconst CURRENT_TYPE = 'documents';\nconst INTERSECTION_THROTTLE = 500;\n\nconst runThrottled = throttle((cb) => cb(), 500, true);\n\nconst FileResults: FC<OwnProps & StateProps> = ({\n  searchQuery,\n  isLoading,\n  chatsById,\n  usersById,\n  globalMessagesByChatId,\n  foundIds,\n  activeDownloads,\n  shouldWarnAboutSvg,\n}) => {\n  const {\n    searchMessagesGlobal,\n    focusMessage,\n  } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  const lang = useOldLang();\n\n  const { observe: observeIntersectionForMedia } = useIntersectionObserver({\n    rootRef: containerRef,\n    throttleMs: INTERSECTION_THROTTLE,\n  });\n\n  const handleLoadMore = useCallback(({ direction }: { direction: LoadMoreDirection }) => {\n    if (direction === LoadMoreDirection.Backwards) {\n      runThrottled(() => {\n        searchMessagesGlobal({\n          type: CURRENT_TYPE,\n        });\n      });\n    }\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps -- `searchQuery` is required to prevent infinite message loading\n  }, [searchQuery]);\n\n  const foundMessages = useMemo(() => {\n    if (!foundIds || !globalMessagesByChatId) {\n      return MEMO_EMPTY_ARRAY;\n    }\n\n    return foundIds.map((id) => {\n      const [chatId, messageId] = id.split('_');\n      const message = globalMessagesByChatId[chatId]?.byId[Number(messageId)];\n\n      return message && getMessageDocument(message) ? message : undefined;\n    }).filter(Boolean) as ApiMessage[];\n  }, [globalMessagesByChatId, foundIds]);\n\n  const handleMessageFocus = useCallback((message: ApiMessage) => {\n    focusMessage({ chatId: message.chatId, messageId: message.id });\n  }, [focusMessage]);\n\n  function renderList() {\n    return foundMessages.map((message, index) => {\n      const isFirst = index === 0;\n      const shouldDrawDateDivider = isFirst\n        || toYearMonth(message.date) !== toYearMonth(foundMessages[index - 1].date);\n      return (\n        <div\n          className=\"ListItem small-icon\"\n          key={message.id}\n        >\n          {shouldDrawDateDivider && (\n            <p\n              className={buildClassName(\n                'section-heading',\n                isFirst && 'section-heading-first',\n                !isFirst && 'section-heading-with-border',\n              )}\n              dir={lang.isRtl ? 'rtl' : undefined}\n            >\n              {formatMonthAndYear(lang, new Date(message.date * 1000))}\n            </p>\n          )}\n          <Document\n            document={getMessageDocument(message)!}\n            message={message}\n            withDate\n            datetime={message.date}\n            smaller\n            sender={getSenderName(lang, message, chatsById, usersById)}\n            className=\"scroll-item\"\n            isDownloading={getIsDownloading(activeDownloads, message.content.document!)}\n            shouldWarnAboutSvg={shouldWarnAboutSvg}\n            observeIntersection={observeIntersectionForMedia}\n            onDateClick={handleMessageFocus}\n          />\n        </div>\n      );\n    });\n  }\n\n  const canRenderContents = useAsyncRendering([searchQuery], SLIDE_TRANSITION_DURATION) && !isLoading;\n\n  return (\n    <div ref={containerRef} className=\"LeftSearch\">\n      <InfiniteScroll\n        className=\"search-content documents-list custom-scroll\"\n        items={foundMessages}\n        onLoadMore={handleLoadMore}\n        noFastList\n      >\n        {!canRenderContents && <Loading />}\n        {canRenderContents && (!foundIds || foundIds.length === 0) && (\n          <NothingFound\n            text={lang('ChatList.Search.NoResults')}\n            description={lang('ChatList.Search.NoResultsDescription')}\n          />\n        )}\n        {canRenderContents && foundIds && foundIds.length > 0 && renderList()}\n      </InfiniteScroll>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  createMapStateToProps(CURRENT_TYPE),\n)(FileResults));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo,\n  useMemo,\n  useRef,\n  useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport { GlobalSearchContent } from '../../../types';\n\nimport { selectTabState } from '../../../global/selectors';\nimport { parseDateString } from '../../../util/dates/dateFormat';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useKeyboardListNavigation from '../../../hooks/useKeyboardListNavigation';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport TabList from '../../ui/TabList';\nimport Transition from '../../ui/Transition';\nimport AudioResults from './AudioResults';\nimport ChatMessageResults from './ChatMessageResults';\nimport ChatResults from './ChatResults';\nimport FileResults from './FileResults';\nimport LinkResults from './LinkResults';\nimport MediaResults from './MediaResults';\n\nimport './LeftSearch.scss';\n\nexport type OwnProps = {\n  searchQuery?: string;\n  searchDate?: number;\n  isActive: boolean;\n  onReset: () => void;\n};\n\ntype StateProps = {\n  currentContent?: GlobalSearchContent;\n  chatId?: string;\n};\n\nconst TABS = [\n  { type: GlobalSearchContent.ChatList, title: 'SearchAllChatsShort' },\n  { type: GlobalSearchContent.ChannelList, title: 'ChannelsTab' },\n  { type: GlobalSearchContent.Media, title: 'SharedMediaTab2' },\n  { type: GlobalSearchContent.Links, title: 'SharedLinksTab2' },\n  { type: GlobalSearchContent.Files, title: 'SharedFilesTab2' },\n  { type: GlobalSearchContent.Music, title: 'SharedMusicTab2' },\n  { type: GlobalSearchContent.Voice, title: 'SharedVoiceTab2' },\n];\n\nconst CHAT_TABS = [\n  { type: GlobalSearchContent.ChatList, title: 'All Messages' },\n  ...TABS.slice(2), // Skip ChatList and ChannelList, replaced with All Messages\n];\n\nconst LeftSearch: FC<OwnProps & StateProps> = ({\n  searchQuery,\n  searchDate,\n  isActive,\n  currentContent = GlobalSearchContent.ChatList,\n  chatId,\n  onReset,\n}) => {\n  const {\n    setGlobalSearchContent,\n    setGlobalSearchDate,\n  } = getActions();\n\n  const lang = useOldLang();\n  const [activeTab, setActiveTab] = useState(currentContent);\n  const dateSearchQuery = useMemo(() => parseDateString(searchQuery), [searchQuery]);\n\n  const tabs = chatId ? CHAT_TABS : TABS;\n\n  const handleSwitchTab = useLastCallback((index: number) => {\n    const tab = tabs[index];\n    setGlobalSearchContent({ content: tab.type });\n    setActiveTab(index);\n  });\n\n  const handleSearchDateSelect = useLastCallback((value: Date) => {\n    setGlobalSearchDate({ date: value.getTime() / 1000 });\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: onReset,\n  });\n\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  const handleKeyDown = useKeyboardListNavigation(containerRef, isActive, undefined, '.ListItem-button', true);\n\n  return (\n    <div className=\"LeftSearch\" ref={containerRef} onKeyDown={handleKeyDown}>\n      <TabList activeTab={activeTab} tabs={tabs} onSwitchTab={handleSwitchTab} />\n      <Transition\n        name={lang.isRtl ? 'slideOptimizedRtl' : 'slideOptimized'}\n        renderCount={tabs.length}\n        activeKey={currentContent}\n      >\n        {(() => {\n          switch (currentContent) {\n            case GlobalSearchContent.ChatList:\n            case GlobalSearchContent.ChannelList:\n              if (chatId) {\n                return (\n                  <ChatMessageResults\n                    searchQuery={searchQuery}\n                    dateSearchQuery={dateSearchQuery}\n                    onReset={onReset}\n                    onSearchDateSelect={handleSearchDateSelect}\n                  />\n                );\n              }\n              return (\n                <ChatResults\n                  isChannelList={currentContent === GlobalSearchContent.ChannelList}\n                  searchQuery={searchQuery}\n                  searchDate={searchDate}\n                  dateSearchQuery={dateSearchQuery}\n                  onReset={onReset}\n                  onSearchDateSelect={handleSearchDateSelect}\n                />\n              );\n            case GlobalSearchContent.Media:\n              return <MediaResults searchQuery={searchQuery} />;\n            case GlobalSearchContent.Links:\n              return <LinkResults searchQuery={searchQuery} />;\n            case GlobalSearchContent.Files:\n              return <FileResults searchQuery={searchQuery} />;\n            case GlobalSearchContent.Music:\n              return (\n                <AudioResults\n                  key=\"audio\"\n                  searchQuery={searchQuery}\n                />\n              );\n            case GlobalSearchContent.Voice:\n              return (\n                <AudioResults\n                  key=\"voice\"\n                  isVoice\n                  searchQuery={searchQuery}\n                />\n              );\n            default:\n              return undefined;\n          }\n        })()}\n      </Transition>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const { currentContent, chatId } = selectTabState(global).globalSearch;\n\n    return { currentContent, chatId };\n  },\n)(LeftSearch));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useCallback } from '../../../lib/teact/teact';\nimport { withGlobal } from '../../../global';\n\nimport type { ApiChat, ApiUser } from '../../../api/types';\nimport { StoryViewerOrigin } from '../../../types';\n\nimport { getPrivateChatUserId, isUserId, selectIsChatMuted } from '../../../global/helpers';\nimport {\n  selectChat, selectIsChatPinned, selectNotifyExceptions,\n  selectNotifySettings, selectUser,\n} from '../../../global/selectors';\n\nimport useChatContextActions from '../../../hooks/useChatContextActions';\nimport useFlag from '../../../hooks/useFlag';\nimport useSelectWithEnter from '../../../hooks/useSelectWithEnter';\n\nimport GroupChatInfo from '../../common/GroupChatInfo';\nimport PrivateChatInfo from '../../common/PrivateChatInfo';\nimport ListItem from '../../ui/ListItem';\nimport ChatFolderModal from '../ChatFolderModal.async';\nimport MuteChatModal from '../MuteChatModal.async';\n\ntype OwnProps = {\n  chatId: string;\n  withUsername?: boolean;\n  onClick: (id: string) => void;\n};\n\ntype StateProps = {\n  chat?: ApiChat;\n  user?: ApiUser;\n  isPinned?: boolean;\n  isMuted?: boolean;\n  canChangeFolder?: boolean;\n};\n\nconst LeftSearchResultChat: FC<OwnProps & StateProps> = ({\n  chatId,\n  withUsername,\n  onClick,\n  chat,\n  user,\n  isPinned,\n  isMuted,\n  canChangeFolder,\n}) => {\n  const [isMuteModalOpen, openMuteModal, closeMuteModal] = useFlag();\n  const [isChatFolderModalOpen, openChatFolderModal, closeChatFolderModal] = useFlag();\n  const [shouldRenderChatFolderModal, markRenderChatFolderModal, unmarkRenderChatFolderModal] = useFlag();\n  const [shouldRenderMuteModal, markRenderMuteModal, unmarkRenderMuteModal] = useFlag();\n\n  const handleChatFolderChange = useCallback(() => {\n    markRenderChatFolderModal();\n    openChatFolderModal();\n  }, [markRenderChatFolderModal, openChatFolderModal]);\n\n  const handleMute = useCallback(() => {\n    markRenderMuteModal();\n    openMuteModal();\n  }, [markRenderMuteModal, openMuteModal]);\n\n  const contextActions = useChatContextActions({\n    chat,\n    user,\n    isPinned,\n    isMuted,\n    canChangeFolder,\n    handleMute,\n    handleChatFolderChange,\n  }, true);\n\n  const handleClick = useCallback(() => {\n    onClick(chatId);\n  }, [chatId, onClick]);\n\n  const buttonRef = useSelectWithEnter(handleClick);\n\n  if (!chat) {\n    return undefined;\n  }\n\n  return (\n    <ListItem\n      className=\"chat-item-clickable search-result\"\n      onClick={handleClick}\n      contextActions={contextActions}\n      buttonRef={buttonRef}\n    >\n      {isUserId(chatId) ? (\n        <PrivateChatInfo\n          userId={chatId}\n          withUsername={withUsername}\n          withStory\n          avatarSize=\"large\"\n          storyViewerOrigin={StoryViewerOrigin.SearchResult}\n        />\n      ) : (\n        <GroupChatInfo\n          chatId={chatId}\n          withUsername={withUsername}\n          avatarSize=\"large\"\n          withStory\n          storyViewerOrigin={StoryViewerOrigin.SearchResult}\n        />\n      )}\n      {shouldRenderMuteModal && (\n        <MuteChatModal\n          isOpen={isMuteModalOpen}\n          onClose={closeMuteModal}\n          onCloseAnimationEnd={unmarkRenderMuteModal}\n          chatId={chatId}\n        />\n      )}\n      {shouldRenderChatFolderModal && (\n        <ChatFolderModal\n          isOpen={isChatFolderModalOpen}\n          onClose={closeChatFolderModal}\n          onCloseAnimationEnd={unmarkRenderChatFolderModal}\n          chatId={chatId}\n        />\n      )}\n    </ListItem>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { chatId }): StateProps => {\n    const chat = selectChat(global, chatId);\n    const privateChatUserId = chat && getPrivateChatUserId(chat);\n    const user = privateChatUserId ? selectUser(global, privateChatUserId) : undefined;\n    const isPinned = selectIsChatPinned(global, chatId);\n    const isMuted = chat\n      ? selectIsChatMuted(chat, selectNotifySettings(global), selectNotifyExceptions(global))\n      : undefined;\n\n    return {\n      chat,\n      user,\n      isPinned,\n      isMuted,\n      canChangeFolder: Boolean(global.chatFolders.orderedIds?.length),\n    };\n  },\n)(LeftSearchResultChat));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useCallback } from '../../../lib/teact/teact';\nimport { withGlobal } from '../../../global';\n\nimport type { ApiTopic } from '../../../api/types';\n\nimport { selectChat } from '../../../global/selectors';\nimport { REM } from '../../common/helpers/mediaDimensions';\nimport renderText from '../../common/helpers/renderText';\n\nimport useSelectWithEnter from '../../../hooks/useSelectWithEnter';\n\nimport TopicIcon from '../../common/TopicIcon';\nimport ListItem from '../../ui/ListItem';\n\ntype OwnProps = {\n  chatId: string;\n  topicId: number;\n  onClick: (id: number) => void;\n};\n\ntype StateProps = {\n  topic?: ApiTopic;\n};\n\nconst TOPIC_ICON_SIZE = 2 * REM;\n\nconst LeftSearchResultTopic: FC<OwnProps & StateProps> = ({\n  topicId,\n  topic,\n  onClick,\n}) => {\n  const handleClick = useCallback(() => {\n    onClick(topicId);\n  }, [topicId, onClick]);\n\n  const buttonRef = useSelectWithEnter(handleClick);\n\n  if (!topic) {\n    return undefined;\n  }\n\n  return (\n    <ListItem\n      className=\"chat-item-clickable search-result\"\n      onClick={handleClick}\n      buttonClassName=\"topic-item\"\n      buttonRef={buttonRef}\n    >\n      <TopicIcon\n        size={TOPIC_ICON_SIZE}\n        topic={topic}\n        className=\"topic-icon\"\n        letterClassName=\"topic-icon-letter\"\n      />\n      <div dir=\"auto\" className=\"fullName\">{renderText(topic.title)}</div>\n    </ListItem>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { chatId, topicId }): StateProps => {\n    const chat = selectChat(global, chatId);\n    const topic = chat?.topics?.[topicId];\n\n    return {\n      topic,\n    };\n  },\n)(LeftSearchResultTopic));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useMemo, useRef,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiMessage } from '../../../api/types';\nimport type { StateProps } from './helpers/createMapStateToProps';\nimport { LoadMoreDirection } from '../../../types';\n\nimport { SLIDE_TRANSITION_DURATION } from '../../../config';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatMonthAndYear, toYearMonth } from '../../../util/dates/dateFormat';\nimport { MEMO_EMPTY_ARRAY } from '../../../util/memo';\nimport { throttle } from '../../../util/schedulers';\nimport { createMapStateToProps } from './helpers/createMapStateToProps';\nimport { getSenderName } from './helpers/getSenderName';\n\nimport { useIntersectionObserver } from '../../../hooks/useIntersectionObserver';\nimport useOldLang from '../../../hooks/useOldLang';\nimport useAsyncRendering from '../../right/hooks/useAsyncRendering';\n\nimport NothingFound from '../../common/NothingFound';\nimport WebLink from '../../common/WebLink';\nimport InfiniteScroll from '../../ui/InfiniteScroll';\nimport Loading from '../../ui/Loading';\n\nexport type OwnProps = {\n  searchQuery?: string;\n};\n\nconst CURRENT_TYPE = 'links';\nconst INTERSECTION_THROTTLE = 500;\n\nconst runThrottled = throttle((cb) => cb(), 500, true);\n\nconst LinkResults: FC<OwnProps & StateProps> = ({\n  searchQuery,\n  isLoading,\n  chatsById,\n  usersById,\n  globalMessagesByChatId,\n  foundIds,\n  isChatProtected,\n}) => {\n  const {\n    searchMessagesGlobal,\n    focusMessage,\n  } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  const lang = useOldLang();\n\n  const { observe: observeIntersectionForMedia } = useIntersectionObserver({\n    rootRef: containerRef,\n    throttleMs: INTERSECTION_THROTTLE,\n  });\n\n  const handleLoadMore = useCallback(({ direction }: { direction: LoadMoreDirection }) => {\n    if (direction === LoadMoreDirection.Backwards) {\n      runThrottled(() => {\n        searchMessagesGlobal({\n          type: CURRENT_TYPE,\n        });\n      });\n    }\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps -- `searchQuery` is required to prevent infinite message loading\n  }, [searchQuery]);\n\n  const foundMessages = useMemo(() => {\n    if (!foundIds || !globalMessagesByChatId) {\n      return MEMO_EMPTY_ARRAY;\n    }\n\n    return foundIds.map((id) => {\n      const [chatId, messageId] = id.split('_');\n\n      return globalMessagesByChatId[chatId]?.byId[Number(messageId)];\n    }).filter(Boolean);\n  }, [globalMessagesByChatId, foundIds]);\n\n  const handleMessageFocus = useCallback((message: ApiMessage) => {\n    focusMessage({ chatId: message.chatId, messageId: message.id });\n  }, [focusMessage]);\n\n  function renderList() {\n    return foundMessages.map((message, index) => {\n      const isFirst = index === 0;\n      const shouldDrawDateDivider = isFirst\n        || toYearMonth(message.date) !== toYearMonth(foundMessages[index - 1].date);\n      return (\n        <div\n          className=\"ListItem small-icon\"\n          dir={lang.isRtl ? 'rtl' : undefined}\n          key={message.id}\n        >\n          {shouldDrawDateDivider && (\n            <p\n              className={buildClassName(\n                'section-heading',\n                isFirst && 'section-heading-first',\n                !isFirst && 'section-heading-with-border',\n              )}\n              dir={lang.isRtl ? 'rtl' : undefined}\n            >\n              {formatMonthAndYear(lang, new Date(message.date * 1000))}\n            </p>\n          )}\n          <WebLink\n            key={message.id}\n            message={message}\n            senderTitle={getSenderName(lang, message, chatsById, usersById)}\n            isProtected={isChatProtected || message.isProtected}\n            observeIntersection={observeIntersectionForMedia}\n            onMessageClick={handleMessageFocus}\n          />\n        </div>\n      );\n    });\n  }\n\n  const canRenderContents = useAsyncRendering([searchQuery], SLIDE_TRANSITION_DURATION) && !isLoading;\n\n  return (\n    <div ref={containerRef} className=\"LeftSearch\">\n      <InfiniteScroll\n        className=\"search-content documents-list custom-scroll\"\n        items={foundMessages}\n        onLoadMore={handleLoadMore}\n        noFastList\n      >\n        {!canRenderContents && <Loading />}\n        {canRenderContents && (!foundIds || foundIds.length === 0) && (\n          <NothingFound\n            text={lang('ChatList.Search.NoResults')}\n            description={lang('ChatList.Search.NoResultsDescription')}\n          />\n        )}\n        {canRenderContents && foundIds && foundIds.length > 0 && renderList()}\n      </InfiniteScroll>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  createMapStateToProps(CURRENT_TYPE),\n)(LinkResults));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useMemo, useRef,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { StateProps } from './helpers/createMapStateToProps';\nimport { LoadMoreDirection, MediaViewerOrigin } from '../../../types';\n\nimport { SLIDE_TRANSITION_DURATION } from '../../../config';\nimport buildClassName from '../../../util/buildClassName';\nimport { MEMO_EMPTY_ARRAY } from '../../../util/memo';\nimport { throttle } from '../../../util/schedulers';\nimport { createMapStateToProps } from './helpers/createMapStateToProps';\n\nimport { useIntersectionObserver } from '../../../hooks/useIntersectionObserver';\nimport useOldLang from '../../../hooks/useOldLang';\nimport useAsyncRendering from '../../right/hooks/useAsyncRendering';\n\nimport Media from '../../common/Media';\nimport NothingFound from '../../common/NothingFound';\nimport InfiniteScroll from '../../ui/InfiniteScroll';\nimport Loading from '../../ui/Loading';\nimport ChatMessage from './ChatMessage';\n\nexport type OwnProps = {\n  searchQuery?: string;\n};\n\nconst CURRENT_TYPE = 'media';\nconst INTERSECTION_THROTTLE = 500;\n\nconst runThrottled = throttle((cb) => cb(), 500, true);\n\nconst MediaResults: FC<OwnProps & StateProps> = ({\n  searchQuery,\n  isLoading,\n  globalMessagesByChatId,\n  foundIds,\n  isChatProtected,\n}) => {\n  const {\n    searchMessagesGlobal,\n    openMediaViewer,\n  } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  const lang = useOldLang();\n\n  const { observe: observeIntersectionForMedia } = useIntersectionObserver({\n    rootRef: containerRef,\n    throttleMs: INTERSECTION_THROTTLE,\n  });\n\n  const handleLoadMore = useCallback(({ direction }: { direction: LoadMoreDirection }) => {\n    if (direction === LoadMoreDirection.Backwards) {\n      runThrottled(() => {\n        searchMessagesGlobal({\n          type: CURRENT_TYPE,\n        });\n      });\n    }\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps -- `searchQuery` is required to prevent infinite message loading\n  }, [searchMessagesGlobal, searchQuery]);\n\n  const foundMessages = useMemo(() => {\n    if (!foundIds || !globalMessagesByChatId) {\n      return MEMO_EMPTY_ARRAY;\n    }\n\n    return foundIds.map((id) => {\n      const [chatId, messageId] = id.split('_');\n\n      return globalMessagesByChatId[chatId]?.byId[Number(messageId)];\n    }).filter(Boolean);\n  }, [globalMessagesByChatId, foundIds]);\n\n  const handleSelectMedia = useCallback((id: number, chatId: string) => {\n    openMediaViewer({\n      chatId,\n      messageId: id,\n      origin: MediaViewerOrigin.SearchResult,\n    });\n  }, [openMediaViewer]);\n\n  function renderGallery() {\n    return (\n      <div className=\"media-list\" dir={lang.isRtl ? 'rtl' : undefined}>\n        {foundMessages.map((message) => (\n          <Media\n            key={`${message.chatId}-${message.id}`}\n            idPrefix=\"search-media\"\n            message={message}\n            isProtected={isChatProtected || message.isProtected}\n            observeIntersection={observeIntersectionForMedia}\n            onClick={handleSelectMedia}\n          />\n        ))}\n      </div>\n    );\n  }\n\n  function renderSearchResult() {\n    return foundMessages.map((message) => (\n      <ChatMessage\n        key={message.id}\n        chatId={message.chatId}\n        message={message}\n      />\n    ));\n  }\n\n  const canRenderContents = useAsyncRendering([searchQuery], SLIDE_TRANSITION_DURATION) && !isLoading;\n  const isMediaGrid = canRenderContents && foundIds && foundIds.length > 0 && !searchQuery;\n  const isMessageList = canRenderContents && foundIds && foundIds.length > 0 && searchQuery;\n\n  const classNames = buildClassName(\n    'search-content custom-scroll',\n    isMessageList && 'chat-list',\n  );\n\n  return (\n    <div ref={containerRef} className=\"LeftSearch\">\n      <InfiniteScroll\n        className={classNames}\n        items={foundMessages}\n        itemSelector={!searchQuery ? '.Media' : '.ListItem'}\n        onLoadMore={handleLoadMore}\n        noFastList\n      >\n        {!canRenderContents && <Loading />}\n        {canRenderContents && (!foundIds || foundIds.length === 0) && (\n          <NothingFound\n            text={lang('ChatList.Search.NoResults')}\n            description={lang('ChatList.Search.NoResultsDescription')}\n          />\n        )}\n        {isMediaGrid && renderGallery()}\n        {isMessageList && renderSearchResult()}\n      </InfiniteScroll>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  createMapStateToProps(CURRENT_TYPE),\n)(MediaResults));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo,\n  useCallback, useEffect, useRef,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiUser } from '../../../api/types';\n\nimport { getUserFirstOrLastName } from '../../../global/helpers';\nimport buildClassName from '../../../util/buildClassName';\nimport { throttle } from '../../../util/schedulers';\nimport renderText from '../../common/helpers/renderText';\n\nimport useHorizontalScroll from '../../../hooks/useHorizontalScroll';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Avatar from '../../common/Avatar';\nimport Button from '../../ui/Button';\nimport LeftSearchResultChat from './LeftSearchResultChat';\n\nimport './RecentContacts.scss';\n\ntype OwnProps = {\n  onReset: () => void;\n};\n\ntype StateProps = {\n  topUserIds?: string[];\n  usersById: Record<string, ApiUser>;\n  recentlyFoundChatIds?: string[];\n};\n\nconst SEARCH_CLOSE_TIMEOUT_MS = 250;\nconst NBSP = '\\u00A0';\n\nconst runThrottled = throttle((cb) => cb(), 60000, true);\n\nconst RecentContacts: FC<OwnProps & StateProps> = ({\n  topUserIds,\n  usersById,\n  recentlyFoundChatIds,\n  onReset,\n}) => {\n  const {\n    loadTopUsers, openChat,\n    addRecentlyFoundChatId, clearRecentlyFoundChats,\n  } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const topUsersRef = useRef<HTMLDivElement>(null);\n\n  // Due to the parent Transition, this component never gets unmounted,\n  // that's why we use throttled API call on every update.\n  useEffect(() => {\n    runThrottled(() => {\n      loadTopUsers();\n    });\n  }, [loadTopUsers]);\n\n  useHorizontalScroll(topUsersRef, !topUserIds);\n\n  const handleClick = useCallback((id: string) => {\n    openChat({ id, shouldReplaceHistory: true });\n    onReset();\n    setTimeout(() => {\n      addRecentlyFoundChatId({ id });\n    }, SEARCH_CLOSE_TIMEOUT_MS);\n  }, [openChat, addRecentlyFoundChatId, onReset]);\n\n  const handleClearRecentlyFoundChats = useCallback(() => {\n    clearRecentlyFoundChats();\n  }, [clearRecentlyFoundChats]);\n\n  const lang = useOldLang();\n\n  return (\n    <div className=\"RecentContacts custom-scroll\">\n      {topUserIds && (\n        <div className=\"top-peers-section\" dir={lang.isRtl ? 'rtl' : undefined}>\n          <div ref={topUsersRef} className=\"top-peers\">\n            {topUserIds.map((userId) => (\n              <div\n                key={userId}\n                className=\"top-peer-item\"\n                onClick={() => handleClick(userId)}\n                dir={lang.isRtl ? 'rtl' : undefined}\n              >\n                <Avatar peer={usersById[userId]} />\n                <div className=\"top-peer-name\">{renderText(getUserFirstOrLastName(usersById[userId]) || NBSP)}</div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n      {recentlyFoundChatIds && (\n        <div className=\"search-section pt-1\">\n          <h3\n            className={buildClassName(\n              'section-heading mt-0 recent-chats-header',\n              !topUserIds && 'without-border',\n            )}\n            dir={lang.isRtl ? 'rtl' : undefined}\n          >\n            {lang('Recent')}\n\n            <Button\n              round\n              size=\"smaller\"\n              color=\"translucent\"\n              ariaLabel=\"Clear recent chats\"\n              onClick={handleClearRecentlyFoundChats}\n              isRtl={lang.isRtl}\n            >\n              <i className=\"icon icon-close\" />\n            </Button>\n          </h3>\n          {recentlyFoundChatIds.map((id) => (\n            <LeftSearchResultChat\n              chatId={id}\n              onClick={handleClick}\n            />\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const { userIds: topUserIds } = global.topPeers;\n    const usersById = global.users.byId;\n    const { recentlyFoundChatIds } = global;\n\n    return {\n      topUserIds,\n      usersById,\n      recentlyFoundChatIds,\n    };\n  },\n)(RecentContacts));\n","import type {\n  ApiChat, ApiGlobalMessageSearchType, ApiMessage, ApiUser,\n} from '../../../../api/types';\nimport type { GlobalState, TabState } from '../../../../global/types';\nimport type { ISettings } from '../../../../types';\n\nimport { selectChat, selectTabState, selectTheme } from '../../../../global/selectors';\n\nexport type StateProps = {\n  theme: ISettings['theme'];\n  isLoading?: boolean;\n  chatsById: Record<string, ApiChat>;\n  usersById: Record<string, ApiUser>;\n  globalMessagesByChatId?: Record<string, { byId: Record<number, ApiMessage> }>;\n  foundIds?: string[];\n  searchChatId?: string;\n  activeDownloads: TabState['activeDownloads'];\n  isChatProtected?: boolean;\n  shouldWarnAboutSvg?: boolean;\n};\n\nexport function createMapStateToProps(type: ApiGlobalMessageSearchType) {\n  return (global: GlobalState, props: any) => {\n    const tabState = selectTabState(global);\n    const { byId: chatsById } = global.chats;\n    const { byId: usersById } = global.users;\n    const {\n      fetchingStatus, resultsByType, chatId,\n    } = tabState.globalSearch;\n\n    // One component is used for two different types of results.\n    // The differences between them are only in the isVoice property.\n    // The rest of the search results use their own personal components.\n    const currentType = type !== 'audio' ? type : (props?.isVoice ? 'voice' : 'audio');\n\n    const { byChatId: globalMessagesByChatId } = global.messages;\n    const foundIds = resultsByType?.[currentType]?.foundIds;\n\n    const activeDownloads = tabState.activeDownloads;\n\n    return {\n      theme: selectTheme(global),\n      isLoading: foundIds === undefined\n        || (fetchingStatus ? Boolean(fetchingStatus.chats || fetchingStatus.messages) : false),\n      chatsById,\n      usersById,\n      globalMessagesByChatId,\n      foundIds,\n      searchChatId: chatId,\n      activeDownloads,\n      isChatProtected: chatId ? selectChat(global, chatId)?.isProtected : undefined,\n      shouldWarnAboutSvg: global.settings.byKey.shouldWarnAboutSvg,\n    };\n  };\n}\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect,\n  useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiUser } from '../../../api/types';\n\nimport { filterUsersByName, getUserFullName } from '../../../global/helpers';\nimport { selectTabState } from '../../../global/selectors';\nimport { unique } from '../../../util/iteratees';\n\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport ChatOrUserPicker from '../../common/ChatOrUserPicker';\n\nexport type OwnProps = {\n  isOpen: boolean;\n  onClose: NoneToVoidFunction;\n};\n\ntype StateProps = {\n  usersById: Record<string, ApiUser>;\n  blockedIds: string[];\n  contactIds?: string[];\n  localContactIds?: string[];\n  currentUserId?: string;\n};\n\nconst BlockUserModal: FC<OwnProps & StateProps> = ({\n  usersById,\n  blockedIds,\n  contactIds,\n  localContactIds,\n  currentUserId,\n  isOpen,\n  onClose,\n}) => {\n  const {\n    setUserSearchQuery,\n    blockUser,\n  } = getActions();\n\n  const lang = useOldLang();\n  const [search, setSearch] = useState('');\n\n  useEffect(() => {\n    setUserSearchQuery({ query: search });\n  }, [search, setUserSearchQuery]);\n\n  const filteredContactIds = useMemo(() => {\n    const availableContactIds = unique([\n      ...(contactIds || []),\n      ...(localContactIds || []),\n    ].filter((contactId) => {\n      return contactId !== currentUserId && !blockedIds.includes(contactId);\n    }));\n\n    return filterUsersByName(availableContactIds, usersById, search)\n      .sort((firstId, secondId) => {\n        const firstName = getUserFullName(usersById[firstId]) || '';\n        const secondName = getUserFullName(usersById[secondId]) || '';\n\n        return firstName.localeCompare(secondName);\n      });\n  }, [blockedIds, contactIds, currentUserId, search, localContactIds, usersById]);\n\n  const handleRemoveUser = useCallback((userId: string) => {\n    blockUser({ userId });\n    onClose();\n  }, [onClose]);\n\n  return (\n    <ChatOrUserPicker\n      isOpen={isOpen}\n      chatOrUserIds={filteredContactIds}\n      searchPlaceholder={lang('BlockedUsers.BlockUser')}\n      search={search}\n      onSearchChange={setSearch}\n      onSelectChatOrUser={handleRemoveUser}\n      onClose={onClose}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const {\n      users: {\n        byId: usersById,\n      },\n      blocked: {\n        ids: blockedIds,\n      },\n      contactList,\n      currentUserId,\n    } = global;\n\n    return {\n      usersById,\n      blockedIds,\n      contactIds: contactList?.userIds,\n      localContactIds: selectTabState(global).userSearch.localUserIds,\n      currentUserId,\n    };\n  },\n)(BlockUserModal));\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { ApiPremiumSection } from '../../../global/types';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport StarIcon from '../../common/icons/StarIcon';\nimport ListItem from '../../ui/ListItem';\n\ntype OwnProps = {\n  premiumSection?: ApiPremiumSection;\n};\n\nfunction PremiumStatusItem({ premiumSection }: OwnProps) {\n  const { openPremiumModal } = getActions();\n  const lang = useOldLang();\n  const handleOpenPremiumModal = useLastCallback(() => openPremiumModal({ initialSection: premiumSection }));\n\n  return (\n    <div className=\"settings-item\">\n      <ListItem\n        leftElement={<StarIcon className=\"icon\" type=\"premium\" size=\"big\" />}\n        onClick={handleOpenPremiumModal}\n      >\n        {lang('PrivacyLastSeenPremium')}\n      </ListItem>\n      <p\n        className=\"settings-item-description-larger premium-info\"\n        dir={lang.isRtl ? 'rtl' : undefined}\n      >\n        {lang('lng_messages_privacy_premium_about')}\n      </p>\n    </div>\n  );\n}\n\nexport default memo(PremiumStatusItem);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Icon from '../../common/icons/Icon';\n\nimport styles from './PrivacyLockedOption.module.scss';\n\ntype OwnProps = {\n  label: string;\n};\n\nfunction PrivacyLockedOption({ label }: OwnProps) {\n  const lang = useOldLang();\n  const { showNotification } = getActions();\n\n  return (\n    <div\n      className={styles.contactsAndPremiumOptionTitle}\n      onClick={() => showNotification({ message: lang('OptionPremiumRequiredMessage') })}\n    >\n      <span>{label}</span>\n      <Icon name=\"lock-badge\" className={styles.lockIcon} />\n    </div>\n  );\n}\n\nexport default memo(PrivacyLockedOption);\n","import React, { memo, useMemo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport { selectIsCurrentUserPremium, selectNewNoncontactPeersRequirePremium } from '../../../global/selectors';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport RadioGroup from '../../ui/RadioGroup';\nimport PremiumStatusItem from './PremiumStatusItem';\nimport PrivacyLockedOption from './PrivacyLockedOption';\n\ntype OwnProps = {\n  isActive?: boolean;\n  onReset: VoidFunction;\n};\n\ntype StateProps = {\n  shouldNewNonContactPeersRequirePremium?: boolean;\n  canLimitNewMessagesWithoutPremium?: boolean;\n  isCurrentUserPremium?: boolean;\n};\n\nfunction PrivacyMessages({\n  isActive,\n  canLimitNewMessagesWithoutPremium,\n  shouldNewNonContactPeersRequirePremium,\n  isCurrentUserPremium,\n  onReset,\n}: OwnProps & StateProps) {\n  const { updateGlobalPrivacySettings } = getActions();\n  const lang = useOldLang();\n\n  const canChange = isCurrentUserPremium || canLimitNewMessagesWithoutPremium;\n\n  const options = useMemo(() => {\n    return [\n      { value: 'everybody', label: lang('P2PEverybody') },\n      {\n        value: 'contacts_and_premium',\n        label: canChange ? (\n          lang('PrivacyMessagesContactsAndPremium')\n        ) : (\n          <PrivacyLockedOption label={lang('PrivacyMessagesContactsAndPremium')} />\n        ),\n        hidden: !canChange,\n      },\n    ];\n  }, [lang, canChange]);\n\n  const handleChange = useLastCallback((privacy: string) => {\n    updateGlobalPrivacySettings({ shouldNewNonContactPeersRequirePremium: privacy === 'contacts_and_premium' });\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: onReset,\n  });\n\n  return (\n    <>\n      <div className=\"settings-item\">\n        <h4 className=\"settings-item-header\" dir={lang.isRtl ? 'rtl' : undefined}>\n          {lang('PrivacyMessagesTitle')}\n        </h4>\n        <RadioGroup\n          name=\"privacy-messages\"\n          options={options}\n          onChange={handleChange}\n          selected={shouldNewNonContactPeersRequirePremium ? 'contacts_and_premium' : 'everybody'}\n        />\n        <p className=\"settings-item-description-larger\" dir={lang.isRtl ? 'rtl' : undefined}>\n          {lang('Privacy.Messages.SectionFooter')}\n        </p>\n      </div>\n      {!canChange && <PremiumStatusItem premiumSection=\"message_privacy\" />}\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    shouldNewNonContactPeersRequirePremium: selectNewNoncontactPeersRequirePremium(global),\n    isCurrentUserPremium: selectIsCurrentUserPremium(global),\n    canLimitNewMessagesWithoutPremium: global.appConfig?.canLimitNewMessagesWithoutPremium,\n  };\n})(PrivacyMessages));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useState } from '../../../lib/teact/teact';\nimport { getActions, getGlobal } from '../../../global';\n\nimport type { FolderEditDispatch, FoldersState } from '../../../hooks/reducers/useFoldersReducer';\nimport { SettingsScreens } from '../../../types';\n\nimport { selectTabState } from '../../../global/selectors';\nimport { LAYERS_ANIMATION_NAME } from '../../../util/windowEnvironment';\n\nimport useTwoFaReducer from '../../../hooks/reducers/useTwoFaReducer';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Transition from '../../ui/Transition';\nimport SettingsFolders from './folders/SettingsFolders';\nimport SettingsPasscode from './passcode/SettingsPasscode';\nimport PrivacyMessages from './PrivacyMessages';\nimport SettingsActiveSessions from './SettingsActiveSessions';\nimport SettingsActiveWebsites from './SettingsActiveWebsites';\nimport SettingsCustomEmoji from './SettingsCustomEmoji';\nimport SettingsDataStorage from './SettingsDataStorage';\nimport SettingsDoNotTranslate from './SettingsDoNotTranslate';\nimport SettingsEditProfile from './SettingsEditProfile';\nimport SettingsExperimental from './SettingsExperimental';\nimport SettingsGeneral from './SettingsGeneral';\nimport SettingsGeneralBackground from './SettingsGeneralBackground';\nimport SettingsGeneralBackgroundColor from './SettingsGeneralBackgroundColor';\nimport SettingsHeader from './SettingsHeader';\nimport SettingsLanguage from './SettingsLanguage';\nimport SettingsMain from './SettingsMain';\nimport SettingsNotifications from './SettingsNotifications';\nimport SettingsPerformance from './SettingsPerformance';\nimport SettingsPrivacy from './SettingsPrivacy';\nimport SettingsPrivacyBlockedUsers from './SettingsPrivacyBlockedUsers';\nimport SettingsPrivacyVisibility from './SettingsPrivacyVisibility';\nimport SettingsPrivacyVisibilityExceptionList from './SettingsPrivacyVisibilityExceptionList';\nimport SettingsQuickReaction from './SettingsQuickReaction';\nimport SettingsStickers from './SettingsStickers';\nimport SettingsTwoFa from './twoFa/SettingsTwoFa';\n\nimport './Settings.scss';\n\nconst TRANSITION_RENDER_COUNT = Object.keys(SettingsScreens).length / 2;\nconst TRANSITION_DURATION = 200;\n\nconst TWO_FA_SCREENS = [\n  SettingsScreens.TwoFaDisabled,\n  SettingsScreens.TwoFaNewPassword,\n  SettingsScreens.TwoFaNewPasswordConfirm,\n  SettingsScreens.TwoFaNewPasswordHint,\n  SettingsScreens.TwoFaNewPasswordEmail,\n  SettingsScreens.TwoFaNewPasswordEmailCode,\n  SettingsScreens.TwoFaCongratulations,\n  SettingsScreens.TwoFaEnabled,\n  SettingsScreens.TwoFaChangePasswordCurrent,\n  SettingsScreens.TwoFaChangePasswordNew,\n  SettingsScreens.TwoFaChangePasswordConfirm,\n  SettingsScreens.TwoFaChangePasswordHint,\n  SettingsScreens.TwoFaTurnOff,\n  SettingsScreens.TwoFaRecoveryEmailCurrentPassword,\n  SettingsScreens.TwoFaRecoveryEmail,\n  SettingsScreens.TwoFaRecoveryEmailCode,\n];\n\nconst PASSCODE_SCREENS = [\n  SettingsScreens.PasscodeDisabled,\n  SettingsScreens.PasscodeEnabled,\n];\n\nconst FOLDERS_SCREENS = [\n  SettingsScreens.Folders,\n  SettingsScreens.FoldersCreateFolder,\n  SettingsScreens.FoldersEditFolder,\n  SettingsScreens.FoldersEditFolderFromChatList,\n  SettingsScreens.FoldersEditFolderInvites,\n  SettingsScreens.FoldersIncludedChats,\n  SettingsScreens.FoldersIncludedChatsFromChatList,\n  SettingsScreens.FoldersExcludedChats,\n  SettingsScreens.FoldersExcludedChatsFromChatList,\n  SettingsScreens.FoldersShare,\n];\n\nconst PRIVACY_SCREENS = [\n  SettingsScreens.PrivacyBlockedUsers,\n  SettingsScreens.ActiveWebsites,\n];\n\nconst PRIVACY_PHONE_NUMBER_SCREENS = [\n  SettingsScreens.PrivacyPhoneNumberAllowedContacts,\n  SettingsScreens.PrivacyPhoneNumberDeniedContacts,\n];\n\nconst PRIVACY_LAST_SEEN_PHONE_SCREENS = [\n  SettingsScreens.PrivacyLastSeenAllowedContacts,\n  SettingsScreens.PrivacyLastSeenDeniedContacts,\n];\n\nconst PRIVACY_PROFILE_PHOTO_SCREENS = [\n  SettingsScreens.PrivacyProfilePhotoAllowedContacts,\n  SettingsScreens.PrivacyProfilePhotoDeniedContacts,\n];\n\nconst PRIVACY_BIO_SCREENS = [\n  SettingsScreens.PrivacyBioAllowedContacts,\n  SettingsScreens.PrivacyBioDeniedContacts,\n];\n\nconst PRIVACY_BIRTHDAY_SCREENS = [\n  SettingsScreens.PrivacyBirthdayAllowedContacts,\n  SettingsScreens.PrivacyBirthdayDeniedContacts,\n];\n\nconst PRIVACY_PHONE_CALL_SCREENS = [\n  SettingsScreens.PrivacyPhoneCallAllowedContacts,\n  SettingsScreens.PrivacyPhoneCallDeniedContacts,\n];\n\nconst PRIVACY_PHONE_P2P_SCREENS = [\n  SettingsScreens.PrivacyPhoneP2PAllowedContacts,\n  SettingsScreens.PrivacyPhoneP2PDeniedContacts,\n];\n\nconst PRIVACY_FORWARDING_SCREENS = [\n  SettingsScreens.PrivacyForwardingAllowedContacts,\n  SettingsScreens.PrivacyForwardingDeniedContacts,\n];\n\nconst PRIVACY_VOICE_MESSAGES_SCREENS = [\n  SettingsScreens.PrivacyVoiceMessagesAllowedContacts,\n  SettingsScreens.PrivacyVoiceMessagesDeniedContacts,\n];\n\nconst PRIVACY_GROUP_CHATS_SCREENS = [\n  SettingsScreens.PrivacyGroupChatsAllowedContacts,\n  SettingsScreens.PrivacyGroupChatsDeniedContacts,\n];\n\nexport type OwnProps = {\n  isActive: boolean;\n  currentScreen: SettingsScreens;\n  foldersState: FoldersState;\n  foldersDispatch: FolderEditDispatch;\n  onScreenSelect: (screen: SettingsScreens) => void;\n  shouldSkipTransition?: boolean;\n  onReset: (forceReturnToChatList?: true | Event) => void;\n};\n\nconst Settings: FC<OwnProps> = ({\n  isActive,\n  currentScreen,\n  foldersState,\n  foldersDispatch,\n  onScreenSelect,\n  onReset,\n  shouldSkipTransition,\n}) => {\n  const { closeShareChatFolderModal } = getActions();\n\n  const [twoFaState, twoFaDispatch] = useTwoFaReducer();\n  const [privacyPasscode, setPrivacyPasscode] = useState<string>('');\n\n  const handleReset = useLastCallback((forceReturnToChatList?: true | Event) => {\n    const isFromSettings = selectTabState(getGlobal()).shareFolderScreen?.isFromSettings;\n\n    if (currentScreen === SettingsScreens.FoldersShare) {\n      closeShareChatFolderModal();\n    }\n\n    if (forceReturnToChatList === true || (isFromSettings !== undefined && !isFromSettings)) {\n      onReset(true);\n      return;\n    }\n\n    if (\n      currentScreen === SettingsScreens.FoldersCreateFolder\n      || currentScreen === SettingsScreens.FoldersEditFolder\n      || currentScreen === SettingsScreens.FoldersEditFolderFromChatList\n      || currentScreen === SettingsScreens.FoldersEditFolderInvites\n    ) {\n      setTimeout(() => {\n        foldersDispatch({ type: 'reset' });\n      }, TRANSITION_DURATION);\n    }\n\n    if (\n      currentScreen === SettingsScreens.FoldersIncludedChats\n      || currentScreen === SettingsScreens.FoldersExcludedChats\n    ) {\n      if (foldersState.mode === 'create') {\n        onScreenSelect(SettingsScreens.FoldersCreateFolder);\n      } else {\n        onScreenSelect(SettingsScreens.FoldersEditFolder);\n      }\n      return;\n    }\n\n    onReset();\n  });\n\n  function renderCurrentSectionContent(isScreenActive: boolean, activeScreen: SettingsScreens) {\n    const privacyAllowScreens: Record<number, boolean> = {\n      [SettingsScreens.PrivacyPhoneNumber]: PRIVACY_PHONE_NUMBER_SCREENS.includes(activeScreen),\n      [SettingsScreens.PrivacyLastSeen]: PRIVACY_LAST_SEEN_PHONE_SCREENS.includes(activeScreen),\n      [SettingsScreens.PrivacyProfilePhoto]: PRIVACY_PROFILE_PHOTO_SCREENS.includes(activeScreen),\n      [SettingsScreens.PrivacyBio]: PRIVACY_BIO_SCREENS.includes(activeScreen),\n      [SettingsScreens.PrivacyBirthday]: PRIVACY_BIRTHDAY_SCREENS.includes(activeScreen),\n      [SettingsScreens.PrivacyPhoneCall]: PRIVACY_PHONE_CALL_SCREENS.includes(activeScreen),\n      [SettingsScreens.PrivacyPhoneP2P]: PRIVACY_PHONE_P2P_SCREENS.includes(activeScreen),\n      [SettingsScreens.PrivacyForwarding]: PRIVACY_FORWARDING_SCREENS.includes(activeScreen),\n      [SettingsScreens.PrivacyVoiceMessages]: PRIVACY_VOICE_MESSAGES_SCREENS.includes(activeScreen),\n      [SettingsScreens.PrivacyGroupChats]: PRIVACY_GROUP_CHATS_SCREENS.includes(activeScreen),\n    };\n\n    const isTwoFaScreen = TWO_FA_SCREENS.includes(activeScreen);\n    const isPasscodeScreen = PASSCODE_SCREENS.includes(activeScreen);\n    const isFoldersScreen = FOLDERS_SCREENS.includes(activeScreen);\n    const isPrivacyScreen = PRIVACY_SCREENS.includes(activeScreen)\n      || isTwoFaScreen\n      || isPasscodeScreen\n      || Object.keys(privacyAllowScreens).map(Number).includes(activeScreen)\n      || Object.values(privacyAllowScreens).includes(true);\n\n    switch (currentScreen) {\n      case SettingsScreens.Main:\n        return (\n          <SettingsMain onScreenSelect={onScreenSelect} isActive={isActive} onReset={handleReset} />\n        );\n      case SettingsScreens.EditProfile:\n        return (\n          <SettingsEditProfile\n            isActive={isActive && isScreenActive}\n            onReset={handleReset}\n          />\n        );\n      case SettingsScreens.General:\n        return (\n          <SettingsGeneral\n            onScreenSelect={onScreenSelect}\n            isActive={isScreenActive\n              || activeScreen === SettingsScreens.GeneralChatBackgroundColor\n              || activeScreen === SettingsScreens.GeneralChatBackground\n              || activeScreen === SettingsScreens.QuickReaction\n              || activeScreen === SettingsScreens.CustomEmoji\n              || isPrivacyScreen || isFoldersScreen}\n            onReset={handleReset}\n          />\n        );\n      case SettingsScreens.QuickReaction:\n        return (\n          <SettingsQuickReaction isActive={isScreenActive} onReset={handleReset} />\n        );\n      case SettingsScreens.CustomEmoji:\n        return (\n          <SettingsCustomEmoji isActive={isScreenActive} onReset={handleReset} />\n        );\n      case SettingsScreens.Notifications:\n        return (\n          <SettingsNotifications isActive={isScreenActive} onReset={handleReset} />\n        );\n      case SettingsScreens.DataStorage:\n        return (\n          <SettingsDataStorage isActive={isScreenActive} onReset={handleReset} />\n        );\n      case SettingsScreens.Privacy:\n        return (\n          <SettingsPrivacy\n            onScreenSelect={onScreenSelect}\n            isActive={isScreenActive || isPrivacyScreen}\n            onReset={handleReset}\n          />\n        );\n      case SettingsScreens.Language:\n        return (\n          <SettingsLanguage\n            isActive={isScreenActive || activeScreen === SettingsScreens.DoNotTranslate}\n            onReset={handleReset}\n            onScreenSelect={onScreenSelect}\n          />\n        );\n      case SettingsScreens.DoNotTranslate:\n        return (\n          <SettingsDoNotTranslate isActive={isScreenActive} onReset={handleReset} />\n        );\n      case SettingsScreens.Stickers:\n        return (\n          <SettingsStickers isActive={isScreenActive} onReset={handleReset} onScreenSelect={onScreenSelect} />\n        );\n      case SettingsScreens.Experimental:\n        return (\n          <SettingsExperimental isActive={isScreenActive} onReset={handleReset} />\n        );\n      case SettingsScreens.GeneralChatBackground:\n        return (\n          <SettingsGeneralBackground\n            onScreenSelect={onScreenSelect}\n            isActive={isScreenActive || activeScreen === SettingsScreens.GeneralChatBackgroundColor}\n            onReset={handleReset}\n          />\n        );\n      case SettingsScreens.GeneralChatBackgroundColor:\n        return (\n          <SettingsGeneralBackgroundColor\n            isActive={isScreenActive}\n            onReset={handleReset}\n          />\n        );\n      case SettingsScreens.ActiveSessions:\n        return (\n          <SettingsActiveSessions\n            isActive={isScreenActive}\n            onReset={handleReset}\n          />\n        );\n      case SettingsScreens.ActiveWebsites:\n        return (\n          <SettingsActiveWebsites\n            isActive={isScreenActive}\n            onReset={handleReset}\n          />\n        );\n      case SettingsScreens.PrivacyBlockedUsers:\n        return (\n          <SettingsPrivacyBlockedUsers\n            isActive={isScreenActive}\n            onReset={handleReset}\n          />\n        );\n      case SettingsScreens.PrivacyPhoneNumber:\n      case SettingsScreens.PrivacyLastSeen:\n      case SettingsScreens.PrivacyProfilePhoto:\n      case SettingsScreens.PrivacyBio:\n      case SettingsScreens.PrivacyBirthday:\n      case SettingsScreens.PrivacyPhoneCall:\n      case SettingsScreens.PrivacyForwarding:\n      case SettingsScreens.PrivacyVoiceMessages:\n      case SettingsScreens.PrivacyGroupChats:\n        return (\n          <SettingsPrivacyVisibility\n            screen={currentScreen}\n            onScreenSelect={onScreenSelect}\n            isActive={isScreenActive || privacyAllowScreens[currentScreen]}\n            onReset={handleReset}\n          />\n        );\n\n      case SettingsScreens.PrivacyPhoneNumberAllowedContacts:\n      case SettingsScreens.PrivacyLastSeenAllowedContacts:\n      case SettingsScreens.PrivacyProfilePhotoAllowedContacts:\n      case SettingsScreens.PrivacyBioAllowedContacts:\n      case SettingsScreens.PrivacyBirthdayAllowedContacts:\n      case SettingsScreens.PrivacyPhoneCallAllowedContacts:\n      case SettingsScreens.PrivacyPhoneP2PAllowedContacts:\n      case SettingsScreens.PrivacyForwardingAllowedContacts:\n      case SettingsScreens.PrivacyVoiceMessagesAllowedContacts:\n      case SettingsScreens.PrivacyGroupChatsAllowedContacts:\n        return (\n          <SettingsPrivacyVisibilityExceptionList\n            isAllowList\n            withPremiumCategory={currentScreen === SettingsScreens.PrivacyGroupChatsAllowedContacts}\n            screen={currentScreen}\n            onScreenSelect={onScreenSelect}\n            isActive={isScreenActive || privacyAllowScreens[currentScreen]}\n            onReset={handleReset}\n          />\n        );\n\n      case SettingsScreens.PrivacyPhoneNumberDeniedContacts:\n      case SettingsScreens.PrivacyLastSeenDeniedContacts:\n      case SettingsScreens.PrivacyProfilePhotoDeniedContacts:\n      case SettingsScreens.PrivacyBioDeniedContacts:\n      case SettingsScreens.PrivacyBirthdayDeniedContacts:\n      case SettingsScreens.PrivacyPhoneCallDeniedContacts:\n      case SettingsScreens.PrivacyPhoneP2PDeniedContacts:\n      case SettingsScreens.PrivacyForwardingDeniedContacts:\n      case SettingsScreens.PrivacyVoiceMessagesDeniedContacts:\n      case SettingsScreens.PrivacyGroupChatsDeniedContacts:\n        return (\n          <SettingsPrivacyVisibilityExceptionList\n            screen={currentScreen}\n            onScreenSelect={onScreenSelect}\n            isActive={isScreenActive}\n            onReset={handleReset}\n          />\n        );\n\n      case SettingsScreens.PrivacyMessages:\n        return (\n          <PrivacyMessages\n            isActive={isScreenActive}\n            onReset={handleReset}\n          />\n        );\n\n      case SettingsScreens.Folders:\n      case SettingsScreens.FoldersCreateFolder:\n      case SettingsScreens.FoldersEditFolder:\n      case SettingsScreens.FoldersEditFolderFromChatList:\n      case SettingsScreens.FoldersEditFolderInvites:\n      case SettingsScreens.FoldersIncludedChats:\n      case SettingsScreens.FoldersIncludedChatsFromChatList:\n      case SettingsScreens.FoldersExcludedChats:\n      case SettingsScreens.FoldersExcludedChatsFromChatList:\n      case SettingsScreens.FoldersShare:\n        return (\n          <SettingsFolders\n            currentScreen={currentScreen}\n            shownScreen={activeScreen}\n            state={foldersState}\n            dispatch={foldersDispatch}\n            isActive={isScreenActive}\n            onScreenSelect={onScreenSelect}\n            onReset={handleReset}\n          />\n        );\n\n      case SettingsScreens.TwoFaDisabled:\n      case SettingsScreens.TwoFaNewPassword:\n      case SettingsScreens.TwoFaNewPasswordConfirm:\n      case SettingsScreens.TwoFaNewPasswordHint:\n      case SettingsScreens.TwoFaNewPasswordEmail:\n      case SettingsScreens.TwoFaNewPasswordEmailCode:\n      case SettingsScreens.TwoFaCongratulations:\n      case SettingsScreens.TwoFaEnabled:\n      case SettingsScreens.TwoFaChangePasswordCurrent:\n      case SettingsScreens.TwoFaChangePasswordNew:\n      case SettingsScreens.TwoFaChangePasswordConfirm:\n      case SettingsScreens.TwoFaChangePasswordHint:\n      case SettingsScreens.TwoFaTurnOff:\n      case SettingsScreens.TwoFaRecoveryEmailCurrentPassword:\n      case SettingsScreens.TwoFaRecoveryEmail:\n      case SettingsScreens.TwoFaRecoveryEmailCode:\n        return (\n          <SettingsTwoFa\n            currentScreen={currentScreen}\n            state={twoFaState}\n            dispatch={twoFaDispatch}\n            shownScreen={activeScreen}\n            isActive={isScreenActive}\n            onScreenSelect={onScreenSelect}\n            onReset={handleReset}\n          />\n        );\n\n      case SettingsScreens.PasscodeDisabled:\n      case SettingsScreens.PasscodeNewPasscode:\n      case SettingsScreens.PasscodeNewPasscodeConfirm:\n      case SettingsScreens.PasscodeChangePasscodeCurrent:\n      case SettingsScreens.PasscodeChangePasscodeNew:\n      case SettingsScreens.PasscodeChangePasscodeConfirm:\n      case SettingsScreens.PasscodeCongratulations:\n      case SettingsScreens.PasscodeEnabled:\n      case SettingsScreens.PasscodeTurnOff:\n        return (\n          <SettingsPasscode\n            currentScreen={currentScreen}\n            passcode={privacyPasscode}\n            onSetPasscode={setPrivacyPasscode}\n            shownScreen={activeScreen}\n            isActive={isScreenActive}\n            onScreenSelect={onScreenSelect}\n            onReset={handleReset}\n          />\n        );\n\n      case SettingsScreens.Performance:\n        return (\n          <SettingsPerformance\n            isActive={isScreenActive}\n            onReset={handleReset}\n          />\n        );\n\n      default:\n        return undefined;\n    }\n  }\n\n  function renderCurrentSection(\n    isScreenActive: boolean,\n    _isFrom: boolean,\n    _currentKey: SettingsScreens,\n    activeKey: SettingsScreens,\n  ) {\n    return (\n      <>\n        <SettingsHeader\n          currentScreen={currentScreen}\n          onReset={handleReset}\n          onScreenSelect={onScreenSelect}\n          editedFolderId={foldersState.folderId}\n        />\n        {renderCurrentSectionContent(isScreenActive, activeKey)}\n      </>\n    );\n  }\n\n  return (\n    <Transition\n      id=\"Settings\"\n      name={shouldSkipTransition ? 'none' : LAYERS_ANIMATION_NAME}\n      activeKey={currentScreen}\n      renderCount={TRANSITION_RENDER_COUNT}\n      shouldWrap\n      withSwipeControl\n    >\n      {renderCurrentSection}\n    </Transition>\n  );\n};\n\nexport default memo(Settings);\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useCallback } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiSession } from '../../../api/types';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { formatDateTimeToString } from '../../../util/dates/dateFormat';\nimport getSessionIcon from './helpers/getSessionIcon';\n\nimport useCurrentOrPrev from '../../../hooks/useCurrentOrPrev';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Button from '../../ui/Button';\nimport ListItem from '../../ui/ListItem';\nimport Modal from '../../ui/Modal';\nimport Switcher from '../../ui/Switcher';\n\nimport styles from './SettingsActiveSession.module.scss';\n\ntype OwnProps = {\n  isOpen: boolean;\n  hash?: string;\n  onClose: () => void;\n};\n\ntype StateProps = {\n  session?: ApiSession;\n};\n\nconst SettingsActiveSession: FC<OwnProps & StateProps> = ({\n  isOpen, session, onClose,\n}) => {\n  const { changeSessionSettings, terminateAuthorization } = getActions();\n  const lang = useOldLang();\n\n  const renderingSession = useCurrentOrPrev(session, true);\n\n  const handleSecretChatsStateChange = useCallback(() => {\n    changeSessionSettings({\n      hash: session!.hash,\n      areSecretChatsEnabled: !session!.areSecretChatsEnabled,\n    });\n  }, [changeSessionSettings, session]);\n\n  const handleCallsStateChange = useCallback(() => {\n    changeSessionSettings({\n      hash: session!.hash,\n      areCallsEnabled: !session!.areCallsEnabled,\n    });\n  }, [changeSessionSettings, session]);\n\n  const handleTerminateSessionClick = useCallback(() => {\n    terminateAuthorization({ hash: session!.hash });\n    onClose();\n  }, [onClose, session, terminateAuthorization]);\n\n  if (!renderingSession) {\n    return undefined;\n  }\n\n  function renderHeader() {\n    return (\n      <div className=\"modal-header-condensed\" dir={lang.isRtl ? 'rtl' : undefined}>\n        <Button round color=\"translucent\" size=\"smaller\" ariaLabel={lang('Close')} onClick={onClose}>\n          <i className=\"icon icon-close\" />\n        </Button>\n        <div className=\"modal-title\">{lang('SessionPreview.Title')}</div>\n        <Button\n          color=\"danger\"\n          onClick={handleTerminateSessionClick}\n          className={buildClassName('modal-action-button', styles.headerButton)}\n        >\n          {lang('SessionPreview.TerminateSession')}\n        </Button>\n      </div>\n    );\n  }\n  return (\n    <Modal\n      header={renderHeader()}\n      isOpen={isOpen}\n      hasCloseButton\n      onClose={onClose}\n      className={styles.SettingsActiveSession}\n    >\n      <div className={buildClassName(\n        styles.iconDevice,\n        renderingSession && styles[`iconDevice__${getSessionIcon(renderingSession)}`],\n      )}\n      />\n      <h3 className={styles.title} dir=\"auto\">{renderingSession?.deviceModel}</h3>\n      <div className={styles.date} aria-label={lang('PrivacySettings.LastSeen')}>\n        {formatDateTimeToString(renderingSession.dateActive * 1000, lang.code)}\n      </div>\n\n      <dl className={styles.box}>\n        <dt>{lang('SessionPreview.App')}</dt>\n        <dd>\n          {renderingSession?.appName} {renderingSession?.appVersion},{' '}\n          {renderingSession?.platform} {renderingSession?.systemVersion}\n        </dd>\n\n        <dt>{lang('SessionPreview.Ip')}</dt>\n        <dd>{renderingSession?.ip}</dd>\n\n        <dt>{lang('SessionPreview.Location')}</dt>\n        <dd>{renderingSession && getLocation(renderingSession)}</dd>\n      </dl>\n\n      <p className={styles.note}>{lang('SessionPreview.IpDesc')}</p>\n\n      <h4 className={styles.actionHeader}>{lang('AuthSessions.View.AcceptTitle')}</h4>\n\n      <ListItem onClick={handleSecretChatsStateChange}>\n        <span className={styles.actionName}>{lang('SessionPreview.Accept.Secret')}</span>\n        <Switcher\n          id=\"accept_secrets\"\n          label=\"On\"\n          checked={renderingSession.areSecretChatsEnabled}\n        />\n      </ListItem>\n      <ListItem onClick={handleCallsStateChange}>\n        <span className={styles.actionName}>{lang('SessionPreview.Accept.Calls')}</span>\n        <Switcher\n          id=\"accept_calls\"\n          label=\"On\"\n          checked={renderingSession.areCallsEnabled}\n        />\n      </ListItem>\n    </Modal>\n  );\n};\n\nfunction getLocation(session: ApiSession) {\n  return [session.region, session.country].filter(Boolean).join(', ');\n}\n\nexport default memo(withGlobal<OwnProps>((global, { hash }) => {\n  return {\n    session: hash ? global.activeSessions.byHash[hash] : undefined,\n  };\n})(SettingsActiveSession));\n","/* eslint-disable react/jsx-no-bind */\nimport type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiSession } from '../../../api/types';\n\nimport { formatPastTimeShort } from '../../../util/dates/dateFormat';\nimport getSessionIcon from './helpers/getSessionIcon';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport ConfirmDialog from '../../ui/ConfirmDialog';\nimport ListItem from '../../ui/ListItem';\nimport RadioGroup from '../../ui/RadioGroup';\nimport SettingsActiveSession from './SettingsActiveSession';\n\nimport './SettingsActiveSessions.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  onReset: () => void;\n};\n\ntype StateProps = {\n  byHash: Record<string, ApiSession>;\n  orderedHashes: string[];\n  ttlDays?: number;\n};\n\nconst SettingsActiveSessions: FC<OwnProps & StateProps> = ({\n  isActive,\n  onReset,\n  byHash,\n  orderedHashes,\n  ttlDays,\n}) => {\n  const {\n    terminateAuthorization,\n    terminateAllAuthorizations,\n    changeSessionTtl,\n  } = getActions();\n\n  const lang = useOldLang();\n  const [isConfirmTerminateAllDialogOpen, openConfirmTerminateAllDialog, closeConfirmTerminateAllDialog] = useFlag();\n  const [openedSessionHash, setOpenedSessionHash] = useState<string | undefined>();\n  const [isModalOpen, openModal, closeModal] = useFlag();\n\n  const autoTerminateValue = useMemo(() => {\n    // eslint-disable-next-line max-len\n    // https://github.com/DrKLO/Telegram/blob/96dce2c9aabc33b87db61d830aa087b6b03fe397/TMessagesProj/src/main/java/org/telegram/ui/SessionsActivity.java#L195\n    if (ttlDays === undefined) {\n      return undefined;\n    }\n\n    if (ttlDays <= 7) {\n      return '7';\n    }\n\n    if (ttlDays <= 30) {\n      return '30';\n    }\n\n    if (ttlDays <= 93) {\n      return '90';\n    }\n\n    if (ttlDays <= 183) {\n      return '183';\n    }\n\n    if (ttlDays > 183) {\n      return '365';\n    }\n\n    return undefined;\n  }, [ttlDays]);\n\n  const AUTO_TERMINATE_OPTIONS = useMemo(() => {\n    const options = [{\n      label: lang('Weeks', 1, 'i'),\n      value: '7',\n    }, {\n      label: lang('Months', 1, 'i'),\n      value: '30',\n    }, {\n      label: lang('Months', 3, 'i'),\n      value: '90',\n    }, {\n      label: lang('Months', 6, 'i'),\n      value: '183',\n    }];\n    if (ttlDays && ttlDays >= 365) {\n      options.push({\n        label: lang('Years', 1, 'i'),\n        value: '365',\n      });\n    }\n    return options;\n  }, [lang, ttlDays]);\n\n  const handleTerminateSessionClick = useCallback((hash: string) => {\n    terminateAuthorization({ hash });\n  }, [terminateAuthorization]);\n\n  const handleTerminateAllSessions = useCallback(() => {\n    closeConfirmTerminateAllDialog();\n    terminateAllAuthorizations();\n  }, [closeConfirmTerminateAllDialog, terminateAllAuthorizations]);\n\n  const handleOpenSessionModal = useCallback((hash: string) => {\n    setOpenedSessionHash(hash);\n    openModal();\n  }, [openModal]);\n\n  const handleCloseSessionModal = useCallback(() => {\n    setOpenedSessionHash(undefined);\n    closeModal();\n  }, [closeModal]);\n\n  const handleChangeSessionTtl = useCallback((value: string) => {\n    changeSessionTtl({ days: Number(value) });\n  }, [changeSessionTtl]);\n\n  const currentSession = useMemo(() => {\n    const currentSessionHash = orderedHashes.find((hash) => byHash[hash].isCurrent);\n\n    return currentSessionHash ? byHash[currentSessionHash] : undefined;\n  }, [byHash, orderedHashes]);\n\n  const otherSessionHashes = useMemo(() => {\n    return orderedHashes.filter((hash) => !byHash[hash].isCurrent);\n  }, [byHash, orderedHashes]);\n  const hasOtherSessions = Boolean(otherSessionHashes.length);\n\n  useHistoryBack({\n    isActive,\n    onBack: onReset,\n  });\n\n  function renderCurrentSession(session: ApiSession) {\n    return (\n      <div className=\"settings-item\">\n        <h4 className=\"settings-item-header mb-4\" dir={lang.isRtl ? 'rtl' : undefined}>\n          {lang('AuthSessions.CurrentSession')}\n        </h4>\n\n        <ListItem narrow inactive icon={`device-${getSessionIcon(session)}`} iconClassName=\"icon-device\">\n          <div className=\"multiline-menu-item full-size\" dir=\"auto\">\n            <span className=\"title\" dir=\"auto\">{session.deviceModel}</span>\n            <span className=\"subtitle black tight\">\n              {session.appName} {session.appVersion}, {session.platform} {session.systemVersion}\n            </span>\n            <span className=\"subtitle\">{session.ip} - {getLocation(session)}</span>\n          </div>\n        </ListItem>\n\n        {hasOtherSessions && (\n          <ListItem\n            className=\"destructive mb-0 no-icon\"\n            icon=\"stop\"\n            ripple\n            narrow\n            onClick={openConfirmTerminateAllDialog}\n          >\n            {lang('TerminateAllSessions')}\n          </ListItem>\n        )}\n      </div>\n    );\n  }\n\n  function renderOtherSessions(sessionHashes: string[]) {\n    return (\n      <div className=\"settings-item\">\n        <h4 className=\"settings-item-header mb-4\" dir={lang.isRtl ? 'rtl' : undefined}>\n          {lang('OtherSessions')}\n        </h4>\n\n        {sessionHashes.map(renderSession)}\n      </div>\n    );\n  }\n\n  function renderAutoTerminate() {\n    return (\n      <div className=\"settings-item\">\n        <h4 className=\"settings-item-header mb-4\" dir={lang.isRtl ? 'rtl' : undefined}>\n          {lang('TerminateOldSessionHeader')}\n        </h4>\n\n        <p>{lang('IfInactiveFor')}</p>\n        <RadioGroup\n          name=\"session_ttl\"\n          options={AUTO_TERMINATE_OPTIONS}\n          selected={autoTerminateValue}\n          onChange={handleChangeSessionTtl}\n        />\n      </div>\n    );\n  }\n\n  function renderSession(sessionHash: string) {\n    const session = byHash[sessionHash];\n\n    return (\n      <ListItem\n        key={session.hash}\n        ripple\n        narrow\n        contextActions={[{\n          title: 'Terminate',\n          icon: 'stop',\n          destructive: true,\n          handler: () => {\n            handleTerminateSessionClick(session.hash);\n          },\n        }]}\n        icon={`device-${getSessionIcon(session)}`}\n        iconClassName=\"icon-device\"\n        onClick={() => { handleOpenSessionModal(session.hash); }}\n      >\n        <div className=\"multiline-menu-item full-size\" dir=\"auto\">\n          <span className=\"date\">{formatPastTimeShort(lang, session.dateActive * 1000)}</span>\n          <span className=\"title\">{session.deviceModel}</span>\n          <span className=\"subtitle black tight\">\n            {session.appName} {session.appVersion}, {session.platform} {session.systemVersion}\n          </span>\n          <span className=\"subtitle\">{session.ip} {getLocation(session)}</span>\n        </div>\n      </ListItem>\n    );\n  }\n\n  return (\n    <div className=\"settings-content custom-scroll SettingsActiveSessions\">\n      {currentSession && renderCurrentSession(currentSession)}\n      {hasOtherSessions && renderOtherSessions(otherSessionHashes)}\n      {renderAutoTerminate()}\n      {hasOtherSessions && (\n        <ConfirmDialog\n          isOpen={isConfirmTerminateAllDialogOpen}\n          onClose={closeConfirmTerminateAllDialog}\n          text={lang('AreYouSureSessions')}\n          confirmLabel={lang('TerminateAllSessions')}\n          confirmHandler={handleTerminateAllSessions}\n          confirmIsDestructive\n          areButtonsInColumn\n        />\n      )}\n      <SettingsActiveSession isOpen={isModalOpen} hash={openedSessionHash} onClose={handleCloseSessionModal} />\n    </div>\n  );\n};\n\nfunction getLocation(session: ApiSession) {\n  return [session.region, session.country].filter(Boolean).join(', ');\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => global.activeSessions,\n)(SettingsActiveSessions));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useCallback } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiUser, ApiWebSession } from '../../../api/types';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useCurrentOrPrev from '../../../hooks/useCurrentOrPrev';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Avatar from '../../common/Avatar';\nimport FullNameTitle from '../../common/FullNameTitle';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport styles from './SettingsActiveWebsite.module.scss';\n\ntype OwnProps = {\n  isOpen: boolean;\n  hash?: string;\n  onClose: () => void;\n};\n\ntype StateProps = {\n  session?: ApiWebSession;\n  bot?: ApiUser;\n};\n\nconst SettingsActiveWebsite: FC<OwnProps & StateProps> = ({\n  isOpen,\n  session,\n  bot,\n  onClose,\n}) => {\n  const { terminateWebAuthorization } = getActions();\n  const lang = useOldLang();\n\n  const renderingSession = useCurrentOrPrev(session, true);\n  const renderingBot = useCurrentOrPrev(bot, true);\n\n  const handleTerminateSessionClick = useCallback(() => {\n    terminateWebAuthorization({ hash: session!.hash });\n    onClose();\n  }, [onClose, session, terminateWebAuthorization]);\n\n  if (!renderingSession) {\n    return undefined;\n  }\n\n  function renderHeader() {\n    return (\n      <div className=\"modal-header-condensed\" dir={lang.isRtl ? 'rtl' : undefined}>\n        <Button round color=\"translucent\" size=\"smaller\" ariaLabel={lang('Close')} onClick={onClose}>\n          <i className=\"icon icon-close\" />\n        </Button>\n        <div className=\"modal-title\">{lang('WebSessionsTitle')}</div>\n        <Button\n          color=\"danger\"\n          onClick={handleTerminateSessionClick}\n          className={buildClassName('modal-action-button', styles.headerButton)}\n        >\n          {lang('AuthSessions.LogOut')}\n        </Button>\n      </div>\n    );\n  }\n  return (\n    <Modal\n      header={renderHeader()}\n      isOpen={isOpen}\n      hasCloseButton\n      onClose={onClose}\n      className={styles.root}\n    >\n      <Avatar\n        className={styles.avatar}\n        peer={renderingBot}\n        size=\"large\"\n      />\n      {renderingBot && <FullNameTitle className={styles.title} peer={renderingBot} />}\n      <div className={styles.note}>\n        {renderingSession?.domain}\n      </div>\n\n      <dl className={styles.box}>\n        <dt>{lang('AuthSessions.View.Browser')}</dt>\n        <dd>\n          {renderingSession?.browser}\n        </dd>\n\n        <dt>{lang('SessionPreview.Ip')}</dt>\n        <dd>{renderingSession?.ip}</dd>\n\n        <dt>{lang('SessionPreview.Location')}</dt>\n        <dd>{renderingSession?.region}</dd>\n      </dl>\n      <p className={styles.note}>{lang('AuthSessions.View.LocationInfo')}</p>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global, { hash }): StateProps => {\n  const session = hash ? global.activeWebSessions.byHash[hash] : undefined;\n  const bot = session ? global.users.byId[session.botId] : undefined;\n\n  return {\n    session,\n    bot,\n  };\n})(SettingsActiveWebsite));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type { ApiWebSession } from '../../../api/types';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { formatPastTimeShort } from '../../../util/dates/dateFormat';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Avatar from '../../common/Avatar';\nimport FullNameTitle from '../../common/FullNameTitle';\nimport ConfirmDialog from '../../ui/ConfirmDialog';\nimport ListItem from '../../ui/ListItem';\nimport SettingsActiveWebsite from './SettingsActiveWebsite';\n\nimport styles from './SettingsActiveWebsites.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  onReset: () => void;\n};\n\ntype StateProps = {\n  byHash: Record<string, ApiWebSession>;\n  orderedHashes: string[];\n};\n\nconst SettingsActiveWebsites: FC<OwnProps & StateProps> = ({\n  isActive,\n  byHash,\n  orderedHashes,\n  onReset,\n}) => {\n  const {\n    terminateWebAuthorization,\n    terminateAllWebAuthorizations,\n  } = getActions();\n\n  const lang = useOldLang();\n  const [isConfirmTerminateAllDialogOpen, openConfirmTerminateAllDialog, closeConfirmTerminateAllDialog] = useFlag();\n  const [openedWebsiteHash, setOpenedWebsiteHash] = useState<string | undefined>();\n  const [isModalOpen, openModal, closeModal] = useFlag();\n\n  const handleTerminateAuthClick = useCallback((hash: string) => {\n    terminateWebAuthorization({ hash });\n  }, [terminateWebAuthorization]);\n\n  const handleTerminateAllAuth = useCallback(() => {\n    closeConfirmTerminateAllDialog();\n    terminateAllWebAuthorizations();\n  }, [closeConfirmTerminateAllDialog, terminateAllWebAuthorizations]);\n\n  const handleOpenSessionModal = useCallback((hash: string) => {\n    setOpenedWebsiteHash(hash);\n    openModal();\n  }, [openModal]);\n\n  const handleCloseWebsiteModal = useCallback(() => {\n    setOpenedWebsiteHash(undefined);\n    closeModal();\n  }, [closeModal]);\n\n  // Close when empty\n  useEffect(() => {\n    if (!orderedHashes.length) {\n      onReset();\n    }\n  }, [onReset, orderedHashes]);\n\n  useHistoryBack({\n    isActive,\n    onBack: onReset,\n  });\n\n  function renderSessions(sessionHashes: string[]) {\n    return (\n      <div className=\"settings-item\">\n        <h4 className=\"settings-item-header mb-4\" dir={lang.isRtl ? 'rtl' : undefined}>\n          {lang('WebSessionsTitle')}\n        </h4>\n\n        {sessionHashes.map(renderSession)}\n      </div>\n    );\n  }\n\n  function renderSession(sessionHash: string) {\n    const session = byHash[sessionHash];\n    const bot = getGlobal().users.byId[session.botId];\n\n    return (\n      <ListItem\n        key={session.hash}\n        ripple\n        narrow\n        contextActions={[{\n          title: 'Terminate',\n          icon: 'stop',\n          destructive: true,\n          handler: () => {\n            handleTerminateAuthClick(session.hash);\n          },\n        }]}\n        // eslint-disable-next-line react/jsx-no-bind\n        onClick={() => handleOpenSessionModal(session.hash)}\n      >\n        <Avatar className={styles.avatar} peer={bot} size=\"tiny\" />\n        <div className=\"multiline-menu-item full-size\" dir=\"auto\">\n          <span className=\"date\">{formatPastTimeShort(lang, session.dateActive * 1000)}</span>\n          {bot && <FullNameTitle className={styles.title} peer={bot} />}\n          <span className={buildClassName('subtitle', 'black', 'tight', styles.platform)}>\n            {session.domain}, {session.browser}, {session.platform}\n          </span>\n          <span className={buildClassName('subtitle', styles.subtitle)}>{session.ip} {session.region}</span>\n        </div>\n      </ListItem>\n    );\n  }\n\n  if (!orderedHashes.length) return undefined;\n\n  return (\n    <div className=\"settings-content custom-scroll\">\n      <div className=\"settings-item\">\n        <ListItem\n          className=\"destructive mb-0 no-icon\"\n          icon=\"stop\"\n          ripple\n          narrow\n          onClick={openConfirmTerminateAllDialog}\n        >\n          {lang('AuthSessions.LogOutApplications')}\n        </ListItem>\n        <p className={buildClassName('settings-item-description', styles.clearHelp)}>\n          {lang('ClearOtherWebSessionsHelp')}\n        </p>\n      </div>\n      {renderSessions(orderedHashes)}\n      <ConfirmDialog\n        isOpen={isConfirmTerminateAllDialogOpen}\n        onClose={closeConfirmTerminateAllDialog}\n        title={lang('AuthSessions.LogOutApplications')}\n        text={lang('AreYouSureWebSessions')}\n        confirmHandler={handleTerminateAllAuth}\n        confirmIsDestructive\n      />\n      <SettingsActiveWebsite isOpen={isModalOpen} hash={openedWebsiteHash} onClose={handleCloseWebsiteModal} />\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const { byHash, orderedHashes } = global.activeWebSessions;\n    return {\n      byHash,\n      orderedHashes,\n    };\n  },\n)(SettingsActiveWebsites));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useMemo, useRef,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiSticker, ApiStickerSet } from '../../../api/types';\nimport type { ISettings } from '../../../types';\n\nimport { selectCanPlayAnimatedEmojis } from '../../../global/selectors';\nimport { pick } from '../../../util/iteratees';\nimport renderText from '../../common/helpers/renderText';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport { useIntersectionObserver } from '../../../hooks/useIntersectionObserver';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport StickerSetCard from '../../common/StickerSetCard';\nimport Checkbox from '../../ui/Checkbox';\n\ntype OwnProps = {\n  isActive?: boolean;\n  onReset: () => void;\n};\n\ntype StateProps = Pick<ISettings, (\n  'shouldSuggestCustomEmoji'\n)> & {\n  customEmojiSetIds?: string[];\n  stickerSetsById: Record<string, ApiStickerSet>;\n  canPlayAnimatedEmojis: boolean;\n};\n\nconst SettingsCustomEmoji: FC<OwnProps & StateProps> = ({\n  isActive,\n  customEmojiSetIds,\n  stickerSetsById,\n  shouldSuggestCustomEmoji,\n  canPlayAnimatedEmojis,\n  onReset,\n}) => {\n  const { openStickerSet, setSettingOption } = getActions();\n  const lang = useOldLang();\n\n  // eslint-disable-next-line no-null/no-null\n  const stickerSettingsRef = useRef<HTMLDivElement>(null);\n  const { observe: observeIntersectionForCovers } = useIntersectionObserver({ rootRef: stickerSettingsRef });\n\n  useHistoryBack({\n    isActive,\n    onBack: onReset,\n  });\n\n  const handleStickerSetClick = useCallback((sticker: ApiSticker) => {\n    openStickerSet({\n      stickerSetInfo: sticker.stickerSetInfo,\n    });\n  }, [openStickerSet]);\n\n  const handleSuggestCustomEmojiChange = useCallback((newValue: boolean) => {\n    setSettingOption({ shouldSuggestCustomEmoji: newValue });\n  }, [setSettingOption]);\n\n  const customEmojiSets = useMemo(() => (\n    customEmojiSetIds && Object.values(pick(stickerSetsById, customEmojiSetIds))\n  ), [customEmojiSetIds, stickerSetsById]);\n\n  return (\n    <div className=\"settings-content custom-scroll\">\n      {customEmojiSets && (\n        <div className=\"settings-item\">\n          <Checkbox\n            label={lang('SuggestAnimatedEmoji')}\n            checked={shouldSuggestCustomEmoji}\n            onCheck={handleSuggestCustomEmojiChange}\n          />\n          <div className=\"mt-4\" ref={stickerSettingsRef}>\n            {customEmojiSets.map((stickerSet: ApiStickerSet) => (\n              <StickerSetCard\n                key={stickerSet.id}\n                stickerSet={stickerSet}\n                observeIntersection={observeIntersectionForCovers}\n                onClick={handleStickerSetClick}\n                noPlay={!canPlayAnimatedEmojis}\n              />\n            ))}\n          </div>\n          <p className=\"settings-item-description mt-3\" dir=\"auto\">\n            {renderText(lang('EmojiBotInfo'), ['links'])}\n          </p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    return {\n      ...pick(global.settings.byKey, [\n        'shouldSuggestCustomEmoji',\n      ]),\n      customEmojiSetIds: global.customEmojis.added.setIds,\n      stickerSetsById: global.stickers.setsById,\n      canPlayAnimatedEmojis: selectCanPlayAnimatedEmojis(global),\n    };\n  },\n)(SettingsCustomEmoji));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useCallback } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ISettings } from '../../../types';\n\nimport { AUTODOWNLOAD_FILESIZE_MB_LIMITS } from '../../../config';\nimport { pick } from '../../../util/iteratees';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Checkbox from '../../ui/Checkbox';\nimport RangeSlider from '../../ui/RangeSlider';\n\ntype OwnProps = {\n  isActive?: boolean;\n  onReset: () => void;\n};\n\ntype StateProps = Pick<ISettings, (\n  'canAutoLoadPhotoFromContacts' |\n  'canAutoLoadPhotoInPrivateChats' |\n  'canAutoLoadPhotoInGroups' |\n  'canAutoLoadPhotoInChannels' |\n  'canAutoLoadVideoFromContacts' |\n  'canAutoLoadVideoInPrivateChats' |\n  'canAutoLoadVideoInGroups' |\n  'canAutoLoadVideoInChannels' |\n  'canAutoLoadFileFromContacts' |\n  'canAutoLoadFileInPrivateChats' |\n  'canAutoLoadFileInGroups' |\n  'canAutoLoadFileInChannels' |\n  'autoLoadFileMaxSizeMb'\n)>;\n\nconst SettingsDataStorage: FC<OwnProps & StateProps> = ({\n  isActive,\n  onReset,\n  canAutoLoadPhotoFromContacts,\n  canAutoLoadPhotoInPrivateChats,\n  canAutoLoadPhotoInGroups,\n  canAutoLoadPhotoInChannels,\n  canAutoLoadVideoFromContacts,\n  canAutoLoadVideoInPrivateChats,\n  canAutoLoadVideoInGroups,\n  canAutoLoadVideoInChannels,\n  canAutoLoadFileFromContacts,\n  canAutoLoadFileInPrivateChats,\n  canAutoLoadFileInGroups,\n  canAutoLoadFileInChannels,\n  autoLoadFileMaxSizeMb,\n}) => {\n  const { setSettingOption } = getActions();\n\n  const lang = useOldLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onReset,\n  });\n\n  const renderFileSizeCallback = useCallback((value: number) => {\n    return lang('AutodownloadSizeLimitUpTo', lang('FileSize.MB', String(AUTODOWNLOAD_FILESIZE_MB_LIMITS[value]), 'i'));\n  }, [lang]);\n\n  const handleFileSizeChange = useCallback((value: number) => {\n    setSettingOption({ autoLoadFileMaxSizeMb: AUTODOWNLOAD_FILESIZE_MB_LIMITS[value] });\n  }, [setSettingOption]);\n\n  function renderContentSizeSlider() {\n    const value = AUTODOWNLOAD_FILESIZE_MB_LIMITS.indexOf(autoLoadFileMaxSizeMb);\n\n    return (\n      <div className=\"pt-5\">\n        <RangeSlider\n          label={lang('AutoDownloadMaxFileSize')}\n          min={0}\n          max={5}\n          value={value !== -1 ? value : 2}\n          renderValue={renderFileSizeCallback}\n          onChange={handleFileSizeChange}\n        />\n      </div>\n    );\n  }\n\n  function renderAutoDownloadBlock(\n    title: string,\n    key: 'Photo' | 'Video' | 'File',\n    canAutoLoadFromContacts: boolean,\n    canAutoLoadInPrivateChats: boolean,\n    canAutoLoadInGroups: boolean,\n    canAutoLoadInChannels: boolean,\n  ) {\n    return (\n      <div className=\"settings-item\">\n        <h4 className=\"settings-item-header\" dir={lang.isRtl ? 'rtl' : undefined}>{title}</h4>\n\n        <Checkbox\n          label={lang('AutoDownloadSettings.Contacts')}\n          checked={canAutoLoadFromContacts}\n          // TODO rewrite to support `useCallback`\n          // eslint-disable-next-line react/jsx-no-bind\n          onCheck={(isChecked) => setSettingOption({ [`canAutoLoad${key}FromContacts`]: isChecked })}\n        />\n        <Checkbox\n          label={lang('AutoDownloadSettings.PrivateChats')}\n          checked={canAutoLoadInPrivateChats}\n          // eslint-disable-next-line react/jsx-no-bind\n          onCheck={(isChecked) => setSettingOption({ [`canAutoLoad${key}InPrivateChats`]: isChecked })}\n        />\n        <Checkbox\n          label={lang('AutoDownloadSettings.GroupChats')}\n          checked={canAutoLoadInGroups}\n          // eslint-disable-next-line react/jsx-no-bind\n          onCheck={(isChecked) => setSettingOption({ [`canAutoLoad${key}InGroups`]: isChecked })}\n        />\n        <Checkbox\n          label={lang('AutoDownloadSettings.Channels')}\n          checked={canAutoLoadInChannels}\n          // eslint-disable-next-line react/jsx-no-bind\n          onCheck={(isChecked) => setSettingOption({ [`canAutoLoad${key}InChannels`]: isChecked })}\n        />\n\n        {key === 'File' && renderContentSizeSlider()}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"settings-content custom-scroll\">\n      {renderAutoDownloadBlock(\n        lang('AutoDownloadPhotosTitle'),\n        'Photo',\n        canAutoLoadPhotoFromContacts,\n        canAutoLoadPhotoInPrivateChats,\n        canAutoLoadPhotoInGroups,\n        canAutoLoadPhotoInChannels,\n      )}\n      {renderAutoDownloadBlock(\n        lang('AutoDownloadVideosTitle'),\n        'Video',\n        canAutoLoadVideoFromContacts,\n        canAutoLoadVideoInPrivateChats,\n        canAutoLoadVideoInGroups,\n        canAutoLoadVideoInChannels,\n      )}\n      {renderAutoDownloadBlock(\n        'Auto-download files', // Proper translation is not available yet\n        'File',\n        canAutoLoadFileFromContacts,\n        canAutoLoadFileInPrivateChats,\n        canAutoLoadFileInGroups,\n        canAutoLoadFileInChannels,\n      )}\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    return pick(global.settings.byKey, [\n      'canAutoLoadPhotoFromContacts',\n      'canAutoLoadPhotoInPrivateChats',\n      'canAutoLoadPhotoInGroups',\n      'canAutoLoadPhotoInChannels',\n      'canAutoLoadVideoFromContacts',\n      'canAutoLoadVideoInPrivateChats',\n      'canAutoLoadVideoInGroups',\n      'canAutoLoadVideoInChannels',\n      'canAutoLoadFileFromContacts',\n      'canAutoLoadFileInPrivateChats',\n      'canAutoLoadFileInGroups',\n      'canAutoLoadFileInChannels',\n      'autoLoadFileMaxSizeMb',\n    ]);\n  },\n)(SettingsDataStorage));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ISettings } from '../../../types';\nimport type { IRadioOption } from '../../ui/CheckboxGroup';\n\nimport { SUPPORTED_TRANSLATION_LANGUAGES } from '../../../config';\nimport buildClassName from '../../../util/buildClassName';\nimport { partition, unique } from '../../../util/iteratees';\n\nimport useEffectWithPrevDeps from '../../../hooks/useEffectWithPrevDeps';\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Checkbox from '../../ui/Checkbox';\nimport InputText from '../../ui/InputText';\n\nimport styles from './SettingsDoNotTranslate.module.scss';\n\n// https://fasttext.cc/docs/en/language-identification.html\nconst LOCAL_SUPPORTED_DETECTION_LANGUAGES = [\n  'af', 'als', 'am', 'an', 'ar', 'arz', 'as', 'ast', 'av', 'az',\n  'azb', 'ba', 'bar', 'bcl', 'be', 'bg', 'bh', 'bn', 'bo', 'bpy',\n  'br', 'bs', 'bxr', 'ca', 'cbk', 'ce', 'ceb', 'ckb', 'co', 'cs',\n  'cv', 'cy', 'da', 'de', 'diq', 'dsb', 'dty', 'dv', 'el', 'eml',\n  'en', 'eo', 'es', 'et', 'eu', 'fa', 'fi', 'fr', 'frr', 'fy',\n  'ga', 'gd', 'gl', 'gn', 'gom', 'gu', 'gv', 'he', 'hi', 'hif',\n  'hr', 'hsb', 'ht', 'hu', 'hy', 'ia', 'id', 'ie', 'ilo', 'io',\n  'is', 'it', 'ja', 'jbo', 'jv', 'ka', 'kk', 'km', 'kn', 'ko',\n  'krc', 'ku', 'kv', 'kw', 'ky', 'la', 'lb', 'lez', 'li', 'lmo',\n  'lo', 'lrc', 'lt', 'lv', 'mai', 'mg', 'mhr', 'min', 'mk', 'ml',\n  'mn', 'mr', 'mrj', 'ms', 'mt', 'mwl', 'my', 'myv', 'mzn', 'nah',\n  'nap', 'nds', 'ne', 'new', 'nl', 'nn', 'no', 'oc', 'or', 'os',\n  'pa', 'pam', 'pfl', 'pl', 'pms', 'pnb', 'ps', 'pt', 'qu', 'rm',\n  'ro', 'ru', 'rue', 'sa', 'sah', 'sc', 'scn', 'sco', 'sd', 'sh',\n  'si', 'sk', 'sl', 'so', 'sq', 'sr', 'su', 'sv', 'sw', 'ta', 'te',\n  'tg', 'th', 'tk', 'tl', 'tr', 'tt', 'tyv', 'ug', 'uk', 'ur', 'uz',\n  'vec', 'vep', 'vi', 'vls', 'vo', 'wa', 'war', 'wuu', 'xal', 'xmf',\n  'yi', 'yo', 'yue', 'zh',\n];\n\nconst SUPPORTED_LANGUAGES = SUPPORTED_TRANSLATION_LANGUAGES.filter((lang: string) => (\n  LOCAL_SUPPORTED_DETECTION_LANGUAGES.includes(lang)\n));\n\ntype OwnProps = {\n  isActive?: boolean;\n  onReset: () => void;\n};\n\ntype StateProps = Pick<ISettings, 'language' | 'doNotTranslate'>;\n\nconst SettingsDoNotTranslate: FC<OwnProps & StateProps> = ({\n  isActive,\n  language,\n  doNotTranslate,\n  onReset,\n}) => {\n  const { setSettingOption } = getActions();\n\n  const lang = useOldLang();\n  const [displayedOptions, setDisplayedOptions] = useState<IRadioOption[]>([]);\n  const [search, setSearch] = useState('');\n\n  const options: IRadioOption[] = useMemo(() => {\n    return SUPPORTED_LANGUAGES.map((langCode: string) => {\n      const translatedNames = new Intl.DisplayNames([language], { type: 'language' });\n      const translatedName = translatedNames.of(langCode)!;\n\n      const originalNames = new Intl.DisplayNames([langCode], { type: 'language' });\n      const originalName = originalNames.of(langCode)!;\n\n      return {\n        langCode,\n        translatedName,\n        originalName,\n      };\n    }).map(({ langCode, translatedName, originalName }) => ({\n      label: translatedName,\n      subLabel: originalName,\n      value: langCode,\n    }));\n  }, [language]);\n\n  useEffect(() => {\n    if (!isActive) setSearch('');\n  }, [isActive]);\n\n  useEffectWithPrevDeps(([prevIsActive]) => {\n    if (prevIsActive === isActive) return;\n    if (isActive && displayedOptions.length) return;\n\n    const current = options.find((option) => option.value === language);\n    const otherLanguages = options.filter((option) => option.value !== language);\n\n    const [selected, unselected] = partition(otherLanguages, (option) => doNotTranslate.includes(option.value));\n\n    setDisplayedOptions([current!, ...selected, ...unselected]);\n  }, [isActive, doNotTranslate, displayedOptions.length, language, options]);\n\n  const handleChange = useCallback((event: React.ChangeEvent<HTMLInputElement>) => {\n    const { value, checked } = event.currentTarget;\n    let newDoNotTranslate: string[];\n    if (checked) {\n      newDoNotTranslate = unique([...doNotTranslate, value]);\n    } else {\n      newDoNotTranslate = doNotTranslate.filter((v) => v !== value);\n    }\n\n    setSettingOption({\n      doNotTranslate: newDoNotTranslate,\n    });\n  }, [doNotTranslate, setSettingOption]);\n\n  const handleSearch = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setSearch(e.target.value);\n  }, []);\n\n  const filteredDisplayedOptions = useMemo(() => {\n    if (!search.trim()) {\n      return displayedOptions;\n    }\n\n    return displayedOptions.filter((option) => (\n      option.label.toString().toLowerCase().includes(search.toLowerCase())\n      || option.subLabel?.toLowerCase().includes(search.toLowerCase())\n      || option.value.toLowerCase().includes(search.toLowerCase())\n    ));\n  }, [displayedOptions, search]);\n\n  useHistoryBack({\n    isActive,\n    onBack: onReset,\n  });\n\n  return (\n    <div className={buildClassName(styles.root, 'settings-content custom-scroll')}>\n      <div className={buildClassName(styles.item, 'settings-item')}>\n        <InputText\n          key=\"search\"\n          value={search}\n          onChange={handleSearch}\n          placeholder={lang('Search')}\n          teactExperimentControlled\n        />\n        <div className={buildClassName(styles.languages, 'radio-group custom-scroll')}>\n          {filteredDisplayedOptions.map((option) => (\n            <Checkbox\n              className={styles.checkbox}\n              label={option.label}\n              subLabel={option.subLabel}\n              checked={doNotTranslate.includes(option.value)}\n              value={option.value}\n              key={option.value}\n              onChange={handleChange}\n            />\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const {\n      language, doNotTranslate,\n    } = global.settings.byKey;\n\n    return {\n      language,\n      doNotTranslate,\n    };\n  },\n)(SettingsDoNotTranslate));\n","import type { ChangeEvent } from 'react';\nimport type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect, useMemo,\n  useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiUsername } from '../../../api/types';\nimport { ApiMediaFormat } from '../../../api/types';\nimport { ProfileEditProgress } from '../../../types';\n\nimport { PURCHASE_USERNAME, TME_LINK_PREFIX, USERNAME_PURCHASE_ERROR } from '../../../config';\nimport { getChatAvatarHash } from '../../../global/helpers';\nimport { selectTabState, selectUser, selectUserFullInfo } from '../../../global/selectors';\nimport { selectCurrentLimit } from '../../../global/selectors/limits';\nimport { throttle } from '../../../util/schedulers';\nimport renderText from '../../common/helpers/renderText';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useMedia from '../../../hooks/useMedia';\nimport useOldLang from '../../../hooks/useOldLang';\nimport usePrevious from '../../../hooks/usePrevious';\n\nimport ManageUsernames from '../../common/ManageUsernames';\nimport SafeLink from '../../common/SafeLink';\nimport UsernameInput from '../../common/UsernameInput';\nimport AvatarEditable from '../../ui/AvatarEditable';\nimport FloatingActionButton from '../../ui/FloatingActionButton';\nimport InputText from '../../ui/InputText';\nimport Spinner from '../../ui/Spinner';\nimport TextArea from '../../ui/TextArea';\n\ntype OwnProps = {\n  isActive: boolean;\n  onReset: () => void;\n};\n\ntype StateProps = {\n  currentAvatarHash?: string;\n  currentFirstName?: string;\n  currentLastName?: string;\n  currentBio?: string;\n  progress?: ProfileEditProgress;\n  checkedUsername?: string;\n  editUsernameError?: string;\n  isUsernameAvailable?: boolean;\n  maxBioLength: number;\n  usernames?: ApiUsername[];\n};\n\nconst runThrottled = throttle((cb) => cb(), 60000, true);\n\nconst ERROR_FIRST_NAME_MISSING = 'Please provide your first name';\n\nconst SettingsEditProfile: FC<OwnProps & StateProps> = ({\n  isActive,\n  currentAvatarHash,\n  currentFirstName,\n  currentLastName,\n  currentBio,\n  progress,\n  checkedUsername,\n  editUsernameError,\n  isUsernameAvailable,\n  maxBioLength,\n  usernames,\n  onReset,\n}) => {\n  const {\n    loadCurrentUser,\n    updateProfile,\n  } = getActions();\n\n  const lang = useOldLang();\n\n  const firstEditableUsername = useMemo(() => usernames?.find(({ isEditable }) => isEditable), [usernames]);\n  const currentUsername = firstEditableUsername?.username || '';\n  const [isUsernameTouched, setIsUsernameTouched] = useState(false);\n  const [isProfileFieldsTouched, setIsProfileFieldsTouched] = useState(false);\n  const [error, setError] = useState<string | undefined>();\n\n  const [photo, setPhoto] = useState<File | undefined>();\n  const [firstName, setFirstName] = useState(currentFirstName || '');\n  const [lastName, setLastName] = useState(currentLastName || '');\n  const [bio, setBio] = useState(currentBio || '');\n  const [editableUsername, setEditableUsername] = useState<string | false>(currentUsername);\n\n  const currentAvatarBlobUrl = useMedia(currentAvatarHash, false, ApiMediaFormat.BlobUrl);\n\n  const isLoading = progress === ProfileEditProgress.InProgress;\n  const isUsernameError = editableUsername === false;\n\n  const previousIsUsernameAvailable = usePrevious(isUsernameAvailable);\n  const renderingIsUsernameAvailable = isUsernameAvailable ?? previousIsUsernameAvailable;\n  const shouldRenderUsernamesManage = usernames && usernames.length > 1;\n\n  const isSaveButtonShown = useMemo(() => {\n    if (isUsernameError) {\n      return false;\n    }\n\n    return Boolean(photo) || isProfileFieldsTouched || (isUsernameTouched && renderingIsUsernameAvailable === true);\n  }, [isUsernameError, photo, isProfileFieldsTouched, isUsernameTouched, renderingIsUsernameAvailable]);\n\n  useHistoryBack({\n    isActive,\n    onBack: onReset,\n  });\n\n  // Due to the parent Transition, this component never gets unmounted,\n  // that's why we use throttled API call on every update.\n  useEffect(() => {\n    runThrottled(() => {\n      loadCurrentUser();\n    });\n  }, [loadCurrentUser]);\n\n  useEffect(() => {\n    setPhoto(undefined);\n  }, [currentAvatarBlobUrl]);\n\n  useEffect(() => {\n    setFirstName(currentFirstName || '');\n    setLastName(currentLastName || '');\n    setBio(currentBio || '');\n  }, [currentFirstName, currentLastName, currentBio]);\n\n  useEffect(() => {\n    setEditableUsername(currentUsername || '');\n  }, [currentUsername]);\n\n  useEffect(() => {\n    if (progress === ProfileEditProgress.Complete) {\n      setIsProfileFieldsTouched(false);\n      setIsUsernameTouched(false);\n      setError(undefined);\n    }\n  }, [progress]);\n\n  const handlePhotoChange = useCallback((newPhoto: File) => {\n    setPhoto(newPhoto);\n  }, []);\n\n  const handleFirstNameChange = useCallback((e: ChangeEvent<HTMLInputElement>) => {\n    setFirstName(e.target.value);\n    setIsProfileFieldsTouched(true);\n  }, []);\n\n  const handleLastNameChange = useCallback((e: ChangeEvent<HTMLInputElement>) => {\n    setLastName(e.target.value);\n    setIsProfileFieldsTouched(true);\n  }, []);\n\n  const handleBioChange = useCallback((e: ChangeEvent<HTMLTextAreaElement>) => {\n    setBio(e.target.value);\n    setIsProfileFieldsTouched(true);\n  }, []);\n\n  const handleUsernameChange = useCallback((value: string | false) => {\n    setEditableUsername(value);\n    setIsUsernameTouched(currentUsername !== value);\n  }, [currentUsername]);\n\n  const handleProfileSave = useCallback(() => {\n    const trimmedFirstName = firstName.trim();\n    const trimmedLastName = lastName.trim();\n    const trimmedBio = bio.trim();\n\n    if (!editableUsername) return;\n\n    if (!trimmedFirstName.length) {\n      setError(ERROR_FIRST_NAME_MISSING);\n      return;\n    }\n\n    updateProfile({\n      photo,\n      ...(isProfileFieldsTouched && {\n        firstName: trimmedFirstName,\n        lastName: trimmedLastName,\n        bio: trimmedBio,\n      }),\n      ...(isUsernameTouched && {\n        username: editableUsername,\n      }),\n    });\n  }, [\n    photo,\n    firstName, lastName, bio, isProfileFieldsTouched,\n    editableUsername, isUsernameTouched,\n    updateProfile,\n  ]);\n\n  function renderPurchaseLink() {\n    const purchaseInfoLink = `${TME_LINK_PREFIX}${PURCHASE_USERNAME}`;\n\n    return (\n      <p className=\"settings-item-description\" dir={lang.isRtl ? 'rtl' : undefined}>\n        {(lang('lng_username_purchase_available') as string)\n          .replace('{link}', '%PURCHASE_LINK%')\n          .split('%')\n          .map((s) => {\n            return (s === 'PURCHASE_LINK' ? <SafeLink url={purchaseInfoLink} text={`@${PURCHASE_USERNAME}`} /> : s);\n          })}\n      </p>\n    );\n  }\n\n  return (\n    <div className=\"settings-fab-wrapper\">\n      <div className=\"settings-content no-border custom-scroll\">\n        <div className=\"settings-edit-profile settings-item\">\n          <AvatarEditable\n            currentAvatarBlobUrl={currentAvatarBlobUrl}\n            onChange={handlePhotoChange}\n            title=\"Edit your profile photo\"\n            disabled={isLoading}\n          />\n          <InputText\n            value={firstName}\n            onChange={handleFirstNameChange}\n            label={lang('FirstName')}\n            disabled={isLoading}\n            error={error === ERROR_FIRST_NAME_MISSING ? error : undefined}\n          />\n          <InputText\n            value={lastName}\n            onChange={handleLastNameChange}\n            label={lang('LastName')}\n            disabled={isLoading}\n          />\n          <TextArea\n            value={bio}\n            onChange={handleBioChange}\n            label={lang('UserBio')}\n            disabled={isLoading}\n            maxLength={maxBioLength}\n            maxLengthIndicator={maxBioLength ? (maxBioLength - bio.length).toString() : undefined}\n          />\n\n          <p className=\"settings-item-description\" dir={lang.isRtl ? 'rtl' : undefined}>\n            {renderText(lang('lng_settings_about_bio'), ['br', 'simple_markdown'])}\n          </p>\n        </div>\n\n        <div className=\"settings-item\">\n          <h4 className=\"settings-item-header\" dir={lang.isRtl ? 'rtl' : undefined}>{lang('Username')}</h4>\n\n          <UsernameInput\n            currentUsername={currentUsername}\n            isLoading={isLoading}\n            isUsernameAvailable={isUsernameAvailable}\n            checkedUsername={checkedUsername}\n            onChange={handleUsernameChange}\n          />\n\n          {editUsernameError === USERNAME_PURCHASE_ERROR && renderPurchaseLink()}\n          <p className=\"settings-item-description\" dir={lang.isRtl ? 'rtl' : undefined}>\n            {renderText(lang('UsernameHelp'), ['br', 'simple_markdown'])}\n          </p>\n          {editableUsername && (\n            <p className=\"settings-item-description\" dir={lang.isRtl ? 'rtl' : undefined}>\n              {lang('lng_username_link')}<br />\n              <span className=\"username-link\">{TME_LINK_PREFIX}{editableUsername}</span>\n            </p>\n          )}\n        </div>\n\n        {shouldRenderUsernamesManage && (\n          <ManageUsernames\n            usernames={usernames}\n            onEditUsername={setEditableUsername}\n          />\n        )}\n      </div>\n\n      <FloatingActionButton\n        isShown={isSaveButtonShown}\n        onClick={handleProfileSave}\n        disabled={isLoading}\n        ariaLabel={lang('Save')}\n      >\n        {isLoading ? (\n          <Spinner color=\"white\" />\n        ) : (\n          <i className=\"icon icon-check\" />\n        )}\n      </FloatingActionButton>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const { currentUserId } = global;\n    const {\n      progress, isUsernameAvailable, checkedUsername, error: editUsernameError,\n    } = selectTabState(global).profileEdit || {};\n    const currentUser = currentUserId ? selectUser(global, currentUserId) : undefined;\n\n    const maxBioLength = selectCurrentLimit(global, 'aboutLength');\n\n    if (!currentUser) {\n      return {\n        progress,\n        checkedUsername,\n        isUsernameAvailable,\n        editUsernameError,\n        maxBioLength,\n      };\n    }\n\n    const {\n      firstName: currentFirstName,\n      lastName: currentLastName,\n      usernames,\n    } = currentUser;\n    const currentUserFullInfo = currentUserId ? selectUserFullInfo(global, currentUserId) : undefined;\n    const currentAvatarHash = getChatAvatarHash(currentUser);\n\n    return {\n      currentAvatarHash,\n      currentFirstName,\n      currentLastName,\n      currentBio: currentUserFullInfo?.bio,\n      progress,\n      isUsernameAvailable,\n      checkedUsername,\n      editUsernameError,\n      maxBioLength,\n      usernames,\n    };\n  },\n)(SettingsEditProfile));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport { DEBUG_LOG_FILENAME } from '../../../config';\nimport { getDebugLogs } from '../../../util/debugConsole';\nimport download from '../../../util/download';\nimport { IS_ELECTRON } from '../../../util/windowEnvironment';\nimport { LOCAL_TGS_URLS } from '../../common/helpers/animatedAssets';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport AnimatedIcon from '../../common/AnimatedIcon';\nimport Checkbox from '../../ui/Checkbox';\nimport ListItem from '../../ui/ListItem';\n\ntype OwnProps = {\n  isActive?: boolean;\n  onReset: () => void;\n};\n\ntype StateProps = {\n  shouldShowLoginCodeInChatList?: boolean;\n  shouldForceHttpTransport?: boolean;\n  shouldAllowHttpTransport?: boolean;\n  shouldCollectDebugLogs?: boolean;\n  shouldDebugExportedSenders?: boolean;\n};\n\nconst SettingsExperimental: FC<OwnProps & StateProps> = ({\n  isActive,\n  onReset,\n  shouldShowLoginCodeInChatList,\n  shouldForceHttpTransport,\n  shouldAllowHttpTransport,\n  shouldCollectDebugLogs,\n  shouldDebugExportedSenders,\n}) => {\n  const { requestConfetti, setSettingOption } = getActions();\n  const lang = useOldLang();\n\n  const [isAutoUpdateEnabled, setIsAutoUpdateEnabled] = useState(false);\n  useEffect(() => {\n    window.electron?.getIsAutoUpdateEnabled().then(setIsAutoUpdateEnabled);\n  }, []);\n\n  useHistoryBack({\n    isActive,\n    onBack: onReset,\n  });\n\n  const handleDownloadLog = useLastCallback(() => {\n    const file = new File([getDebugLogs()], DEBUG_LOG_FILENAME, { type: 'text/plain' });\n    const url = URL.createObjectURL(file);\n    download(url, DEBUG_LOG_FILENAME);\n  });\n\n  const handleIsAutoUpdateEnabledChange = useCallback((isChecked: boolean) => {\n    window.electron?.setIsAutoUpdateEnabled(isChecked);\n  }, []);\n\n  return (\n    <div className=\"settings-content custom-scroll\">\n      <div className=\"settings-content-header no-border\">\n        <AnimatedIcon\n          tgsUrl={LOCAL_TGS_URLS.Experimental}\n          size={200}\n          className=\"experimental-duck\"\n          nonInteractive\n          noLoop={false}\n        />\n        <p className=\"settings-item-description pt-3\" dir=\"auto\">{lang('lng_settings_experimental_about')}</p>\n      </div>\n      <div className=\"settings-item\">\n        <ListItem\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => requestConfetti({ withStars: true })}\n          icon=\"animations\"\n        >\n          <div className=\"title\">Launch some confetti!</div>\n        </ListItem>\n\n        <Checkbox\n          label=\"Show login code in chat list\"\n          checked={Boolean(shouldShowLoginCodeInChatList)}\n          // eslint-disable-next-line react/jsx-no-bind\n          onCheck={() => setSettingOption({ shouldShowLoginCodeInChatList: !shouldShowLoginCodeInChatList })}\n        />\n\n        <Checkbox\n          label=\"Allow HTTP Transport\"\n          checked={Boolean(shouldAllowHttpTransport)}\n          // eslint-disable-next-line react/jsx-no-bind\n          onCheck={() => setSettingOption({ shouldAllowHttpTransport: !shouldAllowHttpTransport })}\n        />\n\n        <Checkbox\n          label=\"Force HTTP Transport\"\n          disabled={!shouldAllowHttpTransport}\n          checked={Boolean(shouldForceHttpTransport)}\n          // eslint-disable-next-line react/jsx-no-bind\n          onCheck={() => setSettingOption({ shouldForceHttpTransport: !shouldForceHttpTransport })}\n        />\n\n        <Checkbox\n          label={lang('DebugMenuEnableLogs')}\n          checked={Boolean(shouldCollectDebugLogs)}\n          // eslint-disable-next-line react/jsx-no-bind\n          onCheck={() => setSettingOption({ shouldCollectDebugLogs: !shouldCollectDebugLogs })}\n        />\n\n        <Checkbox\n          label=\"Enable exported senders debug\"\n          checked={Boolean(shouldDebugExportedSenders)}\n          // eslint-disable-next-line react/jsx-no-bind\n          onCheck={() => setSettingOption({ shouldDebugExportedSenders: !shouldDebugExportedSenders })}\n        />\n\n        {IS_ELECTRON && (\n          <Checkbox\n            label=\"Enable autoupdates\"\n            checked={Boolean(isAutoUpdateEnabled)}\n            onCheck={handleIsAutoUpdateEnabledChange}\n          />\n        )}\n\n        <ListItem\n          onClick={handleDownloadLog}\n          icon=\"bug\"\n        >\n          <div className=\"title\">Download log</div>\n        </ListItem>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal(\n  (global): StateProps => {\n    return {\n      shouldShowLoginCodeInChatList: global.settings.byKey.shouldShowLoginCodeInChatList,\n      shouldForceHttpTransport: global.settings.byKey.shouldForceHttpTransport,\n      shouldAllowHttpTransport: global.settings.byKey.shouldAllowHttpTransport,\n      shouldCollectDebugLogs: global.settings.byKey.shouldCollectDebugLogs,\n      shouldDebugExportedSenders: global.settings.byKey.shouldDebugExportedSenders,\n    };\n  },\n)(SettingsExperimental));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ISettings, TimeFormat } from '../../../types';\nimport type { IRadioOption } from '../../ui/RadioGroup';\nimport { SettingsScreens } from '../../../types';\n\nimport { pick } from '../../../util/iteratees';\nimport { setTimeFormat } from '../../../util/oldLangProvider';\nimport { getSystemTheme } from '../../../util/systemTheme';\nimport {\n  IS_ANDROID, IS_ELECTRON, IS_IOS, IS_MAC_OS, IS_WINDOWS,\n} from '../../../util/windowEnvironment';\n\nimport useAppLayout from '../../../hooks/useAppLayout';\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Checkbox from '../../ui/Checkbox';\nimport ListItem from '../../ui/ListItem';\nimport RadioGroup from '../../ui/RadioGroup';\nimport RangeSlider from '../../ui/RangeSlider';\n\ntype OwnProps = {\n  isActive?: boolean;\n  onScreenSelect: (screen: SettingsScreens) => void;\n  onReset: () => void;\n};\n\ntype StateProps =\n  Pick<ISettings, (\n    'messageTextSize' |\n    'animationLevel' |\n    'messageSendKeyCombo' |\n    'timeFormat'\n  )> & {\n    theme: ISettings['theme'];\n    shouldUseSystemTheme: boolean;\n  };\n\nconst TIME_FORMAT_OPTIONS: IRadioOption[] = [{\n  label: '12-hour',\n  value: '12h',\n}, {\n  label: '24-hour',\n  value: '24h',\n}];\n\nconst SettingsGeneral: FC<OwnProps & StateProps> = ({\n  isActive,\n  onScreenSelect,\n  onReset,\n  messageTextSize,\n  messageSendKeyCombo,\n  timeFormat,\n  theme,\n  shouldUseSystemTheme,\n}) => {\n  const {\n    setSettingOption,\n  } = getActions();\n\n  const lang = useOldLang();\n\n  const { isMobile } = useAppLayout();\n  const isMobileDevice = isMobile && (IS_IOS || IS_ANDROID);\n\n  const appearanceThemeOptions: IRadioOption[] = [{\n    label: lang('EmptyChat.Appearance.Light'),\n    value: 'light',\n  }, {\n    label: lang('EmptyChat.Appearance.Dark'),\n    value: 'dark',\n  }, {\n    label: lang('EmptyChat.Appearance.System'),\n    value: 'auto',\n  }];\n\n  const keyboardSendOptions = !isMobileDevice ? [\n    { value: 'enter', label: lang('lng_settings_send_enter'), subLabel: 'New line by Shift + Enter' },\n    {\n      value: 'ctrl-enter',\n      label: lang(IS_MAC_OS || IS_IOS ? 'lng_settings_send_cmdenter' : 'lng_settings_send_ctrlenter'),\n      subLabel: 'New line by Enter',\n    },\n  ] : undefined;\n\n  const handleMessageTextSizeChange = useCallback((newSize: number) => {\n    document.documentElement.style.setProperty(\n      '--composer-text-size', `${Math.max(newSize, IS_IOS ? 16 : 15)}px`,\n    );\n    document.documentElement.style.setProperty('--message-meta-height', `${Math.floor(newSize * 1.3125)}px`);\n    document.documentElement.style.setProperty('--message-text-size', `${newSize}px`);\n    document.documentElement.setAttribute('data-message-text-size', newSize.toString());\n\n    setSettingOption({ messageTextSize: newSize });\n  }, [setSettingOption]);\n\n  const handleAppearanceThemeChange = useCallback((value: string) => {\n    const newTheme = value === 'auto' ? getSystemTheme() : value as ISettings['theme'];\n\n    setSettingOption({ theme: newTheme });\n    setSettingOption({ shouldUseSystemTheme: value === 'auto' });\n  }, [setSettingOption]);\n\n  const handleTimeFormatChange = useCallback((newTimeFormat: string) => {\n    setSettingOption({ timeFormat: newTimeFormat as TimeFormat });\n    setSettingOption({ wasTimeFormatSetManually: true });\n\n    setTimeFormat(newTimeFormat as TimeFormat);\n  }, [setSettingOption]);\n\n  const handleMessageSendComboChange = useCallback((newCombo: string) => {\n    setSettingOption({ messageSendKeyCombo: newCombo as ISettings['messageSendKeyCombo'] });\n  }, [setSettingOption]);\n\n  const [isTrayIconEnabled, setIsTrayIconEnabled] = useState(false);\n  useEffect(() => {\n    window.electron?.getIsTrayIconEnabled().then(setIsTrayIconEnabled);\n  }, []);\n\n  const handleIsTrayIconEnabledChange = useCallback((isChecked: boolean) => {\n    window.electron?.setIsTrayIconEnabled(isChecked);\n  }, []);\n\n  useHistoryBack({\n    isActive,\n    onBack: onReset,\n  });\n\n  return (\n    <div className=\"settings-content custom-scroll\">\n      <div className=\"settings-item pt-3\">\n        <h4 className=\"settings-item-header\" dir={lang.isRtl ? 'rtl' : undefined}>{lang('SETTINGS')}</h4>\n\n        <RangeSlider\n          label={lang('TextSize')}\n          min={12}\n          max={20}\n          value={messageTextSize}\n          onChange={handleMessageTextSizeChange}\n        />\n\n        <ListItem\n          icon=\"photo\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => onScreenSelect(SettingsScreens.GeneralChatBackground)}\n        >\n          {lang('ChatBackground')}\n        </ListItem>\n\n        {IS_ELECTRON && IS_WINDOWS && (\n          <Checkbox\n            label={lang('GeneralSettings.StatusBarItem')}\n            checked={Boolean(isTrayIconEnabled)}\n            onCheck={handleIsTrayIconEnabledChange}\n          />\n        )}\n      </div>\n\n      <div className=\"settings-item\">\n        <h4 className=\"settings-item-header\" dir={lang.isRtl ? 'rtl' : undefined}>\n          {lang('Theme')}\n        </h4>\n        <RadioGroup\n          name=\"theme\"\n          options={appearanceThemeOptions}\n          selected={shouldUseSystemTheme ? 'auto' : theme}\n          onChange={handleAppearanceThemeChange}\n        />\n      </div>\n\n      <div className=\"settings-item\">\n        <h4 className=\"settings-item-header\" dir={lang.isRtl ? 'rtl' : undefined}>\n          Time Format\n        </h4>\n        <RadioGroup\n          name=\"timeformat\"\n          options={TIME_FORMAT_OPTIONS}\n          selected={timeFormat}\n          onChange={handleTimeFormatChange}\n        />\n      </div>\n\n      {keyboardSendOptions && (\n        <div className=\"settings-item\">\n          <h4 className=\"settings-item-header\" dir={lang.isRtl ? 'rtl' : undefined}>{lang('VoiceOver.Keyboard')}</h4>\n\n          <RadioGroup\n            name=\"keyboard-send-settings\"\n            options={keyboardSendOptions}\n            onChange={handleMessageSendComboChange}\n            selected={messageSendKeyCombo}\n          />\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const { theme, shouldUseSystemTheme } = global.settings.byKey;\n\n    return {\n      ...pick(global.settings.byKey, [\n        'messageTextSize',\n        'animationLevel',\n        'messageSendKeyCombo',\n        'isSensitiveEnabled',\n        'canChangeSensitive',\n        'timeFormat',\n      ]),\n      theme,\n      shouldUseSystemTheme,\n    };\n  },\n)(SettingsGeneral));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect, useRef,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiWallpaper } from '../../../api/types';\nimport type { ThemeKey } from '../../../types';\nimport { SettingsScreens, UPLOADING_WALLPAPER_SLUG } from '../../../types';\n\nimport { DARK_THEME_PATTERN_COLOR, DEFAULT_PATTERN_COLOR } from '../../../config';\nimport { selectTheme } from '../../../global/selectors';\nimport { getAverageColor, getPatternColor, rgb2hex } from '../../../util/colors';\nimport { validateFiles } from '../../../util/files';\nimport { throttle } from '../../../util/schedulers';\nimport { openSystemFilesDialog } from '../../../util/systemFilesDialog';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Checkbox from '../../ui/Checkbox';\nimport ListItem from '../../ui/ListItem';\nimport Loading from '../../ui/Loading';\nimport WallpaperTile from './WallpaperTile';\n\nimport './SettingsGeneralBackground.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  onScreenSelect: (screen: SettingsScreens) => void;\n  onReset: () => void;\n};\n\ntype StateProps = {\n  background?: string;\n  isBlurred?: boolean;\n  loadedWallpapers?: ApiWallpaper[];\n  theme: ThemeKey;\n};\n\nconst SUPPORTED_TYPES = 'image/jpeg';\n\nconst runThrottled = throttle((cb) => cb(), 60000, true);\n\nconst SettingsGeneralBackground: FC<OwnProps & StateProps> = ({\n  isActive,\n  onScreenSelect,\n  onReset,\n  background,\n  isBlurred,\n  loadedWallpapers,\n  theme,\n}) => {\n  const {\n    loadWallpapers,\n    uploadWallpaper,\n    setThemeSettings,\n  } = getActions();\n\n  const themeRef = useRef<ThemeKey>();\n  themeRef.current = theme;\n  // Due to the parent Transition, this component never gets unmounted,\n  // that's why we use throttled API call on every update.\n  useEffect(() => {\n    runThrottled(() => {\n      loadWallpapers();\n    });\n  }, [loadWallpapers]);\n\n  const handleFileSelect = useCallback((e: Event) => {\n    const { files } = e.target as HTMLInputElement;\n\n    const validatedFiles = validateFiles(files);\n    if (validatedFiles?.length) {\n      uploadWallpaper(validatedFiles[0]);\n    }\n  }, [uploadWallpaper]);\n\n  const handleUploadWallpaper = useCallback(() => {\n    openSystemFilesDialog(SUPPORTED_TYPES, handleFileSelect, true);\n  }, [handleFileSelect]);\n\n  const handleSetColor = useCallback(() => {\n    onScreenSelect(SettingsScreens.GeneralChatBackgroundColor);\n  }, [onScreenSelect]);\n\n  const handleResetToDefault = useCallback(() => {\n    setThemeSettings({\n      theme,\n      background: undefined,\n      backgroundColor: undefined,\n      isBlurred: true,\n      patternColor: theme === 'dark' ? DARK_THEME_PATTERN_COLOR : DEFAULT_PATTERN_COLOR,\n    });\n  }, [setThemeSettings, theme]);\n\n  const handleWallPaperSelect = useCallback((slug: string) => {\n    setThemeSettings({ theme: themeRef.current!, background: slug });\n    const currentWallpaper = loadedWallpapers && loadedWallpapers.find((wallpaper) => wallpaper.slug === slug);\n    if (currentWallpaper?.document.thumbnail) {\n      getAverageColor(currentWallpaper.document.thumbnail.dataUri)\n        .then((color) => {\n          const patternColor = getPatternColor(color);\n          const rgbColor = `#${rgb2hex(color)}`;\n          setThemeSettings({ theme: themeRef.current!, backgroundColor: rgbColor, patternColor });\n        });\n    }\n  }, [loadedWallpapers, setThemeSettings]);\n\n  const handleWallPaperBlurChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setThemeSettings({ theme: themeRef.current!, isBlurred: e.target.checked });\n  }, [setThemeSettings]);\n\n  const lang = useOldLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onReset,\n  });\n\n  const isUploading = loadedWallpapers?.[0] && loadedWallpapers[0].slug === UPLOADING_WALLPAPER_SLUG;\n\n  return (\n    <div className=\"SettingsGeneralBackground settings-content custom-scroll\">\n      <div className=\"settings-item pt-3\">\n        <ListItem\n          icon=\"camera-add\"\n          className=\"mb-0\"\n          disabled={isUploading}\n          onClick={handleUploadWallpaper}\n        >\n          {lang('UploadImage')}\n        </ListItem>\n\n        <ListItem\n          icon=\"colorize\"\n          className=\"mb-0\"\n          onClick={handleSetColor}\n        >\n          {lang('SetColor')}\n        </ListItem>\n\n        <ListItem icon=\"favorite\" onClick={handleResetToDefault}>\n          {lang('ThemeResetToDefaults')}\n        </ListItem>\n\n        <Checkbox\n          label={lang('BackgroundBlurred')}\n          checked={Boolean(isBlurred)}\n          onChange={handleWallPaperBlurChange}\n        />\n      </div>\n\n      {loadedWallpapers ? (\n        <div className=\"settings-wallpapers\">\n          {loadedWallpapers.map((wallpaper) => (\n            <WallpaperTile\n              key={wallpaper.slug}\n              wallpaper={wallpaper}\n              theme={theme}\n              isSelected={background === wallpaper.slug}\n              onClick={handleWallPaperSelect}\n            />\n          ))}\n        </div>\n      ) : (\n        <Loading />\n      )}\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const theme = selectTheme(global);\n    const { background, isBlurred } = global.settings.themes[theme] || {};\n    const { loadedWallpapers } = global.settings;\n\n    return {\n      background,\n      isBlurred,\n      loadedWallpapers,\n      theme,\n    };\n  },\n)(SettingsGeneralBackground));\n","import type { ChangeEvent, MutableRefObject, RefObject } from 'react';\nimport type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ThemeKey } from '../../../types';\nimport type { RealTouchEvent } from '../../../util/captureEvents';\n\nimport { selectTheme } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { captureEvents } from '../../../util/captureEvents';\nimport {\n  getPatternColor, hex2rgb, hsb2rgb, rgb2hex, rgb2hsb,\n} from '../../../util/colors';\nimport { pick } from '../../../util/iteratees';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useHistoryBack from '../../../hooks/useHistoryBack';\n\nimport InputText from '../../ui/InputText';\n\nimport './SettingsGeneralBackgroundColor.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  onReset: () => void;\n};\n\ntype StateProps = {\n  backgroundColor?: string;\n  theme: ThemeKey;\n};\n\ninterface CanvasRects {\n  colorRect: {\n    offsetLeft: number;\n    top: number;\n    width: number;\n    height: number;\n  };\n  hueRect: {\n    offsetLeft: number;\n    width: number;\n  };\n}\n\nconst DEFAULT_HSB = rgb2hsb(hex2rgb('e6ebee'));\nconst PREDEFINED_COLORS = [\n  '#e6ebee', '#b2cee1', '#008dd0', '#c6e7cb', '#c4e1a6', '#60b16e',\n  '#ccd0af', '#a6a997', '#7a7072', '#fdd7af', '#fdb76e', '#dd8851',\n];\n\nconst SettingsGeneralBackground: FC<OwnProps & StateProps> = ({\n  isActive,\n  onReset,\n  theme,\n  backgroundColor,\n}) => {\n  const { setThemeSettings } = getActions();\n\n  const themeRef = useRef<ThemeKey>();\n  themeRef.current = theme;\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const colorPickerRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const huePickerRef = useRef<HTMLDivElement>(null);\n  const isFirstRunRef = useRef(true);\n\n  const [hsb, setHsb] = useState(getInitialHsb(backgroundColor));\n  // Cache for drag handlers\n  const hsbRef = useRef(hsb);\n  useEffect(() => {\n    hsbRef.current = hsb;\n  }, [hsb]);\n\n  const [isDragging, markIsDragging, unmarkIsDragging] = useFlag();\n  const [rgbInput, setRgbInput] = useState('');\n  const [hexInput, setHexInput] = useState('');\n\n  const rectsRef = useRef<CanvasRects>();\n  const colorCtxRef = useRef<CanvasRenderingContext2D>();\n\n  // Setup: cache rects, subscribe for drag events\n  useEffect(() => {\n    // We use `offsetLeft` instead of `left` to support screen transition\n    const colorRect = {\n      offsetLeft: colorPickerRef.current!.offsetLeft,\n      ...pick(colorPickerRef.current!.getBoundingClientRect(), ['top', 'width', 'height']),\n    };\n    const hueRect = {\n      offsetLeft: huePickerRef.current!.offsetLeft,\n      ...pick(huePickerRef.current!.getBoundingClientRect(), ['width']),\n    };\n\n    rectsRef.current = { colorRect, hueRect };\n\n    function handleColorDrag(e: MouseEvent | RealTouchEvent) {\n      const colorPosition = [\n        Math.min(Math.max(0, e.pageX! - colorRect.offsetLeft), colorRect.width - 1),\n        Math.min(Math.max(0, e.pageY! - colorRect.top + containerRef.current!.scrollTop), colorRect.height - 1),\n      ];\n\n      const { huePosition } = hsb2positions(hsbRef.current, rectsRef.current!);\n\n      setHsb(positions2hsb({ colorPosition, huePosition }, rectsRef.current!));\n      markIsDragging();\n\n      return true;\n    }\n\n    captureEvents(colorPickerRef.current!, {\n      onCapture: handleColorDrag,\n      onDrag: handleColorDrag,\n      onRelease: unmarkIsDragging,\n      onClick: unmarkIsDragging,\n      selectorToPreventScroll: '.SettingsGeneralBackgroundColor',\n      withCursor: true,\n    });\n\n    function handleHueDrag(e: MouseEvent | RealTouchEvent) {\n      const { colorPosition } = hsb2positions(hsbRef.current, rectsRef.current!);\n      const huePosition = Math.min(Math.max(0, e.pageX! - hueRect.offsetLeft), hueRect.width - 1);\n\n      setHsb(positions2hsb({ colorPosition, huePosition }, rectsRef.current!));\n      markIsDragging();\n\n      return true;\n    }\n\n    captureEvents(huePickerRef.current!, {\n      onCapture: handleHueDrag,\n      onDrag: handleHueDrag,\n      onRelease: unmarkIsDragging,\n      onClick: unmarkIsDragging,\n      selectorToPreventScroll: '.SettingsGeneralBackgroundColor',\n      withCursor: true,\n    });\n  }, [markIsDragging, unmarkIsDragging]);\n\n  const { colorPosition = [0, 0], huePosition = 0 } = rectsRef.current ? hsb2positions(hsb, rectsRef.current) : {};\n  const hex = rgb2hex(hsb2rgb(hsb));\n  const hue = hsb[0];\n  const hueHex = rgb2hex(hsb2rgb([hue, 1, 1]));\n\n  // Save value and update inputs when HSL changes\n  useEffect(() => {\n    const rgb = hsb2rgb(hsb);\n    const color = `#${rgb2hex(rgb)}`;\n\n    setRgbInput(rgb.join(', '));\n    setHexInput(color);\n\n    if (!isFirstRunRef.current) {\n      const patternColor = getPatternColor(rgb);\n      setThemeSettings({\n        theme: themeRef.current!,\n        background: undefined,\n        backgroundColor: color,\n        patternColor,\n      });\n    }\n    isFirstRunRef.current = false;\n  }, [hsb, setThemeSettings]);\n\n  // Redraw color picker when hue changes\n  useEffect(() => {\n    drawColor(colorPickerRef.current!.firstChild as HTMLCanvasElement, hue, colorCtxRef, rectsRef);\n  }, [hue]);\n\n  // Initially draw hue picker\n  useEffect(() => {\n    drawHue(huePickerRef.current!.firstChild as HTMLCanvasElement);\n  }, []);\n\n  const handleRgbChange = useCallback((e: ChangeEvent<HTMLInputElement>) => {\n    const rgbValue = e.currentTarget.value.replace(/[^\\d, ]/g, '').slice(0, 13);\n\n    if (rgbValue.match(/^\\d{1,3},\\s?\\d{1,3},\\s?\\d{1,3}$/)) {\n      const rgb = rgbValue.split(',').map((channel) => Number(channel.trim())) as [number, number, number];\n      setHsb(rgb2hsb(rgb));\n    }\n\n    e.currentTarget.value = rgbValue;\n  }, []);\n\n  const handleHexChange = useCallback((e: ChangeEvent<HTMLInputElement>) => {\n    const hexValue = e.currentTarget.value.replace(/[^0-9a-fA-F]/g, '').slice(0, 6);\n\n    if (hexValue.match(/^#?[0-9a-fA-F]{6}$/)) {\n      setHsb(rgb2hsb(hex2rgb(hexValue.replace('#', ''))));\n    }\n\n    e.currentTarget.value = hexValue;\n  }, []);\n\n  const handlePredefinedColorClick = useCallback((e: React.MouseEvent<HTMLInputElement>) => {\n    setHsb(rgb2hsb(hex2rgb(e.currentTarget.dataset.color!.replace('#', ''))));\n  }, []);\n\n  const className = buildClassName(\n    'SettingsGeneralBackgroundColor settings-content custom-scroll',\n    isDragging && 'is-dragging',\n  );\n\n  useHistoryBack({\n    isActive,\n    onBack: onReset,\n  });\n\n  return (\n    <div ref={containerRef} className={className}>\n      <div className=\"settings-item pt-3\">\n        <div ref={colorPickerRef} className=\"color-picker\">\n          <canvas />\n          <div\n            className=\"handle\"\n            style={`transform: translate(${colorPosition[0]}px, ${colorPosition[1]}px); background-color: #${hex};`}\n          />\n        </div>\n        <div ref={huePickerRef} className=\"hue-picker\">\n          <canvas />\n          <div\n            className=\"handle\"\n            style={`transform: translateX(${huePosition}px); background-color: #${hueHex};`}\n          />\n        </div>\n        <div className=\"tools\">\n          <InputText value={hexInput} label=\"HEX\" onChange={handleHexChange} />\n          <InputText value={rgbInput} label=\"RGB\" onChange={handleRgbChange} />\n        </div>\n      </div>\n      <div className=\"predefined-colors\">\n        {PREDEFINED_COLORS.map((color) => (\n          <div\n            className={buildClassName('predefined-color', color === `#${hex}` ? 'active' : undefined)}\n            data-color={color}\n            style={`background-color: ${color};`}\n            onClick={handlePredefinedColorClick}\n          />\n        ))}\n      </div>\n    </div>\n  );\n};\n\nfunction getInitialHsb(backgroundColor?: string) {\n  return backgroundColor && backgroundColor.startsWith('#')\n    ? rgb2hsb(hex2rgb(backgroundColor.replace('#', '')))\n    : DEFAULT_HSB;\n}\n\nfunction hsb2positions(hsb: [number, number, number], rects: CanvasRects) {\n  return {\n    colorPosition: [\n      Math.round((hsb[1]) * (rects.colorRect.width - 1)),\n      Math.round((1 - hsb[2]) * (rects.colorRect.height - 1)),\n    ],\n    huePosition: Math.round(hsb[0] * (rects.hueRect.width - 1)),\n  };\n}\n\nfunction positions2hsb(\n  { colorPosition, huePosition }: { colorPosition: number[]; huePosition: number },\n  rects: CanvasRects,\n): [number, number, number] {\n  return [\n    huePosition / (rects.hueRect.width - 1),\n    colorPosition[0] / (rects.colorRect.width - 1),\n    1 - colorPosition[1] / (rects.colorRect.height - 1),\n  ];\n}\n\nfunction drawColor(\n  canvas: HTMLCanvasElement,\n  hue: number,\n  colorCtxRef: MutableRefObject<CanvasRenderingContext2D | undefined>,\n  rectsRef: RefObject<CanvasRects | undefined>,\n) {\n  let w: number;\n  let h: number;\n  let ctx: CanvasRenderingContext2D;\n\n  if (!colorCtxRef.current || !rectsRef.current) {\n    // First run\n    w = canvas.offsetWidth;\n    h = canvas.offsetHeight;\n    ctx = canvas.getContext('2d')!;\n\n    canvas.width = w;\n    canvas.height = h;\n\n    colorCtxRef.current = ctx;\n  } else {\n    w = rectsRef.current.colorRect.width;\n    h = rectsRef.current.colorRect.height;\n    ctx = colorCtxRef.current;\n  }\n\n  const imgData = ctx!.createImageData(w, h);\n  const pixels = imgData.data;\n  const col = hsb2rgb([hue, 1, 1]);\n\n  let index = 0;\n\n  for (let y = 0; y < h; y++) {\n    const perY = 1 - y / (h - 1);\n    const st = [255 * perY, 255 * perY, 255 * perY];\n    const ed = [col[0] * perY, col[1] * perY, col[2] * perY];\n    for (let x = 0; x < w; x++) {\n      const perX = x / (w - 1);\n      pixels[index++] = st[0] + (ed[0] - st[0]) * perX;\n      pixels[index++] = st[1] + (ed[1] - st[1]) * perX;\n      pixels[index++] = st[2] + (ed[2] - st[2]) * perX;\n      pixels[index++] = 255;\n    }\n  }\n\n  ctx!.putImageData(imgData, 0, 0);\n}\n\nfunction drawHue(canvas: HTMLCanvasElement) {\n  const w = canvas.offsetWidth;\n  const h = 1;\n  canvas.width = w;\n  canvas.height = h;\n  const ctx = canvas.getContext('2d')!;\n\n  const imgData = ctx.createImageData(w, h);\n  const pixels = imgData.data;\n\n  let index = 0;\n\n  for (let x = 0; x < w; x++) {\n    const hue = x / (w - 1);\n    const rgb = hsb2rgb([hue, 1, 1]);\n    /* eslint-disable prefer-destructuring */\n    pixels[index++] = rgb[0];\n    pixels[index++] = rgb[1];\n    pixels[index++] = rgb[2];\n    /* eslint-enable prefer-destructuring */\n    pixels[index++] = 255;\n  }\n\n  ctx.putImageData(imgData, 0, 0);\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const theme = selectTheme(global);\n    const { backgroundColor } = global.settings.themes[theme] || {};\n    return {\n      backgroundColor,\n      theme,\n    };\n  },\n)(SettingsGeneralBackground));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport { SettingsScreens } from '../../../types';\n\nimport useAppLayout from '../../../hooks/useAppLayout';\nimport useMultiClick from '../../../hooks/useMultiClick';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Button from '../../ui/Button';\nimport ConfirmDialog from '../../ui/ConfirmDialog';\nimport DropdownMenu from '../../ui/DropdownMenu';\nimport MenuItem from '../../ui/MenuItem';\n\ntype OwnProps = {\n  currentScreen: SettingsScreens;\n  editedFolderId?: number;\n  onReset: () => void;\n  onScreenSelect: (screen: SettingsScreens) => void;\n};\n\nconst SettingsHeader: FC<OwnProps> = ({\n  currentScreen,\n  editedFolderId,\n  onReset,\n  onScreenSelect,\n}) => {\n  const {\n    signOut,\n    openDeleteChatFolderModal,\n  } = getActions();\n\n  const { isMobile } = useAppLayout();\n  const [isSignOutDialogOpen, setIsSignOutDialogOpen] = useState(false);\n\n  const handleMultiClick = useMultiClick(5, () => {\n    onScreenSelect(SettingsScreens.Experimental);\n  });\n\n  const openSignOutConfirmation = useCallback(() => {\n    setIsSignOutDialogOpen(true);\n  }, []);\n\n  const closeSignOutConfirmation = useCallback(() => {\n    setIsSignOutDialogOpen(false);\n  }, []);\n\n  const openDeleteFolderConfirmation = useCallback(() => {\n    if (!editedFolderId) return;\n\n    openDeleteChatFolderModal({ folderId: editedFolderId });\n  }, [editedFolderId, openDeleteChatFolderModal]);\n\n  const handleSignOutMessage = useCallback(() => {\n    closeSignOutConfirmation();\n    signOut({ forceInitApi: true });\n  }, [closeSignOutConfirmation, signOut]);\n\n  const SettingsMenuButton: FC<{ onTrigger: () => void; isOpen?: boolean }> = useMemo(() => {\n    return ({ onTrigger, isOpen }) => (\n      <Button\n        round\n        ripple={!isMobile}\n        size=\"smaller\"\n        color=\"translucent\"\n        className={isOpen ? 'active' : ''}\n        onClick={onTrigger}\n        ariaLabel=\"More actions\"\n      >\n        <i className=\"icon icon-more\" />\n      </Button>\n    );\n  }, [isMobile]);\n\n  const lang = useOldLang();\n\n  function renderHeaderContent() {\n    switch (currentScreen) {\n      case SettingsScreens.EditProfile:\n        return <h3>{lang('lng_settings_information')}</h3>;\n      case SettingsScreens.General:\n        return <h3>{lang('General')}</h3>;\n      case SettingsScreens.QuickReaction:\n        return <h3>{lang('DoubleTapSetting')}</h3>;\n      case SettingsScreens.CustomEmoji:\n        return <h3>{lang('Emoji')}</h3>;\n      case SettingsScreens.Notifications:\n        return <h3>{lang('Notifications')}</h3>;\n      case SettingsScreens.DataStorage:\n        return <h3>{lang('DataSettings')}</h3>;\n      case SettingsScreens.Privacy:\n        return <h3>{lang('PrivacySettings')}</h3>;\n      case SettingsScreens.Language:\n        return <h3>{lang('Language')}</h3>;\n      case SettingsScreens.DoNotTranslate:\n        return <h3>{lang('DoNotTranslate')}</h3>;\n      case SettingsScreens.Stickers:\n        return <h3>{lang('StickersName')}</h3>;\n      case SettingsScreens.Experimental:\n        return <h3>{lang('lng_settings_experimental')}</h3>;\n\n      case SettingsScreens.GeneralChatBackground:\n        return <h3>{lang('ChatBackground')}</h3>;\n      case SettingsScreens.GeneralChatBackgroundColor:\n        return <h3>{lang('SetColor')}</h3>;\n\n      case SettingsScreens.PrivacyPhoneNumber:\n        return <h3>{lang('PrivacyPhone')}</h3>;\n      case SettingsScreens.PrivacyLastSeen:\n        return <h3>{lang('PrivacyLastSeen')}</h3>;\n      case SettingsScreens.PrivacyProfilePhoto:\n        return <h3>{lang('Privacy.ProfilePhoto')}</h3>;\n      case SettingsScreens.PrivacyBio:\n        return <h3>{lang('PrivacyBio')}</h3>;\n      case SettingsScreens.PrivacyBirthday:\n        return <h3>{lang('PrivacyBirthday')}</h3>;\n      case SettingsScreens.PrivacyForwarding:\n        return <h3>{lang('PrivacyForwards')}</h3>;\n      case SettingsScreens.PrivacyVoiceMessages:\n        return <h3>{lang('PrivacyVoiceMessages')}</h3>;\n      case SettingsScreens.PrivacyMessages:\n        return <h3>{lang('PrivacyMessages')}</h3>;\n      case SettingsScreens.PrivacyGroupChats:\n        return <h3>{lang('AutodownloadGroupChats')}</h3>;\n      case SettingsScreens.PrivacyPhoneCall:\n        return <h3>{lang('Calls')}</h3>;\n\n      case SettingsScreens.PrivacyPhoneNumberAllowedContacts:\n      case SettingsScreens.PrivacyLastSeenAllowedContacts:\n      case SettingsScreens.PrivacyProfilePhotoAllowedContacts:\n      case SettingsScreens.PrivacyBioAllowedContacts:\n      case SettingsScreens.PrivacyBirthdayAllowedContacts:\n      case SettingsScreens.PrivacyForwardingAllowedContacts:\n      case SettingsScreens.PrivacyVoiceMessagesAllowedContacts:\n      case SettingsScreens.PrivacyGroupChatsAllowedContacts:\n      case SettingsScreens.PrivacyPhoneCallAllowedContacts:\n      case SettingsScreens.PrivacyPhoneP2PAllowedContacts:\n        return <h3>{lang('AlwaysShareWith')}</h3>;\n      case SettingsScreens.PrivacyPhoneNumberDeniedContacts:\n      case SettingsScreens.PrivacyLastSeenDeniedContacts:\n      case SettingsScreens.PrivacyProfilePhotoDeniedContacts:\n      case SettingsScreens.PrivacyBioDeniedContacts:\n      case SettingsScreens.PrivacyBirthdayDeniedContacts:\n      case SettingsScreens.PrivacyForwardingDeniedContacts:\n      case SettingsScreens.PrivacyVoiceMessagesDeniedContacts:\n      case SettingsScreens.PrivacyGroupChatsDeniedContacts:\n      case SettingsScreens.PrivacyPhoneCallDeniedContacts:\n      case SettingsScreens.PrivacyPhoneP2PDeniedContacts:\n        return <h3>{lang('NeverShareWith')}</h3>;\n\n      case SettingsScreens.Performance:\n        return <h3>{lang('Animations and Performance')}</h3>;\n\n      case SettingsScreens.ActiveSessions:\n        return <h3>{lang('SessionsTitle')}</h3>;\n      case SettingsScreens.ActiveWebsites:\n        return <h3>{lang('OtherWebSessions')}</h3>;\n      case SettingsScreens.PrivacyBlockedUsers:\n        return <h3>{lang('BlockedUsers')}</h3>;\n\n      case SettingsScreens.TwoFaDisabled:\n      case SettingsScreens.TwoFaEnabled:\n        return <h3>{lang('TwoStepVerification')}</h3>;\n      case SettingsScreens.TwoFaNewPassword:\n      case SettingsScreens.TwoFaChangePasswordNew:\n      case SettingsScreens.TwoFaChangePasswordConfirm:\n        return <h3>{lang('PleaseEnterCurrentPassword')}</h3>;\n      case SettingsScreens.TwoFaNewPasswordConfirm:\n        return <h3>{lang('PleaseReEnterPassword')}</h3>;\n      case SettingsScreens.TwoFaNewPasswordHint:\n      case SettingsScreens.TwoFaChangePasswordHint:\n        return <h3>{lang('PasswordHint')}</h3>;\n      case SettingsScreens.TwoFaNewPasswordEmail:\n      case SettingsScreens.TwoFaRecoveryEmail:\n        return <h3>{lang('RecoveryEmailTitle')}</h3>;\n      case SettingsScreens.TwoFaNewPasswordEmailCode:\n      case SettingsScreens.TwoFaRecoveryEmailCode:\n        return <h3>Recovery Email Code</h3>;\n      case SettingsScreens.TwoFaCongratulations:\n        return <h3>{lang('TwoStepVerificationPasswordSet')}</h3>;\n      case SettingsScreens.TwoFaChangePasswordCurrent:\n      case SettingsScreens.TwoFaTurnOff:\n      case SettingsScreens.TwoFaRecoveryEmailCurrentPassword:\n        return <h3>{lang('PleaseEnterCurrentPassword')}</h3>;\n\n      case SettingsScreens.PasscodeDisabled:\n      case SettingsScreens.PasscodeEnabled:\n      case SettingsScreens.PasscodeNewPasscode:\n      case SettingsScreens.PasscodeNewPasscodeConfirm:\n      case SettingsScreens.PasscodeCongratulations:\n        return <h3>{lang('Passcode')}</h3>;\n\n      case SettingsScreens.PasscodeTurnOff:\n        return <h3>{lang('PasscodeController.Disable.Title')}</h3>;\n\n      case SettingsScreens.PasscodeChangePasscodeCurrent:\n      case SettingsScreens.PasscodeChangePasscodeNew:\n        return <h3>{lang('PasscodeController.Change.Title')}</h3>;\n\n      case SettingsScreens.PasscodeChangePasscodeConfirm:\n        return <h3>{lang('PasscodeController.ReEnterPasscode.Placeholder')}</h3>;\n\n      case SettingsScreens.Folders:\n        return <h3>{lang('Filters')}</h3>;\n      case SettingsScreens.FoldersCreateFolder:\n        return <h3>{lang('FilterNew')}</h3>;\n      case SettingsScreens.FoldersShare:\n        return <h3>{lang('FolderLinkScreen.Title')}</h3>;\n      case SettingsScreens.FoldersEditFolder:\n      case SettingsScreens.FoldersEditFolderFromChatList:\n      case SettingsScreens.FoldersEditFolderInvites:\n        return (\n          <div className=\"settings-main-header\">\n            <h3>{lang('FilterEdit')}</h3>\n            {Boolean(editedFolderId) && (\n              <DropdownMenu\n                className=\"settings-more-menu\"\n                trigger={SettingsMenuButton}\n                positionX=\"right\"\n              >\n                <MenuItem icon=\"delete\" destructive onClick={openDeleteFolderConfirmation}>\n                  {lang('Delete')}\n                </MenuItem>\n              </DropdownMenu>\n            )}\n          </div>\n        );\n      case SettingsScreens.FoldersIncludedChats:\n      case SettingsScreens.FoldersIncludedChatsFromChatList:\n      case SettingsScreens.FoldersExcludedChats:\n      case SettingsScreens.FoldersExcludedChatsFromChatList:\n        return (\n          <h3>\n            {lang(\n              currentScreen === SettingsScreens.FoldersIncludedChats\n                  || currentScreen === SettingsScreens.FoldersIncludedChatsFromChatList\n                ? 'FilterInclude' : 'FilterExclude',\n            )}\n          </h3>\n        );\n      default:\n        return (\n          <div className=\"settings-main-header\">\n            {/* eslint-disable-next-line jsx-a11y/no-noninteractive-element-interactions */}\n            <h3 onClick={handleMultiClick}>\n              {lang('SETTINGS')}\n            </h3>\n\n            <Button\n              round\n              ripple={!isMobile}\n              size=\"smaller\"\n              color=\"translucent\"\n              // eslint-disable-next-line react/jsx-no-bind\n              onClick={() => onScreenSelect(SettingsScreens.EditProfile)}\n              ariaLabel={lang('lng_settings_information')}\n            >\n              <i className=\"icon icon-edit\" />\n            </Button>\n            <DropdownMenu\n              className=\"settings-more-menu\"\n              trigger={SettingsMenuButton}\n              positionX=\"right\"\n            >\n              <MenuItem icon=\"logout\" onClick={openSignOutConfirmation}>{lang('LogOutTitle')}</MenuItem>\n            </DropdownMenu>\n          </div>\n        );\n    }\n  }\n\n  return (\n    <div className=\"left-header\">\n      <Button\n        round\n        size=\"smaller\"\n        color=\"translucent\"\n        onClick={onReset}\n        ariaLabel={lang('AccDescrGoBack')}\n      >\n        <i className=\"icon icon-arrow-left\" />\n      </Button>\n      {renderHeaderContent()}\n      <ConfirmDialog\n        isOpen={isSignOutDialogOpen}\n        onClose={closeSignOutConfirmation}\n        text={lang('lng_sure_logout')}\n        confirmLabel={lang('AccountSettings.Logout')}\n        confirmHandler={handleSignOutMessage}\n        confirmIsDestructive\n      />\n    </div>\n  );\n};\n\nexport default memo(SettingsHeader);\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiLanguage } from '../../../api/types';\nimport type { ISettings, LangCode } from '../../../types';\nimport { SettingsScreens } from '../../../types';\n\nimport { selectIsCurrentUserPremium } from '../../../global/selectors';\nimport { oldSetLanguage } from '../../../util/oldLangProvider';\nimport { IS_TRANSLATION_SUPPORTED } from '../../../util/windowEnvironment';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Checkbox from '../../ui/Checkbox';\nimport ListItem from '../../ui/ListItem';\nimport Loading from '../../ui/Loading';\nimport RadioGroup from '../../ui/RadioGroup';\n\ntype OwnProps = {\n  isActive?: boolean;\n  onReset: () => void;\n  onScreenSelect: (screen: SettingsScreens) => void;\n};\n\ntype StateProps = {\n  isCurrentUserPremium: boolean;\n} & Pick<ISettings, 'languages' | 'language' | 'canTranslate' | 'canTranslateChats' | 'doNotTranslate'>;\n\nconst SettingsLanguage: FC<OwnProps & StateProps> = ({\n  isActive,\n  isCurrentUserPremium,\n  languages,\n  language,\n  canTranslate,\n  canTranslateChats,\n  doNotTranslate,\n  onScreenSelect,\n  onReset,\n}) => {\n  const {\n    loadLanguages,\n    loadAttachBots,\n    setSettingOption,\n    openPremiumModal,\n  } = getActions();\n\n  const [selectedLanguage, setSelectedLanguage] = useState<string>(language);\n  const [isLoading, markIsLoading, unmarkIsLoading] = useFlag();\n\n  const canTranslateChatsEnabled = isCurrentUserPremium && canTranslateChats;\n\n  const lang = useOldLang();\n\n  useEffect(() => {\n    if (!languages?.length) {\n      loadLanguages();\n    }\n  }, [languages]);\n\n  const handleChange = useLastCallback((langCode: string) => {\n    setSelectedLanguage(langCode);\n    markIsLoading();\n\n    void oldSetLanguage(langCode as LangCode, () => {\n      unmarkIsLoading();\n\n      setSettingOption({ language: langCode as LangCode });\n\n      loadAttachBots(); // Should be refetched every language change\n    });\n  });\n\n  const options = useMemo(() => {\n    return languages ? buildOptions(languages) : undefined;\n  }, [languages]);\n\n  const handleShouldTranslateChange = useLastCallback((newValue: boolean) => {\n    setSettingOption({ canTranslate: newValue });\n  });\n\n  const handleShouldTranslateChatsChange = useLastCallback((newValue: boolean) => {\n    setSettingOption({ canTranslateChats: newValue });\n  });\n\n  const handleShouldTranslateChatsClick = useLastCallback(() => {\n    if (!isCurrentUserPremium) {\n      openPremiumModal({\n        initialSection: 'translations',\n      });\n    }\n  });\n\n  const doNotTranslateText = useMemo(() => {\n    if (!IS_TRANSLATION_SUPPORTED || !doNotTranslate.length) {\n      return undefined;\n    }\n\n    if (doNotTranslate.length === 1) {\n      const originalNames = new Intl.DisplayNames([language], { type: 'language' });\n      return originalNames.of(doNotTranslate[0])!;\n    }\n\n    return lang('Languages', doNotTranslate.length);\n  }, [doNotTranslate, lang, language]);\n\n  const handleDoNotSelectOpen = useLastCallback(() => {\n    onScreenSelect(SettingsScreens.DoNotTranslate);\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: onReset,\n  });\n\n  return (\n    <div className=\"settings-content settings-language custom-scroll\">\n      {IS_TRANSLATION_SUPPORTED && (\n        <div className=\"settings-item\">\n          <Checkbox\n            label={lang('ShowTranslateButton')}\n            checked={canTranslate}\n            onCheck={handleShouldTranslateChange}\n          />\n          <Checkbox\n            className=\"pb-2\"\n            label={lang('ShowTranslateChatButton')}\n            checked={canTranslateChatsEnabled}\n            disabled={!isCurrentUserPremium}\n            rightIcon={!isCurrentUserPremium ? 'lock' : undefined}\n            onClickLabel={handleShouldTranslateChatsClick}\n            onCheck={handleShouldTranslateChatsChange}\n          />\n          {(canTranslate || canTranslateChatsEnabled) && (\n            <ListItem\n              onClick={handleDoNotSelectOpen}\n            >\n              {lang('DoNotTranslate')}\n              <span className=\"settings-item__current-value\">{doNotTranslateText}</span>\n            </ListItem>\n          )}\n          <p className=\"settings-item-description mb-0 mt-1\">\n            {lang('lng_translate_settings_about')}\n          </p>\n        </div>\n      )}\n      <div className=\"settings-item\">\n        <h4 className=\"settings-item-header mb-4\">{lang('Localization.InterfaceLanguage')}</h4>\n        {options ? (\n          <RadioGroup\n            name=\"language-settings\"\n            options={options}\n            selected={selectedLanguage}\n            loadingOption={isLoading ? selectedLanguage : undefined}\n            onChange={handleChange}\n          />\n        ) : (\n          <Loading />\n        )}\n      </div>\n    </div>\n  );\n};\n\nfunction buildOptions(languages: ApiLanguage[]) {\n  const currentLangCode = (window.navigator.language || 'en').toLowerCase();\n  const shortLangCode = currentLangCode.substr(0, 2);\n\n  return languages.map(({ langCode, nativeName, name }) => ({\n    value: langCode,\n    label: nativeName,\n    subLabel: name,\n  })).sort((a) => {\n    return currentLangCode && (a.value === currentLangCode || a.value === shortLangCode) ? -1 : 0;\n  });\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const {\n      language, languages, canTranslate, canTranslateChats, doNotTranslate,\n    } = global.settings.byKey;\n\n    const isCurrentUserPremium = selectIsCurrentUserPremium(global);\n\n    return {\n      isCurrentUserPremium,\n      languages,\n      language,\n      canTranslate,\n      canTranslateChats,\n      doNotTranslate,\n    };\n  },\n)(SettingsLanguage));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useEffect } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport { SettingsScreens } from '../../../types';\n\nimport { FAQ_URL, PRIVACY_URL } from '../../../config';\nimport {\n  selectIsGiveawayGiftsPurchaseAvailable,\n  selectIsPremiumPurchaseBlocked,\n} from '../../../global/selectors';\nimport { formatInteger } from '../../../util/textFormat';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport StarIcon from '../../common/icons/StarIcon';\nimport ChatExtra from '../../common/profile/ChatExtra';\nimport ProfileInfo from '../../common/ProfileInfo';\nimport ConfirmDialog from '../../ui/ConfirmDialog';\nimport ListItem from '../../ui/ListItem';\n\ntype OwnProps = {\n  isActive?: boolean;\n  onScreenSelect: (screen: SettingsScreens) => void;\n  onReset: () => void;\n};\n\ntype StateProps = {\n  sessionCount: number;\n  currentUserId?: string;\n  canBuyPremium?: boolean;\n  isGiveawayAvailable?: boolean;\n  starsBalance?: number;\n  shouldDisplayStars?: boolean;\n};\n\nconst SettingsMain: FC<OwnProps & StateProps> = ({\n  isActive,\n  currentUserId,\n  sessionCount,\n  canBuyPremium,\n  isGiveawayAvailable,\n  starsBalance,\n  shouldDisplayStars,\n  onScreenSelect,\n  onReset,\n}) => {\n  const {\n    loadProfilePhotos,\n    openPremiumModal,\n    openSupportChat,\n    openUrl,\n    openPremiumGiftingModal,\n    openStarsBalanceModal,\n  } = getActions();\n\n  const [isSupportDialogOpen, openSupportDialog, closeSupportDialog] = useFlag(false);\n\n  const lang = useOldLang();\n\n  useEffect(() => {\n    if (currentUserId) {\n      loadProfilePhotos({ profileId: currentUserId });\n    }\n  }, [currentUserId, loadProfilePhotos]);\n\n  useHistoryBack({\n    isActive,\n    onBack: onReset,\n  });\n\n  const handleOpenSupport = useLastCallback(() => {\n    openSupportChat();\n    closeSupportDialog();\n  });\n\n  return (\n    <div className=\"settings-content custom-scroll\">\n      <div className=\"settings-main-menu\">\n        {currentUserId && (\n          <ProfileInfo\n            userId={currentUserId}\n            canPlayVideo={Boolean(isActive)}\n            forceShowSelf\n          />\n        )}\n        {currentUserId && (\n          <ChatExtra\n            chatOrUserId={currentUserId}\n            isInSettings\n          />\n        )}\n        <ListItem\n          icon=\"settings\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => onScreenSelect(SettingsScreens.General)}\n        >\n          {lang('Telegram.GeneralSettingsViewController')}\n        </ListItem>\n        <ListItem\n          icon=\"animations\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => onScreenSelect(SettingsScreens.Performance)}\n        >\n          {lang('Animations and Performance')}\n        </ListItem>\n        <ListItem\n          icon=\"unmute\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => onScreenSelect(SettingsScreens.Notifications)}\n        >\n          {lang('Notifications')}\n        </ListItem>\n        <ListItem\n          icon=\"data\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => onScreenSelect(SettingsScreens.DataStorage)}\n        >\n          {lang('DataSettings')}\n        </ListItem>\n        <ListItem\n          icon=\"lock\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => onScreenSelect(SettingsScreens.Privacy)}\n        >\n          {lang('PrivacySettings')}\n        </ListItem>\n        <ListItem\n          icon=\"folder\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => onScreenSelect(SettingsScreens.Folders)}\n        >\n          {lang('Filters')}\n        </ListItem>\n        <ListItem\n          icon=\"active-sessions\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => onScreenSelect(SettingsScreens.ActiveSessions)}\n        >\n          {lang('SessionsTitle')}\n          {sessionCount > 0 && (<span className=\"settings-item__current-value\">{sessionCount}</span>)}\n        </ListItem>\n        <ListItem\n          icon=\"language\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => onScreenSelect(SettingsScreens.Language)}\n        >\n          {lang('Language')}\n          <span className=\"settings-item__current-value\">{lang.langName}</span>\n        </ListItem>\n        <ListItem\n          icon=\"stickers\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => onScreenSelect(SettingsScreens.Stickers)}\n        >\n          {lang('StickersName')}\n        </ListItem>\n      </div>\n      <div className=\"settings-main-menu\">\n        {canBuyPremium && (\n          <ListItem\n            leftElement={<StarIcon className=\"icon\" type=\"premium\" size=\"big\" />}\n            className=\"settings-main-menu-star\"\n            // eslint-disable-next-line react/jsx-no-bind\n            onClick={() => openPremiumModal()}\n          >\n            {lang('TelegramPremium')}\n          </ListItem>\n        )}\n        {shouldDisplayStars && (\n          <ListItem\n            leftElement={<StarIcon className=\"icon\" type=\"gold\" size=\"big\" />}\n            className=\"settings-main-menu-star\"\n            // eslint-disable-next-line react/jsx-no-bind\n            onClick={() => openStarsBalanceModal({})}\n          >\n            {lang('MenuTelegramStars')}\n            {Boolean(starsBalance) && (\n              <span className=\"settings-item__current-value\">{formatInteger(starsBalance)}</span>\n            )}\n          </ListItem>\n        )}\n        {isGiveawayAvailable && (\n          <ListItem\n            icon=\"gift\"\n            className=\"settings-main-menu-star\"\n            // eslint-disable-next-line react/jsx-no-bind\n            onClick={() => openPremiumGiftingModal()}\n          >\n            {lang('GiftPremiumGifting')}\n          </ListItem>\n        )}\n      </div>\n      <div className=\"settings-main-menu\">\n        <ListItem\n          icon=\"ask-support\"\n          onClick={openSupportDialog}\n        >\n          {lang('AskAQuestion')}\n        </ListItem>\n        <ListItem\n          icon=\"help\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => openUrl({ url: FAQ_URL })}\n        >\n          {lang('TelegramFaq')}\n        </ListItem>\n        <ListItem\n          icon=\"privacy-policy\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => openUrl({ url: PRIVACY_URL })}\n        >\n          {lang('PrivacyPolicy')}\n        </ListItem>\n      </div>\n      <ConfirmDialog\n        isOpen={isSupportDialogOpen}\n        confirmLabel={lang('lng_settings_ask_ok')}\n        title={lang('AskAQuestion')}\n        text={lang('lng_settings_ask_sure')}\n        confirmHandler={handleOpenSupport}\n        onClose={closeSupportDialog}\n      />\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const { currentUserId } = global;\n    const isGiveawayAvailable = selectIsGiveawayGiftsPurchaseAvailable(global);\n    const starsBalance = global.stars?.balance;\n    const shouldDisplayStars = Boolean(global.stars?.history?.all?.transactions.length);\n\n    return {\n      sessionCount: global.activeSessions.orderedHashes.length,\n      currentUserId,\n      canBuyPremium: !selectIsPremiumPurchaseBlocked(global),\n      isGiveawayAvailable,\n      starsBalance,\n      shouldDisplayStars,\n    };\n  },\n)(SettingsMain));\n","import type { ChangeEvent } from 'react';\nimport type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useCallback, useEffect } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport {\n  checkIfNotificationsSupported,\n  checkIfOfflinePushFailed,\n  playNotifySound,\n} from '../../../util/notifications';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useOldLang from '../../../hooks/useOldLang';\nimport useRunDebounced from '../../../hooks/useRunDebounced';\n\nimport Checkbox from '../../ui/Checkbox';\nimport RangeSlider from '../../ui/RangeSlider';\n\ntype OwnProps = {\n  isActive?: boolean;\n  onReset: () => void;\n};\n\ntype StateProps = {\n  hasPrivateChatsNotifications: boolean;\n  hasPrivateChatsMessagePreview: boolean;\n  hasGroupNotifications: boolean;\n  hasGroupMessagePreview: boolean;\n  hasBroadcastNotifications: boolean;\n  hasBroadcastMessagePreview: boolean;\n  hasContactJoinedNotifications: boolean;\n  hasWebNotifications: boolean;\n  hasPushNotifications: boolean;\n  notificationSoundVolume: number;\n};\n\nconst SettingsNotifications: FC<OwnProps & StateProps> = ({\n  isActive,\n  onReset,\n  hasPrivateChatsNotifications,\n  hasPrivateChatsMessagePreview,\n  hasGroupNotifications,\n  hasGroupMessagePreview,\n  hasBroadcastNotifications,\n  hasBroadcastMessagePreview,\n  hasContactJoinedNotifications,\n  hasPushNotifications,\n  hasWebNotifications,\n  notificationSoundVolume,\n}) => {\n  const {\n    loadNotificationSettings,\n    updateContactSignUpNotification,\n    updateNotificationSettings,\n    updateWebNotificationSettings,\n  } = getActions();\n\n  useEffect(() => {\n    loadNotificationSettings();\n  }, [loadNotificationSettings]);\n\n  const runDebounced = useRunDebounced(500, true);\n\n  const areNotificationsSupported = checkIfNotificationsSupported();\n  const areOfflineNotificationsSupported = areNotificationsSupported && !checkIfOfflinePushFailed();\n\n  const handleSettingsChange = useCallback((\n    e: ChangeEvent<HTMLInputElement>,\n    peerType: 'contact' | 'group' | 'broadcast',\n    setting: 'silent' | 'showPreviews',\n  ) => {\n    const currentIsSilent = peerType === 'contact'\n      ? !hasPrivateChatsNotifications\n      : !(peerType === 'group' ? hasGroupNotifications : hasBroadcastNotifications);\n    const currentShouldShowPreviews = peerType === 'contact'\n      ? hasPrivateChatsMessagePreview\n      : (peerType === 'group' ? hasGroupMessagePreview : hasBroadcastMessagePreview);\n\n    updateNotificationSettings({\n      peerType,\n      ...(setting === 'silent' && { isSilent: !e.target.checked, shouldShowPreviews: currentShouldShowPreviews }),\n      ...(setting === 'showPreviews' && { shouldShowPreviews: e.target.checked, isSilent: currentIsSilent }),\n    });\n  }, [\n    hasBroadcastMessagePreview, hasBroadcastNotifications,\n    hasGroupMessagePreview, hasGroupNotifications,\n    hasPrivateChatsMessagePreview, hasPrivateChatsNotifications,\n    updateNotificationSettings,\n  ]);\n\n  const handleWebNotificationsChange = useCallback((e: ChangeEvent<HTMLInputElement>) => {\n    const isEnabled = e.target.checked;\n    updateWebNotificationSettings({\n      hasWebNotifications: isEnabled,\n      ...(!isEnabled && { hasPushNotifications: false }),\n    });\n  }, [updateWebNotificationSettings]);\n\n  const handlePushNotificationsChange = useCallback((e: ChangeEvent<HTMLInputElement>) => {\n    updateWebNotificationSettings({\n      hasPushNotifications: e.target.checked,\n    });\n  }, [updateWebNotificationSettings]);\n\n  const handlePrivateChatsNotificationsChange = useCallback((e: ChangeEvent<HTMLInputElement>) => {\n    handleSettingsChange(e, 'contact', 'silent');\n  }, [handleSettingsChange]);\n\n  const handlePrivateChatsPreviewChange = useCallback((e: ChangeEvent<HTMLInputElement>) => {\n    handleSettingsChange(e, 'contact', 'showPreviews');\n  }, [handleSettingsChange]);\n\n  const handleGroupsNotificationsChange = useCallback((e: ChangeEvent<HTMLInputElement>) => {\n    handleSettingsChange(e, 'group', 'silent');\n  }, [handleSettingsChange]);\n\n  const handleGroupsPreviewChange = useCallback((e: ChangeEvent<HTMLInputElement>) => {\n    handleSettingsChange(e, 'group', 'showPreviews');\n  }, [handleSettingsChange]);\n\n  const handleChannelsNotificationsChange = useCallback((e: ChangeEvent<HTMLInputElement>) => {\n    handleSettingsChange(e, 'broadcast', 'silent');\n  }, [handleSettingsChange]);\n\n  const handleChannelsPreviewChange = useCallback((e: ChangeEvent<HTMLInputElement>) => {\n    handleSettingsChange(e, 'broadcast', 'showPreviews');\n  }, [handleSettingsChange]);\n\n  const handleContactNotificationChange = useCallback((e: ChangeEvent<HTMLInputElement>) => {\n    updateContactSignUpNotification({\n      isSilent: !e.target.checked,\n    });\n  }, [updateContactSignUpNotification]);\n\n  const handleVolumeChange = useCallback((volume: number) => {\n    updateWebNotificationSettings({\n      notificationSoundVolume: volume,\n    });\n    runDebounced(() => playNotifySound(undefined, volume));\n  }, [runDebounced, updateWebNotificationSettings]);\n\n  const lang = useOldLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onReset,\n  });\n\n  return (\n    <div className=\"settings-content custom-scroll\">\n      <div className=\"settings-item\">\n        <h4 className=\"settings-item-header\" dir={lang.isRtl ? 'rtl' : undefined}>\n          Web notifications\n        </h4>\n        <Checkbox\n          label=\"Web notifications\"\n          // eslint-disable-next-line max-len\n          subLabel={lang(hasWebNotifications ? 'UserInfo.NotificationsEnabled' : 'UserInfo.NotificationsDisabled')}\n          checked={hasWebNotifications}\n          disabled={!areNotificationsSupported}\n          onChange={handleWebNotificationsChange}\n        />\n        <Checkbox\n          label=\"Offline notifications\"\n          disabled={!hasWebNotifications || !areOfflineNotificationsSupported}\n          // eslint-disable-next-line max-len\n          subLabel={areOfflineNotificationsSupported ? lang(hasPushNotifications ? 'UserInfo.NotificationsEnabled' : 'UserInfo.NotificationsDisabled') : 'Not supported'}\n          checked={hasPushNotifications}\n          onChange={handlePushNotificationsChange}\n        />\n        <div className=\"settings-item-slider\">\n          <RangeSlider\n            label=\"Sound\"\n            min={0}\n            max={10}\n            disabled={!areNotificationsSupported}\n            value={notificationSoundVolume}\n            onChange={handleVolumeChange}\n          />\n        </div>\n      </div>\n      <div className=\"settings-item\">\n        <h4 className=\"settings-item-header\" dir={lang.isRtl ? 'rtl' : undefined}>\n          {lang('AutodownloadPrivateChats')}\n        </h4>\n\n        <Checkbox\n          label={lang('NotificationsForPrivateChats')}\n          // eslint-disable-next-line max-len\n          subLabel={lang(hasPrivateChatsNotifications ? 'UserInfo.NotificationsEnabled' : 'UserInfo.NotificationsDisabled')}\n          checked={hasPrivateChatsNotifications}\n          onChange={handlePrivateChatsNotificationsChange}\n        />\n        <Checkbox\n          label={lang('MessagePreview')}\n          disabled={!hasPrivateChatsNotifications}\n          // eslint-disable-next-line max-len\n          subLabel={lang(hasPrivateChatsMessagePreview ? 'UserInfo.NotificationsEnabled' : 'UserInfo.NotificationsDisabled')}\n          checked={hasPrivateChatsMessagePreview}\n          onChange={handlePrivateChatsPreviewChange}\n        />\n      </div>\n\n      <div className=\"settings-item\">\n        <h4 className=\"settings-item-header\" dir={lang.isRtl ? 'rtl' : undefined}>{lang('FilterGroups')}</h4>\n\n        <Checkbox\n          label={lang('NotificationsForGroups')}\n          subLabel={lang(hasGroupNotifications ? 'UserInfo.NotificationsEnabled' : 'UserInfo.NotificationsDisabled')}\n          checked={hasGroupNotifications}\n          onChange={handleGroupsNotificationsChange}\n        />\n        <Checkbox\n          label={lang('MessagePreview')}\n          disabled={!hasGroupNotifications}\n          subLabel={lang(hasGroupMessagePreview ? 'UserInfo.NotificationsEnabled' : 'UserInfo.NotificationsDisabled')}\n          checked={hasGroupMessagePreview}\n          onChange={handleGroupsPreviewChange}\n        />\n      </div>\n\n      <div className=\"settings-item\">\n        <h4 className=\"settings-item-header\" dir={lang.isRtl ? 'rtl' : undefined}>{lang('FilterChannels')}</h4>\n\n        <Checkbox\n          label={lang('NotificationsForChannels')}\n          // eslint-disable-next-line max-len\n          subLabel={lang(hasBroadcastNotifications ? 'UserInfo.NotificationsEnabled' : 'UserInfo.NotificationsDisabled')}\n          checked={hasBroadcastNotifications}\n          onChange={handleChannelsNotificationsChange}\n        />\n        <Checkbox\n          label={lang('MessagePreview')}\n          disabled={!hasBroadcastNotifications}\n          // eslint-disable-next-line max-len\n          subLabel={lang(hasBroadcastMessagePreview ? 'UserInfo.NotificationsEnabled' : 'UserInfo.NotificationsDisabled')}\n          checked={hasBroadcastMessagePreview}\n          onChange={handleChannelsPreviewChange}\n        />\n      </div>\n\n      <div className=\"settings-item\">\n        <h4 className=\"settings-item-header\" dir={lang.isRtl ? 'rtl' : undefined}>{lang('PhoneOther')}</h4>\n\n        <Checkbox\n          label={lang('ContactJoined')}\n          checked={hasContactJoinedNotifications}\n          onChange={handleContactNotificationChange}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    return {\n      hasPrivateChatsNotifications: Boolean(global.settings.byKey.hasPrivateChatsNotifications),\n      hasPrivateChatsMessagePreview: Boolean(global.settings.byKey.hasPrivateChatsMessagePreview),\n      hasGroupNotifications: Boolean(global.settings.byKey.hasGroupNotifications),\n      hasGroupMessagePreview: Boolean(global.settings.byKey.hasGroupMessagePreview),\n      hasBroadcastNotifications: Boolean(global.settings.byKey.hasBroadcastNotifications),\n      hasBroadcastMessagePreview: Boolean(global.settings.byKey.hasBroadcastMessagePreview),\n      hasContactJoinedNotifications: Boolean(global.settings.byKey.hasContactJoinedNotifications),\n      hasWebNotifications: global.settings.byKey.hasWebNotifications,\n      hasPushNotifications: global.settings.byKey.hasPushNotifications,\n      notificationSoundVolume: global.settings.byKey.notificationSoundVolume,\n    };\n  },\n)(SettingsNotifications));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useCallback, useState } from '../../../lib/teact/teact';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport PasswordForm from '../../common/PasswordForm';\nimport PasswordMonkey from '../../common/PasswordMonkey';\n\ntype OwnProps = {\n  error?: string;\n  isLoading?: boolean;\n  shouldDisablePasswordManager?: boolean;\n  expectedPassword?: string;\n  placeholder?: string;\n  hint?: string;\n  submitLabel?: string;\n  clearError?: NoneToVoidFunction;\n  onSubmit: (password: string) => void;\n  isActive?: boolean;\n  onReset: () => void;\n};\n\nconst EQUAL_PASSWORD_ERROR = 'Passwords Should Be Equal';\n\nconst SettingsPasswordForm: FC<OwnProps> = ({\n  isActive,\n  onReset,\n  error,\n  isLoading,\n  shouldDisablePasswordManager,\n  expectedPassword,\n  placeholder = 'Current Password',\n  hint,\n  submitLabel,\n  clearError,\n  onSubmit,\n}) => {\n  const [validationError, setValidationError] = useState<string>('');\n  const [shouldShowPassword, setShouldShowPassword] = useState(false);\n\n  const handleSubmit = useCallback((newPassword) => {\n    if (expectedPassword && newPassword !== expectedPassword) {\n      setValidationError(EQUAL_PASSWORD_ERROR);\n    } else {\n      onSubmit(newPassword);\n    }\n  }, [onSubmit, expectedPassword]);\n\n  const handleClearError = useCallback(() => {\n    if (clearError) {\n      clearError();\n    }\n    setValidationError('');\n  }, [clearError]);\n\n  const lang = useOldLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onReset,\n  });\n\n  return (\n    <div className=\"settings-content password-form custom-scroll\">\n      <div className=\"settings-content-header no-border\">\n        <PasswordMonkey isBig isPasswordVisible={shouldShowPassword} />\n      </div>\n\n      <div className=\"settings-item pt-0\">\n        <PasswordForm\n          error={validationError || error}\n          hint={hint}\n          placeholder={placeholder}\n          shouldDisablePasswordManager={shouldDisablePasswordManager}\n          submitLabel={submitLabel || lang('Next')}\n          clearError={handleClearError}\n          isLoading={isLoading}\n          isPasswordVisible={shouldShowPassword}\n          shouldResetValue={isActive}\n          onChangePasswordVisibility={setShouldShowPassword}\n          onSubmit={handleSubmit}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(SettingsPasswordForm);\n","import React, {\n  memo, useCallback, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { AnimationLevel, PerformanceType, PerformanceTypeKey } from '../../../types';\n\nimport {\n  ANIMATION_LEVEL_CUSTOM, ANIMATION_LEVEL_MAX, ANIMATION_LEVEL_MED, ANIMATION_LEVEL_MIN,\n} from '../../../config';\nimport {\n  INITIAL_PERFORMANCE_STATE_MAX,\n  INITIAL_PERFORMANCE_STATE_MID,\n  INITIAL_PERFORMANCE_STATE_MIN,\n} from '../../../global/initialState';\nimport { selectPerformanceSettings } from '../../../global/selectors';\nimport { areDeepEqual } from '../../../util/areDeepEqual';\nimport { IS_BACKDROP_BLUR_SUPPORTED } from '../../../util/windowEnvironment';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Checkbox from '../../ui/Checkbox';\nimport RangeSlider from '../../ui/RangeSlider';\n\ntype PerformanceSection = [string, PerformanceOption[]];\ntype PerformanceOption = {\n  key: PerformanceTypeKey;\n  label: string;\n  disabled?: boolean;\n};\n\ntype OwnProps = {\n  isActive?: boolean;\n  onReset: () => void;\n};\n\ntype StateProps = {\n  performanceSettings: PerformanceType;\n};\n\nconst ANIMATION_LEVEL_OPTIONS = [\n  'Power Saving',\n  'Nice and Fast',\n  'Lots of Stuff',\n];\n\nconst ANIMATION_LEVEL_CUSTOM_OPTIONS = [\n  'Power Saving',\n  'Custom',\n  'Lots of Stuff',\n];\n\nconst PERFORMANCE_OPTIONS: PerformanceSection[] = [\n  ['LiteMode.Key.animations.Title', [\n    { key: 'pageTransitions', label: 'Page Transitions' },\n    { key: 'messageSendingAnimations', label: 'Message Sending Animation' },\n    { key: 'mediaViewerAnimations', label: 'Media Viewer Animations' },\n    { key: 'messageComposerAnimations', label: 'Message Composer Animations' },\n    { key: 'contextMenuAnimations', label: 'Context Menu Animation' },\n    { key: 'contextMenuBlur', label: 'Context Menu Blur', disabled: !IS_BACKDROP_BLUR_SUPPORTED },\n    { key: 'rightColumnAnimations', label: 'Right Column Animation' },\n  ]],\n  ['Stickers and Emoji', [\n    { key: 'animatedEmoji', label: 'Allow Animated Emoji' },\n    { key: 'loopAnimatedStickers', label: 'Loop Animated Stickers' },\n    { key: 'reactionEffects', label: 'Reaction Effects' },\n    { key: 'stickerEffects', label: 'Full-Screen Sticker and Emoji Effects' },\n  ]],\n  ['AutoplayMedia', [\n    { key: 'autoplayGifs', label: 'AutoplayGIF' },\n    { key: 'autoplayVideos', label: 'AutoplayVideo' },\n  ]],\n];\n\nfunction SettingsPerformance({\n  isActive,\n  performanceSettings,\n  onReset,\n}: OwnProps & StateProps) {\n  const {\n    setSettingOption,\n    updatePerformanceSettings,\n  } = getActions();\n\n  useHistoryBack({\n    isActive,\n    onBack: onReset,\n  });\n\n  const lang = useOldLang();\n  const [sectionExpandedStates, setSectionExpandedStates] = useState<Record<number, boolean>>({});\n\n  const sectionCheckedStates = useMemo(() => {\n    return PERFORMANCE_OPTIONS.reduce((acc, [, options], index) => {\n      acc[index] = options.every(({ key }) => performanceSettings[key]);\n\n      return acc;\n    }, {} as Record<number, boolean>);\n  }, [performanceSettings]);\n\n  const animationLevelState = useMemo(() => {\n    if (areDeepEqual(performanceSettings, INITIAL_PERFORMANCE_STATE_MAX)) {\n      return ANIMATION_LEVEL_MAX;\n    }\n    if (areDeepEqual(performanceSettings, INITIAL_PERFORMANCE_STATE_MIN)) {\n      return ANIMATION_LEVEL_MIN;\n    }\n    if (areDeepEqual(performanceSettings, INITIAL_PERFORMANCE_STATE_MID)) {\n      return ANIMATION_LEVEL_MED;\n    }\n\n    return ANIMATION_LEVEL_CUSTOM;\n  }, [performanceSettings]);\n  const animationLevelOptions = animationLevelState === ANIMATION_LEVEL_CUSTOM\n    ? ANIMATION_LEVEL_CUSTOM_OPTIONS\n    : ANIMATION_LEVEL_OPTIONS;\n\n  const handleToggleSection = useCallback((e: React.MouseEvent, index?: string) => {\n    e.preventDefault();\n    const sectionIndex = Number(index);\n\n    setSectionExpandedStates((prev) => ({\n      ...prev,\n      [sectionIndex]: !prev[sectionIndex],\n    }));\n  }, []);\n\n  const handleAnimationLevelChange = useCallback((newLevel: number) => {\n    const performance = newLevel === ANIMATION_LEVEL_MIN\n      ? INITIAL_PERFORMANCE_STATE_MIN\n      : (newLevel === ANIMATION_LEVEL_MED ? INITIAL_PERFORMANCE_STATE_MID : INITIAL_PERFORMANCE_STATE_MAX);\n\n    setSettingOption({ animationLevel: newLevel as AnimationLevel });\n    updatePerformanceSettings(performance);\n  }, [setSettingOption]);\n\n  const handlePropertyGroupChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, checked } = e.target;\n    const perfomanceSection = PERFORMANCE_OPTIONS.find(([sectionName]) => sectionName === name);\n    if (!perfomanceSection) {\n      return;\n    }\n\n    const newSettings = perfomanceSection[1].reduce((acc, { key }) => {\n      acc[key] = checked;\n      return acc;\n    }, {} as Partial<PerformanceType>);\n\n    updatePerformanceSettings(newSettings);\n  }, []);\n\n  const handlePropertyChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, checked } = e.target;\n\n    updatePerformanceSettings({ [name as PerformanceTypeKey]: checked });\n  }, []);\n\n  return (\n    <div className=\"settings-content custom-scroll\">\n      <div className=\"settings-item\">\n        <h4 className=\"settings-item-header\" dir={lang.isRtl ? 'rtl' : undefined}>\n          Animation Level\n        </h4>\n        <p className=\"settings-item-description\" dir={lang.isRtl ? 'rtl' : undefined}>\n          Choose the desired animations amount.\n        </p>\n\n        <RangeSlider\n          options={animationLevelOptions}\n          value={animationLevelState === ANIMATION_LEVEL_CUSTOM ? ANIMATION_LEVEL_MED : animationLevelState}\n          onChange={handleAnimationLevelChange}\n        />\n      </div>\n\n      <div className=\"settings-item-simple settings-item__with-shifted-dropdown\">\n        <h3 className=\"settings-item-header\" dir=\"auto\">Resource-Intensive Processes</h3>\n\n        {PERFORMANCE_OPTIONS.map(([sectionName, options], index) => {\n          return (\n            <div\n              key={sectionName}\n              className=\"settings-dropdown-section\"\n            >\n              <div className=\"ListItem with-checkbox\">\n                <Checkbox\n                  name={sectionName}\n                  value={index.toString()}\n                  checked={sectionCheckedStates[index]}\n                  label={lang(sectionName)}\n                  rightIcon={sectionExpandedStates[index] ? 'up' : 'down'}\n                  onChange={handlePropertyGroupChange}\n                  onClickLabel={handleToggleSection}\n                />\n              </div>\n              {Boolean(sectionExpandedStates[index]) && (\n                <div className=\"DropdownList DropdownList--open\">\n                  {options.map(({ key, label, disabled }) => (\n                    <Checkbox\n                      key={key}\n                      name={key}\n                      checked={performanceSettings[key]}\n                      label={lang(label)}\n                      disabled={disabled}\n                      onChange={handlePropertyChange}\n                    />\n                  ))}\n                </div>\n              )}\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    performanceSettings: selectPerformanceSettings(global),\n  };\n})(SettingsPerformance));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useCallback, useEffect } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { GlobalState } from '../../../global/types';\nimport type { ApiPrivacySettings } from '../../../types';\nimport { SettingsScreens } from '../../../types';\n\nimport { selectCanSetPasscode, selectIsCurrentUserPremium } from '../../../global/selectors';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport StarIcon from '../../common/icons/StarIcon';\nimport Checkbox from '../../ui/Checkbox';\nimport ListItem from '../../ui/ListItem';\n\ntype OwnProps = {\n  isActive?: boolean;\n  onScreenSelect: (screen: SettingsScreens) => void;\n  onReset: () => void;\n};\n\ntype StateProps = {\n  isCurrentUserPremium?: boolean;\n  hasPassword?: boolean;\n  hasPasscode?: boolean;\n  canSetPasscode?: boolean;\n  blockedCount: number;\n  webAuthCount: number;\n  isSensitiveEnabled?: boolean;\n  canChangeSensitive?: boolean;\n  canDisplayAutoarchiveSetting: boolean;\n  shouldArchiveAndMuteNewNonContact?: boolean;\n  shouldNewNonContactPeersRequirePremium?: boolean;\n  canDisplayChatInTitle?: boolean;\n  privacy: GlobalState['settings']['privacy'];\n};\n\nconst SettingsPrivacy: FC<OwnProps & StateProps> = ({\n  isActive,\n  isCurrentUserPremium,\n  hasPassword,\n  hasPasscode,\n  blockedCount,\n  webAuthCount,\n  isSensitiveEnabled,\n  canChangeSensitive,\n  canDisplayAutoarchiveSetting,\n  shouldArchiveAndMuteNewNonContact,\n  shouldNewNonContactPeersRequirePremium,\n  canDisplayChatInTitle,\n  canSetPasscode,\n  privacy,\n  onScreenSelect,\n  onReset,\n}) => {\n  const {\n    loadPrivacySettings,\n    loadBlockedUsers,\n    loadContentSettings,\n    updateContentSettings,\n    loadGlobalPrivacySettings,\n    updateGlobalPrivacySettings,\n    loadWebAuthorizations,\n    setSettingOption,\n  } = getActions();\n\n  useEffect(() => {\n    loadBlockedUsers();\n    loadPrivacySettings();\n    loadContentSettings();\n    loadWebAuthorizations();\n  }, []);\n\n  useEffect(() => {\n    if (isActive) {\n      loadGlobalPrivacySettings();\n    }\n  }, [isActive, loadGlobalPrivacySettings]);\n\n  const lang = useOldLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onReset,\n  });\n\n  const handleArchiveAndMuteChange = useCallback((isEnabled: boolean) => {\n    updateGlobalPrivacySettings({\n      shouldArchiveAndMuteNewNonContact: isEnabled,\n    });\n  }, [updateGlobalPrivacySettings]);\n\n  const handleChatInTitleChange = useCallback((isChecked: boolean) => {\n    setSettingOption({\n      canDisplayChatInTitle: isChecked,\n    });\n  }, []);\n\n  const handleUpdateContentSettings = useCallback((isChecked: boolean) => {\n    updateContentSettings(isChecked);\n  }, [updateContentSettings]);\n\n  function getVisibilityValue(setting?: ApiPrivacySettings) {\n    const { visibility, shouldAllowPremium } = setting || {};\n    const blockCount = setting ? setting.blockChatIds.length + setting.blockUserIds.length : 0;\n    const allowCount = setting ? setting.allowChatIds.length + setting.allowUserIds.length : 0;\n    const total = [];\n    if (blockCount) total.push(`-${blockCount}`);\n    if (allowCount) total.push(`+${allowCount}`);\n\n    const exceptionString = total.length ? `(${total.join(',')})` : '';\n\n    if (shouldAllowPremium) {\n      return lang(exceptionString ? 'ContactsAndPremium' : 'PrivacyPremium');\n    }\n\n    switch (visibility) {\n      case 'everybody':\n        return `${lang('P2PEverybody')} ${exceptionString}`;\n\n      case 'contacts':\n        return `${lang('P2PContacts')} ${exceptionString}`;\n\n      case 'nobody':\n        return `${lang('P2PNobody')} ${exceptionString}`;\n    }\n\n    return undefined;\n  }\n\n  return (\n    <div className=\"settings-content custom-scroll\">\n      <div className=\"settings-item pt-3\">\n        <ListItem\n          icon=\"delete-user\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => onScreenSelect(SettingsScreens.PrivacyBlockedUsers)}\n        >\n          {lang('BlockedUsers')}\n          <span className=\"settings-item__current-value\">{blockedCount || ''}</span>\n        </ListItem>\n        {canSetPasscode && (\n          <ListItem\n            icon=\"key\"\n            narrow\n            // eslint-disable-next-line react/jsx-no-bind\n            onClick={() => onScreenSelect(\n              hasPasscode ? SettingsScreens.PasscodeEnabled : SettingsScreens.PasscodeDisabled,\n            )}\n          >\n            <div className=\"multiline-menu-item\">\n              <span className=\"title\">{lang('Passcode')}</span>\n              <span className=\"subtitle\" dir=\"auto\">\n                {lang(hasPasscode ? 'PasswordOn' : 'PasswordOff')}\n              </span>\n            </div>\n          </ListItem>\n        )}\n        <ListItem\n          icon=\"lock\"\n          narrow\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => onScreenSelect(\n            hasPassword ? SettingsScreens.TwoFaEnabled : SettingsScreens.TwoFaDisabled,\n          )}\n        >\n          <div className=\"multiline-menu-item\">\n            <span className=\"title\">{lang('TwoStepVerification')}</span>\n            <span className=\"subtitle\" dir=\"auto\">\n              {lang(hasPassword ? 'PasswordOn' : 'PasswordOff')}\n            </span>\n          </div>\n        </ListItem>\n        {webAuthCount > 0 && (\n          <ListItem\n            icon=\"web\"\n            // eslint-disable-next-line react/jsx-no-bind\n            onClick={() => onScreenSelect(SettingsScreens.ActiveWebsites)}\n          >\n            {lang('PrivacySettings.WebSessions')}\n            <span className=\"settings-item__current-value\">{webAuthCount}</span>\n          </ListItem>\n        )}\n      </div>\n\n      <div className=\"settings-item\">\n        <h4 className=\"settings-item-header mb-4\" dir={lang.isRtl ? 'rtl' : undefined}>{lang('PrivacyTitle')}</h4>\n\n        <ListItem\n          narrow\n          className=\"no-icon\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => onScreenSelect(SettingsScreens.PrivacyPhoneNumber)}\n        >\n          <div className=\"multiline-menu-item\">\n            <span className=\"title\">{lang('PrivacyPhoneTitle')}</span>\n            <span className=\"subtitle\" dir=\"auto\">\n              {getVisibilityValue(privacy.phoneNumber)}\n            </span>\n          </div>\n        </ListItem>\n        <ListItem\n          narrow\n          className=\"no-icon\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => onScreenSelect(SettingsScreens.PrivacyLastSeen)}\n        >\n          <div className=\"multiline-menu-item\">\n            <span className=\"title\">{lang('LastSeenTitle')}</span>\n            <span className=\"subtitle\" dir=\"auto\">\n              {getVisibilityValue(privacy.lastSeen)}\n            </span>\n          </div>\n        </ListItem>\n        <ListItem\n          narrow\n          className=\"no-icon\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => onScreenSelect(SettingsScreens.PrivacyProfilePhoto)}\n        >\n          <div className=\"multiline-menu-item\">\n            <span className=\"title\">{lang('PrivacyProfilePhotoTitle')}</span>\n            <span className=\"subtitle\" dir=\"auto\">\n              {getVisibilityValue(privacy.profilePhoto)}\n            </span>\n          </div>\n        </ListItem>\n        <ListItem\n          narrow\n          className=\"no-icon\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => onScreenSelect(SettingsScreens.PrivacyBio)}\n        >\n          <div className=\"multiline-menu-item\">\n            <span className=\"title\">{lang('PrivacyBio')}</span>\n            <span className=\"subtitle\" dir=\"auto\">\n              {getVisibilityValue(privacy.bio)}\n            </span>\n          </div>\n        </ListItem>\n        <ListItem\n          narrow\n          className=\"no-icon\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => onScreenSelect(SettingsScreens.PrivacyBirthday)}\n        >\n          <div className=\"multiline-menu-item\">\n            <span className=\"title\">{lang('PrivacyBirthday')}</span>\n            <span className=\"subtitle\" dir=\"auto\">\n              {getVisibilityValue(privacy.birthday)}\n            </span>\n          </div>\n        </ListItem>\n        <ListItem\n          narrow\n          className=\"no-icon\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => onScreenSelect(SettingsScreens.PrivacyForwarding)}\n        >\n          <div className=\"multiline-menu-item\">\n            <span className=\"title\">{lang('PrivacyForwardsTitle')}</span>\n            <span className=\"subtitle\" dir=\"auto\">\n              {getVisibilityValue(privacy.forwards)}\n            </span>\n          </div>\n        </ListItem>\n        <ListItem\n          narrow\n          className=\"no-icon\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => onScreenSelect(SettingsScreens.PrivacyPhoneCall)}\n        >\n          <div className=\"multiline-menu-item\">\n            <span className=\"title\">{lang('WhoCanCallMe')}</span>\n            <span className=\"subtitle\" dir=\"auto\">\n              {getVisibilityValue(privacy.phoneCall)}\n            </span>\n          </div>\n        </ListItem>\n        <ListItem\n          narrow\n          allowDisabledClick\n          rightElement={isCurrentUserPremium && <StarIcon size=\"big\" type=\"premium\" />}\n          className=\"no-icon\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => onScreenSelect(SettingsScreens.PrivacyVoiceMessages)}\n        >\n          <div className=\"multiline-menu-item\">\n            <span className=\"title\">{lang('PrivacyVoiceMessagesTitle')}</span>\n            <span className=\"subtitle\" dir=\"auto\">\n              {getVisibilityValue(privacy.voiceMessages)}\n            </span>\n          </div>\n        </ListItem>\n        <ListItem\n          narrow\n          rightElement={isCurrentUserPremium && <StarIcon size=\"big\" type=\"premium\" />}\n          className=\"no-icon\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => onScreenSelect(SettingsScreens.PrivacyMessages)}\n        >\n          <div className=\"multiline-menu-item\">\n            <span className=\"title\">{lang('PrivacyMessagesTitle')}</span>\n            <span className=\"subtitle\" dir=\"auto\">\n              {shouldNewNonContactPeersRequirePremium\n                ? lang('PrivacyMessagesContactsAndPremium')\n                : lang('P2PEverybody')}\n            </span>\n          </div>\n        </ListItem>\n        <ListItem\n          narrow\n          className=\"no-icon\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => onScreenSelect(SettingsScreens.PrivacyGroupChats)}\n        >\n          <div className=\"multiline-menu-item\">\n            <span className=\"title\">{lang('WhoCanAddMe')}</span>\n            <span className=\"subtitle\" dir=\"auto\">\n              {getVisibilityValue(privacy.chatInvite)}\n            </span>\n          </div>\n        </ListItem>\n      </div>\n\n      {canChangeSensitive && (\n        <div className=\"settings-item\">\n          <h4 className=\"settings-item-header\" dir={lang.isRtl ? 'rtl' : undefined}>\n            {lang('lng_settings_sensitive_title')}\n          </h4>\n          <Checkbox\n            label={lang('lng_settings_sensitive_disable_filtering')}\n            subLabel={lang('lng_settings_sensitive_about')}\n            checked={Boolean(isSensitiveEnabled)}\n            disabled={!canChangeSensitive}\n            onCheck={handleUpdateContentSettings}\n          />\n        </div>\n      )}\n\n      {canDisplayAutoarchiveSetting && (\n        <div className=\"settings-item\">\n          <h4 className=\"settings-item-header\" dir={lang.isRtl ? 'rtl' : undefined}>\n            {lang('NewChatsFromNonContacts')}\n          </h4>\n          <Checkbox\n            label={lang('ArchiveAndMute')}\n            subLabel={lang('ArchiveAndMuteInfo')}\n            checked={Boolean(shouldArchiveAndMuteNewNonContact)}\n            onCheck={handleArchiveAndMuteChange}\n          />\n        </div>\n      )}\n\n      <div className=\"settings-item\">\n        <h4 className=\"settings-item-header\" dir={lang.isRtl ? 'rtl' : undefined}>\n          {lang('lng_settings_window_system')}\n        </h4>\n        <Checkbox\n          label={lang('lng_settings_title_chat_name')}\n          checked={Boolean(canDisplayChatInTitle)}\n          onCheck={handleChatInTitleChange}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const {\n      settings: {\n        byKey: {\n          hasPassword, isSensitiveEnabled, canChangeSensitive, shouldArchiveAndMuteNewNonContact,\n          canDisplayChatInTitle, shouldNewNonContactPeersRequirePremium,\n        },\n        privacy,\n      },\n      blocked,\n      passcode: {\n        hasPasscode,\n      },\n      appConfig,\n    } = global;\n\n    return {\n      isCurrentUserPremium: selectIsCurrentUserPremium(global),\n      hasPassword,\n      hasPasscode: Boolean(hasPasscode),\n      blockedCount: blocked.totalCount,\n      webAuthCount: global.activeWebSessions.orderedHashes.length,\n      isSensitiveEnabled,\n      canDisplayAutoarchiveSetting: Boolean(appConfig?.canDisplayAutoarchiveSetting),\n      shouldArchiveAndMuteNewNonContact,\n      canChangeSensitive,\n      shouldNewNonContactPeersRequirePremium,\n      privacy,\n      canDisplayChatInTitle,\n      canSetPasscode: selectCanSetPasscode(global),\n    };\n  },\n)(SettingsPrivacy));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useCallback, useMemo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiChat, ApiCountryCode, ApiUser } from '../../../api/types';\n\nimport { CHAT_HEIGHT_PX } from '../../../config';\nimport { getMainUsername, isUserId } from '../../../global/helpers';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatPhoneNumberWithCode } from '../../../util/phoneNumber';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Avatar from '../../common/Avatar';\nimport FullNameTitle from '../../common/FullNameTitle';\nimport FloatingActionButton from '../../ui/FloatingActionButton';\nimport ListItem from '../../ui/ListItem';\nimport Loading from '../../ui/Loading';\nimport BlockUserModal from './BlockUserModal';\n\ntype OwnProps = {\n  isActive?: boolean;\n  onReset: () => void;\n};\n\ntype StateProps = {\n  chatsByIds: Record<string, ApiChat>;\n  usersByIds: Record<string, ApiUser>;\n  blockedIds: string[];\n  phoneCodeList: ApiCountryCode[];\n};\n\nconst SettingsPrivacyBlockedUsers: FC<OwnProps & StateProps> = ({\n  isActive,\n  onReset,\n  chatsByIds,\n  usersByIds,\n  blockedIds,\n  phoneCodeList,\n}) => {\n  const { unblockUser } = getActions();\n\n  const lang = useOldLang();\n  const [isBlockUserModalOpen, openBlockUserModal, closeBlockUserModal] = useFlag();\n  const handleUnblockClick = useCallback((userId: string) => {\n    unblockUser({ userId });\n  }, [unblockUser]);\n\n  useHistoryBack({\n    isActive,\n    onBack: onReset,\n  });\n\n  const blockedUsernamesById = useMemo(() => {\n    return blockedIds.reduce((acc, userId) => {\n      const isPrivate = isUserId(userId);\n      const user = isPrivate ? usersByIds[userId] : undefined;\n      const mainUsername = user && !user.phoneNumber && getMainUsername(user);\n\n      if (mainUsername) {\n        acc[userId] = mainUsername;\n      }\n\n      return acc;\n    }, {} as Record<string, string>);\n  }, [blockedIds, usersByIds]);\n\n  function renderContact(contactId: string, i: number, viewportOffset: number) {\n    const isPrivate = isUserId(contactId);\n    const user = usersByIds[contactId];\n    const chat = chatsByIds[contactId];\n    const peer = user || chat;\n\n    const className = buildClassName(\n      'Chat chat-item-clickable blocked-list-item small-icon',\n      isPrivate ? 'private' : 'group',\n    );\n\n    const userMainUsername = blockedUsernamesById[contactId];\n\n    return (\n      <ListItem\n        key={`blocked_${contactId}`}\n        className={className}\n        ripple\n        narrow\n        contextActions={[{\n          title: 'Unblock',\n          icon: 'unlock',\n          handler: () => {\n            handleUnblockClick(contactId);\n          },\n        }]}\n        style={`top: ${(viewportOffset + i) * CHAT_HEIGHT_PX}px;`}\n      >\n        <Avatar\n          size=\"medium\"\n          peer={peer}\n        />\n        <div className=\"contact-info\" dir=\"auto\">\n          {peer && <FullNameTitle peer={peer} />}\n          {user?.phoneNumber && (\n            <div className=\"contact-phone\" dir=\"auto\">{formatPhoneNumberWithCode(phoneCodeList, user.phoneNumber)}</div>\n          )}\n          {userMainUsername && (<div className=\"contact-username\" dir=\"auto\">@{userMainUsername}</div>)}\n        </div>\n      </ListItem>\n    );\n  }\n\n  return (\n    <div className=\"settings-fab-wrapper\">\n      <div className=\"settings-content infinite-scroll\">\n        <div className=\"settings-item no-border\">\n          <p className=\"settings-item-description-larger mt-0 mb-2\" dir={lang.isRtl ? 'rtl' : undefined}>\n            {lang('BlockedUsersInfo')}\n          </p>\n        </div>\n\n        <div className=\"chat-list custom-scroll\">\n          {blockedIds?.length ? (\n            <div className=\"scroll-container settings-item\">\n              {blockedIds!.map((contactId, i) => renderContact(contactId, i, 0))}\n            </div>\n          ) : blockedIds && !blockedIds.length ? (\n            <div className=\"no-results\" dir=\"auto\">{lang('NoBlocked')}</div>\n          ) : (\n            <Loading key=\"loading\" />\n          )}\n        </div>\n      </div>\n\n      <FloatingActionButton\n        isShown\n        className=\"block-user-button\"\n        onClick={openBlockUserModal}\n        ariaLabel={lang('BlockContact')}\n      >\n        <i className=\"icon icon-add\" />\n      </FloatingActionButton>\n      <BlockUserModal\n        isOpen={isBlockUserModalOpen}\n        onClose={closeBlockUserModal}\n      />\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const {\n      chats: {\n        byId: chatsByIds,\n      },\n      users: {\n        byId: usersByIds,\n      },\n      blocked: {\n        ids,\n      },\n      countryList: {\n        phoneCodes: phoneCodeList,\n      },\n    } = global;\n\n    return {\n      chatsByIds,\n      usersByIds,\n      blockedIds: ids,\n      phoneCodeList,\n    };\n  },\n)(SettingsPrivacyBlockedUsers));\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { PrivacyVisibility } from '../../../types';\n\nimport { selectIsCurrentUserPremium, selectShouldHideReadMarks } from '../../../global/selectors';\nimport renderText from '../../common/helpers/renderText';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport StarIcon from '../../common/icons/StarIcon';\nimport Checkbox from '../../ui/Checkbox';\nimport ListItem from '../../ui/ListItem';\n\ntype OwnProps = {\n  visibility?: PrivacyVisibility;\n};\n\ntype StateProps = {\n  isCurrentUserPremium: boolean;\n  shouldHideReadMarks: boolean;\n};\n\nconst SettingsPrivacyLastSeen = ({\n  isCurrentUserPremium, shouldHideReadMarks, visibility,\n}: OwnProps & StateProps) => {\n  const { updateGlobalPrivacySettings, openPremiumModal } = getActions();\n  const lang = useOldLang();\n  const canShowHideReadTime = visibility === 'nobody' || visibility === 'contacts';\n\n  const handleChangeShouldHideReadMarks = useLastCallback(\n    (isEnabled) => updateGlobalPrivacySettings({ shouldHideReadMarks: isEnabled }),\n  );\n\n  const handleOpenPremiumModal = useLastCallback(() => {\n    openPremiumModal({\n      initialSection: 'last_seen',\n    });\n  });\n\n  return (\n    <>\n      {canShowHideReadTime && (\n        <div className=\"settings-item\">\n          <Checkbox\n            label={lang('HideReadTime')}\n            checked={shouldHideReadMarks}\n            onCheck={handleChangeShouldHideReadMarks}\n          />\n          <p className=\"settings-item-description-larger\" dir={lang.isRtl ? 'rtl' : undefined}>\n            {renderText(lang('HideReadTimeInfo'), ['br'])}\n          </p>\n        </div>\n      )}\n      <div className=\"settings-item\">\n        <ListItem\n          leftElement={<StarIcon className=\"icon\" type=\"premium\" size=\"big\" />}\n          onClick={handleOpenPremiumModal}\n        >\n          {isCurrentUserPremium ? lang('PrivacyLastSeenPremiumForPremium') : lang('PrivacyLastSeenPremium')}\n        </ListItem>\n        <p\n          className=\"settings-item-description-larger premium-info\"\n          dir={lang.isRtl ? 'rtl' : undefined}\n        >\n          {isCurrentUserPremium\n            ? lang('PrivacyLastSeenPremiumInfoForPremium')\n            : lang('PrivacyLastSeenPremiumInfo')}\n        </p>\n      </div>\n    </>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    return {\n      isCurrentUserPremium: selectIsCurrentUserPremium(global),\n      shouldHideReadMarks: Boolean(selectShouldHideReadMarks(global)),\n    };\n  },\n)(SettingsPrivacyLastSeen));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect, useRef,\n} from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { ApiPhoto } from '../../../api/types';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Avatar from '../../common/Avatar';\nimport ConfirmDialog from '../../ui/ConfirmDialog';\nimport ListItem from '../../ui/ListItem';\nimport SelectAvatar from '../../ui/SelectAvatar';\n\nimport styles from './SettingsPrivacyPublicPhoto.module.scss';\n\ntype OwnProps = {\n  currentUserId: string;\n  hasCurrentUserFullInfo?: boolean;\n  currentUserFallbackPhoto?: ApiPhoto;\n};\n\nconst SettingsPrivacyPublicProfilePhoto: FC<OwnProps> = ({\n  currentUserId,\n  hasCurrentUserFullInfo,\n  currentUserFallbackPhoto,\n}) => {\n  const {\n    loadFullUser, uploadProfilePhoto, deleteProfilePhoto, showNotification,\n  } = getActions();\n\n  const lang = useOldLang();\n\n  const [isDeleteFallbackPhotoModalOpen, openDeleteFallbackPhotoModal, closeDeleteFallbackPhotoModal] = useFlag(false);\n\n  // eslint-disable-next-line no-null/no-null\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    if (!hasCurrentUserFullInfo) {\n      loadFullUser({ userId: currentUserId });\n    }\n  }, [hasCurrentUserFullInfo, currentUserId, loadFullUser]);\n\n  const handleSelectFile = useCallback((file: File) => {\n    uploadProfilePhoto({\n      file,\n      isFallback: true,\n    });\n    showNotification({\n      message: lang('Privacy.ProfilePhoto.PublicPhotoSuccess'),\n    });\n  }, [lang, showNotification, uploadProfilePhoto]);\n\n  const handleConfirmDelete = useCallback(() => {\n    closeDeleteFallbackPhotoModal();\n    deleteProfilePhoto({ photo: currentUserFallbackPhoto! });\n  }, [closeDeleteFallbackPhotoModal, deleteProfilePhoto, currentUserFallbackPhoto]);\n\n  const handleOpenFileSelector = useCallback(() => {\n    inputRef.current?.click();\n  }, []);\n\n  return (\n    <div className=\"settings-item\">\n      <ListItem\n        icon=\"camera-add\"\n        onClick={handleOpenFileSelector}\n      >\n        <SelectAvatar\n          onChange={handleSelectFile}\n          inputRef={inputRef}\n        />\n        {lang(currentUserFallbackPhoto\n          ? 'Privacy.ProfilePhoto.UpdatePublicPhoto'\n          : 'Privacy.ProfilePhoto.SetPublicPhoto')}\n      </ListItem>\n      {currentUserFallbackPhoto && (\n        <ListItem\n          leftElement={<Avatar photo={currentUserFallbackPhoto} size=\"mini\" className={styles.fallbackPhoto} />}\n          onClick={openDeleteFallbackPhotoModal}\n          destructive\n        >\n          {lang(currentUserFallbackPhoto.isVideo\n            ? 'Privacy.ProfilePhoto.RemovePublicVideo'\n            : 'Privacy.ProfilePhoto.RemovePublicPhoto')}\n          <ConfirmDialog\n            isOpen={isDeleteFallbackPhotoModalOpen}\n            onClose={closeDeleteFallbackPhotoModal}\n            text={lang('Privacy.ResetPhoto.Confirm')}\n            confirmLabel={lang('Delete')}\n            confirmHandler={handleConfirmDelete}\n            confirmIsDestructive\n          />\n        </ListItem>\n      )}\n      <p className=\"settings-item-description-larger\" dir={lang.isRtl ? 'rtl' : undefined}>\n        {lang('Privacy.ProfilePhoto.PublicPhotoInfo')}\n      </p>\n    </div>\n  );\n};\n\nexport default memo(SettingsPrivacyPublicProfilePhoto);\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useCallback, useMemo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiPhoto } from '../../../api/types';\nimport type { ApiPrivacySettings } from '../../../types';\nimport { SettingsScreens } from '../../../types';\n\nimport { selectIsCurrentUserPremium, selectUserFullInfo } from '../../../global/selectors';\nimport { getPrivacyKey } from './helpers/privacy';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport ListItem from '../../ui/ListItem';\nimport RadioGroup from '../../ui/RadioGroup';\nimport PremiumStatusItem from './PremiumStatusItem';\nimport PrivacyLockedOption from './PrivacyLockedOption';\nimport SettingsPrivacyLastSeen from './SettingsPrivacyLastSeen';\nimport SettingsPrivacyPublicProfilePhoto from './SettingsPrivacyPublicProfilePhoto';\n\ntype OwnProps = {\n  screen: SettingsScreens;\n  isActive?: boolean;\n  onScreenSelect: (screen: SettingsScreens) => void;\n  onReset: () => void;\n};\n\ntype StateProps = {\n  currentUserId: string;\n  hasCurrentUserFullInfo?: boolean;\n  currentUserFallbackPhoto?: ApiPhoto;\n  primaryPrivacy?: ApiPrivacySettings;\n  secondaryPrivacy?: ApiPrivacySettings;\n  isPremiumRequired?: boolean;\n};\n\nconst SettingsPrivacyVisibility: FC<OwnProps & StateProps> = ({\n  screen,\n  isActive,\n  primaryPrivacy,\n  secondaryPrivacy,\n  currentUserId,\n  hasCurrentUserFullInfo,\n  currentUserFallbackPhoto,\n  isPremiumRequired,\n  onScreenSelect,\n  onReset,\n}) => {\n  useHistoryBack({\n    isActive,\n    onBack: onReset,\n  });\n\n  const secondaryScreen = useMemo(() => {\n    switch (screen) {\n      case SettingsScreens.PrivacyPhoneCall:\n        return SettingsScreens.PrivacyPhoneP2P;\n      case SettingsScreens.PrivacyPhoneNumber: {\n        return primaryPrivacy?.visibility === 'nobody' ? SettingsScreens.PrivacyAddByPhone : undefined;\n      }\n      default:\n        return undefined;\n    }\n  }, [primaryPrivacy, screen]);\n\n  return (\n    <div className=\"settings-content custom-scroll\">\n      <PrivacySubsection\n        screen={screen}\n        privacy={primaryPrivacy}\n        onScreenSelect={onScreenSelect}\n        isPremiumRequired={isPremiumRequired}\n      />\n      {screen === SettingsScreens.PrivacyProfilePhoto && primaryPrivacy?.visibility !== 'everybody' && (\n        <SettingsPrivacyPublicProfilePhoto\n          currentUserId={currentUserId}\n          hasCurrentUserFullInfo={hasCurrentUserFullInfo}\n          currentUserFallbackPhoto={currentUserFallbackPhoto}\n        />\n      )}\n      {screen === SettingsScreens.PrivacyLastSeen && (\n        <SettingsPrivacyLastSeen visibility={primaryPrivacy?.visibility} />\n      )}\n      {secondaryScreen && (\n        <PrivacySubsection\n          screen={secondaryScreen}\n          privacy={secondaryPrivacy}\n          onScreenSelect={onScreenSelect}\n        />\n      )}\n    </div>\n  );\n};\n\nfunction PrivacySubsection({\n  screen,\n  privacy,\n  onScreenSelect,\n  isPremiumRequired,\n}: {\n  screen: SettingsScreens;\n  privacy?: ApiPrivacySettings;\n  isPremiumRequired?: boolean;\n  onScreenSelect: (screen: SettingsScreens) => void;\n}) {\n  const { setPrivacyVisibility } = getActions();\n  const lang = useOldLang();\n\n  const visibilityOptions = useMemo(() => {\n    const hasNobody = screen !== SettingsScreens.PrivacyAddByPhone;\n    const options = [\n      { value: 'everybody', label: lang('P2PEverybody') },\n      {\n        value: 'contacts',\n        label: isPremiumRequired ? (\n          <PrivacyLockedOption label={lang('P2PContacts')} />\n        ) : (\n          lang('P2PContacts')\n        ),\n        hidden: isPremiumRequired,\n      },\n    ];\n\n    if (hasNobody) {\n      options.push({\n        value: 'nobody',\n        label: isPremiumRequired ? (\n          <PrivacyLockedOption label={lang('P2PNobody')} />\n        ) : (\n          lang('P2PNobody')\n        ),\n        hidden: isPremiumRequired,\n      });\n    }\n    return options;\n  }, [lang, screen, isPremiumRequired]);\n\n  const primaryExceptionLists = useMemo(() => {\n    if (screen === SettingsScreens.PrivacyAddByPhone) {\n      return {\n        shouldShowDenied: false,\n        shouldShowAllowed: false,\n      };\n    }\n\n    return {\n      shouldShowDenied: privacy?.visibility !== 'nobody',\n      shouldShowAllowed: privacy?.visibility !== 'everybody',\n    };\n  }, [privacy, screen]);\n\n  const privacyKey = getPrivacyKey(screen);\n\n  const descriptionText = useMemo(() => {\n    switch (screen) {\n      case SettingsScreens.PrivacyLastSeen:\n        return lang('CustomHelp');\n      case SettingsScreens.PrivacyAddByPhone: {\n        return privacy?.visibility === 'everybody' ? lang('PrivacyPhoneInfo') : lang('PrivacyPhoneInfo3');\n      }\n      case SettingsScreens.PrivacyVoiceMessages:\n        return lang('PrivacyVoiceMessagesInfo');\n      default:\n        return undefined;\n    }\n  }, [lang, screen, privacy]);\n\n  const headerText = useMemo(() => {\n    switch (screen) {\n      case SettingsScreens.PrivacyPhoneNumber:\n        return lang('PrivacyPhoneTitle');\n      case SettingsScreens.PrivacyAddByPhone:\n        return lang('PrivacyPhoneTitle2');\n      case SettingsScreens.PrivacyLastSeen:\n        return lang('LastSeenTitle');\n      case SettingsScreens.PrivacyProfilePhoto:\n        return lang('PrivacyProfilePhotoTitle');\n      case SettingsScreens.PrivacyBio:\n        return lang('PrivacyBioTitle');\n      case SettingsScreens.PrivacyBirthday:\n        return lang('PrivacyBirthdayTitle');\n      case SettingsScreens.PrivacyForwarding:\n        return lang('PrivacyForwardsTitle');\n      case SettingsScreens.PrivacyVoiceMessages:\n        return lang('PrivacyVoiceMessagesTitle');\n      case SettingsScreens.PrivacyGroupChats:\n        return lang('WhoCanAddMe');\n      case SettingsScreens.PrivacyPhoneCall:\n        return lang('WhoCanCallMe');\n      case SettingsScreens.PrivacyPhoneP2P:\n        return lang('PrivacyP2P');\n      default:\n        return undefined;\n    }\n  }, [lang, screen]);\n\n  const prepareSubtitle = useLastCallback((userIds?: string[], chatIds?: string[], shouldAllowPremium?: boolean) => {\n    const userIdsCount = userIds?.length || 0;\n    const chatIdsCount = chatIds?.length || 0;\n\n    if (!userIdsCount && !chatIdsCount) {\n      return shouldAllowPremium ? lang('PrivacyPremium') : lang('EditAdminAddUsers');\n    } else if (shouldAllowPremium) {\n      return lang('ContactsAndPremium');\n    }\n\n    const userCountString = userIdsCount > 0 ? lang('Users', userIdsCount) : undefined;\n    const chatCountString = chatIdsCount > 0 ? lang('Chats', chatIdsCount) : undefined;\n\n    return [userCountString, chatCountString].filter(Boolean).join(', ');\n  });\n\n  const allowedString = useMemo(() => {\n    return prepareSubtitle(privacy?.allowUserIds, privacy?.allowChatIds, privacy?.shouldAllowPremium);\n  }, [privacy]);\n\n  const blockString = useMemo(() => {\n    return prepareSubtitle(privacy?.blockUserIds, privacy?.blockChatIds);\n  }, [privacy]);\n\n  const handleVisibilityChange = useCallback((value) => {\n    setPrivacyVisibility({\n      privacyKey: privacyKey!,\n      visibility: value,\n    });\n  }, [privacyKey]);\n\n  const allowedContactsScreen = (() => {\n    switch (screen) {\n      case SettingsScreens.PrivacyPhoneNumber:\n        return SettingsScreens.PrivacyPhoneNumberAllowedContacts;\n      case SettingsScreens.PrivacyLastSeen:\n        return SettingsScreens.PrivacyLastSeenAllowedContacts;\n      case SettingsScreens.PrivacyProfilePhoto:\n        return SettingsScreens.PrivacyProfilePhotoAllowedContacts;\n      case SettingsScreens.PrivacyBio:\n        return SettingsScreens.PrivacyBioAllowedContacts;\n      case SettingsScreens.PrivacyBirthday:\n        return SettingsScreens.PrivacyBirthdayAllowedContacts;\n      case SettingsScreens.PrivacyForwarding:\n        return SettingsScreens.PrivacyForwardingAllowedContacts;\n      case SettingsScreens.PrivacyPhoneCall:\n        return SettingsScreens.PrivacyPhoneCallAllowedContacts;\n      case SettingsScreens.PrivacyPhoneP2P:\n        return SettingsScreens.PrivacyPhoneP2PAllowedContacts;\n      case SettingsScreens.PrivacyVoiceMessages:\n        return SettingsScreens.PrivacyVoiceMessagesAllowedContacts;\n      default:\n        return SettingsScreens.PrivacyGroupChatsAllowedContacts;\n    }\n  })();\n\n  const deniedContactsScreen = (() => {\n    switch (screen) {\n      case SettingsScreens.PrivacyPhoneNumber:\n        return SettingsScreens.PrivacyPhoneNumberDeniedContacts;\n      case SettingsScreens.PrivacyLastSeen:\n        return SettingsScreens.PrivacyLastSeenDeniedContacts;\n      case SettingsScreens.PrivacyProfilePhoto:\n        return SettingsScreens.PrivacyProfilePhotoDeniedContacts;\n      case SettingsScreens.PrivacyBio:\n        return SettingsScreens.PrivacyBioDeniedContacts;\n      case SettingsScreens.PrivacyBirthday:\n        return SettingsScreens.PrivacyBirthdayDeniedContacts;\n      case SettingsScreens.PrivacyForwarding:\n        return SettingsScreens.PrivacyForwardingDeniedContacts;\n      case SettingsScreens.PrivacyPhoneCall:\n        return SettingsScreens.PrivacyPhoneCallDeniedContacts;\n      case SettingsScreens.PrivacyPhoneP2P:\n        return SettingsScreens.PrivacyPhoneP2PDeniedContacts;\n      case SettingsScreens.PrivacyVoiceMessages:\n        return SettingsScreens.PrivacyVoiceMessagesDeniedContacts;\n      default:\n        return SettingsScreens.PrivacyGroupChatsDeniedContacts;\n    }\n  })();\n\n  return (\n    <>\n      <div className=\"settings-item\">\n        <h4 className=\"settings-item-header\" dir={lang.isRtl ? 'rtl' : undefined}>{headerText}</h4>\n        <RadioGroup\n          name={`visibility-${privacyKey}`}\n          options={visibilityOptions}\n          onChange={handleVisibilityChange}\n          selected={privacy?.visibility}\n        />\n        {descriptionText && (\n          <p className=\"settings-item-description-larger\" dir={lang.isRtl ? 'rtl' : undefined}>{descriptionText}</p>\n        )}\n      </div>\n      {!isPremiumRequired && (primaryExceptionLists.shouldShowAllowed || primaryExceptionLists.shouldShowDenied) && (\n        <div className=\"settings-item\">\n          <h4 className=\"settings-item-header mb-4\" dir={lang.isRtl ? 'rtl' : undefined}>\n            {lang('PrivacyExceptions')}\n          </h4>\n          {primaryExceptionLists.shouldShowAllowed && (\n            <ListItem\n              narrow\n              icon=\"add-user\"\n              // eslint-disable-next-line react/jsx-no-bind\n              onClick={() => {\n                onScreenSelect(allowedContactsScreen);\n              }}\n            >\n              <div className=\"multiline-menu-item full-size\">\n                <span className=\"title\">{lang('AlwaysAllow')}</span>\n                <span className=\"subtitle\">{allowedString}</span>\n              </div>\n            </ListItem>\n          )}\n          {primaryExceptionLists.shouldShowDenied && (\n            <ListItem\n              narrow\n              icon=\"delete-user\"\n              // eslint-disable-next-line react/jsx-no-bind\n              onClick={() => {\n                onScreenSelect(deniedContactsScreen);\n              }}\n            >\n              <div className=\"multiline-menu-item full-size\">\n                <span className=\"title\">{lang('NeverAllow')}</span>\n                <span className=\"subtitle\">{blockString}</span>\n              </div>\n            </ListItem>\n          )}\n        </div>\n      )}\n      {isPremiumRequired && <PremiumStatusItem />}\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { screen }): StateProps => {\n    let primaryPrivacy: ApiPrivacySettings | undefined;\n    let secondaryPrivacy: ApiPrivacySettings | undefined;\n\n    const {\n      currentUserId,\n      settings: { privacy },\n    } = global;\n\n    const currentUserFullInfo = selectUserFullInfo(global, currentUserId!);\n\n    switch (screen) {\n      case SettingsScreens.PrivacyPhoneNumber:\n        primaryPrivacy = privacy.phoneNumber;\n        secondaryPrivacy = privacy.addByPhone;\n        break;\n\n      case SettingsScreens.PrivacyLastSeen:\n        primaryPrivacy = privacy.lastSeen;\n        break;\n\n      case SettingsScreens.PrivacyProfilePhoto:\n        primaryPrivacy = privacy.profilePhoto;\n        break;\n\n      case SettingsScreens.PrivacyBio:\n        primaryPrivacy = privacy.bio;\n        break;\n\n      case SettingsScreens.PrivacyBirthday:\n        primaryPrivacy = privacy.birthday;\n        break;\n\n      case SettingsScreens.PrivacyPhoneP2P:\n      case SettingsScreens.PrivacyPhoneCall:\n        primaryPrivacy = privacy.phoneCall;\n        secondaryPrivacy = privacy.phoneP2P;\n        break;\n\n      case SettingsScreens.PrivacyForwarding:\n        primaryPrivacy = privacy.forwards;\n        break;\n\n      case SettingsScreens.PrivacyVoiceMessages:\n        primaryPrivacy = privacy.voiceMessages;\n        break;\n\n      case SettingsScreens.PrivacyGroupChats:\n        primaryPrivacy = privacy.chatInvite;\n        break;\n    }\n\n    if (!primaryPrivacy) {\n      return {\n        currentUserId: currentUserId!,\n        hasCurrentUserFullInfo: Boolean(currentUserFullInfo),\n        currentUserFallbackPhoto: currentUserFullInfo?.fallbackPhoto,\n      };\n    }\n\n    return {\n      primaryPrivacy,\n      secondaryPrivacy,\n      currentUserId: currentUserId!,\n      hasCurrentUserFullInfo: Boolean(currentUserFullInfo),\n      currentUserFallbackPhoto: currentUserFullInfo?.fallbackPhoto,\n      isPremiumRequired: screen === SettingsScreens.PrivacyVoiceMessages && !selectIsCurrentUserPremium(global),\n    };\n  },\n)(SettingsPrivacyVisibility));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type { GlobalState } from '../../../global/types';\nimport type { ApiPrivacySettings, CustomPeerType } from '../../../types';\nimport { SettingsScreens } from '../../../types';\n\nimport { ALL_FOLDER_ID, ARCHIVED_FOLDER_ID, SERVICE_NOTIFICATIONS_USER_ID } from '../../../config';\nimport {\n  filterChatsByName, isChatChannel, isDeletedUser,\n} from '../../../global/helpers';\nimport { unique } from '../../../util/iteratees';\nimport { CUSTOM_PEER_PREMIUM } from '../../../util/objects/customPeer';\nimport { getPrivacyKey } from './helpers/privacy';\n\nimport { useFolderManagerForOrderedIds } from '../../../hooks/useFolderManager';\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Picker from '../../common/Picker';\nimport FloatingActionButton from '../../ui/FloatingActionButton';\n\nexport type OwnProps = {\n  isAllowList?: boolean;\n  withPremiumCategory?: boolean;\n  screen: SettingsScreens;\n  isActive?: boolean;\n  onScreenSelect: (screen: SettingsScreens) => void;\n  onReset: () => void;\n};\n\ntype StateProps = {\n  currentUserId?: string;\n  settings?: ApiPrivacySettings;\n};\n\nconst PREMIUM_CATEGORY = [CUSTOM_PEER_PREMIUM];\n\nconst SettingsPrivacyVisibilityExceptionList: FC<OwnProps & StateProps> = ({\n  isAllowList,\n  withPremiumCategory,\n  screen,\n  isActive,\n  currentUserId,\n  settings,\n  onScreenSelect,\n  onReset,\n}) => {\n  const { setPrivacySettings } = getActions();\n\n  const lang = useOldLang();\n\n  const selectedContactIds = useMemo(() => {\n    if (!settings) {\n      return [];\n    }\n\n    if (isAllowList) {\n      return [...settings.allowUserIds, ...settings.allowChatIds];\n    } else {\n      return [...settings.blockUserIds, ...settings.blockChatIds];\n    }\n  }, [isAllowList, settings]);\n  const selectedCategoryTypes = useMemo(() => {\n    if (!settings) {\n      return [];\n    }\n\n    return [settings.shouldAllowPremium ? CUSTOM_PEER_PREMIUM.type : undefined].filter(Boolean);\n  }, [settings]);\n  const [searchQuery, setSearchQuery] = useState<string>('');\n  const [isSubmitShown, setIsSubmitShown] = useState<boolean>(false);\n  const [newSelectedContactIds, setNewSelectedContactIds] = useState<string[]>(selectedContactIds);\n  const [newSelectedCategoryTypes, setNewSelectedCategoryTypes] = useState<CustomPeerType[]>(selectedCategoryTypes);\n\n  // Reset selected contact ids on change from other client when screen is not active\n  useEffect(() => {\n    if (!isActive) {\n      setNewSelectedContactIds(selectedContactIds);\n      setNewSelectedCategoryTypes(selectedCategoryTypes);\n    }\n  }, [isActive, selectedCategoryTypes, selectedContactIds]);\n\n  const folderAllOrderedIds = useFolderManagerForOrderedIds(ALL_FOLDER_ID);\n  const folderArchivedOrderedIds = useFolderManagerForOrderedIds(ARCHIVED_FOLDER_ID);\n  const displayedIds = useMemo(() => {\n    // No need for expensive global updates on chats, so we avoid them\n    const chatsById = getGlobal().chats.byId;\n    const usersById = getGlobal().users.byId;\n\n    const chatIds = unique([...folderAllOrderedIds || [], ...folderArchivedOrderedIds || []])\n      .filter((chatId) => {\n        const chat = chatsById[chatId];\n        const user = usersById[chatId];\n        const isDeleted = user && isDeletedUser(user);\n        const isChannel = chat && isChatChannel(chat);\n        return chatId !== currentUserId && chatId !== SERVICE_NOTIFICATIONS_USER_ID && !isChannel && !isDeleted;\n      });\n\n    const filteredChats = filterChatsByName(lang, chatIds, chatsById, searchQuery);\n\n    // Show only relevant items\n    if (searchQuery) return filteredChats;\n\n    return unique([\n      ...selectedContactIds,\n      ...filterChatsByName(lang, chatIds, chatsById, searchQuery),\n    ]);\n  }, [folderAllOrderedIds, folderArchivedOrderedIds, selectedContactIds, lang, searchQuery, currentUserId]);\n\n  const handleSelectedCategoriesChange = useCallback((value: CustomPeerType[]) => {\n    setNewSelectedCategoryTypes(value);\n    setIsSubmitShown(true);\n  }, []);\n\n  const handleSelectedContactIdsChange = useCallback((value: string[]) => {\n    setNewSelectedContactIds(value);\n    setIsSubmitShown(true);\n  }, []);\n\n  const handleSubmit = useCallback(() => {\n    setPrivacySettings({\n      privacyKey: getPrivacyKey(screen)!,\n      isAllowList: Boolean(isAllowList),\n      updatedIds: newSelectedContactIds,\n      isPremiumAllowed: newSelectedCategoryTypes.includes(CUSTOM_PEER_PREMIUM.type) || undefined,\n    });\n\n    onScreenSelect(SettingsScreens.Privacy);\n  }, [isAllowList, newSelectedCategoryTypes, newSelectedContactIds, onScreenSelect, screen]);\n\n  useHistoryBack({\n    isActive,\n    onBack: onReset,\n  });\n\n  return (\n    <div className=\"NewChat-inner step-1\">\n      <Picker\n        categories={withPremiumCategory ? PREMIUM_CATEGORY : undefined}\n        itemIds={displayedIds || []}\n        selectedIds={newSelectedContactIds}\n        selectedCategories={newSelectedCategoryTypes}\n        filterValue={searchQuery}\n        filterPlaceholder={isAllowList ? lang('AlwaysAllowPlaceholder') : lang('NeverAllowPlaceholder')}\n        categoryPlaceholderKey=\"PrivacyUserTypes\"\n        searchInputId=\"new-group-picker-search\"\n        isSearchable\n        onSelectedIdsChange={handleSelectedContactIdsChange}\n        onSelectedCategoriesChange={handleSelectedCategoriesChange}\n        onFilterChange={setSearchQuery}\n      />\n\n      <FloatingActionButton\n        isShown={isSubmitShown}\n        onClick={handleSubmit}\n        ariaLabel={isAllowList ? lang('AlwaysAllow') : lang('NeverAllow')}\n      >\n        <i className=\"icon icon-check\" />\n      </FloatingActionButton>\n    </div>\n  );\n};\n\nfunction getCurrentPrivacySettings(global: GlobalState, screen: SettingsScreens) {\n  const { privacy } = global.settings;\n  switch (screen) {\n    case SettingsScreens.PrivacyPhoneNumberAllowedContacts:\n    case SettingsScreens.PrivacyPhoneNumberDeniedContacts:\n      return privacy.phoneNumber;\n    case SettingsScreens.PrivacyLastSeenAllowedContacts:\n    case SettingsScreens.PrivacyLastSeenDeniedContacts:\n      return privacy.lastSeen;\n    case SettingsScreens.PrivacyProfilePhotoAllowedContacts:\n    case SettingsScreens.PrivacyProfilePhotoDeniedContacts:\n      return privacy.profilePhoto;\n    case SettingsScreens.PrivacyBioAllowedContacts:\n    case SettingsScreens.PrivacyBioDeniedContacts:\n      return privacy.bio;\n    case SettingsScreens.PrivacyBirthdayAllowedContacts:\n    case SettingsScreens.PrivacyBirthdayDeniedContacts:\n      return privacy.birthday;\n    case SettingsScreens.PrivacyPhoneCallAllowedContacts:\n    case SettingsScreens.PrivacyPhoneCallDeniedContacts:\n      return privacy.phoneCall;\n    case SettingsScreens.PrivacyPhoneP2PAllowedContacts:\n    case SettingsScreens.PrivacyPhoneP2PDeniedContacts:\n      return privacy.phoneP2P;\n    case SettingsScreens.PrivacyForwardingAllowedContacts:\n    case SettingsScreens.PrivacyForwardingDeniedContacts:\n      return privacy.forwards;\n    case SettingsScreens.PrivacyVoiceMessagesAllowedContacts:\n    case SettingsScreens.PrivacyVoiceMessagesDeniedContacts:\n      return privacy.voiceMessages;\n    case SettingsScreens.PrivacyGroupChatsDeniedContacts:\n    case SettingsScreens.PrivacyGroupChatsAllowedContacts:\n      return privacy.chatInvite;\n  }\n\n  return undefined;\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { screen }): StateProps => {\n    return {\n      currentUserId: global.currentUserId,\n      settings: getCurrentPrivacySettings(global, screen),\n    };\n  },\n)(SettingsPrivacyVisibilityExceptionList));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useCallback, useMemo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiAvailableReaction } from '../../../api/types';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\n\nimport ReactionStaticEmoji from '../../common/ReactionStaticEmoji';\nimport RadioGroup from '../../ui/RadioGroup';\n\ntype OwnProps = {\n  isActive?: boolean;\n  onReset: () => void;\n};\n\ntype StateProps = {\n  availableReactions?: ApiAvailableReaction[];\n  selectedReaction?: string;\n};\n\nconst SettingsQuickReaction: FC<OwnProps & StateProps> = ({\n  isActive,\n  availableReactions,\n  selectedReaction,\n  onReset,\n}) => {\n  const { setDefaultReaction } = getActions();\n\n  useHistoryBack({\n    isActive,\n    onBack: onReset,\n  });\n\n  const options = useMemo(() => (\n    (availableReactions || []).filter((availableReaction) => !availableReaction.isInactive)\n      .map((availableReaction) => ({\n        label: (\n          <>\n            <ReactionStaticEmoji reaction={availableReaction.reaction} availableReactions={availableReactions} />\n            {availableReaction.title}\n          </>\n        ),\n        value: availableReaction.reaction.emoticon,\n      }))\n  ), [availableReactions]);\n\n  const handleChange = useCallback((reaction: string) => {\n    setDefaultReaction({\n      reaction: { emoticon: reaction },\n    });\n  }, [setDefaultReaction]);\n\n  return (\n    <div className=\"settings-content settings-item custom-scroll settings-quick-reaction\">\n      <RadioGroup\n        name=\"quick-reaction-settings\"\n        options={options}\n        selected={selectedReaction}\n        onChange={handleChange}\n      />\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global) => {\n    const { config, reactions } = global;\n\n    return {\n      availableReactions: reactions.availableReactions,\n      selectedReaction: config?.defaultReaction,\n    };\n  },\n)(SettingsQuickReaction));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useMemo, useRef,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiAvailableReaction,\n  ApiReaction,\n  ApiSticker,\n  ApiStickerSet,\n} from '../../../api/types';\nimport type { ISettings } from '../../../types';\nimport { SettingsScreens } from '../../../types';\n\nimport { selectCanPlayAnimatedEmojis } from '../../../global/selectors';\nimport { pick } from '../../../util/iteratees';\nimport { REM } from '../../common/helpers/mediaDimensions';\nimport renderText from '../../common/helpers/renderText';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport { useIntersectionObserver } from '../../../hooks/useIntersectionObserver';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport ReactionStaticEmoji from '../../common/ReactionStaticEmoji';\nimport StickerSetCard from '../../common/StickerSetCard';\nimport Checkbox from '../../ui/Checkbox';\nimport ListItem from '../../ui/ListItem';\n\nconst DEFAULT_REACTION_SIZE = 1.5 * REM;\n\ntype OwnProps = {\n  isActive?: boolean;\n  onScreenSelect: (screen: SettingsScreens) => void;\n  onReset: () => void;\n};\n\ntype StateProps =\n  Pick<ISettings, (\n    'shouldSuggestStickers' | 'shouldUpdateStickerSetOrder'\n  )> & {\n    addedSetIds?: string[];\n    customEmojiSetIds?: string[];\n    stickerSetsById: Record<string, ApiStickerSet>;\n    defaultReaction?: ApiReaction;\n    availableReactions?: ApiAvailableReaction[];\n    canPlayAnimatedEmojis: boolean;\n  };\n\nconst SettingsStickers: FC<OwnProps & StateProps> = ({\n  isActive,\n  addedSetIds,\n  customEmojiSetIds,\n  stickerSetsById,\n  defaultReaction,\n  shouldSuggestStickers,\n  shouldUpdateStickerSetOrder,\n  availableReactions,\n  canPlayAnimatedEmojis,\n  onReset,\n  onScreenSelect,\n}) => {\n  const {\n    setSettingOption,\n    openStickerSet,\n  } = getActions();\n  const lang = useOldLang();\n\n  // eslint-disable-next-line no-null/no-null\n  const stickerSettingsRef = useRef<HTMLDivElement>(null);\n  const { observe: observeIntersectionForCovers } = useIntersectionObserver({ rootRef: stickerSettingsRef });\n\n  const handleStickerSetClick = useCallback((sticker: ApiSticker) => {\n    openStickerSet({\n      stickerSetInfo: sticker.stickerSetInfo,\n    });\n  }, [openStickerSet]);\n\n  const handleSuggestStickerSetOrderChange = useCallback((newValue: boolean) => {\n    setSettingOption({ shouldUpdateStickerSetOrder: newValue });\n  }, [setSettingOption]);\n\n  const handleSuggestStickersChange = useCallback((newValue: boolean) => {\n    setSettingOption({ shouldSuggestStickers: newValue });\n  }, [setSettingOption]);\n\n  const stickerSets = useMemo(() => (\n    addedSetIds && Object.values(pick(stickerSetsById, addedSetIds))\n  ), [addedSetIds, stickerSetsById]);\n\n  useHistoryBack({\n    isActive,\n    onBack: onReset,\n  });\n\n  return (\n    <div className=\"settings-content custom-scroll\">\n      <div className=\"settings-item\">\n        <Checkbox\n          label={lang('SuggestStickers')}\n          checked={shouldSuggestStickers}\n          onCheck={handleSuggestStickersChange}\n        />\n        <ListItem\n          className=\"mt-4\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => onScreenSelect(SettingsScreens.CustomEmoji)}\n          icon=\"smile\"\n        >\n          {lang('StickersList.EmojiItem')}\n          {customEmojiSetIds && <span className=\"settings-item__current-value\">{customEmojiSetIds.length}</span>}\n        </ListItem>\n        {defaultReaction && (\n          <ListItem\n            className=\"SettingsDefaultReaction\"\n            // eslint-disable-next-line react/jsx-no-bind\n            onClick={() => onScreenSelect(SettingsScreens.QuickReaction)}\n          >\n            <ReactionStaticEmoji\n              reaction={defaultReaction}\n              className=\"current-default-reaction\"\n              size={DEFAULT_REACTION_SIZE}\n              availableReactions={availableReactions}\n            />\n            <div className=\"title\">{lang('DoubleTapSetting')}</div>\n          </ListItem>\n        )}\n      </div>\n      <div className=\"settings-item\">\n        <h4 className=\"settings-item-header\" dir={lang.isRtl ? 'rtl' : undefined}>\n          {lang('InstalledStickers.DynamicPackOrder')}\n        </h4>\n        <Checkbox\n          label={lang('InstalledStickers.DynamicPackOrder')}\n          checked={shouldUpdateStickerSetOrder}\n          onCheck={handleSuggestStickerSetOrderChange}\n        />\n        <p className=\"settings-item-description mt-3\" dir=\"auto\">\n          {lang('InstalledStickers.DynamicPackOrderInfo')}\n        </p>\n      </div>\n      {stickerSets && (\n        <div className=\"settings-item\">\n          <h4 className=\"settings-item-header\" dir={lang.isRtl ? 'rtl' : undefined}>\n            {lang('ChooseStickerMyStickerSets')}\n          </h4>\n          <div ref={stickerSettingsRef}>\n            {stickerSets.map((stickerSet: ApiStickerSet) => (\n              <StickerSetCard\n                key={stickerSet.id}\n                stickerSet={stickerSet}\n                observeIntersection={observeIntersectionForCovers}\n                onClick={handleStickerSetClick}\n                noPlay={!canPlayAnimatedEmojis}\n              />\n            ))}\n          </div>\n          <p className=\"settings-item-description mt-3\" dir=\"auto\">\n            {renderText(lang('StickersBotInfo'), ['links'])}\n          </p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    return {\n      ...pick(global.settings.byKey, [\n        'shouldSuggestStickers',\n        'shouldUpdateStickerSetOrder',\n      ]),\n      addedSetIds: global.stickers.added.setIds,\n      customEmojiSetIds: global.customEmojis.added.setIds,\n      stickerSetsById: global.stickers.setsById,\n      defaultReaction: global.config?.defaultReaction,\n      availableReactions: global.reactions.availableReactions,\n      canPlayAnimatedEmojis: selectCanPlayAnimatedEmojis(global),\n    };\n  },\n)(SettingsStickers));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect, useRef,\n  useState,\n} from '../../../lib/teact/teact';\n\nimport type { ApiWallpaper } from '../../../api/types';\nimport type { ThemeKey } from '../../../types';\nimport { UPLOADING_WALLPAPER_SLUG } from '../../../types';\n\nimport { CUSTOM_BG_CACHE_NAME } from '../../../config';\nimport buildClassName from '../../../util/buildClassName';\nimport * as cacheApi from '../../../util/cacheApi';\nimport { fetchBlob } from '../../../util/files';\n\nimport useCanvasBlur from '../../../hooks/useCanvasBlur';\nimport useMedia from '../../../hooks/useMedia';\nimport useMediaWithLoadProgress from '../../../hooks/useMediaWithLoadProgress';\nimport usePrevious from '../../../hooks/usePrevious';\nimport useShowTransition from '../../../hooks/useShowTransition';\n\nimport ProgressSpinner from '../../ui/ProgressSpinner';\n\nimport './WallpaperTile.scss';\n\ntype OwnProps = {\n  wallpaper: ApiWallpaper;\n  theme: ThemeKey;\n  isSelected: boolean;\n  onClick: (slug: string) => void;\n};\n\nconst WallpaperTile: FC<OwnProps> = ({\n  wallpaper,\n  theme,\n  isSelected,\n  onClick,\n}) => {\n  const { slug, document } = wallpaper;\n  const localMediaHash = `wallpaper${document.id!}`;\n  const localBlobUrl = document.previewBlobUrl;\n  const previewBlobUrl = useMedia(`${localMediaHash}?size=m`);\n  const thumbRef = useCanvasBlur(document.thumbnail?.dataUri, Boolean(previewBlobUrl), true);\n  const { transitionClassNames } = useShowTransition(\n    Boolean(previewBlobUrl || localBlobUrl),\n    undefined,\n    undefined,\n    'slow',\n  );\n  const isLoadingRef = useRef(false);\n  const [isLoadAllowed, setIsLoadAllowed] = useState(false);\n  const {\n    mediaData: fullMedia, loadProgress,\n  } = useMediaWithLoadProgress(localMediaHash, !isLoadAllowed);\n  const wasLoadDisabled = usePrevious(isLoadAllowed) === false;\n  const { shouldRender: shouldRenderSpinner, transitionClassNames: spinnerClassNames } = useShowTransition(\n    (isLoadAllowed && !fullMedia) || slug === UPLOADING_WALLPAPER_SLUG,\n    undefined,\n    wasLoadDisabled,\n    'slow',\n  );\n  // To prevent triggering of the effect for useCallback\n  const cacheKeyRef = useRef<string>();\n  cacheKeyRef.current = theme;\n\n  const handleSelect = useCallback(() => {\n    (async () => {\n      const blob = await fetchBlob(fullMedia!);\n      await cacheApi.save(CUSTOM_BG_CACHE_NAME, cacheKeyRef.current!, blob);\n      onClick(slug);\n    })();\n  }, [fullMedia, onClick, slug]);\n\n  useEffect(() => {\n    // If we've clicked on a wallpaper, select it when full media is loaded\n    if (fullMedia && isLoadingRef.current) {\n      handleSelect();\n      isLoadingRef.current = false;\n    }\n  }, [fullMedia, handleSelect]);\n\n  const handleClick = useCallback(() => {\n    if (fullMedia) {\n      handleSelect();\n    } else {\n      isLoadingRef.current = true;\n      setIsLoadAllowed((isAllowed) => !isAllowed);\n    }\n  }, [fullMedia, handleSelect]);\n\n  const className = buildClassName(\n    'WallpaperTile',\n    isSelected && 'selected',\n  );\n\n  return (\n    <div className={className} onClick={handleClick}>\n      <div className=\"media-inner\">\n        <canvas\n          ref={thumbRef}\n          className=\"thumbnail\"\n        />\n        <img\n          src={previewBlobUrl || localBlobUrl}\n          className={buildClassName('full-media', transitionClassNames)}\n          alt=\"\"\n          draggable={false}\n        />\n        {shouldRenderSpinner && (\n          <div className={buildClassName('spinner-container', spinnerClassNames)}>\n            <ProgressSpinner progress={loadProgress} onClick={handleClick} />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(WallpaperTile);\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, { memo, useCallback } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type { ApiChatFolder } from '../../../../api/types';\nimport type { FolderEditDispatch, FoldersState } from '../../../../hooks/reducers/useFoldersReducer';\nimport { SettingsScreens } from '../../../../types';\n\nimport { selectChatFilters } from '../../../../hooks/reducers/useFoldersReducer';\n\nimport SettingsFoldersChatFilters from './SettingsFoldersChatFilters';\nimport SettingsFoldersEdit, { ERROR_NO_CHATS, ERROR_NO_TITLE } from './SettingsFoldersEdit';\nimport SettingsFoldersMain from './SettingsFoldersMain';\nimport SettingsShareChatlist from './SettingsShareChatlist';\n\nimport './SettingsFolders.scss';\n\nconst TRANSITION_DURATION = 200;\n\nexport type OwnProps = {\n  currentScreen: SettingsScreens;\n  shownScreen: SettingsScreens;\n  state: FoldersState;\n  dispatch: FolderEditDispatch;\n  isActive?: boolean;\n  onScreenSelect: (screen: SettingsScreens) => void;\n  onReset: () => void;\n};\n\nconst SettingsFolders: FC<OwnProps> = ({\n  currentScreen,\n  shownScreen,\n  state,\n  dispatch,\n  isActive,\n  onScreenSelect,\n  onReset,\n}) => {\n  const {\n    openShareChatFolderModal,\n    editChatFolder,\n    addChatFolder,\n  } = getActions();\n\n  const handleReset = useCallback(() => {\n    if (\n      currentScreen === SettingsScreens.FoldersCreateFolder\n      || currentScreen === SettingsScreens.FoldersEditFolder\n      || currentScreen === SettingsScreens.FoldersEditFolderFromChatList\n      || currentScreen === SettingsScreens.FoldersEditFolderInvites\n    ) {\n      setTimeout(() => {\n        dispatch({ type: 'reset' });\n      }, TRANSITION_DURATION);\n    }\n\n    if (\n      currentScreen === SettingsScreens.FoldersIncludedChats\n      || currentScreen === SettingsScreens.FoldersExcludedChats\n    ) {\n      if (state.mode === 'create') {\n        onScreenSelect(SettingsScreens.FoldersCreateFolder);\n      } else {\n        onScreenSelect(SettingsScreens.FoldersEditFolder);\n      }\n      return;\n    }\n\n    onReset();\n  }, [\n    state.mode, dispatch,\n    currentScreen, onReset, onScreenSelect,\n  ]);\n\n  const isCreating = state.mode === 'create';\n\n  const saveState = useCallback((newState: FoldersState) => {\n    const { title } = newState.folder;\n\n    if (!title) {\n      dispatch({ type: 'setError', payload: ERROR_NO_TITLE });\n      return false;\n    }\n\n    const {\n      selectedChatIds: includedChatIds,\n      selectedChatTypes: includedChatTypes,\n    } = selectChatFilters(newState, 'included');\n\n    if (!includedChatIds.length && !Object.keys(includedChatTypes).length) {\n      dispatch({ type: 'setError', payload: ERROR_NO_CHATS });\n      return false;\n    }\n\n    if (!isCreating) {\n      editChatFolder({ id: newState.folderId!, folderUpdate: newState.folder });\n    } else {\n      addChatFolder({ folder: newState.folder as ApiChatFolder });\n    }\n\n    dispatch({ type: 'setError', payload: undefined });\n    dispatch({ type: 'setIsTouched', payload: false });\n\n    return true;\n  }, [dispatch, isCreating]);\n\n  const handleSaveFolder = useCallback((cb?: NoneToVoidFunction) => {\n    if (!saveState(state)) {\n      return;\n    }\n    cb?.();\n  }, [saveState, state]);\n\n  const handleSaveFilter = useCallback(() => {\n    const newState = dispatch({ type: 'saveFilters' });\n    handleReset();\n    saveState(newState);\n  }, [dispatch, handleReset, saveState]);\n\n  const handleCreateFolder = useCallback(() => {\n    dispatch({ type: 'reset' });\n    onScreenSelect(SettingsScreens.FoldersCreateFolder);\n  }, [onScreenSelect, dispatch]);\n\n  const handleEditFolder = useCallback((folder: ApiChatFolder) => {\n    dispatch({ type: 'editFolder', payload: folder });\n    onScreenSelect(SettingsScreens.FoldersEditFolder);\n  }, [dispatch, onScreenSelect]);\n\n  const handleAddIncludedChats = useCallback(() => {\n    dispatch({ type: 'editIncludeFilters' });\n    onScreenSelect(currentScreen === SettingsScreens.FoldersEditFolderFromChatList\n      ? SettingsScreens.FoldersIncludedChatsFromChatList\n      : SettingsScreens.FoldersIncludedChats);\n  }, [currentScreen, dispatch, onScreenSelect]);\n\n  const handleAddExcludedChats = useCallback(() => {\n    dispatch({ type: 'editExcludeFilters' });\n    onScreenSelect(currentScreen === SettingsScreens.FoldersEditFolderFromChatList\n      ? SettingsScreens.FoldersExcludedChatsFromChatList\n      : SettingsScreens.FoldersExcludedChats);\n  }, [currentScreen, dispatch, onScreenSelect]);\n\n  const handleShareFolder = useCallback(() => {\n    openShareChatFolderModal({ folderId: state.folderId!, noRequestNextScreen: true });\n    dispatch({ type: 'setIsChatlist', payload: true });\n    onScreenSelect(SettingsScreens.FoldersShare);\n  }, [dispatch, onScreenSelect, state.folderId]);\n\n  const handleOpenInvite = useCallback((url: string) => {\n    openShareChatFolderModal({ folderId: state.folderId!, url, noRequestNextScreen: true });\n    onScreenSelect(SettingsScreens.FoldersShare);\n  }, [onScreenSelect, state.folderId]);\n\n  switch (currentScreen) {\n    case SettingsScreens.Folders:\n      return (\n        <SettingsFoldersMain\n          onCreateFolder={handleCreateFolder}\n          onEditFolder={handleEditFolder}\n          isActive={isActive || [\n            SettingsScreens.FoldersCreateFolder,\n            SettingsScreens.FoldersEditFolder,\n            SettingsScreens.FoldersIncludedChats,\n            SettingsScreens.FoldersExcludedChats,\n          ].includes(shownScreen)}\n          onReset={onReset}\n        />\n      );\n    case SettingsScreens.FoldersCreateFolder:\n    case SettingsScreens.FoldersEditFolder:\n    case SettingsScreens.FoldersEditFolderFromChatList:\n    case SettingsScreens.FoldersEditFolderInvites:\n      return (\n        <SettingsFoldersEdit\n          state={state}\n          dispatch={dispatch}\n          onAddIncludedChats={handleAddIncludedChats}\n          onAddExcludedChats={handleAddExcludedChats}\n          onShareFolder={handleShareFolder}\n          onOpenInvite={handleOpenInvite}\n          onReset={handleReset}\n          isActive={isActive || [\n            SettingsScreens.FoldersIncludedChats,\n            SettingsScreens.FoldersExcludedChats,\n          ].includes(shownScreen)}\n          isOnlyInvites={currentScreen === SettingsScreens.FoldersEditFolderInvites}\n          onBack={onReset}\n          onSaveFolder={handleSaveFolder}\n        />\n      );\n    case SettingsScreens.FoldersIncludedChats:\n    case SettingsScreens.FoldersIncludedChatsFromChatList:\n      return (\n        <SettingsFoldersChatFilters\n          mode=\"included\"\n          state={state}\n          dispatch={dispatch}\n          onReset={handleReset}\n          onSaveFilter={handleSaveFilter}\n          isActive={isActive}\n        />\n      );\n    case SettingsScreens.FoldersExcludedChats:\n    case SettingsScreens.FoldersExcludedChatsFromChatList:\n      return (\n        <SettingsFoldersChatFilters\n          mode=\"excluded\"\n          state={state}\n          dispatch={dispatch}\n          onReset={handleReset}\n          onSaveFilter={handleSaveFilter}\n          isActive={isActive}\n        />\n      );\n\n    case SettingsScreens.FoldersShare:\n      return (\n        <SettingsShareChatlist\n          isActive={isActive}\n          onReset={handleReset}\n        />\n      );\n\n    default:\n      return undefined;\n  }\n};\n\nexport default memo(SettingsFolders);\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../../global';\n\nimport type { FolderEditDispatch, FoldersState } from '../../../../hooks/reducers/useFoldersReducer';\n\nimport { ALL_FOLDER_ID, ARCHIVED_FOLDER_ID } from '../../../../config';\nimport { filterChatsByName } from '../../../../global/helpers';\nimport { selectCurrentLimit } from '../../../../global/selectors/limits';\nimport { unique } from '../../../../util/iteratees';\nimport { CUSTOM_PEER_EXCLUDED_CHAT_TYPES, CUSTOM_PEER_INCLUDED_CHAT_TYPES } from '../../../../util/objects/customPeer';\n\nimport { selectChatFilters } from '../../../../hooks/reducers/useFoldersReducer';\nimport { useFolderManagerForOrderedIds } from '../../../../hooks/useFolderManager';\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport Icon from '../../../common/icons/Icon';\nimport Picker from '../../../common/Picker';\nimport FloatingActionButton from '../../../ui/FloatingActionButton';\nimport Loading from '../../../ui/Loading';\n\ntype StateProps = {\n  maxChats: number;\n};\n\ntype OwnProps = {\n  mode: 'included' | 'excluded';\n  state: FoldersState;\n  dispatch: FolderEditDispatch;\n  isActive?: boolean;\n  onReset: VoidFunction;\n  onSaveFilter: VoidFunction;\n};\n\nconst SettingsFoldersChatFilters: FC<OwnProps & StateProps> = ({\n  mode,\n  state,\n  dispatch,\n  isActive,\n  onReset,\n  onSaveFilter,\n  maxChats,\n}) => {\n  const lang = useOldLang();\n\n  const { openLimitReachedModal } = getActions();\n\n  const { chatFilter } = state;\n  const { selectedChatIds, selectedChatTypes } = selectChatFilters(state, mode, true);\n  const chatTypes = mode === 'included' ? CUSTOM_PEER_INCLUDED_CHAT_TYPES : CUSTOM_PEER_EXCLUDED_CHAT_TYPES;\n\n  const [isTouched, setIsTouched] = useState(false);\n\n  const folderAllOrderedIds = useFolderManagerForOrderedIds(ALL_FOLDER_ID);\n  const folderArchivedOrderedIds = useFolderManagerForOrderedIds(ARCHIVED_FOLDER_ID);\n\n  const shouldHideChatTypes = state.folder.isChatList;\n\n  useEffect(() => {\n    if (!isActive) {\n      setIsTouched(false);\n    }\n  }, [isActive]);\n\n  const displayedIds = useMemo(() => {\n    // No need for expensive global updates on chats, so we avoid them\n    const chatsById = getGlobal().chats.byId;\n\n    const chatIds = [...folderAllOrderedIds || [], ...folderArchivedOrderedIds || []];\n    return unique([\n      ...filterChatsByName(lang, chatIds, chatsById, chatFilter),\n    ]);\n  }, [folderAllOrderedIds, folderArchivedOrderedIds, lang, chatFilter]);\n\n  const handleFilterChange = useLastCallback((newFilter: string) => {\n    dispatch({\n      type: 'setChatFilter',\n      payload: newFilter,\n    });\n    setIsTouched(true);\n  });\n\n  const handleSelectedIdsChange = useLastCallback((ids: string[]) => {\n    if (mode === 'included') {\n      if (ids.length >= maxChats) {\n        openLimitReachedModal({\n          limit: 'dialogFiltersChats',\n        });\n        return;\n      }\n      dispatch({\n        type: 'setIncludeFilters',\n        payload: { ...state.includeFilters, includedChatIds: ids },\n      });\n    } else {\n      dispatch({\n        type: 'setExcludeFilters',\n        payload: { ...state.excludeFilters, excludedChatIds: ids },\n      });\n    }\n    setIsTouched(true);\n  });\n\n  const handleSelectedChatTypesChange = useLastCallback((keys: string[]) => {\n    const newFilters: Record<string, boolean> = {};\n    keys.forEach((key) => {\n      newFilters[key] = true;\n    });\n\n    if (mode === 'included') {\n      dispatch({\n        type: 'setIncludeFilters',\n        payload: {\n          includedChatIds: selectedChatIds,\n          ...newFilters,\n        },\n      });\n    } else {\n      dispatch({\n        type: 'setExcludeFilters',\n        payload: {\n          excludedChatIds: selectedChatIds,\n          ...newFilters,\n        },\n      });\n    }\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: onReset,\n  });\n\n  if (!displayedIds) {\n    return <Loading />;\n  }\n\n  return (\n    <div className=\"Picker settings-folders-chat-list\">\n      <Picker\n        categories={shouldHideChatTypes ? undefined : chatTypes}\n        itemIds={displayedIds}\n        selectedIds={selectedChatIds}\n        selectedCategories={selectedChatTypes}\n        filterValue={chatFilter}\n        filterPlaceholder={lang('Search')}\n        categoryPlaceholderKey=\"FilterChatTypes\"\n        searchInputId=\"new-group-picker-search\"\n        isSearchable\n        isRoundCheckbox\n        onSelectedIdsChange={handleSelectedIdsChange}\n        onSelectedCategoriesChange={handleSelectedChatTypesChange}\n        onFilterChange={handleFilterChange}\n      />\n\n      <FloatingActionButton\n        isShown={isTouched}\n        onClick={onSaveFilter}\n        ariaLabel={lang('Save')}\n      >\n        <Icon name=\"check\" />\n      </FloatingActionButton>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    return {\n      maxChats: selectCurrentLimit(global, 'dialogFiltersChats'),\n    };\n  },\n)(SettingsFoldersChatFilters));\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect, useMemo, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../../global';\n\nimport type { ApiChatlistExportedInvite } from '../../../../api/types';\nimport type {\n  FolderEditDispatch,\n  FoldersState,\n} from '../../../../hooks/reducers/useFoldersReducer';\n\nimport { STICKER_SIZE_FOLDER_SETTINGS } from '../../../../config';\nimport { isUserId } from '../../../../global/helpers';\nimport { selectCanShareFolder } from '../../../../global/selectors';\nimport { selectCurrentLimit } from '../../../../global/selectors/limits';\nimport { findIntersectionWithSet } from '../../../../util/iteratees';\nimport { MEMO_EMPTY_ARRAY } from '../../../../util/memo';\nimport { LOCAL_TGS_URLS } from '../../../common/helpers/animatedAssets';\n\nimport {\n  EXCLUDED_CHAT_TYPES,\n  INCLUDED_CHAT_TYPES,\n  selectChatFilters,\n} from '../../../../hooks/reducers/useFoldersReducer';\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport AnimatedIcon from '../../../common/AnimatedIcon';\nimport GroupChatInfo from '../../../common/GroupChatInfo';\nimport Icon from '../../../common/icons/Icon';\nimport PrivateChatInfo from '../../../common/PrivateChatInfo';\nimport FloatingActionButton from '../../../ui/FloatingActionButton';\nimport InputText from '../../../ui/InputText';\nimport ListItem from '../../../ui/ListItem';\nimport Spinner from '../../../ui/Spinner';\n\ntype OwnProps = {\n  state: FoldersState;\n  dispatch: FolderEditDispatch;\n  onAddIncludedChats: VoidFunction;\n  onAddExcludedChats: VoidFunction;\n  onShareFolder: VoidFunction;\n  onOpenInvite: (url: string) => void;\n  isActive?: boolean;\n  isOnlyInvites?: boolean;\n  onReset: () => void;\n  onBack: () => void;\n  onSaveFolder: (cb?: VoidFunction) => void;\n};\n\ntype StateProps = {\n  loadedActiveChatIds?: string[];\n  loadedArchivedChatIds?: string[];\n  invites?: ApiChatlistExportedInvite[];\n  isRemoved?: boolean;\n  maxInviteLinks: number;\n  maxChatLists: number;\n  chatListCount: number;\n};\n\nconst SUBMIT_TIMEOUT = 500;\n\nconst INITIAL_CHATS_LIMIT = 5;\n\nexport const ERROR_NO_TITLE = 'Please provide a title for this folder.';\nexport const ERROR_NO_CHATS = 'ChatList.Filter.Error.Empty';\n\nconst SettingsFoldersEdit: FC<OwnProps & StateProps> = ({\n  state,\n  dispatch,\n  onAddIncludedChats,\n  onAddExcludedChats,\n  onShareFolder,\n  onOpenInvite,\n  isActive,\n  onReset,\n  isRemoved,\n  onBack,\n  loadedActiveChatIds,\n  isOnlyInvites,\n  loadedArchivedChatIds,\n  invites,\n  maxInviteLinks,\n  maxChatLists,\n  chatListCount,\n  onSaveFolder,\n}) => {\n  const {\n    loadChatlistInvites,\n    openLimitReachedModal,\n    showNotification,\n  } = getActions();\n\n  const isCreating = state.mode === 'create';\n  const isEditingChatList = state.folder.isChatList;\n\n  const [isIncludedChatsListExpanded, setIsIncludedChatsListExpanded] = useState(false);\n  const [isExcludedChatsListExpanded, setIsExcludedChatsListExpanded] = useState(false);\n\n  useEffect(() => {\n    if (isRemoved) {\n      onReset();\n    }\n  }, [isRemoved, onReset]);\n\n  useEffect(() => {\n    if (isActive && state.folderId && state.folder.isChatList) {\n      loadChatlistInvites({ folderId: state.folderId });\n    }\n  }, [isActive, state.folder.isChatList, state.folderId]);\n\n  const {\n    selectedChatIds: includedChatIds,\n    selectedChatTypes: includedChatTypes,\n  } = selectChatFilters(state, 'included');\n  const {\n    selectedChatIds: excludedChatIds,\n    selectedChatTypes: excludedChatTypes,\n  } = selectChatFilters(state, 'excluded');\n\n  useEffect(() => {\n    setIsIncludedChatsListExpanded(false);\n    setIsExcludedChatsListExpanded(false);\n  }, [state.folderId]);\n\n  const [visibleIncludedChatIds, visibleExcludedChatIds] = useMemo(() => {\n    const allLoadedChatsSet = new Set([\n      ...(loadedActiveChatIds || []),\n      ...(loadedArchivedChatIds || []),\n    ]);\n\n    const loadedIncludedChatIds = findIntersectionWithSet(includedChatIds, allLoadedChatsSet);\n    const loadedExcludedChatIds = findIntersectionWithSet(excludedChatIds, allLoadedChatsSet);\n\n    return [\n      isIncludedChatsListExpanded\n        ? loadedIncludedChatIds\n        : loadedIncludedChatIds.slice(0, INITIAL_CHATS_LIMIT - includedChatTypes.length),\n      isExcludedChatsListExpanded\n        ? loadedExcludedChatIds\n        : loadedExcludedChatIds.slice(0, INITIAL_CHATS_LIMIT - excludedChatTypes.length),\n    ];\n  }, [\n    excludedChatIds, includedChatIds, includedChatTypes, excludedChatTypes,\n    isExcludedChatsListExpanded, isIncludedChatsListExpanded,\n    loadedActiveChatIds, loadedArchivedChatIds,\n  ]);\n\n  const lang = useOldLang();\n\n  useHistoryBack({\n    isActive,\n    onBack,\n  });\n\n  const handleChange = useCallback((event: React.ChangeEvent<HTMLInputElement>) => {\n    const { currentTarget } = event;\n    dispatch({ type: 'setTitle', payload: currentTarget.value.trim() });\n  }, [dispatch]);\n\n  const handleSubmit = useCallback(() => {\n    dispatch({ type: 'setIsLoading', payload: true });\n\n    onSaveFolder(() => {\n      setTimeout(() => {\n        onReset();\n      }, SUBMIT_TIMEOUT);\n    });\n  }, [dispatch, onSaveFolder, onReset]);\n\n  const handleCreateInviteClick = useCallback(() => {\n    if (!invites) {\n      if (isCreating) {\n        onSaveFolder(onShareFolder);\n      }\n      return;\n    }\n\n    // Ignoring global updates is a known drawback here\n    if (!selectCanShareFolder(getGlobal(), state.folderId!)) {\n      showNotification({ message: lang('ChatList.Filter.InviteLink.IncludeExcludeError') });\n      return;\n    }\n\n    if (chatListCount >= maxChatLists && !state.folder.isChatList) {\n      openLimitReachedModal({\n        limit: 'chatlistJoined',\n      });\n      return;\n    }\n\n    if (invites.length < maxInviteLinks) {\n      if (state.isTouched) {\n        onSaveFolder(onShareFolder);\n      } else {\n        onShareFolder();\n      }\n      return;\n    }\n\n    openLimitReachedModal({\n      limit: 'chatlistInvites',\n    });\n  }, [\n    invites, state.folderId, state.isTouched, chatListCount, maxInviteLinks, isCreating, onSaveFolder,\n    onShareFolder, lang, maxChatLists, state.folder.isChatList,\n  ]);\n\n  const handleEditInviteClick = useCallback((e: React.MouseEvent<HTMLElement>, url: string) => {\n    if (state.isTouched) {\n      onSaveFolder(() => onOpenInvite(url));\n    } else {\n      onOpenInvite(url);\n    }\n  }, [onSaveFolder, onOpenInvite, state.isTouched]);\n\n  function renderChatType(key: string, mode: 'included' | 'excluded') {\n    const chatType = mode === 'included'\n      ? INCLUDED_CHAT_TYPES.find(({ key: typeKey }) => typeKey === key)\n      : EXCLUDED_CHAT_TYPES.find(({ key: typeKey }) => typeKey === key);\n\n    if (!chatType) {\n      return undefined;\n    }\n\n    return (\n      <ListItem\n        key={chatType.key}\n        className=\"settings-folders-list-item mb-1\"\n        icon={chatType.icon}\n        narrow\n        inactive\n      >\n        {lang(chatType.title)}\n      </ListItem>\n    );\n  }\n\n  function renderChats(mode: 'included' | 'excluded') {\n    const selectedChatTypes = mode === 'included' ? includedChatTypes : excludedChatTypes;\n    const visibleChatIds = mode === 'included' ? visibleIncludedChatIds : visibleExcludedChatIds;\n\n    const isExpanded = mode === 'included' ? isIncludedChatsListExpanded : isExcludedChatsListExpanded;\n    const allChatIds = mode === 'included' ? includedChatIds : excludedChatIds;\n    const leftChatsCount = allChatIds.length - visibleChatIds.length;\n    const clickHandler = mode === 'included'\n      ? () => setIsIncludedChatsListExpanded(true)\n      : () => setIsExcludedChatsListExpanded(true);\n\n    return (\n      <>\n        {selectedChatTypes.map((key) => renderChatType(key, mode))}\n        {visibleChatIds.map((id) => (\n          <ListItem\n            className=\"settings-folders-list-item mb-1\"\n            narrow\n            inactive\n          >\n            {isUserId(id) ? (\n              <PrivateChatInfo avatarSize=\"small\" userId={id} />\n            ) : (\n              <GroupChatInfo avatarSize=\"small\" chatId={id} />\n            )}\n          </ListItem>\n        ))}\n        {(!isExpanded && leftChatsCount > 0) && (\n          <ListItem\n            key=\"load-more\"\n            // eslint-disable-next-line react/jsx-no-bind\n            onClick={clickHandler}\n          >\n            <Icon name=\"down\" className=\"down\" />\n            {lang('FilterShowMoreChats', leftChatsCount, 'i')}\n          </ListItem>\n        )}\n      </>\n    );\n  }\n\n  return (\n    <div className=\"settings-fab-wrapper\">\n      <div className=\"settings-content no-border custom-scroll\">\n        <div className=\"settings-content-header\">\n          <AnimatedIcon\n            size={STICKER_SIZE_FOLDER_SETTINGS}\n            tgsUrl={LOCAL_TGS_URLS.FoldersNew}\n            play={String(state.folderId)}\n            className=\"settings-content-icon\"\n          />\n\n          {isCreating && (\n            <p className=\"settings-item-description mb-3\" dir={lang.isRtl ? 'rtl' : undefined}>\n              {lang('FilterIncludeInfo')}\n            </p>\n          )}\n\n          <InputText\n            className=\"mb-0\"\n            label={lang('FilterNameHint')}\n            value={state.folder.title}\n            onChange={handleChange}\n            error={state.error && state.error === ERROR_NO_TITLE ? ERROR_NO_TITLE : undefined}\n          />\n        </div>\n\n        {!isOnlyInvites && (\n          <div className=\"settings-item pt-3\">\n            {state.error && state.error === ERROR_NO_CHATS && (\n              <p className=\"settings-item-description color-danger mb-2\" dir={lang.isRtl ? 'rtl' : undefined}>\n                {lang(state.error)}\n              </p>\n            )}\n\n            <h4 className=\"settings-item-header mb-3\" dir={lang.isRtl ? 'rtl' : undefined}>{lang('FilterInclude')}</h4>\n\n            <ListItem\n              className=\"settings-folders-list-item color-primary mb-0\"\n              icon=\"add\"\n              onClick={onAddIncludedChats}\n            >\n              {lang('FilterAddChats')}\n            </ListItem>\n\n            {renderChats('included')}\n          </div>\n        )}\n\n        {!isOnlyInvites && !isEditingChatList && (\n          <div className=\"settings-item pt-3\">\n            <h4 className=\"settings-item-header mb-3\" dir={lang.isRtl ? 'rtl' : undefined}>{lang('FilterExclude')}</h4>\n\n            <ListItem\n              className=\"settings-folders-list-item color-primary mb-0\"\n              icon=\"add\"\n              onClick={onAddExcludedChats}\n            >\n              {lang('FilterAddChats')}\n            </ListItem>\n\n            {renderChats('excluded')}\n          </div>\n        )}\n\n        <div className=\"settings-item pt-3\">\n          <h4 className=\"settings-item-header mb-3\" dir={lang.isRtl ? 'rtl' : undefined}>\n            {lang('FolderLinkScreen.Title')}\n          </h4>\n\n          <ListItem\n            className=\"settings-folders-list-item color-primary mb-0\"\n            icon=\"add\"\n            onClick={handleCreateInviteClick}\n          >\n            {lang('ChatListFilter.CreateLinkNew')}\n          </ListItem>\n\n          {invites?.map((invite) => (\n            <ListItem\n              className=\"settings-folders-list-item mb-0\"\n              icon=\"link\"\n              multiline\n              onClick={handleEditInviteClick}\n              clickArg={invite.url}\n            >\n              <span className=\"title\" dir=\"auto\">{invite.title || invite.url}</span>\n              <span className=\"subtitle\">\n                {lang('ChatListFilter.LinkLabelChatCount', invite.peerIds.length, 'i')}\n              </span>\n            </ListItem>\n          ))}\n\n        </div>\n      </div>\n\n      <FloatingActionButton\n        isShown={Boolean(state.isTouched)}\n        disabled={state.isLoading}\n        onClick={handleSubmit}\n        ariaLabel={state.mode === 'edit' ? 'Save changes' : 'Create folder'}\n      >\n        {state.isLoading ? (\n          <Spinner color=\"white\" />\n        ) : (\n          <i className=\"icon icon-check\" />\n        )}\n      </FloatingActionButton>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { state }): StateProps => {\n    const { listIds } = global.chats;\n    const { byId, invites } = global.chatFolders;\n    const chatListCount = Object.values(byId).reduce((acc, el) => acc + (el.isChatList ? 1 : 0), 0);\n\n    return {\n      loadedActiveChatIds: listIds.active,\n      loadedArchivedChatIds: listIds.archived,\n      invites: state.folderId ? (invites[state.folderId] || MEMO_EMPTY_ARRAY) : undefined,\n      isRemoved: state.folderId !== undefined && !byId[state.folderId],\n      maxInviteLinks: selectCurrentLimit(global, 'chatlistInvites'),\n      maxChatLists: selectCurrentLimit(global, 'chatlistJoined'),\n      chatListCount,\n    };\n  },\n)(SettingsFoldersEdit));\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect, useMemo, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiChatFolder } from '../../../../api/types';\n\nimport { ALL_FOLDER_ID, STICKER_SIZE_FOLDER_SETTINGS } from '../../../../config';\nimport { getFolderDescriptionText } from '../../../../global/helpers';\nimport { selectIsCurrentUserPremium } from '../../../../global/selectors';\nimport { selectCurrentLimit } from '../../../../global/selectors/limits';\nimport { isBetween } from '../../../../util/math';\nimport { MEMO_EMPTY_ARRAY } from '../../../../util/memo';\nimport { throttle } from '../../../../util/schedulers';\nimport { LOCAL_TGS_URLS } from '../../../common/helpers/animatedAssets';\nimport renderText from '../../../common/helpers/renderText';\n\nimport { useFolderManagerForChatsCount } from '../../../../hooks/useFolderManager';\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useOldLang from '../../../../hooks/useOldLang';\nimport usePrevious from '../../../../hooks/usePrevious';\n\nimport AnimatedIcon from '../../../common/AnimatedIcon';\nimport Button from '../../../ui/Button';\nimport Draggable from '../../../ui/Draggable';\nimport ListItem from '../../../ui/ListItem';\nimport Loading from '../../../ui/Loading';\n\ntype OwnProps = {\n  isActive?: boolean;\n  onCreateFolder: () => void;\n  onEditFolder: (folder: ApiChatFolder) => void;\n  onReset: () => void;\n};\n\ntype StateProps = {\n  folderIds?: number[];\n  foldersById: Record<number, ApiChatFolder>;\n  recommendedChatFolders?: ApiChatFolder[];\n  maxFolders: number;\n  isPremium?: boolean;\n};\n\ntype SortState = {\n  orderedFolderIds?: number[];\n  dragOrderIds?: number[];\n  draggedIndex?: number;\n};\n\nconst FOLDER_HEIGHT_PX = 68;\nconst runThrottledForLoadRecommended = throttle((cb) => cb(), 60000, true);\n\nconst SettingsFoldersMain: FC<OwnProps & StateProps> = ({\n  isActive,\n  onCreateFolder,\n  onEditFolder,\n  onReset,\n  folderIds,\n  foldersById,\n  isPremium,\n  recommendedChatFolders,\n  maxFolders,\n}) => {\n  const {\n    loadRecommendedChatFolders,\n    addChatFolder,\n    openLimitReachedModal,\n    openDeleteChatFolderModal,\n    sortChatFolders,\n  } = getActions();\n\n  const [state, setState] = useState<SortState>({\n    orderedFolderIds: folderIds,\n    dragOrderIds: folderIds,\n    draggedIndex: undefined,\n  });\n\n  const prevFolderIds = usePrevious(folderIds);\n\n  // Sync folders state after changing folders in other clients\n  useEffect(() => {\n    if (prevFolderIds !== folderIds) {\n      setState({\n        orderedFolderIds: folderIds,\n        dragOrderIds: folderIds,\n        draggedIndex: undefined,\n      });\n    }\n  }, [prevFolderIds, folderIds, state.orderedFolderIds?.length]);\n\n  // Due to the parent Transition, this component never gets unmounted,\n  // that's why we use throttled API call on every update.\n  useEffect(() => {\n    runThrottledForLoadRecommended(() => {\n      loadRecommendedChatFolders();\n    });\n  }, [loadRecommendedChatFolders]);\n\n  const handleCreateFolder = useCallback(() => {\n    if (Object.keys(foldersById).length >= maxFolders - 1) {\n      openLimitReachedModal({\n        limit: 'dialogFilters',\n      });\n\n      return;\n    }\n\n    onCreateFolder();\n  }, [foldersById, maxFolders, onCreateFolder, openLimitReachedModal]);\n\n  const lang = useOldLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onReset,\n  });\n\n  const chatsCountByFolderId = useFolderManagerForChatsCount();\n  const userFolders = useMemo(() => {\n    if (!folderIds) {\n      return undefined;\n    }\n\n    if (folderIds.length <= 1) {\n      return MEMO_EMPTY_ARRAY;\n    }\n\n    return folderIds.map((id) => {\n      const folder = foldersById[id];\n\n      if (id === ALL_FOLDER_ID) {\n        return {\n          id,\n          title: lang('FilterAllChats'),\n        };\n      }\n\n      return {\n        id: folder.id,\n        title: folder.title,\n        subtitle: getFolderDescriptionText(lang, folder, chatsCountByFolderId[folder.id]),\n        isChatList: folder.isChatList,\n      };\n    });\n  }, [folderIds, foldersById, lang, chatsCountByFolderId]);\n\n  const handleCreateFolderFromRecommended = useCallback((folder: ApiChatFolder) => {\n    if (Object.keys(foldersById).length >= maxFolders - 1) {\n      openLimitReachedModal({\n        limit: 'dialogFilters',\n      });\n\n      return;\n    }\n\n    addChatFolder({ folder });\n  }, [foldersById, maxFolders, addChatFolder, openLimitReachedModal]);\n\n  const handleDrag = useCallback((translation: { x: number; y: number }, id: string | number) => {\n    const delta = Math.round(translation.y / FOLDER_HEIGHT_PX);\n    const index = state.orderedFolderIds?.indexOf(id as number) || 0;\n    const dragOrderIds = state.orderedFolderIds?.filter((folderId) => folderId !== id);\n\n    if (!dragOrderIds || !isBetween(index + delta, 0, folderIds?.length || 0)) {\n      return;\n    }\n\n    dragOrderIds.splice(index + delta + (isPremium ? 0 : 1), 0, id as number);\n    setState((current) => ({\n      ...current,\n      draggedIndex: index,\n      dragOrderIds,\n    }));\n  }, [folderIds?.length, isPremium, state.orderedFolderIds]);\n\n  const handleDragEnd = useCallback(() => {\n    setState((current) => {\n      sortChatFolders({ folderIds: current.dragOrderIds! });\n\n      return {\n        ...current,\n        orderedFolderIds: current.dragOrderIds,\n        draggedIndex: undefined,\n      };\n    });\n  }, [sortChatFolders]);\n\n  const canCreateNewFolder = useMemo(() => {\n    return !isPremium || Object.keys(foldersById).length < maxFolders - 1;\n  }, [foldersById, isPremium, maxFolders]);\n\n  return (\n    <div className=\"settings-content no-border custom-scroll\">\n      <div className=\"settings-content-header\">\n        <AnimatedIcon\n          size={STICKER_SIZE_FOLDER_SETTINGS}\n          tgsUrl={LOCAL_TGS_URLS.FoldersAll}\n          className=\"settings-content-icon\"\n        />\n\n        <p className=\"settings-item-description mb-3\" dir=\"auto\">\n          {lang('CreateNewFilterInfo')}\n        </p>\n\n        {canCreateNewFolder && (\n          <Button\n          // TODO: Refactor button component to handle icon placemenet with props\n            className=\"with-icon mb-2\"\n            color=\"primary\"\n            size=\"smaller\"\n            pill\n            fluid\n            onClick={handleCreateFolder}\n            isRtl={lang.isRtl}\n          >\n            <i className=\"icon icon-add\" />\n            {lang('CreateNewFilter')}\n          </Button>\n        )}\n      </div>\n\n      <div className=\"settings-item pt-3\">\n        <h4 className=\"settings-item-header mb-3\" dir={lang.isRtl ? 'rtl' : undefined}>{lang('Filters')}</h4>\n\n        <div className=\"settings-sortable-container\" style={`height: ${(folderIds?.length || 0) * FOLDER_HEIGHT_PX}px`}>\n          {userFolders?.length ? userFolders.map((folder, i) => {\n            const isBlocked = i > maxFolders - 1;\n            const isDragged = state.draggedIndex === i;\n            const draggedTop = (state.orderedFolderIds?.indexOf(folder.id) ?? 0) * FOLDER_HEIGHT_PX;\n            const top = (state.dragOrderIds?.indexOf(folder.id) ?? 0) * FOLDER_HEIGHT_PX;\n\n            if (folder.id === ALL_FOLDER_ID) {\n              return (\n                <Draggable\n                  key={folder.id}\n                  id={folder.id}\n                  onDrag={handleDrag}\n                  onDragEnd={handleDragEnd}\n                  style={`top: ${isDragged ? draggedTop : top}px;`}\n                  knobStyle={`${lang.isRtl ? 'left' : 'right'}: 0.375rem;`}\n                  isDisabled={!isPremium || !isActive}\n                >\n                  <ListItem\n                    key={folder.id}\n                    className=\"drag-item mb-2 no-icon settings-sortable-item\"\n                    narrow\n                    inactive\n                    multiline\n                    isStatic\n                    allowSelection\n                  >\n                    <span className=\"title\">\n                      {folder.title}\n                    </span>\n                    <span className=\"subtitle\">{lang('FoldersAllChatsDesc')}</span>\n                  </ListItem>\n                </Draggable>\n              );\n            }\n\n            return (\n              <Draggable\n                key={folder.id}\n                id={folder.id}\n                onDrag={handleDrag}\n                onDragEnd={handleDragEnd}\n                style={`top: ${isDragged ? draggedTop : top}px;`}\n                knobStyle={`${lang.isRtl ? 'left' : 'right'}: 3rem;`}\n                isDisabled={isBlocked || !isActive}\n              >\n                <ListItem\n                  className=\"drag-item mb-2 no-icon settings-sortable-item\"\n                  narrow\n                  secondaryIcon=\"more\"\n                  multiline\n                  contextActions={[\n                    {\n                      handler: () => {\n                        openDeleteChatFolderModal({ folderId: folder.id });\n                      },\n                      destructive: true,\n                      title: lang('Delete'),\n                      icon: 'delete',\n                    },\n                  ]}\n                  // eslint-disable-next-line react/jsx-no-bind\n                  onClick={() => {\n                    if (isBlocked) {\n                      openLimitReachedModal({\n                        limit: 'dialogFilters',\n                      });\n                    } else {\n                      onEditFolder(foldersById[folder.id]);\n                    }\n                  }}\n                >\n                  <span className=\"title\">\n                    {renderText(folder.title, ['emoji'])}\n                    {isBlocked && <i className=\"icon icon-lock-badge settings-folders-blocked-icon\" />}\n                  </span>\n                  <span className=\"subtitle\">\n                    {folder.isChatList && <i className=\"icon icon-link mr-1\" />}\n                    {folder.subtitle}\n                  </span>\n                </ListItem>\n              </Draggable>\n            );\n          }) : userFolders && !userFolders.length ? (\n            <p className=\"settings-item-description my-4\" dir=\"auto\">\n              You have no folders yet.\n            </p>\n          ) : <Loading />}\n        </div>\n      </div>\n\n      {(recommendedChatFolders && Boolean(recommendedChatFolders.length)) && (\n        <div className=\"settings-item pt-3\">\n          <h4 className=\"settings-item-header mb-3\" dir={lang.isRtl ? 'rtl' : undefined}>\n            {lang('FilterRecommended')}\n          </h4>\n\n          {recommendedChatFolders.map((folder) => (\n            <ListItem\n              className=\"mb-2\"\n              narrow\n              // eslint-disable-next-line react/jsx-no-bind\n              onClick={() => handleCreateFolderFromRecommended(folder)}\n            >\n              <div className=\"settings-folders-recommended-item\">\n                <div className=\"multiline-item\">\n                  <span className=\"title\">{renderText(folder.title, ['emoji'])}</span>\n                  <span className=\"subtitle\">{folder.description}</span>\n                </div>\n\n                <Button\n                  className=\"px-3\"\n                  color=\"primary\"\n                  size=\"tiny\"\n                  pill\n                  fluid\n                  isRtl={lang.isRtl}\n                >\n                  {lang('Add')}\n                </Button>\n              </div>\n            </ListItem>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const {\n      orderedIds: folderIds,\n      byId: foldersById,\n      recommended: recommendedChatFolders,\n    } = global.chatFolders;\n\n    return {\n      folderIds,\n      foldersById,\n      isPremium: selectIsCurrentUserPremium(global),\n      recommendedChatFolders,\n      maxFolders: selectCurrentLimit(global, 'dialogFilters'),\n    };\n  },\n)(SettingsFoldersMain));\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../../global';\n\nimport { STICKER_SIZE_FOLDER_SETTINGS } from '../../../../config';\nimport { isChatChannel, isUserBot } from '../../../../global/helpers';\nimport {\n  selectCanInviteToChat, selectChat,\n  selectChatFolder,\n  selectTabState, selectUser,\n} from '../../../../global/selectors';\nimport { partition } from '../../../../util/iteratees';\nimport { LOCAL_TGS_URLS } from '../../../common/helpers/animatedAssets';\nimport renderText from '../../../common/helpers/renderText';\n\nimport useEffectWithPrevDeps from '../../../../hooks/useEffectWithPrevDeps';\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport AnimatedIcon from '../../../common/AnimatedIcon';\nimport LinkField from '../../../common/LinkField';\nimport Picker from '../../../common/Picker';\nimport FloatingActionButton from '../../../ui/FloatingActionButton';\nimport Spinner from '../../../ui/Spinner';\n\ntype OwnProps = {\n  isActive?: boolean;\n  onReset: VoidFunction;\n};\n\ntype StateProps = {\n  folderId?: number;\n  title?: string;\n  includedChatIds?: string[];\n  pinnedChatIds?: string[];\n  peerIds?: string[];\n  url?: string;\n  isLoading?: boolean;\n};\n\nconst SettingsShareChatlist: FC<OwnProps & StateProps> = ({\n  isActive,\n  onReset,\n  folderId,\n  title,\n  includedChatIds,\n  pinnedChatIds,\n  peerIds,\n  url,\n  isLoading,\n}) => {\n  const {\n    createChatlistInvite, deleteChatlistInvite, editChatlistInvite, showNotification,\n  } = getActions();\n  const lang = useOldLang();\n\n  const [isTouched, setIsTouched] = useState(false);\n\n  useHistoryBack({\n    isActive,\n    onBack: onReset,\n  });\n\n  useEffect(() => {\n    if (!isLoading) {\n      setIsTouched(false);\n    }\n  }, [isLoading]);\n\n  useEffect(() => {\n    if (!url && folderId && isActive) {\n      createChatlistInvite({ folderId });\n    }\n  }, [folderId, isActive, url]);\n\n  const handleRevoke = useLastCallback(() => {\n    if (!url || !folderId) return;\n\n    deleteChatlistInvite({ folderId, url });\n    onReset();\n  });\n\n  const itemIds = useMemo(() => {\n    return (includedChatIds || []).concat(pinnedChatIds || []);\n  }, [includedChatIds, pinnedChatIds]);\n\n  const [unlockedIds, lockedIds] = useMemo(() => {\n    const global = getGlobal();\n    return partition(itemIds, (id) => selectCanInviteToChat(global, id));\n  }, [itemIds]);\n\n  const [selectedIds, setSelectedIds] = useState<string[]>(peerIds || []);\n\n  const isFirstRenderRef = useRef(true);\n  useEffectWithPrevDeps(([prevUrl]) => {\n    if (prevUrl !== url) {\n      isFirstRenderRef.current = true;\n    }\n    if (!isFirstRenderRef.current) return;\n    isFirstRenderRef.current = false;\n    if (!url) {\n      setSelectedIds(unlockedIds);\n    } else if (peerIds) {\n      setSelectedIds(peerIds);\n    }\n  }, [url, unlockedIds, peerIds]);\n\n  const handleClickDisabled = useLastCallback((id: string) => {\n    const global = getGlobal();\n    const user = selectUser(global, id);\n    const chat = selectChat(global, id);\n    if (user && isUserBot(user)) {\n      showNotification({\n        message: lang('FolderLinkScreen.AlertTextUnavailableBot'),\n      });\n    } else if (user) {\n      showNotification({\n        message: lang('FolderLinkScreen.AlertTextUnavailableUser'),\n      });\n    } else if (chat && isChatChannel(chat)) {\n      showNotification({\n        message: lang('FolderLinkScreen.AlertTextUnavailablePublicChannel'),\n      });\n    } else {\n      showNotification({\n        message: lang('FolderLinkScreen.AlertTextUnavailablePublicGroup'),\n      });\n    }\n  });\n\n  const handleSelectedIdsChange = useLastCallback((ids: string[]) => {\n    setSelectedIds(ids);\n    setIsTouched(true);\n  });\n\n  const handleSubmit = useLastCallback(() => {\n    if (!folderId || !url || !isTouched) return;\n    editChatlistInvite({ folderId, peerIds: selectedIds, url });\n  });\n\n  const chatsCount = selectedIds.length;\n  const isDisabled = !chatsCount || isLoading;\n\n  return (\n    <div className=\"settings-content no-border custom-scroll SettingsFoldersChatsPicker\">\n      <div className=\"settings-content-header\">\n        <AnimatedIcon\n          size={STICKER_SIZE_FOLDER_SETTINGS}\n          tgsUrl={LOCAL_TGS_URLS.FoldersShare}\n          className=\"settings-content-icon\"\n        />\n\n        <p className=\"settings-item-description mb-3\" dir=\"auto\">\n          {renderText(lang('FolderLinkScreen.TitleDescriptionSelected', [title, chatsCount]),\n            ['simple_markdown'])}\n        </p>\n      </div>\n\n      <LinkField\n        className=\"settings-item\"\n        link={!url ? lang('Loading') : url}\n        withShare\n        onRevoke={handleRevoke}\n        isDisabled={!chatsCount || isTouched}\n      />\n\n      <div className=\"settings-item settings-item-chatlist\">\n        <Picker\n          itemIds={itemIds}\n          lockedSelectedIds={lockedIds}\n          onSelectedIdsChange={handleSelectedIdsChange}\n          selectedIds={selectedIds}\n          onDisabledClick={handleClickDisabled}\n          isRoundCheckbox\n        />\n      </div>\n\n      <FloatingActionButton\n        isShown={isLoading || isTouched}\n        disabled={isDisabled}\n        onClick={handleSubmit}\n        ariaLabel=\"Save changes\"\n      >\n        {isLoading ? (\n          <Spinner color=\"white\" />\n        ) : (\n          <i className=\"icon icon-check\" />\n        )}\n      </FloatingActionButton>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const { folderId, url, isLoading } = selectTabState(global).shareFolderScreen || {};\n    const folder = folderId ? selectChatFolder(global, folderId) : undefined;\n    const invite = folderId ? global.chatFolders.invites[folderId]?.find((i) => i.url === url) : undefined;\n\n    return {\n      folderId,\n      title: folder?.title,\n      includedChatIds: folder?.includedChatIds,\n      pinnedChatIds: folder?.pinnedChatIds,\n      url,\n      isLoading,\n      peerIds: invite?.peerIds,\n    };\n  },\n)(SettingsShareChatlist));\n","import type { ApiSession } from '../../../../api/types';\nimport type { DeviceType } from '../../../../types/icons/device';\n\nexport default function getSessionIcon(session: ApiSession): DeviceType {\n  const platform = session.platform.toLowerCase();\n  const device = session.deviceModel.toLowerCase();\n  const systemVersion = session.systemVersion.toLowerCase();\n\n  if (device.includes('xbox')) {\n    return 'xbox';\n  }\n\n  if (device.includes('chrome') && !device.includes('chromebook')) {\n    return 'chrome';\n  }\n  if (device.includes('brave')) {\n    return 'brave';\n  }\n  if (device.includes('vivaldi')) {\n    return 'vivaldi';\n  }\n  if (device.includes('safari')) {\n    return 'safari';\n  }\n  if (device.includes('firefox')) {\n    return 'firefox';\n  }\n  if (device.includes('opera')) {\n    return 'opera';\n  }\n  if (device.includes('samsungbrowser')) {\n    return 'samsung';\n  }\n  if (platform.includes('android')) {\n    return 'android';\n  }\n  if (\n    device.includes('iphone')\n    || device.includes('ipad')\n    || platform.includes('ios')\n    || platform.includes('macos')\n    || systemVersion.includes('macos')\n  ) {\n    return 'apple';\n  }\n  if (platform.includes('ubuntu') || systemVersion.includes('ubuntu')) {\n    return 'ubuntu';\n  }\n  if (platform.includes('linux') || systemVersion.includes('linux')) {\n    return 'linux';\n  }\n  if (platform.includes('windows') || systemVersion.includes('windows')) {\n    return 'windows';\n  }\n\n  return 'unknown';\n}\n","import type { ApiPrivacyKey } from '../../../../types';\nimport { SettingsScreens } from '../../../../types';\n\nexport function getPrivacyKey(screen: SettingsScreens): ApiPrivacyKey | undefined {\n  switch (screen) {\n    case SettingsScreens.PrivacyPhoneNumber:\n    case SettingsScreens.PrivacyPhoneNumberAllowedContacts:\n    case SettingsScreens.PrivacyPhoneNumberDeniedContacts:\n      return 'phoneNumber';\n    case SettingsScreens.PrivacyLastSeen:\n    case SettingsScreens.PrivacyLastSeenAllowedContacts:\n    case SettingsScreens.PrivacyLastSeenDeniedContacts:\n      return 'lastSeen';\n    case SettingsScreens.PrivacyProfilePhoto:\n    case SettingsScreens.PrivacyProfilePhotoAllowedContacts:\n    case SettingsScreens.PrivacyProfilePhotoDeniedContacts:\n      return 'profilePhoto';\n    case SettingsScreens.PrivacyBio:\n    case SettingsScreens.PrivacyBioAllowedContacts:\n    case SettingsScreens.PrivacyBioDeniedContacts:\n      return 'bio';\n    case SettingsScreens.PrivacyBirthday:\n    case SettingsScreens.PrivacyBirthdayAllowedContacts:\n    case SettingsScreens.PrivacyBirthdayDeniedContacts:\n      return 'birthday';\n    case SettingsScreens.PrivacyForwarding:\n    case SettingsScreens.PrivacyForwardingAllowedContacts:\n    case SettingsScreens.PrivacyForwardingDeniedContacts:\n      return 'forwards';\n    case SettingsScreens.PrivacyVoiceMessages:\n    case SettingsScreens.PrivacyVoiceMessagesAllowedContacts:\n    case SettingsScreens.PrivacyVoiceMessagesDeniedContacts:\n      return 'voiceMessages';\n    case SettingsScreens.PrivacyGroupChats:\n    case SettingsScreens.PrivacyGroupChatsAllowedContacts:\n    case SettingsScreens.PrivacyGroupChatsDeniedContacts:\n      return 'chatInvite';\n    case SettingsScreens.PrivacyPhoneCall:\n    case SettingsScreens.PrivacyPhoneCallAllowedContacts:\n    case SettingsScreens.PrivacyPhoneCallDeniedContacts:\n      return 'phoneCall';\n    case SettingsScreens.PrivacyPhoneP2P:\n    case SettingsScreens.PrivacyPhoneP2PAllowedContacts:\n    case SettingsScreens.PrivacyPhoneP2PDeniedContacts:\n      return 'phoneP2P';\n    case SettingsScreens.PrivacyAddByPhone:\n      return 'addByPhone';\n  }\n\n  return undefined;\n}\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, { memo, useCallback } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { GlobalState } from '../../../../global/types';\nimport { SettingsScreens } from '../../../../types';\n\nimport { decryptSession } from '../../../../util/passcode';\n\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport SettingsPasscodeForm from '../SettingsPasswordForm';\nimport SettingsPasscodeCongratulations from './SettingsPasscodeCongratulations';\nimport SettingsPasscodeEnabled from './SettingsPasscodeEnabled';\nimport SettingsPasscodeStart from './SettingsPasscodeStart';\n\nexport type OwnProps = {\n  passcode: string;\n  currentScreen: SettingsScreens;\n  shownScreen: SettingsScreens;\n  isActive?: boolean;\n  onSetPasscode: (passcode: string) => void;\n  onScreenSelect: (screen: SettingsScreens) => void;\n  onReset: () => void;\n};\n\ntype StateProps = GlobalState['passcode'];\n\nconst SettingsPasscode: FC<OwnProps & StateProps> = ({\n  passcode,\n  currentScreen,\n  shownScreen,\n  error,\n  isActive,\n  isLoading,\n  onScreenSelect,\n  onSetPasscode,\n  onReset,\n}) => {\n  const {\n    setPasscode,\n    clearPasscode,\n    setPasscodeError,\n    clearPasscodeError,\n  } = getActions();\n\n  const lang = useOldLang();\n\n  const handleStartWizard = useCallback(() => {\n    onSetPasscode('');\n    onScreenSelect(SettingsScreens.PasscodeNewPasscode);\n  }, [onScreenSelect, onSetPasscode]);\n\n  const handleNewPassword = useCallback((value: string) => {\n    onSetPasscode(value);\n    onScreenSelect(SettingsScreens.PasscodeNewPasscodeConfirm);\n  }, [onScreenSelect, onSetPasscode]);\n\n  const handleNewPasswordConfirm = useCallback(() => {\n    setPasscode({ passcode });\n    onSetPasscode('');\n    onScreenSelect(SettingsScreens.PasscodeCongratulations);\n  }, [onScreenSelect, onSetPasscode, passcode, setPasscode]);\n\n  const handleChangePasswordCurrent = useCallback((currentPasscode: string) => {\n    onSetPasscode('');\n    decryptSession(currentPasscode).then(() => {\n      onScreenSelect(SettingsScreens.PasscodeChangePasscodeNew);\n    }, () => {\n      setPasscodeError({\n        error: lang('PasscodeController.Error.Current'),\n      });\n    });\n  }, [lang, onScreenSelect, onSetPasscode, setPasscodeError]);\n\n  const handleChangePasswordNew = useCallback((value: string) => {\n    onSetPasscode(value);\n    onScreenSelect(SettingsScreens.PasscodeChangePasscodeConfirm);\n  }, [onScreenSelect, onSetPasscode]);\n\n  const handleTurnOff = useCallback((currentPasscode: string) => {\n    decryptSession(currentPasscode).then(() => {\n      clearPasscode();\n      onScreenSelect(SettingsScreens.Privacy);\n    }, () => {\n      setPasscodeError({\n        error: lang('PasscodeController.Error.Current'),\n      });\n    });\n  }, [clearPasscode, lang, onScreenSelect, setPasscodeError]);\n\n  switch (currentScreen) {\n    case SettingsScreens.PasscodeDisabled:\n      return (\n        <SettingsPasscodeStart\n          onStart={handleStartWizard}\n          isActive={isActive || [\n            SettingsScreens.PasscodeNewPasscode,\n            SettingsScreens.PasscodeNewPasscodeConfirm,\n            SettingsScreens.PasscodeCongratulations,\n          ].includes(shownScreen)}\n          onReset={onReset}\n        />\n      );\n\n    case SettingsScreens.PasscodeNewPasscode:\n      return (\n        <SettingsPasscodeForm\n          shouldDisablePasswordManager\n          placeholder={lang('EnterNewPasscode')}\n          submitLabel={lang('Continue')}\n          onSubmit={handleNewPassword}\n          isActive={isActive || [\n            SettingsScreens.PasscodeNewPasscodeConfirm,\n            SettingsScreens.PasscodeCongratulations,\n          ].includes(shownScreen)}\n          onReset={onReset}\n        />\n      );\n\n    case SettingsScreens.PasscodeNewPasscodeConfirm:\n      return (\n        <SettingsPasscodeForm\n          shouldDisablePasswordManager\n          expectedPassword={passcode}\n          placeholder={lang('ReEnterYourPasscode')}\n          submitLabel={lang('Continue')}\n          isLoading={isLoading}\n          onSubmit={handleNewPasswordConfirm}\n          isActive={isActive || [\n            SettingsScreens.PasscodeCongratulations,\n          ].includes(shownScreen)}\n          onReset={onReset}\n        />\n      );\n\n    case SettingsScreens.PasscodeCongratulations:\n      return (\n        <SettingsPasscodeCongratulations\n          isActive={isActive}\n          onReset={onReset}\n        />\n      );\n\n    case SettingsScreens.PasscodeEnabled:\n      return (\n        <SettingsPasscodeEnabled\n          onScreenSelect={onScreenSelect}\n          isActive={isActive || [\n            SettingsScreens.PasscodeChangePasscodeCurrent,\n            SettingsScreens.PasscodeChangePasscodeNew,\n            SettingsScreens.PasscodeChangePasscodeConfirm,\n            SettingsScreens.PasscodeCongratulations,\n            SettingsScreens.PasscodeTurnOff,\n          ].includes(shownScreen)}\n          onReset={onReset}\n        />\n      );\n\n    case SettingsScreens.PasscodeChangePasscodeCurrent:\n      return (\n        <SettingsPasscodeForm\n          shouldDisablePasswordManager\n          error={error}\n          clearError={clearPasscodeError}\n          placeholder={lang('PasscodeController.Current.Placeholder')}\n          onSubmit={handleChangePasswordCurrent}\n          isActive={isActive || [\n            SettingsScreens.PasscodeChangePasscodeNew,\n            SettingsScreens.PasscodeChangePasscodeConfirm,\n            SettingsScreens.PasscodeCongratulations,\n          ].includes(shownScreen)}\n          onReset={onReset}\n        />\n      );\n\n    case SettingsScreens.PasscodeChangePasscodeNew:\n      return (\n        <SettingsPasscodeForm\n          shouldDisablePasswordManager\n          placeholder={lang('PleaseEnterNewFirstPassword')}\n          onSubmit={handleChangePasswordNew}\n          isActive={isActive || [\n            SettingsScreens.PasscodeChangePasscodeConfirm,\n            SettingsScreens.PasscodeCongratulations,\n          ].includes(shownScreen)}\n          onReset={onReset}\n        />\n      );\n\n    case SettingsScreens.PasscodeChangePasscodeConfirm:\n      return (\n        <SettingsPasscodeForm\n          shouldDisablePasswordManager\n          expectedPassword={passcode}\n          placeholder={lang('PasscodeController.ReEnterPasscode.Placeholder')}\n          isLoading={isLoading}\n          onSubmit={handleNewPasswordConfirm}\n          isActive={isActive || [\n            SettingsScreens.PasscodeCongratulations,\n          ].includes(shownScreen)}\n          onReset={onReset}\n        />\n      );\n\n    case SettingsScreens.PasscodeTurnOff:\n      return (\n        <SettingsPasscodeForm\n          shouldDisablePasswordManager\n          error={error ? lang(error) : undefined}\n          clearError={clearPasscodeError}\n          placeholder={lang('PasscodeController.Current.Placeholder')}\n          onSubmit={handleTurnOff}\n          isActive={isActive}\n          onReset={onReset}\n        />\n      );\n\n    default:\n      return undefined;\n  }\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => ({ ...global.passcode }),\n)(SettingsPasscode));\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, { memo, useCallback } from '../../../../lib/teact/teact';\n\nimport { STICKER_SIZE_PASSCODE } from '../../../../config';\nimport { LOCAL_TGS_URLS } from '../../../common/helpers/animatedAssets';\n\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport AnimatedIcon from '../../../common/AnimatedIcon';\nimport Button from '../../../ui/Button';\n\ntype OwnProps = {\n  isActive?: boolean;\n  onReset: (forceReturnToChatList?: boolean) => void;\n};\n\nconst SettingsPasscodeCongratulations: FC<OwnProps> = ({\n  isActive, onReset,\n}) => {\n  const lang = useOldLang();\n\n  const fullReset = useCallback(() => {\n    onReset(true);\n  }, [onReset]);\n\n  useHistoryBack({ isActive, onBack: onReset });\n\n  return (\n    <div className=\"settings-content local-passcode custom-scroll\">\n      <div className=\"settings-content-header no-border\">\n        <AnimatedIcon\n          size={STICKER_SIZE_PASSCODE}\n          tgsUrl={LOCAL_TGS_URLS.Congratulations}\n          className=\"settings-content-icon\"\n        />\n\n        <p className=\"settings-item-description mb-3\" dir=\"auto\">\n          Congratulations!\n        </p>\n        <p className=\"settings-item-description mb-3\" dir=\"auto\">\n          Now you can lock the app with a passcode so that others can&apos;t open it.\n        </p>\n      </div>\n\n      <div className=\"settings-item pt-0\">\n        <Button onClick={fullReset}>{lang('Back')}</Button>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(SettingsPasscodeCongratulations);\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, { memo } from '../../../../lib/teact/teact';\n\nimport { SettingsScreens } from '../../../../types';\n\nimport { LOCAL_TGS_URLS } from '../../../common/helpers/animatedAssets';\n\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport AnimatedIconWithPreview from '../../../common/AnimatedIconWithPreview';\nimport ListItem from '../../../ui/ListItem';\n\nimport lockPreviewUrl from '../../../../assets/lock.png';\n\ntype OwnProps = {\n  isActive?: boolean;\n  onScreenSelect: (screen: SettingsScreens) => void;\n  onReset: () => void;\n};\n\nconst SettingsPasscodeEnabled: FC<OwnProps> = ({\n  isActive, onReset, onScreenSelect,\n}) => {\n  const lang = useOldLang();\n\n  useHistoryBack({ isActive, onBack: onReset });\n\n  return (\n    <div className=\"settings-content local-passcode custom-scroll\">\n      <div className=\"settings-content-header no-border\">\n        <AnimatedIconWithPreview\n          tgsUrl={LOCAL_TGS_URLS.Lock}\n          previewUrl={lockPreviewUrl}\n          size={160}\n          className=\"settings-content-icon\"\n        />\n\n        <p className=\"settings-item-description mb-3\" dir=\"auto\">\n          Local passcode is enabled.\n        </p>\n      </div>\n\n      <div className=\"settings-item pt-0\">\n        <ListItem\n          icon=\"edit\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => onScreenSelect(SettingsScreens.PasscodeChangePasscodeCurrent)}\n        >\n          {lang('Passcode.Change')}\n        </ListItem>\n        <ListItem\n          icon=\"password-off\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => onScreenSelect(SettingsScreens.PasscodeTurnOff)}\n        >\n          {lang('Passcode.TurnOff')}\n        </ListItem>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(SettingsPasscodeEnabled);\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, { memo } from '../../../../lib/teact/teact';\n\nimport { STICKER_SIZE_PASSCODE } from '../../../../config';\nimport { LOCAL_TGS_URLS } from '../../../common/helpers/animatedAssets';\n\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport AnimatedIconWithPreview from '../../../common/AnimatedIconWithPreview';\nimport Button from '../../../ui/Button';\n\nimport lockPreviewUrl from '../../../../assets/lock.png';\n\ntype OwnProps = {\n  onStart: NoneToVoidFunction;\n  isActive?: boolean;\n  onReset: () => void;\n};\n\nconst SettingsPasscodeStart: FC<OwnProps> = ({\n  isActive, onReset, onStart,\n}) => {\n  const lang = useOldLang();\n\n  useHistoryBack({ isActive, onBack: onReset });\n\n  return (\n    <div className=\"settings-content local-passcode custom-scroll\">\n      <div className=\"settings-content-header no-border\">\n        <AnimatedIconWithPreview\n          tgsUrl={LOCAL_TGS_URLS.Lock}\n          previewUrl={lockPreviewUrl}\n          size={STICKER_SIZE_PASSCODE}\n          className=\"settings-content-icon\"\n        />\n\n        <p className=\"settings-item-description\" dir=\"auto\">\n          When you set up an additional passcode, a lock icon will appear on the chats page.\n          Tap it to lock and unlock your Telegram Web A.\n        </p>\n        <p className=\"settings-item-description mb-3\" dir=\"auto\">\n          Note: if you forget your local passcode, you&apos;ll need to log out of Telegram Web A and log in again.\n        </p>\n      </div>\n\n      <div className=\"settings-item pt-0\">\n        <Button onClick={onStart}>{lang('EnablePasscode')}</Button>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(SettingsPasscodeStart);\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, { memo, useCallback, useEffect } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { GlobalState } from '../../../../global/types';\nimport type { TwoFaDispatch, TwoFaState } from '../../../../hooks/reducers/useTwoFaReducer';\nimport { SettingsScreens } from '../../../../types';\n\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport SettingsTwoFaPassword from '../SettingsPasswordForm';\nimport SettingsTwoFaCongratulations from './SettingsTwoFaCongratulations';\nimport SettingsTwoFaEmailCode from './SettingsTwoFaEmailCode';\nimport SettingsTwoFaEnabled from './SettingsTwoFaEnabled';\nimport SettingsTwoFaSkippableForm from './SettingsTwoFaSkippableForm';\nimport SettingsTwoFaStart from './SettingsTwoFaStart';\n\nexport type OwnProps = {\n  state: TwoFaState;\n  currentScreen: SettingsScreens;\n  shownScreen: SettingsScreens;\n  dispatch: TwoFaDispatch;\n  isActive?: boolean;\n  onScreenSelect: (screen: SettingsScreens) => void;\n  onReset: () => void;\n};\n\ntype StateProps = GlobalState['twoFaSettings'];\n\nconst SettingsTwoFa: FC<OwnProps & StateProps> = ({\n  currentScreen,\n  shownScreen,\n  state,\n  hint,\n  isLoading,\n  error,\n  waitingEmailCodeLength,\n  dispatch,\n  isActive,\n  onScreenSelect,\n  onReset,\n}) => {\n  const {\n    updatePassword,\n    checkPassword,\n    clearTwoFaError,\n    updateRecoveryEmail,\n    provideTwoFaEmailCode,\n    clearPassword,\n  } = getActions();\n\n  useEffect(() => {\n    if (waitingEmailCodeLength) {\n      if (currentScreen === SettingsScreens.TwoFaNewPasswordEmail) {\n        onScreenSelect(SettingsScreens.TwoFaNewPasswordEmailCode);\n      } else if (currentScreen === SettingsScreens.TwoFaRecoveryEmail) {\n        onScreenSelect(SettingsScreens.TwoFaRecoveryEmailCode);\n      }\n    }\n  }, [currentScreen, onScreenSelect, waitingEmailCodeLength]);\n\n  const handleStartWizard = useCallback(() => {\n    dispatch({ type: 'reset' });\n    onScreenSelect(SettingsScreens.TwoFaNewPassword);\n  }, [dispatch, onScreenSelect]);\n\n  const handleNewPassword = useCallback((value: string) => {\n    dispatch({ type: 'setPassword', payload: value });\n    onScreenSelect(SettingsScreens.TwoFaNewPasswordConfirm);\n  }, [dispatch, onScreenSelect]);\n\n  const handleNewPasswordConfirm = useCallback(() => {\n    onScreenSelect(SettingsScreens.TwoFaNewPasswordHint);\n  }, [onScreenSelect]);\n\n  const handleNewPasswordHint = useCallback((value?: string) => {\n    dispatch({ type: 'setHint', payload: value });\n    onScreenSelect(SettingsScreens.TwoFaNewPasswordEmail);\n  }, [dispatch, onScreenSelect]);\n\n  const handleNewPasswordEmail = useCallback((value?: string) => {\n    dispatch({ type: 'setEmail', payload: value });\n    updatePassword({\n      ...state,\n      email: value,\n      onSuccess: () => {\n        onScreenSelect(SettingsScreens.TwoFaCongratulations);\n      },\n    });\n  }, [dispatch, onScreenSelect, state, updatePassword]);\n\n  const handleChangePasswordCurrent = useCallback((value: string) => {\n    dispatch({ type: 'setCurrentPassword', payload: value });\n    checkPassword({\n      currentPassword: value,\n      onSuccess: () => {\n        onScreenSelect(SettingsScreens.TwoFaChangePasswordNew);\n      },\n    });\n  }, [checkPassword, dispatch, onScreenSelect]);\n\n  const handleChangePasswordNew = useCallback((value: string) => {\n    dispatch({ type: 'setPassword', payload: value });\n    onScreenSelect(SettingsScreens.TwoFaChangePasswordConfirm);\n  }, [dispatch, onScreenSelect]);\n\n  const handleChangePasswordConfirm = useCallback(() => {\n    onScreenSelect(SettingsScreens.TwoFaChangePasswordHint);\n  }, [onScreenSelect]);\n\n  const handleChangePasswordHint = useCallback((value?: string) => {\n    dispatch({ type: 'setHint', payload: value });\n    updatePassword({\n      ...state,\n      hint: value,\n      onSuccess: () => {\n        onScreenSelect(SettingsScreens.TwoFaCongratulations);\n      },\n    });\n  }, [dispatch, onScreenSelect, state, updatePassword]);\n\n  const handleTurnOff = useCallback((value: string) => {\n    clearPassword({\n      currentPassword: value,\n      onSuccess: () => {\n        onScreenSelect(SettingsScreens.Privacy);\n      },\n    });\n  }, [clearPassword, onScreenSelect]);\n\n  const handleRecoveryEmailCurrentPassword = useCallback((value: string) => {\n    dispatch({ type: 'setCurrentPassword', payload: value });\n    checkPassword({\n      currentPassword: value,\n      onSuccess: () => {\n        onScreenSelect(SettingsScreens.TwoFaRecoveryEmail);\n      },\n    });\n  }, [checkPassword, dispatch, onScreenSelect]);\n\n  const handleRecoveryEmail = useCallback((value?: string) => {\n    dispatch({ type: 'setEmail', payload: value });\n    updateRecoveryEmail({\n      ...state,\n      email: value!,\n      onSuccess: () => {\n        onScreenSelect(SettingsScreens.TwoFaCongratulations);\n      },\n    });\n  }, [dispatch, onScreenSelect, state, updateRecoveryEmail]);\n\n  const handleEmailCode = useCallback((code: string) => {\n    provideTwoFaEmailCode({ code });\n  }, [provideTwoFaEmailCode]);\n\n  const lang = useOldLang();\n\n  switch (currentScreen) {\n    case SettingsScreens.TwoFaDisabled:\n      return (\n        <SettingsTwoFaStart\n          onStart={handleStartWizard}\n          isActive={isActive || [\n            SettingsScreens.TwoFaNewPassword,\n            SettingsScreens.TwoFaNewPasswordConfirm,\n            SettingsScreens.TwoFaNewPasswordHint,\n            SettingsScreens.TwoFaNewPasswordEmail,\n            SettingsScreens.TwoFaNewPasswordEmailCode,\n            SettingsScreens.TwoFaCongratulations,\n          ].includes(shownScreen)}\n          onReset={onReset}\n        />\n      );\n\n    case SettingsScreens.TwoFaNewPassword:\n      return (\n        <SettingsTwoFaPassword\n          placeholder={lang('PleaseEnterPassword')}\n          submitLabel={lang('Continue')}\n          onSubmit={handleNewPassword}\n          isActive={isActive || [\n            SettingsScreens.TwoFaNewPasswordConfirm,\n            SettingsScreens.TwoFaNewPasswordHint,\n            SettingsScreens.TwoFaNewPasswordEmail,\n            SettingsScreens.TwoFaNewPasswordEmailCode,\n            SettingsScreens.TwoFaCongratulations,\n          ].includes(shownScreen)}\n          onReset={onReset}\n        />\n      );\n\n    case SettingsScreens.TwoFaNewPasswordConfirm:\n      return (\n        <SettingsTwoFaPassword\n          expectedPassword={state.password}\n          placeholder={lang('PleaseReEnterPassword')}\n          submitLabel={lang('Continue')}\n          onSubmit={handleNewPasswordConfirm}\n          isActive={isActive || [\n            SettingsScreens.TwoFaNewPasswordHint,\n            SettingsScreens.TwoFaNewPasswordEmail,\n            SettingsScreens.TwoFaNewPasswordEmailCode,\n            SettingsScreens.TwoFaCongratulations,\n          ].includes(shownScreen)}\n          onReset={onReset}\n        />\n      );\n\n    case SettingsScreens.TwoFaNewPasswordHint:\n      return (\n        <SettingsTwoFaSkippableForm\n          icon=\"hint\"\n          placeholder={lang('PasswordHintPlaceholder')}\n          onSubmit={handleNewPasswordHint}\n          isActive={isActive || [\n            SettingsScreens.TwoFaNewPasswordEmail,\n            SettingsScreens.TwoFaNewPasswordEmailCode,\n            SettingsScreens.TwoFaCongratulations,\n          ].includes(shownScreen)}\n          onReset={onReset}\n        />\n      );\n\n    case SettingsScreens.TwoFaNewPasswordEmail:\n      return (\n        <SettingsTwoFaSkippableForm\n          icon=\"email\"\n          type=\"email\"\n          isLoading={isLoading}\n          error={error}\n          clearError={clearTwoFaError}\n          placeholder={lang('RecoveryEmailTitle')}\n          shouldConfirm\n          onSubmit={handleNewPasswordEmail}\n          isActive={isActive || [\n            SettingsScreens.TwoFaNewPasswordEmailCode,\n            SettingsScreens.TwoFaCongratulations,\n          ].includes(shownScreen)}\n          onReset={onReset}\n        />\n      );\n\n    case SettingsScreens.TwoFaNewPasswordEmailCode:\n      return (\n        <SettingsTwoFaEmailCode\n          isLoading={isLoading}\n          error={error}\n          clearError={clearTwoFaError}\n          onSubmit={handleEmailCode}\n          isActive={isActive || shownScreen === SettingsScreens.TwoFaCongratulations}\n          onReset={onReset}\n        />\n      );\n\n    case SettingsScreens.TwoFaCongratulations:\n      return (\n        <SettingsTwoFaCongratulations\n          onScreenSelect={onScreenSelect}\n          isActive={isActive}\n          onReset={onReset}\n        />\n      );\n\n    case SettingsScreens.TwoFaEnabled:\n      return (\n        <SettingsTwoFaEnabled\n          onScreenSelect={onScreenSelect}\n          isActive={isActive || [\n            SettingsScreens.TwoFaChangePasswordCurrent,\n            SettingsScreens.TwoFaChangePasswordNew,\n            SettingsScreens.TwoFaChangePasswordConfirm,\n            SettingsScreens.TwoFaChangePasswordHint,\n            SettingsScreens.TwoFaTurnOff,\n            SettingsScreens.TwoFaRecoveryEmailCurrentPassword,\n            SettingsScreens.TwoFaRecoveryEmail,\n            SettingsScreens.TwoFaRecoveryEmailCode,\n            SettingsScreens.TwoFaCongratulations,\n          ].includes(shownScreen)}\n          onReset={onReset}\n        />\n      );\n\n    case SettingsScreens.TwoFaChangePasswordCurrent:\n      return (\n        <SettingsTwoFaPassword\n          isLoading={isLoading}\n          error={error}\n          clearError={clearTwoFaError}\n          hint={hint}\n          onSubmit={handleChangePasswordCurrent}\n          isActive={isActive || [\n            SettingsScreens.TwoFaChangePasswordNew,\n            SettingsScreens.TwoFaChangePasswordConfirm,\n            SettingsScreens.TwoFaChangePasswordHint,\n            SettingsScreens.TwoFaCongratulations,\n          ].includes(shownScreen)}\n          onReset={onReset}\n        />\n      );\n\n    case SettingsScreens.TwoFaChangePasswordNew:\n      return (\n        <SettingsTwoFaPassword\n          placeholder={lang('PleaseEnterNewFirstPassword')}\n          onSubmit={handleChangePasswordNew}\n          isActive={isActive || [\n            SettingsScreens.TwoFaChangePasswordConfirm,\n            SettingsScreens.TwoFaChangePasswordHint,\n            SettingsScreens.TwoFaCongratulations,\n          ].includes(shownScreen)}\n          onReset={onReset}\n        />\n      );\n\n    case SettingsScreens.TwoFaChangePasswordConfirm:\n      return (\n        <SettingsTwoFaPassword\n          expectedPassword={state.password}\n          placeholder={lang('PleaseReEnterPassword')}\n          onSubmit={handleChangePasswordConfirm}\n          isActive={isActive || [\n            SettingsScreens.TwoFaChangePasswordHint,\n            SettingsScreens.TwoFaCongratulations,\n          ].includes(shownScreen)}\n          onReset={onReset}\n        />\n      );\n\n    case SettingsScreens.TwoFaChangePasswordHint:\n      return (\n        <SettingsTwoFaSkippableForm\n          isLoading={isLoading}\n          error={error}\n          clearError={clearTwoFaError}\n          icon=\"hint\"\n          placeholder={lang('PasswordHintPlaceholder')}\n          onSubmit={handleChangePasswordHint}\n          isActive={isActive || shownScreen === SettingsScreens.TwoFaCongratulations}\n          onReset={onReset}\n        />\n      );\n\n    case SettingsScreens.TwoFaTurnOff:\n      return (\n        <SettingsTwoFaPassword\n          isLoading={isLoading}\n          error={error}\n          clearError={clearTwoFaError}\n          hint={hint}\n          onSubmit={handleTurnOff}\n          isActive={isActive}\n          onReset={onReset}\n        />\n      );\n\n    case SettingsScreens.TwoFaRecoveryEmailCurrentPassword:\n      return (\n        <SettingsTwoFaPassword\n          isLoading={isLoading}\n          error={error}\n          clearError={clearTwoFaError}\n          hint={hint}\n          onSubmit={handleRecoveryEmailCurrentPassword}\n          isActive={isActive || [\n            SettingsScreens.TwoFaRecoveryEmail,\n            SettingsScreens.TwoFaRecoveryEmailCode,\n            SettingsScreens.TwoFaCongratulations,\n          ].includes(shownScreen)}\n          onReset={onReset}\n        />\n      );\n\n    case SettingsScreens.TwoFaRecoveryEmail:\n      return (\n        <SettingsTwoFaSkippableForm\n          icon=\"email\"\n          type=\"email\"\n          placeholder={lang('RecoveryEmailTitle')}\n          onSubmit={handleRecoveryEmail}\n          isActive={isActive || [\n            SettingsScreens.TwoFaRecoveryEmailCode,\n            SettingsScreens.TwoFaCongratulations,\n          ].includes(shownScreen)}\n          onReset={onReset}\n        />\n      );\n\n    case SettingsScreens.TwoFaRecoveryEmailCode:\n      return (\n        <SettingsTwoFaEmailCode\n          isLoading={isLoading}\n          error={error}\n          clearError={clearTwoFaError}\n          onSubmit={handleEmailCode}\n          isActive={isActive || shownScreen === SettingsScreens.TwoFaCongratulations}\n          onReset={onReset}\n        />\n      );\n\n    default:\n      return undefined;\n  }\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => ({ ...global.twoFaSettings }),\n)(SettingsTwoFa));\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, { memo, useCallback } from '../../../../lib/teact/teact';\n\nimport { SettingsScreens } from '../../../../types';\n\nimport { STICKER_SIZE_TWO_FA } from '../../../../config';\nimport { LOCAL_TGS_URLS } from '../../../common/helpers/animatedAssets';\n\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport AnimatedIcon from '../../../common/AnimatedIcon';\nimport Button from '../../../ui/Button';\n\ntype OwnProps = {\n  isActive?: boolean;\n  onScreenSelect: (screen: SettingsScreens) => void;\n  onReset: () => void;\n};\n\nconst SettingsTwoFaCongratulations: FC<OwnProps> = ({\n  isActive, onReset, onScreenSelect,\n}) => {\n  const lang = useOldLang();\n\n  const handleClick = useCallback(() => {\n    onScreenSelect(SettingsScreens.Privacy);\n  }, [onScreenSelect]);\n\n  useHistoryBack({\n    isActive,\n    onBack: onReset,\n  });\n\n  return (\n    <div className=\"settings-content two-fa custom-scroll\">\n      <div className=\"settings-content-header no-border\">\n        <AnimatedIcon\n          size={STICKER_SIZE_TWO_FA}\n          tgsUrl={LOCAL_TGS_URLS.Congratulations}\n          className=\"settings-content-icon\"\n        />\n\n        <p className=\"settings-item-description mb-3\" dir=\"auto\">\n          {lang('TwoStepVerificationPasswordSetInfo')}\n        </p>\n      </div>\n\n      <div className=\"settings-item pt-0\">\n        <Button onClick={handleClick}>{lang('TwoStepVerificationPasswordReturnSettings')}</Button>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(SettingsTwoFaCongratulations);\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect, useRef, useState,\n} from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport type { ApiSticker } from '../../../../api/types';\n\nimport { selectAnimatedEmoji } from '../../../../global/selectors';\nimport { IS_TOUCH_ENV } from '../../../../util/windowEnvironment';\n\nimport useAppLayout from '../../../../hooks/useAppLayout';\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport InputText from '../../../ui/InputText';\nimport Loading from '../../../ui/Loading';\n\ntype OwnProps = {\n  isLoading?: boolean;\n  error?: string;\n  clearError: NoneToVoidFunction;\n  onSubmit: (hint: string) => void;\n  isActive?: boolean;\n  onReset: () => void;\n};\n\ntype StateProps = {\n  animatedEmoji: ApiSticker;\n  codeLength: number;\n};\n\nconst ICON_SIZE = 160;\n\nconst SettingsTwoFaEmailCode: FC<OwnProps & StateProps> = ({\n  animatedEmoji,\n  codeLength,\n  isLoading,\n  error,\n  clearError,\n  onSubmit,\n  isActive,\n  onReset,\n}) => {\n  // eslint-disable-next-line no-null/no-null\n  const inputRef = useRef<HTMLInputElement>(null);\n  const { isMobile } = useAppLayout();\n  const focusDelayTimeoutMs = isMobile ? 550 : 400;\n\n  const [value, setValue] = useState<string>('');\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV) {\n      setTimeout(() => {\n        inputRef.current!.focus();\n      }, focusDelayTimeoutMs);\n    }\n  }, [focusDelayTimeoutMs]);\n\n  const lang = useOldLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onReset,\n  });\n\n  const handleInputChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    if (error && clearError) {\n      clearError();\n    }\n\n    const newValue = e.target.value.slice(0, codeLength);\n\n    if (newValue.length === codeLength) {\n      onSubmit(newValue);\n    }\n\n    setValue(newValue);\n    e.target.value = newValue;\n  }, [clearError, codeLength, error, onSubmit]);\n\n  return (\n    <div className=\"settings-content two-fa custom-scroll\">\n      <div className=\"settings-content-header no-border\">\n        <AnimatedIconFromSticker sticker={animatedEmoji} size={ICON_SIZE} className=\"settings-content-icon\" />\n      </div>\n\n      <div className=\"settings-item pt-0\">\n        <InputText\n          value={value}\n          ref={inputRef}\n          inputMode=\"decimal\"\n          label={lang('YourEmailCode')}\n          error={error}\n          onChange={handleInputChange}\n        />\n        {isLoading && <Loading />}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global) => {\n  return {\n    animatedEmoji: selectAnimatedEmoji(global, ''),\n    codeLength: global.twoFaSettings.waitingEmailCodeLength,\n  };\n})(SettingsTwoFaEmailCode));\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, { memo } from '../../../../lib/teact/teact';\n\nimport { SettingsScreens } from '../../../../types';\n\nimport { LOCAL_TGS_URLS } from '../../../common/helpers/animatedAssets';\nimport renderText from '../../../common/helpers/renderText';\n\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport AnimatedIconWithPreview from '../../../common/AnimatedIconWithPreview';\nimport ListItem from '../../../ui/ListItem';\n\nimport lockPreviewUrl from '../../../../assets/lock.png';\n\ntype OwnProps = {\n  isActive?: boolean;\n  onScreenSelect: (screen: SettingsScreens) => void;\n  onReset: () => void;\n};\n\nconst SettingsTwoFaEnabled: FC<OwnProps> = ({\n  isActive, onReset, onScreenSelect,\n}) => {\n  const lang = useOldLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onReset,\n  });\n\n  return (\n    <div className=\"settings-content two-fa custom-scroll\">\n      <div className=\"settings-content-header no-border\">\n        <AnimatedIconWithPreview\n          tgsUrl={LOCAL_TGS_URLS.Lock}\n          previewUrl={lockPreviewUrl}\n          size={160}\n          className=\"settings-content-icon\"\n        />\n\n        <p className=\"settings-item-description mb-3\" dir=\"auto\">\n          {renderText(lang('EnabledPasswordText'), ['br'])}\n        </p>\n      </div>\n\n      <div className=\"settings-item pt-0\">\n        <ListItem\n          icon=\"edit\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => onScreenSelect(SettingsScreens.TwoFaChangePasswordCurrent)}\n        >\n          {lang('ChangePassword')}\n        </ListItem>\n        <ListItem\n          icon=\"password-off\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => onScreenSelect(SettingsScreens.TwoFaTurnOff)}\n        >\n          {lang('TurnPasswordOff')}\n        </ListItem>\n        <ListItem\n          icon=\"email\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => onScreenSelect(SettingsScreens.TwoFaRecoveryEmailCurrentPassword)}\n        >\n          {lang('SetRecoveryEmail')}\n        </ListItem>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(SettingsTwoFaEnabled);\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect, useRef, useState,\n} from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport type { ApiSticker } from '../../../../api/types';\n\nimport { selectAnimatedEmoji } from '../../../../global/selectors';\nimport { IS_TOUCH_ENV } from '../../../../util/windowEnvironment';\nimport renderText from '../../../common/helpers/renderText';\n\nimport useAppLayout from '../../../../hooks/useAppLayout';\nimport useFlag from '../../../../hooks/useFlag';\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Button from '../../../ui/Button';\nimport InputText from '../../../ui/InputText';\nimport Modal from '../../../ui/Modal';\n\ntype OwnProps = {\n  icon: 'hint' | 'email';\n  type?: 'text' | 'email';\n  isLoading?: boolean;\n  error?: string;\n  placeholder: string;\n  shouldConfirm?: boolean;\n  clearError?: NoneToVoidFunction;\n  onSubmit: (value?: string) => void;\n  isActive?: boolean;\n  onReset: () => void;\n};\n\ntype StateProps = {\n  animatedEmoji: ApiSticker;\n};\n\nconst ICON_SIZE = 160;\n\nconst SettingsTwoFaSkippableForm: FC<OwnProps & StateProps> = ({\n  animatedEmoji,\n  type = 'text',\n  isLoading,\n  error,\n  placeholder,\n  shouldConfirm,\n  clearError,\n  onSubmit,\n  isActive,\n  onReset,\n}) => {\n  // eslint-disable-next-line no-null/no-null\n  const inputRef = useRef<HTMLInputElement>(null);\n  const { isMobile } = useAppLayout();\n\n  const focusDelayTimeoutMs = isMobile ? 550 : 400;\n  const [value, setValue] = useState<string>('');\n  const [isConfirmShown, markIsConfirmShown, unmarkIsConfirmShown] = useFlag(false);\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV) {\n      setTimeout(() => {\n        inputRef.current!.focus();\n      }, focusDelayTimeoutMs);\n    }\n  }, [focusDelayTimeoutMs]);\n\n  const handleInputChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    if (error && clearError) {\n      clearError();\n    }\n\n    setValue(e.target.value);\n  }, [clearError, error]);\n\n  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n\n    if (!inputRef.current) {\n      return;\n    }\n\n    onSubmit(value);\n  };\n\n  const handleSkip = useCallback(() => {\n    onSubmit();\n  }, [onSubmit]);\n\n  const handleSkipConfirm = useCallback(() => {\n    unmarkIsConfirmShown();\n    onSubmit();\n  }, [onSubmit, unmarkIsConfirmShown]);\n\n  const lang = useOldLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onReset,\n  });\n\n  return (\n    <div className=\"settings-content two-fa custom-scroll\">\n      <div className=\"settings-content-header no-border\">\n        <AnimatedIconFromSticker sticker={animatedEmoji} size={ICON_SIZE} className=\"settings-content-icon\" />\n      </div>\n\n      <div className=\"settings-item pt-0\">\n        <form action=\"\" onSubmit={handleSubmit}>\n          <InputText\n            ref={inputRef}\n            value={value}\n            inputMode={type}\n            label={placeholder}\n            error={error}\n            onChange={handleInputChange}\n          />\n\n          {value ? (\n            <Button type=\"submit\" isLoading={isLoading} ripple>{lang('Continue')}</Button>\n          ) : (\n            <Button\n              isText\n              isLoading={isLoading}\n              ripple\n              onClick={shouldConfirm ? markIsConfirmShown : handleSkip}\n            >\n              {lang('YourEmailSkip')}\n            </Button>\n          )}\n        </form>\n        {shouldConfirm && (\n          <Modal\n            className=\"narrow\"\n            isOpen={isConfirmShown}\n            title={lang('YourEmailSkipWarning')}\n            onClose={unmarkIsConfirmShown}\n          >\n            {renderText(lang('YourEmailSkipWarningText'), ['br', 'simple_markdown'])}\n            <div className=\"dialog-buttons\">\n              <Button\n                color=\"danger\"\n                ripple\n                isText\n                className=\"confirm-dialog-button\"\n                onClick={handleSkipConfirm}\n              >\n                {lang('YourEmailSkip')}\n              </Button>\n              <Button\n                color=\"primary\"\n                ripple\n                isText\n                className=\"confirm-dialog-button\"\n                onClick={unmarkIsConfirmShown}\n              >\n                {lang('Cancel')}\n              </Button>\n            </div>\n          </Modal>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global, { icon }) => {\n  return {\n    animatedEmoji: selectAnimatedEmoji(global, icon === 'email' ? '' : ''),\n  };\n})(SettingsTwoFaSkippableForm));\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, { memo } from '../../../../lib/teact/teact';\n\nimport { LOCAL_TGS_URLS } from '../../../common/helpers/animatedAssets';\n\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport AnimatedIconWithPreview from '../../../common/AnimatedIconWithPreview';\nimport Button from '../../../ui/Button';\n\nimport lockPreviewUrl from '../../../../assets/lock.png';\n\ntype OwnProps = {\n  onStart: NoneToVoidFunction;\n  isActive?: boolean;\n  onReset: () => void;\n};\n\nconst SettingsTwoFaStart: FC<OwnProps> = ({\n  isActive, onReset, onStart,\n}) => {\n  const lang = useOldLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onReset,\n  });\n\n  return (\n    <div className=\"settings-content two-fa custom-scroll\">\n      <div className=\"settings-content-header no-border\">\n        <AnimatedIconWithPreview\n          tgsUrl={LOCAL_TGS_URLS.Lock}\n          previewUrl={lockPreviewUrl}\n          size={160}\n          className=\"settings-content-icon\"\n        />\n\n        <p className=\"settings-item-description mb-3\" dir=\"auto\">\n          {lang('SetAdditionalPasswordInfo')}\n        </p>\n      </div>\n\n      <div className=\"settings-item pt-0\">\n        <Button onClick={onStart}>{lang('EditAdminTransferSetPassword')}</Button>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(SettingsTwoFaStart);\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo,\n  useMemo,\n  useState,\n} from '../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../global';\n\nimport type { ApiChat, ApiChatMember, ApiUserStatus } from '../../api/types';\n\nimport {\n  filterChatsByName,\n  filterUsersByName, isChatChannel, isChatPublic, isChatSuperGroup, isUserBot, sortUserIds,\n} from '../../global/helpers';\nimport { selectChat, selectChatFullInfo } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { unique } from '../../util/iteratees';\nimport sortChatIds from '../common/helpers/sortChatIds';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport Icon from '../common/icons/Icon';\nimport Picker from '../common/Picker';\nimport Button from '../ui/Button';\nimport ConfirmDialog from '../ui/ConfirmDialog';\nimport Modal from '../ui/Modal';\n\nimport styles from './AppendEntityPicker.module.scss';\n\nexport type OwnProps = {\n  isOpen?: boolean;\n  onClose: () => void;\n  chatId?: string;\n  entityType: 'members' | 'channels' | undefined;\n  onSubmit: (value: string[]) => void;\n  selectionLimit: number;\n};\n\ninterface StateProps {\n  chatId?: string;\n  members?: ApiChatMember[];\n  adminMembersById?: Record<string, ApiChatMember>;\n  userStatusesById: Record<string, ApiUserStatus>;\n  channelList?: (ApiChat | undefined)[] | undefined;\n  isChannel?: boolean;\n  isSuperGroup?: boolean;\n  currentUserId?: string | undefined;\n}\n\nconst AppendEntityPickerModal: FC<OwnProps & StateProps> = ({\n  chatId,\n  isOpen,\n  onClose,\n  members,\n  adminMembersById,\n  userStatusesById,\n  entityType,\n  isChannel,\n  isSuperGroup,\n  onSubmit,\n  currentUserId,\n  selectionLimit,\n}) => {\n  const { showNotification } = getActions();\n\n  const lang = useOldLang();\n  const [isConfirmModalOpen, openConfirmModal, closeConfirmModal] = useFlag();\n\n  const [selectedIds, setSelectedIds] = useState<string[]>([]);\n  const [pendingChannelId, setPendingChannelId] = useState<string | undefined>(undefined);\n  const [searchQuery, setSearchQuery] = useState<string>('');\n\n  const channelsIds = useMemo(() => {\n    const chatsById = getGlobal().chats.byId;\n    const activeChatIds = getGlobal().chats.listIds.active;\n\n    return activeChatIds!.map((id) => chatsById[id])\n      .filter((chat) => chat && (isChatChannel(chat)\n        || isChatSuperGroup(chat)) && chat.id !== chatId)\n      .map((chat) => chat!.id);\n  }, [chatId]);\n\n  const adminIds = useMemo(() => {\n    return adminMembersById && Object.keys(adminMembersById);\n  }, [adminMembersById]);\n\n  const memberIds = useMemo(() => {\n    const usersById = getGlobal().users.byId;\n    if (!members || !usersById) {\n      return [];\n    }\n\n    const userIds = sortUserIds(\n      members.map(({ userId }) => userId),\n      usersById,\n      userStatusesById,\n    );\n\n    return adminIds ? userIds.filter((userId) => userId !== currentUserId) : userIds;\n  }, [adminIds, currentUserId, members, userStatusesById]);\n\n  const displayedMembersIds = useMemo(() => {\n    const usersById = getGlobal().users.byId;\n    const filteredContactIds = memberIds ? filterUsersByName(memberIds, usersById, searchQuery) : [];\n\n    return sortChatIds(unique(filteredContactIds).filter((userId) => {\n      const user = usersById[userId];\n      if (!user) {\n        return true;\n      }\n\n      return !isUserBot(user);\n    }));\n  }, [memberIds, searchQuery]);\n\n  const displayedChannelIds = useMemo(() => {\n    const chatsById = getGlobal().chats.byId;\n    const foundChannelIds = channelsIds ? filterChatsByName(lang, channelsIds, chatsById, searchQuery) : [];\n\n    return sortChatIds(unique(foundChannelIds).filter((contactId) => {\n      const chat = chatsById[contactId];\n      if (!chat) {\n        return true;\n      }\n\n      return isChannel || isSuperGroup;\n    }),\n    false,\n    selectedIds);\n  }, [channelsIds, lang, searchQuery, selectedIds, isSuperGroup, isChannel]);\n\n  const handleCloseButtonClick = useLastCallback(() => {\n    onSubmit([]);\n    onClose();\n  });\n\n  const handleSendIdList = useLastCallback(() => {\n    onSubmit(selectedIds);\n    onClose();\n  });\n\n  const confirmPrivateLinkChannelSelection = useLastCallback(() => {\n    if (pendingChannelId) {\n      setSelectedIds((prevIds) => unique([...prevIds, pendingChannelId]));\n    }\n    closeConfirmModal();\n  });\n\n  const handleSelectedMemberIdsChange = useLastCallback((newSelectedIds: string[]) => {\n    if (newSelectedIds.length > selectionLimit) {\n      showNotification({\n        message: lang('BoostingSelectUpToWarningUsers', selectionLimit),\n      });\n      return;\n    }\n    setSelectedIds(newSelectedIds);\n  });\n\n  const handleSelectedChannelIdsChange = useLastCallback((newSelectedIds: string[]) => {\n    const chatsById = getGlobal().chats.byId;\n    const newlyAddedIds = newSelectedIds.filter((id) => !selectedIds.includes(id));\n    const privateLinkChannelId = newlyAddedIds.find((id) => {\n      const chat = chatsById[id];\n      return chat && !isChatPublic(chat);\n    });\n\n    if (selectedIds?.length >= selectionLimit) {\n      showNotification({\n        message: lang('BoostingSelectUpToWarningChannelsPlural', selectionLimit),\n      });\n      return;\n    }\n\n    if (privateLinkChannelId) {\n      setPendingChannelId(privateLinkChannelId);\n      openConfirmModal();\n    } else {\n      setSelectedIds(newSelectedIds);\n    }\n  });\n\n  const handleClose = useLastCallback(() => {\n    onSubmit([]);\n    onClose();\n  });\n\n  function renderSearchField() {\n    return (\n      <div className={styles.filter} dir={lang.isRtl ? 'rtl' : undefined}>\n        <Button\n          round\n          size=\"smaller\"\n          color=\"translucent\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={handleCloseButtonClick}\n          ariaLabel={lang('Close')}\n        >\n          <Icon name=\"close\" />\n        </Button>\n        <h3 className={styles.title}>{lang(entityType === 'channels'\n          ? 'RequestPeer.ChooseChannelTitle' : 'BoostingAwardSpecificUsers')}\n        </h3>\n      </div>\n    );\n  }\n\n  return (\n    <Modal\n      className={styles.root}\n      isOpen={isOpen}\n      onClose={handleClose}\n      onEnter={handleSendIdList}\n    >\n      <div className={styles.main}>\n        {renderSearchField()}\n        <div className={buildClassName(styles.main, 'custom-scroll')}>\n          <Picker\n            className={styles.picker}\n            itemIds={entityType === 'members' ? displayedMembersIds : displayedChannelIds}\n            selectedIds={selectedIds}\n            filterValue={searchQuery}\n            filterPlaceholder={lang('Search')}\n            searchInputId={`${entityType}-picker-search`}\n            onSelectedIdsChange={entityType === 'channels'\n              ? handleSelectedChannelIdsChange : handleSelectedMemberIdsChange}\n            onFilterChange={setSearchQuery}\n            isSearchable\n          />\n        </div>\n        <div className={styles.buttons}>\n          <Button size=\"smaller\" onClick={handleSendIdList}>\n            {lang('Save')}\n          </Button>\n        </div>\n      </div>\n      <ConfirmDialog\n        title={lang('BoostingGiveawayPrivateChannel')}\n        text={lang('BoostingGiveawayPrivateChannelWarning')}\n        confirmLabel={lang('Add')}\n        isOpen={isConfirmModalOpen}\n        onClose={closeConfirmModal}\n        confirmHandler={confirmPrivateLinkChannelSelection}\n      />\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global, { chatId, entityType }): StateProps => {\n  const { statusesById: userStatusesById } = global.users;\n  let isChannel;\n  let isSuperGroup;\n  let members: ApiChatMember[] | undefined;\n  let adminMembersById: Record<string, ApiChatMember> | undefined;\n  let currentUserId: string | undefined;\n\n  if (entityType === 'members') {\n    currentUserId = global.currentUserId;\n    const chatFullInfo = chatId ? selectChatFullInfo(global, chatId) : undefined;\n    if (chatFullInfo) {\n      members = chatFullInfo.members;\n      adminMembersById = chatFullInfo.adminMembersById;\n    }\n  } if (entityType === 'channels') {\n    const chat = chatId ? selectChat(global, chatId) : undefined;\n    if (chat) {\n      isChannel = isChatChannel(chat);\n      isSuperGroup = isChatSuperGroup(chat);\n    }\n  }\n\n  return {\n    chatId,\n    members,\n    adminMembersById,\n    userStatusesById,\n    isChannel,\n    isSuperGroup,\n    currentUserId,\n  };\n})(AppendEntityPickerModal));\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo, useCallback, useEffect } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { TabState } from '../../global/types';\n\nimport useFlag from '../../hooks/useFlag';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport RecipientPicker from '../common/RecipientPicker';\n\nexport type OwnProps = {\n  requestedAttachBotInChat?: TabState['requestedAttachBotInChat'];\n};\n\nconst AttachBotRecipientPicker: FC<OwnProps> = ({\n  requestedAttachBotInChat,\n}) => {\n  const { cancelAttachBotInChat, callAttachBot } = getActions();\n  const lang = useOldLang();\n\n  const isOpen = Boolean(requestedAttachBotInChat);\n  const [isShown, markIsShown, unmarkIsShown] = useFlag();\n  useEffect(() => {\n    if (isOpen) {\n      markIsShown();\n    }\n  }, [isOpen, markIsShown]);\n\n  const { bot, filter, startParam } = requestedAttachBotInChat || {};\n\n  const handlePeerRecipient = useCallback((recipientId: string) => {\n    callAttachBot({ bot: bot!, chatId: recipientId, startParam });\n    cancelAttachBotInChat();\n  }, [bot, callAttachBot, cancelAttachBotInChat, startParam]);\n\n  if (!isOpen && !isShown) {\n    return undefined;\n  }\n\n  return (\n    <RecipientPicker\n      isOpen={isOpen}\n      searchPlaceholder={lang('Search')}\n      filter={filter}\n      onSelectRecipient={handlePeerRecipient}\n      onClose={cancelAttachBotInChat}\n      onCloseAnimationEnd={unmarkIsShown}\n    />\n  );\n};\n\nexport default memo(AttachBotRecipientPicker);\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiUser } from '../../api/types';\n\nimport { getUserFullName } from '../../global/helpers';\nimport renderText from '../common/helpers/renderText';\n\nimport useOldLang from '../../hooks/useOldLang';\n\nimport Checkbox from '../ui/Checkbox';\nimport ConfirmDialog from '../ui/ConfirmDialog';\n\nexport type OwnProps = {\n  bot?: ApiUser;\n  type?: 'game' | 'webApp' | 'botApp';\n  shouldRequestWriteAccess?: boolean;\n};\n\nconst BotTrustModal: FC<OwnProps> = ({ bot, type, shouldRequestWriteAccess }) => {\n  const { cancelBotTrustRequest, markBotTrusted } = getActions();\n\n  const [isWriteAllowed, setIsWriteAllowed] = useState(shouldRequestWriteAccess || false);\n\n  const lang = useOldLang();\n\n  const handleBotTrustAccept = useCallback(() => {\n    markBotTrusted({ botId: bot!.id, isWriteAllowed });\n  }, [markBotTrusted, isWriteAllowed, bot]);\n\n  const handleBotTrustDecline = useCallback(() => {\n    cancelBotTrustRequest();\n  }, []);\n\n  const title = type === 'game' ? lang('AppName') : lang('BotOpenPageTitle');\n  const text = useMemo(() => {\n    switch (type) {\n      case 'game':\n        return lang('BotPermissionGameAlert', getUserFullName(bot));\n      case 'webApp':\n        return lang('BotOpenPageMessage', getUserFullName(bot));\n      case 'botApp':\n      default:\n        return lang('BotWebViewStartPermission');\n    }\n  }, [bot, type, lang]);\n\n  return (\n    <ConfirmDialog\n      isOpen={Boolean(bot)}\n      onClose={handleBotTrustDecline}\n      title={title}\n      confirmHandler={handleBotTrustAccept}\n    >\n      {renderText(text, ['simple_markdown'])}\n      {shouldRequestWriteAccess && (\n        <Checkbox\n          className=\"dialog-checkbox\"\n          checked={isWriteAllowed}\n          label={renderText(\n            lang('WebApp.AddToAttachmentAllowMessages', bot?.firstName),\n            ['simple_markdown'],\n          )}\n          onCheck={setIsWriteAllowed}\n        />\n      )}\n    </ConfirmDialog>\n  );\n};\n\nexport default memo(BotTrustModal);\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo, useCallback } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiChatFolder } from '../../api/types';\n\nimport useOldLang from '../../hooks/useOldLang';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport ConfirmDialog from '../ui/ConfirmDialog';\n\nexport type OwnProps = {\n  folder?: ApiChatFolder;\n};\n\nconst DeleteFolderDialog: FC<OwnProps> = ({\n  folder,\n}) => {\n  const { closeDeleteChatFolderModal, deleteChatFolder, openDeleteChatFolderModal } = getActions();\n  const lang = useOldLang();\n\n  const isOpen = Boolean(folder);\n\n  const renderingFolder = usePrevious(folder) || folder;\n  const isMyChatlist = renderingFolder?.hasMyInvites;\n\n  const handleDeleteFolderMessage = useCallback(() => {\n    closeDeleteChatFolderModal();\n    if (isMyChatlist) {\n      openDeleteChatFolderModal({ folderId: renderingFolder!.id, isConfirmedForChatlist: true });\n    } else {\n      deleteChatFolder({ id: renderingFolder!.id });\n    }\n  }, [isMyChatlist, renderingFolder]);\n\n  return (\n    <ConfirmDialog\n      isOpen={isOpen}\n      onClose={closeDeleteChatFolderModal}\n      text={isMyChatlist ? lang('FilterDeleteAlertLinks') : lang('FilterDeleteAlert')}\n      confirmLabel={lang('Delete')}\n      confirmHandler={handleDeleteFolderMessage}\n      confirmIsDestructive\n    />\n  );\n};\n\nexport default memo(DeleteFolderDialog);\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo, useEffect } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type {\n  ApiContact, ApiError, ApiInviteInfo, ApiPhoto,\n} from '../../api/types';\nimport type { MessageList } from '../../global/types';\n\nimport { selectCurrentMessageList, selectTabState } from '../../global/selectors';\nimport getReadableErrorText from '../../util/getReadableErrorText';\nimport { pick } from '../../util/iteratees';\nimport renderText from '../common/helpers/renderText';\n\nimport useFlag from '../../hooks/useFlag';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport Avatar from '../common/Avatar';\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\n\ntype StateProps = {\n  currentMessageList?: MessageList;\n  dialogs: (ApiError | ApiInviteInfo | ApiContact)[];\n};\n\nconst Dialogs: FC<StateProps> = ({ dialogs, currentMessageList }) => {\n  const {\n    dismissDialog,\n    acceptInviteConfirmation,\n    sendMessage,\n    showNotification,\n  } = getActions();\n  const [isModalOpen, openModal, closeModal] = useFlag();\n\n  const lang = useOldLang();\n\n  useEffect(() => {\n    if (dialogs.length > 0) {\n      openModal();\n    }\n  }, [dialogs, openModal]);\n\n  if (!dialogs.length) {\n    return undefined;\n  }\n\n  function renderInviteHeader(title: string, photo?: ApiPhoto) {\n    return (\n      <div className=\"modal-header\">\n        {photo && <Avatar size=\"small\" photo={photo} withVideo />}\n        <div className=\"modal-title\">\n          {renderText(title)}\n        </div>\n        <Button round color=\"translucent\" size=\"smaller\" ariaLabel={lang('Close')} onClick={closeModal}>\n          <i className=\"icon icon-close\" />\n        </Button>\n      </div>\n    );\n  }\n\n  const renderInvite = (invite: ApiInviteInfo) => {\n    const {\n      hash, title, about, participantsCount, isChannel, photo, isRequestNeeded,\n    } = invite;\n\n    const handleJoinClick = () => {\n      acceptInviteConfirmation({\n        hash,\n      });\n      if (isRequestNeeded) {\n        showNotification({\n          message: isChannel ? lang('RequestToJoinChannelSentDescription') : lang('RequestToJoinGroupSentDescription'),\n        });\n      }\n      closeModal();\n    };\n\n    const participantsText = isChannel\n      ? lang('Subscribers', participantsCount, 'i')\n      : lang('Members', participantsCount, 'i');\n\n    const joinText = isChannel ? lang('ChannelJoin') : lang('JoinGroup');\n    const requestToJoinText = isChannel\n      ? lang('MemberRequests.RequestToJoinChannel') : lang('MemberRequests.RequestToJoinGroup');\n\n    return (\n      <Modal\n        isOpen={isModalOpen}\n        onClose={closeModal}\n        className=\"error\"\n        header={renderInviteHeader(title, photo)}\n        onCloseAnimationEnd={dismissDialog}\n      >\n        {participantsCount !== undefined && <p className=\"modal-help\">{participantsText}</p>}\n        {about && <p className=\"modal-about\">{renderText(about, ['br'])}</p>}\n        {isRequestNeeded && (\n          <p className=\"modal-help\">\n            {isChannel\n              ? lang('MemberRequests.RequestToJoinDescriptionChannel')\n              : lang('MemberRequests.RequestToJoinDescriptionGroup')}\n          </p>\n        )}\n        <div className=\"dialog-buttons mt-2\">\n          <Button\n            isText\n            className=\"confirm-dialog-button\"\n            // eslint-disable-next-line react/jsx-no-bind\n            onClick={handleJoinClick}\n          >\n            {isRequestNeeded ? requestToJoinText : joinText}\n          </Button>\n          <Button isText className=\"confirm-dialog-button\" onClick={closeModal}>{lang('Cancel')}</Button>\n        </div>\n      </Modal>\n    );\n  };\n\n  const renderContactRequest = (contactRequest: ApiContact) => {\n    const handleConfirm = () => {\n      if (!currentMessageList) {\n        return;\n      }\n\n      sendMessage({\n        contact: pick(contactRequest, ['firstName', 'lastName', 'phoneNumber']),\n        messageList: currentMessageList,\n      });\n      closeModal();\n    };\n\n    return (\n      <Modal\n        isOpen={isModalOpen}\n        onClose={closeModal}\n        className=\"confirm\"\n        title={lang('ShareYouPhoneNumberTitle')}\n        onCloseAnimationEnd={dismissDialog}\n      >\n        {lang('AreYouSureShareMyContactInfoBot')}\n        <div className=\"dialog-buttons mt-2\">\n          <Button\n            className=\"confirm-dialog-button\"\n            isText\n            // eslint-disable-next-line react/jsx-no-bind\n            onClick={handleConfirm}\n          >\n            {lang('OK')}\n          </Button>\n          <Button className=\"confirm-dialog-button\" isText onClick={closeModal}>{lang('Cancel')}</Button>\n        </div>\n      </Modal>\n    );\n  };\n\n  const renderError = (error: ApiError) => {\n    return (\n      <Modal\n        isOpen={isModalOpen}\n        onClose={closeModal}\n        onCloseAnimationEnd={dismissDialog}\n        className=\"error\"\n        title={getErrorHeader(error)}\n      >\n        {error.hasErrorKey ? getReadableErrorText(error)\n          : renderText(error.message!, ['simple_markdown', 'emoji', 'br'])}\n        <div className=\"dialog-buttons mt-2\">\n          <Button isText onClick={closeModal}>{lang('OK')}</Button>\n        </div>\n      </Modal>\n    );\n  };\n\n  const renderDialog = (dialog: ApiError | ApiInviteInfo | ApiContact) => {\n    if ('hash' in dialog) {\n      return renderInvite(dialog);\n    }\n\n    if ('phoneNumber' in dialog) {\n      return renderContactRequest(dialog);\n    }\n\n    return renderError(dialog);\n  };\n\n  return Boolean(dialogs.length) && renderDialog(dialogs[dialogs.length - 1]);\n};\n\nfunction getErrorHeader(error: ApiError) {\n  if (error.isSlowMode) {\n    return 'Slowmode enabled';\n  }\n\n  if (!error.hasErrorKey) {\n    return 'Telegram';\n  }\n\n  return 'Something went wrong';\n}\n\nexport default memo(withGlobal(\n  (global): StateProps => {\n    return {\n      dialogs: selectTabState(global).dialogs,\n      currentMessageList: selectCurrentMessageList(global),\n    };\n  },\n)(Dialogs));\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect,\n} from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { TabState } from '../../global/types';\nimport type { ThreadId } from '../../types';\n\nimport useFlag from '../../hooks/useFlag';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport RecipientPicker from '../common/RecipientPicker';\n\nexport type OwnProps = {\n  requestedDraft?: TabState['requestedDraft'];\n};\n\nconst DraftRecipientPicker: FC<OwnProps> = ({\n  requestedDraft,\n}) => {\n  const isOpen = Boolean(requestedDraft && !requestedDraft.chatId);\n  const {\n    openChatWithDraft,\n    resetOpenChatWithDraft,\n  } = getActions();\n\n  const lang = useOldLang();\n\n  const [isShown, markIsShown, unmarkIsShown] = useFlag();\n  useEffect(() => {\n    if (isOpen) {\n      markIsShown();\n    }\n  }, [isOpen, markIsShown]);\n\n  const handleSelectRecipient = useCallback((recipientId: string, threadId?: ThreadId) => {\n    openChatWithDraft({\n      chatId: recipientId,\n      threadId,\n      text: requestedDraft!.text,\n      files: requestedDraft!.files,\n    });\n  }, [openChatWithDraft, requestedDraft]);\n\n  const handleClose = useCallback(() => {\n    resetOpenChatWithDraft();\n  }, [resetOpenChatWithDraft]);\n\n  if (!isOpen && !isShown) {\n    return undefined;\n  }\n\n  return (\n    <RecipientPicker\n      isOpen={isOpen}\n      searchPlaceholder={lang('ForwardTo')}\n      filter={requestedDraft?.filter}\n      onSelectRecipient={handleSelectRecipient}\n      onClose={handleClose}\n      onCloseAnimationEnd={unmarkIsShown}\n    />\n  );\n};\n\nexport default memo(DraftRecipientPicker);\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect,\n} from '../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../global';\n\nimport type { ThreadId } from '../../types';\n\nimport { getChatTitle, getUserFirstOrLastName, isUserId } from '../../global/helpers';\nimport {\n  selectChat,\n  selectTabState,\n  selectUser,\n} from '../../global/selectors';\n\nimport useFlag from '../../hooks/useFlag';\nimport useOldLang from '../../hooks/useOldLang';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport RecipientPicker from '../common/RecipientPicker';\n\nexport type OwnProps = {\n  isOpen: boolean;\n};\n\ninterface StateProps {\n  currentUserId?: string;\n  isManyMessages?: boolean;\n  isStory?: boolean;\n  isForwarding?: boolean;\n}\n\nconst ForwardRecipientPicker: FC<OwnProps & StateProps> = ({\n  isOpen,\n  currentUserId,\n  isManyMessages,\n  isStory,\n  isForwarding,\n}) => {\n  const {\n    openChatOrTopicWithReplyInDraft,\n    setForwardChatOrTopic,\n    exitForwardMode,\n    forwardToSavedMessages,\n    forwardStory,\n    showNotification,\n  } = getActions();\n\n  const lang = useOldLang();\n\n  const renderingIsStory = usePrevious(isStory, true);\n  const [isShown, markIsShown, unmarkIsShown] = useFlag();\n  useEffect(() => {\n    if (isOpen) {\n      markIsShown();\n    }\n  }, [isOpen, markIsShown]);\n\n  const handleSelectRecipient = useCallback((recipientId: string, threadId?: ThreadId) => {\n    const isSelf = recipientId === currentUserId;\n    if (isStory) {\n      forwardStory({ toChatId: recipientId });\n      const global = getGlobal();\n      if (isUserId(recipientId)) {\n        showNotification({\n          message: isSelf\n            ? lang('Conversation.StoryForwardTooltip.SavedMessages.One')\n            : lang(\n              'StorySharedTo',\n              getUserFirstOrLastName(selectUser(global, recipientId)),\n            ),\n        });\n      } else {\n        const chat = selectChat(global, recipientId);\n        if (!chat) return;\n\n        showNotification({\n          message: lang('StorySharedTo', getChatTitle(lang, chat)),\n        });\n      }\n      return;\n    }\n\n    if (isSelf) {\n      const message = lang(\n        isManyMessages\n          ? 'Conversation.ForwardTooltip.SavedMessages.Many'\n          : 'Conversation.ForwardTooltip.SavedMessages.One',\n      );\n\n      forwardToSavedMessages();\n      showNotification({ message });\n    } else {\n      const chatId = recipientId;\n      const topicId = threadId ? Number(threadId) : undefined;\n      if (isForwarding) {\n        setForwardChatOrTopic({ chatId, topicId });\n      } else {\n        openChatOrTopicWithReplyInDraft({ chatId, topicId });\n      }\n    }\n  }, [currentUserId, isManyMessages, isStory, lang, isForwarding]);\n\n  const handleClose = useCallback(() => {\n    exitForwardMode();\n  }, [exitForwardMode]);\n\n  if (!isOpen && !isShown) {\n    return undefined;\n  }\n\n  return (\n    <RecipientPicker\n      isOpen={isOpen}\n      className={renderingIsStory ? 'component-theme-dark' : undefined}\n      searchPlaceholder={lang('ForwardTo')}\n      onSelectRecipient={handleSelectRecipient}\n      onClose={handleClose}\n      onCloseAnimationEnd={unmarkIsShown}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { messageIds, storyId } = selectTabState(global).forwardMessages;\n  const isForwarding = (messageIds && messageIds.length > 0);\n  return {\n    currentUserId: global.currentUserId,\n    isManyMessages: (messageIds?.length || 0) > 1,\n    isStory: Boolean(storyId),\n    isForwarding,\n  };\n})(ForwardRecipientPicker));\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo, useCallback } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { selectTabState } from '../../global/selectors';\n\nimport useOldLang from '../../hooks/useOldLang';\n\nimport CalendarModal from '../common/CalendarModal';\n\nexport type OwnProps = {\n  isOpen: boolean;\n};\n\ntype StateProps = {\n  selectedAt?: number;\n};\n\nconst HistoryCalendar: FC<OwnProps & StateProps> = ({\n  isOpen, selectedAt,\n}) => {\n  const { searchMessagesByDate, closeHistoryCalendar } = getActions();\n\n  const handleJumpToDate = useCallback((date: Date) => {\n    searchMessagesByDate({ timestamp: date.valueOf() / 1000 });\n    closeHistoryCalendar();\n  }, [closeHistoryCalendar, searchMessagesByDate]);\n\n  const lang = useOldLang();\n\n  return (\n    <CalendarModal\n      isOpen={isOpen}\n      selectedAt={selectedAt}\n      isPastMode\n      submitButtonLabel={lang('JumpToDate')}\n      onClose={closeHistoryCalendar}\n      onSubmit={handleJumpToDate}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    return { selectedAt: selectTabState(global).historyCalendarSelectedAt };\n  },\n)(HistoryCalendar));\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiCountryCode, ApiUser, ApiUserStatus } from '../../api/types';\n\nimport { getUserStatus } from '../../global/helpers';\nimport { selectUser, selectUserStatus } from '../../global/selectors';\nimport { formatPhoneNumberWithCode } from '../../util/phoneNumber';\nimport { IS_TOUCH_ENV } from '../../util/windowEnvironment';\nimport renderText from '../common/helpers/renderText';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useFlag from '../../hooks/useFlag';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport Avatar from '../common/Avatar';\nimport Button from '../ui/Button';\nimport Checkbox from '../ui/Checkbox';\nimport InputText from '../ui/InputText';\nimport Modal from '../ui/Modal';\n\nimport './NewContactModal.scss';\n\nconst ANIMATION_DURATION = 200;\n\nexport type OwnProps = {\n  isOpen: boolean;\n  userId?: string;\n  isByPhoneNumber?: boolean;\n};\n\ntype StateProps = {\n  user?: ApiUser;\n  userStatus?: ApiUserStatus;\n  phoneCodeList: ApiCountryCode[];\n};\n\nconst NewContactModal: FC<OwnProps & StateProps> = ({\n  isOpen,\n  userId,\n  isByPhoneNumber,\n  user,\n  userStatus,\n  phoneCodeList,\n}) => {\n  const { updateContact, importContact, closeNewContactDialog } = getActions();\n\n  const lang = useOldLang();\n  const renderingUser = useCurrentOrPrev(user);\n  const renderingIsByPhoneNumber = useCurrentOrPrev(isByPhoneNumber);\n  // eslint-disable-next-line no-null/no-null\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const [isShown, markIsShown, unmarkIsShown] = useFlag();\n  const [firstName, setFirstName] = useState<string>(renderingUser?.firstName ?? '');\n  const [lastName, setLastName] = useState<string>(renderingUser?.lastName ?? '');\n  const [phone, setPhone] = useState<string>(renderingUser?.phoneNumber ?? '');\n  const [shouldSharePhoneNumber, setShouldSharePhoneNumber] = useState<boolean>(true);\n  const canBeSubmitted = Boolean(firstName && (!isByPhoneNumber || phone));\n\n  useEffect(() => {\n    if (isOpen) {\n      markIsShown();\n      setFirstName(renderingUser?.firstName ?? '');\n      setLastName(renderingUser?.lastName ?? '');\n      setPhone(renderingUser?.phoneNumber ?? '');\n      setShouldSharePhoneNumber(true);\n    }\n  }, [isOpen, markIsShown, renderingUser?.firstName, renderingUser?.lastName, renderingUser?.phoneNumber]);\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV && isShown) {\n      setTimeout(() => { inputRef.current?.focus(); }, ANIMATION_DURATION);\n    }\n  }, [isShown]);\n\n  const handleFirstNameChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setFirstName(e.target.value);\n  }, []);\n\n  const handlePhoneChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setPhone(formatPhoneNumberWithCode(phoneCodeList, e.target.value));\n  }, [phoneCodeList]);\n\n  const handleLastNameChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setLastName(e.target.value);\n  }, []);\n\n  const handleClose = useCallback(() => {\n    closeNewContactDialog();\n    setFirstName('');\n    setLastName('');\n    setPhone('');\n  }, [closeNewContactDialog]);\n\n  const handleSubmit = useCallback(() => {\n    if (isByPhoneNumber || !userId) {\n      importContact({\n        firstName,\n        lastName,\n        phoneNumber: phone,\n      });\n    } else {\n      updateContact({\n        userId,\n        firstName,\n        lastName,\n        shouldSharePhoneNumber,\n      });\n    }\n  }, [firstName, importContact, isByPhoneNumber, lastName, phone, shouldSharePhoneNumber, updateContact, userId]);\n\n  if (!isOpen && !isShown) {\n    return undefined;\n  }\n\n  function renderAddContact() {\n    return (\n      <>\n        <div className=\"NewContactModal__profile\" dir={lang.isRtl ? 'rtl' : undefined}>\n          <Avatar\n            size=\"jumbo\"\n            peer={renderingUser}\n            text={`${firstName} ${lastName}`}\n          />\n          <div className=\"NewContactModal__profile-info\">\n            <p className=\"NewContactModal__phone-number\">\n              {renderingUser?.phoneNumber\n                ? formatPhoneNumberWithCode(phoneCodeList, renderingUser.phoneNumber)\n                : lang('MobileHidden')}\n            </p>\n            <span className=\"NewContactModal__user-status\" dir=\"auto\">\n              {getUserStatus(lang, renderingUser!, userStatus)}\n            </span>\n          </div>\n        </div>\n        <InputText\n          ref={inputRef}\n          value={firstName}\n          label={lang('FirstName')}\n          tabIndex={0}\n          onChange={handleFirstNameChange}\n        />\n        <InputText\n          value={lastName}\n          label={lang('LastName')}\n          tabIndex={0}\n          onChange={handleLastNameChange}\n        />\n        <p className=\"NewContactModal__help-text\">\n          {renderText(\n            lang('NewContact.Phone.Hidden.Text', renderingUser?.firstName || ''),\n            ['emoji', 'simple_markdown'],\n          )}\n        </p>\n        <Checkbox\n          checked={shouldSharePhoneNumber}\n          tabIndex={0}\n          onCheck={setShouldSharePhoneNumber}\n          label={lang('lng_new_contact_share')}\n        />\n        <p className=\"NewContactModal__help-text\">\n          {renderText(lang('AddContact.SharedContactExceptionInfo', renderingUser?.firstName))}\n        </p>\n      </>\n    );\n  }\n\n  function renderCreateContact() {\n    return (\n      <div className=\"NewContactModal__new-contact\" dir={lang.isRtl ? 'rtl' : undefined}>\n        <Avatar size=\"jumbo\" text={`${firstName} ${lastName}`} />\n        <div className=\"NewContactModal__new-contact-fieldset\">\n          <InputText\n            ref={inputRef}\n            value={phone}\n            inputMode=\"tel\"\n            label={lang('lng_contact_phone')}\n            tabIndex={0}\n            onChange={handlePhoneChange}\n          />\n          <InputText\n            value={firstName}\n            label={lang('FirstName')}\n            tabIndex={0}\n            onChange={handleFirstNameChange}\n          />\n          <InputText\n            value={lastName}\n            label={lang('LastName')}\n            tabIndex={0}\n            onChange={handleLastNameChange}\n          />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <Modal\n      className=\"NewContactModal\"\n      title={lang('NewContact')}\n      isOpen={isOpen}\n      onClose={handleClose}\n      onCloseAnimationEnd={unmarkIsShown}\n    >\n      {renderingUser && renderAddContact()}\n      {renderingIsByPhoneNumber && renderCreateContact()}\n      <div className=\"dialog-buttons\">\n        <Button\n          isText\n          className=\"confirm-dialog-button\"\n          onClick={handleClose}\n        >\n          {lang('Cancel')}\n        </Button>\n        <Button\n          isText\n          className=\"confirm-dialog-button\"\n          disabled={!canBeSubmitted}\n          onClick={handleSubmit}\n        >\n          {lang('Done')}\n        </Button>\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { userId }): StateProps => {\n    const user = userId ? selectUser(global, userId) : undefined;\n    return {\n      user,\n      userStatus: userId ? selectUserStatus(global, userId) : undefined,\n      phoneCodeList: global.countryList.phoneCodes,\n    };\n  },\n)(NewContactModal));\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiNotification } from '../../api/types';\n\nimport { selectTabState } from '../../global/selectors';\nimport { pick } from '../../util/iteratees';\nimport renderText from '../common/helpers/renderText';\n\nimport Notification from '../ui/Notification';\n\ntype StateProps = {\n  notifications: ApiNotification[];\n};\n\nconst Notifications: FC<StateProps> = ({ notifications }) => {\n  const { dismissNotification } = getActions();\n\n  if (!notifications.length) {\n    return undefined;\n  }\n\n  return (\n    <div id=\"Notifications\">\n      {notifications.map(({\n        message, className, localId, action, actionText, title, duration,\n      }) => (\n        <Notification\n          title={title ? renderText(title, ['simple_markdown', 'emoji', 'br', 'links']) : undefined}\n          action={action}\n          actionText={actionText}\n          className={className}\n          duration={duration}\n          message={renderText(message, ['simple_markdown', 'emoji', 'br', 'links'])}\n          // eslint-disable-next-line react/jsx-no-bind\n          onDismiss={() => dismissNotification({ localId })}\n        />\n      ))}\n    </div>\n  );\n};\n\nexport default memo(withGlobal(\n  (global): StateProps => pick(selectTabState(global), ['notifications']),\n)(Notifications));\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo, useCallback } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { ensureProtocol } from '../../util/ensureProtocol';\nimport renderText from '../common/helpers/renderText';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport ConfirmDialog from '../ui/ConfirmDialog';\n\nexport type OwnProps = {\n  url?: string;\n};\n\nconst SafeLinkModal: FC<OwnProps> = ({ url }) => {\n  const { toggleSafeLinkModal } = getActions();\n\n  const lang = useOldLang();\n\n  const handleOpen = useCallback(() => {\n    window.open(ensureProtocol(url), '_blank', 'noopener');\n    toggleSafeLinkModal({ url: undefined });\n  }, [toggleSafeLinkModal, url]);\n\n  const handleDismiss = useCallback(() => {\n    toggleSafeLinkModal({ url: undefined });\n  }, [toggleSafeLinkModal]);\n\n  const renderingUrl = useCurrentOrPrev(url);\n\n  return (\n    <ConfirmDialog\n      isOpen={Boolean(url)}\n      onClose={handleDismiss}\n      title={lang('OpenUrlTitle')}\n      textParts={renderText(lang('OpenUrlAlert2', renderingUrl), ['links'])}\n      confirmLabel={lang('OpenUrlTitle')}\n      confirmHandler={handleOpen}\n    />\n  );\n};\n\nexport default memo(SafeLinkModal);\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useRef,\n  useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type {\n  ApiPremiumGiftCodeOption,\n} from '../../../api/types';\n\nimport { BOOST_PER_SENT_GIFT } from '../../../config';\nimport { getUserFullName } from '../../../global/helpers';\nimport {\n  selectTabState,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatCurrency } from '../../../util/formatCurrency';\nimport renderText from '../../common/helpers/renderText';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport AvatarList from '../../common/AvatarList';\nimport Icon from '../../common/icons/Icon';\nimport Button from '../../ui/Button';\nimport Link from '../../ui/Link';\nimport Modal from '../../ui/Modal';\nimport PremiumSubscriptionOption from './PremiumSubscriptionOption';\n\nimport styles from './GiftPremiumModal.module.scss';\n\nexport type OwnProps = {\n  isOpen?: boolean;\n};\n\ntype StateProps = {\n  isCompleted?: boolean;\n  gifts?: ApiPremiumGiftCodeOption[] | undefined;\n  forUserIds?: string[];\n  boostPerSentGift?: number;\n};\n\nconst GiftPremiumModal: FC<OwnProps & StateProps> = ({\n  isOpen,\n  isCompleted,\n  gifts,\n  boostPerSentGift = BOOST_PER_SENT_GIFT,\n  forUserIds,\n}) => {\n  // eslint-disable-next-line no-null/no-null\n  const dialogRef = useRef<HTMLDivElement>(null);\n\n  const {\n    openPremiumModal, closeGiftPremiumModal, openInvoice, requestConfetti,\n  } = getActions();\n\n  const lang = useOldLang();\n  const [selectedMonthOption, setSelectedMonthOption] = useState<number | undefined>();\n\n  const selectedUserQuantity = forUserIds && forUserIds.length * boostPerSentGift;\n\n  useEffect(() => {\n    if (forUserIds?.length) {\n      setSelectedMonthOption(gifts?.[0].months);\n    }\n  }, [gifts, forUserIds]);\n\n  const giftingUserList = useMemo(() => {\n    const usersById = getGlobal().users.byId;\n    return forUserIds?.map((userId) => usersById[userId]).filter(Boolean);\n  }, [forUserIds]);\n\n  const selectedGift = useMemo(() => {\n    return gifts?.find((gift) => gift.months === selectedMonthOption && gift.users === forUserIds?.length);\n  }, [gifts, selectedMonthOption, forUserIds?.length]);\n\n  const filteredGifts = useMemo(() => {\n    return gifts?.filter((gift) => gift.users\n      === forUserIds?.length);\n  }, [gifts, forUserIds?.length]);\n\n  const fullMonthlyGiftAmount = useMemo(() => {\n    if (!filteredGifts?.length) {\n      return undefined;\n    }\n\n    const basicGift = filteredGifts.reduce((acc, gift) => {\n      return gift.amount < acc.amount ? gift : acc;\n    });\n\n    return Math.floor(basicGift.amount / basicGift.months);\n  }, [filteredGifts]);\n\n  const handleSubmit = useLastCallback(() => {\n    if (!selectedGift) {\n      return;\n    }\n\n    openInvoice({\n      type: 'giftcode',\n      userIds: forUserIds!,\n      currency: selectedGift!.currency,\n      amount: selectedGift!.amount,\n      option: selectedGift!,\n    });\n  });\n\n  const handlePremiumClick = useLastCallback(() => {\n    openPremiumModal();\n  });\n\n  const showConfetti = useLastCallback(() => {\n    const dialog = dialogRef.current;\n    if (!dialog) return;\n    if (isOpen) {\n      const {\n        top, left, width, height,\n      } = dialog.querySelector('.modal-content')!.getBoundingClientRect();\n      requestConfetti({\n        top,\n        left,\n        width,\n        height,\n        withStars: true,\n      });\n    }\n  });\n\n  useEffect(() => {\n    if (isCompleted) {\n      showConfetti();\n    }\n  }, [isCompleted, showConfetti]);\n\n  const userNameList = useMemo(() => {\n    const usersById = getGlobal().users.byId;\n    return forUserIds?.map((userId) => getUserFullName(usersById[userId])).join(', ');\n  }, [forUserIds]);\n\n  function renderGiftTitle() {\n    if (isCompleted) {\n      return renderText(lang('TelegramPremiumUserGiftedPremiumOutboundDialogTitle',\n        [userNameList, selectedGift?.months]), ['simple_markdown']);\n    }\n\n    return lang('GiftTelegramPremiumTitle');\n  }\n\n  function renderGiftText() {\n    if (isCompleted) {\n      return renderText(lang('TelegramPremiumUserGiftedPremiumOutboundDialogSubtitle', userNameList),\n        ['simple_markdown']);\n    }\n    return renderText(lang('GiftPremiumUsersGiveAccessManyZero', userNameList), ['simple_markdown']);\n  }\n\n  function renderPremiumFeaturesLink() {\n    const info = lang('GiftPremiumListFeaturesAndTerms');\n    // Translation hack for rendering component inside string\n    const parts = info.match(/([^*]*)\\*([^*]+)\\*(.*)/);\n\n    if (!parts || parts.length < 4) {\n      return undefined;\n    }\n\n    return (\n      <p className={buildClassName(styles.premiumFeatures, styles.center)}>\n        {parts[1]}\n        <Link isPrimary onClick={handlePremiumClick}>{parts[2]}</Link>\n        {parts[3]}\n      </p>\n    );\n  }\n\n  function renderBoostsPluralText() {\n    const giftParts = renderText(lang('GiftPremiumWillReceiveBoostsPlural', selectedUserQuantity), ['simple_markdown']);\n    return giftParts.map((part) => {\n      if (typeof part === 'string') {\n        return part.split(/()/g).map((subpart) => {\n          if (subpart === '') {\n            return <Icon name=\"boost\" className={styles.boostIcon} />;\n          }\n          return subpart;\n        });\n      }\n      return part;\n    });\n  }\n\n  function renderSubscriptionGiftOptions() {\n    return (\n      <div className={styles.subscriptionOptions}>\n        {filteredGifts?.map((gift) => {\n          return (\n            <PremiumSubscriptionOption\n              className={styles.subscriptionOption}\n              key={gift.months}\n              option={gift}\n              fullMonthlyAmount={fullMonthlyGiftAmount}\n              checked={gift.months === selectedMonthOption}\n              onChange={setSelectedMonthOption}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n\n  return (\n    <Modal\n      dialogRef={dialogRef}\n      onClose={closeGiftPremiumModal}\n      isOpen={isOpen}\n      className={styles.modalDialog}\n    >\n      <div className=\"custom-scroll\">\n        <Button\n          round\n          size=\"smaller\"\n          className={styles.closeButton}\n          color=\"translucent\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => closeGiftPremiumModal()}\n          ariaLabel={lang('Close')}\n        >\n          <i className=\"icon icon-close\" />\n        </Button>\n        <div className={styles.avatars}>\n          <AvatarList\n            size=\"large\"\n            peers={giftingUserList}\n          />\n        </div>\n        <h2 className={buildClassName(styles.headerText, styles.center)}>\n          {renderGiftTitle()}\n        </h2>\n        <p className={buildClassName(styles.description, styles.center)}>\n          {renderGiftText()}\n        </p>\n        {!isCompleted && (\n          <>\n            <p className={styles.description}>\n              {renderText(renderBoostsPluralText(), ['simple_markdown', 'emoji'])}\n            </p>\n\n            <div className={styles.options}>\n              {renderSubscriptionGiftOptions()}\n            </div>\n          </>\n        )}\n        {renderPremiumFeaturesLink()}\n      </div>\n\n      {!isCompleted && (\n        <Button withPremiumGradient className={styles.button} isShiny disabled={!selectedGift} onClick={handleSubmit}>\n          {lang(\n            'GiftSubscriptionFor', selectedGift\n            && formatCurrency(selectedGift!.amount, selectedGift.currency, lang.code),\n          )}\n        </Button>\n      )}\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    gifts, forUserIds, isCompleted,\n  } = selectTabState(global).giftPremiumModal || {};\n\n  return {\n    isCompleted,\n    gifts,\n    boostPerSentGift: global.appConfig?.boostsPerSentGift,\n    forUserIds,\n  };\n})(GiftPremiumModal));\n","import type { ChangeEvent } from 'react';\nimport type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type {\n  ApiCountry, ApiPremiumGiftCodeOption, ApiPrepaidGiveaway, ApiUser,\n} from '../../../api/types';\n\nimport {\n  GIVEAWAY_BOOST_PER_PREMIUM,\n  GIVEAWAY_MAX_ADDITIONAL_CHANNELS,\n  GIVEAWAY_MAX_ADDITIONAL_COUNTRIES,\n  GIVEAWAY_MAX_ADDITIONAL_USERS,\n} from '../../../config';\nimport { getUserFullName, isChatChannel } from '../../../global/helpers';\nimport {\n  selectChat,\n  selectTabState,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatDateTimeToString } from '../../../util/dates/dateFormat';\nimport renderText from '../../common/helpers/renderText';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport CalendarModal from '../../common/CalendarModal';\nimport CountryPickerModal from '../../common/CountryPickerModal';\nimport GroupChatInfo from '../../common/GroupChatInfo';\nimport Icon from '../../common/icons/Icon';\nimport Button from '../../ui/Button';\nimport ConfirmDialog from '../../ui/ConfirmDialog';\nimport InputText from '../../ui/InputText';\nimport Link from '../../ui/Link';\nimport ListItem from '../../ui/ListItem';\nimport Modal from '../../ui/Modal';\nimport RadioGroup from '../../ui/RadioGroup';\nimport RangeSliderWithMarks from '../../ui/RangeSliderWithMarks';\nimport Switcher from '../../ui/Switcher';\nimport AppendEntityPickerModal from '../AppendEntityPickerModal';\nimport GiveawayTypeOption from './GiveawayTypeOption';\nimport PremiumSubscriptionOption from './PremiumSubscriptionOption';\n\nimport styles from './GiveawayModal.module.scss';\n\nimport GiftBlueRound from '../../../assets/premium/GiftBlueRound.svg';\nimport GiftGreenRound from '../../../assets/premium/GiftGreenRound.svg';\nimport GiftRedRound from '../../../assets/premium/GiftRedRound.svg';\nimport GiveawayUsersRound from '../../../assets/premium/GiveawayUsersRound.svg';\nimport PremiumLogo from '../../../assets/premium/PremiumLogo.svg';\n\nexport type OwnProps = {\n  isOpen?: boolean;\n  userIds?: string[];\n};\n\ntype StateProps = {\n  chatId?: string;\n  gifts?: ApiPremiumGiftCodeOption[];\n  isOpen?: boolean;\n  fromUser?: ApiUser;\n  selectedMemberList?: string[] | undefined;\n  selectedChannelList?: string[] | undefined;\n  giveawayBoostPerPremiumLimit?: number;\n  userSelectionLimit?: number;\n  countryList: ApiCountry[];\n  prepaidGiveaway?: ApiPrepaidGiveaway;\n  countrySelectionLimit: number | undefined;\n  isChannel?: boolean;\n};\n\ntype GiveawayAction = 'createRandomlyUsers' | 'createSpecificUsers';\ntype ApiGiveawayType = 'random_users' | 'specific_users';\ntype SubscribersType = 'all' | 'new';\n\ninterface TypeOption {\n  name: string;\n  text: string;\n  value: ApiGiveawayType;\n  img: string;\n  actions?: GiveawayAction;\n  isLink: boolean;\n  onClickAction?: () => void;\n}\n\nconst DEFAULT_CUSTOM_EXPIRE_DATE = 86400 * 3 * 1000; // 3 days\nconst MAX_ADDITIONAL_CHANNELS = 9;\nconst DEFAULT_BOOST_COUNT = 5;\n\nconst GIVEAWAY_IMG_LIST: { [key: number]: string } = {\n  3: GiftGreenRound,\n  6: GiftBlueRound,\n  12: GiftRedRound,\n};\n\nconst GiveawayModal: FC<OwnProps & StateProps> = ({\n  chatId,\n  gifts,\n  isOpen,\n  isChannel,\n  selectedMemberList,\n  selectedChannelList,\n  giveawayBoostPerPremiumLimit = GIVEAWAY_BOOST_PER_PREMIUM,\n  countryList,\n  prepaidGiveaway,\n  countrySelectionLimit = GIVEAWAY_MAX_ADDITIONAL_COUNTRIES,\n  userSelectionLimit = GIVEAWAY_MAX_ADDITIONAL_USERS,\n}) => {\n  // eslint-disable-next-line no-null/no-null\n  const dialogRef = useRef<HTMLDivElement>(null);\n  const {\n    closeGiveawayModal, openInvoice, openPremiumModal,\n    launchPrepaidGiveaway,\n  } = getActions();\n\n  const lang = useOldLang();\n  const [isCalendarOpened, openCalendar, closeCalendar] = useFlag();\n  const [isCountryPickerModalOpen, openCountryPickerModal, closeCountryPickerModal] = useFlag();\n  const [isConfirmModalOpen, openConfirmModal, closeConfirmModal] = useFlag();\n  const [isEntityPickerModalOpen, openEntityPickerModal, closeEntityPickerModal] = useFlag();\n  const [entityType, setEntityType] = useState<'members' | 'channels' | undefined>(undefined);\n\n  const TYPE_OPTIONS: TypeOption[] = [{\n    name: 'BoostingCreateGiveaway',\n    text: 'BoostingWinnersRandomly',\n    value: 'random_users',\n    img: GiftBlueRound,\n    actions: 'createRandomlyUsers',\n    isLink: false,\n  }, {\n    name: 'BoostingAwardSpecificUsers',\n    text: 'BoostingSelectRecipients',\n    value: 'specific_users',\n    img: GiveawayUsersRound,\n    actions: 'createSpecificUsers',\n    isLink: true,\n    onClickAction: () => {\n      openEntityPickerModal();\n      setEntityType('members');\n    },\n  }];\n\n  const [customExpireDate, setCustomExpireDate] = useState<number>(Date.now() + DEFAULT_CUSTOM_EXPIRE_DATE);\n  const [isHeaderHidden, setHeaderHidden] = useState(true);\n  const [selectedUserCount, setSelectedUserCount] = useState<number>(DEFAULT_BOOST_COUNT);\n  const [selectedGiveawayOption, setGiveawayOption] = useState<ApiGiveawayType>(TYPE_OPTIONS[0].value);\n  const [selectedSubscriberOption, setSelectedSubscriberOption] = useState<SubscribersType>('all');\n  const [selectedMonthOption, setSelectedMonthOption] = useState<number | undefined>();\n  const [selectedUserIds, setSelectedUserIds] = useState<string[]>([]);\n  const [selectedChannelIds, setSelectedChannelIds] = useState<string[]>([]);\n  const [selectedCountriesIds, setSelectedCountriesIds] = useState<string[] | undefined>([]);\n  const [shouldShowWinners, setShouldShowWinners] = useState<boolean>(false);\n  const [shouldShowPrizes, setShouldShowPrizes] = useState<boolean>(false);\n  const [prizeDescription, setPrizeDescription] = useState<string | undefined>(undefined);\n  const [dataPrepaidGiveaway, setDataPrepaidGiveaway] = useState<ApiPrepaidGiveaway | undefined>(undefined);\n  const boostQuantity = selectedUserCount * giveawayBoostPerPremiumLimit;\n  const isRandomUsers = selectedGiveawayOption === 'random_users';\n\n  const SUBSCRIBER_OPTIONS = useMemo(() => [\n    {\n      value: 'all',\n      label: lang(isChannel ? 'BoostingAllSubscribers' : 'BoostingAllMembers'),\n      subLabel: selectedCountriesIds && selectedCountriesIds.length > 0\n        ? lang('Giveaway.ReceiverType.Countries', selectedCountriesIds.length)\n        : lang('BoostingFromAllCountries'),\n    },\n    {\n      value: 'new',\n      label: lang(isChannel ? 'BoostingNewSubscribers' : 'BoostingNewMembers'),\n      subLabel: selectedCountriesIds && selectedCountriesIds.length > 0\n        ? lang('Giveaway.ReceiverType.Countries', selectedCountriesIds.length)\n        : lang('BoostingFromAllCountries'),\n    },\n  ], [isChannel, lang, selectedCountriesIds]);\n\n  const monthQuantity = lang('Months', selectedMonthOption);\n\n  const selectedGift = useMemo(() => {\n    return gifts!.find((gift) => gift.months === selectedMonthOption && gift.users === selectedUserCount);\n  }, [gifts, selectedMonthOption, selectedUserCount]);\n\n  const filteredGifts = useMemo(() => {\n    return gifts?.filter((gift) => gift.users\n      === (selectedUserIds?.length ? selectedUserIds?.length : selectedUserCount));\n  }, [gifts, selectedUserIds, selectedUserCount]);\n\n  const fullMonthlyAmount = useMemo(() => {\n    if (!filteredGifts?.length) {\n      return undefined;\n    }\n\n    const basicGift = filteredGifts.reduce((acc, gift) => {\n      return gift.amount < acc.amount ? gift : acc;\n    });\n\n    return Math.floor(basicGift.amount / basicGift.months);\n  }, [filteredGifts]);\n\n  const userCountOptions = useMemo(() => {\n    const uniqueUserCounts = new Set(gifts?.map((gift) => gift.users));\n    return Array.from(uniqueUserCounts).sort((a, b) => a - b);\n  }, [gifts]);\n\n  useEffect(() => {\n    if (isOpen) {\n      setSelectedMonthOption(prepaidGiveaway ? prepaidGiveaway.months : gifts?.[0].months);\n    }\n  }, [gifts, isOpen, prepaidGiveaway]);\n\n  useEffect(() => {\n    if (prepaidGiveaway) {\n      setSelectedUserCount(prepaidGiveaway.quantity);\n      setDataPrepaidGiveaway(prepaidGiveaway);\n    }\n  }, [prepaidGiveaway]);\n\n  useEffect(() => {\n    if (selectedMemberList) {\n      setSelectedUserIds(selectedMemberList);\n    }\n  }, [selectedMemberList]);\n\n  useEffect(() => {\n    if (selectedChannelList) {\n      setSelectedChannelIds(selectedChannelList);\n    }\n  }, [selectedChannelList]);\n\n  const handlePremiumClick = useLastCallback(() => {\n    openPremiumModal();\n  });\n\n  const handleClick = useLastCallback(() => {\n    if (selectedUserIds?.length) {\n      openInvoice({\n        type: 'giftcode',\n        boostChannelId: chatId!,\n        userIds: selectedUserIds,\n        currency: selectedGift!.currency,\n        amount: selectedGift!.amount,\n        option: selectedGift!,\n      });\n    } else {\n      openInvoice({\n        type: 'giveaway',\n        chatId: chatId!,\n        additionalChannelIds: selectedChannelIds,\n        isOnlyForNewSubscribers: selectedSubscriberOption === 'new',\n        countries: selectedCountriesIds,\n        areWinnersVisible: shouldShowWinners,\n        prizeDescription,\n        untilDate: customExpireDate / 1000,\n        currency: selectedGift!.currency,\n        amount: selectedGift!.amount,\n        option: selectedGift!,\n      });\n    }\n\n    closeGiveawayModal();\n  });\n\n  const confirmLaunchPrepaidGiveaway = useLastCallback(() => {\n    launchPrepaidGiveaway({\n      chatId: chatId!,\n      giveawayId: dataPrepaidGiveaway!.id,\n      paymentPurpose: {\n        additionalChannelIds: selectedChannelIds,\n        countries: selectedCountriesIds,\n        prizeDescription,\n        areWinnersVisible: shouldShowWinners,\n        untilDate: customExpireDate / 1000,\n        currency: selectedGift!.currency,\n        amount: selectedGift!.amount,\n      },\n    });\n\n    closeConfirmModal();\n    closeGiveawayModal();\n  });\n\n  const handleUserCountChange = useLastCallback((newValue) => {\n    setSelectedUserCount(newValue);\n  });\n\n  const handlePrizeDescriptionChange = useLastCallback((e: ChangeEvent<HTMLInputElement>) => {\n    setPrizeDescription(e.target.value);\n  });\n\n  const userNames = useMemo(() => {\n    const usersById = getGlobal().users.byId;\n    return selectedUserIds?.map((userId) => getUserFullName(usersById[userId])).join(', ');\n  }, [selectedUserIds]);\n\n  const handleAdd = useLastCallback(() => {\n    openEntityPickerModal();\n    setEntityType('channels');\n  });\n\n  function handleScroll(e: React.UIEvent<HTMLDivElement>) {\n    const { scrollTop } = e.currentTarget;\n\n    setHeaderHidden(scrollTop <= 150);\n  }\n\n  const handleChangeSubscriberOption = useLastCallback((value) => {\n    setSelectedSubscriberOption(value);\n  });\n\n  const handleChangeTypeOption = useLastCallback((value: ApiGiveawayType) => {\n    setGiveawayOption(value);\n    setSelectedUserIds([]);\n  });\n\n  const handleExpireDateChange = useLastCallback((date: Date) => {\n    setCustomExpireDate(date.getTime());\n    closeCalendar();\n  });\n\n  const handleSetCountriesListChange = useLastCallback((value: string[]) => {\n    setSelectedCountriesIds(value);\n  });\n\n  const handleSetIdsListChange = useLastCallback((value: string[]) => {\n    return entityType === 'members'\n      ? (value?.length ? setSelectedUserIds(value) : setGiveawayOption('random_users'))\n      : setSelectedChannelIds(value);\n  });\n\n  const handleClose = useLastCallback(() => {\n    closeGiveawayModal();\n  });\n\n  const handleShouldShowWinnersChange = useLastCallback((e: ChangeEvent<HTMLInputElement>) => {\n    setShouldShowWinners(e.target.checked);\n  });\n\n  const handleShouldShowPrizesChange = useLastCallback((e: ChangeEvent<HTMLInputElement>) => {\n    setShouldShowPrizes(e.target.checked);\n  });\n\n  const onClickActionHandler = useLastCallback(() => {\n    openCountryPickerModal();\n  });\n\n  if (!gifts) return undefined;\n\n  function renderTypeOptions() {\n    return (\n      <div className={styles.options}>\n        {TYPE_OPTIONS.map((option) => {\n          return (\n            <GiveawayTypeOption\n              key={option.name}\n              name={option.name}\n              text={option.text}\n              option={option.value}\n              img={option.img}\n              onChange={handleChangeTypeOption}\n              checked={selectedGiveawayOption === option.value}\n              isLink={option.isLink}\n              userNames={userNames}\n              selectedMemberIds={selectedUserIds}\n              onClickAction={option.onClickAction}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n\n  function renderSubscribersOptions() {\n    return (\n      <div className={styles.options}>\n        <RadioGroup\n          name=\"subscribers\"\n          options={SUBSCRIBER_OPTIONS}\n          selected={selectedSubscriberOption}\n          onChange={handleChangeSubscriberOption}\n          onClickAction={onClickActionHandler}\n          subLabelClassName={styles.subLabelClassName}\n          isLink\n        />\n      </div>\n    );\n  }\n\n  function renderSubscriptionOptions() {\n    return (\n      <div className={styles.options}>\n        {filteredGifts?.map((gift) => (\n          <PremiumSubscriptionOption\n            isGiveaway\n            key={gift.months}\n            option={gift}\n            fullMonthlyAmount={fullMonthlyAmount!}\n            checked={gift.months === selectedMonthOption}\n            onChange={setSelectedMonthOption}\n          />\n        ))}\n      </div>\n    );\n  }\n\n  function renderPremiumFeaturesLink() {\n    const info = lang('GiftPremiumListFeaturesAndTerms');\n    const parts = info.match(/([^*]*)\\*([^*]+)\\*(.*)/);\n\n    if (!parts || parts.length < 4) {\n      return undefined;\n    }\n\n    return (\n      <p className={styles.premiumFeatures}>\n        {parts[1]}\n        <Link isPrimary onClick={handlePremiumClick}>{parts[2]}</Link>\n        {parts[3]}\n      </p>\n    );\n  }\n\n  function deleteParticipantsHandler(id: string) {\n    const filteredChannelIds = selectedChannelIds.filter((channelId) => channelId !== id);\n    setSelectedChannelIds(filteredChannelIds);\n  }\n\n  return (\n    <Modal\n      className={styles.root}\n      onClose={handleClose}\n      isOpen={isOpen}\n      dialogRef={dialogRef}\n    >\n      <div className={styles.main} onScroll={handleScroll}>\n        <Button\n          round\n          size=\"smaller\"\n          className={styles.closeButton}\n          color=\"translucent\"\n          onClick={handleClose}\n          ariaLabel={lang('Close')}\n        >\n          <Icon name=\"close\" />\n        </Button>\n        <img className={styles.logo} src={PremiumLogo} alt=\"\" draggable={false} />\n        <h2 className={styles.headerText}>\n          {renderText(lang('BoostingBoostsViaGifts'))}\n        </h2>\n        <div className={styles.description}>\n          {renderText(lang(isChannel ? 'BoostingGetMoreBoost' : 'BoostingGetMoreBoostsGroup'))}\n        </div>\n        <div className={buildClassName(styles.header, isHeaderHidden && styles.hiddenHeader)}>\n          <h2 className={styles.premiumHeaderText}>\n            {lang('BoostingBoostsViaGifts')}\n          </h2>\n        </div>\n        {dataPrepaidGiveaway ? (\n          <div className={styles.status}>\n            <div>\n              <img className={styles.prepaidImg} src={GIVEAWAY_IMG_LIST[dataPrepaidGiveaway.months]} alt=\"\" />\n            </div>\n            <div className={styles.info}>\n              <h3 className={styles.title}>\n                {lang('BoostingTelegramPremiumCountPlural', dataPrepaidGiveaway.quantity)}\n              </h3>\n              <p className={styles.month}>{lang('PrepaidGiveawayMonths', dataPrepaidGiveaway.months)}</p>\n            </div>\n            <div className={styles.quantity}>\n              <div className={buildClassName(styles.floatingBadge, styles.floatingBadgeColor)}>\n                <Icon name=\"boost\" className={styles.floatingBadgeIcon} />\n                <div className={styles.floatingBadgeValue} dir={lang.isRtl ? 'rtl' : undefined}>\n                  {dataPrepaidGiveaway.quantity * (giveawayBoostPerPremiumLimit ?? GIVEAWAY_BOOST_PER_PREMIUM)}\n                </div>\n              </div>\n            </div>\n          </div>\n        ) : (\n          <div className={buildClassName(styles.section, styles.types)}>\n            {renderTypeOptions()}\n          </div>\n        )}\n\n        {isRandomUsers && (\n          <>\n            {!dataPrepaidGiveaway && (\n              <>\n                <div className={styles.section}>\n                  <div className={styles.quantity}>\n                    <h2 className={styles.giveawayTitle}>\n                      {lang('BoostingQuantityPrizes')}\n                    </h2>\n                    <div className={buildClassName(styles.floatingBadge, styles.floatingBadgeColor)}>\n                      <Icon name=\"boost\" className={styles.floatingBadgeIcon} />\n                      <div className={styles.floatingBadgeValue} dir={lang.isRtl ? 'rtl' : undefined}>\n                        {boostQuantity}\n                      </div>\n                    </div>\n                  </div>\n\n                  <RangeSliderWithMarks\n                    rangeCount={selectedUserCount}\n                    marks={userCountOptions}\n                    onChange={handleUserCountChange}\n                  />\n                </div>\n\n                <div className={styles.subscription}>\n                  {renderText(lang('BoostingChooseHowMany'))}\n                </div>\n              </>\n            )}\n\n            <div className={styles.section}>\n              <h2 className={styles.giveawayTitle}>\n                {lang('BoostingChannelsIncludedGiveaway')}\n              </h2>\n\n              <ListItem\n                inactive\n                className=\"chat-item-clickable contact-list-item\"\n              >\n                <GroupChatInfo\n                  chatId={chatId!}\n                  status={lang(isChannel ? 'BoostingChannelWillReceiveBoost'\n                    : 'BoostingGroupWillReceiveBoost', boostQuantity, 'i')}\n                />\n              </ListItem>\n\n              {selectedChannelIds?.map((channelId) => {\n                return (\n                  <ListItem\n                    ripple\n                    key={channelId}\n                    className=\"chat-item-clickable contact-list-item\"\n                    /* eslint-disable-next-line react/jsx-no-bind */\n                    onClick={() => deleteParticipantsHandler(channelId)}\n                    rightElement={(<Icon name=\"close\" />)}\n                  >\n                    <GroupChatInfo\n                      chatId={channelId.toString()}\n                    />\n                  </ListItem>\n                );\n              })}\n\n              {selectedChannelIds.length < MAX_ADDITIONAL_CHANNELS && (\n                <ListItem\n                  icon=\"add\"\n                  ripple\n                  onClick={handleAdd}\n                  className={styles.addButton}\n                  iconClassName={styles.addChannel}\n                >\n                  {lang('BoostingAddChannelOrGroup')}\n                </ListItem>\n              )}\n            </div>\n\n            <div className={styles.section}>\n              <h2 className={styles.giveawayTitle}>\n                {lang('BoostingEligibleUsers')}\n              </h2>\n\n              {renderSubscribersOptions()}\n            </div>\n\n            <div className={styles.subscription}>\n              {renderText(lang(isChannel ? 'BoostGift.LimitSubscribersInfo' : 'lng_giveaway_users_about_group'))}\n            </div>\n\n            <div className={styles.section}>\n              <div className={styles.checkboxSection}>\n                <h2 className={styles.title}>\n                  {lang('BoostingGiveawayAdditionalPrizes')}\n                </h2>\n\n                <Switcher\n                  label={lang('BoostingGiveawayAdditionalPrizes')}\n                  checked={shouldShowPrizes}\n                  onChange={handleShouldShowPrizesChange}\n                />\n              </div>\n\n              {shouldShowPrizes && (\n                <div className={styles.prizesSection}>\n                  <h2 className={styles.title}>\n                    {dataPrepaidGiveaway ? dataPrepaidGiveaway.quantity : selectedUserCount}\n                  </h2>\n                  <InputText\n                    className={styles.prizesInput}\n                    value={prizeDescription}\n                    onChange={handlePrizeDescriptionChange}\n                    label={lang('BoostingGiveawayEnterYourPrize')}\n                  />\n                </div>\n              )}\n            </div>\n\n            {shouldShowPrizes ? (\n              <div className={styles.subscription}>\n                {prizeDescription?.length ? renderText(lang('BoostingGiveawayAdditionPrizeCountNameHint',\n                  dataPrepaidGiveaway\n                    ? [dataPrepaidGiveaway.quantity, prizeDescription, monthQuantity]\n                    : [selectedUserCount, prizeDescription, monthQuantity],\n                  undefined,\n                  selectedMonthOption), ['simple_markdown']) : renderText(lang('BoostingGiveawayAdditionPrizeCountHint',\n                  dataPrepaidGiveaway\n                    ? [dataPrepaidGiveaway.quantity, monthQuantity]\n                    : [selectedUserCount, monthQuantity],\n                  undefined,\n                  selectedMonthOption), ['simple_markdown'])}\n              </div>\n            ) : (\n              <div className={styles.subscription}>\n                {renderText(lang('BoostingGiveawayAdditionPrizeHint'))}\n              </div>\n            )}\n\n            <div className={styles.section}>\n              <div className={styles.checkboxSection}>\n                <h2 className={styles.title}>\n                  {lang('BoostingGiveawayShowWinners')}\n                </h2>\n\n                <Switcher\n                  label={lang('BoostingGiveawayAdditionalPrizes')}\n                  checked={shouldShowWinners}\n                  onChange={handleShouldShowWinnersChange}\n                />\n              </div>\n            </div>\n\n            <div className={styles.subscription}>\n              {renderText(lang('BoostingGiveawayShowWinnersHint'))}\n            </div>\n\n            <div className={buildClassName(styles.section, dataPrepaidGiveaway && styles.subscriptionFooter)}>\n              <h2 className={styles.giveawayTitle}>\n                {lang('BoostingDateWhenGiveawayEnds')}\n              </h2>\n\n              <Button\n                ariaLabel={lang('BoostGift.DateEnds')}\n                className={buildClassName(styles.dateButton, 'expire-limit')}\n                isText\n                onClick={openCalendar}\n              >\n                <h3 className={styles.title}>\n                  {lang('BoostGift.DateEnds')}\n                </h3>\n                {formatDateTimeToString(customExpireDate, lang.code)}\n              </Button>\n            </div>\n          </>\n        )}\n\n        {!dataPrepaidGiveaway && (\n          <>\n            <div className={styles.section}>\n              <h2 className={styles.giveawayTitle}>\n                {lang('BoostingDurationOfPremium')}\n              </h2>\n\n              {renderSubscriptionOptions()}\n            </div>\n\n            <div className={buildClassName(styles.subscription, styles.subscriptionFooter)}>\n              {renderPremiumFeaturesLink()}\n            </div>\n          </>\n        )}\n\n        {selectedGiveawayOption && (\n          <div className={styles.footer}>\n            <Button className={styles.button} onClick={dataPrepaidGiveaway ? openConfirmModal : handleClick}>\n              {lang('BoostingStartGiveaway')}\n              <div className={styles.quantity}>\n                <div className={buildClassName(styles.floatingBadge, styles.floatingBadgeButtonColor)}>\n                  <Icon name=\"boost\" className={styles.floatingBadgeIcon} />\n                  <div className={styles.floatingBadgeValue} dir={lang.isRtl ? 'rtl' : undefined}>\n                    {dataPrepaidGiveaway ? dataPrepaidGiveaway.quantity : boostQuantity}\n                  </div>\n                </div>\n              </div>\n            </Button>\n          </div>\n        )}\n      </div>\n      <CalendarModal\n        isOpen={isCalendarOpened}\n        isFutureMode\n        withTimePicker\n        onClose={closeCalendar}\n        onSubmit={handleExpireDateChange}\n        selectedAt={customExpireDate}\n        submitButtonLabel={lang('Save')}\n      />\n      <CountryPickerModal\n        isOpen={isCountryPickerModalOpen}\n        onClose={closeCountryPickerModal}\n        countryList={countryList}\n        onSubmit={handleSetCountriesListChange}\n        selectionLimit={countrySelectionLimit}\n      />\n      <AppendEntityPickerModal\n        key={entityType}\n        isOpen={isEntityPickerModalOpen}\n        onClose={closeEntityPickerModal}\n        entityType={entityType}\n        chatId={chatId}\n        onSubmit={handleSetIdsListChange}\n        selectionLimit={entityType === 'members' ? userSelectionLimit : GIVEAWAY_MAX_ADDITIONAL_CHANNELS}\n      />\n      <ConfirmDialog\n        title={lang('BoostingStartGiveawayConfirmTitle')}\n        text={lang('BoostingStartGiveawayConfirmText')}\n        confirmLabel={lang('Start')}\n        isOpen={isConfirmModalOpen}\n        onClose={closeConfirmModal}\n        confirmHandler={confirmLaunchPrepaidGiveaway}\n      />\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    giveawayModal,\n  } = selectTabState(global);\n  const chatId = giveawayModal?.chatId;\n  const chat = chatId ? selectChat(global, chatId) : undefined;\n  const isChannel = chat && isChatChannel(chat);\n\n  return {\n    chatId,\n    gifts: giveawayModal?.gifts,\n    selectedMemberList: giveawayModal?.selectedMemberIds,\n    selectedChannelList: giveawayModal?.selectedChannelIds,\n    giveawayBoostPerPremiumLimit: global.appConfig?.giveawayBoostsPerPremium,\n    userSelectionLimit: global.appConfig?.giveawayAddPeersMax,\n    countrySelectionLimit: global.appConfig?.giveawayCountriesMax,\n    countryList: global.countryList.general,\n    prepaidGiveaway: giveawayModal?.prepaidGiveaway,\n    isChannel,\n  };\n})(GiveawayModal));\n","import type { ChangeEvent } from 'react';\nimport type { FC } from '../../../lib/teact/teact';\nimport React, { memo } from '../../../lib/teact/teact';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Icon from '../../common/icons/Icon';\n\nimport styles from './GiveawayTypeOption.module.scss';\n\ntype ApiGiveawayType = 'random_users' | 'specific_users';\n\ntype OwnProps = {\n  option: ApiGiveawayType;\n  name: string;\n  text: string;\n  img: string;\n  checked?: boolean;\n  isLink: boolean;\n  className?: string;\n  onChange: (value: ApiGiveawayType) => void;\n  onClickAction?: () => void;\n  userNames?: string;\n  selectedMemberIds?: string[];\n};\n\nconst GiveawayTypeOption: FC<OwnProps> = ({\n  option, checked,\n  name, text, img,\n  isLink, onChange, onClickAction, className,\n  userNames, selectedMemberIds,\n}) => {\n  const lang = useOldLang();\n\n  let displayText: string | undefined = lang(text);\n  if (isLink && selectedMemberIds?.length) {\n    displayText = selectedMemberIds.length > 2 ? `${selectedMemberIds.length}` : userNames;\n  }\n\n  const handleChange = useLastCallback((e: ChangeEvent<HTMLInputElement>) => {\n    if (e.target.checked) {\n      onChange(option);\n    }\n  });\n\n  const handleClick = useLastCallback(() => {\n    onClickAction?.();\n  });\n\n  return (\n    <label\n      className={buildClassName(styles.wrapper, className)}\n      dir={lang.isRtl ? 'rtl' : undefined}\n      onClick={handleClick}\n      role=\"button\"\n      tabIndex={0}\n    >\n      <input\n        className={styles.input}\n        type=\"radio\"\n        name=\"giveaway_option\"\n        value={option}\n        checked={checked}\n        onChange={handleChange}\n        onClick={(e) => e.stopPropagation()}\n      />\n      <div className={styles.content}>\n        <img className={styles.optionImg} src={img} alt=\"\" draggable={false} />\n        <div className={styles.giveaway}>\n          <h3 className={styles.title}>\n            {lang(`${name}`)}\n          </h3>\n          {isLink ? (\n            <div className={styles.link}>\n              <span>{displayText}</span>\n              <Icon name=\"next\" />\n            </div>\n          ) : (\n            <span className={styles.contentText}>{displayText}</span>\n          )}\n        </div>\n      </div>\n    </label>\n  );\n};\n\nexport default memo(GiveawayTypeOption);\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { hexToRgb, lerpRgb } from '../../../util/switchTheme';\nimport renderText from '../../common/helpers/renderText';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport ListItem from '../../ui/ListItem';\n\nimport styles from './PremiumFeatureItem.module.scss';\n\ntype OwnProps<T> = {\n  icon: string;\n  isFontIcon?: boolean;\n  title: string;\n  text: string;\n  index: number;\n  count: number;\n  section: T;\n  onClick?: (section: T) => void;\n};\n\nconst COLORS = [\n  '#F2862D', '#EB7B4D', '#E46D72', '#DD6091', '#CC5FBA', '#B464E7',\n  '#9873FF', '#768DFF', '#55A5FC', '#52B0C9', '#4FBC93', '#4CC663',\n].map(hexToRgb);\n\n// eslint-disable-next-line @typescript-eslint/comma-dangle\nconst PremiumFeatureItem = <T,>({\n  icon,\n  isFontIcon,\n  title,\n  text,\n  index,\n  count,\n  section,\n  onClick,\n}: OwnProps<T>) => {\n  const newIndex = (index / count) * COLORS.length;\n  const colorA = COLORS[Math.floor(newIndex)];\n  const colorB = COLORS[Math.ceil(newIndex)] ?? colorA;\n  const { r, g, b } = lerpRgb(colorA, colorB, 0.5);\n\n  const handleClick = useLastCallback(() => {\n    onClick?.(section);\n  });\n\n  return (\n    <ListItem buttonClassName={styles.root} onClick={handleClick} inactive={!onClick}>\n      {isFontIcon ? (\n        <i\n          className={buildClassName(styles.fontIcon, `icon icon-${icon}`)}\n          aria-hidden\n          style={`--item-color: rgb(${r},${g},${b})`}\n        />\n      ) : (\n        <img src={icon} className={styles.icon} alt=\"\" style={`--item-color: rgb(${r},${g},${b})`} draggable={false} />\n      )}\n      <div className={styles.text}>\n        <div className={styles.title}>{renderText(title, ['br'])}</div>\n        <div className={styles.description}>{text}</div>\n      </div>\n    </ListItem>\n  );\n};\n\nexport default memo(PremiumFeatureItem);\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { toggleExtraClass } from '../../../lib/teact/teact-dom';\n\nimport type { ApiPremiumPromo, ApiPremiumSubscriptionOption } from '../../../api/types';\nimport type { ApiLimitTypeForPromo, ApiPremiumSection, GlobalState } from '../../../global/types';\n\nimport { PREMIUM_BOTTOM_VIDEOS, PREMIUM_FEATURE_SECTIONS, PREMIUM_LIMITS_ORDER } from '../../../config';\nimport { requestMutation } from '../../../lib/fasterdom/fasterdom';\nimport animateHorizontalScroll from '../../../util/animateHorizontalScroll';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatCurrency } from '../../../util/formatCurrency';\nimport renderText from '../../common/helpers/renderText';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\nimport usePrevious from '../../../hooks/usePrevious';\n\nimport SliderDots from '../../common/SliderDots';\nimport Button from '../../ui/Button';\nimport PremiumLimitPreview from './common/PremiumLimitPreview';\nimport PremiumFeaturePreviewStickers from './previews/PremiumFeaturePreviewStickers';\nimport PremiumFeaturePreviewStories from './previews/PremiumFeaturePreviewStories';\nimport PremiumFeaturePreviewVideo from './previews/PremiumFeaturePreviewVideo';\n\nimport styles from './PremiumFeatureModal.module.scss';\n\nexport const PREMIUM_FEATURE_TITLES: Record<ApiPremiumSection, string> = {\n  double_limits: 'PremiumPreviewLimits',\n  infinite_reactions: 'PremiumPreviewReactions2',\n  premium_stickers: 'PremiumPreviewStickers',\n  animated_emoji: 'PremiumPreviewEmoji',\n  no_ads: 'PremiumPreviewNoAds',\n  voice_to_text: 'PremiumPreviewVoiceToText',\n  profile_badge: 'PremiumPreviewProfileBadge',\n  faster_download: 'PremiumPreviewDownloadSpeed',\n  more_upload: 'PremiumPreviewUploads',\n  advanced_chat_management: 'PremiumPreviewAdvancedChatManagement',\n  animated_userpics: 'PremiumPreviewAnimatedProfiles',\n  emoji_status: 'PremiumPreviewEmojiStatus',\n  translations: 'PremiumPreviewTranslations',\n  stories: 'PremiumPreviewStories',\n  saved_tags: 'PremiumPreviewTags2',\n  last_seen: 'PremiumPreviewLastSeen',\n  message_privacy: 'PremiumPreviewMessagePrivacy',\n  effects: 'PremiumPreviewEffects',\n};\n\nexport const PREMIUM_FEATURE_DESCRIPTIONS: Record<ApiPremiumSection, string> = {\n  double_limits: 'PremiumPreviewLimitsDescription',\n  infinite_reactions: 'PremiumPreviewReactions2Description',\n  premium_stickers: 'PremiumPreviewStickersDescription',\n  no_ads: 'PremiumPreviewNoAdsDescription',\n  animated_emoji: 'PremiumPreviewEmojiDescription',\n  voice_to_text: 'PremiumPreviewVoiceToTextDescription',\n  profile_badge: 'PremiumPreviewProfileBadgeDescription',\n  faster_download: 'PremiumPreviewDownloadSpeedDescription',\n  more_upload: 'PremiumPreviewUploadsDescription',\n  advanced_chat_management: 'PremiumPreviewAdvancedChatManagementDescription',\n  animated_userpics: 'PremiumPreviewAnimatedProfilesDescription',\n  emoji_status: 'PremiumPreviewEmojiStatusDescription',\n  translations: 'PremiumPreviewTranslationsDescription',\n  stories: 'PremiumPreviewStoriesDescription',\n  saved_tags: 'PremiumPreviewTagsDescription2',\n  last_seen: 'PremiumPreviewLastSeenDescription',\n  message_privacy: 'PremiumPreviewMessagePrivacyDescription',\n  effects: 'PremiumPreviewEffectsDescription',\n};\n\nconst LIMITS_TITLES: Record<ApiLimitTypeForPromo, string> = {\n  channels: 'GroupsAndChannelsLimitTitle',\n  dialogFolderPinned: 'PinChatsLimitTitle',\n  channelsPublic: 'PublicLinksLimitTitle',\n  savedGifs: 'SavedGifsLimitTitle',\n  stickersFaved: 'FavoriteStickersLimitTitle',\n  aboutLength: 'BioLimitTitle',\n  captionLength: 'CaptionsLimitTitle',\n  dialogFilters: 'FoldersLimitTitle',\n  dialogFiltersChats: 'ChatPerFolderLimitTitle',\n  recommendedChannels: 'SimilarChannelsLimitTitle',\n};\n\nconst LIMITS_DESCRIPTIONS: Record<ApiLimitTypeForPromo, string> = {\n  channels: 'GroupsAndChannelsLimitSubtitle',\n  dialogFolderPinned: 'PinChatsLimitSubtitle',\n  channelsPublic: 'PublicLinksLimitSubtitle',\n  savedGifs: 'SavedGifsLimitSubtitle',\n  stickersFaved: 'FavoriteStickersLimitSubtitle',\n  aboutLength: 'BioLimitSubtitle',\n  captionLength: 'CaptionsLimitSubtitle',\n  dialogFilters: 'FoldersLimitSubtitle',\n  dialogFiltersChats: 'ChatPerFolderLimitSubtitle',\n  recommendedChannels: 'SimilarChannelsLimitSubtitle',\n};\n\nconst BORDER_THRESHOLD = 20;\n\ntype OwnProps = {\n  initialSection: ApiPremiumSection;\n  promo: ApiPremiumPromo;\n  isPremium?: boolean;\n  limits?: NonNullable<GlobalState['appConfig']>['limits'];\n  premiumPromoOrder?: ApiPremiumSection[];\n  subscriptionOption?: ApiPremiumSubscriptionOption;\n  onBack: VoidFunction;\n  onClickSubscribe: (startParam?: string) => void;\n};\n\nconst PremiumFeatureModal: FC<OwnProps> = ({\n  promo,\n  initialSection,\n  isPremium,\n  limits,\n  premiumPromoOrder,\n  subscriptionOption,\n  onBack,\n  onClickSubscribe,\n}) => {\n  const lang = useOldLang();\n  // eslint-disable-next-line no-null/no-null\n  const scrollContainerRef = useRef<HTMLDivElement>(null);\n  const [currentSlideIndex, setCurrentSlideIndex] = useState(PREMIUM_FEATURE_SECTIONS.indexOf(initialSection));\n  const [reverseAnimationSlideIndex, setReverseAnimationSlideIndex] = useState(0);\n  const [isScrolling, startScrolling, stopScrolling] = useFlag();\n\n  const [isScrolledToTop, setIsScrolledToTop] = useState(true);\n  const [isScrolledToBottom, setIsScrolledToBottom] = useState(false);\n\n  const prevInitialSection = usePrevious(initialSection);\n\n  const filteredSections = useMemo(() => {\n    if (!premiumPromoOrder) return PREMIUM_FEATURE_SECTIONS;\n    return premiumPromoOrder.filter((section) => PREMIUM_FEATURE_SECTIONS.includes(section));\n  }, [premiumPromoOrder]);\n\n  const subscriptionButtonText = useMemo(() => {\n    if (!subscriptionOption) return undefined;\n\n    const { amount, months, currency } = subscriptionOption;\n    const perMonthPrice = Math.floor(amount / months);\n\n    return isPremium ? lang('OK') : lang('SubscribeToPremium', formatCurrency(perMonthPrice, currency, lang.code));\n  }, [isPremium, lang, subscriptionOption]);\n\n  const handleClick = useLastCallback(() => {\n    onClickSubscribe(initialSection);\n  });\n\n  function handleScroll(e: React.UIEvent<HTMLDivElement>) {\n    const target = e.currentTarget;\n    const { clientWidth, scrollLeft: scrollLeftOriginal } = target;\n\n    const scrollLeft = Math.round(scrollLeftOriginal);\n\n    const left = scrollLeft % (clientWidth);\n    const progress = left / (clientWidth);\n\n    const reverseIndex = Math.ceil((scrollLeft + 1) / clientWidth);\n\n    setReverseAnimationSlideIndex(reverseIndex);\n\n    const prevElement = target.querySelector<HTMLDivElement>(`#premium_feature_preview_video_${reverseIndex - 1}`);\n    const reverseElement = target.querySelector<HTMLDivElement>(`#premium_feature_preview_video_${reverseIndex}`);\n\n    requestMutation(() => {\n      target.style.setProperty('--scroll-progress', progress.toString());\n      target.style.setProperty('--abs-scroll-progress', Math.abs(progress).toString());\n\n      if (prevElement) toggleExtraClass(prevElement, 'reverse', false);\n      if (reverseElement) toggleExtraClass(reverseElement, 'reverse', true);\n    });\n\n    if (isScrolling) return;\n    const slide = Math.round(scrollLeft / clientWidth);\n    setCurrentSlideIndex(slide);\n  }\n\n  function handleLimitsScroll(e: React.UIEvent<HTMLDivElement>) {\n    const { scrollTop, clientHeight, scrollHeight } = e.currentTarget;\n    setIsScrolledToTop(scrollTop <= BORDER_THRESHOLD);\n    setIsScrolledToBottom(scrollTop >= scrollHeight - clientHeight - BORDER_THRESHOLD);\n  }\n\n  useEffect(() => {\n    const scrollContainer = scrollContainerRef.current;\n    if (!scrollContainer || (prevInitialSection === initialSection)) return;\n\n    const index = filteredSections.indexOf(initialSection);\n    setCurrentSlideIndex(index);\n    startScrolling();\n    animateHorizontalScroll(scrollContainer, scrollContainer.clientWidth * index, 0)\n      .then(stopScrolling);\n  }, [currentSlideIndex, filteredSections, initialSection, prevInitialSection]);\n\n  const handleSelectSlide = useLastCallback(async (index: number) => {\n    const scrollContainer = scrollContainerRef.current;\n    if (!scrollContainer) return;\n\n    setCurrentSlideIndex(index);\n\n    startScrolling();\n    await animateHorizontalScroll(scrollContainer, scrollContainer.clientWidth * index, 800);\n    stopScrolling();\n  });\n\n  return (\n    <div className={styles.root}>\n      <Button\n        round\n        size=\"smaller\"\n        className={buildClassName(styles.backButton, currentSlideIndex !== 0 && styles.whiteBackButton)}\n        color={currentSlideIndex === 0 ? 'translucent' : 'translucent-white'}\n        onClick={onBack}\n        ariaLabel={lang('Back')}\n      >\n        <i className=\"icon icon-arrow-left\" />\n      </Button>\n\n      <div className={styles.preview} />\n\n      <div className={buildClassName(styles.content, 'no-scrollbar')} onScroll={handleScroll} ref={scrollContainerRef}>\n\n        {filteredSections.map((section, index) => {\n          if (section === 'double_limits') {\n            return (\n              <div className={buildClassName(styles.slide, styles.limits)}>\n                <h2 className={buildClassName(styles.header, isScrolledToTop && styles.noHeaderBorder)}>\n                  {lang(PREMIUM_FEATURE_TITLES.double_limits)}\n                </h2>\n                <div className={buildClassName(styles.limitsContent, 'custom-scroll')} onScroll={handleLimitsScroll}>\n                  {PREMIUM_LIMITS_ORDER.map((limit, i) => {\n                    const defaultLimit = limits?.[limit][0].toString();\n                    const premiumLimit = limits?.[limit][1].toString();\n                    return (\n                      <PremiumLimitPreview\n                        title={lang(LIMITS_TITLES[limit])}\n                        description={lang(LIMITS_DESCRIPTIONS[limit], premiumLimit)}\n                        leftValue={defaultLimit}\n                        rightValue={premiumLimit}\n                        colorStepProgress={i / (PREMIUM_LIMITS_ORDER.length - 1)}\n                      />\n                    );\n                  })}\n                </div>\n              </div>\n            );\n          }\n\n          if (section === 'premium_stickers') {\n            return (\n              <div className={styles.slide}>\n                <div className={styles.frame}>\n                  <PremiumFeaturePreviewStickers isActive={currentSlideIndex === index} />\n                </div>\n                <h1 className={styles.title}>\n                  {lang(PREMIUM_FEATURE_TITLES.premium_stickers)}\n                </h1>\n                <div className={styles.description}>\n                  {renderText(lang(PREMIUM_FEATURE_DESCRIPTIONS.premium_stickers), ['br'])}\n                </div>\n              </div>\n            );\n          }\n\n          if (section === 'stories') {\n            return (\n              <div className={buildClassName(styles.slide, styles.stories)}>\n                <PremiumFeaturePreviewStories />\n              </div>\n            );\n          }\n\n          const i = promo.videoSections.indexOf(section);\n          if (i === -1) return undefined;\n          return (\n            <div className={styles.slide}>\n              <div className={styles.frame}>\n                <PremiumFeaturePreviewVideo\n                  isActive={currentSlideIndex === index}\n                  videoId={promo.videos[i].id!}\n                  videoThumbnail={promo.videos[i].thumbnail!}\n                  isDown={PREMIUM_BOTTOM_VIDEOS.includes(section)}\n                  index={index}\n                  isReverseAnimation={index === reverseAnimationSlideIndex}\n                />\n              </div>\n              <h1 className={styles.title}>\n                {lang(PREMIUM_FEATURE_TITLES[promo.videoSections[i]!])}\n              </h1>\n              <div className={styles.description}>\n                {renderText(lang(PREMIUM_FEATURE_DESCRIPTIONS[promo.videoSections[i]!]), ['br'])}\n              </div>\n            </div>\n          );\n        })}\n\n      </div>\n\n      <div\n        className={buildClassName(\n          styles.footer,\n          (isScrolledToBottom || currentSlideIndex !== 0) && styles.noFooterBorder,\n        )}\n      >\n        <SliderDots\n          length={PREMIUM_FEATURE_SECTIONS.length}\n          active={currentSlideIndex}\n          onSelectSlide={handleSelectSlide}\n        />\n        {subscriptionButtonText && (\n          <Button\n            className={buildClassName(styles.button)}\n            isShiny={!isPremium}\n            withPremiumGradient={!isPremium}\n            onClick={isPremium ? onBack : handleClick}\n          >\n            {subscriptionButtonText}\n          </Button>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(PremiumFeatureModal);\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport { GIVEAWAY_MAX_ADDITIONAL_CHANNELS } from '../../../config';\nimport {\n  filterUsersByName, isUserBot,\n} from '../../../global/helpers';\nimport buildClassName from '../../../util/buildClassName';\nimport { unique } from '../../../util/iteratees';\nimport sortChatIds from '../../common/helpers/sortChatIds';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Icon from '../../common/icons/Icon';\nimport Picker from '../../common/Picker';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport styles from './PremiumGiftingModal.module.scss';\n\nexport type OwnProps = {\n  isOpen?: boolean;\n};\n\ninterface StateProps {\n  currentUserId?: string;\n  userSelectionLimit?: number;\n  userIds?: string[];\n}\n\nconst PremiumGiftingModal: FC<OwnProps & StateProps> = ({\n  isOpen,\n  currentUserId,\n  userSelectionLimit = GIVEAWAY_MAX_ADDITIONAL_CHANNELS,\n  userIds,\n}) => {\n  const { closePremiumGiftingModal, openGiftPremiumModal, showNotification } = getActions();\n\n  const lang = useOldLang();\n\n  const [selectedUserIds, setSelectedUserIds] = useState<string[]>([]);\n  const [searchQuery, setSearchQuery] = useState<string>('');\n\n  const displayedUserIds = useMemo(() => {\n    const usersById = getGlobal().users.byId;\n    const filteredContactIds = userIds ? filterUsersByName(userIds, usersById, searchQuery) : [];\n\n    return sortChatIds(unique(filteredContactIds).filter((userId) => {\n      const user = usersById[userId];\n      if (!user) {\n        return true;\n      }\n\n      return !isUserBot(user) && userId !== currentUserId;\n    }));\n  }, [currentUserId, searchQuery, userIds]);\n\n  const handleSendIdList = useLastCallback(() => {\n    if (selectedUserIds?.length) {\n      openGiftPremiumModal({ forUserIds: selectedUserIds });\n\n      closePremiumGiftingModal();\n    }\n  });\n\n  const handleSelectedUserIdsChange = useLastCallback((newSelectedIds: string[]) => {\n    if (newSelectedIds.length > userSelectionLimit) {\n      showNotification({\n        message: lang('BoostingSelectUpToWarningUsers', userSelectionLimit),\n      });\n      return;\n    }\n    setSelectedUserIds(newSelectedIds);\n  });\n\n  function renderSearchField() {\n    return (\n      <div className={styles.filter} dir={lang.isRtl ? 'rtl' : undefined}>\n        <Button\n          round\n          size=\"smaller\"\n          color=\"translucent\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => closePremiumGiftingModal()}\n          ariaLabel={lang('Close')}\n        >\n          <Icon name=\"close\" />\n        </Button>\n        <h3 className={styles.title}>{lang('GiftTelegramPremiumTitle')}\n        </h3>\n      </div>\n    );\n  }\n\n  return (\n    <Modal\n      className={styles.root}\n      isOpen={isOpen}\n      onClose={closePremiumGiftingModal}\n      onEnter={handleSendIdList}\n    >\n      <div className={styles.main}>\n        {renderSearchField()}\n        <div className={buildClassName(styles.main, 'custom-scroll')}>\n          <Picker\n            className={styles.picker}\n            itemIds={displayedUserIds}\n            selectedIds={selectedUserIds}\n            filterValue={searchQuery}\n            filterPlaceholder={lang('Search')}\n            searchInputId=\"users-picker-search\"\n            onSelectedIdsChange={handleSelectedUserIdsChange}\n            onFilterChange={setSearchQuery}\n            isSearchable\n          />\n        </div>\n        <div className={styles.buttons}>\n          <Button withPremiumGradient size=\"smaller\" onClick={handleSendIdList} disabled={!selectedUserIds?.length}>\n            {lang('Continue')}\n          </Button>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { currentUserId } = global;\n\n  return {\n    currentUserId,\n    userIds: global.contactList?.userIds,\n    userSelectionLimit: global.appConfig?.giveawayAddPeersMax,\n  };\n})(PremiumGiftingModal));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiPremiumPromo, ApiPremiumSubscriptionOption, ApiSticker, ApiStickerSet, ApiUser,\n} from '../../../api/types';\nimport type { ApiPremiumSection, GlobalState } from '../../../global/types';\n\nimport { PREMIUM_FEATURE_SECTIONS, TME_LINK_PREFIX } from '../../../config';\nimport { getUserFullName } from '../../../global/helpers';\nimport {\n  selectIsCurrentUserPremium, selectStickerSet,\n  selectTabState, selectUser,\n} from '../../../global/selectors';\nimport { selectPremiumLimit } from '../../../global/selectors/limits';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatCurrency } from '../../../util/formatCurrency';\nimport { REM } from '../../common/helpers/mediaDimensions';\nimport renderText from '../../common/helpers/renderText';\nimport { renderTextWithEntities } from '../../common/helpers/renderTextWithEntities';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\nimport useSyncEffect from '../../../hooks/useSyncEffect';\n\nimport CustomEmoji from '../../common/CustomEmoji';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport Transition from '../../ui/Transition';\nimport PremiumFeatureItem from './PremiumFeatureItem';\nimport PremiumFeatureModal, {\n  PREMIUM_FEATURE_DESCRIPTIONS,\n  PREMIUM_FEATURE_TITLES,\n} from './PremiumFeatureModal';\nimport PremiumSubscriptionOption from './PremiumSubscriptionOption';\n\nimport styles from './PremiumMainModal.module.scss';\n\nimport PremiumAds from '../../../assets/premium/PremiumAds.svg';\nimport PremiumBadge from '../../../assets/premium/PremiumBadge.svg';\nimport PremiumChats from '../../../assets/premium/PremiumChats.svg';\nimport PremiumEffects from '../../../assets/premium/PremiumEffects.svg';\nimport PremiumEmoji from '../../../assets/premium/PremiumEmoji.svg';\nimport PremiumFile from '../../../assets/premium/PremiumFile.svg';\nimport PremiumLastSeen from '../../../assets/premium/PremiumLastSeen.svg';\nimport PremiumLimits from '../../../assets/premium/PremiumLimits.svg';\nimport PremiumLogo from '../../../assets/premium/PremiumLogo.svg';\nimport PremiumMessagePrivacy from '../../../assets/premium/PremiumMessagePrivacy.svg';\nimport PremiumReactions from '../../../assets/premium/PremiumReactions.svg';\nimport PremiumSpeed from '../../../assets/premium/PremiumSpeed.svg';\nimport PremiumStatus from '../../../assets/premium/PremiumStatus.svg';\nimport PremiumStickers from '../../../assets/premium/PremiumStickers.svg';\nimport PremiumTags from '../../../assets/premium/PremiumTags.svg';\nimport PremiumTranslate from '../../../assets/premium/PremiumTranslate.svg';\nimport PremiumVideo from '../../../assets/premium/PremiumVideo.svg';\nimport PremiumVoice from '../../../assets/premium/PremiumVoice.svg';\n\nconst LIMIT_ACCOUNTS = 4;\nconst STATUS_EMOJI_SIZE = 8 * REM;\n\nconst PREMIUM_FEATURE_COLOR_ICONS: Record<ApiPremiumSection, string> = {\n  stories: PremiumStatus,\n  double_limits: PremiumLimits,\n  infinite_reactions: PremiumReactions,\n  premium_stickers: PremiumStickers,\n  animated_emoji: PremiumEmoji,\n  no_ads: PremiumAds,\n  voice_to_text: PremiumVoice,\n  profile_badge: PremiumBadge,\n  faster_download: PremiumSpeed,\n  more_upload: PremiumFile,\n  advanced_chat_management: PremiumChats,\n  animated_userpics: PremiumVideo,\n  emoji_status: PremiumStatus,\n  translations: PremiumTranslate,\n  saved_tags: PremiumTags,\n  last_seen: PremiumLastSeen,\n  message_privacy: PremiumMessagePrivacy,\n  effects: PremiumEffects,\n};\n\nexport type OwnProps = {\n  isOpen?: boolean;\n};\n\ntype StateProps = {\n  currentUserId?: string;\n  promo?: ApiPremiumPromo;\n  fromUser?: ApiUser;\n  fromUserStatusEmoji?: ApiSticker;\n  fromUserStatusSet?: ApiStickerSet;\n  toUser?: ApiUser;\n  initialSection?: ApiPremiumSection;\n  isPremium?: boolean;\n  isSuccess?: boolean;\n  isGift?: boolean;\n  monthsAmount?: number;\n  limitChannels: number;\n  limitPins: number;\n  limitLinks: number;\n  limitFolders: number;\n  limits?: NonNullable<GlobalState['appConfig']>['limits'];\n  premiumSlug?: string;\n  premiumBotUsername?: string;\n  premiumPromoOrder?: ApiPremiumSection[];\n};\n\nconst PremiumMainModal: FC<OwnProps & StateProps> = ({\n  isOpen,\n  currentUserId,\n  fromUser,\n  fromUserStatusEmoji,\n  fromUserStatusSet,\n  promo,\n  initialSection,\n  isPremium,\n  limitChannels,\n  limitLinks,\n  limitFolders,\n  limitPins,\n  limits,\n  premiumSlug,\n  premiumBotUsername,\n  isSuccess,\n  isGift,\n  toUser,\n  monthsAmount,\n  premiumPromoOrder,\n}) => {\n  // eslint-disable-next-line no-null/no-null\n  const dialogRef = useRef<HTMLDivElement>(null);\n  const {\n    closePremiumModal, openInvoice, requestConfetti, openTelegramLink, loadStickers, openStickerSet,\n  } = getActions();\n\n  const lang = useOldLang();\n  const [isHeaderHidden, setHeaderHidden] = useState(true);\n  const [currentSection, setCurrentSection] = useState<ApiPremiumSection | undefined>(initialSection);\n  const [selectedSubscriptionOption, setSubscriptionOption] = useState<ApiPremiumSubscriptionOption>();\n\n  useEffect(() => {\n    if (!isOpen) {\n      setHeaderHidden(true);\n      setCurrentSection(undefined);\n    }\n  }, [isOpen]);\n\n  const handleOpenSection = useLastCallback((section: ApiPremiumSection) => {\n    setCurrentSection(section);\n  });\n\n  const handleResetSection = useLastCallback(() => {\n    setCurrentSection(undefined);\n  });\n\n  function handleScroll(e: React.UIEvent<HTMLDivElement>) {\n    const { scrollTop } = e.currentTarget;\n\n    setHeaderHidden(scrollTop <= 150);\n  }\n\n  const handleClickWithStartParam = useLastCallback((startParam?: string) => {\n    const dialog = dialogRef.current;\n    if (!dialog) return;\n\n    if (premiumSlug) {\n      openInvoice({\n        type: 'slug',\n        slug: premiumSlug,\n      });\n    } else if (premiumBotUsername) {\n      openTelegramLink({\n        url: `${TME_LINK_PREFIX}${premiumBotUsername}?start=${startParam || 'promo'}`,\n      });\n      closePremiumModal();\n    }\n  });\n\n  const handleClick = useLastCallback(() => {\n    if (selectedSubscriptionOption) {\n      handleClickWithStartParam(String(selectedSubscriptionOption.months));\n    } else {\n      handleClickWithStartParam();\n    }\n  });\n\n  const handleChangeSubscriptionOption = useLastCallback((months: number) => {\n    const foundOption = promo?.options.find((option) => option.months === months);\n    setSubscriptionOption(foundOption);\n  });\n\n  const showConfetti = useLastCallback(() => {\n    const dialog = dialogRef.current;\n    if (!dialog) return;\n    if (isOpen) {\n      const {\n        top, left, width, height,\n      } = dialog.querySelector('.modal-content')!.getBoundingClientRect();\n      requestConfetti({\n        top,\n        left,\n        width,\n        height,\n        withStars: true,\n      });\n    }\n  });\n\n  useEffect(() => {\n    if (isSuccess) {\n      showConfetti();\n    }\n  }, [isSuccess, showConfetti]);\n\n  useSyncEffect(([prevIsPremium]) => {\n    if (prevIsPremium === isPremium) return;\n\n    showConfetti();\n  }, [isPremium, showConfetti]);\n\n  const filteredSections = useMemo(() => {\n    if (!premiumPromoOrder) return PREMIUM_FEATURE_SECTIONS;\n    return premiumPromoOrder.filter((section) => PREMIUM_FEATURE_SECTIONS.includes(section));\n  }, [premiumPromoOrder]);\n\n  useEffect(() => {\n    if (!fromUserStatusEmoji || fromUserStatusSet) return;\n    loadStickers({\n      stickerSetInfo: fromUserStatusEmoji.stickerSetInfo,\n    });\n  }, [loadStickers, fromUserStatusEmoji, fromUserStatusSet]);\n\n  useEffect(() => {\n    const [defaultOption] = promo?.options ?? [];\n    setSubscriptionOption(defaultOption);\n  }, [promo]);\n\n  const handleOpenStatusSet = useLastCallback(() => {\n    if (!fromUserStatusSet) return;\n\n    openStickerSet({\n      stickerSetInfo: fromUserStatusSet,\n    });\n  });\n\n  const stickerSetTitle = useMemo(() => {\n    if (!fromUserStatusSet || !fromUser) return undefined;\n\n    const template = lang('lng_premium_emoji_status_title').replace('{user}', getUserFullName(fromUser)!);\n    const [first, second] = template.split('{link}');\n\n    const emoji = fromUserStatusSet.thumbCustomEmojiId ? (\n      <CustomEmoji className={styles.stickerSetLinkIcon} documentId={fromUserStatusSet.thumbCustomEmojiId} />\n    ) : undefined;\n    const link = (\n      <span className={styles.stickerSetLink} onClick={handleOpenStatusSet}>\n        {emoji}{renderText(fromUserStatusSet.title)}\n      </span>\n    );\n    return [renderText(first), link, renderText(second)];\n  }, [fromUser, fromUserStatusSet, lang]);\n\n  const fullMonthlyAmount = useMemo(() => {\n    const monthOption = promo?.options.find((option) => option.months === 1);\n    if (!monthOption) {\n      return undefined;\n    }\n    return Number(monthOption.amount);\n  }, [promo]);\n\n  const subscribeButtonText = useMemo(() => {\n    if (!selectedSubscriptionOption) {\n      return undefined;\n    }\n    const { amount, months, currency } = selectedSubscriptionOption;\n    const perMonthPrice = Math.floor(amount / months);\n    return formatCurrency(\n      perMonthPrice,\n      currency,\n      lang.code,\n    );\n  }, [selectedSubscriptionOption, lang.code]);\n\n  if (!promo || (fromUserStatusEmoji && !fromUserStatusSet)) return undefined;\n\n  function getHeaderText() {\n    if (isGift) {\n      return fromUser?.id === currentUserId\n        ? lang('TelegramPremiumUserGiftedPremiumOutboundDialogTitle', [getUserFullName(toUser), monthsAmount])\n        : lang('TelegramPremiumUserGiftedPremiumDialogTitle', [getUserFullName(fromUser), monthsAmount]);\n    }\n\n    return fromUser\n      ? lang('TelegramPremiumUserDialogTitle', getUserFullName(fromUser))\n      : lang(isPremium ? 'TelegramPremiumSubscribedTitle' : 'TelegramPremium');\n  }\n\n  function getHeaderDescription() {\n    if (isGift) {\n      return fromUser?.id === currentUserId\n        ? lang('TelegramPremiumUserGiftedPremiumOutboundDialogSubtitle', getUserFullName(toUser))\n        : lang('TelegramPremiumUserGiftedPremiumDialogSubtitle');\n    }\n\n    if (fromUserStatusSet) {\n      return lang('TelegramPremiumUserStatusDialogSubtitle');\n    }\n\n    return fromUser\n      ? lang('TelegramPremiumUserDialogSubtitle')\n      : lang(isPremium ? 'TelegramPremiumSubscribedSubtitle' : 'TelegramPremiumSubtitle');\n  }\n\n  function renderFooterText() {\n    if (!promo || (isGift && fromUser?.id === currentUserId)) {\n      return undefined;\n    }\n\n    return (\n      <div className={styles.footerText} dir={lang.isRtl ? 'rtl' : undefined}>\n        {renderTextWithEntities({\n          text: promo.statusText,\n          entities: promo.statusEntities,\n        })}\n      </div>\n    );\n  }\n\n  function renderSubscriptionOptions() {\n    return (\n      <div className={styles.subscriptionOptions}>\n        {promo?.options\n          .map((option) => (\n            <PremiumSubscriptionOption\n              className={styles.subscriptionOption}\n              key={option.amount}\n              option={option}\n              onChange={handleChangeSubscriptionOption}\n              fullMonthlyAmount={fullMonthlyAmount}\n              checked={selectedSubscriptionOption?.months === option.months}\n            />\n          ))}\n      </div>\n    );\n  }\n\n  return (\n    <Modal\n      className={styles.root}\n      onClose={closePremiumModal}\n      isOpen={isOpen}\n      dialogRef={dialogRef}\n    >\n      <Transition name=\"slide\" activeKey={currentSection ? 1 : 0} className={styles.transition}>\n        {!currentSection ? (\n          <div className={buildClassName(styles.main, 'custom-scroll')} onScroll={handleScroll}>\n            <Button\n              round\n              size=\"smaller\"\n              className={styles.closeButton}\n              color=\"translucent\"\n              // eslint-disable-next-line react/jsx-no-bind\n              onClick={() => closePremiumModal()}\n              ariaLabel={lang('Close')}\n            >\n              <i className=\"icon icon-close\" />\n            </Button>\n            {fromUserStatusEmoji ? (\n              <CustomEmoji\n                className={styles.statusEmoji}\n                onClick={handleOpenStatusSet}\n                documentId={fromUserStatusEmoji.id}\n                isBig\n                size={STATUS_EMOJI_SIZE}\n              />\n            ) : (\n              <img className={styles.logo} src={PremiumLogo} alt=\"\" draggable={false} />\n            )}\n            <h2 className={buildClassName(styles.headerText, fromUserStatusSet && styles.stickerSetText)}>\n              {fromUserStatusSet ? stickerSetTitle : renderText(getHeaderText(), ['simple_markdown', 'emoji'])}\n            </h2>\n            <div className={styles.description}>\n              {renderText(getHeaderDescription(), ['simple_markdown', 'emoji'])}\n            </div>\n            {!isPremium && !isGift && renderSubscriptionOptions()}\n            <div className={buildClassName(styles.header, isHeaderHidden && styles.hiddenHeader)}>\n              <h2 className={styles.premiumHeaderText}>\n                {lang('TelegramPremium')}\n              </h2>\n            </div>\n            <div className={buildClassName(styles.list, isPremium && styles.noButton)}>\n              {filteredSections.map((section, index) => {\n                return (\n                  <PremiumFeatureItem\n                    key={section}\n                    title={lang(PREMIUM_FEATURE_TITLES[section])}\n                    text={section === 'double_limits'\n                      ? lang(PREMIUM_FEATURE_DESCRIPTIONS[section],\n                        [limitChannels, limitFolders, limitPins, limitLinks, LIMIT_ACCOUNTS])\n                      : lang(PREMIUM_FEATURE_DESCRIPTIONS[section])}\n                    icon={PREMIUM_FEATURE_COLOR_ICONS[section]}\n                    index={index}\n                    count={filteredSections.length}\n                    section={section}\n                    onClick={handleOpenSection}\n                  />\n                );\n              })}\n              <div\n                className={buildClassName(styles.footerText, styles.primaryFooterText)}\n                dir={lang.isRtl ? 'rtl' : undefined}\n              >\n                <p>\n                  {renderText(lang('AboutPremiumDescription'), ['simple_markdown'])}\n                </p>\n                <p>\n                  {renderText(lang('AboutPremiumDescription2'), ['simple_markdown'])}\n                </p>\n              </div>\n              {renderFooterText()}\n            </div>\n            {!isPremium && selectedSubscriptionOption && (\n              <div className={styles.footer}>\n                <Button className={styles.button} isShiny withPremiumGradient onClick={handleClick}>\n                  {lang('SubscribeToPremium', subscribeButtonText)}\n                </Button>\n              </div>\n            )}\n          </div>\n        ) : (\n          <PremiumFeatureModal\n            initialSection={currentSection}\n            onBack={handleResetSection}\n            promo={promo}\n            onClickSubscribe={handleClickWithStartParam}\n            isPremium={isPremium}\n            limits={limits}\n            premiumPromoOrder={premiumPromoOrder}\n            subscriptionOption={selectedSubscriptionOption}\n          />\n        )}\n      </Transition>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    premiumModal,\n  } = selectTabState(global);\n\n  const fromUser = premiumModal?.fromUserId ? selectUser(global, premiumModal.fromUserId) : undefined;\n  const fromUserStatusEmoji = fromUser?.emojiStatus ? global.customEmojis.byId[fromUser.emojiStatus.documentId]\n    : undefined;\n  const fromUserStatusSet = fromUserStatusEmoji ? selectStickerSet(global, fromUserStatusEmoji.stickerSetInfo)\n    : undefined;\n\n  return {\n    currentUserId: global.currentUserId,\n    promo: premiumModal?.promo,\n    isSuccess: premiumModal?.isSuccess,\n    isGift: premiumModal?.isGift,\n    monthsAmount: premiumModal?.monthsAmount,\n    fromUser,\n    fromUserStatusEmoji,\n    fromUserStatusSet,\n    toUser: premiumModal?.toUserId ? selectUser(global, premiumModal.toUserId) : undefined,\n    initialSection: premiumModal?.initialSection,\n    isPremium: selectIsCurrentUserPremium(global),\n    limitChannels: selectPremiumLimit(global, 'channels'),\n    limitFolders: selectPremiumLimit(global, 'dialogFilters'),\n    limitPins: selectPremiumLimit(global, 'dialogFolderPinned'),\n    limitLinks: selectPremiumLimit(global, 'channelsPublic'),\n    limits: global.appConfig?.limits,\n    premiumSlug: global.appConfig?.premiumInvoiceSlug,\n    premiumBotUsername: global.appConfig?.premiumBotUsername,\n    premiumPromoOrder: global.appConfig?.premiumPromoOrder,\n  };\n})(PremiumMainModal));\n","import type { ChangeEvent } from 'react';\nimport type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useCallback, useMemo } from '../../../lib/teact/teact';\n\nimport type { ApiPremiumGiftCodeOption, ApiPremiumGiftOption } from '../../../api/types';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { formatCurrency } from '../../../util/formatCurrency';\n\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport styles from './PremiumSubscriptionOption.module.scss';\n\ntype OwnProps = {\n  option: ApiPremiumGiftOption | ApiPremiumGiftCodeOption;\n  isGiveaway?: boolean;\n  checked?: boolean;\n  fullMonthlyAmount?: number;\n  className?: string;\n  onChange: (month: number) => void;\n};\n\nconst PremiumSubscriptionOption: FC<OwnProps> = ({\n  option, checked, fullMonthlyAmount,\n  onChange, className, isGiveaway,\n}) => {\n  const lang = useOldLang();\n\n  const {\n    months, amount, currency,\n  } = option;\n  const users = 'users' in option ? option.users : undefined;\n  const perMonth = Math.floor(amount / months);\n  const isUserCountPlural = users ? users > 1 : undefined;\n\n  const discount = useMemo(() => {\n    return fullMonthlyAmount && fullMonthlyAmount > perMonth\n      ? Math.ceil(100 - perMonth / (fullMonthlyAmount / 100))\n      : undefined;\n  }, [fullMonthlyAmount, perMonth]);\n\n  const handleChange = useCallback((e: ChangeEvent<HTMLInputElement>) => {\n    if (e.target.checked) {\n      onChange(months);\n    }\n  }, [months, onChange]);\n\n  return (\n    <label\n      className={buildClassName(\n        isGiveaway ? styles.giveawayWrapper : styles.wrapper,\n        (checked && !isGiveaway) && styles.active,\n        className,\n      )}\n      dir={lang.isRtl ? 'rtl' : undefined}\n    >\n      <input\n        className={styles.input}\n        type=\"radio\"\n        name=\"subscription_option\"\n        value={months}\n        checked={checked}\n        onChange={handleChange}\n      />\n      <div className={styles.content}>\n        <div className={styles.month}>\n          {Boolean(discount) && (\n            <span\n              className={buildClassName(styles.giveawayDiscount, styles.discount)}\n              title={lang('GiftDiscount')}\n            > &minus;{discount}%\n            </span>\n          )}\n          {lang('Months', months)}\n        </div>\n        <div className={styles.perMonth}>\n          {(isGiveaway || isUserCountPlural) ? `${formatCurrency(amount, currency, lang.code)} x ${users!}`\n            : lang('PricePerMonth', formatCurrency(perMonth, currency, lang.code))}\n        </div>\n        <div className={styles.amount}>\n          {formatCurrency(amount, currency, lang.code)}\n        </div>\n      </div>\n    </label>\n  );\n};\n\nexport default memo(PremiumSubscriptionOption);\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, { memo, useMemo } from '../../../../lib/teact/teact';\n\nimport { lerp } from '../../../../util/math';\n\nimport PremiumLimitsCompare from './PremiumLimitsCompare';\n\nimport styles from './PremiumLimitPreview.module.scss';\n\ntype OwnProps = {\n  title: string;\n  description: string;\n  leftValue?: string;\n  rightValue?: string;\n  colorStepProgress: number;\n};\n\nconst COLOR_START = [91, 160, 255];\nconst COLOR_END = [197, 100, 243];\n\nconst PremiumLimitPreview: FC<OwnProps> = ({\n  title,\n  description,\n  leftValue,\n  rightValue,\n  colorStepProgress,\n}) => {\n  const color = useMemo(() => {\n    return COLOR_START.map((start, i) => lerp(start, COLOR_END[i], colorStepProgress));\n  }, [colorStepProgress]);\n\n  return (\n    <div className={styles.root}>\n      <div className={styles.title}>{title}</div>\n      <div className={styles.description}>{description}</div>\n      <PremiumLimitsCompare\n        leftValue={leftValue}\n        rightValue={rightValue}\n        rightStyle={`background: rgb(${color.join(',')})`}\n      />\n    </div>\n  );\n};\n\nexport default memo(PremiumLimitPreview);\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, { memo, useCallback, useEffect } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiLimitTypeWithModal } from '../../../../global/types';\nimport type { LangFn } from '../../../../hooks/useOldLang';\nimport type { IconName } from '../../../../types/icons';\n\nimport { MAX_UPLOAD_FILEPART_SIZE } from '../../../../config';\nimport { selectIsCurrentUserPremium, selectIsPremiumPurchaseBlocked } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatFileSize } from '../../../../util/textFormat';\nimport renderText from '../../../common/helpers/renderText';\n\nimport useFlag from '../../../../hooks/useFlag';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport Icon from '../../../common/icons/Icon';\nimport Button from '../../../ui/Button';\nimport Modal from '../../../ui/Modal';\nimport PremiumLimitsCompare from './PremiumLimitsCompare';\n\nimport styles from './PremiumLimitReachedModal.module.scss';\n\nconst LIMIT_DESCRIPTION: Record<ApiLimitTypeWithModal, string> = {\n  dialogFiltersChats: 'LimitReachedChatInFolders',\n  uploadMaxFileparts: 'LimitReachedFileSize',\n  dialogFilters: 'LimitReachedFolders',\n  dialogFolderPinned: 'LimitReachedPinDialogs',\n  channelsPublic: 'LimitReachedPublicLinks',\n  channels: 'LimitReachedCommunities',\n  chatlistInvites: 'LimitReachedFolderLinks',\n  chatlistJoined: 'LimitReachedSharedFolders',\n  savedDialogsPinned: 'LimitReachedPinSavedDialogs',\n};\n\nconst LIMIT_DESCRIPTION_BLOCKED: Record<ApiLimitTypeWithModal, string> = {\n  dialogFiltersChats: 'LimitReachedChatInFoldersLocked',\n  uploadMaxFileparts: 'LimitReachedFileSizeLocked',\n  dialogFilters: 'LimitReachedFoldersLocked',\n  dialogFolderPinned: 'LimitReachedPinDialogsLocked',\n  channelsPublic: 'LimitReachedPublicLinksLocked',\n  channels: 'LimitReachedCommunitiesLocked',\n  chatlistInvites: 'LimitReachedFolderLinksLocked',\n  chatlistJoined: 'LimitReachedSharedFoldersLocked',\n  savedDialogsPinned: 'LimitReachedPinSavedDialogsLocked',\n};\n\nconst LIMIT_DESCRIPTION_PREMIUM: Record<ApiLimitTypeWithModal, string> = {\n  dialogFiltersChats: 'LimitReachedChatInFoldersPremium',\n  uploadMaxFileparts: 'LimitReachedFileSizePremium',\n  dialogFilters: 'LimitReachedFoldersPremium',\n  dialogFolderPinned: 'LimitReachedPinDialogsPremium',\n  channelsPublic: 'LimitReachedPublicLinksPremium',\n  channels: 'LimitReachedCommunitiesPremium',\n  chatlistInvites: 'LimitReachedFolderLinksPremium',\n  chatlistJoined: 'LimitReachedSharedFoldersPremium',\n  savedDialogsPinned: 'LimitReachedPinSavedDialogsPremium',\n};\n\nconst LIMIT_ICON: Record<ApiLimitTypeWithModal, IconName> = {\n  dialogFiltersChats: 'chat-badge',\n  uploadMaxFileparts: 'file-badge',\n  dialogFilters: 'folder-badge',\n  dialogFolderPinned: 'pin-badge',\n  channelsPublic: 'link-badge',\n  channels: 'chats-badge',\n  chatlistInvites: 'link-badge',\n  chatlistJoined: 'folder-badge',\n  savedDialogsPinned: 'pin-badge',\n};\n\nconst LIMIT_VALUE_FORMATTER: Partial<Record<ApiLimitTypeWithModal, (...args: any[]) => string>> = {\n  uploadMaxFileparts: (lang: LangFn, value: number) => {\n    // The real size is not exactly 4gb, so we need to round it\n    if (value === 8000) return lang('FileSize.GB', '4');\n    if (value === 4000) return lang('FileSize.GB', '2');\n    return formatFileSize(lang, value * MAX_UPLOAD_FILEPART_SIZE);\n  },\n};\n\nfunction getLimiterDescription({\n  lang,\n  limitType,\n  isPremium,\n  canBuyPremium,\n  defaultValue,\n  premiumValue,\n  valueFormatter,\n}: {\n  lang: LangFn;\n  limitType?: ApiLimitTypeWithModal;\n  isPremium?: boolean;\n  canBuyPremium?: boolean;\n  defaultValue?: number;\n  premiumValue?: number;\n  valueFormatter?: (...args: any[]) => string;\n}) {\n  if (!limitType) {\n    return undefined;\n  }\n\n  const defaultValueFormatted = valueFormatter ? valueFormatter(lang, defaultValue) : defaultValue;\n  const premiumValueFormatted = valueFormatter ? valueFormatter(lang, premiumValue) : premiumValue;\n\n  if (isPremium) {\n    return lang(LIMIT_DESCRIPTION_PREMIUM[limitType], premiumValueFormatted);\n  }\n\n  return canBuyPremium\n    ? lang(LIMIT_DESCRIPTION[limitType],\n      limitType === 'channelsPublic' ? premiumValueFormatted : [defaultValueFormatted, premiumValueFormatted])\n    : lang(LIMIT_DESCRIPTION_BLOCKED[limitType], defaultValueFormatted);\n}\n\nexport type OwnProps = {\n  limit?: ApiLimitTypeWithModal;\n};\n\ntype StateProps = {\n  defaultValue?: number;\n  premiumValue?: number;\n  isPremium?: boolean;\n  canBuyPremium?: boolean;\n};\n\nconst PremiumLimitReachedModal: FC<OwnProps & StateProps> = ({\n  defaultValue,\n  premiumValue,\n  limit,\n  isPremium,\n  canBuyPremium,\n}) => {\n  const { closeLimitReachedModal, openPremiumModal } = getActions();\n  const lang = useOldLang();\n\n  const [isClosing, startClosing, stopClosing] = useFlag();\n\n  const handleClick = useCallback(() => {\n    openPremiumModal();\n    startClosing();\n  }, [openPremiumModal, startClosing]);\n\n  useEffect(() => {\n    if (!limit && isClosing) stopClosing();\n  }, [isClosing, limit, stopClosing]);\n\n  const title = lang('LimitReached');\n  const valueFormatter = limit && LIMIT_VALUE_FORMATTER[limit];\n  const description = getLimiterDescription({\n    lang,\n    limitType: limit,\n    isPremium,\n    canBuyPremium,\n    defaultValue,\n    premiumValue,\n    valueFormatter,\n  });\n  const icon = limit && LIMIT_ICON[limit];\n  const canUpgrade = canBuyPremium && !isPremium;\n\n  return (\n    <Modal\n      onClose={startClosing}\n      onCloseAnimationEnd={closeLimitReachedModal}\n      isOpen={Boolean(limit) && !isClosing}\n      title={title}\n      className={styles.root}\n    >\n      {!canUpgrade && (\n        <div className={styles.limitBadge}>\n          <i className={buildClassName(styles.limitIcon, icon, 'icon')} />\n          <div className={styles.limitValue}>{valueFormatter?.(\n            lang, isPremium ? premiumValue : defaultValue,\n          ) || (isPremium ? premiumValue : defaultValue)}\n          </div>\n        </div>\n      )}\n\n      {canUpgrade && (\n        <PremiumLimitsCompare\n          className={styles.limitCompare}\n          leftValue={valueFormatter?.(lang, defaultValue) || defaultValue?.toString()}\n          rightValue={valueFormatter?.(lang, premiumValue) || premiumValue?.toString()}\n          floatingBadgeIcon={icon}\n        />\n      )}\n\n      <div>\n        {renderText(description || '', ['simple_markdown', 'br'])}\n      </div>\n\n      <div className={styles.dialogButtons}>\n        <Button\n          className=\"confirm-dialog-button\"\n          isText\n          onClick={startClosing}\n          color=\"primary\"\n        >\n          {lang(canUpgrade ? 'Cancel' : 'OK')}\n        </Button>\n        {canUpgrade\n      && (\n        <Button\n          className=\"confirm-dialog-button\"\n          isText\n          onClick={handleClick}\n          color=\"primary\"\n        >\n          {lang('IncreaseLimit')}\n          <Icon name=\"double-badge\" className={styles.x2} />\n        </Button>\n      )}\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { limit }): StateProps => {\n    const { limits } = global.appConfig || {};\n    const isPremium = selectIsCurrentUserPremium(global);\n\n    return {\n      defaultValue: limit ? limits?.[limit][0] : undefined,\n      premiumValue: limit ? limits?.[limit][1] : undefined,\n      canBuyPremium: !selectIsPremiumPurchaseBlocked(global),\n      isPremium,\n    };\n  },\n)(PremiumLimitReachedModal));\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, { memo } from '../../../../lib/teact/teact';\n\nimport type { IconName } from '../../../../types/icons';\n\nimport buildClassName from '../../../../util/buildClassName';\n\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport styles from './PremiumLimitsCompare.module.scss';\n\ntype OwnProps = {\n  floatingBadgeIcon?: IconName;\n  leftValue?: string;\n  rightValue?: string;\n  className?: string;\n  rightStyle?: string;\n};\n\nconst PremiumLimitsCompare: FC<OwnProps> = ({\n  leftValue,\n  rightValue,\n  className,\n  floatingBadgeIcon,\n  rightStyle,\n}) => {\n  const lang = useOldLang();\n\n  return (\n    <div className={buildClassName(styles.root, className)}>\n      {floatingBadgeIcon && (\n        <div className={styles.floatingBadge}>\n          <i className={buildClassName(styles.floatingBadgeIcon, `icon-${floatingBadgeIcon}`, 'icon')} />\n          <div className={styles.floatingBadgeValue} dir={lang.isRtl ? 'rtl' : undefined}>{leftValue}</div>\n          <div className={styles.floatingBadgeTriangle}>\n            <svg width=\"26\" height=\"9\" viewBox=\"0 0 26 9\" fill=\"none\">\n              <path d=\"M0 0H26H24.4853C22.894 0 21.3679 0.632141 20.2426 1.75736L14.4142 7.58579C13.6332 8.36684 12.3668 8.36683 11.5858 7.58579L5.75736 1.75736C4.63214 0.632139 3.10602 0 1.51472 0H0Z\" fill=\"#7E85FF\" />\n            </svg>\n          </div>\n        </div>\n      )}\n      <div className={buildClassName(styles.line, styles.left)}>\n        <div className={styles.leftText} dir={lang.isRtl ? 'rtl' : undefined}>{lang('LimitFree')}</div>\n        {!floatingBadgeIcon && <div className={styles.leftValue}>{leftValue}</div>}\n      </div>\n      <div className={buildClassName(styles.line, styles.right)} style={rightStyle}>\n        <div className={styles.rightText} dir={lang.isRtl ? 'rtl' : undefined}>{lang('LimitPremium')}</div>\n        <div className={styles.rightValue}>{rightValue}</div>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(PremiumLimitsCompare);\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useRef, useState,\n} from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport type { ApiSticker } from '../../../../api/types';\nimport type { GlobalState } from '../../../../global/types';\n\nimport cycleRestrict from '../../../../util/cycleRestrict';\n\nimport useFlag from '../../../../hooks/useFlag';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useMedia from '../../../../hooks/useMedia';\n\nimport AnimatedSticker from '../../../common/AnimatedSticker';\n\nimport styles from './PremiumFeaturePreviewStickers.module.scss';\n\ntype OwnProps = {\n  isActive: boolean;\n};\n\ntype StateProps = {\n  stickers: GlobalState['stickers']['premium']['stickers'];\n};\n\nconst EMOJI_SIZE_MULTIPLIER = 0.6;\nconst EFFECT_SIZE_MULTIPLIER = 0.8;\nconst MAX_EMOJIS = 15;\nconst ENDED_DELAY = 150;\n\nconst AnimatedCircleSticker: FC<{\n  size: number;\n  realIndex: number;\n  sticker: ApiSticker;\n  index: number;\n  maxLength: number;\n  onClick: (index: number) => void;\n  onEnded: (index: number) => void;\n  canPlay: boolean;\n}> = ({\n  size, realIndex, canPlay,\n  sticker, index, maxLength, onClick, onEnded,\n}) => {\n  const mediaData = useMedia(`sticker${sticker.id}`);\n  const mediaDataAround = useMedia(`sticker${sticker.id}?size=f`);\n\n  const isActivated = index === 0;\n  const [isAnimated, animate, inanimate] = useFlag(isActivated);\n\n  const circleSize = size - size * EMOJI_SIZE_MULTIPLIER;\n  const width = circleSize * 3;\n  const height = circleSize * 3.2;\n\n  const a = index / maxLength;\n\n  const angle = a * (Math.PI * 2);\n  const scale = isActivated ? 1 : 0.66;\n\n  const x = Math.cos(angle) * width - circleSize * 2.8;\n  const y = Math.sin(angle) * height;\n\n  const handleClick = useLastCallback(() => {\n    onClick(realIndex);\n  });\n\n  const handleEnded = useLastCallback(() => {\n    inanimate();\n    onEnded(realIndex);\n  });\n\n  useEffect(() => {\n    if (isActivated) {\n      animate();\n    }\n  }, [isActivated, animate]);\n\n  return (\n    <>\n      {isActivated && (\n        <AnimatedSticker\n          className={styles.effectSticker}\n          tgsUrl={mediaDataAround}\n          play={canPlay}\n          isLowPriority\n          noLoop\n          size={EFFECT_SIZE_MULTIPLIER * size}\n          style={`--x: calc(${x}px - 10%); --y: ${y}px;`}\n        />\n      )}\n      <AnimatedSticker\n        className={styles.sticker}\n        tgsUrl={mediaData}\n        play={canPlay && isAnimated}\n        noLoop\n        size={EMOJI_SIZE_MULTIPLIER * size}\n        style={`--x: ${x}px; --y: ${y}px; --opacity: ${scale}`}\n        onClick={handleClick}\n        onEnded={handleEnded}\n      />\n    </>\n  );\n};\n\nconst PremiumFeaturePreviewStickers: FC<OwnProps & StateProps> = ({\n  stickers, isActive,\n}) => {\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [offset, setOffset] = useState(0);\n  const [size, setSize] = useState(0);\n\n  const renderedStickers = stickers?.slice(0, MAX_EMOJIS);\n\n  const handleClick = useLastCallback((i: number) => {\n    setOffset(-i);\n  });\n\n  const handleEnded = useLastCallback((i: number) => {\n    const displayIndex = cycleRestrict(renderedStickers.length, i + offset);\n    if (displayIndex !== 0) return;\n\n    setTimeout(() => {\n      setOffset((current) => {\n        return cycleRestrict(renderedStickers.length, current + 1);\n      });\n    }, ENDED_DELAY);\n  });\n\n  useEffect(() => {\n    const container = containerRef.current;\n    if (!container) return;\n\n    setSize(container.closest('.modal-dialog')!.clientWidth);\n  }, []);\n\n  return (\n    <div\n      className={styles.root}\n      ref={containerRef}\n    >\n      {Boolean(size) && renderedStickers?.map((sticker, i) => {\n        return (\n          <AnimatedCircleSticker\n            size={size}\n            sticker={sticker}\n            realIndex={i}\n            index={(i + offset + renderedStickers.length) % renderedStickers.length}\n            maxLength={renderedStickers.length}\n            onClick={handleClick}\n            onEnded={handleEnded}\n            canPlay={isActive}\n          />\n        );\n      })}\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    return {\n      stickers: global.stickers.premium.stickers,\n    };\n  },\n)(PremiumFeaturePreviewStickers));\n","import React, { memo, useLayoutEffect, useRef } from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport type { ApiUser } from '../../../../api/types';\n\nimport { selectUser } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { REM } from '../../../common/helpers/mediaDimensions';\n\nimport useOldLang from '../../../../hooks/useOldLang';\nimport useScrolledState from '../../../../hooks/useScrolledState';\nimport useDevicePixelRatio from '../../../../hooks/window/useDevicePixelRatio';\n\nimport Avatar from '../../../common/Avatar';\nimport { drawGradientCircle } from '../../../common/AvatarStoryCircle';\nimport PremiumFeatureItem from '../PremiumFeatureItem';\n\nimport styles from './PremiumFeaturePreviewStories.module.scss';\n\ntype StateProps = {\n  currentUser: ApiUser;\n};\n\nconst STORY_FEATURE_TITLES = {\n  stories_order: 'PremiumStoriesPriority',\n  stories_stealth: 'PremiumStoriesStealth',\n  stories_views: 'PremiumStoriesViews',\n  stories_timer: 'lng_premium_stories_subtitle_expiration',\n  stories_save: 'PremiumStoriesSaveToGallery',\n  stories_caption: 'lng_premium_stories_subtitle_caption',\n  stories_link: 'lng_premium_stories_subtitle_links',\n};\n\nconst STORY_FEATURE_DESCRIPTIONS = {\n  stories_order: 'PremiumStoriesPriorityDescription',\n  stories_stealth: 'PremiumStoriesStealthDescription',\n  stories_views: 'PremiumStoriesViewsDescription',\n  stories_timer: 'PremiumStoriesExpirationDescription',\n  stories_save: 'PremiumStoriesSaveToGalleryDescription',\n  stories_caption: 'PremiumStoriesCaptionDescription',\n  stories_link: 'PremiumStoriesFormattingDescription',\n};\n\nconst STORY_FEATURE_ICONS = {\n  stories_order: 'story-priority',\n  stories_stealth: 'eye-closed-outline',\n  stories_views: 'eye-outline',\n  stories_timer: 'timer',\n  stories_save: 'arrow-down-circle',\n  stories_caption: 'story-caption',\n  stories_link: 'link-badge',\n};\n\nconst STORY_FEATURE_ORDER = Object.keys(STORY_FEATURE_TITLES) as (keyof typeof STORY_FEATURE_TITLES)[];\n\nconst CIRCLE_SIZE = 5.25 * REM;\nconst CIRCLE_SEGMENTS = 8;\nconst CIRCLE_READ_SEGMENTS = 0;\n\nconst PremiumFeaturePreviewVideo = ({\n  currentUser,\n}: StateProps) => {\n  // eslint-disable-next-line no-null/no-null\n  const circleRef = useRef<HTMLCanvasElement>(null);\n\n  const lang = useOldLang();\n\n  const dpr = useDevicePixelRatio();\n\n  useLayoutEffect(() => {\n    if (!circleRef.current) {\n      return;\n    }\n\n    drawGradientCircle({\n      canvas: circleRef.current,\n      size: CIRCLE_SIZE * dpr,\n      segmentsCount: CIRCLE_SEGMENTS,\n      color: 'purple',\n      readSegmentsCount: CIRCLE_READ_SEGMENTS,\n      readSegmentColor: 'transparent',\n      dpr,\n    });\n  }, [dpr]);\n\n  const { handleScroll, isAtBeginning } = useScrolledState();\n\n  const maxSize = CIRCLE_SIZE;\n\n  return (\n    <div className={styles.root}>\n      <div className={styles.header}>\n        <Avatar forPremiumPromo peer={currentUser} size=\"giant\" />\n        <canvas className={styles.circle} ref={circleRef} style={`max-width: ${maxSize}px; max-height: ${maxSize}px`} />\n      </div>\n      <div className={styles.title}>{lang('UpgradedStories')}</div>\n      <div\n        className={buildClassName(styles.features, !isAtBeginning && styles.scrolled, 'custom-scroll')}\n        onScroll={handleScroll}\n      >\n        {STORY_FEATURE_ORDER.map((section, index) => {\n          return (\n            <PremiumFeatureItem\n              key={section}\n              title={lang(STORY_FEATURE_TITLES[section])}\n              text={lang(STORY_FEATURE_DESCRIPTIONS[section])}\n              icon={STORY_FEATURE_ICONS[section]}\n              isFontIcon\n              index={index}\n              count={STORY_FEATURE_ORDER.length}\n              section={section}\n            />\n          );\n        })}\n        <div className={styles.mobile}>{lang('lng_premium_stories_about_mobile')}</div>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal(\n  (global): StateProps => {\n    return {\n      currentUser: selectUser(global, global.currentUserId!)!,\n    };\n  },\n)(PremiumFeaturePreviewVideo));\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, { memo } from '../../../../lib/teact/teact';\n\nimport type { ApiThumbnail } from '../../../../api/types';\n\nimport buildClassName from '../../../../util/buildClassName';\n\nimport useCanvasBlur from '../../../../hooks/useCanvasBlur';\nimport useMedia from '../../../../hooks/useMedia';\nimport useMediaTransition from '../../../../hooks/useMediaTransition';\n\nimport OptimizedVideo from '../../../ui/OptimizedVideo';\n\nimport styles from './PremiumFeaturePreviewVideo.module.scss';\n\nimport DeviceFrame from '../../../../assets/premium/DeviceFrame.svg';\n\ntype OwnProps = {\n  videoId: string;\n  isReverseAnimation: boolean;\n  isDown: boolean;\n  videoThumbnail: ApiThumbnail;\n  index: number;\n  isActive: boolean;\n};\n\nconst PremiumFeaturePreviewVideo: FC<OwnProps> = ({\n  videoId,\n  isReverseAnimation,\n  isDown,\n  videoThumbnail,\n  index,\n  isActive,\n}) => {\n  const mediaData = useMedia(`document${videoId}`);\n  const thumbnailRef = useCanvasBlur(videoThumbnail.dataUri);\n  const transitionClassNames = useMediaTransition(mediaData);\n\n  return (\n    <div className={styles.root}>\n      <div\n        className={buildClassName(\n          styles.wrapper,\n          isReverseAnimation && styles.reverse,\n          isDown && styles.down,\n        )}\n        id={`premium_feature_preview_video_${index}`}\n      >\n        <img src={DeviceFrame} alt=\"\" className={styles.frame} draggable={false} />\n        <canvas ref={thumbnailRef} className={styles.video} />\n        <OptimizedVideo\n          canPlay={isActive}\n          className={buildClassName(styles.video, transitionClassNames)}\n          src={mediaData}\n          disablePictureInPicture\n          playsInline\n          muted\n          loop\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(PremiumFeaturePreviewVideo);\n","import React, {\n  memo, useEffect, useMemo, useRef,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type {\n  ApiChat,\n  ApiMessage, ApiPeer, ApiPhoto,\n} from '../../api/types';\nimport { type MediaViewerMedia, MediaViewerOrigin, type ThreadId } from '../../types';\n\nimport { ANIMATION_END_DELAY } from '../../config';\nimport {\n  getChatMediaMessageIds, getMessagePaidMedia, isChatAdmin, isUserId,\n} from '../../global/helpers';\nimport {\n  selectChatMessage,\n  selectChatMessages,\n  selectChatScheduledMessages,\n  selectCurrentChatMediaSearch,\n  selectCurrentSharedMediaSearch,\n  selectIsChatWithSelf,\n  selectListedIds,\n  selectOutlyingListByMessageId,\n  selectPeer,\n  selectPerformanceSettingsValue,\n  selectScheduledMessage,\n  selectTabState,\n} from '../../global/selectors';\nimport { stopCurrentAudio } from '../../util/audioPlayer';\nimport captureEscKeyListener from '../../util/captureEscKeyListener';\nimport { disableDirectTextInput, enableDirectTextInput } from '../../util/directInputManager';\nimport { MEDIA_VIEWER_MEDIA_QUERY } from '../common/helpers/mediaDimensions';\nimport { renderMessageText } from '../common/helpers/renderMessageText';\nimport getViewableMedia, { getMediaViewerItem, type MediaViewerItem } from './helpers/getViewableMedia';\nimport { animateClosing, animateOpening } from './helpers/ghostAnimation';\n\nimport useAppLayout from '../../hooks/useAppLayout';\nimport useElectronDrag from '../../hooks/useElectronDrag';\nimport useFlag from '../../hooks/useFlag';\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport { dispatchHeavyAnimationEvent } from '../../hooks/useHeavyAnimationCheck';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useOldLang from '../../hooks/useOldLang';\nimport { exitPictureInPictureIfNeeded, usePictureInPictureSignal } from '../../hooks/usePictureInPicture';\nimport usePrevious from '../../hooks/usePrevious';\nimport { dispatchPriorityPlaybackEvent } from '../../hooks/usePriorityPlaybackCheck';\nimport { useMediaProps } from './hooks/useMediaProps';\n\nimport ReportModal from '../common/ReportModal';\nimport Button from '../ui/Button';\nimport ShowTransition from '../ui/ShowTransition';\nimport Transition from '../ui/Transition';\nimport MediaViewerActions from './MediaViewerActions';\nimport MediaViewerSlides from './MediaViewerSlides';\nimport SenderInfo from './SenderInfo';\n\nimport './MediaViewer.scss';\n\ntype StateProps = {\n  chatId?: string;\n  threadId?: ThreadId;\n  messageId?: number;\n  message?: ApiMessage;\n  collectedMessageIds?: number[];\n  isChatWithSelf?: boolean;\n  canUpdateMedia?: boolean;\n  origin?: MediaViewerOrigin;\n  avatar?: ApiPhoto;\n  avatarOwner?: ApiPeer;\n  chatMessages?: Record<number, ApiMessage>;\n  standaloneMedia?: MediaViewerMedia[];\n  mediaIndex?: number;\n  isHidden?: boolean;\n  withAnimation?: boolean;\n  shouldSkipHistoryAnimations?: boolean;\n  withDynamicLoading?: boolean;\n  isLoadingMoreMedia?: boolean;\n  isSynced?: boolean;\n};\n\nconst ANIMATION_DURATION = 250;\n\nconst MediaViewer = ({\n  chatId,\n  threadId,\n  messageId,\n  message,\n  collectedMessageIds,\n  isChatWithSelf,\n  canUpdateMedia,\n  origin,\n  avatar,\n  avatarOwner,\n  chatMessages,\n  standaloneMedia,\n  mediaIndex,\n  withAnimation,\n  isHidden,\n  shouldSkipHistoryAnimations,\n  withDynamicLoading,\n  isLoadingMoreMedia,\n  isSynced,\n}: StateProps) => {\n  const {\n    openMediaViewer,\n    closeMediaViewer,\n    openForwardMenu,\n    focusMessage,\n    toggleChatInfo,\n    searchChatMediaMessages,\n  } = getActions();\n\n  const isOpen = Boolean(avatarOwner || message || standaloneMedia);\n  const { isMobile } = useAppLayout();\n\n  /* Animation */\n  const animationKey = useRef<number>();\n  const senderId = message?.senderId || avatarOwner?.id;\n  const prevSenderId = usePrevious<string | undefined>(senderId);\n  const headerAnimation = withAnimation ? 'slideFade' : 'none';\n  const isGhostAnimation = Boolean(withAnimation && !shouldSkipHistoryAnimations);\n\n  /* Controls */\n  const [isReportModalOpen, openReportModal, closeReportModal] = useFlag();\n\n  const currentItem = getMediaViewerItem({\n    message, avatarOwner, standaloneMedia, mediaIndex,\n  });\n  const { media, isSingle } = getViewableMedia(currentItem) || {};\n\n  const {\n    isVideo,\n    isPhoto,\n    bestImageData,\n    bestData,\n    dimensions,\n    isGif,\n    isFromSharedMedia,\n  } = useMediaProps({\n    media, isAvatar: Boolean(avatarOwner), origin, delay: isGhostAnimation && ANIMATION_DURATION,\n  });\n\n  const canReport = avatarOwner && !isChatWithSelf;\n  const isVisible = !isHidden && isOpen;\n\n  const messageMediaIds = useMemo(() => {\n    return withDynamicLoading\n      ? collectedMessageIds\n      : getChatMediaMessageIds(chatMessages || {}, collectedMessageIds || [], isFromSharedMedia);\n  }, [chatMessages, collectedMessageIds, isFromSharedMedia, withDynamicLoading]);\n\n  if (isOpen && (!prevSenderId || prevSenderId !== senderId || animationKey.current === undefined)) {\n    animationKey.current = isSingle ? 0 : (messageId || mediaIndex);\n  }\n\n  const [getIsPictureInPicture] = usePictureInPictureSignal();\n\n  useEffect(() => {\n    if (!isOpen || getIsPictureInPicture()) {\n      return undefined;\n    }\n\n    disableDirectTextInput();\n    const stopPriorityPlayback = dispatchPriorityPlaybackEvent();\n\n    return () => {\n      stopPriorityPlayback();\n      enableDirectTextInput();\n    };\n  }, [isOpen, getIsPictureInPicture]);\n\n  useEffect(() => {\n    if (isVisible) {\n      exitPictureInPictureIfNeeded();\n    }\n  }, [isVisible]);\n\n  useEffect(() => {\n    if (isMobile) {\n      document.body.classList.toggle('is-media-viewer-open', isOpen);\n    }\n  }, [isMobile, isOpen]);\n\n  // eslint-disable-next-line no-null/no-null\n  const headerRef = useRef<HTMLDivElement>(null);\n  useElectronDrag(headerRef);\n\n  const forceUpdate = useForceUpdate();\n  useEffect(() => {\n    const mql = window.matchMedia(MEDIA_VIEWER_MEDIA_QUERY);\n    mql.addEventListener('change', forceUpdate);\n\n    return () => {\n      mql.removeEventListener('change', forceUpdate);\n    };\n  }, [forceUpdate]);\n\n  const prevMessage = usePrevious<ApiMessage | undefined>(message);\n  const prevIsHidden = usePrevious<boolean | undefined>(isHidden);\n  const prevOrigin = usePrevious(origin);\n  const prevItem = usePrevious(currentItem);\n  const prevBestImageData = usePrevious(bestImageData);\n  const textParts = message ? renderMessageText({ message, forcePlayback: true, isForMediaViewer: true }) : undefined;\n  const hasFooter = Boolean(textParts);\n  const shouldAnimateOpening = prevIsHidden && prevItem !== currentItem;\n\n  useEffect(() => {\n    if (isGhostAnimation && isOpen && (shouldAnimateOpening || !prevItem)) {\n      dispatchHeavyAnimationEvent(ANIMATION_DURATION + ANIMATION_END_DELAY);\n      animateOpening(hasFooter, origin!, bestImageData!, dimensions!, isVideo, message, mediaIndex);\n    }\n\n    if (isGhostAnimation && !isOpen && prevItem) {\n      dispatchHeavyAnimationEvent(ANIMATION_DURATION + ANIMATION_END_DELAY);\n      animateClosing(prevOrigin!, prevBestImageData!, prevMessage, prevItem?.mediaIndex);\n    }\n  }, [\n    bestImageData, dimensions, hasFooter, isGhostAnimation, isOpen, isVideo, message, origin,\n    prevBestImageData, prevItem, prevMessage, prevOrigin, shouldAnimateOpening, mediaIndex,\n  ]);\n\n  const handleClose = useLastCallback(() => closeMediaViewer());\n\n  const handleFooterClick = useLastCallback(() => {\n    handleClose();\n\n    if (!chatId || !messageId) return;\n\n    if (isMobile) {\n      setTimeout(() => {\n        toggleChatInfo({ force: false }, { forceSyncOnIOs: true });\n        focusMessage({ chatId, threadId, messageId });\n      }, ANIMATION_DURATION);\n    } else {\n      focusMessage({ chatId, threadId, messageId });\n    }\n  });\n\n  const handleForward = useLastCallback(() => {\n    openForwardMenu({\n      fromChatId: chatId!,\n      messageIds: [messageId!],\n    });\n  });\n\n  useEffect(() => (isOpen ? captureEscKeyListener(() => {\n    handleClose();\n  }) : undefined), [handleClose, isOpen]);\n\n  useEffect(() => {\n    if (isVideo && !isGif) {\n      stopCurrentAudio();\n    }\n  }, [isGif, isVideo]);\n\n  const loadMoreItemsIfNeeded = useLastCallback((item?: MediaViewerItem) => {\n    if (!item || !withDynamicLoading || isLoadingMoreMedia) return;\n    if (item.type !== 'message') return;\n    searchChatMediaMessages({ chatId, threadId, currentMediaMessageId: item.message.id });\n  });\n\n  const getNextItem = useLastCallback((from: MediaViewerItem, direction: number): MediaViewerItem | undefined => {\n    if (direction === 0 || isSingle) return undefined;\n\n    if (from.type === 'standalone') {\n      const { media: fromMedia, mediaIndex: fromMediaIndex } = from;\n      const nextIndex = fromMediaIndex + direction;\n      if (nextIndex >= 0 && nextIndex < fromMedia.length) {\n        return { type: 'standalone', media: fromMedia, mediaIndex: nextIndex };\n      }\n\n      return undefined;\n    }\n\n    if (from.type === 'avatar') {\n      const { avatarOwner: fromAvatarOwner, mediaIndex: fromMediaIndex } = from;\n      const nextIndex = fromMediaIndex + direction;\n      if (nextIndex >= 0 && fromAvatarOwner.photos && nextIndex < fromAvatarOwner.photos.length) {\n        return { type: 'avatar', avatarOwner: fromAvatarOwner, mediaIndex: nextIndex };\n      }\n\n      return undefined;\n    }\n\n    const { message: fromMessage, mediaIndex: fromMediaIndex } = from;\n\n    const paidMedia = getMessagePaidMedia(fromMessage);\n    if (paidMedia) {\n      const nextIndex = fromMediaIndex! + direction;\n\n      if (nextIndex >= 0 && nextIndex < paidMedia.extendedMedia.length) {\n        return { type: 'message', message: fromMessage, mediaIndex: nextIndex };\n      }\n    }\n\n    const index = messageMediaIds?.indexOf(fromMessage.id);\n    if (index === undefined) return undefined;\n    const nextIndex = index + direction;\n    const nextMessageId = messageMediaIds![nextIndex];\n    const nextMessage = chatMessages?.[nextMessageId];\n    if (nextMessage) {\n      return { type: 'message', message: nextMessage };\n    }\n\n    return undefined;\n  });\n\n  const openMediaViewerItem = useLastCallback((item?: MediaViewerItem) => {\n    if (!item) {\n      handleClose();\n      return;\n    }\n\n    const itemChatId = item.type === 'avatar'\n      ? item.avatarOwner.id : item.type === 'message'\n        ? item.message.chatId : undefined;\n    const itemMessageId = item.type === 'message' ? item.message.id : undefined;\n    const itemStandaloneMedia = item.type === 'standalone' ? item.media : undefined;\n\n    openMediaViewer({\n      origin: origin!,\n      chatId: itemChatId,\n      messageId: itemMessageId,\n      standaloneMedia: itemStandaloneMedia,\n      mediaIndex: item.mediaIndex,\n      isAvatarView: item.type === 'avatar',\n      withDynamicLoading,\n    }, {\n      forceOnHeavyAnimation: true,\n    });\n  });\n\n  const handleBeforeDelete = useLastCallback(() => {\n    const mediaCount = avatarOwner?.photos?.length || standaloneMedia?.length || messageMediaIds?.length || 0;\n    if (mediaCount <= 1 || !currentItem) {\n      handleClose();\n      return;\n    }\n    // Before deleting, select previous media\n    const prevMedia = getNextItem(currentItem, -1);\n    if (prevMedia) {\n      openMediaViewerItem(prevMedia);\n      return;\n    }\n\n    if (currentItem.type === 'avatar' || currentItem.type === 'standalone') {\n      // Keep current item, it'll update when indexes shift\n      return;\n    }\n\n    handleClose();\n  });\n\n  const lang = useOldLang();\n\n  return (\n    <ShowTransition\n      id=\"MediaViewer\"\n      isOpen={isOpen}\n      isHidden={isHidden}\n      shouldAnimateFirstRender\n      noCloseTransition={shouldSkipHistoryAnimations}\n    >\n      <div className=\"media-viewer-head\" dir={lang.isRtl ? 'rtl' : undefined} ref={headerRef}>\n        {isMobile && (\n          <Button\n            className=\"media-viewer-close\"\n            round\n            size=\"smaller\"\n            color=\"translucent-white\"\n            ariaLabel={lang('Close')}\n            onClick={handleClose}\n          >\n            <i className=\"icon icon-close\" />\n          </Button>\n        )}\n        <Transition activeKey={animationKey.current!} name={headerAnimation}>\n          <SenderInfo\n            key={media?.id}\n            item={currentItem}\n          />\n        </Transition>\n        <MediaViewerActions\n          mediaData={bestData}\n          isVideo={isVideo}\n          item={currentItem}\n          canUpdateMedia={canUpdateMedia}\n          canReport={canReport}\n          onBeforeDelete={handleBeforeDelete}\n          onReport={openReportModal}\n          onCloseMediaViewer={handleClose}\n          onForward={handleForward}\n        />\n        <ReportModal\n          isOpen={isReportModalOpen}\n          onClose={closeReportModal}\n          subject=\"media\"\n          photo={avatar}\n          peerId={avatarOwner?.id}\n        />\n      </div>\n      <MediaViewerSlides\n        item={currentItem}\n        loadMoreItemsIfNeeded={loadMoreItemsIfNeeded}\n        isLoadingMoreMedia={isLoadingMoreMedia}\n        isSynced={isSynced}\n        getNextItem={getNextItem}\n        chatId={chatId}\n        isPhoto={isPhoto}\n        isGif={isGif}\n        threadId={threadId}\n        avatarOwnerId={avatarOwner?.id}\n        origin={origin}\n        isOpen={isOpen}\n        hasFooter={hasFooter}\n        isVideo={isVideo}\n        withAnimation={withAnimation}\n        onClose={handleClose}\n        selectItem={openMediaViewerItem}\n        isHidden={isHidden}\n        onFooterClick={handleFooterClick}\n      />\n    </ShowTransition>\n  );\n};\n\nexport default memo(withGlobal(\n  (global): StateProps => {\n    const { mediaViewer, shouldSkipHistoryAnimations } = selectTabState(global);\n    const {\n      chatId,\n      threadId,\n      messageId,\n      origin,\n      isHidden,\n      withDynamicLoading,\n      standaloneMedia,\n      mediaIndex,\n      isAvatarView,\n    } = mediaViewer;\n    const withAnimation = selectPerformanceSettingsValue(global, 'mediaViewerAnimations');\n\n    const { currentUserId, isSynced } = global;\n    const isChatWithSelf = Boolean(chatId) && selectIsChatWithSelf(global, chatId);\n\n    if (isAvatarView) {\n      const peer = selectPeer(global, chatId!);\n      let canUpdateMedia = false;\n      if (peer) {\n        canUpdateMedia = isUserId(peer.id) ? peer.id === currentUserId : isChatAdmin(peer as ApiChat);\n      }\n\n      return {\n        avatar: peer?.photos?.[mediaIndex!],\n        avatarOwner: peer,\n        isChatWithSelf,\n        canUpdateMedia,\n        withAnimation,\n        origin,\n        shouldSkipHistoryAnimations,\n        isHidden,\n        standaloneMedia,\n        mediaIndex,\n      };\n    }\n\n    let message: ApiMessage | undefined;\n    if (chatId && messageId) {\n      if (origin && [MediaViewerOrigin.ScheduledAlbum, MediaViewerOrigin.ScheduledInline].includes(origin)) {\n        message = selectScheduledMessage(global, chatId, messageId);\n      } else {\n        message = selectChatMessage(global, chatId, messageId);\n      }\n    }\n\n    let chatMessages: Record<number, ApiMessage> | undefined;\n\n    if (chatId) {\n      if (origin && [MediaViewerOrigin.ScheduledAlbum, MediaViewerOrigin.ScheduledInline].includes(origin)) {\n        chatMessages = selectChatScheduledMessages(global, chatId);\n      } else {\n        chatMessages = selectChatMessages(global, chatId);\n      }\n    }\n\n    let isLoadingMoreMedia = false;\n    const isOriginInline = origin === MediaViewerOrigin.Inline;\n    const isOriginAlbum = origin === MediaViewerOrigin.Album;\n    let collectedMessageIds: number[] | undefined;\n\n    if (chatId && threadId && messageId) {\n      if (withDynamicLoading && (isOriginInline || isOriginAlbum)) {\n        const currentSearch = selectCurrentChatMediaSearch(global);\n        isLoadingMoreMedia = Boolean(currentSearch?.isLoading);\n        const { foundIds } = (currentSearch?.currentSegment) || {};\n        collectedMessageIds = foundIds;\n      } else if (origin === MediaViewerOrigin.SharedMedia) {\n        const currentSearch = selectCurrentSharedMediaSearch(global);\n        const { foundIds } = (currentSearch && currentSearch.resultsByType && currentSearch.resultsByType.media) || {};\n        collectedMessageIds = foundIds;\n      } else if (isOriginInline || isOriginAlbum) {\n        const outlyingList = selectOutlyingListByMessageId(global, chatId, threadId, messageId);\n        collectedMessageIds = outlyingList || selectListedIds(global, chatId, threadId);\n      }\n    }\n\n    return {\n      chatId,\n      threadId,\n      messageId,\n      isChatWithSelf,\n      origin,\n      message,\n      chatMessages,\n      collectedMessageIds,\n      withAnimation,\n      isHidden,\n      shouldSkipHistoryAnimations,\n      withDynamicLoading,\n      standaloneMedia,\n      mediaIndex,\n      isLoadingMoreMedia,\n      isSynced,\n    };\n  },\n)(MediaViewer));\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ActiveDownloads, MessageListType } from '../../global/types';\nimport type { MediaViewerOrigin } from '../../types';\nimport type { MenuItemProps } from '../ui/MenuItem';\nimport type { MediaViewerItem } from './helpers/getViewableMedia';\n\nimport {\n  getIsDownloading,\n  getMediaFilename,\n  getMediaFormat,\n  getMediaHash,\n  isUserId,\n} from '../../global/helpers';\nimport {\n  selectActiveDownloads,\n  selectAllowedMessageActions,\n  selectCurrentMessageList,\n  selectIsChatProtected,\n  selectIsMessageProtected,\n  selectTabState,\n} from '../../global/selectors';\nimport getViewableMedia from './helpers/getViewableMedia';\n\nimport useAppLayout from '../../hooks/useAppLayout';\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useMediaWithLoadProgress from '../../hooks/useMediaWithLoadProgress';\nimport useOldLang from '../../hooks/useOldLang';\nimport useZoomChange from './hooks/useZoomChangeSignal';\n\nimport DeleteMessageModal from '../common/DeleteMessageModal';\nimport DeleteProfilePhotoModal from '../common/DeleteProfilePhotoModal';\nimport Button from '../ui/Button';\nimport DropdownMenu from '../ui/DropdownMenu';\nimport MenuItem from '../ui/MenuItem';\nimport ProgressSpinner from '../ui/ProgressSpinner';\n\nimport './MediaViewerActions.scss';\n\ntype StateProps = {\n  activeDownloads: ActiveDownloads;\n  isProtected?: boolean;\n  isChatProtected?: boolean;\n  canDelete?: boolean;\n  canUpdate?: boolean;\n  messageListType?: MessageListType;\n  origin?: MediaViewerOrigin;\n};\n\ntype OwnProps = {\n  item?: MediaViewerItem;\n  mediaData?: string;\n  isVideo: boolean;\n  canUpdateMedia?: boolean;\n  canReport?: boolean;\n  activeDownloads?: ActiveDownloads;\n  onReport: NoneToVoidFunction;\n  onBeforeDelete: NoneToVoidFunction;\n  onCloseMediaViewer: NoneToVoidFunction;\n  onForward: NoneToVoidFunction;\n};\n\nconst MediaViewerActions: FC<OwnProps & StateProps> = ({\n  item,\n  mediaData,\n  isVideo,\n  isChatProtected,\n  isProtected,\n  canReport,\n  canDelete,\n  canUpdate,\n  messageListType,\n  activeDownloads,\n  origin,\n  onReport,\n  onCloseMediaViewer,\n  onBeforeDelete,\n  onForward,\n}) => {\n  const [isDeleteModalOpen, openDeleteModal, closeDeleteModal] = useFlag(false);\n  const [getZoomChange, setZoomChange] = useZoomChange();\n  const { isMobile } = useAppLayout();\n\n  const {\n    downloadMedia,\n    cancelMediaDownload,\n    updateProfilePhoto,\n    updateChatPhoto,\n    openMediaViewer,\n  } = getActions();\n\n  const isMessage = item?.type === 'message';\n\n  const { media } = getViewableMedia(item) || {};\n  const fileName = media && getMediaFilename(media);\n  const isDownloading = media && getIsDownloading(activeDownloads, media);\n\n  const { loadProgress: downloadProgress } = useMediaWithLoadProgress(\n    media && getMediaHash(media, 'download'),\n    !isDownloading,\n    media && getMediaFormat(media, 'download'),\n  );\n\n  const handleDownloadClick = useLastCallback(() => {\n    if (!media) return;\n\n    if (isDownloading) {\n      cancelMediaDownload({ media });\n    } else {\n      downloadMedia({ media });\n    }\n  });\n\n  const handleZoomOut = useLastCallback(() => {\n    const zoomChange = getZoomChange();\n    const change = zoomChange < 0 ? zoomChange : 0;\n    setZoomChange(change - 1);\n  });\n\n  const handleZoomIn = useLastCallback(() => {\n    const zoomChange = getZoomChange();\n    const change = zoomChange > 0 ? zoomChange : 0;\n    setZoomChange(change + 1);\n  });\n\n  const handleUpdate = useLastCallback(() => {\n    if (item?.type !== 'avatar') return;\n    const { avatarOwner, mediaIndex } = item;\n    const avatarPhoto = avatarOwner.photos?.[mediaIndex]!;\n    if (isUserId(avatarOwner.id)) {\n      updateProfilePhoto({ photo: avatarPhoto });\n    } else {\n      updateChatPhoto({ chatId: avatarOwner.id, photo: avatarPhoto });\n    }\n\n    openMediaViewer({\n      origin: origin!,\n      chatId: avatarOwner.id,\n      mediaIndex: 0,\n      isAvatarView: true,\n    }, {\n      forceOnHeavyAnimation: true,\n    });\n  });\n\n  const lang = useOldLang();\n\n  const MenuButton: FC<{ onTrigger: () => void; isOpen?: boolean }> = useMemo(() => {\n    return ({ onTrigger, isOpen }) => (\n      <Button\n        round\n        size=\"smaller\"\n        color=\"translucent\"\n        className={isOpen ? 'active' : undefined}\n        onClick={onTrigger}\n        ariaLabel=\"More actions\"\n      >\n        <i className=\"icon icon-more\" />\n      </Button>\n    );\n  }, []);\n\n  function renderDeleteModals() {\n    if (item?.type === 'message') {\n      return (\n        <DeleteMessageModal\n          isOpen={isDeleteModalOpen}\n          isSchedule={messageListType === 'scheduled'}\n          onClose={closeDeleteModal}\n          onConfirm={onBeforeDelete}\n          message={item.message}\n        />\n      );\n    }\n    if (item?.type === 'avatar') {\n      return (\n        <DeleteProfilePhotoModal\n          isOpen={isDeleteModalOpen}\n          onClose={closeDeleteModal}\n          onConfirm={onBeforeDelete}\n          profileId={item.avatarOwner.id}\n          photo={item.avatarOwner.photos![item.mediaIndex!]}\n        />\n      );\n    }\n\n    return undefined;\n  }\n\n  function renderDownloadButton() {\n    if (isProtected || item?.type === 'standalone') {\n      return undefined;\n    }\n\n    return isVideo ? (\n      <Button\n        round\n        size=\"smaller\"\n        color=\"translucent-white\"\n        ariaLabel={lang('AccActionDownload')}\n        onClick={handleDownloadClick}\n      >\n        {isDownloading ? (\n          <ProgressSpinner progress={downloadProgress} size=\"s\" onClick={handleDownloadClick} />\n        ) : (\n          <i className=\"icon icon-download\" />\n        )}\n      </Button>\n    ) : (\n      <Button\n        href={mediaData}\n        download={fileName}\n        round\n        size=\"smaller\"\n        color=\"translucent-white\"\n        ariaLabel={lang('AccActionDownload')}\n      >\n        <i className=\"icon icon-download\" />\n      </Button>\n    );\n  }\n\n  if (isMobile) {\n    const menuItems: MenuItemProps[] = [];\n    if (isMessage && item.message.isForwardingAllowed && !item.message.content.action && !isChatProtected) {\n      menuItems.push({\n        icon: 'forward',\n        onClick: onForward,\n        children: lang('Forward'),\n      });\n    }\n    if (!isProtected) {\n      if (isVideo) {\n        menuItems.push({\n          icon: isDownloading ? 'close' : 'download',\n          onClick: handleDownloadClick,\n          children: isDownloading ? `${Math.round(downloadProgress * 100)}% Downloading...` : 'Download',\n        });\n      } else {\n        menuItems.push({\n          icon: 'download',\n          href: mediaData,\n          download: fileName,\n          children: lang('AccActionDownload'),\n        });\n      }\n    }\n\n    if (canReport) {\n      menuItems.push({\n        icon: 'flag',\n        onClick: onReport,\n        children: lang('ReportPeer.Report'),\n      });\n    }\n\n    if (canUpdate) {\n      menuItems.push({\n        icon: 'copy-media',\n        onClick: handleUpdate,\n        children: lang('ProfilePhoto.SetMainPhoto'),\n      });\n    }\n\n    if (canDelete) {\n      menuItems.push({\n        icon: 'delete',\n        onClick: openDeleteModal,\n        children: lang('Delete'),\n        destructive: true,\n      });\n    }\n\n    if (menuItems.length === 0) {\n      return undefined;\n    }\n\n    return (\n      <div className=\"MediaViewerActions-mobile\">\n        <DropdownMenu\n          trigger={MenuButton}\n          positionX=\"right\"\n        >\n          {menuItems.map(({\n            icon, onClick, href, download, children, destructive,\n          }) => (\n            <MenuItem\n              key={icon}\n              icon={icon}\n              href={href}\n              download={download}\n              onClick={onClick}\n              destructive={destructive}\n            >\n              {children}\n            </MenuItem>\n          ))}\n        </DropdownMenu>\n        {isDownloading && <ProgressSpinner progress={downloadProgress} size=\"s\" noCross />}\n        {canDelete && renderDeleteModals()}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"MediaViewerActions\">\n      {isMessage && item.message.isForwardingAllowed && !isChatProtected && (\n        <Button\n          round\n          size=\"smaller\"\n          color=\"translucent-white\"\n          ariaLabel={lang('Forward')}\n          onClick={onForward}\n        >\n          <i className=\"icon icon-forward\" />\n        </Button>\n      )}\n      {renderDownloadButton()}\n      <Button\n        round\n        size=\"smaller\"\n        color=\"translucent-white\"\n        ariaLabel={lang('MediaZoomOut')}\n        onClick={handleZoomOut}\n      >\n        <i className=\"icon icon-zoom-out\" />\n      </Button>\n      <Button\n        round\n        size=\"smaller\"\n        color=\"translucent-white\"\n        ariaLabel={lang('MediaZoomIn')}\n        onClick={handleZoomIn}\n      >\n        <i className=\"icon icon-zoom-in\" />\n      </Button>\n      {canReport && (\n        <Button\n          round\n          size=\"smaller\"\n          color=\"translucent-white\"\n          ariaLabel={lang(isVideo ? 'PeerInfo.ReportProfileVideo' : 'PeerInfo.ReportProfilePhoto')}\n          onClick={onReport}\n        >\n          <i className=\"icon icon-flag\" />\n        </Button>\n      )}\n      {canUpdate && (\n        <Button\n          round\n          size=\"smaller\"\n          color=\"translucent-white\"\n          ariaLabel={lang('ProfilePhoto.SetMainPhoto')}\n          onClick={handleUpdate}\n        >\n          <i className=\"icon icon-copy-media\" />\n        </Button>\n      )}\n      {canDelete && (\n        <Button\n          round\n          size=\"smaller\"\n          color=\"translucent-white\"\n          ariaLabel={lang('Delete')}\n          onClick={openDeleteModal}\n        >\n          <i className=\"icon icon-delete\" />\n        </Button>\n      )}\n      <Button\n        round\n        size=\"smaller\"\n        color=\"translucent-white\"\n        ariaLabel={lang('Close')}\n        onClick={onCloseMediaViewer}\n      >\n        <i className=\"icon icon-close\" />\n      </Button>\n      {canDelete && renderDeleteModals()}\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, {\n    item, canUpdateMedia,\n  }): StateProps => {\n    const tabState = selectTabState(global);\n    const { origin } = tabState.mediaViewer;\n\n    const message = item?.type === 'message' ? item.message : undefined;\n    const avatarOwner = item?.type === 'avatar' ? item.avatarOwner : undefined;\n    const avatarPhoto = avatarOwner?.photos?.[item!.mediaIndex!];\n\n    const currentMessageList = selectCurrentMessageList(global);\n    const { threadId } = selectCurrentMessageList(global) || {};\n    const isProtected = selectIsMessageProtected(global, message);\n    const activeDownloads = selectActiveDownloads(global);\n    const isChatProtected = message && selectIsChatProtected(global, message?.chatId);\n    const { canDelete: canDeleteMessage } = (threadId\n      && message && selectAllowedMessageActions(global, message, threadId)) || {};\n    const isCurrentAvatar = avatarPhoto && (avatarPhoto.id === avatarOwner?.avatarHash);\n    const canDeleteAvatar = canUpdateMedia && !!avatarPhoto;\n    const canDelete = canDeleteMessage || canDeleteAvatar;\n    const canUpdate = canUpdateMedia && !!avatarPhoto && !isCurrentAvatar;\n    const messageListType = currentMessageList?.type;\n\n    return {\n      activeDownloads,\n      isProtected,\n      isChatProtected,\n      canDelete,\n      canUpdate,\n      messageListType,\n      origin,\n    };\n  },\n)(MediaViewerActions));\n","import React, { memo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type {\n  ApiDimensions, ApiMessage,\n} from '../../api/types';\nimport type { MediaViewerOrigin } from '../../types';\nimport type { MediaViewerItem } from './helpers/getViewableMedia';\n\nimport {\n  selectIsMessageProtected, selectTabState,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport stopEvent from '../../util/stopEvent';\nimport { ARE_WEBCODECS_SUPPORTED, IS_TOUCH_ENV } from '../../util/windowEnvironment';\nimport { calculateMediaViewerDimensions } from '../common/helpers/mediaDimensions';\nimport { renderMessageText } from '../common/helpers/renderMessageText';\nimport getViewableMedia from './helpers/getViewableMedia';\n\nimport useAppLayout from '../../hooks/useAppLayout';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useOldLang from '../../hooks/useOldLang';\nimport useControlsSignal from './hooks/useControlsSignal';\nimport { useMediaProps } from './hooks/useMediaProps';\n\nimport Spinner from '../ui/Spinner';\nimport MediaViewerFooter from './MediaViewerFooter';\nimport VideoPlayer from './VideoPlayer';\n\nimport './MediaViewerContent.scss';\n\ntype OwnProps = {\n  item: MediaViewerItem;\n  isActive?: boolean;\n  withAnimation?: boolean;\n  isMoving?: boolean;\n  onClose: () => void;\n  onFooterClick: () => void;\n};\n\ntype StateProps = {\n  textMessage?: ApiMessage;\n  origin?: MediaViewerOrigin;\n  isProtected?: boolean;\n  volume: number;\n  isMuted: boolean;\n  isHidden?: boolean;\n  playbackRate: number;\n};\n\nconst ANIMATION_DURATION = 350;\nconst MOBILE_VERSION_CONTROL_WIDTH = 350;\n\nconst MediaViewerContent = ({\n  item,\n  isActive,\n  textMessage,\n  origin,\n  withAnimation,\n  isProtected,\n  volume,\n  playbackRate,\n  isMuted,\n  isHidden,\n  isMoving,\n  onClose,\n  onFooterClick,\n}: OwnProps & StateProps) => {\n  const lang = useOldLang();\n\n  const isAvatar = item.type === 'avatar';\n  const { media } = getViewableMedia(item) || {};\n\n  const {\n    isVideo,\n    isPhoto,\n    bestImageData,\n    bestData,\n    dimensions,\n    isGif,\n    isLocal,\n    isVideoAvatar,\n    mediaSize,\n    loadProgress,\n  } = useMediaProps({\n    media, isAvatar, origin, delay: withAnimation ? ANIMATION_DURATION : false,\n  });\n\n  const [, toggleControls] = useControlsSignal();\n\n  const isOpen = Boolean(media);\n  const { isMobile } = useAppLayout();\n\n  const toggleControlsOnMove = useLastCallback(() => {\n    toggleControls(true);\n  });\n\n  if (!media) return undefined;\n\n  if (item.type !== 'message') {\n    if (!isVideoAvatar) {\n      return (\n        <div key={media.id} className=\"MediaViewerContent\">\n          {renderPhoto(\n            bestData,\n            calculateMediaViewerDimensions(dimensions!, false),\n            !isMobile && !isProtected,\n            isProtected,\n          )}\n        </div>\n      );\n    } else {\n      return (\n        <div key={media.id} className=\"MediaViewerContent\">\n          <VideoPlayer\n            key={media.id}\n            url={bestData}\n            isGif\n            posterData={bestImageData}\n            posterSize={calculateMediaViewerDimensions(dimensions!, false, true)}\n            loadProgress={loadProgress}\n            fileSize={mediaSize!}\n            isMediaViewerOpen={isOpen && isActive}\n            isProtected={isProtected}\n            isPreviewDisabled={!ARE_WEBCODECS_SUPPORTED || isLocal}\n            noPlay={!isActive}\n            onClose={onClose}\n            isMuted\n            shouldCloseOnClick\n            volume={0}\n            isClickDisabled={isMoving}\n            playbackRate={1}\n          />\n        </div>\n      );\n    }\n  }\n\n  if (!textMessage) return undefined;\n  const textParts = textMessage.content.action?.type === 'suggestProfilePhoto'\n    ? lang('Conversation.SuggestedPhotoTitle')\n    : renderMessageText({ message: textMessage, forcePlayback: true, isForMediaViewer: true });\n\n  const hasFooter = Boolean(textParts);\n  const posterSize = calculateMediaViewerDimensions(dimensions!, hasFooter, isVideo);\n  const isForceMobileVersion = isMobile || shouldForceMobileVersion(posterSize);\n\n  return (\n    <div\n      className={buildClassName('MediaViewerContent', hasFooter && 'has-footer')}\n      onMouseMove={isForceMobileVersion && !IS_TOUCH_ENV ? toggleControlsOnMove : undefined}\n    >\n      {isPhoto && renderPhoto(\n        bestData,\n        posterSize,\n        !isMobile && !isProtected,\n        isProtected,\n      )}\n      {isVideo && (!isActive ? renderVideoPreview(\n        bestImageData,\n        posterSize,\n        !isMobile && !isProtected,\n        isProtected,\n      ) : (\n        <VideoPlayer\n          key={media.id}\n          url={bestData}\n          isGif={isGif}\n          posterData={bestImageData}\n          posterSize={posterSize}\n          loadProgress={loadProgress}\n          fileSize={mediaSize!}\n          isMediaViewerOpen={isOpen && isActive}\n          noPlay={!isActive}\n          isPreviewDisabled={!ARE_WEBCODECS_SUPPORTED || isLocal}\n          onClose={onClose}\n          isMuted={isMuted}\n          isHidden={isHidden}\n          isForceMobileVersion={isForceMobileVersion}\n          isProtected={isProtected}\n          volume={volume}\n          isClickDisabled={isMoving}\n          playbackRate={playbackRate}\n        />\n      ))}\n      {textParts && (\n        <MediaViewerFooter\n          text={textParts}\n          onClick={onFooterClick}\n          isProtected={isProtected}\n          isForceMobileVersion={isForceMobileVersion}\n          isForVideo={isVideo && !isGif}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { item }): StateProps => {\n    const {\n      volume,\n      isMuted,\n      playbackRate,\n      isHidden,\n      origin,\n    } = selectTabState(global).mediaViewer;\n    const textMessage = item.type === 'message' ? item.message : undefined;\n\n    return {\n      origin,\n      textMessage,\n      isProtected: textMessage && selectIsMessageProtected(global, textMessage),\n      volume,\n      isMuted,\n      isHidden,\n      playbackRate,\n    };\n  },\n)(MediaViewerContent));\n\nfunction renderPhoto(blobUrl?: string, imageSize?: ApiDimensions, canDrag?: boolean, isProtected?: boolean) {\n  return blobUrl\n    ? (\n      <div style=\"position: relative;\">\n        {isProtected && <div onContextMenu={stopEvent} className=\"protector\" />}\n        <img\n          src={blobUrl}\n          alt=\"\"\n          className={buildClassName(isProtected && 'is-protected')}\n          style={imageSize ? `width: ${imageSize.width}px` : ''}\n          draggable={Boolean(canDrag)}\n        />\n      </div>\n    )\n    : (\n      <div\n        className=\"spinner-wrapper\"\n        style={imageSize ? `width: ${imageSize.width}px` : ''}\n      >\n        <Spinner color=\"white\" />\n      </div>\n    );\n}\n\nfunction renderVideoPreview(blobUrl?: string, imageSize?: ApiDimensions, canDrag?: boolean, isProtected?: boolean) {\n  const wrapperStyle = imageSize && `width: ${imageSize.width}px; height: ${imageSize.height}px`;\n  const videoStyle = `background-image: url(${blobUrl})`;\n  return blobUrl\n    ? (\n      <div\n        className=\"VideoPlayer\"\n      >\n        {isProtected && <div onContextMenu={stopEvent} className=\"protector\" />}\n        <div\n          style={wrapperStyle}\n        >\n          {/* eslint-disable-next-line jsx-a11y/media-has-caption */}\n          <video\n            style={videoStyle}\n            className={buildClassName(isProtected && 'is-protected')}\n            draggable={Boolean(canDrag)}\n          />\n        </div>\n      </div>\n    )\n    : (\n      <div\n        className=\"spinner-wrapper\"\n        style={imageSize ? `width: ${imageSize.width}px` : ''}\n      >\n        <Spinner color=\"white\" />\n      </div>\n    );\n}\n\nfunction shouldForceMobileVersion(posterSize?: { width: number; height: number }) {\n  if (!posterSize) return false;\n  return posterSize.width < MOBILE_VERSION_CONTROL_WIDTH;\n}\n","import type { FC } from '../../lib/teact/teact';\nimport React, { useEffect, useState } from '../../lib/teact/teact';\n\nimport type { TextPart } from '../../types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { throttle } from '../../util/schedulers';\nimport { IS_TOUCH_ENV } from '../../util/windowEnvironment';\nimport { REM } from '../common/helpers/mediaDimensions';\n\nimport useAppLayout from '../../hooks/useAppLayout';\nimport useDerivedState from '../../hooks/useDerivedState';\nimport useControlsSignal from './hooks/useControlsSignal';\n\nimport './MediaViewerFooter.scss';\n\nconst RESIZE_THROTTLE_MS = 500;\n\ntype OwnProps = {\n  text: TextPart | TextPart[];\n  onClick: () => void;\n  isForVideo: boolean;\n  isForceMobileVersion?: boolean;\n  isProtected?: boolean;\n};\n\nconst MediaViewerFooter: FC<OwnProps> = ({\n  text = '', isForVideo, onClick, isProtected, isForceMobileVersion,\n}) => {\n  const [isMultiline, setIsMultiline] = useState(false);\n  const { isMobile } = useAppLayout();\n  const [getIsVisible] = useControlsSignal();\n  const isHidden = useDerivedState(() => (IS_TOUCH_ENV ? !getIsVisible() : false), [getIsVisible]);\n\n  useEffect(() => {\n    const footerContent = document.querySelector('.MediaViewerFooter .media-text') as HTMLDivElement | null;\n\n    const checkIsMultiline = () => {\n      const height = footerContent ? footerContent.clientHeight : 0;\n\n      setIsMultiline(height > REM * 2);\n    };\n\n    // First run for initial detection of multiline footer text\n    checkIsMultiline();\n\n    const handleResize = throttle(checkIsMultiline, RESIZE_THROTTLE_MS, true);\n\n    window.addEventListener('resize', handleResize, false);\n\n    return () => {\n      window.removeEventListener('resize', handleResize, false);\n    };\n  }, []);\n\n  function stopEvent(e: React.MouseEvent<HTMLDivElement, MouseEvent>) {\n    if (text) {\n      e.stopPropagation();\n    }\n  }\n\n  const classNames = buildClassName(\n    'MediaViewerFooter',\n    isForVideo && 'is-for-video',\n    isHidden && 'is-hidden',\n    isProtected && 'is-protected',\n    isForceMobileVersion && 'mobile',\n  );\n\n  return (\n    <div className={classNames} onClick={stopEvent}>\n      {Boolean(text) && (\n        <div className=\"media-viewer-footer-content\" onClick={!isMobile ? onClick : undefined}>\n          <p className={`media-text custom-scroll allow-selection ${isMultiline ? 'multiline' : ''}`} dir=\"auto\">\n            {text}\n          </p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default MediaViewerFooter;\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useLayoutEffect, useMemo, useRef, useSignal, useState,\n} from '../../lib/teact/teact';\n\nimport type { MediaViewerOrigin, ThreadId } from '../../types';\nimport type { RealTouchEvent } from '../../util/captureEvents';\nimport type { MediaViewerItem } from './helpers/getViewableMedia';\n\nimport { animateNumber, timingFunctions } from '../../util/animation';\nimport buildClassName from '../../util/buildClassName';\nimport {\n  captureEvents,\n  IOS_SCREEN_EDGE_THRESHOLD,\n  SWIPE_DIRECTION_THRESHOLD,\n  SWIPE_DIRECTION_TOLERANCE,\n} from '../../util/captureEvents';\nimport { clamp, isBetween, round } from '../../util/math';\nimport { debounce } from '../../util/schedulers';\nimport { IS_IOS, IS_TOUCH_ENV } from '../../util/windowEnvironment';\n\nimport useTimeout from '../../hooks/schedulers/useTimeout';\nimport useDebouncedCallback from '../../hooks/useDebouncedCallback';\nimport useDerivedState from '../../hooks/useDerivedState';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useOldLang from '../../hooks/useOldLang';\nimport { useSignalRef } from '../../hooks/useSignalRef';\nimport { useFullscreenStatus } from '../../hooks/window/useFullscreen';\nimport useWindowSize from '../../hooks/window/useWindowSize';\nimport useControlsSignal from './hooks/useControlsSignal';\nimport useZoomChange from './hooks/useZoomChangeSignal';\n\nimport MediaViewerContent from './MediaViewerContent';\n\nimport './MediaViewerSlides.scss';\n\nconst { easeOutCubic, easeOutQuart } = timingFunctions;\n\ntype OwnProps = {\n  item?: MediaViewerItem;\n  isLoadingMoreMedia?: boolean;\n  isSynced?: boolean;\n  isVideo?: boolean;\n  isGif?: boolean;\n  isPhoto?: boolean;\n  isOpen?: boolean;\n  chatId?: string;\n  threadId?: ThreadId;\n  avatarOwnerId?: string;\n  origin?: MediaViewerOrigin;\n  withAnimation?: boolean;\n  isHidden?: boolean;\n  hasFooter?: boolean;\n  getNextItem: (from: MediaViewerItem, direction: number) => MediaViewerItem | undefined;\n  selectItem: (item: MediaViewerItem) => void;\n  loadMoreItemsIfNeeded: (item: MediaViewerItem) => void;\n  onFooterClick: () => void;\n  onClose: () => void;\n};\n\nconst SWIPE_X_THRESHOLD = 50;\nconst SWIPE_Y_THRESHOLD = 50;\nconst SLIDES_GAP = IS_TOUCH_ENV ? 40 : 0;\nconst ANIMATION_DURATION = 350;\nconst DEBOUNCE_SELECT_MEDIA = 350;\nconst DEBOUNCE_SWIPE = 500;\nconst DEBOUNCE_ACTIVE = 800;\nconst DOUBLE_TAP_ZOOM = 3;\nconst CLICK_Y_THRESHOLD = 80;\nconst HEADER_HEIGHT = 60;\nconst MAX_ZOOM = 4;\nconst MIN_ZOOM = 1;\nlet cancelAnimation: Function | undefined;\nlet cancelZoomAnimation: Function | undefined;\n\ntype Transform = {\n  x: number;\n  y: number;\n  scale: number;\n};\n\nenum SwipeDirection {\n  Horizontal,\n  Vertical,\n}\n\nconst MediaViewerSlides: FC<OwnProps> = ({\n  item,\n  isVideo,\n  isGif,\n  isOpen,\n  withAnimation,\n  isHidden,\n  isLoadingMoreMedia,\n  isSynced,\n  loadMoreItemsIfNeeded,\n  getNextItem,\n  selectItem,\n  onClose,\n  onFooterClick,\n}) => {\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const activeSlideRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const leftSlideRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const rightSlideRef = useRef<HTMLDivElement>(null);\n  const lastTransformRef = useRef<Transform>({ x: 0, y: 0, scale: 1 });\n  const swipeDirectionRef = useRef<SwipeDirection | undefined>(undefined);\n  const initialContentRectRef = useRef<DOMRect | undefined>(undefined);\n  const isReleasedRef = useRef(false);\n  const [isActive, setIsActive] = useState(true);\n  const [getZoomChange] = useZoomChange();\n  const prevZoomChangeRef = useRef(getZoomChange());\n  const isFullscreen = useFullscreenStatus();\n  const [isMouseDown, setIsMouseDown] = useState(false);\n  const [getTransform, setTransform] = useSignal<Transform>({ x: 0, y: 0, scale: 1 });\n  const transformRef = useSignalRef(getTransform);\n  const [getActiveItem, setActiveItem] = useSignal<MediaViewerItem | undefined>(item);\n  const activeItemRef = useSignalRef(getActiveItem);\n  const isScaled = useDerivedState(() => getTransform().scale !== 1, [getTransform]);\n  const activeItem = useDerivedState(getActiveItem);\n  const { height: windowHeight, width: windowWidth, isResizing } = useWindowSize();\n  const [getControlsVisible, setControlsVisible, lockControls] = useControlsSignal();\n\n  const lang = useOldLang();\n\n  useHistoryBack({\n    isActive: isOpen,\n    onBack: onClose,\n    shouldBeReplaced: true,\n  });\n\n  const selectItemDebounced = useDebouncedCallback(selectItem, [selectItem], DEBOUNCE_SELECT_MEDIA, true);\n  const clearSwipeDirectionDebounced = useDebouncedCallback(() => {\n    swipeDirectionRef.current = undefined;\n  }, [], DEBOUNCE_SWIPE, true);\n\n  const setIsActiveDebounced = useDebouncedCallback((value) => setIsActive(value), [], DEBOUNCE_ACTIVE, true);\n\n  const shouldCloseOnVideo = Boolean(isGif && !IS_IOS);\n  const clickXThreshold = IS_TOUCH_ENV ? 40 : windowWidth / 10;\n\n  const handleControlsVisibility = useLastCallback((e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n    if (!IS_TOUCH_ENV) return;\n    const isFooter = windowHeight - e.pageY < CLICK_Y_THRESHOLD;\n    if (!isFooter && e.pageX < clickXThreshold) return;\n    if (!isFooter && e.pageX > windowWidth - clickXThreshold) return;\n    setControlsVisible(!getControlsVisible());\n  });\n\n  useTimeout(() => setControlsVisible(true), ANIMATION_DURATION);\n\n  useEffect(() => {\n    const { scale, x, y } = transformRef.current;\n    // Only update active media if slide is in default position\n    if (x === 0 && y === 0 && scale === 1) {\n      setActiveItem(item);\n    }\n  }, [item, setActiveItem, transformRef]);\n\n  useEffect(() => {\n    if (!isSynced || !activeItem || isLoadingMoreMedia) return;\n    loadMoreItemsIfNeeded(activeItem);\n  }, [activeItem, loadMoreItemsIfNeeded, isSynced, isLoadingMoreMedia]);\n\n  useLayoutEffect(() => {\n    const { x, y, scale } = getTransform();\n    lockControls(scale !== 1);\n    if (leftSlideRef.current) {\n      leftSlideRef.current.style.transform = getTransformStyle(-windowWidth + x - SLIDES_GAP);\n    }\n    if (activeSlideRef.current) {\n      activeSlideRef.current.style.transform = getTransformStyle(x, y, scale);\n    }\n    if (rightSlideRef.current) {\n      rightSlideRef.current.style.transform = getTransformStyle(windowWidth + x + SLIDES_GAP);\n    }\n  }, [getTransform, lockControls, windowWidth]);\n\n  useEffect(() => {\n    if (!containerRef.current || activeItemRef.current === undefined || isHidden || isFullscreen) {\n      return undefined;\n    }\n    let lastTransform = lastTransformRef.current;\n    const lastDragOffset = {\n      x: 0,\n      y: 0,\n    };\n    const lastZoomCenter = {\n      x: 0,\n      y: 0,\n    };\n    const panDelta = {\n      x: 0,\n      y: 0,\n    };\n    let lastGestureTime = Date.now();\n    let content: HTMLElement | null;\n    const setLastGestureTime = debounce(() => {\n      lastGestureTime = Date.now();\n    }, 500, false, true);\n\n    const changeSlide = (direction: number) => {\n      const cActiveItem = activeItemRef.current;\n      if (cActiveItem === undefined) return false;\n      const nextItem = getNextItem(cActiveItem, direction);\n      if (nextItem !== undefined) {\n        const offset = (windowWidth + SLIDES_GAP) * direction;\n        const transform = transformRef.current;\n        const x = transform.x + offset;\n        setIsActive(false);\n        setActiveItem(nextItem);\n        selectItemDebounced(nextItem);\n        setIsActiveDebounced(true);\n        lastTransform = { x: 0, y: 0, scale: 1 };\n        if (!withAnimation) {\n          setTransform(lastTransform);\n          return true;\n        }\n        cancelAnimation = animateNumber({\n          from: x,\n          to: 0,\n          duration: ANIMATION_DURATION,\n          timing: easeOutCubic,\n          onUpdate: (value) => setTransform({\n            y: 0,\n            x: value,\n            scale: 1,\n          }),\n        });\n        return true;\n      }\n      return false;\n    };\n\n    const changeSlideOnClick = (e: MouseEvent): [boolean, boolean] => {\n      const { scale } = transformRef.current;\n      if (scale !== 1) return [false, false];\n      if ((e.target as HTMLElement).closest('div.VideoPlayerControls')) {\n        return [false, false];\n      }\n      let direction = 0;\n      if (windowHeight - e.pageY < CLICK_Y_THRESHOLD) {\n        return [false, false];\n      }\n      if (e.pageX < clickXThreshold) {\n        direction = -1;\n      } else if (e.pageX > windowWidth - clickXThreshold) {\n        direction = 1;\n      }\n      const hasNextSlide = changeSlide(direction);\n      const isInThreshold = direction !== 0;\n      return [isInThreshold, hasNextSlide];\n    };\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      const { scale } = transformRef.current;\n      if (scale !== 1) return;\n      switch (e.key) {\n        case 'Left': // IE/Edge specific value\n        case 'ArrowLeft':\n          changeSlide(-1);\n          break;\n\n        case 'Right': // IE/Edge specific value\n        case 'ArrowRight':\n          changeSlide(1);\n          break;\n      }\n    };\n\n    const calculateOffsetBoundaries = (\n      { x, y, scale }: Transform,\n      offsetTop = 0,\n    ): [Transform, boolean, boolean] => {\n      const initialContentRect = initialContentRectRef.current;\n      if (!initialContentRect) return [{ x, y, scale }, true, true];\n      // Get current content boundaries\n      let inBoundsX = true;\n      let inBoundsY = true;\n\n      const centerX = (windowWidth - windowWidth * scale) / 2;\n      const centerY = (windowHeight - windowHeight * scale) / 2;\n\n      // If content is outside window we calculate offset boundaries\n      // based on initial content rect and current scale\n      const minOffsetX = Math.max(-initialContentRect.left * scale, centerX);\n      const maxOffsetX = windowWidth - initialContentRect.right * scale;\n      inBoundsX = isBetween(x, maxOffsetX, minOffsetX);\n      x = clamp(x, maxOffsetX, minOffsetX);\n\n      const minOffsetY = Math.max(-initialContentRect.top * scale + offsetTop, centerY);\n      const maxOffsetY = windowHeight - initialContentRect.bottom * scale;\n      inBoundsY = isBetween(y, maxOffsetY, minOffsetY);\n      y = clamp(y, maxOffsetY, minOffsetY);\n\n      return [{ x, y, scale }, inBoundsX, inBoundsY];\n    };\n\n    const onRelease = (e: MouseEvent | RealTouchEvent | WheelEvent) => {\n      // This allows to prevent onRelease triggered by debounced wheel event\n      // after onRelease was triggered manually in onDrag\n      if (isReleasedRef.current) {\n        isReleasedRef.current = false;\n        return;\n      }\n      if (e.type === 'mouseup') {\n        setIsMouseDown(false);\n      }\n      const transform = transformRef.current;\n      const { y, scale } = transform;\n      let x = transform.x;\n      const absX = Math.abs(x);\n      const absY = Math.abs(y);\n\n      clearSwipeDirectionDebounced();\n      setIsActiveDebounced(true);\n\n      // If scale is less than 1 we need to bounce back\n      if (scale < 1) {\n        lastTransform = { x: 0, y: 0, scale: 1 };\n        cancelAnimation = animateNumber({\n          from: [x, y, scale],\n          to: [0, 0, 1],\n          duration: ANIMATION_DURATION,\n          timing: easeOutCubic,\n          onUpdate: (value) => setTransform({\n            x: value[0],\n            y: value[1],\n            scale: value[2],\n          }),\n        });\n        return;\n      }\n      if (scale > 1) {\n        // Get current content boundaries\n        const s1 = Math.min(scale, MAX_ZOOM);\n        const scaleFactor = s1 / scale;\n\n        // Calculate new position based on the last zoom center to keep the zoom center\n        // at the same position when bouncing back from max zoom\n        let x1 = x * scaleFactor + (lastZoomCenter.x - scaleFactor * lastZoomCenter.x);\n        let y1 = y * scaleFactor + (lastZoomCenter.y - scaleFactor * lastZoomCenter.y);\n\n        // Arbitrary pan velocity coefficient\n        const k = 0.15;\n\n        // If scale didn't change, we need to add inertia to pan gesture\n        if (e.type !== 'wheel' && lastTransform.scale === scale) {\n          // Calculate user gesture velocity\n          const Vx = Math.abs(lastDragOffset.x) / (Date.now() - lastGestureTime);\n          const Vy = Math.abs(lastDragOffset.y) / (Date.now() - lastGestureTime);\n\n          // Add extra distance based on gesture velocity and last pan delta\n          x1 -= Math.abs(lastDragOffset.x) * Vx * k * panDelta.x;\n          y1 -= Math.abs(lastDragOffset.y) * Vy * k * panDelta.y;\n        }\n\n        [lastTransform] = calculateOffsetBoundaries({ x: x1, y: y1, scale: s1 }, HEADER_HEIGHT);\n        cancelAnimation = animateNumber({\n          from: [x, y, scale],\n          to: [lastTransform.x, lastTransform.y, lastTransform.scale],\n          duration: ANIMATION_DURATION,\n          timing: easeOutCubic,\n          onUpdate: (value) => setTransform({\n            x: value[0],\n            y: value[1],\n            scale: value[2],\n          }),\n        });\n        return;\n      }\n      lastTransform = {\n        x,\n        y,\n        scale,\n      };\n      if (absY >= SWIPE_Y_THRESHOLD) {\n        onClose();\n        return;\n      }\n      // Bounce back if vertical swipe is below threshold\n      if (absY > 0) {\n        cancelAnimation = animateNumber({\n          from: y,\n          to: 0,\n          duration: ANIMATION_DURATION,\n          timing: easeOutCubic,\n          onUpdate: (value) => setTransform({\n            x: 0,\n            y: value,\n            scale,\n          }),\n        });\n        return;\n      }\n      // Get horizontal swipe direction\n      const direction = x < 0 ? 1 : -1;\n      const cActiveItem = activeItemRef.current;\n      const nextItem = cActiveItem && getNextItem(cActiveItem, x < 0 ? 1 : -1);\n      // Get the direction of the last pan gesture.\n      // Could be different from the total horizontal swipe direction\n      // if user starts a swipe in one direction and then changes the direction\n      // we need to cancel slide transition\n      const dirX = panDelta.x < 0 ? -1 : 1;\n      if (nextItem !== undefined && absX >= SWIPE_X_THRESHOLD && direction === dirX) {\n        const offset = (windowWidth + SLIDES_GAP) * direction;\n        // If image is shifted by more than SWIPE_X_THRESHOLD,\n        // We shift everything by one screen width and then set new active message id\n        x += offset;\n        setActiveItem(nextItem);\n        selectItemDebounced(nextItem);\n      }\n      // Then we always return to the original position\n      cancelAnimation = animateNumber({\n        from: x,\n        to: 0,\n        duration: ANIMATION_DURATION,\n        timing: easeOutCubic,\n        onUpdate: (value) => setTransform({\n          y: 0,\n          x: value,\n          scale: scale ?? 1,\n        }),\n      });\n    };\n\n    const cleanup = captureEvents(containerRef.current, {\n      isNotPassive: true,\n      withNativeDrag: true,\n      excludedClosestSelector: '.MediaViewerFooter, .ZoomControls, .VideoPlayerControls',\n      minZoom: MIN_ZOOM,\n      maxZoom: MAX_ZOOM,\n      doubleTapZoom: DOUBLE_TAP_ZOOM,\n      withWheelDrag: true,\n      onCapture: (e) => {\n        if (checkIfControlTarget(e)) return;\n        const { x, y, scale } = transformRef.current;\n        if (e.type === 'mousedown') {\n          setIsMouseDown(true);\n          if (scale !== 1) {\n            e.preventDefault();\n            return;\n          }\n        }\n        lastGestureTime = Date.now();\n        if (x === 0 && y === 0 && scale === 1) {\n          if (!activeSlideRef.current) return;\n          content = activeSlideRef.current.querySelector('img, video');\n          if (!content) return;\n          // Store initial content rect, without transformations\n          initialContentRectRef.current = content.getBoundingClientRect();\n        }\n      },\n      onDrag: (event, captureEvent, {\n        dragOffsetX,\n        dragOffsetY,\n      }, cancelDrag) => {\n        if (isReleasedRef.current || checkIfControlTarget(event)) return;\n        // Avoid conflicts with swipe-to-back gestures\n        if (IS_IOS && captureEvent.type === 'touchstart') {\n          const { pageX } = (captureEvent as RealTouchEvent).touches[0];\n          if (pageX <= IOS_SCREEN_EDGE_THRESHOLD || pageX >= windowWidth - IOS_SCREEN_EDGE_THRESHOLD) {\n            return;\n          }\n        }\n        if (cancelAnimation) {\n          cancelAnimation();\n          cancelAnimation = undefined;\n        }\n        panDelta.x = lastDragOffset.x - dragOffsetX;\n        panDelta.y = lastDragOffset.y - dragOffsetY;\n        lastDragOffset.x = dragOffsetX;\n        lastDragOffset.y = dragOffsetY;\n        const absOffsetX = Math.abs(dragOffsetX);\n        const absOffsetY = Math.abs(dragOffsetY);\n        const { x, y, scale } = transformRef.current;\n\n        // If user is inactive but is still touching the screen\n        // we reset last gesture time\n        setLastGestureTime();\n\n        // If image is scaled we just need to pan it\n        if (scale !== 1) {\n          const x1 = lastTransform.x + dragOffsetX;\n          const y1 = lastTransform.y + dragOffsetY;\n          if (['wheel', 'mousemove'].includes(event.type)) {\n            const [transform, inBoundsX, inBoundsY] = calculateOffsetBoundaries({ x: x1, y: y1, scale }, HEADER_HEIGHT);\n            if (cancelDrag) cancelDrag(!inBoundsX, !inBoundsY);\n            setTransform(transform);\n            return;\n          }\n          if ('touches' in event && event.touches.length === 1) {\n            setTransform({\n              x: x1,\n              y: y1,\n              scale,\n            });\n          }\n          return;\n        }\n        if (event.type === 'mousemove') return;\n        if (swipeDirectionRef.current !== SwipeDirection.Vertical) {\n          // If user is swiping horizontally or horizontal shift is dominant\n          // we change only horizontal position\n          if (swipeDirectionRef.current === SwipeDirection.Horizontal\n            || Math.abs(x) > SWIPE_DIRECTION_THRESHOLD || absOffsetX / absOffsetY > SWIPE_DIRECTION_TOLERANCE) {\n            swipeDirectionRef.current = SwipeDirection.Horizontal;\n            setIsActive(false);\n            const limit = windowWidth + SLIDES_GAP;\n            const x1 = clamp(dragOffsetX, -limit, limit);\n            setTransform({\n              x: x1,\n              y: 0,\n              scale,\n            });\n            // We know that at this point onRelease will trigger slide change,\n            // We can trigger onRelease directly instead of waiting for the debounced callback\n            // to avoid a delay\n            if (event.type === 'wheel' && Math.abs(x1) > SWIPE_X_THRESHOLD * 2) {\n              onRelease(event);\n              isReleasedRef.current = true;\n            }\n            return;\n          }\n        }\n        // If vertical shift is dominant we change only vertical position\n        if (swipeDirectionRef.current === SwipeDirection.Vertical\n          || Math.abs(y) > SWIPE_DIRECTION_THRESHOLD || absOffsetY / absOffsetX > SWIPE_DIRECTION_TOLERANCE) {\n          swipeDirectionRef.current = SwipeDirection.Vertical;\n          const limit = windowHeight;\n          const y1 = clamp(dragOffsetY, -limit, limit);\n          setTransform({\n            x: 0,\n            y: y1,\n            scale,\n          });\n          if (event.type === 'wheel' && Math.abs(y1) > SWIPE_Y_THRESHOLD * 2) {\n            onRelease(event);\n            isReleasedRef.current = true;\n          }\n        }\n      },\n      onZoom: (e, {\n        zoom,\n        zoomFactor,\n        initialCenterX,\n        initialCenterY,\n        dragOffsetX,\n        dragOffsetY,\n        currentCenterX,\n        currentCenterY,\n      }) => {\n        if (cancelAnimation) cancelAnimation();\n        initialCenterX = initialCenterX || windowWidth / 2;\n        initialCenterY = initialCenterY || windowHeight / 2;\n        currentCenterX = currentCenterX || windowWidth / 2;\n        currentCenterY = currentCenterY || windowHeight / 2;\n\n        // Calculate current scale based on zoom factor and limits, add zoom margin for bounce back effect\n        const scale = zoom ?? clamp(lastTransform.scale * zoomFactor!, MIN_ZOOM * 0.5, MAX_ZOOM * 3);\n        const scaleFactor = scale / lastTransform.scale;\n        const offsetX = Math.abs(Math.min(lastTransform.x, 0));\n        const offsetY = Math.abs(Math.min(lastTransform.y, 0));\n\n        // Save last zoom center for bounce back effect\n        lastZoomCenter.x = currentCenterX;\n        lastZoomCenter.y = currentCenterY;\n\n        // Calculate new center relative to the shifted image\n        const scaledCenterX = offsetX + initialCenterX;\n        const scaledCenterY = offsetY + initialCenterY;\n\n        // Calculate how much we need to shift the image to keep the zoom center at the same position\n        const scaleOffsetX = (scaledCenterX - scaleFactor * scaledCenterX);\n        const scaleOffsetY = (scaledCenterY - scaleFactor * scaledCenterY);\n\n        const [transform] = calculateOffsetBoundaries({\n          x: lastTransform.x + scaleOffsetX + dragOffsetX,\n          y: lastTransform.y + scaleOffsetY + dragOffsetY,\n          scale,\n        });\n\n        setTransform(transform);\n      },\n      onClick(e) {\n        setIsMouseDown(false);\n        const [isInThreshold, hasNextSlide] = changeSlideOnClick(e as MouseEvent);\n        if (isInThreshold) {\n          e.preventDefault();\n          e.stopPropagation();\n          if (IS_TOUCH_ENV) return;\n          if (!hasNextSlide) onClose();\n          return;\n        }\n        if (lastTransform.scale !== 1 || IS_TOUCH_ENV) return;\n        if (shouldCloseOnVideo || !checkIfInsideSelector(e.target as HTMLElement, '.VideoPlayer')) {\n          onClose();\n        }\n      },\n      onDoubleClick(e, {\n        centerX,\n        centerY,\n      }) {\n        const [isInThreshold] = changeSlideOnClick(e as MouseEvent);\n        if (isInThreshold) {\n          e.preventDefault();\n          e.stopPropagation();\n          return;\n        }\n        if (!IS_TOUCH_ENV && e.type !== 'wheel') return;\n        const { x, y, scale } = transformRef.current;\n        // Calculate how much we need to shift the image to keep the zoom center at the same position\n        const scaleOffsetX = (centerX - DOUBLE_TAP_ZOOM * centerX);\n        const scaleOffsetY = (centerY - DOUBLE_TAP_ZOOM * centerY);\n        if (scale === 1) {\n          if (x !== 0 || y !== 0) return;\n          lastTransform = calculateOffsetBoundaries({\n            x: scaleOffsetX,\n            y: scaleOffsetY,\n            scale: DOUBLE_TAP_ZOOM,\n          })[0];\n        } else {\n          lastTransform = {\n            x: 0,\n            y: 0,\n            scale: 1,\n          };\n        }\n        cancelAnimation = animateNumber({\n          from: [x, y, scale],\n          to: [lastTransform.x, lastTransform.y, lastTransform.scale],\n          duration: ANIMATION_DURATION,\n          timing: easeOutCubic,\n          onUpdate: (value) => {\n            const transform = {\n              x: value[0],\n              y: value[1],\n              scale: value[2],\n            };\n            setTransform(transform);\n          },\n        });\n      },\n      onRelease,\n    });\n    document.addEventListener('keydown', handleKeyDown, false);\n    return () => {\n      cleanup();\n      document.removeEventListener('keydown', handleKeyDown, false);\n    };\n  },\n  [\n    activeItemRef,\n    clearSwipeDirectionDebounced,\n    clickXThreshold,\n    getNextItem,\n    isFullscreen,\n    isHidden,\n    onClose,\n    selectItemDebounced,\n    setActiveItem,\n    setIsActiveDebounced,\n    setTransform,\n    shouldCloseOnVideo,\n    transformRef,\n    windowHeight,\n    windowWidth,\n    withAnimation,\n  ]);\n\n  useEffect(() => {\n    const zoomChange = getZoomChange();\n    const hasZoomChanged = prevZoomChangeRef.current !== undefined\n      && prevZoomChangeRef.current !== zoomChange;\n    if (!containerRef.current || !hasZoomChanged || isHidden || isFullscreen) return;\n    prevZoomChangeRef.current = zoomChange;\n    const { scale } = transformRef.current;\n    const dir = zoomChange > 0 ? -1 : +1;\n    const minZoom = MIN_ZOOM * 0.6;\n    const maxZoom = MAX_ZOOM * 3;\n    let steps = 100;\n    let prevValue = 0;\n    if (scale <= minZoom && dir > 0) return;\n    if (scale >= maxZoom && dir < 0) return;\n    if (scale === 1 && dir > 0) steps = 20;\n    if (cancelZoomAnimation) cancelZoomAnimation();\n    cancelZoomAnimation = animateNumber({\n      from: dir,\n      to: dir * steps,\n      duration: ANIMATION_DURATION,\n      timing: easeOutQuart,\n      onUpdate: (value) => {\n        if (!containerRef.current) return;\n        const delta = round(value - prevValue, 2);\n        prevValue = value;\n        // To reuse existing logic we trigger wheel event for zoom buttons\n        const wheelEvent = new WheelEvent('wheel', {\n          deltaY: delta,\n          ctrlKey: true,\n        });\n        containerRef.current.dispatchEvent(wheelEvent);\n      },\n    });\n  }, [getZoomChange, isHidden, isFullscreen, transformRef]);\n\n  const [prevItem, nextItem] = useMemo(() => {\n    if (activeItem === undefined) return [undefined, undefined];\n    return [getNextItem(activeItem, -1), getNextItem(activeItem, 1)];\n  }, [activeItem, getNextItem]);\n\n  if (activeItem === undefined) return undefined;\n\n  const hasPrev = prevItem !== undefined;\n  const hasNext = nextItem !== undefined;\n  const isMoving = isMouseDown && isScaled;\n\n  return (\n    <div className=\"MediaViewerSlides\" ref={containerRef}>\n      <div className=\"MediaViewerSlide\" ref={leftSlideRef}>\n        {hasPrev && !isScaled && !isResizing && (\n          <MediaViewerContent\n            withAnimation={withAnimation}\n            isMoving={isMoving}\n            item={prevItem}\n            onClose={onClose}\n            onFooterClick={onFooterClick}\n          />\n        )}\n      </div>\n      <div\n        className={buildClassName(\n          'MediaViewerSlide',\n          'MediaViewerSlide--active',\n          isMoving && 'MediaViewerSlide--moving',\n        )}\n        onClick={handleControlsVisibility}\n        ref={activeSlideRef}\n      >\n        <MediaViewerContent\n          item={activeItem}\n          withAnimation={withAnimation}\n          isActive={isActive}\n          isMoving={isMoving}\n          onClose={onClose}\n          onFooterClick={onFooterClick}\n        />\n      </div>\n      <div className=\"MediaViewerSlide\" ref={rightSlideRef}>\n        {hasNext && !isScaled && !isResizing && (\n          <MediaViewerContent\n            withAnimation={withAnimation}\n            isMoving={isMoving}\n            item={nextItem}\n            onClose={onClose}\n            onFooterClick={onFooterClick}\n          />\n        )}\n      </div>\n      {hasPrev && !isScaled && !IS_TOUCH_ENV && (\n        <button\n          type=\"button\"\n          className={`navigation prev ${isVideo && !isGif && 'inline'}`}\n          aria-label={lang('AccDescrPrevious')}\n          dir={lang.isRtl ? 'rtl' : undefined}\n        />\n      )}\n      {hasNext && !isScaled && !IS_TOUCH_ENV && (\n        <button\n          type=\"button\"\n          className={`navigation next ${isVideo && !isGif && 'inline'}`}\n          aria-label={lang('Next')}\n          dir={lang.isRtl ? 'rtl' : undefined}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default memo(MediaViewerSlides);\n\nfunction getTransformStyle(x = 0, y = 0, scale = 1) {\n  return `translate3d(${x.toFixed(3)}px, ${y.toFixed(3)}px, 0px) scale(${scale.toFixed(3)})`;\n}\n\nfunction checkIfInsideSelector(element: HTMLElement, selector: string) {\n  if (!element) return false;\n  if (element.matches(selector)) return true;\n  return Boolean(element.closest(selector));\n}\n\nfunction checkIfControlTarget(e: TouchEvent | MouseEvent) {\n  const target = e.target as HTMLElement;\n  if (checkIfInsideSelector(target, '.VideoPlayerControls')) {\n    if (checkIfInsideSelector(\n      target,\n      '.play, .fullscreen, .volume, .volume-slider, .playback-rate, .playback-rate-menu, .SeekLine',\n    )) {\n      return true;\n    }\n    e.preventDefault();\n    return true;\n  }\n  return false;\n}\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useLayoutEffect,\n  useMemo, useRef, useSignal, useState,\n} from '../../lib/teact/teact';\n\nimport type { ApiDimensions } from '../../api/types';\nimport type { BufferedRange } from '../../hooks/useBuffering';\n\nimport { createVideoPreviews, getPreviewDimensions, renderVideoPreview } from '../../lib/video-preview/VideoPreview';\nimport { animateNumber } from '../../util/animation';\nimport buildClassName from '../../util/buildClassName';\nimport { captureEvents } from '../../util/captureEvents';\nimport { formatMediaDuration } from '../../util/dates/dateFormat';\nimport { clamp, round } from '../../util/math';\nimport { IS_TOUCH_ENV } from '../../util/windowEnvironment';\n\nimport { useThrottledSignal } from '../../hooks/useAsyncResolvers';\nimport useCurrentTimeSignal from '../../hooks/useCurrentTimeSignal';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useVideoWaitingSignal from './hooks/useVideoWaitingSignal';\n\nimport ShowTransition from '../ui/ShowTransition';\n\nimport styles from './SeekLine.module.scss';\n\ntype OwnProps = {\n  url?: string;\n  duration: number;\n  bufferedRanges: BufferedRange[];\n  playbackRate: number;\n  isActive?: boolean;\n  isPlaying?: boolean;\n  isPreviewDisabled?: boolean;\n  isReady: boolean;\n  posterSize?: ApiDimensions;\n  onSeek: (position: number) => void;\n  onSeekStart: () => void;\n};\n\nconst LOCK_TIMEOUT = 250;\nlet cancelAnimation: Function | undefined;\n\nconst SeekLine: FC<OwnProps> = ({\n  duration,\n  bufferedRanges,\n  isReady,\n  posterSize,\n  playbackRate,\n  url,\n  isActive,\n  isPlaying,\n  isPreviewDisabled,\n  onSeek,\n  onSeekStart,\n}) => {\n  // eslint-disable-next-line no-null/no-null\n  const seekerRef = useRef<HTMLDivElement>(null);\n  const [getCurrentTimeSignal] = useCurrentTimeSignal();\n  const [getIsWaiting] = useVideoWaitingSignal();\n  const getCurrentTime = useThrottledSignal(getCurrentTimeSignal, LOCK_TIMEOUT);\n  const [getSelectedTime, setSelectedTime] = useSignal(getCurrentTime());\n  const [getPreviewOffset, setPreviewOffset] = useSignal(0);\n  const [getPreviewTime, setPreviewTime] = useSignal(0);\n  const isLockedRef = useRef<boolean>(false);\n  const [isPreviewVisible, setPreviewVisible] = useState(false);\n  const [isSeeking, setIsSeeking] = useState(false);\n  // eslint-disable-next-line no-null/no-null\n  const previewCanvasRef = useRef<HTMLCanvasElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const previewRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const progressRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const previewTimeRef = useRef<HTMLDivElement>(null);\n\n  const previewSize = useMemo(() => {\n    return getPreviewDimensions(posterSize?.width || 0, posterSize?.height || 0);\n  }, [posterSize]);\n\n  const setPreview = useLastCallback((time: number) => {\n    time = Math.floor(time);\n    setPreviewTime(time);\n    renderVideoPreview(time);\n  });\n\n  useEffect(() => {\n    if (isPreviewDisabled || !url || !isReady) return undefined;\n    return createVideoPreviews(url, previewCanvasRef.current!);\n  }, [url, isReady, isPreviewDisabled]);\n\n  useEffect(() => {\n    setPreviewVisible(false);\n  }, [isActive]);\n\n  useEffect(() => {\n    if (cancelAnimation) cancelAnimation();\n    cancelAnimation = undefined;\n    if (!isLockedRef.current && !isSeeking) {\n      const time = getCurrentTime();\n      const remaining = duration - time;\n      cancelAnimation = animateNumber({\n        from: time,\n        to: duration,\n        duration: (remaining * 1000) / playbackRate,\n        onUpdate: setSelectedTime,\n      });\n    }\n  }, [getCurrentTime, isSeeking, setSelectedTime, playbackRate, duration]);\n\n  useEffect(() => {\n    if (!isPlaying || getIsWaiting()) {\n      if (cancelAnimation) cancelAnimation();\n      cancelAnimation = undefined;\n    }\n  }, [isPlaying, getSelectedTime, getIsWaiting]);\n\n  useEffect(() => {\n    if (isPlaying) {\n      if (cancelAnimation) cancelAnimation();\n      cancelAnimation = undefined;\n      const time = getCurrentTime();\n      const remaining = duration - time;\n      cancelAnimation = animateNumber({\n        from: time,\n        to: duration,\n        duration: (remaining * 1000) / playbackRate,\n        onUpdate: setSelectedTime,\n      });\n    }\n    // eslint-disable-next-line\n  }, [isPlaying, playbackRate, duration]);\n\n  useLayoutEffect(() => {\n    if (!progressRef.current) return;\n    const progress = round((getSelectedTime() / duration) * 100, 2);\n    progressRef.current.style.width = `${progress}%`;\n  }, [getSelectedTime, duration]);\n\n  useLayoutEffect(() => {\n    if (!previewRef.current) return;\n    previewRef.current.style.left = `${getPreviewOffset()}px`;\n  }, [getPreviewOffset]);\n\n  useLayoutEffect(() => {\n    if (!previewTimeRef.current) return;\n    previewTimeRef.current.innerText = formatMediaDuration(getPreviewTime());\n  }, [getPreviewTime]);\n\n  useEffect(() => {\n    if (!seekerRef.current || !isActive) return undefined;\n    const seeker = seekerRef.current;\n    let seekerSize = seeker.getBoundingClientRect();\n\n    let time = 0;\n    let offset = 0;\n\n    const getPreviewProps = (e: MouseEvent | TouchEvent) => {\n      const pageX = e instanceof MouseEvent ? e.pageX : e.touches[0].pageX;\n      const t = clamp(duration * ((pageX - seekerSize.left) / seekerSize.width), 0, duration);\n      if (isPreviewDisabled) return [t, 0];\n      if (!seekerSize.width) seekerSize = seeker.getBoundingClientRect();\n      const preview = previewRef.current!;\n      const o = clamp(\n        pageX - seekerSize.left - preview.clientWidth / 2, -4, seekerSize.width - preview.clientWidth + 4,\n      );\n      return [t, o];\n    };\n\n    const stopAnimation = () => {\n      if (cancelAnimation) cancelAnimation();\n      cancelAnimation = undefined;\n    };\n\n    const handleSeek = (e: MouseEvent | TouchEvent) => {\n      stopAnimation();\n      setPreviewVisible(true);\n      ([time, offset] = getPreviewProps(e));\n      void setPreview(time);\n      setPreviewOffset(offset);\n      setSelectedTime(time);\n    };\n\n    const handleStartSeek = () => {\n      stopAnimation();\n      setPreviewVisible(true);\n      setIsSeeking(true);\n      onSeekStart();\n    };\n\n    const handleStopSeek = () => {\n      stopAnimation();\n      isLockedRef.current = true;\n      setPreviewVisible(false);\n      setIsSeeking(false);\n      setSelectedTime(time);\n      onSeek(time);\n      // Prevent current time updates from overriding the selected time\n      setTimeout(() => {\n        isLockedRef.current = false;\n      }, LOCK_TIMEOUT);\n    };\n\n    const cleanup = captureEvents(seeker, {\n      onCapture: handleStartSeek,\n      onRelease: handleStopSeek,\n      onClick: handleStopSeek,\n      onDrag: handleSeek,\n    });\n\n    if (IS_TOUCH_ENV || isPreviewDisabled) {\n      return cleanup;\n    }\n\n    const handleSeekMouseMove = (e: MouseEvent) => {\n      setPreviewVisible(true);\n      ([time, offset] = getPreviewProps(e));\n      setPreviewOffset(offset);\n      void setPreview(time);\n    };\n\n    const handleSeekMouseLeave = () => {\n      setPreviewVisible(false);\n    };\n\n    seeker.addEventListener('mousemove', handleSeekMouseMove);\n    seeker.addEventListener('mouseenter', handleSeekMouseMove);\n    seeker.addEventListener('mouseleave', handleSeekMouseLeave);\n\n    return () => {\n      cleanup();\n      seeker.removeEventListener('mousemove', handleSeekMouseMove);\n      seeker.removeEventListener('mouseenter', handleSeekMouseMove);\n      seeker.removeEventListener('mouseleave', handleSeekMouseLeave);\n    };\n  }, [\n    duration,\n    setPreview,\n    isActive,\n    onSeek,\n    onSeekStart,\n    setPreviewOffset,\n    setSelectedTime,\n    setIsSeeking,\n    isPreviewDisabled,\n    playbackRate,\n  ]);\n\n  return (\n    <div className={styles.container} ref={seekerRef}>\n      {!isPreviewDisabled && (\n        <ShowTransition\n          isOpen\n          isHidden={!isPreviewVisible}\n          className={styles.preview}\n          style={`width: ${previewSize.width}px; height: ${previewSize.height}px`}\n          ref={previewRef}\n        >\n          <canvas className={styles.previewCanvas} ref={previewCanvasRef} />\n          <div className={styles.previewTime}>\n            <span className={styles.previewTimeText} ref={previewTimeRef} />\n          </div>\n        </ShowTransition>\n      )}\n      <div className={styles.track}>\n        {bufferedRanges.map(({\n          start,\n          end,\n        }) => (\n          <div\n            key={`${start}-${end}`}\n            className={styles.buffered}\n            // @ts-ignore\n            style={`left: ${start * 100}%; right: ${100 - end * 100}%`}\n          />\n        ))}\n      </div>\n      <div className={styles.track}>\n        <div\n          ref={progressRef}\n          className={buildClassName(styles.played, isSeeking && styles.seeking)}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(SeekLine);\n","import type { FC } from '../../lib/teact/teact';\nimport React, { useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiChat, ApiPeer } from '../../api/types';\nimport type { MediaViewerItem } from './helpers/getViewableMedia';\n\nimport {\n  getSenderTitle, isChatChannel, isChatGroup, isUserId,\n} from '../../global/helpers';\nimport {\n  selectSender,\n  selectUserFullInfo,\n} from '../../global/selectors';\nimport { formatMediaDateTime } from '../../util/dates/dateFormat';\nimport renderText from '../common/helpers/renderText';\n\nimport useAppLayout from '../../hooks/useAppLayout';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport Avatar from '../common/Avatar';\n\nimport './SenderInfo.scss';\n\ntype OwnProps = {\n  item?: MediaViewerItem;\n};\n\ntype StateProps = {\n  owner?: ApiPeer;\n  isFallbackAvatar?: boolean;\n};\n\nconst BULLET = '\\u2022';\nconst ANIMATION_DURATION = 350;\n\nconst SenderInfo: FC<OwnProps & StateProps> = ({\n  owner,\n  item,\n  isFallbackAvatar,\n}) => {\n  const {\n    closeMediaViewer,\n    focusMessage,\n    toggleChatInfo,\n  } = getActions();\n\n  const { isMobile } = useAppLayout();\n\n  const handleFocusMessage = useLastCallback(() => {\n    closeMediaViewer();\n\n    if (item?.type !== 'message') return;\n\n    const message = item.message;\n\n    if (isMobile) {\n      setTimeout(() => {\n        toggleChatInfo({ force: false }, { forceSyncOnIOs: true });\n        focusMessage({ chatId: message.chatId, messageId: message.id });\n      }, ANIMATION_DURATION);\n    } else {\n      focusMessage({ chatId: message.chatId, messageId: message.id });\n    }\n  });\n\n  const lang = useOldLang();\n\n  const subtitle = useMemo(() => {\n    if (!item || item.type === 'standalone') return undefined;\n\n    const avatarOwner = item.type === 'avatar' ? item.avatarOwner : undefined;\n    const avatar = avatarOwner?.photos?.[item.mediaIndex!];\n    const date = item.type === 'message' ? item.message.date : avatar?.date;\n    if (!date) return undefined;\n\n    const formattedDate = formatMediaDateTime(lang, date * 1000, true);\n\n    const parts: string[] = [];\n    if (avatar) {\n      const chat = !isUserId(avatarOwner!.id) ? avatarOwner as ApiChat : undefined;\n      const isChannel = chat && isChatChannel(chat);\n      const isGroup = chat && isChatGroup(chat);\n      parts.push(lang(\n        isFallbackAvatar ? 'lng_mediaview_profile_public_photo'\n          : isChannel ? 'lng_mediaview_channel_photo'\n            : isGroup ? 'lng_mediaview_group_photo' : 'lng_mediaview_profile_photo',\n      ));\n    }\n\n    parts.push(formattedDate);\n\n    return parts.join(` ${BULLET} `);\n  }, [item, isFallbackAvatar, lang]);\n\n  if (!owner) {\n    return undefined;\n  }\n\n  const senderTitle = getSenderTitle(lang, owner);\n\n  return (\n    <div className=\"SenderInfo\" onClick={handleFocusMessage}>\n      <Avatar key={owner.id} size=\"medium\" peer={owner} />\n      <div className=\"meta\">\n        <div className=\"title\" dir=\"auto\">\n          {senderTitle && renderText(senderTitle)}\n        </div>\n        <div className=\"date\" dir=\"auto\">\n          {subtitle}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default withGlobal<OwnProps>(\n  (global, { item }): StateProps => {\n    const message = item?.type === 'message' ? item.message : undefined;\n    const messageSender = message && selectSender(global, message);\n\n    const owner = item?.type === 'avatar' ? item.avatarOwner : messageSender;\n\n    const fallbackAvatar = item?.type === 'avatar'\n      ? selectUserFullInfo(global, item.avatarOwner.id)?.fallbackPhoto : undefined;\n\n    const isFallbackAvatar = fallbackAvatar && item?.type === 'avatar'\n      && item.avatarOwner.photos?.[item.mediaIndex].id === fallbackAvatar.id;\n\n    return {\n      owner,\n      isFallbackAvatar,\n    };\n  },\n)(SenderInfo);\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiDimensions } from '../../api/types';\n\nimport { clamp } from '../../util/math';\nimport safePlay from '../../util/safePlay';\nimport stopEvent from '../../util/stopEvent';\nimport { IS_IOS, IS_TOUCH_ENV, IS_YA_BROWSER } from '../../util/windowEnvironment';\n\nimport useUnsupportedMedia from '../../hooks/media/useUnsupportedMedia';\nimport useAppLayout from '../../hooks/useAppLayout';\nimport useBuffering from '../../hooks/useBuffering';\nimport useCurrentTimeSignal from '../../hooks/useCurrentTimeSignal';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport usePictureInPicture from '../../hooks/usePictureInPicture';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport useVideoCleanup from '../../hooks/useVideoCleanup';\nimport useFullscreen from '../../hooks/window/useFullscreen';\nimport useControlsSignal from './hooks/useControlsSignal';\nimport useVideoWaitingSignal from './hooks/useVideoWaitingSignal';\n\nimport Button from '../ui/Button';\nimport ProgressSpinner from '../ui/ProgressSpinner';\nimport VideoPlayerControls from './VideoPlayerControls';\n\nimport './VideoPlayer.scss';\n\ntype OwnProps = {\n  url?: string;\n  isGif?: boolean;\n  posterData?: string;\n  posterSize?: ApiDimensions;\n  loadProgress?: number;\n  fileSize: number;\n  isPreviewDisabled?: boolean;\n  isMediaViewerOpen?: boolean;\n  noPlay?: boolean;\n  volume: number;\n  isMuted: boolean;\n  isHidden?: boolean;\n  playbackRate: number;\n  isProtected?: boolean;\n  shouldCloseOnClick?: boolean;\n  isForceMobileVersion?: boolean;\n  onClose: (e: React.MouseEvent<HTMLElement, MouseEvent>) => void;\n  isClickDisabled?: boolean;\n};\n\nconst MAX_LOOP_DURATION = 30; // Seconds\nconst MIN_READY_STATE = 4;\nconst REWIND_STEP = 5; // Seconds\n\nconst VideoPlayer: FC<OwnProps> = ({\n  url,\n  isGif,\n  posterData,\n  posterSize,\n  loadProgress,\n  fileSize,\n  isMediaViewerOpen,\n  noPlay,\n  volume,\n  isMuted,\n  playbackRate,\n  onClose,\n  isForceMobileVersion,\n  shouldCloseOnClick,\n  isProtected,\n  isClickDisabled,\n  isPreviewDisabled,\n}) => {\n  const {\n    setMediaViewerVolume,\n    setMediaViewerMuted,\n    setMediaViewerPlaybackRate,\n    setMediaViewerHidden,\n  } = getActions();\n  // eslint-disable-next-line no-null/no-null\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const [isPlaying, setIsPlaying] = useState(!IS_TOUCH_ENV || !IS_IOS);\n  const [isFullscreen, setFullscreen, exitFullscreen] = useFullscreen(videoRef, setIsPlaying);\n  const { isMobile } = useAppLayout();\n  const duration = videoRef.current?.duration || 0;\n  const isLooped = isGif || duration <= MAX_LOOP_DURATION;\n\n  const handleEnterFullscreen = useLastCallback(() => {\n    // Yandex browser doesn't support PIP when video is hidden\n    if (IS_YA_BROWSER) return;\n    setMediaViewerHidden({ isHidden: true });\n  });\n\n  const handleLeaveFullscreen = useLastCallback(() => {\n    if (IS_YA_BROWSER) return;\n    setMediaViewerHidden({ isHidden: false });\n  });\n\n  const [\n    isPictureInPictureSupported,\n    enterPictureInPicture,\n    isInPictureInPicture,\n  ] = usePictureInPicture(videoRef, handleEnterFullscreen, handleLeaveFullscreen);\n\n  const [, toggleControls, lockControls] = useControlsSignal();\n\n  const handleVideoMove = useLastCallback(() => {\n    toggleControls(true);\n  });\n\n  const handleVideoLeave = useLastCallback((e) => {\n    const bounds = videoRef.current?.getBoundingClientRect();\n    if (!bounds) return;\n    if (e.clientX < bounds.left || e.clientX > bounds.right || e.clientY < bounds.top || e.clientY > bounds.bottom) {\n      toggleControls(false);\n    }\n  });\n\n  const {\n    isReady, isBuffered, bufferedRanges, bufferingHandlers, bufferedProgress,\n  } = useBuffering();\n  const isUnsupported = useUnsupportedMedia(videoRef, undefined, !url);\n\n  const {\n    shouldRender: shouldRenderSpinner,\n    transitionClassNames: spinnerClassNames,\n  } = useShowTransition(!isBuffered && !isUnsupported, undefined, undefined, 'slow');\n  const {\n    shouldRender: shouldRenderPlayButton,\n    transitionClassNames: playButtonClassNames,\n  } = useShowTransition(IS_IOS && !isPlaying && !shouldRenderSpinner && !isUnsupported, undefined, undefined, 'slow');\n\n  useEffect(() => {\n    lockControls(shouldRenderSpinner);\n  }, [lockControls, shouldRenderSpinner]);\n\n  useEffect(() => {\n    if (noPlay || !isMediaViewerOpen || isUnsupported) {\n      videoRef.current!.pause();\n    } else if (url && !IS_TOUCH_ENV) {\n      // Chrome does not automatically start playing when `url` becomes available (even with `autoPlay`),\n      // so we force it here. Contrary, iOS does not allow to call `play` without mouse event,\n      // so we need to use `autoPlay` instead to allow pre-buffering.\n      safePlay(videoRef.current!);\n    }\n  }, [noPlay, isMediaViewerOpen, url, setMediaViewerMuted, isUnsupported]);\n\n  useEffect(() => {\n    videoRef.current!.volume = volume;\n  }, [volume]);\n\n  useEffect(() => {\n    videoRef.current!.playbackRate = playbackRate;\n  }, [playbackRate]);\n\n  const togglePlayState = useLastCallback((e: React.MouseEvent<HTMLElement, MouseEvent> | KeyboardEvent) => {\n    e.stopPropagation();\n    if (isPlaying) {\n      videoRef.current!.pause();\n      setIsPlaying(false);\n    } else {\n      safePlay(videoRef.current!);\n      setIsPlaying(true);\n    }\n  });\n\n  const handleClick = useLastCallback((e: React.MouseEvent<HTMLVideoElement, MouseEvent>) => {\n    if (isClickDisabled) {\n      return;\n    }\n    if (shouldCloseOnClick) {\n      onClose(e);\n    } else {\n      togglePlayState(e);\n    }\n  });\n\n  useVideoCleanup(videoRef, []);\n  const [, setCurrentTime] = useCurrentTimeSignal();\n  const [, setIsVideoWaiting] = useVideoWaitingSignal();\n\n  const handleTimeUpdate = useLastCallback((e: React.SyntheticEvent<HTMLVideoElement>) => {\n    const video = e.currentTarget;\n    if (video.readyState >= MIN_READY_STATE) {\n      setIsVideoWaiting(false);\n      setCurrentTime(video.currentTime);\n    }\n    if (!isLooped && video.currentTime === video.duration) {\n      setCurrentTime(0);\n      setIsPlaying(false);\n    }\n  });\n\n  const handleEnded = useLastCallback(() => {\n    if (isLooped) return;\n    setCurrentTime(0);\n    setIsPlaying(false);\n    toggleControls(true);\n  });\n\n  const handleFullscreenChange = useLastCallback(() => {\n    if (isFullscreen && exitFullscreen) {\n      exitFullscreen();\n    } else if (!isFullscreen && setFullscreen) {\n      setFullscreen();\n    }\n  });\n\n  const handleSeek = useLastCallback((position: number) => {\n    videoRef.current!.currentTime = position;\n  });\n\n  const handleVolumeChange = useLastCallback((newVolume: number) => {\n    setMediaViewerVolume({ volume: newVolume / 100 });\n  });\n\n  const handleVolumeMuted = useLastCallback(() => {\n    // Browser requires explicit user interaction to keep video playing after unmuting\n    videoRef.current!.muted = !videoRef.current!.muted;\n    setMediaViewerMuted({ isMuted: !isMuted });\n  });\n\n  const handlePlaybackRateChange = useLastCallback((newPlaybackRate: number) => {\n    setMediaViewerPlaybackRate({ playbackRate: newPlaybackRate });\n  });\n\n  useEffect(() => {\n    if (!isMediaViewerOpen) return undefined;\n    const rewind = (dir: number) => {\n      if (!isFullscreen) return;\n      const video = videoRef.current!;\n      const newTime = clamp(video.currentTime + dir * REWIND_STEP, 0, video.duration);\n      if (Number.isFinite(newTime)) {\n        video.currentTime = newTime;\n      }\n    };\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (isInPictureInPicture) return;\n      switch (e.key) {\n        case ' ':\n        case 'Enter':\n          e.preventDefault();\n          togglePlayState(e);\n          break;\n        case 'Left': // IE/Edge specific value\n        case 'ArrowLeft':\n          e.preventDefault();\n          rewind(-1);\n          break;\n        case 'Right': // IE/Edge specific value\n        case 'ArrowRight':\n          e.preventDefault();\n          rewind(1);\n          break;\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown, false);\n\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown, false);\n    };\n  }, [togglePlayState, isMediaViewerOpen, isFullscreen, isInPictureInPicture]);\n\n  const wrapperStyle = posterSize && `width: ${posterSize.width}px; height: ${posterSize.height}px`;\n  const videoStyle = `background-image: url(${posterData})`;\n  const shouldToggleControls = !IS_TOUCH_ENV && !isForceMobileVersion;\n\n  return (\n    // eslint-disable-next-line jsx-a11y/mouse-events-have-key-events\n    <div\n      className=\"VideoPlayer\"\n      onMouseMove={shouldToggleControls ? handleVideoMove : undefined}\n      onMouseOut={shouldToggleControls ? handleVideoLeave : undefined}\n    >\n      <div\n        style={wrapperStyle}\n      >\n        {/* eslint-disable-next-line jsx-a11y/media-has-caption */}\n        {isProtected && (\n          <div\n            onContextMenu={stopEvent}\n            onDoubleClick={!IS_TOUCH_ENV ? handleFullscreenChange : undefined}\n            onClick={!isMobile ? togglePlayState : undefined}\n            className=\"protector\"\n          />\n        )}\n        <video\n          ref={videoRef}\n          autoPlay={IS_TOUCH_ENV}\n          controlsList=\"nodownload\"\n          playsInline\n          loop={isLooped}\n          // This is to force autoplaying on mobiles\n          muted={isGif || isMuted}\n          id=\"media-viewer-video\"\n          style={videoStyle}\n          onWaiting={() => setIsVideoWaiting(true)}\n          onPlay={() => setIsPlaying(true)}\n          onEnded={handleEnded}\n          onClick={!isMobile && !isFullscreen ? handleClick : undefined}\n          onDoubleClick={!IS_TOUCH_ENV ? handleFullscreenChange : undefined}\n          // eslint-disable-next-line react/jsx-props-no-spreading\n          {...bufferingHandlers}\n          onPause={(e) => {\n            setIsPlaying(false);\n            bufferingHandlers.onPause(e);\n          }}\n          onTimeUpdate={handleTimeUpdate}\n          src={url}\n        />\n      </div>\n      {shouldRenderPlayButton && (\n        <Button round className={`play-button ${playButtonClassNames}`} onClick={togglePlayState}>\n          <i className=\"icon icon-play\" />\n        </Button>\n      )}\n      {shouldRenderSpinner && (\n        <div className={['spinner-container', spinnerClassNames].join(' ')}>\n          {!isBuffered && <div className=\"buffering\">Buffering...</div>}\n          <ProgressSpinner\n            size=\"xl\"\n            progress={isBuffered ? 1 : loadProgress}\n            onClick={onClose}\n          />\n        </div>\n      )}\n      {!isGif && !isUnsupported && (\n        <VideoPlayerControls\n          url={url}\n          isPlaying={isPlaying}\n          bufferedRanges={bufferedRanges}\n          bufferedProgress={bufferedProgress}\n          isBuffered={isBuffered}\n          isFullscreenSupported={Boolean(setFullscreen)}\n          isPictureInPictureSupported={isPictureInPictureSupported}\n          isFullscreen={isFullscreen}\n          isPreviewDisabled={isPreviewDisabled}\n          fileSize={fileSize}\n          duration={duration}\n          isReady={isReady}\n          posterSize={posterSize}\n          isForceMobileVersion={isForceMobileVersion}\n          onSeek={handleSeek}\n          onChangeFullscreen={handleFullscreenChange}\n          onPictureInPictureChange={enterPictureInPicture}\n          onPlayPause={togglePlayState}\n          volume={volume}\n          playbackRate={playbackRate}\n          isMuted={isMuted}\n          onVolumeClick={handleVolumeMuted}\n          onVolumeChange={handleVolumeChange}\n          onPlaybackRateChange={handlePlaybackRateChange}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default memo(VideoPlayer);\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useLayoutEffect,\n  useMemo,\n  useSignal,\n} from '../../lib/teact/teact';\n\nimport type { ApiDimensions } from '../../api/types';\nimport type { BufferedRange } from '../../hooks/useBuffering';\n\nimport buildClassName from '../../util/buildClassName';\nimport { formatMediaDuration } from '../../util/dates/dateFormat';\nimport { formatFileSize } from '../../util/textFormat';\nimport { IS_IOS, IS_TOUCH_ENV } from '../../util/windowEnvironment';\n\nimport useAppLayout from '../../hooks/useAppLayout';\nimport useCurrentTimeSignal from '../../hooks/useCurrentTimeSignal';\nimport useDerivedState from '../../hooks/useDerivedState';\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useOldLang from '../../hooks/useOldLang';\nimport useControlsSignal from './hooks/useControlsSignal';\n\nimport Button from '../ui/Button';\nimport Menu from '../ui/Menu';\nimport MenuItem from '../ui/MenuItem';\nimport RangeSlider from '../ui/RangeSlider';\nimport SeekLine from './SeekLine';\n\nimport './VideoPlayerControls.scss';\n\ntype OwnProps = {\n  url?: string;\n  bufferedRanges: BufferedRange[];\n  bufferedProgress: number;\n  duration: number;\n  isReady: boolean;\n  fileSize: number;\n  isForceMobileVersion?: boolean;\n  isPlaying: boolean;\n  isFullscreenSupported: boolean;\n  isPictureInPictureSupported: boolean;\n  isFullscreen: boolean;\n  isPreviewDisabled?: boolean;\n  isBuffered: boolean;\n  volume: number;\n  isMuted: boolean;\n  playbackRate: number;\n  posterSize?: ApiDimensions;\n  onChangeFullscreen: (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\n  onPictureInPictureChange?: () => void;\n  onVolumeClick: () => void;\n  onVolumeChange: (volume: number) => void;\n  onPlaybackRateChange: (playbackRate: number) => void;\n  onPlayPause: (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\n  onSeek: (position: number) => void;\n};\n\nconst stopEvent = (e: React.MouseEvent<HTMLElement>) => {\n  e.stopPropagation();\n};\n\nconst PLAYBACK_RATES = [\n  0.5,\n  1,\n  1.5,\n  2,\n];\n\nconst HIDE_CONTROLS_TIMEOUT_MS = 3000;\n\nconst VideoPlayerControls: FC<OwnProps> = ({\n  url,\n  bufferedRanges,\n  bufferedProgress,\n  duration,\n  isReady,\n  fileSize,\n  isForceMobileVersion,\n  isPlaying,\n  isFullscreenSupported,\n  isFullscreen,\n  isBuffered,\n  isPreviewDisabled,\n  volume,\n  isMuted,\n  playbackRate,\n  posterSize,\n  onChangeFullscreen,\n  onVolumeClick,\n  onVolumeChange,\n  onPlaybackRateChange,\n  isPictureInPictureSupported,\n  onPictureInPictureChange,\n  onPlayPause,\n  onSeek,\n}) => {\n  const [isPlaybackMenuOpen, openPlaybackMenu, closePlaybackMenu] = useFlag();\n  const [getCurrentTime] = useCurrentTimeSignal();\n  const currentTime = useDerivedState(() => Math.trunc(getCurrentTime()), [getCurrentTime]);\n  const [getIsSeeking, setIsSeeking] = useSignal(false);\n\n  const { isMobile } = useAppLayout();\n  const [getIsVisible, setVisibility] = useControlsSignal();\n  const isVisible = useDerivedState(getIsVisible);\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV && !isForceMobileVersion) return undefined;\n    let timeout: number | undefined;\n    if (!isVisible || !isPlaying || isPlaybackMenuOpen || getIsSeeking()) {\n      if (timeout) window.clearTimeout(timeout);\n      return undefined;\n    }\n    timeout = window.setTimeout(() => {\n      setVisibility(false);\n    }, HIDE_CONTROLS_TIMEOUT_MS);\n    return () => {\n      if (timeout) window.clearTimeout(timeout);\n    };\n  }, [isPlaying, isVisible, setVisibility, isPlaybackMenuOpen, getIsSeeking, isForceMobileVersion]);\n\n  useLayoutEffect(() => {\n    if (isVisible) {\n      document.body.classList.add('video-controls-visible');\n    } else {\n      document.body.classList.remove('video-controls-visible');\n    }\n    return () => {\n      document.body.classList.remove('video-controls-visible');\n    };\n  }, [isVisible]);\n\n  useEffect(() => {\n    if (!isVisible) {\n      closePlaybackMenu();\n    }\n  }, [closePlaybackMenu, isVisible]);\n\n  const lang = useOldLang();\n\n  const handleSeek = useLastCallback((position: number) => {\n    setIsSeeking(false);\n    onSeek(position);\n  });\n\n  const handleSeekStart = useLastCallback(() => {\n    setIsSeeking(true);\n  });\n\n  const volumeIcon = useMemo(() => {\n    if (volume === 0 || isMuted) return 'icon-muted';\n    if (volume < 0.3) return 'icon-volume-1';\n    if (volume < 0.6) return 'icon-volume-2';\n    return 'icon-volume-3';\n  }, [volume, isMuted]);\n\n  return (\n    <div\n      className={buildClassName('VideoPlayerControls', isForceMobileVersion && 'mobile', isVisible && 'active')}\n      onClick={stopEvent}\n    >\n      <SeekLine\n        url={url}\n        duration={duration}\n        isReady={isReady}\n        isPlaying={isPlaying}\n        isPreviewDisabled={isPreviewDisabled}\n        posterSize={posterSize}\n        bufferedRanges={bufferedRanges}\n        playbackRate={playbackRate}\n        onSeek={handleSeek}\n        onSeekStart={handleSeekStart}\n        isActive={isVisible}\n      />\n      <div className=\"buttons\">\n        <Button\n          ariaLabel={lang('AccActionPlay')}\n          size=\"tiny\"\n          ripple={!isMobile}\n          color=\"translucent-white\"\n          className=\"play\"\n          round\n          onClick={onPlayPause}\n        >\n          <i className={buildClassName('icon', isPlaying ? 'icon-pause' : 'icon-play')} />\n        </Button>\n        <Button\n          ariaLabel=\"Volume\"\n          size=\"tiny\"\n          color=\"translucent-white\"\n          className=\"volume\"\n          round\n          onClick={onVolumeClick}\n        >\n          <i className={buildClassName('icon', volumeIcon)} />\n        </Button>\n        {!IS_IOS && (\n          <RangeSlider bold className=\"volume-slider\" value={isMuted ? 0 : volume * 100} onChange={onVolumeChange} />\n        )}\n        {renderTime(currentTime, duration)}\n        {!isBuffered && (\n          <div className=\"player-file-size\">\n            {`${formatFileSize(lang, fileSize * bufferedProgress)} / ${formatFileSize(lang, fileSize)}`}\n          </div>\n        )}\n        <div className=\"spacer\" />\n        <Button\n          ariaLabel=\"Playback rate\"\n          size=\"tiny\"\n          color=\"translucent-white\"\n          className=\"playback-rate\"\n          round\n          onClick={openPlaybackMenu}\n        >\n          {`${playbackRate}x`}\n        </Button>\n        {isPictureInPictureSupported && (\n          <Button\n            ariaLabel=\"Picture in picture\"\n            size=\"tiny\"\n            color=\"translucent-white\"\n            className=\"fullscreen\"\n            round\n            onClick={onPictureInPictureChange}\n          >\n            <i className=\"icon icon-pip\" />\n          </Button>\n        )}\n        {isFullscreenSupported && (\n          <Button\n            ariaLabel=\"Fullscreen\"\n            size=\"tiny\"\n            color=\"translucent-white\"\n            className=\"fullscreen\"\n            round\n            onClick={onChangeFullscreen}\n          >\n            <i className={buildClassName('icon ', isFullscreen ? 'icon-smallscreen' : 'icon-fullscreen')} />\n          </Button>\n        )}\n      </div>\n      <Menu\n        isOpen={isPlaybackMenuOpen}\n        className={buildClassName(\n          'playback-rate-menu',\n          !isFullscreenSupported && 'no-fullscreen',\n          !isPictureInPictureSupported && 'no-pip',\n        )}\n        positionX=\"right\"\n        positionY=\"bottom\"\n        autoClose\n        onClose={closePlaybackMenu}\n      >\n        {PLAYBACK_RATES.map((rate) => (\n          // eslint-disable-next-line react/jsx-no-bind\n          <MenuItem disabled={playbackRate === rate} onClick={() => onPlaybackRateChange(rate)}>\n            {`${rate}x`}\n          </MenuItem>\n        ))}\n      </Menu>\n    </div>\n  );\n};\n\nfunction renderTime(currentTime: number, duration: number) {\n  return (\n    <div className=\"player-time\">\n      {`${formatMediaDuration(currentTime)} / ${formatMediaDuration(duration)}`}\n    </div>\n  );\n}\n\nexport default memo(VideoPlayerControls);\n","import type { ApiMessage, ApiPeer } from '../../../api/types';\nimport type { MediaViewerMedia } from '../../../types';\n\nimport { getMessageContent, isDocumentPhoto, isDocumentVideo } from '../../../global/helpers';\n\nexport type MediaViewerItem = {\n  type: 'message';\n  message: ApiMessage;\n  mediaIndex?: number;\n} | {\n  type: 'avatar';\n  avatarOwner: ApiPeer;\n  mediaIndex: number;\n} | {\n  type: 'standalone';\n  media: MediaViewerMedia[];\n  mediaIndex: number;\n};\n\ntype ViewableMedia = {\n  media: MediaViewerMedia;\n  isSingle?: boolean;\n};\n\nexport function getMediaViewerItem({\n  message, avatarOwner, standaloneMedia, mediaIndex,\n}: {\n  message?: ApiMessage;\n  avatarOwner?: ApiPeer;\n  standaloneMedia?: MediaViewerMedia[];\n  mediaIndex?: number;\n}): MediaViewerItem | undefined {\n  if (avatarOwner) {\n    return {\n      type: 'avatar',\n      avatarOwner,\n      mediaIndex: mediaIndex!,\n    };\n  }\n\n  if (standaloneMedia) {\n    return {\n      type: 'standalone',\n      media: standaloneMedia!,\n      mediaIndex: mediaIndex!,\n    };\n  }\n\n  if (message) {\n    return {\n      type: 'message',\n      message,\n      mediaIndex,\n    };\n  }\n\n  return undefined;\n}\n\nexport default function getViewableMedia(params?: MediaViewerItem): ViewableMedia | undefined {\n  if (!params) return undefined;\n\n  if (params.type === 'standalone') {\n    return {\n      media: params.media[params.mediaIndex],\n      isSingle: params.media.length === 1,\n    };\n  }\n\n  if (params.type === 'avatar') {\n    const avatar = params.avatarOwner.photos?.[params.mediaIndex];\n    if (avatar) {\n      return {\n        media: avatar,\n      };\n    }\n    return undefined;\n  }\n\n  const {\n    action, document, photo, video, webPage, paidMedia,\n  } = getMessageContent(params.message);\n\n  if (action?.photo) {\n    return {\n      media: action.photo,\n      isSingle: true,\n    };\n  }\n\n  if (document && (isDocumentPhoto(document) || isDocumentVideo(document))) {\n    return {\n      media: document,\n      isSingle: true,\n    };\n  }\n\n  if (webPage) {\n    const { photo: webPagePhoto, video: webPageVideo } = webPage;\n    const media = webPageVideo || webPagePhoto;\n    if (media) {\n      return {\n        media,\n        isSingle: true,\n      };\n    }\n  }\n\n  if (paidMedia) {\n    const extendedMedia = paidMedia.extendedMedia[params.mediaIndex || 0];\n    if (!('mediaType' in extendedMedia)) {\n      const { photo: extendedPhoto, video: extendedVideo } = extendedMedia;\n      return {\n        media: (extendedPhoto || extendedVideo)!,\n      };\n    }\n  }\n\n  const media = video || photo;\n\n  if (media) {\n    return {\n      media,\n      isSingle: video?.isGif,\n    };\n  }\n\n  return undefined;\n}\n","import type { ApiDimensions, ApiMessage } from '../../../api/types';\nimport { MediaViewerOrigin } from '../../../types';\n\nimport { ANIMATION_END_DELAY, MESSAGE_CONTENT_SELECTOR } from '../../../config';\nimport { requestMutation } from '../../../lib/fasterdom/fasterdom';\nimport { getMessageHtmlId } from '../../../global/helpers';\nimport { applyStyles } from '../../../util/animation';\nimport { isElementInViewport } from '../../../util/isElementInViewport';\nimport stopEvent from '../../../util/stopEvent';\nimport { IS_TOUCH_ENV } from '../../../util/windowEnvironment';\nimport windowSize from '../../../util/windowSize';\nimport {\n  calculateDimensions,\n  getMediaViewerAvailableDimensions,\n  MEDIA_VIEWER_MEDIA_QUERY,\n  REM,\n} from '../../common/helpers/mediaDimensions';\n\nconst ANIMATION_DURATION = 200;\n\nexport function animateOpening(\n  hasFooter: boolean,\n  origin: MediaViewerOrigin,\n  bestImageData: string,\n  dimensions: ApiDimensions,\n  isVideo: boolean,\n  message?: ApiMessage,\n  mediaIndex?: number,\n) {\n  const { mediaEl: fromImage } = getNodes(origin, message, mediaIndex);\n  if (!fromImage) {\n    return;\n  }\n\n  const { width: windowWidth } = windowSize.get();\n  const {\n    width: availableWidth, height: availableHeight,\n  } = getMediaViewerAvailableDimensions(hasFooter, isVideo);\n  const { width: toWidth, height: toHeight } = calculateDimensions(\n    availableWidth, availableHeight, dimensions.width, dimensions.height,\n  );\n  const toLeft = (windowWidth - toWidth) / 2;\n  const toTop = getTopOffset(hasFooter) + (availableHeight - toHeight) / 2;\n\n  let {\n    top: fromTop, left: fromLeft, width: fromWidth, height: fromHeight,\n  } = fromImage.getBoundingClientRect();\n\n  if ([\n    MediaViewerOrigin.SharedMedia,\n    MediaViewerOrigin.Album,\n    MediaViewerOrigin.ScheduledAlbum,\n    MediaViewerOrigin.SearchResult,\n  ].includes(origin)) {\n    const uncovered = uncover(toWidth, toHeight, fromTop, fromLeft, fromWidth, fromHeight);\n    fromTop = uncovered.top;\n    fromLeft = uncovered.left;\n    fromWidth = uncovered.width;\n    fromHeight = uncovered.height;\n  }\n\n  const fromTranslateX = (fromLeft + fromWidth / 2) - (toLeft + toWidth / 2);\n  const fromTranslateY = (fromTop + fromHeight / 2) - (toTop + toHeight / 2);\n  const fromScaleX = fromWidth / toWidth;\n  const fromScaleY = fromHeight / toHeight;\n\n  requestMutation(() => {\n    const ghost = createGhost(bestImageData || fromImage);\n    applyStyles(ghost, {\n      top: `${toTop}px`,\n      left: `${toLeft}px`,\n      width: `${toWidth}px`,\n      height: `${toHeight}px`,\n      transform: `translate3d(${fromTranslateX}px, ${fromTranslateY}px, 0) scale(${fromScaleX}, ${fromScaleY})`,\n    });\n    applyShape(ghost, origin);\n\n    document.body.appendChild(ghost);\n    document.body.classList.add('ghost-animating');\n\n    requestMutation(() => {\n      ghost.style.transform = '';\n      clearShape(ghost);\n\n      setTimeout(() => {\n        requestMutation(() => {\n          if (document.body.contains(ghost)) {\n            document.body.removeChild(ghost);\n          }\n          document.body.classList.remove('ghost-animating');\n        });\n      }, ANIMATION_DURATION + ANIMATION_END_DELAY);\n    });\n  });\n}\n\nexport function animateClosing(\n  origin: MediaViewerOrigin, bestImageData: string, message?: ApiMessage, mediaIndex?: number,\n) {\n  const { container, mediaEl: toImage } = getNodes(origin, message, mediaIndex);\n  if (!toImage) {\n    return;\n  }\n\n  const fromImage = document.getElementById('MediaViewer')!.querySelector<HTMLImageElement>(\n    '.MediaViewerSlide--active img, .MediaViewerSlide--active video',\n  );\n  if (!fromImage) {\n    return;\n  }\n\n  const {\n    top: fromTop, left: fromLeft, width: fromWidth, height: fromHeight,\n  } = fromImage.getBoundingClientRect();\n  const {\n    top: targetTop, left: toLeft, width: toWidth, height: toHeight,\n  } = toImage.getBoundingClientRect();\n\n  let toTop = targetTop;\n  if (!isElementInViewport(container)) {\n    const { height: windowHeight } = windowSize.get();\n    toTop = targetTop < fromTop ? -toHeight : windowHeight;\n  }\n\n  const fromTranslateX = (fromLeft + fromWidth / 2) - (toLeft + toWidth / 2);\n  const fromTranslateY = (fromTop + fromHeight / 2) - (toTop + toHeight / 2);\n  let fromScaleX = fromWidth / toWidth;\n  let fromScaleY = fromHeight / toHeight;\n\n  const shouldFadeOut = (\n    [MediaViewerOrigin.Inline, MediaViewerOrigin.ScheduledInline].includes(origin)\n    && !isMessageImageFullyVisible(container, toImage)\n  ) || (\n    [MediaViewerOrigin.Album, MediaViewerOrigin.ScheduledAlbum].includes(origin)\n    && !isMessageImageFullyVisible(container, toImage)\n  );\n\n  if ([\n    MediaViewerOrigin.SharedMedia,\n    MediaViewerOrigin.Album,\n    MediaViewerOrigin.ScheduledAlbum,\n    MediaViewerOrigin.SearchResult,\n  ].includes(origin)) {\n    if (fromScaleX > fromScaleY) {\n      fromScaleX = fromScaleY;\n    } else if (fromScaleY > fromScaleX) {\n      fromScaleY = fromScaleX;\n    }\n  }\n\n  const existingGhost = document.getElementsByClassName('ghost')[0] as HTMLDivElement;\n  const ghost = existingGhost || createGhost(bestImageData || toImage, origin);\n\n  let styles: Record<string, string>;\n  if (existingGhost) {\n    const {\n      top, left, width, height,\n    } = existingGhost.getBoundingClientRect();\n    const scaleX = width / toWidth;\n    const scaleY = height / toHeight;\n\n    styles = {\n      transition: 'none',\n      top: `${toTop}px`,\n      left: `${toLeft}px`,\n      transformOrigin: 'top left',\n      transform: `translate3d(${left - toLeft}px, ${top - toTop}px, 0) scale(${scaleX}, ${scaleY})`,\n      width: `${toWidth}px`,\n      height: `${toHeight}px`,\n    };\n  } else {\n    styles = {\n      top: `${toTop}px`,\n      left: `${toLeft}px`,\n      width: `${toWidth}px`,\n      height: `${toHeight}px`,\n      transform: `translate3d(${fromTranslateX}px, ${fromTranslateY}px, 0) scale(${fromScaleX}, ${fromScaleY})`,\n    };\n  }\n\n  requestMutation(() => {\n    applyStyles(ghost, styles);\n    if (!existingGhost) document.body.appendChild(ghost);\n    document.body.classList.add('ghost-animating');\n\n    requestMutation(() => {\n      if (existingGhost) {\n        existingGhost.style.transition = '';\n      }\n\n      ghost.style.transform = '';\n\n      if (shouldFadeOut) {\n        ghost.style.opacity = '0';\n      }\n\n      applyShape(ghost, origin);\n\n      setTimeout(() => {\n        requestMutation(() => {\n          if (document.body.contains(ghost)) {\n            document.body.removeChild(ghost);\n          }\n          document.body.classList.remove('ghost-animating');\n        });\n      }, ANIMATION_DURATION + ANIMATION_END_DELAY);\n    });\n  });\n}\n\nfunction createGhost(source: string | HTMLImageElement | HTMLVideoElement, origin?: MediaViewerOrigin) {\n  const ghost = document.createElement('div');\n  ghost.classList.add('ghost');\n\n  const img = new Image();\n  img.draggable = false;\n  img.oncontextmenu = stopEvent;\n\n  if (typeof source === 'string') {\n    img.src = source;\n  } else if (source instanceof HTMLVideoElement) {\n    img.src = source.poster;\n  } else {\n    img.src = source.src;\n  }\n\n  ghost.appendChild(img);\n\n  if (origin === MediaViewerOrigin.ProfileAvatar || origin === MediaViewerOrigin.SettingsAvatar) {\n    ghost.classList.add('ProfileInfo');\n    if (origin === MediaViewerOrigin.SettingsAvatar) {\n      ghost.classList.add('self');\n    }\n    const profileInfo = document.querySelector(\n      origin === MediaViewerOrigin.ProfileAvatar\n        ? '#RightColumn .ProfileInfo .info'\n        : '#Settings .ProfileInfo .info',\n    );\n    if (profileInfo) {\n      ghost.appendChild(profileInfo.cloneNode(true));\n    }\n  }\n\n  return ghost;\n}\n\nfunction uncover(realWidth: number, realHeight: number, top: number, left: number, width: number, height: number) {\n  if (realWidth === realHeight) {\n    const size = Math.max(width, height) * (realWidth / realHeight);\n    left -= (size - width) / 2;\n    top -= (size - height) / 2;\n    width = size;\n    height = size;\n  } else if (realWidth > realHeight) {\n    const srcWidth = width;\n    width = height * (realWidth / realHeight);\n    left -= (width - srcWidth) / 2;\n  } else if (realHeight > realWidth) {\n    const srcHeight = height;\n    height = width * (realHeight / realWidth);\n    top -= (height - srcHeight) / 2;\n  }\n\n  return {\n    top, left, width, height,\n  };\n}\n\nfunction isMessageImageFullyVisible(container: HTMLElement, imageEl: HTMLElement) {\n  const messageListElement = document.querySelector<HTMLDivElement>('.Transition_slide-active > .MessageList')!;\n  let imgOffsetTop = container.offsetTop + imageEl.closest<HTMLDivElement>('.content-inner, .WebPage')!.offsetTop;\n  if (container.id.includes('album-media-')) {\n    imgOffsetTop += container.parentElement!.offsetTop + container.closest<HTMLDivElement>('.Message')!.offsetTop;\n  }\n\n  return imgOffsetTop > messageListElement.scrollTop\n    && imgOffsetTop + imageEl.offsetHeight < messageListElement.scrollTop + messageListElement.offsetHeight;\n}\n\nfunction getTopOffset(hasFooter: boolean) {\n  const mql = window.matchMedia(MEDIA_VIEWER_MEDIA_QUERY);\n  let topOffsetRem = 4.125;\n  if (hasFooter && !IS_TOUCH_ENV) {\n    topOffsetRem += mql.matches ? 0.875 : 2.125;\n  }\n\n  return topOffsetRem * REM;\n}\n\nfunction getNodes(origin: MediaViewerOrigin, message?: ApiMessage, index?: number) {\n  let containerSelector;\n  let mediaSelector;\n\n  switch (origin) {\n    case MediaViewerOrigin.Album:\n    case MediaViewerOrigin.ScheduledAlbum:\n      // eslint-disable-next-line max-len\n      containerSelector = `.Transition_slide-active > .MessageList #album-media-${getMessageHtmlId(message!.id, index)}`;\n      mediaSelector = '.full-media';\n      break;\n\n    case MediaViewerOrigin.SharedMedia:\n      containerSelector = `#shared-media${getMessageHtmlId(message!.id, index)}`;\n      mediaSelector = 'img';\n      break;\n\n    case MediaViewerOrigin.SearchResult:\n      containerSelector = `#search-media${getMessageHtmlId(message!.id, index)}`;\n      mediaSelector = 'img';\n      break;\n\n    case MediaViewerOrigin.MiddleHeaderAvatar:\n      containerSelector = '.MiddleHeader .Transition_slide-active .ChatInfo .Avatar';\n      mediaSelector = '.avatar-media';\n      break;\n\n    case MediaViewerOrigin.SettingsAvatar:\n      containerSelector = '#Settings .ProfileInfo .Transition_slide-active .ProfilePhoto';\n      mediaSelector = '.avatar-media';\n      break;\n\n    case MediaViewerOrigin.ProfileAvatar:\n      containerSelector = '#RightColumn .ProfileInfo .Transition_slide-active .ProfilePhoto';\n      mediaSelector = '.avatar-media';\n      break;\n\n    case MediaViewerOrigin.SuggestedAvatar:\n      containerSelector = `.Transition_slide-active > .MessageList #${getMessageHtmlId(message!.id, index)}`;\n      mediaSelector = '.Avatar img';\n      break;\n\n    case MediaViewerOrigin.StarsTransaction:\n      containerSelector = '.transaction-media-preview';\n      mediaSelector = index === 0 ? `.stars-transaction-media-${index} :is(img, video)` : undefined;\n      break;\n\n    case MediaViewerOrigin.ScheduledInline:\n    case MediaViewerOrigin.Inline:\n    default:\n      containerSelector = `.Transition_slide-active > .MessageList #${getMessageHtmlId(message!.id, index)}`;\n      mediaSelector = `${MESSAGE_CONTENT_SELECTOR} .full-media,${MESSAGE_CONTENT_SELECTOR} .thumbnail:not(.blurred-bg)`;\n  }\n\n  const container = document.querySelector<HTMLElement>(containerSelector)!;\n  const mediaEls = mediaSelector\n    ? container?.querySelectorAll<HTMLImageElement | HTMLVideoElement>(mediaSelector) : undefined;\n\n  return {\n    container,\n    mediaEl: mediaEls?.[0],\n  };\n}\n\nfunction applyShape(ghost: HTMLDivElement, origin: MediaViewerOrigin) {\n  switch (origin) {\n    case MediaViewerOrigin.Album:\n    case MediaViewerOrigin.ScheduledAlbum:\n    case MediaViewerOrigin.Inline:\n    case MediaViewerOrigin.ScheduledInline:\n    case MediaViewerOrigin.StarsTransaction:\n      ghost.classList.add('rounded-corners');\n      break;\n\n    case MediaViewerOrigin.SharedMedia:\n    case MediaViewerOrigin.SettingsAvatar:\n    case MediaViewerOrigin.ProfileAvatar:\n    case MediaViewerOrigin.SearchResult:\n      (ghost.firstChild as HTMLElement).style.objectFit = 'cover';\n      break;\n\n    case MediaViewerOrigin.MiddleHeaderAvatar:\n    case MediaViewerOrigin.SuggestedAvatar:\n      ghost.classList.add('circle');\n      if (origin === MediaViewerOrigin.SuggestedAvatar) {\n        ghost.classList.add('transition-circle');\n      }\n      break;\n  }\n}\n\nfunction clearShape(ghost: HTMLDivElement) {\n  (ghost.firstChild as HTMLElement).style.objectFit = 'default';\n  ghost.classList.remove('rounded-corners', 'circle');\n}\n","import { createSignal } from '../../../util/signals';\n\nimport useDerivedSignal from '../../../hooks/useDerivedSignal';\n\nconst [getControlsVisible, setControlsVisible] = createSignal(false);\nconst [getIsLocked, setIsLocked] = createSignal(false);\n\nexport default function useControlsSignal() {\n  const getVisible = useDerivedSignal(\n    () => getControlsVisible() && !getIsLocked(),\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n    [getControlsVisible, getIsLocked],\n  );\n\n  return [getVisible, setControlsVisible, setIsLocked] as const;\n}\n","import { useMemo } from '../../../lib/teact/teact';\n\nimport type { MediaViewerMedia } from '../../../types';\nimport { ApiMediaFormat } from '../../../api/types';\nimport { MediaViewerOrigin } from '../../../types';\n\nimport {\n  getMediaFileSize,\n  getMediaFormat,\n  getMediaHash,\n  getMediaThumbUri,\n  getPhotoFullDimensions,\n  getVideoAvatarMediaHash,\n  getVideoDimensions,\n  isDocumentPhoto,\n  isDocumentVideo,\n} from '../../../global/helpers';\nimport { AVATAR_FULL_DIMENSIONS, VIDEO_AVATAR_FULL_DIMENSIONS } from '../../common/helpers/mediaDimensions';\n\nimport useBlurSync from '../../../hooks/useBlurSync';\nimport useMedia from '../../../hooks/useMedia';\nimport useMediaWithLoadProgress from '../../../hooks/useMediaWithLoadProgress';\n\ntype UseMediaProps = {\n  media?: MediaViewerMedia;\n  isAvatar?: boolean;\n  origin?: MediaViewerOrigin;\n  delay: number | false;\n};\n\nexport const useMediaProps = ({\n  media,\n  isAvatar,\n  origin,\n  delay,\n}: UseMediaProps) => {\n  const isVideoAvatar = isAvatar && media?.mediaType === 'photo' && media.isVideo;\n  const isDocument = media?.mediaType === 'document';\n  const isVideo = (media?.mediaType === 'video' && !media.isRound) || (isDocument && isDocumentVideo(media));\n  const isPhoto = media?.mediaType === 'photo' || (isDocument && isDocumentPhoto(media));\n  const isGif = media?.mediaType === 'video' && media.isGif;\n  const isFromSharedMedia = origin === MediaViewerOrigin.SharedMedia;\n  const isFromSearch = origin === MediaViewerOrigin.SearchResult;\n\n  const getMediaOrAvatarHash = useMemo(() => (isFull?: boolean) => {\n    if (!media) return undefined;\n\n    if (isVideoAvatar && isFull) {\n      return getVideoAvatarMediaHash(media);\n    }\n\n    return getMediaHash(media, isFull ? 'full' : 'preview');\n  }, [isVideoAvatar, media]);\n\n  const pictogramBlobUrl = useMedia(\n    media\n    // Only use pictogram if it's already loaded\n    && (isFromSharedMedia || isFromSearch || isDocument)\n    && getMediaHash(media, 'pictogram'),\n    undefined,\n    ApiMediaFormat.BlobUrl,\n    delay,\n  );\n  const previewMediaHash = getMediaOrAvatarHash();\n  const previewBlobUrl = useMedia(\n    previewMediaHash,\n    undefined,\n    ApiMediaFormat.BlobUrl,\n    delay,\n  );\n  const {\n    mediaData: fullMediaBlobUrl,\n    loadProgress,\n  } = useMediaWithLoadProgress(\n    getMediaOrAvatarHash(true),\n    undefined,\n    media && getMediaFormat(media, 'full'),\n    delay,\n  );\n\n  const localBlobUrl = media && 'blobUrl' in media ? media.blobUrl : undefined;\n  let bestImageData = (!isVideo && (localBlobUrl || fullMediaBlobUrl)) || previewBlobUrl || pictogramBlobUrl;\n  const thumbDataUri = useBlurSync(!bestImageData && media && getMediaThumbUri(media));\n  if (!bestImageData && origin !== MediaViewerOrigin.SearchResult) {\n    bestImageData = thumbDataUri;\n  }\n  if (isVideoAvatar && previewBlobUrl) {\n    bestImageData = previewBlobUrl;\n  }\n  const bestData = localBlobUrl || fullMediaBlobUrl || (\n    (!isVideoAvatar && !isVideo) ? (previewBlobUrl || pictogramBlobUrl || bestImageData) : undefined\n  );\n\n  const mediaSize = media && getMediaFileSize(media);\n\n  const isLocal = Boolean(localBlobUrl);\n\n  const dimensions = useMemo(() => {\n    if (isAvatar) {\n      return isVideoAvatar ? VIDEO_AVATAR_FULL_DIMENSIONS : AVATAR_FULL_DIMENSIONS;\n    }\n\n    if (isDocument) {\n      return media.mediaSize!;\n    }\n\n    if (isPhoto) {\n      return getPhotoFullDimensions(media);\n    }\n\n    if (isVideo) {\n      return getVideoDimensions(media);\n    }\n    return undefined;\n  }, [isAvatar, isDocument, isPhoto, isVideo, isVideoAvatar, media]);\n\n  return {\n    getMediaHash: getMediaOrAvatarHash,\n    media,\n    isVideo,\n    isPhoto,\n    isGif,\n    isDocument,\n    bestImageData,\n    bestData,\n    dimensions,\n    isFromSharedMedia,\n    isVideoAvatar,\n    isLocal,\n    loadProgress,\n    mediaSize,\n  };\n};\n","import { useEffect } from '../../../lib/teact/teact';\n\nimport { createSignal } from '../../../util/signals';\n\nexport const [getIsVideoWaiting, setIsVideoWaiting] = createSignal(false);\n\nexport default function useVideoWaitingSignal() {\n  useEffect(() => {\n    return () => {\n      setIsVideoWaiting(false);\n    };\n  }, []);\n  return [getIsVideoWaiting, setIsVideoWaiting] as const;\n}\n","import { useEffect } from '../../../lib/teact/teact';\n\nimport { createSignal } from '../../../util/signals';\n\nconst [getZoomChange, setZoomChange] = createSignal(1);\n\nexport default function useZoomChange() {\n  useEffect(() => {\n    return () => {\n      setZoomChange(1);\n    };\n  }, []);\n\n  return [getZoomChange, setZoomChange] as const;\n}\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { SUPPORTED_TRANSLATION_LANGUAGES } from '../../config';\nimport {\n  selectLanguageCode,\n  selectRequestedChatTranslationLanguage,\n  selectRequestedMessageTranslationLanguage,\n  selectTabState,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport renderText from '../common/helpers/renderText';\n\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport InputText from '../ui/InputText';\nimport ListItem from '../ui/ListItem';\nimport Modal from '../ui/Modal';\n\nimport styles from './ChatLanguageModal.module.scss';\n\ntype LanguageItem = {\n  langCode: string;\n  translatedName: string;\n  originalName: string;\n};\n\nexport type OwnProps = {\n  isOpen?: boolean;\n};\n\ntype StateProps = {\n  chatId?: string;\n  messageId?: number;\n  activeTranslationLanguage?: string;\n  currentLanguageCode: string;\n};\n\nconst ChatLanguageModal: FC<OwnProps & StateProps> = ({\n  isOpen,\n  chatId,\n  messageId,\n  activeTranslationLanguage,\n  currentLanguageCode,\n}) => {\n  const {\n    requestMessageTranslation,\n    closeChatLanguageModal,\n    setSettingOption,\n    requestChatTranslation,\n  } = getActions();\n\n  const [search, setSearch] = useState('');\n  const lang = useOldLang();\n\n  const handleSelect = useLastCallback((langCode: string) => {\n    if (!chatId) return;\n\n    if (messageId) {\n      requestMessageTranslation({ chatId, id: messageId, toLanguageCode: langCode });\n    } else {\n      setSettingOption({ translationLanguage: langCode });\n      requestChatTranslation({ chatId, toLanguageCode: langCode });\n    }\n\n    closeChatLanguageModal();\n  });\n\n  const handleSearch = useLastCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setSearch(e.target.value);\n  });\n\n  const translateLanguages = useMemo(() => SUPPORTED_TRANSLATION_LANGUAGES.map((langCode: string) => {\n    const translatedNames = new Intl.DisplayNames([currentLanguageCode], { type: 'language' });\n    const translatedName = translatedNames.of(langCode)!;\n\n    const originalNames = new Intl.DisplayNames([langCode], { type: 'language' });\n    const originalName = originalNames.of(langCode)!;\n\n    return {\n      langCode,\n      translatedName,\n      originalName,\n    } satisfies LanguageItem;\n  }), [currentLanguageCode]);\n\n  useEffect(() => {\n    if (!isOpen) setSearch('');\n  }, [isOpen]);\n\n  const filteredDisplayedLanguages = useMemo(() => {\n    if (!search.trim()) {\n      return translateLanguages;\n    }\n\n    return translateLanguages.filter(({ langCode, translatedName, originalName }) => (\n      translatedName.toLowerCase().includes(search.toLowerCase())\n      || originalName.toLowerCase().includes(search.toLowerCase())\n      || langCode.toLowerCase().includes(search.toLowerCase())\n    ));\n  }, [translateLanguages, search]);\n\n  return (\n    <Modal\n      className={styles.root}\n      isSlim\n      isOpen={isOpen}\n      hasCloseButton\n      title={lang('Language')}\n      onClose={closeChatLanguageModal}\n    >\n      <InputText\n        key=\"search\"\n        value={search}\n        onChange={handleSearch}\n        placeholder={lang('Search')}\n        teactExperimentControlled\n      />\n      <div className={buildClassName(styles.languages, 'custom-scroll')}>\n        {filteredDisplayedLanguages.map(({ langCode, originalName, translatedName }) => (\n          <ListItem\n            key={langCode}\n            className={buildClassName(styles.listItem, 'no-icon')}\n            secondaryIcon={activeTranslationLanguage === langCode ? 'check' : undefined}\n            disabled={activeTranslationLanguage === langCode}\n            multiline\n            narrow\n            // eslint-disable-next-line react/jsx-no-bind\n            onClick={() => handleSelect(langCode)}\n          >\n            <span className={buildClassName('title', styles.title)}>\n              {renderText(originalName, ['highlight'], { highlight: search })}\n            </span>\n            <span className={buildClassName('subtitle', styles.subtitle)}>\n              {renderText(translatedName, ['highlight'], { highlight: search })}\n            </span>\n          </ListItem>\n        ))}\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const { chatId, messageId } = selectTabState(global).chatLanguageModal || {};\n\n    const currentLanguageCode = selectLanguageCode(global);\n    const activeTranslationLanguage = chatId\n      ? messageId\n        ? selectRequestedMessageTranslationLanguage(global, chatId, messageId)\n        : selectRequestedChatTranslationLanguage(global, chatId)\n      : undefined;\n\n    return {\n      chatId,\n      messageId,\n      activeTranslationLanguage,\n      currentLanguageCode,\n    };\n  },\n)(ChatLanguageModal));\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo, useEffect } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport {\n  getPrivateChatUserId,\n  getUserFirstOrLastName,\n  isChatBasicGroup,\n  isChatSuperGroup,\n  isUserId,\n} from '../../global/helpers';\nimport {\n  selectCanDeleteSelectedMessages, selectCurrentChat, selectTabState, selectUser,\n} from '../../global/selectors';\nimport renderText from '../common/helpers/renderText';\n\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useOldLang from '../../hooks/useOldLang';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\n\nexport type OwnProps = {\n  isOpen: boolean;\n  isSchedule: boolean;\n  onClose: () => void;\n};\n\ntype StateProps = {\n  selectedMessageIds?: number[];\n  canDeleteForAll?: boolean;\n  contactName?: string;\n  willDeleteForCurrentUserOnly?: boolean;\n  willDeleteForAll?: boolean;\n};\n\nconst DeleteSelectedMessageModal: FC<OwnProps & StateProps> = ({\n  isOpen,\n  isSchedule,\n  selectedMessageIds,\n  canDeleteForAll,\n  contactName,\n  willDeleteForCurrentUserOnly,\n  willDeleteForAll,\n  onClose,\n}) => {\n  const {\n    deleteMessages,\n    deleteScheduledMessages,\n    exitMessageSelectMode,\n  } = getActions();\n\n  const prevIsOpen = usePrevious(isOpen);\n\n  const handleDeleteMessageForAll = useLastCallback(() => {\n    onClose();\n    deleteMessages({ messageIds: selectedMessageIds!, shouldDeleteForAll: true });\n  });\n\n  const handleDeleteMessageForSelf = useLastCallback(() => {\n    if (isSchedule) {\n      deleteScheduledMessages({ messageIds: selectedMessageIds! });\n    } else {\n      deleteMessages({ messageIds: selectedMessageIds!, shouldDeleteForAll: false });\n    }\n\n    onClose();\n  });\n\n  const lang = useOldLang();\n\n  // Returning `undefined` from FC instead of `<Modal>` doesn't trigger useHistoryBack\n  useEffect(() => {\n    if (!isOpen && prevIsOpen) {\n      exitMessageSelectMode();\n    }\n  }, [exitMessageSelectMode, isOpen, prevIsOpen]);\n\n  if (!selectedMessageIds) {\n    return undefined;\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      onEnter={canDeleteForAll ? undefined : handleDeleteMessageForSelf}\n      className=\"delete\"\n      title={lang('Conversation.DeleteManyMessages')}\n    >\n      <p>{lang('AreYouSureDeleteFewMessages')}</p>\n      {willDeleteForCurrentUserOnly && (\n        <p>This will delete them just for you, not for other participants in the chat.</p>\n      )}\n      {willDeleteForAll && (\n        <p>This will delete them for everyone in this chat.</p>\n      )}\n      <div className={canDeleteForAll ? 'dialog-buttons-column' : 'dialog-buttons'}>\n        {canDeleteForAll && (\n          <Button color=\"danger\" className=\"confirm-dialog-button\" isText onClick={handleDeleteMessageForAll}>\n            {contactName\n              ? renderText(lang('ChatList.DeleteForEveryone', contactName))\n              : lang('Conversation.DeleteMessagesForEveryone')}\n          </Button>\n        )}\n        <Button color=\"danger\" className=\"confirm-dialog-button\" isText onClick={handleDeleteMessageForSelf}>\n          {lang(canDeleteForAll ? 'ChatList.DeleteForCurrentUser' : 'Delete')}\n        </Button>\n        <Button className=\"confirm-dialog-button\" isText onClick={onClose}>{lang('Cancel')}</Button>\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { isSchedule }): StateProps => {\n    const { messageIds: selectedMessageIds } = selectTabState(global).selectedMessages || {};\n    const { canDeleteForAll } = selectCanDeleteSelectedMessages(global);\n    const chat = selectCurrentChat(global);\n    const contactName = chat && isUserId(chat.id)\n      ? getUserFirstOrLastName(selectUser(global, getPrivateChatUserId(chat)!))\n      : undefined;\n\n    const willDeleteForCurrentUserOnly = chat && isChatBasicGroup(chat) && !canDeleteForAll;\n    const willDeleteForAll = chat && isChatSuperGroup(chat);\n\n    return {\n      selectedMessageIds,\n      canDeleteForAll: !isSchedule && canDeleteForAll,\n      contactName,\n      willDeleteForCurrentUserOnly,\n      willDeleteForAll,\n    };\n  },\n)(DeleteSelectedMessageModal));\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useLayoutEffect, useRef,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ActiveEmojiInteraction } from '../../global/types';\n\nimport {\n  selectAnimatedEmojiEffect,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { IS_ANDROID } from '../../util/windowEnvironment';\n\nimport useFlag from '../../hooks/useFlag';\nimport { dispatchHeavyAnimationEvent } from '../../hooks/useHeavyAnimationCheck';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useMedia from '../../hooks/useMedia';\n\nimport AnimatedSticker from '../common/AnimatedSticker';\n\nimport './EmojiInteractionAnimation.scss';\n\nexport type OwnProps = {\n  activeEmojiInteraction: ActiveEmojiInteraction;\n};\n\ntype StateProps = {\n  effectAnimationId?: string;\n};\n\nconst HIDE_ANIMATION_DURATION = 250;\nconst PLAYING_DURATION = 3000;\nconst EFFECT_SIZE = 309;\n\nconst EmojiInteractionAnimation: FC<OwnProps & StateProps> = ({\n  effectAnimationId,\n  activeEmojiInteraction,\n}) => {\n  const { stopActiveEmojiInteraction } = getActions();\n\n  const [isHiding, startHiding] = useFlag(false);\n  const [isPlaying, startPlaying] = useFlag(false);\n  const timeoutRef = useRef<NodeJS.Timeout>();\n\n  const stop = useLastCallback(() => {\n    startHiding();\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n    setTimeout(() => {\n      stopActiveEmojiInteraction({ id: activeEmojiInteraction.id });\n    }, HIDE_ANIMATION_DURATION);\n  });\n\n  const handleCancelAnimation = useLastCallback((e: UIEvent) => {\n    if (!(e.target as HTMLElement)?.closest('.AnimatedEmoji')) {\n      stop();\n    }\n  });\n\n  useEffect(() => {\n    document.addEventListener('touchstart', handleCancelAnimation);\n    document.addEventListener('touchmove', handleCancelAnimation);\n    document.addEventListener('mousedown', handleCancelAnimation);\n    document.addEventListener('wheel', handleCancelAnimation);\n\n    return () => {\n      document.removeEventListener('touchstart', handleCancelAnimation);\n      document.removeEventListener('touchmove', handleCancelAnimation);\n      document.removeEventListener('mousedown', handleCancelAnimation);\n      document.removeEventListener('wheel', handleCancelAnimation);\n    };\n  }, [handleCancelAnimation]);\n\n  useLayoutEffect(() => {\n    const dispatchHeavyAnimationStop = dispatchHeavyAnimationEvent();\n\n    timeoutRef.current = setTimeout(() => {\n      stop();\n      dispatchHeavyAnimationStop();\n    }, PLAYING_DURATION);\n  }, [stop]);\n\n  const effectHash = effectAnimationId && `sticker${effectAnimationId}`;\n  const effectTgsUrl = useMedia(effectHash, !effectAnimationId);\n\n  if (!activeEmojiInteraction.startSize) {\n    return undefined;\n  }\n\n  const scale = (activeEmojiInteraction.startSize || 0) / EFFECT_SIZE;\n\n  return (\n    <div\n      className={buildClassName(\n        'EmojiInteractionAnimation',\n        isHiding && 'hiding',\n        isPlaying && 'playing',\n        activeEmojiInteraction.isReversed && 'reversed',\n      )}\n      style={`--scale: ${scale}; --start-x: ${activeEmojiInteraction.x}px; --start-y: ${activeEmojiInteraction.y}px;`}\n    >\n      <AnimatedSticker\n        key={`effect_${effectAnimationId}`}\n        size={EFFECT_SIZE}\n        tgsUrl={effectTgsUrl}\n        play\n        quality={IS_ANDROID ? 0.5 : undefined}\n        forceAlways\n        noLoop\n        onLoad={startPlaying}\n      />\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { activeEmojiInteraction }): StateProps => {\n    const animatedEffect = activeEmojiInteraction.animatedEffect !== undefined\n      && selectAnimatedEmojiEffect(global, activeEmojiInteraction.animatedEffect);\n    return {\n      effectAnimationId: animatedEffect ? animatedEffect.id : undefined,\n    };\n  },\n)(EmojiInteractionAnimation));\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiBotCommand, ApiChat } from '../../api/types';\nimport type { IAnchorPosition, ThreadId } from '../../types';\nimport type { IconName } from '../../types/icons';\nimport { MAIN_THREAD_ID } from '../../api/types';\n\nimport { REPLIES_USER_ID } from '../../config';\nimport {\n  getCanAddContact,\n  getCanDeleteChat,\n  getCanManageTopic,\n  getHasAdminRight,\n  getIsSavedDialog,\n  isChatChannel,\n  isChatGroup,\n  isUserId,\n  isUserRightBanned,\n  selectIsChatMuted,\n} from '../../global/helpers';\nimport {\n  selectBot,\n  selectCanManage, selectCanTranslateChat,\n  selectChat,\n  selectChatFullInfo,\n  selectCurrentMessageList,\n  selectIsChatWithSelf,\n  selectIsPremiumPurchaseBlocked,\n  selectIsRightColumnShown, selectNotifyExceptions,\n  selectNotifySettings,\n  selectTabState,\n  selectUser,\n  selectUserFullInfo,\n} from '../../global/selectors';\nimport { disableScrolling, enableScrolling } from '../../util/scrollLock';\n\nimport useAppLayout from '../../hooks/useAppLayout';\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useOldLang from '../../hooks/useOldLang';\nimport usePrevDuringAnimation from '../../hooks/usePrevDuringAnimation';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport DeleteChatModal from '../common/DeleteChatModal';\nimport ReportModal from '../common/ReportModal';\nimport MuteChatModal from '../left/MuteChatModal.async';\nimport Menu from '../ui/Menu';\nimport MenuItem from '../ui/MenuItem';\nimport MenuSeparator from '../ui/MenuSeparator';\nimport Portal from '../ui/Portal';\n\nimport './HeaderMenuContainer.scss';\n\nconst BOT_BUTTONS: Record<string, { icon: IconName; label: string }> = {\n  settings: {\n    icon: 'bots',\n    label: 'BotSettings',\n  },\n  privacy: {\n    icon: 'info',\n    label: 'Privacy',\n  },\n  help: {\n    icon: 'help',\n    label: 'BotHelp',\n  },\n};\n\nexport type OwnProps = {\n  chatId: string;\n  threadId: ThreadId;\n  isOpen: boolean;\n  withExtraActions: boolean;\n  anchor: IAnchorPosition;\n  isChannel?: boolean;\n  canStartBot?: boolean;\n  canSubscribe?: boolean;\n  canSearch?: boolean;\n  canCall?: boolean;\n  canMute?: boolean;\n  canViewStatistics?: boolean;\n  canViewBoosts?: boolean;\n  canShowBoostModal?: boolean;\n  withForumActions?: boolean;\n  canLeave?: boolean;\n  canEnterVoiceChat?: boolean;\n  canCreateVoiceChat?: boolean;\n  pendingJoinRequests?: number;\n  canTranslate?: boolean;\n  onSubscribeChannel: () => void;\n  onSearchClick: () => void;\n  onAsMessagesClick: () => void;\n  onClose: () => void;\n  onCloseAnimationEnd: () => void;\n  onJoinRequestsClick?: () => void;\n};\n\ntype StateProps = {\n  chat?: ApiChat;\n  botCommands?: ApiBotCommand[];\n  isPrivate?: boolean;\n  isMuted?: boolean;\n  isTopic?: boolean;\n  isForum?: boolean;\n  isForumAsMessages?: true;\n  canAddContact?: boolean;\n  canReportChat?: boolean;\n  canDeleteChat?: boolean;\n  canGiftPremium?: boolean;\n  canCreateTopic?: boolean;\n  canEditTopic?: boolean;\n  hasLinkedChat?: boolean;\n  isChatInfoShown?: boolean;\n  isRightColumnShown?: boolean;\n  canManage?: boolean;\n  canTranslate?: boolean;\n  isBlocked?: boolean;\n  isBot?: boolean;\n  isChatWithSelf?: boolean;\n  savedDialog?: ApiChat;\n};\n\nconst CLOSE_MENU_ANIMATION_DURATION = 200;\n\nconst HeaderMenuContainer: FC<OwnProps & StateProps> = ({\n  chatId,\n  threadId,\n  isOpen,\n  withExtraActions,\n  anchor,\n  isChannel,\n  botCommands,\n  withForumActions,\n  isTopic,\n  isForum,\n  isForumAsMessages,\n  isChatInfoShown,\n  canStartBot,\n  canSubscribe,\n  canSearch,\n  canCall,\n  canMute,\n  canViewStatistics,\n  canViewBoosts,\n  pendingJoinRequests,\n  canLeave,\n  canEnterVoiceChat,\n  canCreateVoiceChat,\n  chat,\n  isPrivate,\n  isMuted,\n  canReportChat,\n  canDeleteChat,\n  canGiftPremium,\n  hasLinkedChat,\n  canAddContact,\n  canCreateTopic,\n  canEditTopic,\n  canManage,\n  isRightColumnShown,\n  canTranslate,\n  isBlocked,\n  isBot,\n  isChatWithSelf,\n  savedDialog,\n  canShowBoostModal,\n  onJoinRequestsClick,\n  onSubscribeChannel,\n  onSearchClick,\n  onAsMessagesClick,\n  onClose,\n  onCloseAnimationEnd,\n}) => {\n  const {\n    updateChatMutedState,\n    enterMessageSelectMode,\n    sendBotCommand,\n    restartBot,\n    requestMasterAndJoinGroupCall,\n    createGroupCall,\n    openLinkedChat,\n    openAddContactDialog,\n    requestMasterAndRequestCall,\n    toggleStatistics,\n    openBoostStatistics,\n    openGiftPremiumModal,\n    openThreadWithInfo,\n    openCreateTopicPanel,\n    openEditTopicPanel,\n    openChat,\n    toggleManagement,\n    togglePeerTranslations,\n    blockUser,\n    unblockUser,\n    setViewForumAsMessages,\n    openBoostModal,\n  } = getActions();\n\n  const { isMobile } = useAppLayout();\n  const [isMenuOpen, setIsMenuOpen] = useState(true);\n  const [shouldCloseFast, setShouldCloseFast] = useState(false);\n  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);\n  const [isReportModalOpen, setIsReportModalOpen] = useState(false);\n  const [isMuteModalOpen, setIsMuteModalOpen] = useState(false);\n  const [shouldRenderMuteModal, markRenderMuteModal, unmarkRenderMuteModal] = useFlag();\n  const { x, y } = anchor;\n\n  const chatIdToCRMEidMap = JSON.parse(localStorage.getItem('crmMapper') || '{}');\n  const chatEid = chatIdToCRMEidMap[chatId]?.eid;\n\n  useShowTransition(isOpen, onCloseAnimationEnd, undefined, false);\n  const isViewGroupInfoShown = usePrevDuringAnimation(\n    (!isChatInfoShown && isForum) ? true : undefined, CLOSE_MENU_ANIMATION_DURATION,\n  );\n\n  const handleReport = useLastCallback(() => {\n    setIsMenuOpen(false);\n    setIsReportModalOpen(true);\n  });\n\n  const closeReportModal = useLastCallback(() => {\n    setIsReportModalOpen(false);\n    onClose();\n  });\n\n  const closeMuteModal = useLastCallback(() => {\n    setIsMuteModalOpen(false);\n    onClose();\n  });\n\n  const handleDelete = useLastCallback(() => {\n    setIsMenuOpen(false);\n    setIsDeleteModalOpen(true);\n  });\n\n  const closeMenu = useLastCallback(() => {\n    setIsMenuOpen(false);\n    onClose();\n  });\n\n  const handleViewGroupInfo = useLastCallback(() => {\n    openThreadWithInfo({ chatId, threadId });\n    setShouldCloseFast(!isRightColumnShown);\n    closeMenu();\n  });\n\n  const closeDeleteModal = useLastCallback(() => {\n    setIsDeleteModalOpen(false);\n    onClose();\n  });\n\n  const handleStartBot = useLastCallback(() => {\n    sendBotCommand({ command: '/start' });\n  });\n\n  const handleRestartBot = useLastCallback(() => {\n    restartBot({ chatId });\n  });\n\n  const handleUnmuteClick = useLastCallback(() => {\n    updateChatMutedState({ chatId, isMuted: false });\n    closeMenu();\n  });\n\n  const handleMuteClick = useLastCallback(() => {\n    markRenderMuteModal();\n    setIsMuteModalOpen(true);\n    setIsMenuOpen(false);\n  });\n\n  const handleCreateTopicClick = useLastCallback(() => {\n    openCreateTopicPanel({ chatId });\n    setShouldCloseFast(!isRightColumnShown);\n    closeMenu();\n  });\n\n  const handleEditClick = useLastCallback(() => {\n    toggleManagement({ force: true });\n    setShouldCloseFast(!isRightColumnShown);\n    closeMenu();\n  });\n\n  const handleEditTopicClick = useLastCallback(() => {\n    openEditTopicPanel({ chatId, topicId: Number(threadId) });\n    setShouldCloseFast(!isRightColumnShown);\n    closeMenu();\n  });\n\n  const handleViewAsTopicsClick = useLastCallback(() => {\n    openChat({ id: undefined });\n    setViewForumAsMessages({ chatId, isEnabled: false });\n    closeMenu();\n  });\n\n  const handleAddToCRM = useLastCallback(() => {\n    const message = { type: 'addChatToCRM', chat: JSON.stringify(chat) };\n    window.parent.postMessage(message, '*');\n  });\n\n  const handleOpenInCRM = useLastCallback(() => {\n    const message = { type: 'openInCRM', eid: chatEid };\n    window.parent.postMessage(message, '*');\n  });\n\n  const handleEnterVoiceChatClick = useLastCallback(() => {\n    if (canCreateVoiceChat) {\n      // TODO Show popup to schedule\n      createGroupCall({\n        chatId,\n      });\n    } else {\n      requestMasterAndJoinGroupCall({\n        chatId,\n      });\n    }\n    closeMenu();\n  });\n\n  const handleLinkedChatClick = useLastCallback(() => {\n    openLinkedChat({ id: chatId });\n    closeMenu();\n  });\n\n  const handleGiftPremiumClick = useLastCallback(() => {\n    openGiftPremiumModal({ forUserIds: [chatId] });\n    closeMenu();\n  });\n\n  const handleAddContactClick = useLastCallback(() => {\n    openAddContactDialog({ userId: chatId });\n    closeMenu();\n  });\n\n  const handleSubscribe = useLastCallback(() => {\n    onSubscribeChannel();\n    closeMenu();\n  });\n\n  const handleVideoCall = useLastCallback(() => {\n    requestMasterAndRequestCall({ userId: chatId, isVideo: true });\n    closeMenu();\n  });\n\n  const handleCall = useLastCallback(() => {\n    requestMasterAndRequestCall({ userId: chatId });\n    closeMenu();\n  });\n\n  const handleSearch = useLastCallback(() => {\n    onSearchClick();\n    closeMenu();\n  });\n\n  const handleStatisticsClick = useLastCallback(() => {\n    toggleStatistics();\n    setShouldCloseFast(!isRightColumnShown);\n    closeMenu();\n  });\n\n  const handleBoostClick = useLastCallback(() => {\n    if (canViewBoosts) {\n      openBoostStatistics({ chatId });\n      setShouldCloseFast(!isRightColumnShown);\n    } else {\n      openBoostModal({ chatId });\n    }\n    closeMenu();\n  });\n\n  const handleEnableTranslations = useLastCallback(() => {\n    togglePeerTranslations({ chatId, isEnabled: true });\n    closeMenu();\n  });\n\n  const handleSelectMessages = useLastCallback(() => {\n    enterMessageSelectMode();\n    closeMenu();\n  });\n\n  const handleOpenAsMessages = useLastCallback(() => {\n    onAsMessagesClick();\n    closeMenu();\n  });\n\n  const handleBlock = useLastCallback(() => {\n    blockUser({ userId: chatId });\n    closeMenu();\n  });\n\n  const handleUnblock = useLastCallback(() => {\n    unblockUser({ userId: chatId });\n    closeMenu();\n  });\n\n  useEffect(() => {\n    disableScrolling();\n\n    return enableScrolling;\n  }, []);\n\n  const lang = useOldLang();\n\n  const botButtons = useMemo(() => {\n    return botCommands?.map(({ command }) => {\n      const cmd = BOT_BUTTONS[command];\n      if (!cmd) return undefined;\n      const handleClick = () => {\n        sendBotCommand({ command: `/${command}` });\n        closeMenu();\n      };\n\n      return (\n        <MenuItem\n          key={command}\n          icon={cmd.icon}\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={handleClick}\n        >\n          {lang(cmd.label)}\n        </MenuItem>\n      );\n    });\n  }, [botCommands, closeMenu, lang, sendBotCommand]);\n\n  const deleteTitle = useMemo(() => {\n    if (!chat) return undefined;\n\n    if (savedDialog) {\n      return lang('Delete');\n    }\n\n    if (isPrivate) {\n      return lang('DeleteChatUser');\n    }\n\n    if (canDeleteChat) {\n      return lang('GroupInfo.DeleteAndExit');\n    }\n\n    if (isChannel) {\n      return lang('LeaveChannel');\n    }\n\n    return lang('Group.LeaveGroup');\n  }, [canDeleteChat, chat, isChannel, isPrivate, savedDialog, lang]);\n\n  return (\n    <Portal>\n      <div className=\"HeaderMenuContainer\">\n        <Menu\n          isOpen={isMenuOpen}\n          positionX=\"right\"\n          style={`left: ${x}px;top: ${y}px;`}\n          onClose={closeMenu}\n          shouldCloseFast={shouldCloseFast}\n        >\n          {chatEid ? (\n            <MenuItem\n              icon=\"link-badge\"\n              onClick={handleOpenInCRM}\n            >\n              Open In CRM\n            </MenuItem>\n          ) : (\n            <MenuItem\n              icon=\"add-user\"\n              onClick={handleAddToCRM}\n            >\n              Add To CRM\n            </MenuItem>\n          )}\n          {isMobile && canSearch && (\n            <MenuItem\n              icon=\"search\"\n              onClick={handleSearch}\n            >\n              {lang('Search')}\n            </MenuItem>\n          )}\n          {withForumActions && canCreateTopic && (\n            <>\n              <MenuItem\n                icon=\"comments\"\n                onClick={handleCreateTopicClick}\n              >\n                {lang('lng_forum_create_topic')}\n              </MenuItem>\n              <MenuSeparator />\n            </>\n          )}\n          {isViewGroupInfoShown && (\n            <MenuItem\n              icon=\"info\"\n              onClick={handleViewGroupInfo}\n            >\n              {isTopic ? lang('lng_context_view_topic') : lang('lng_context_view_group')}\n            </MenuItem>\n          )}\n          {canManage && !canEditTopic && (\n            <MenuItem\n              icon=\"edit\"\n              onClick={handleEditClick}\n            >\n              {lang('Edit')}\n            </MenuItem>\n          )}\n          {canEditTopic && (\n            <MenuItem\n              icon=\"edit\"\n              onClick={handleEditTopicClick}\n            >\n              {lang('lng_forum_topic_edit')}\n            </MenuItem>\n          )}\n          {isMobile && !withForumActions && isForum && !isTopic && (\n            <MenuItem\n              icon=\"forums\"\n              onClick={handleViewAsTopicsClick}\n            >\n              {lang('Chat.ContextViewAsTopics')}\n            </MenuItem>\n          )}\n          {withForumActions && Boolean(pendingJoinRequests) && (\n            <MenuItem\n              icon=\"user\"\n              onClick={onJoinRequestsClick}\n            >\n              {isChannel ? lang('SubscribeRequests') : lang('MemberRequests')}\n              <div className=\"right-badge\">{pendingJoinRequests}</div>\n            </MenuItem>\n          )}\n          {withForumActions && !isTopic && !isForumAsMessages && (\n            <MenuItem\n              icon=\"message\"\n              onClick={handleOpenAsMessages}\n            >\n              {lang('lng_forum_view_as_messages')}\n            </MenuItem>\n          )}\n          {withExtraActions && canStartBot && (\n            <MenuItem\n              icon=\"bots\"\n              onClick={handleStartBot}\n            >\n              {lang('BotStart')}\n            </MenuItem>\n          )}\n          {withExtraActions && canSubscribe && (\n            <MenuItem\n              icon={isChannel ? 'channel' : 'group'}\n              onClick={handleSubscribe}\n            >\n              {lang(isChannel ? 'ProfileJoinChannel' : 'ProfileJoinGroup')}\n            </MenuItem>\n          )}\n          {canShowBoostModal && !canViewBoosts && (\n            <MenuItem\n              icon=\"boost-outline\"\n              onClick={handleBoostClick}\n            >\n              {lang(isChannel ? 'BoostingBoostChannelMenu' : 'BoostingBoostGroupMenu')}\n            </MenuItem>\n          )}\n          {canAddContact && (\n            <MenuItem\n              icon=\"add-user\"\n              onClick={handleAddContactClick}\n            >\n              {lang('AddContact')}\n            </MenuItem>\n          )}\n          {isMobile && canCall && (\n            <MenuItem\n              icon=\"phone\"\n              onClick={handleCall}\n            >\n              {lang('Call')}\n            </MenuItem>\n          )}\n          {canCall && (\n            <MenuItem\n              icon=\"video-outlined\"\n              onClick={handleVideoCall}\n            >\n              {lang('VideoCall')}\n            </MenuItem>\n          )}\n          {canMute && (isMuted ? (\n            <MenuItem\n              icon=\"unmute\"\n              onClick={handleUnmuteClick}\n            >\n              {lang('ChatsUnmute')}\n            </MenuItem>\n          )\n            : (\n              <MenuItem\n                icon=\"mute\"\n                onClick={handleMuteClick}\n              >\n                {lang('ChatsMute')}...\n              </MenuItem>\n            )\n          )}\n          {(canEnterVoiceChat || canCreateVoiceChat) && (\n            <MenuItem\n              icon=\"voice-chat\"\n              onClick={handleEnterVoiceChatClick}\n            >\n              {lang(canCreateVoiceChat ? 'StartVoipChat' : 'VoipGroupJoinCall')}\n            </MenuItem>\n          )}\n          {hasLinkedChat && (\n            <MenuItem\n              icon={isChannel ? 'comments' : 'channel'}\n              onClick={handleLinkedChatClick}\n            >\n              {lang(isChannel ? 'ViewDiscussion' : 'lng_profile_view_channel')}\n            </MenuItem>\n          )}\n          {!withForumActions && (\n            <MenuItem\n              icon=\"select\"\n              onClick={handleSelectMessages}\n            >\n              {lang('ReportSelectMessages')}\n            </MenuItem>\n          )}\n          {canViewBoosts && (\n            <MenuItem\n              icon=\"boost-outline\"\n              onClick={handleBoostClick}\n            >\n              {lang('Boosts')}\n            </MenuItem>\n          )}\n          {canViewStatistics && (\n            <MenuItem\n              icon=\"stats\"\n              onClick={handleStatisticsClick}\n            >\n              {lang('Statistics')}\n            </MenuItem>\n          )}\n          {canTranslate && (\n            <MenuItem\n              icon=\"language\"\n              onClick={handleEnableTranslations}\n            >\n              {lang('lng_context_translate')}\n            </MenuItem>\n          )}\n          {canReportChat && (\n            <MenuItem\n              icon=\"flag\"\n              onClick={handleReport}\n            >\n              {lang('ReportPeer.Report')}\n            </MenuItem>\n          )}\n          {botButtons}\n          {canGiftPremium && (\n            <MenuItem\n              icon=\"gift\"\n              onClick={handleGiftPremiumClick}\n            >\n              {lang('GiftPremium')}\n            </MenuItem>\n          )}\n          {isBot && (\n            <MenuItem\n              icon={isBlocked ? 'bots' : 'hand-stop'}\n              onClick={isBlocked ? handleRestartBot : handleBlock}\n            >\n              {isBlocked ? lang('BotRestart') : lang('Bot.Stop')}\n            </MenuItem>\n          )}\n          {isPrivate && !isChatWithSelf && !isBot && (\n            <MenuItem\n              icon={isBlocked ? 'user' : 'hand-stop'}\n              onClick={isBlocked ? handleUnblock : handleBlock}\n            >\n              {isBlocked ? lang('Unblock') : lang('BlockUser')}\n            </MenuItem>\n          )}\n          {canLeave && (\n            <>\n              <MenuSeparator />\n              <MenuItem\n                destructive\n                icon=\"delete\"\n                onClick={handleDelete}\n              >\n                {deleteTitle}\n              </MenuItem>\n            </>\n          )}\n        </Menu>\n        {chat && (\n          <DeleteChatModal\n            isOpen={isDeleteModalOpen}\n            onClose={closeDeleteModal}\n            chat={savedDialog || chat}\n            isSavedDialog={Boolean(savedDialog)}\n          />\n        )}\n        {canMute && shouldRenderMuteModal && chat?.id && (\n          <MuteChatModal\n            isOpen={isMuteModalOpen}\n            onClose={closeMuteModal}\n            onCloseAnimationEnd={unmarkRenderMuteModal}\n            chatId={chat.id}\n          />\n        )}\n        {canReportChat && chat?.id && (\n          <ReportModal\n            isOpen={isReportModalOpen}\n            onClose={closeReportModal}\n            subject=\"peer\"\n            peerId={chat.id}\n          />\n        )}\n      </div>\n    </Portal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { chatId, threadId }): StateProps => {\n    const chat = selectChat(global, chatId);\n    if (!chat || chat.isRestricted) {\n      return {};\n    }\n    const isPrivate = isUserId(chat.id);\n    const user = isPrivate ? selectUser(global, chatId) : undefined;\n    const canAddContact = user && getCanAddContact(user);\n    const isMainThread = threadId === MAIN_THREAD_ID;\n    const isChatWithSelf = selectIsChatWithSelf(global, chatId);\n    const canReportChat = isMainThread && (isChatChannel(chat) || isChatGroup(chat) || (user && !user.isSelf));\n    const { chatId: currentChatId, threadId: currentThreadId } = selectCurrentMessageList(global) || {};\n\n    const chatBot = chatId !== REPLIES_USER_ID ? selectBot(global, chatId) : undefined;\n    const userFullInfo = isPrivate ? selectUserFullInfo(global, chatId) : undefined;\n    const chatFullInfo = !isPrivate ? selectChatFullInfo(global, chatId) : undefined;\n    const fullInfo = userFullInfo || chatFullInfo;\n    const canGiftPremium = Boolean(\n      userFullInfo?.premiumGifts?.length\n      && !selectIsPremiumPurchaseBlocked(global),\n    );\n\n    const topic = chat?.topics?.[threadId];\n    const canCreateTopic = chat.isForum && (\n      chat.isCreator || !isUserRightBanned(chat, 'manageTopics') || getHasAdminRight(chat, 'manageTopics')\n    );\n    const canEditTopic = topic && getCanManageTopic(chat, topic);\n    const canManage = selectCanManage(global, chatId);\n    // Context menu item should only be displayed if user hid translation panel\n    const canTranslate = selectCanTranslateChat(global, chatId) && fullInfo?.isTranslationDisabled;\n\n    const isSavedDialog = getIsSavedDialog(chatId, threadId, global.currentUserId);\n    const savedDialog = isSavedDialog ? selectChat(global, String(threadId)) : undefined;\n\n    return {\n      chat,\n      isMuted: selectIsChatMuted(chat, selectNotifySettings(global), selectNotifyExceptions(global)),\n      isPrivate,\n      isTopic: chat?.isForum && !isMainThread,\n      isForum: chat?.isForum,\n      isForumAsMessages: chat?.isForumAsMessages,\n      canAddContact,\n      canReportChat,\n      canDeleteChat: getCanDeleteChat(chat),\n      canGiftPremium,\n      hasLinkedChat: Boolean(chatFullInfo?.linkedChatId),\n      botCommands: chatBot ? userFullInfo?.botInfo?.commands : undefined,\n      isChatInfoShown: selectTabState(global).isChatInfoShown\n        && currentChatId === chatId && currentThreadId === threadId,\n      canCreateTopic,\n      canEditTopic,\n      canManage,\n      isRightColumnShown: selectIsRightColumnShown(global),\n      canTranslate,\n      isBlocked: userFullInfo?.isBlocked,\n      isBot: Boolean(chatBot),\n      isChatWithSelf,\n      savedDialog,\n    };\n  },\n)(HeaderMenuContainer));\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo, useEffect } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { MessageListType } from '../../global/types';\nimport type { IconName } from '../../types/icons';\n\nimport {\n  selectCanDeleteSelectedMessages,\n  selectCanDownloadSelectedMessages,\n  selectCanForwardMessages,\n  selectCanReportSelectedMessages,\n  selectCurrentMessageList, selectHasProtectedMessage,\n  selectSelectedMessagesCount,\n  selectTabState,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useOldLang from '../../hooks/useOldLang';\nimport usePrevious from '../../hooks/usePrevious';\nimport useCopySelectedMessages from './hooks/useCopySelectedMessages';\n\nimport ReportModal from '../common/ReportModal';\nimport Button from '../ui/Button';\nimport DeleteSelectedMessageModal from './DeleteSelectedMessageModal';\n\nimport './MessageSelectToolbar.scss';\n\nexport type OwnProps = {\n  isActive?: boolean;\n  canPost?: boolean;\n  messageListType?: MessageListType;\n};\n\ntype StateProps = {\n  isSchedule: boolean;\n  selectedMessagesCount?: number;\n  canDeleteMessages?: boolean;\n  canReportMessages?: boolean;\n  canDownloadMessages?: boolean;\n  canForwardMessages?: boolean;\n  hasProtectedMessage?: boolean;\n  isAnyModalOpen?: boolean;\n  selectedMessageIds?: number[];\n};\n\nconst MessageSelectToolbar: FC<OwnProps & StateProps> = ({\n  canPost,\n  isActive,\n  messageListType,\n  isSchedule,\n  selectedMessagesCount,\n  canDeleteMessages,\n  canReportMessages,\n  canDownloadMessages,\n  canForwardMessages,\n  hasProtectedMessage,\n  isAnyModalOpen,\n  selectedMessageIds,\n}) => {\n  const {\n    exitMessageSelectMode,\n    openForwardMenuForSelectedMessages,\n    downloadSelectedMessages,\n    copySelectedMessages,\n    showNotification,\n  } = getActions();\n  const lang = useOldLang();\n\n  const [isDeleteModalOpen, openDeleteModal, closeDeleteModal] = useFlag();\n  const [isReportModalOpen, openReportModal, closeReportModal] = useFlag();\n\n  useCopySelectedMessages(isActive);\n\n  const handleExitMessageSelectMode = useLastCallback(() => {\n    exitMessageSelectMode();\n  });\n\n  useEffect(() => {\n    return isActive && !isDeleteModalOpen && !isReportModalOpen && !isAnyModalOpen\n      ? captureKeyboardListeners({\n        onBackspace: canDeleteMessages ? openDeleteModal : undefined,\n        onDelete: canDeleteMessages ? openDeleteModal : undefined,\n        onEsc: handleExitMessageSelectMode,\n      })\n      : undefined;\n  }, [\n    isActive, isDeleteModalOpen, isReportModalOpen, openDeleteModal, handleExitMessageSelectMode, isAnyModalOpen,\n    canDeleteMessages,\n  ]);\n\n  const handleCopy = useLastCallback(() => {\n    copySelectedMessages();\n    showNotification({\n      message: lang('Share.Link.Copied'),\n    });\n    exitMessageSelectMode();\n  });\n\n  const handleDownload = useLastCallback(() => {\n    downloadSelectedMessages();\n    exitMessageSelectMode();\n  });\n\n  const prevSelectedMessagesCount = usePrevious(selectedMessagesCount || undefined, true);\n  const renderingSelectedMessagesCount = isActive ? selectedMessagesCount : prevSelectedMessagesCount;\n\n  const formattedMessagesCount = lang('VoiceOver.Chat.MessagesSelected', renderingSelectedMessagesCount, 'i');\n\n  const className = buildClassName(\n    'MessageSelectToolbar',\n    canPost && 'with-composer',\n    isActive && 'shown',\n  );\n\n  const renderButton = (\n    icon: IconName, label: string, onClick: AnyToVoidFunction, destructive?: boolean,\n  ) => {\n    return (\n      <div\n        role=\"button\"\n        tabIndex={0}\n        className={buildClassName(\n          'div-button',\n          'item',\n          destructive && 'destructive',\n        )}\n        onClick={onClick}\n        title={label}\n        aria-label={label}\n      >\n        <i className={buildClassName('icon', `icon-${icon}`)} />\n      </div>\n    );\n  };\n\n  return (\n    <div className={className}>\n      <div className=\"MessageSelectToolbar-inner\">\n        <Button\n          color=\"translucent\"\n          round\n          onClick={handleExitMessageSelectMode}\n          ariaLabel=\"Exit select mode\"\n        >\n          <i className=\"icon icon-close\" />\n        </Button>\n        <span className=\"MessageSelectToolbar-count\" title={formattedMessagesCount}>\n          {formattedMessagesCount}\n        </span>\n\n        {Boolean(selectedMessagesCount) && (\n          <div className=\"MessageSelectToolbar-actions\">\n            {messageListType !== 'scheduled' && canForwardMessages && (\n              renderButton(\n                'forward', lang('Chat.ForwardActionHeader'), openForwardMenuForSelectedMessages,\n              )\n            )}\n            {canReportMessages && (\n              renderButton('flag', lang('Conversation.ReportMessages'), openReportModal)\n            )}\n            {canDownloadMessages && !hasProtectedMessage && (\n              renderButton('download', lang('lng_media_download'), handleDownload)\n            )}\n            {!hasProtectedMessage && (\n              renderButton('copy', lang('lng_context_copy_selected_items'), handleCopy)\n            )}\n            {canDeleteMessages && (\n              renderButton('delete', lang('EditAdminGroupDeleteMessages'), openDeleteModal, true)\n            )}\n          </div>\n        )}\n      </div>\n      <DeleteSelectedMessageModal\n        isOpen={isDeleteModalOpen}\n        isSchedule={isSchedule}\n        onClose={closeDeleteModal}\n      />\n      <ReportModal\n        isOpen={isReportModalOpen}\n        onClose={closeReportModal}\n        messageIds={selectedMessageIds}\n      />\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const tabState = selectTabState(global);\n    const { type: messageListType, chatId } = selectCurrentMessageList(global) || {};\n    const isSchedule = messageListType === 'scheduled';\n    const { canDelete } = selectCanDeleteSelectedMessages(global);\n    const canReport = Boolean(!isSchedule && selectCanReportSelectedMessages(global));\n    const canDownload = selectCanDownloadSelectedMessages(global);\n    const { messageIds: selectedMessageIds } = tabState.selectedMessages || {};\n    const hasProtectedMessage = chatId ? selectHasProtectedMessage(global, chatId, selectedMessageIds) : false;\n    const canForward = !isSchedule && chatId ? selectCanForwardMessages(global, chatId, selectedMessageIds) : false;\n    const isForwardModalOpen = tabState.forwardMessages.isModalShown;\n    const isAnyModalOpen = Boolean(isForwardModalOpen || tabState.requestedDraft\n      || tabState.requestedAttachBotInChat || tabState.requestedAttachBotInstall);\n\n    return {\n      isSchedule,\n      selectedMessagesCount: selectSelectedMessagesCount(global),\n      canDeleteMessages: canDelete,\n      canReportMessages: canReport,\n      canDownloadMessages: canDownload,\n      canForwardMessages: canForward,\n      selectedMessageIds,\n      hasProtectedMessage,\n      isAnyModalOpen,\n    };\n  },\n)(MessageSelectToolbar));\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useLayoutEffect,\n  useMemo,\n  useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type {\n  ApiChat, ApiReaction, ApiReactionKey, ApiSavedReactionTag,\n} from '../../api/types';\nimport type { ThreadId } from '../../types';\n\nimport { requestMutation } from '../../lib/fasterdom/fasterdom';\nimport { getIsSavedDialog, getReactionKey, isSameReaction } from '../../global/helpers';\nimport {\n  selectChat,\n  selectCurrentMessageList,\n  selectCurrentTextSearch,\n  selectIsChatWithSelf,\n  selectIsCurrentUserPremium,\n  selectTabState,\n} from '../../global/selectors';\nimport { getDayStartAt } from '../../util/dates/dateFormat';\nimport { debounce } from '../../util/schedulers';\nimport { IS_IOS } from '../../util/windowEnvironment';\n\nimport useHorizontalScroll from '../../hooks/useHorizontalScroll';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport SearchInput from '../ui/SearchInput';\nimport SavedTagButton from './message/reactions/SavedTagButton';\n\nimport './MobileSearch.scss';\n\nexport type OwnProps = {\n  isActive: boolean;\n};\n\ntype StateProps = {\n  isActive?: boolean;\n  chat?: ApiChat;\n  threadId?: ThreadId;\n  query?: string;\n  savedTags?: Record<ApiReactionKey, ApiSavedReactionTag>;\n  searchTag?: ApiReaction;\n  totalCount?: number;\n  foundIds?: number[];\n  isHistoryCalendarOpen?: boolean;\n  isCurrentUserPremium?: boolean;\n};\n\nconst runDebouncedForSearch = debounce((cb) => cb(), 200, false);\n\nconst MobileSearchFooter: FC<StateProps> = ({\n  isActive,\n  chat,\n  threadId,\n  query,\n  savedTags,\n  searchTag,\n  totalCount,\n  foundIds,\n  isHistoryCalendarOpen,\n  isCurrentUserPremium,\n}) => {\n  const {\n    setLocalTextSearchQuery,\n    setLocalTextSearchTag,\n    searchTextMessagesLocal,\n    focusMessage,\n    closeLocalTextSearch,\n    openHistoryCalendar,\n    openPremiumModal,\n    loadSavedReactionTags,\n  } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const inputRef = useRef<HTMLInputElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const tagsRef = useRef<HTMLDivElement>(null);\n\n  const [focusedIndex, setFocusedIndex] = useState(0);\n\n  const hasQueryData = Boolean(query || searchTag);\n\n  // Fix for iOS keyboard\n  useEffect(() => {\n    const { visualViewport } = window as any;\n    if (!visualViewport) {\n      return undefined;\n    }\n\n    const mainEl = document.getElementById('Main') as HTMLDivElement;\n    const handleResize = () => {\n      const { activeElement } = document;\n      if (activeElement && (activeElement === inputRef.current)) {\n        const { pageTop, height } = visualViewport;\n\n        requestMutation(() => {\n          mainEl.style.transform = `translateY(${pageTop}px)`;\n          mainEl.style.height = `${height}px`;\n          document.documentElement.scrollTop = pageTop;\n        });\n      } else {\n        requestMutation(() => {\n          mainEl.style.transform = '';\n          mainEl.style.height = '';\n        });\n      }\n    };\n\n    visualViewport.addEventListener('resize', handleResize);\n\n    return () => {\n      visualViewport.removeEventListener('resize', handleResize);\n    };\n  }, []);\n\n  // Focus message\n  useEffect(() => {\n    if (chat?.id && foundIds?.length) {\n      focusMessage({ chatId: chat.id, messageId: foundIds[0], threadId });\n      setFocusedIndex(0);\n    } else {\n      setFocusedIndex(-1);\n    }\n  }, [chat?.id, focusMessage, foundIds, threadId]);\n\n  // Disable native up/down buttons on iOS\n  useLayoutEffect(() => {\n    if (!IS_IOS) return;\n\n    Array.from(document.querySelectorAll<HTMLInputElement>('input')).forEach((input) => {\n      input.disabled = Boolean(isActive && input !== inputRef.current);\n    });\n  }, [isActive]);\n\n  // Blur on exit\n  useEffect(() => {\n    if (!isActive) {\n      inputRef.current!.blur();\n    }\n  }, [isActive]);\n\n  useEffect(() => {\n    const searchInput = document.querySelector<HTMLInputElement>('#MobileSearch input')!;\n    searchInput.blur();\n  }, [isHistoryCalendarOpen]);\n\n  const tags = useMemo(() => {\n    if (!savedTags) return undefined;\n    return Object.values(savedTags);\n  }, [savedTags]);\n\n  const hasTags = Boolean(tags?.length);\n  const areTagsDisabled = hasTags && !isCurrentUserPremium;\n\n  useHorizontalScroll(tagsRef, !hasTags);\n\n  useEffect(() => {\n    if (isActive) loadSavedReactionTags();\n  }, [hasTags, isActive]);\n\n  const handleMessageSearchQueryChange = useLastCallback((newQuery: string) => {\n    setLocalTextSearchQuery({ query: newQuery });\n\n    if (hasQueryData) {\n      runDebouncedForSearch(searchTextMessagesLocal);\n    }\n  });\n\n  const handleTagClick = useLastCallback((tag: ApiReaction) => {\n    if (areTagsDisabled) {\n      openPremiumModal({\n        initialSection: 'saved_tags',\n      });\n      return;\n    }\n\n    setLocalTextSearchTag({ tag });\n\n    runDebouncedForSearch(searchTextMessagesLocal);\n  });\n\n  const handleUp = useLastCallback(() => {\n    if (chat && foundIds) {\n      const newFocusIndex = focusedIndex + 1;\n      focusMessage({ chatId: chat.id, messageId: foundIds[newFocusIndex], threadId });\n      setFocusedIndex(newFocusIndex);\n    }\n  });\n\n  const handleDown = useLastCallback(() => {\n    if (chat && foundIds) {\n      const newFocusIndex = focusedIndex - 1;\n      focusMessage({ chatId: chat.id, messageId: foundIds[newFocusIndex], threadId });\n      setFocusedIndex(newFocusIndex);\n    }\n  });\n\n  const handleCloseLocalTextSearch = useLastCallback(() => {\n    closeLocalTextSearch();\n  });\n\n  return (\n    <div id=\"MobileSearch\" className={isActive ? 'active' : ''}>\n      <div className=\"header\">\n        <Button\n          size=\"smaller\"\n          round\n          color=\"translucent\"\n          onClick={handleCloseLocalTextSearch}\n        >\n          <i className=\"icon icon-arrow-left\" />\n        </Button>\n        <SearchInput\n          ref={inputRef}\n          value={query}\n          onChange={handleMessageSearchQueryChange}\n        />\n      </div>\n      {hasTags && (\n        <div\n          ref={tagsRef}\n          className=\"tags-subheader custom-scroll-x no-scrollbar\"\n        >\n          {tags.map((tag) => (\n            <SavedTagButton\n              containerId=\"mobile-search\"\n              key={getReactionKey(tag.reaction)}\n              reaction={tag.reaction}\n              tag={tag}\n              withCount\n              isDisabled={areTagsDisabled}\n              isChosen={isSameReaction(tag.reaction, searchTag)}\n              onClick={handleTagClick}\n            />\n          ))}\n        </div>\n      )}\n      <div className=\"footer\">\n        <div className=\"counter\">\n          {hasQueryData ? (\n            foundIds?.length ? (\n              `${focusedIndex + 1} of ${totalCount}`\n            ) : foundIds && !foundIds.length ? (\n              'No results'\n            ) : (\n              ''\n            )\n          ) : (\n            <Button\n              round\n              size=\"smaller\"\n              color=\"translucent\"\n              // eslint-disable-next-line react/jsx-no-bind\n              onClick={() => openHistoryCalendar({ selectedAt: getDayStartAt(Date.now()) })}\n              ariaLabel=\"Search messages by date\"\n            >\n              <i className=\"icon icon-calendar\" />\n            </Button>\n          )}\n        </div>\n        <Button\n          round\n          size=\"smaller\"\n          color=\"translucent\"\n          onClick={handleUp}\n          disabled={!foundIds || !foundIds.length || focusedIndex === foundIds.length - 1}\n        >\n          <i className=\"icon icon-up\" />\n        </Button>\n        <Button\n          round\n          size=\"smaller\"\n          color=\"translucent\"\n          onClick={handleDown}\n          disabled={!foundIds || !foundIds.length || focusedIndex === 0}\n        >\n          <i className=\"icon icon-down\" />\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const currentMessageList = selectCurrentMessageList(global);\n    if (!currentMessageList) {\n      return {};\n    }\n    const { chatId, threadId } = currentMessageList;\n\n    const chat = selectChat(global, chatId);\n    if (!chat) {\n      return {};\n    }\n\n    const { query, savedTag, results } = selectCurrentTextSearch(global) || {};\n    const { totalCount, foundIds } = results || {};\n\n    const isSavedMessages = selectIsChatWithSelf(global, chatId);\n    const isSavedDialog = getIsSavedDialog(chatId, threadId, global.currentUserId);\n\n    const savedTags = isSavedMessages && !isSavedDialog ? global.savedReactionTags?.byKey : undefined;\n\n    return {\n      chat,\n      query,\n      totalCount,\n      threadId,\n      foundIds,\n      isHistoryCalendarOpen: Boolean(selectTabState(global).historyCalendarSelectedAt),\n      savedTags,\n      searchTag: savedTag,\n      isCurrentUserPremium: selectIsCurrentUserPremium(global),\n    };\n  },\n)(MobileSearchFooter));\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useRef,\n  useState,\n} from '../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../global';\n\nimport type { ApiAvailableReaction, ApiMessage, ApiReaction } from '../../api/types';\nimport { LoadMoreDirection } from '../../types';\n\nimport { getReactionKey, isSameReaction } from '../../global/helpers';\nimport {\n  selectChatMessage,\n  selectTabState,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { formatDateAtTime } from '../../util/dates/dateFormat';\nimport { unique } from '../../util/iteratees';\nimport { formatIntegerCompact } from '../../util/textFormat';\n\nimport useFlag from '../../hooks/useFlag';\nimport useInfiniteScroll from '../../hooks/useInfiniteScroll';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport Avatar from '../common/Avatar';\nimport FullNameTitle from '../common/FullNameTitle';\nimport PrivateChatInfo from '../common/PrivateChatInfo';\nimport ReactionStaticEmoji from '../common/ReactionStaticEmoji';\nimport Button from '../ui/Button';\nimport InfiniteScroll from '../ui/InfiniteScroll';\nimport ListItem from '../ui/ListItem';\nimport Loading from '../ui/Loading';\nimport Modal from '../ui/Modal';\n\nimport './ReactorListModal.scss';\n\nconst MIN_REACTIONS_COUNT_FOR_FILTERS = 10;\n\nexport type OwnProps = {\n  isOpen: boolean;\n};\n\nexport type StateProps = Pick<ApiMessage, 'reactors' | 'reactions' | 'seenByDates'> & {\n  chatId?: string;\n  messageId?: number;\n  availableReactions?: ApiAvailableReaction[];\n};\n\nconst ReactorListModal: FC<OwnProps & StateProps> = ({\n  isOpen,\n  reactors,\n  reactions,\n  chatId,\n  messageId,\n  seenByDates,\n  availableReactions,\n}) => {\n  const {\n    loadReactors,\n    closeReactorListModal,\n    openChat,\n  } = getActions();\n\n  // No need for expensive global updates on chats or users, so we avoid them\n  const chatsById = getGlobal().chats.byId;\n  const usersById = getGlobal().users.byId;\n\n  const lang = useOldLang();\n  const [isClosing, startClosing, stopClosing] = useFlag(false);\n  const [chosenTab, setChosenTab] = useState<ApiReaction | undefined>(undefined);\n  const canShowFilters = reactors && reactions && reactors.count >= MIN_REACTIONS_COUNT_FOR_FILTERS\n    && reactions.results.length > 1;\n  const chatIdRef = useRef<string>();\n\n  useEffect(() => {\n    if (isOpen && !isClosing) {\n      chatIdRef.current = undefined;\n    }\n\n    if (isClosing && !isOpen) {\n      stopClosing();\n      setChosenTab(undefined);\n    }\n  }, [isClosing, isOpen, stopClosing]);\n\n  const handleCloseAnimationEnd = useLastCallback(() => {\n    if (chatIdRef.current) {\n      openChat({ id: chatIdRef.current });\n    }\n    closeReactorListModal();\n  });\n\n  const handleClose = useLastCallback(() => {\n    startClosing();\n  });\n\n  const handleClick = useLastCallback((userId: string) => {\n    chatIdRef.current = userId;\n    handleClose();\n  });\n\n  const handleLoadMore = useLastCallback(() => {\n    loadReactors({\n      chatId: chatId!,\n      messageId: messageId!,\n    });\n  });\n\n  const allReactions = useMemo(() => {\n    const uniqueReactions: ApiReaction[] = [];\n    reactors?.reactions?.forEach(({ reaction }) => {\n      if (!uniqueReactions.some((r) => isSameReaction(r, reaction))) {\n        uniqueReactions.push(reaction);\n      }\n    });\n    return uniqueReactions;\n  }, [reactors]);\n\n  const peerIds = useMemo(() => {\n    if (chosenTab) {\n      return reactors?.reactions\n        .filter(({ reaction }) => isSameReaction(reaction, chosenTab))\n        .map(({ peerId }) => peerId);\n    }\n\n    const seenByUserIds = Object.keys(seenByDates || {});\n\n    return unique(reactors?.reactions.map(({ peerId }) => peerId).concat(seenByUserIds || []) || []);\n  }, [chosenTab, reactors, seenByDates]);\n\n  const [viewportIds, getMore] = useInfiniteScroll(\n    handleLoadMore, peerIds, reactors && reactors.nextOffset === undefined,\n  );\n\n  useEffect(() => {\n    getMore?.({ direction: LoadMoreDirection.Backwards });\n  }, [getMore]);\n\n  return (\n    <Modal\n      isOpen={isOpen && !isClosing}\n      onClose={handleClose}\n      className=\"ReactorListModal narrow\"\n      title={lang('Reactions')}\n      onCloseAnimationEnd={handleCloseAnimationEnd}\n    >\n      {canShowFilters && (\n        <div className=\"Reactions\" dir={lang.isRtl ? 'rtl' : undefined}>\n          <Button\n            className={buildClassName(!chosenTab && 'chosen')}\n            size=\"tiny\"\n            ripple\n            // eslint-disable-next-line react/jsx-no-bind\n            onClick={() => setChosenTab(undefined)}\n          >\n            <i className=\"icon icon-heart\" />\n            {Boolean(reactors?.count) && formatIntegerCompact(reactors.count)}\n          </Button>\n          {allReactions.map((reaction) => {\n            const count = reactions?.results\n              .find((reactionsCount) => isSameReaction(reactionsCount.reaction, reaction))?.count;\n            return (\n              <Button\n                key={getReactionKey(reaction)}\n                className={buildClassName(isSameReaction(chosenTab, reaction) && 'chosen')}\n                size=\"tiny\"\n                ripple\n                // eslint-disable-next-line react/jsx-no-bind\n                onClick={() => setChosenTab(reaction)}\n              >\n                <ReactionStaticEmoji\n                  reaction={reaction}\n                  className=\"reaction-filter-emoji\"\n                  availableReactions={availableReactions}\n                />\n                {Boolean(count) && formatIntegerCompact(count)}\n              </Button>\n            );\n          })}\n        </div>\n      )}\n\n      <div dir={lang.isRtl ? 'rtl' : undefined} className=\"reactor-list-wrapper\">\n        {viewportIds?.length ? (\n          <InfiniteScroll\n            className=\"reactor-list custom-scroll\"\n            items={viewportIds}\n            onLoadMore={getMore}\n          >\n            {viewportIds?.flatMap(\n              (peerId) => {\n                const peer = usersById[peerId] || chatsById[peerId];\n\n                const peerReactions = reactors?.reactions.filter((reactor) => reactor.peerId === peerId);\n                const items: React.ReactNode[] = [];\n                const seenByUser = seenByDates?.[peerId];\n\n                peerReactions?.forEach((r) => {\n                  if (chosenTab && !isSameReaction(r.reaction, chosenTab)) return;\n\n                  items.push(\n                    <ListItem\n                      key={`${peerId}-${getReactionKey(r.reaction)}`}\n                      className=\"chat-item-clickable reactors-list-item\"\n                      // eslint-disable-next-line react/jsx-no-bind\n                      onClick={() => handleClick(peerId)}\n                    >\n                      <Avatar peer={peer} size=\"medium\" />\n                      <div className=\"info\">\n                        <FullNameTitle peer={peer} withEmojiStatus />\n                        <span className=\"status\" dir=\"auto\">\n                          <i className=\"icon icon-heart-outline status-icon\" />\n                          {formatDateAtTime(lang, r.addedDate * 1000)}\n                        </span>\n                      </div>\n                      {r.reaction && (\n                        <ReactionStaticEmoji\n                          className=\"reactors-list-emoji\"\n                          reaction={r.reaction}\n                          availableReactions={availableReactions}\n                        />\n                      )}\n                    </ListItem>,\n                  );\n                });\n\n                if (!chosenTab && !peerReactions?.length) {\n                  items.push(\n                    <ListItem\n                      key={`${peerId}-seen-by`}\n                      className=\"chat-item-clickable scroll-item small-icon\"\n                      // eslint-disable-next-line react/jsx-no-bind\n                      onClick={() => handleClick(peerId)}\n                    >\n                      <PrivateChatInfo\n                        userId={peerId}\n                        noStatusOrTyping\n                        avatarSize=\"medium\"\n                        status={seenByUser ? formatDateAtTime(lang, seenByUser * 1000) : undefined}\n                        statusIcon=\"message-read\"\n                      />\n                    </ListItem>,\n                  );\n                }\n                return items;\n              },\n            )}\n          </InfiniteScroll>\n        ) : <Loading />}\n      </div>\n      <Button\n        className=\"confirm-dialog-button\"\n        isText\n        onClick={handleClose}\n      >\n        {lang('Close')}\n      </Button>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const { chatId, messageId } = selectTabState(global).reactorModal || {};\n    const message = chatId && messageId ? selectChatMessage(global, chatId, messageId) : undefined;\n\n    return {\n      chatId,\n      messageId,\n      reactions: message?.reactions,\n      reactors: message?.reactors,\n      seenByDates: message?.seenByDates,\n      availableReactions: global.reactions.availableReactions,\n    };\n  },\n)(ReactorListModal));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiAttachment, ApiChatMember, ApiMessage, ApiSticker,\n} from '../../../api/types';\nimport type { GlobalState, MessageListType } from '../../../global/types';\nimport type { ThreadId } from '../../../types';\nimport type { Signal } from '../../../util/signals';\n\nimport {\n  BASE_EMOJI_KEYWORD_LANG,\n  EDITABLE_INPUT_MODAL_ID,\n  SUPPORTED_AUDIO_CONTENT_TYPES,\n  SUPPORTED_IMAGE_CONTENT_TYPES,\n  SUPPORTED_VIDEO_CONTENT_TYPES,\n} from '../../../config';\nimport { requestMutation } from '../../../lib/fasterdom/fasterdom';\nimport { getAttachmentType, isUserId } from '../../../global/helpers';\nimport { selectChatFullInfo, selectIsChatWithSelf } from '../../../global/selectors';\nimport { selectCurrentLimit } from '../../../global/selectors/limits';\nimport buildClassName from '../../../util/buildClassName';\nimport captureEscKeyListener from '../../../util/captureEscKeyListener';\nimport { validateFiles } from '../../../util/files';\nimport { removeAllSelections } from '../../../util/selection';\nimport { openSystemFilesDialog } from '../../../util/systemFilesDialog';\nimport getFilesFromDataTransferItems from './helpers/getFilesFromDataTransferItems';\nimport { getHtmlTextLength } from './helpers/getHtmlTextLength';\n\nimport useAppLayout from '../../../hooks/useAppLayout';\nimport useContextMenuHandlers from '../../../hooks/useContextMenuHandlers';\nimport useDerivedState from '../../../hooks/useDerivedState';\nimport useFlag from '../../../hooks/useFlag';\nimport useGetSelectionRange from '../../../hooks/useGetSelectionRange';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\nimport usePrevious from '../../../hooks/usePrevious';\nimport useScrolledState from '../../../hooks/useScrolledState';\nimport useCustomEmojiTooltip from './hooks/useCustomEmojiTooltip';\nimport useEmojiTooltip from './hooks/useEmojiTooltip';\nimport useMentionTooltip from './hooks/useMentionTooltip';\n\nimport Button from '../../ui/Button';\nimport DropdownMenu from '../../ui/DropdownMenu';\nimport MenuItem from '../../ui/MenuItem';\nimport Modal from '../../ui/Modal';\nimport AttachmentModalItem from './AttachmentModalItem';\nimport CustomEmojiTooltip from './CustomEmojiTooltip.async';\nimport CustomSendMenu from './CustomSendMenu.async';\nimport EmojiTooltip from './EmojiTooltip.async';\nimport MentionTooltip from './MentionTooltip';\nimport MessageInput from './MessageInput';\nimport SymbolMenuButton from './SymbolMenuButton';\n\nimport styles from './AttachmentModal.module.scss';\n\nexport type OwnProps = {\n  chatId: string;\n  threadId: ThreadId;\n  attachments: ApiAttachment[];\n  editingMessage?: ApiMessage;\n  messageListType?: MessageListType;\n  getHtml: Signal<string>;\n  canShowCustomSendMenu?: boolean;\n  isReady: boolean;\n  isForMessage?: boolean;\n  shouldSchedule?: boolean;\n  shouldSuggestCompression?: boolean;\n  shouldForceCompression?: boolean;\n  shouldForceAsFile?: boolean;\n  isForCurrentMessageList?: boolean;\n  forceDarkTheme?: boolean;\n  onCaptionUpdate: (html: string) => void;\n  onSend: (sendCompressed: boolean, sendGrouped: boolean, isInvertedMedia?: true) => void;\n  onFileAppend: (files: File[], isSpoiler?: boolean) => void;\n  onAttachmentsUpdate: (attachments: ApiAttachment[]) => void;\n  onClear: NoneToVoidFunction;\n  onSendSilent: (sendCompressed: boolean, sendGrouped: boolean, isInvertedMedia?: true) => void;\n  onSendScheduled: (sendCompressed: boolean, sendGrouped: boolean, isInvertedMedia?: true) => void;\n  onCustomEmojiSelect: (emoji: ApiSticker) => void;\n  onRemoveSymbol: VoidFunction;\n  onEmojiSelect: (emoji: string) => void;\n};\n\ntype StateProps = {\n  isChatWithSelf?: boolean;\n  currentUserId?: string;\n  groupChatMembers?: ApiChatMember[];\n  recentEmojis: string[];\n  editingMessage?: ApiMessage;\n  baseEmojiKeywords?: Record<string, string[]>;\n  emojiKeywords?: Record<string, string[]>;\n  shouldSuggestCustomEmoji?: boolean;\n  customEmojiForEmoji?: ApiSticker[];\n  captionLimit: number;\n  attachmentSettings: GlobalState['attachmentSettings'];\n};\n\nconst ATTACHMENT_MODAL_INPUT_ID = 'caption-input-text';\nconst DROP_LEAVE_TIMEOUT_MS = 150;\nconst MAX_LEFT_CHARS_TO_SHOW = 100;\n\nconst AttachmentModal: FC<OwnProps & StateProps> = ({\n  chatId,\n  threadId,\n  attachments,\n  getHtml,\n  editingMessage,\n  canShowCustomSendMenu,\n  captionLimit,\n  isReady,\n  isChatWithSelf,\n  currentUserId,\n  groupChatMembers,\n  recentEmojis,\n  baseEmojiKeywords,\n  emojiKeywords,\n  isForMessage,\n  shouldSchedule,\n  shouldSuggestCustomEmoji,\n  customEmojiForEmoji,\n  attachmentSettings,\n  shouldSuggestCompression,\n  shouldForceCompression,\n  shouldForceAsFile,\n  isForCurrentMessageList,\n  forceDarkTheme,\n  onAttachmentsUpdate,\n  onCaptionUpdate,\n  onSend,\n  onFileAppend,\n  onClear,\n  onSendSilent,\n  onSendScheduled,\n  onCustomEmojiSelect,\n  onRemoveSymbol,\n  onEmojiSelect,\n}) => {\n  const { addRecentCustomEmoji, addRecentEmoji, updateAttachmentSettings } = getActions();\n\n  const lang = useOldLang();\n\n  // eslint-disable-next-line no-null/no-null\n  const mainButtonRef = useRef<HTMLButtonElement | null>(null);\n  // eslint-disable-next-line no-null/no-null\n  const inputRef = useRef<HTMLDivElement>(null);\n\n  const hideTimeoutRef = useRef<number>();\n  const prevAttachments = usePrevious(attachments);\n  const renderingAttachments = attachments.length ? attachments : prevAttachments;\n  const { isMobile } = useAppLayout();\n\n  const isEditing = editingMessage && Boolean(editingMessage);\n  const isInAlbum = editingMessage && editingMessage?.groupedId;\n  const isEditingMessageFile = isEditing && attachments?.length && getAttachmentType(attachments[0]);\n  const notEditingFile = isEditingMessageFile !== 'file';\n\n  const [isSymbolMenuOpen, openSymbolMenu, closeSymbolMenu] = useFlag();\n\n  const [shouldSendCompressed, setShouldSendCompressed] = useState(\n    shouldSuggestCompression ?? attachmentSettings.shouldCompress,\n  );\n  const isSendingCompressed = Boolean(\n    (shouldSendCompressed || shouldForceCompression || isInAlbum) && !shouldForceAsFile,\n  );\n  const [shouldSendGrouped, setShouldSendGrouped] = useState(attachmentSettings.shouldSendGrouped);\n  const isInvertedMedia = attachmentSettings.isInvertedMedia;\n\n  const {\n    handleScroll: handleAttachmentsScroll,\n    isAtBeginning: areAttachmentsNotScrolled,\n    isAtEnd: areAttachmentsScrolledToBottom,\n  } = useScrolledState();\n\n  const { handleScroll: handleCaptionScroll, isAtBeginning: isCaptionNotScrolled } = useScrolledState();\n\n  const isOpen = Boolean(attachments.length);\n  const renderingIsOpen = Boolean(renderingAttachments?.length);\n  const [isHovered, markHovered, unmarkHovered] = useFlag();\n\n  useEffect(() => {\n    if (!isOpen) {\n      closeSymbolMenu();\n      updateAttachmentSettings({ isInvertedMedia: undefined });\n    }\n  }, [closeSymbolMenu, isOpen]);\n\n  const [hasMedia, hasOnlyMedia] = useMemo(() => {\n    const onlyMedia = Boolean(renderingAttachments?.every((a) => a.quick || a.audio));\n    if (onlyMedia) return [true, true];\n    const oneMedia = Boolean(renderingAttachments?.some((a) => a.quick || a.audio));\n    return [oneMedia, false];\n  }, [renderingAttachments]);\n\n  const [hasSpoiler, isEverySpoiler] = useMemo(() => {\n    const areAllSpoilers = Boolean(renderingAttachments?.every((a) => a.shouldSendAsSpoiler));\n    if (areAllSpoilers) return [true, true];\n    const hasOneSpoiler = Boolean(renderingAttachments?.some((a) => a.shouldSendAsSpoiler));\n    return [hasOneSpoiler, false];\n  }, [renderingAttachments]);\n\n  const getSelectionRange = useGetSelectionRange(`#${EDITABLE_INPUT_MODAL_ID}`);\n\n  const {\n    isEmojiTooltipOpen,\n    filteredEmojis,\n    filteredCustomEmojis,\n    insertEmoji,\n    closeEmojiTooltip,\n  } = useEmojiTooltip(\n    Boolean(isReady && (isForCurrentMessageList || !isForMessage) && renderingIsOpen),\n    getHtml,\n    onCaptionUpdate,\n    EDITABLE_INPUT_MODAL_ID,\n    recentEmojis,\n    baseEmojiKeywords,\n    emojiKeywords,\n  );\n\n  const {\n    isCustomEmojiTooltipOpen,\n    insertCustomEmoji,\n    closeCustomEmojiTooltip,\n  } = useCustomEmojiTooltip(\n    Boolean(isReady && (isForCurrentMessageList || !isForMessage) && renderingIsOpen && shouldSuggestCustomEmoji),\n    getHtml,\n    onCaptionUpdate,\n    getSelectionRange,\n    inputRef,\n    customEmojiForEmoji,\n  );\n\n  const {\n    isMentionTooltipOpen,\n    closeMentionTooltip,\n    insertMention,\n    mentionFilteredUsers,\n  } = useMentionTooltip(\n    Boolean(isReady && isForCurrentMessageList && renderingIsOpen),\n    getHtml,\n    onCaptionUpdate,\n    getSelectionRange,\n    inputRef,\n    groupChatMembers,\n    undefined,\n    currentUserId,\n  );\n\n  useEffect(() => (isOpen ? captureEscKeyListener(onClear) : undefined), [isOpen, onClear]);\n\n  useEffect(() => {\n    if (isOpen) {\n      setShouldSendCompressed(shouldSuggestCompression ?? attachmentSettings.shouldCompress);\n      setShouldSendGrouped(attachmentSettings.shouldSendGrouped);\n    }\n  }, [attachmentSettings, isOpen, shouldSuggestCompression]);\n\n  useEffect(() => {\n    if (!isOpen) {\n      updateAttachmentSettings({ isInvertedMedia: undefined });\n    }\n  }, [updateAttachmentSettings, isOpen, shouldSuggestCompression]);\n\n  function setIsInvertedMedia(value?: true) {\n    updateAttachmentSettings({ isInvertedMedia: value });\n  }\n\n  useEffect(() => {\n    if (isOpen && isMobile) {\n      removeAllSelections();\n    }\n  }, [isMobile, isOpen]);\n\n  const {\n    isContextMenuOpen: isCustomSendMenuOpen,\n    handleContextMenu,\n    handleContextMenuClose,\n    handleContextMenuHide,\n  } = useContextMenuHandlers(mainButtonRef, !canShowCustomSendMenu || !isOpen);\n\n  const sendAttachments = useLastCallback((isSilent?: boolean, shouldSendScheduled?: boolean) => {\n    if (isOpen) {\n      const send = ((shouldSchedule || shouldSendScheduled) && isForMessage && !editingMessage) ? onSendScheduled\n        : isSilent ? onSendSilent : onSend;\n      send(isSendingCompressed, shouldSendGrouped, isInvertedMedia);\n      updateAttachmentSettings({\n        shouldCompress: shouldSuggestCompression === undefined ? isSendingCompressed : undefined,\n        shouldSendGrouped,\n        isInvertedMedia,\n      });\n    }\n  });\n\n  const handleSendSilent = useLastCallback(() => {\n    sendAttachments(true);\n  });\n\n  const handleSendClick = useLastCallback(() => {\n    sendAttachments();\n  });\n\n  const handleScheduleClick = useLastCallback(() => {\n    sendAttachments(false, true);\n  });\n\n  const handleDragLeave = (e: React.DragEvent<HTMLElement>) => {\n    const { relatedTarget: toTarget, target: fromTarget } = e;\n\n    // Esc button pressed during drag event\n    if ((fromTarget as HTMLDivElement).matches(`.${styles.dropTarget}`) && !toTarget) {\n      hideTimeoutRef.current = window.setTimeout(unmarkHovered, DROP_LEAVE_TIMEOUT_MS);\n    }\n\n    // Prevent DragLeave event from firing when the pointer moves inside the AttachmentModal drop target\n    if (fromTarget && (fromTarget as HTMLElement).closest(`.${styles.hovered}`)) {\n      return;\n    }\n\n    if (toTarget) {\n      e.stopPropagation();\n    }\n\n    unmarkHovered();\n  };\n\n  const handleFilesDrop = useLastCallback(async (e: React.DragEvent<HTMLDivElement>) => {\n    e.preventDefault();\n    unmarkHovered();\n\n    const { dataTransfer } = e;\n\n    const files = await getFilesFromDataTransferItems(dataTransfer.items);\n    if (files?.length) {\n      onFileAppend(files, isEverySpoiler);\n    }\n  });\n\n  function handleDragOver(e: React.MouseEvent<HTMLDivElement, MouseEvent>) {\n    e.preventDefault();\n\n    if (hideTimeoutRef.current) {\n      window.clearTimeout(hideTimeoutRef.current);\n      hideTimeoutRef.current = undefined;\n    }\n  }\n\n  const handleFileSelect = useLastCallback((e: Event) => {\n    const { files } = e.target as HTMLInputElement;\n    const validatedFiles = validateFiles(files);\n\n    if (validatedFiles?.length) {\n      onFileAppend(validatedFiles, isEverySpoiler);\n    }\n  });\n\n  const handleDocumentSelect = useLastCallback(() => {\n    openSystemFilesDialog('*', (e) => handleFileSelect(e));\n  });\n\n  const handleDelete = useLastCallback((index: number) => {\n    onAttachmentsUpdate(attachments.filter((a, i) => i !== index));\n  });\n\n  const handleEnableSpoilers = useLastCallback(() => {\n    onAttachmentsUpdate(attachments.map((a) => ({\n      ...a,\n      shouldSendAsSpoiler: true,\n    })));\n  });\n\n  const handleDisableSpoilers = useLastCallback(() => {\n    onAttachmentsUpdate(attachments.map((a) => ({ ...a, shouldSendAsSpoiler: undefined })));\n  });\n\n  const handleToggleSpoiler = useLastCallback((index: number) => {\n    onAttachmentsUpdate(attachments.map((attachment, i) => {\n      if (i === index) {\n        return {\n          ...attachment,\n          shouldSendAsSpoiler: !attachment.shouldSendAsSpoiler || undefined,\n        };\n      }\n\n      return attachment;\n    }));\n  });\n\n  useEffect(() => {\n    const mainButton = mainButtonRef.current;\n    const input = document.getElementById(ATTACHMENT_MODAL_INPUT_ID);\n\n    if (!mainButton || !input) return;\n\n    const { width } = mainButton.getBoundingClientRect();\n\n    requestMutation(() => {\n      input.style.setProperty('--margin-for-scrollbar', `${width}px`);\n    });\n  }, [lang, isOpen]);\n\n  const MoreMenuButton: FC<{ onTrigger: () => void; isOpen?: boolean }> = useMemo(() => {\n    return ({ onTrigger, isOpen: isMenuOpen }) => (\n      <Button\n        round\n        ripple={!isMobile}\n        size=\"smaller\"\n        color=\"translucent\"\n        className={isMenuOpen ? 'active' : ''}\n        onClick={onTrigger}\n        ariaLabel=\"More actions\"\n      >\n        <i className=\"icon icon-more\" />\n      </Button>\n    );\n  }, [isMobile]);\n\n  const leftChars = useDerivedState(() => {\n    if (!renderingIsOpen) return undefined;\n\n    const leftCharsBeforeLimit = captionLimit - getHtmlTextLength(getHtml());\n    return leftCharsBeforeLimit <= MAX_LEFT_CHARS_TO_SHOW ? leftCharsBeforeLimit : undefined;\n  }, [captionLimit, getHtml, renderingIsOpen]);\n\n  const isQuickGallery = isSendingCompressed && hasOnlyMedia;\n\n  const [areAllPhotos, areAllVideos, areAllAudios] = useMemo(() => {\n    if (!isQuickGallery || !renderingAttachments) return [false, false, false];\n    const everyPhoto = renderingAttachments.every((a) => SUPPORTED_IMAGE_CONTENT_TYPES.has(a.mimeType));\n    const everyVideo = renderingAttachments.every((a) => SUPPORTED_VIDEO_CONTENT_TYPES.has(a.mimeType));\n    const everyAudio = renderingAttachments.every((a) => SUPPORTED_AUDIO_CONTENT_TYPES.has(a.mimeType));\n    return [everyPhoto, everyVideo, everyAudio];\n  }, [renderingAttachments, isQuickGallery]);\n\n  const hasAnySpoilerable = useMemo(() => {\n    if (!renderingAttachments) return false;\n    return renderingAttachments.some((a) => !SUPPORTED_AUDIO_CONTENT_TYPES.has(a.mimeType));\n  }, [renderingAttachments]);\n\n  if (!renderingAttachments) {\n    return undefined;\n  }\n\n  const isMultiple = renderingAttachments.length > 1;\n\n  const canInvertMedia = (() => {\n    if (isEditing) return false;\n    if (!hasMedia) return false;\n    if (!shouldForceAsFile && !shouldForceCompression && !isSendingCompressed) return false;\n    if (isMultiple && shouldSendGrouped) return false;\n    return true;\n  })();\n\n  let title = '';\n  if (areAllPhotos) {\n    title = lang(isEditing ? 'EditMessageReplacePhoto' : 'PreviewSender.SendPhoto', renderingAttachments.length, 'i');\n  } else if (areAllVideos) {\n    title = lang(isEditing ? 'EditMessageReplaceVideo' : 'PreviewSender.SendVideo', renderingAttachments.length, 'i');\n  } else if (areAllAudios) {\n    title = lang(isEditing ? 'EditMessageReplaceAudio' : 'PreviewSender.SendAudio', renderingAttachments.length, 'i');\n  } else {\n    title = lang(isEditing ? 'EditMessageReplaceFile' : 'PreviewSender.SendFile', renderingAttachments.length, 'i');\n  }\n\n  function renderHeader() {\n    if (!renderingAttachments) {\n      return undefined;\n    }\n\n    return (\n      <div className=\"modal-header-condensed\" dir={lang.isRtl ? 'rtl' : undefined}>\n        <Button round color=\"translucent\" size=\"smaller\" ariaLabel=\"Cancel attachments\" onClick={onClear}>\n          <i className=\"icon icon-close\" />\n        </Button>\n        <div className=\"modal-title\">{title}</div>\n        {notEditingFile && !isInAlbum\n          && (\n            <DropdownMenu\n              className=\"attachmeneditingMessaget-modal-more-menu with-menu-transitions\"\n              trigger={MoreMenuButton}\n              positionX=\"right\"\n            >\n              {Boolean(!editingMessage) && (\n                <MenuItem icon=\"add\" onClick={handleDocumentSelect}>{lang('Add')}</MenuItem>\n              )}\n              {hasMedia && (\n                <>\n                  {\n                    canInvertMedia && (!isInvertedMedia ? (\n                      // eslint-disable-next-line react/jsx-no-bind\n                      <MenuItem icon=\"move-caption-up\" onClick={() => setIsInvertedMedia(true)}>\n                        {lang('PreviewSender.MoveTextUp')}\n                      </MenuItem>\n                    ) : (\n                      // eslint-disable-next-line react/jsx-no-bind\n                      <MenuItem icon=\"move-caption-down\" onClick={() => setIsInvertedMedia(undefined)}>\n                        {lang(('PreviewSender.MoveTextDown'))}\n                      </MenuItem>\n                    ))\n                  }\n                  {\n                    !shouldForceAsFile && !shouldForceCompression && (isSendingCompressed ? (\n                      // eslint-disable-next-line react/jsx-no-bind\n                      <MenuItem icon=\"document\" onClick={() => setShouldSendCompressed(false)}>\n                        {lang(isMultiple ? 'Attachment.SendAsFiles' : 'Attachment.SendAsFile')}\n                      </MenuItem>\n                    ) : (\n                      // eslint-disable-next-line react/jsx-no-bind\n                      <MenuItem icon=\"photo\" onClick={() => setShouldSendCompressed(true)}>\n                        {isMultiple ? 'Send All as Media' : 'Send as Media'}\n                      </MenuItem>\n                    ))\n                  }\n                  {isSendingCompressed && hasAnySpoilerable && Boolean(!editingMessage) && (\n                    hasSpoiler ? (\n                      <MenuItem icon=\"spoiler-disable\" onClick={handleDisableSpoilers}>\n                        {lang('Attachment.DisableSpoiler')}\n                      </MenuItem>\n                    ) : (\n                      <MenuItem icon=\"spoiler\" onClick={handleEnableSpoilers}>\n                        {lang('Attachment.EnableSpoiler')}\n                      </MenuItem>\n                    )\n                  )}\n                </>\n              )}\n              {isMultiple && (\n                shouldSendGrouped ? (\n                  <MenuItem\n                    icon=\"grouped-disable\"\n                    // eslint-disable-next-line react/jsx-no-bind\n                    onClick={() => setShouldSendGrouped(false)}\n                  >\n                    Ungroup All Media\n                  </MenuItem>\n                ) : (\n                  // eslint-disable-next-line react/jsx-no-bind\n                  <MenuItem icon=\"grouped\" onClick={() => setShouldSendGrouped(true)}>\n                    Group All Media\n                  </MenuItem>\n                )\n              )}\n            </DropdownMenu>\n          )}\n      </div>\n    );\n  }\n\n  const isBottomDividerShown = !areAttachmentsScrolledToBottom || !isCaptionNotScrolled;\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClear}\n      header={renderHeader()}\n      className={buildClassName(\n        styles.root,\n        isHovered && styles.hovered,\n        !areAttachmentsNotScrolled && styles.headerBorder,\n        isMobile && styles.mobile,\n        isSymbolMenuOpen && styles.symbolMenuOpen,\n        forceDarkTheme && 'component-theme-dark',\n      )}\n      noBackdropClose\n    >\n      <div\n        className={styles.dropTarget}\n        onDragEnter={markHovered}\n        onDrop={handleFilesDrop}\n        onDragOver={handleDragOver}\n        onDragLeave={handleDragLeave}\n        onClick={unmarkHovered}\n        data-attach-description={lang('Preview.Dragging.AddItems', 10)}\n        data-dropzone\n      >\n        <div\n          className={buildClassName(\n            styles.attachments,\n            'custom-scroll',\n            isBottomDividerShown && styles.attachmentsBottomPadding,\n          )}\n          onScroll={handleAttachmentsScroll}\n        >\n          {renderingAttachments.map((attachment, i) => (\n            <AttachmentModalItem\n              attachment={attachment}\n              shouldDisplayCompressed={isSendingCompressed}\n              shouldDisplayGrouped={shouldSendGrouped}\n              isSingle={renderingAttachments.length === 1}\n              index={i}\n              key={attachment.uniqueId || i}\n              onDelete={handleDelete}\n              onToggleSpoiler={handleToggleSpoiler}\n            />\n          ))}\n        </div>\n        <div\n          className={buildClassName(\n            styles.captionWrapper,\n            isBottomDividerShown && styles.captionTopBorder,\n          )}\n        >\n          <MentionTooltip\n            isOpen={isMentionTooltipOpen}\n            filteredUsers={mentionFilteredUsers}\n            onInsertUserName={insertMention}\n            onClose={closeMentionTooltip}\n          />\n          <EmojiTooltip\n            isOpen={isEmojiTooltipOpen}\n            emojis={filteredEmojis}\n            customEmojis={filteredCustomEmojis}\n            addRecentEmoji={addRecentEmoji}\n            addRecentCustomEmoji={addRecentCustomEmoji}\n            onEmojiSelect={insertEmoji}\n            onCustomEmojiSelect={insertEmoji}\n            onClose={closeEmojiTooltip}\n          />\n          <CustomEmojiTooltip\n            chatId={chatId}\n            isOpen={isCustomEmojiTooltipOpen}\n            addRecentCustomEmoji={addRecentCustomEmoji}\n            onCustomEmojiSelect={insertCustomEmoji}\n            onClose={closeCustomEmojiTooltip}\n          />\n          <div className={styles.caption}>\n            <SymbolMenuButton\n              chatId={chatId}\n              threadId={threadId}\n              isMobile={isMobile}\n              isReady={isReady}\n              isSymbolMenuOpen={isSymbolMenuOpen}\n              openSymbolMenu={openSymbolMenu}\n              closeSymbolMenu={closeSymbolMenu}\n              onCustomEmojiSelect={onCustomEmojiSelect}\n              onRemoveSymbol={onRemoveSymbol}\n              onEmojiSelect={onEmojiSelect}\n              isAttachmentModal\n              canSendPlainText\n              className=\"attachment-modal-symbol-menu with-menu-transitions\"\n              idPrefix=\"attachment\"\n              forceDarkTheme={forceDarkTheme}\n            />\n            <MessageInput\n              ref={inputRef}\n              id={ATTACHMENT_MODAL_INPUT_ID}\n              chatId={chatId}\n              threadId={threadId}\n              isAttachmentModalInput\n              customEmojiPrefix=\"attachment\"\n              isReady={isReady}\n              isActive={isOpen}\n              getHtml={getHtml}\n              editableInputId={EDITABLE_INPUT_MODAL_ID}\n              placeholder={lang('AddCaption')}\n              onUpdate={onCaptionUpdate}\n              onSend={handleSendClick}\n              onScroll={handleCaptionScroll}\n              canAutoFocus={Boolean(isReady && isForCurrentMessageList && attachments.length)}\n              captionLimit={leftChars}\n              shouldSuppressFocus={isMobile && isSymbolMenuOpen}\n              onSuppressedFocus={closeSymbolMenu}\n            />\n            <div className={styles.sendWrapper}>\n              <Button\n                ref={mainButtonRef}\n                className={styles.send}\n                onClick={handleSendClick}\n                onContextMenu={canShowCustomSendMenu ? handleContextMenu : undefined}\n              >\n                {shouldSchedule && !editingMessage ? lang('Next') : editingMessage ? lang('Save') : lang('Send')}\n              </Button>\n              {canShowCustomSendMenu && (\n                <CustomSendMenu\n                  isOpen={isCustomSendMenuOpen}\n                  canSchedule={isForMessage}\n                  onSendSilent={!isChatWithSelf ? handleSendSilent : undefined}\n                  onSendSchedule={handleScheduleClick}\n                  onClose={handleContextMenuClose}\n                  onCloseAnimationEnd={handleContextMenuHide}\n                  isSavedMessages={isChatWithSelf}\n                />\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { chatId }): StateProps => {\n    const {\n      currentUserId,\n      recentEmojis,\n      customEmojis,\n      attachmentSettings,\n    } = global;\n\n    const chatFullInfo = !isUserId(chatId) ? selectChatFullInfo(global, chatId) : undefined;\n    const isChatWithSelf = selectIsChatWithSelf(global, chatId);\n    const { language, shouldSuggestCustomEmoji } = global.settings.byKey;\n    const baseEmojiKeywords = global.emojiKeywords[BASE_EMOJI_KEYWORD_LANG];\n    const emojiKeywords = language !== BASE_EMOJI_KEYWORD_LANG ? global.emojiKeywords[language] : undefined;\n\n    return {\n      isChatWithSelf,\n      currentUserId,\n      groupChatMembers: chatFullInfo?.members,\n      recentEmojis,\n      baseEmojiKeywords: baseEmojiKeywords?.keywords,\n      emojiKeywords: emojiKeywords?.keywords,\n      shouldSuggestCustomEmoji,\n      customEmojiForEmoji: customEmojis.forEmoji.stickers,\n      captionLimit: selectCurrentLimit(global, 'captionLength'),\n      attachmentSettings,\n    };\n  },\n)(AttachmentModal));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useMemo } from '../../../lib/teact/teact';\n\nimport type { ApiAttachment } from '../../../api/types';\n\nimport { SUPPORTED_IMAGE_CONTENT_TYPES, SUPPORTED_VIDEO_CONTENT_TYPES } from '../../../config';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatMediaDuration } from '../../../util/dates/dateFormat';\nimport { getFileExtension } from '../../common/helpers/documentInfo';\nimport { REM } from '../../common/helpers/mediaDimensions';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport File from '../../common/File';\nimport MediaSpoiler from '../../common/MediaSpoiler';\n\nimport styles from './AttachmentModalItem.module.scss';\n\ntype OwnProps = {\n  attachment: ApiAttachment;\n  className?: string;\n  shouldDisplayCompressed?: boolean;\n  shouldDisplayGrouped?: boolean;\n  isSingle?: boolean;\n  index: number;\n  onDelete?: (index: number) => void;\n  onToggleSpoiler?: (index: number) => void;\n};\n\nconst BLUR_CANVAS_SIZE = 15 * REM;\n\nconst AttachmentModalItem: FC<OwnProps> = ({\n  attachment,\n  className,\n  isSingle,\n  shouldDisplayCompressed,\n  shouldDisplayGrouped,\n  index,\n  onDelete,\n  onToggleSpoiler,\n}) => {\n  const displayType = getDisplayType(attachment, shouldDisplayCompressed);\n\n  const handleSpoilerClick = useLastCallback(() => {\n    onToggleSpoiler?.(index);\n  });\n\n  const content = useMemo(() => {\n    switch (displayType) {\n      case 'image':\n        return (\n          <img\n            className={styles.preview}\n            src={attachment.blobUrl}\n            alt=\"\"\n            draggable={false}\n          />\n        );\n      case 'video':\n        return (\n          <>\n            {Boolean(attachment.quick?.duration) && (\n              <div className={styles.duration}>{formatMediaDuration(attachment.quick!.duration)}</div>\n            )}\n            <video\n              className={styles.preview}\n              src={attachment.blobUrl}\n              autoPlay\n              muted\n              loop\n              disablePictureInPicture\n            />\n          </>\n        );\n      default:\n        return (\n          <>\n            <File\n              className={styles.file}\n              name={attachment.filename}\n              extension={getFileExtension(attachment.filename, attachment.mimeType)}\n              previewData={attachment.previewBlobUrl}\n              size={attachment.size}\n              smaller\n            />\n            {onDelete && (\n              <i\n                className={buildClassName('icon', 'icon-delete', styles.actionItem, styles.deleteFile)}\n                onClick={() => onDelete(index)}\n              />\n            )}\n          </>\n        );\n    }\n  }, [attachment, displayType, index, onDelete]);\n\n  const shouldSkipGrouping = displayType === 'file' || !shouldDisplayGrouped;\n  const shouldDisplaySpoiler = Boolean(displayType !== 'file' && attachment.shouldSendAsSpoiler);\n  const shouldRenderOverlay = displayType !== 'file';\n\n  const rootClassName = buildClassName(\n    className, styles.root, isSingle && styles.single, shouldSkipGrouping && styles.noGrouping,\n  );\n\n  return (\n    <div className={rootClassName}>\n      {content}\n      <MediaSpoiler\n        isVisible={shouldDisplaySpoiler}\n        thumbDataUri={attachment.previewBlobUrl || attachment.blobUrl}\n        width={BLUR_CANVAS_SIZE}\n        height={BLUR_CANVAS_SIZE}\n      />\n      {shouldRenderOverlay && (\n        <div className={styles.overlay}>\n          <i\n            className={buildClassName(\n              'icon',\n              attachment.shouldSendAsSpoiler ? 'icon-spoiler-disable' : 'icon-spoiler',\n              styles.actionItem,\n            )}\n            onClick={handleSpoilerClick}\n          />\n          {onDelete && (\n            <i\n              className={buildClassName('icon', 'icon-delete', styles.actionItem)}\n              onClick={() => onDelete(index)}\n            />\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport function getDisplayType(attachment: ApiAttachment, shouldDisplayCompressed?: boolean) {\n  if (shouldDisplayCompressed && attachment.quick) {\n    if (SUPPORTED_IMAGE_CONTENT_TYPES.has(attachment.mimeType)) {\n      return 'image';\n    }\n    if (SUPPORTED_VIDEO_CONTENT_TYPES.has(attachment.mimeType)) {\n      return 'video';\n    }\n  }\n  return 'file';\n}\n\nexport default memo(AttachmentModalItem);\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { ApiBotCommand } from '../../../api/types';\n\nimport { IS_TOUCH_ENV } from '../../../util/windowEnvironment';\n\nimport useAppLayout from '../../../hooks/useAppLayout';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useMouseInside from '../../../hooks/useMouseInside';\n\nimport Menu from '../../ui/Menu';\nimport ChatCommand from './ChatCommand';\n\nimport './BotCommandMenu.scss';\n\nexport type OwnProps = {\n  isOpen: boolean;\n  botCommands: ApiBotCommand[];\n  onClose: NoneToVoidFunction;\n};\n\nconst BotCommandMenu: FC<OwnProps> = ({\n  isOpen, botCommands, onClose,\n}) => {\n  const { sendBotCommand } = getActions();\n  const { isMobile } = useAppLayout();\n\n  const [handleMouseEnter, handleMouseLeave] = useMouseInside(isOpen, onClose, undefined, isMobile);\n\n  const handleClick = useLastCallback((command: string) => {\n    sendBotCommand({\n      command: `/${command}`,\n    });\n    onClose();\n  });\n\n  return (\n    <Menu\n      isOpen={isOpen}\n      positionX=\"left\"\n      positionY=\"bottom\"\n      onClose={onClose}\n      className=\"BotCommandMenu\"\n      onCloseAnimationEnd={onClose}\n      onMouseEnter={!IS_TOUCH_ENV ? handleMouseEnter : undefined}\n      onMouseLeave={!IS_TOUCH_ENV ? handleMouseLeave : undefined}\n      noCloseOnBackdrop={!IS_TOUCH_ENV}\n      noCompact\n    >\n      {botCommands.map((botCommand) => (\n        <ChatCommand\n          key={botCommand.command}\n          command={botCommand.command}\n          description={botCommand.description}\n          clickArg={botCommand.command}\n          onClick={handleClick}\n        />\n      ))}\n    </Menu>\n  );\n};\n\nexport default memo(BotCommandMenu);\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport type { ApiUser } from '../../../api/types';\n\nimport buildClassName from '../../../util/buildClassName';\nimport renderText from '../../common/helpers/renderText';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Avatar from '../../common/Avatar';\nimport ListItem from '../../ui/ListItem';\n\nimport './ChatCommand.scss';\n\ntype OwnProps<T = undefined> = {\n  command: string;\n  description: string;\n  peer?: ApiUser;\n  withAvatar?: boolean;\n  focus?: boolean;\n  clickArg: T;\n  onClick: (arg: T) => void;\n};\n\n// eslint-disable-next-line @typescript-eslint/comma-dangle\nconst ChatCommand = <T,>({\n  withAvatar,\n  focus,\n  command,\n  description,\n  peer,\n  clickArg,\n  onClick,\n}: OwnProps<T>) => {\n  const handleClick = useLastCallback(() => {\n    onClick(clickArg);\n  });\n\n  return (\n    <ListItem\n      key={command}\n      className={buildClassName('BotCommand chat-item-clickable scroll-item', withAvatar && 'with-avatar')}\n      multiline\n      onClick={handleClick}\n      focus={focus}\n    >\n      {withAvatar && (\n        <Avatar size=\"small\" peer={peer} />\n      )}\n      <div className=\"content-inner\">\n        <span className=\"title\">/{command}</span>\n        <span className=\"subtitle\">{renderText(description)}</span>\n      </div>\n    </ListItem>\n  );\n};\n\nexport default memo(ChatCommand);\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useRef,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal } from '../../../global';\n\nimport type {\n  ApiBotCommand, ApiMessage, ApiQuickReply, ApiUser,\n} from '../../../api/types';\nimport type { Signal } from '../../../util/signals';\n\nimport buildClassName from '../../../util/buildClassName';\nimport freezeWhenClosed from '../../../util/hoc/freezeWhenClosed';\nimport setTooltipItemVisible from '../../../util/setTooltipItemVisible';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useShowTransition from '../../../hooks/useShowTransition';\nimport { useKeyboardNavigation } from './hooks/useKeyboardNavigation';\n\nimport ChatCommand from './ChatCommand';\n\nimport styles from './ChatCommandTooltip.module.scss';\n\nexport type OwnProps = {\n  isOpen: boolean;\n  chatId: string;\n  withUsername?: boolean;\n  botCommands?: ApiBotCommand[];\n  quickReplies?: ApiQuickReply[];\n  quickReplyMessages?: Record<number, ApiMessage>;\n  self: ApiUser;\n  getHtml: Signal<string>;\n  onClick: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n};\n\ntype QuickReplyWithDescription = {\n  id: number;\n  command: string;\n  description: string;\n};\n\nconst ChatCommandTooltip: FC<OwnProps> = ({\n  isOpen,\n  chatId,\n  withUsername,\n  botCommands,\n  quickReplies,\n  quickReplyMessages,\n  self,\n  getHtml,\n  onClick,\n  onClose,\n}) => {\n  const { sendBotCommand, sendQuickReply } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  const { shouldRender, transitionClassNames } = useShowTransition(isOpen, undefined, undefined, false);\n\n  const handleSendCommand = useLastCallback(({ botId, command }: ApiBotCommand) => {\n    // No need for expensive global updates on users and chats, so we avoid them\n    const usersById = getGlobal().users.byId;\n    const bot = usersById[botId];\n\n    sendBotCommand({\n      command: `/${command}${withUsername && bot ? `@${bot.usernames![0].username}` : ''}`,\n    });\n    onClick();\n  });\n\n  const handleSendQuickReply = useLastCallback((id: number) => {\n    sendQuickReply({ chatId, quickReplyId: id });\n    onClick();\n  });\n\n  const quickRepliesWithDescription = useMemo(() => {\n    if (!quickReplies?.length || !quickReplyMessages) return undefined;\n    return quickReplies.map((reply) => {\n      const message = quickReplyMessages[reply.topMessageId];\n      return {\n        id: reply.id,\n        command: reply.shortcut,\n        description: message?.content.text?.text || '',\n      } satisfies QuickReplyWithDescription;\n    });\n  }, [quickReplies, quickReplyMessages]);\n\n  const handleKeyboardSelect = useLastCallback((item: ApiBotCommand | QuickReplyWithDescription) => {\n    if (!item.command.startsWith(getHtml().slice(1))) {\n      return false;\n    }\n\n    if ('id' in item) {\n      handleSendQuickReply(item.id);\n    } else {\n      handleSendCommand(item);\n    }\n\n    return true;\n  });\n\n  const keyboardNavigationItems = useMemo(() => {\n    if (!botCommands && !quickRepliesWithDescription) return undefined;\n    return ([] as (ApiBotCommand | QuickReplyWithDescription)[])\n      .concat(quickRepliesWithDescription || [], botCommands || []);\n  }, [botCommands, quickRepliesWithDescription]);\n\n  const selectedCommandIndex = useKeyboardNavigation({\n    isActive: isOpen,\n    items: keyboardNavigationItems,\n    onSelect: handleKeyboardSelect,\n    onClose,\n  });\n\n  const isEmpty = (botCommands && !botCommands.length) || (quickReplies && !quickReplies.length);\n\n  useEffect(() => {\n    if (isEmpty) {\n      onClose();\n    }\n  }, [isEmpty, onClose]);\n\n  useEffect(() => {\n    setTooltipItemVisible('.chat-item-clickable', selectedCommandIndex, containerRef);\n  }, [selectedCommandIndex]);\n\n  if (!shouldRender || isEmpty) {\n    return undefined;\n  }\n\n  const className = buildClassName(\n    styles.root,\n    'composer-tooltip custom-scroll',\n    transitionClassNames,\n  );\n\n  return (\n    <div className={className} ref={containerRef}>\n      {quickRepliesWithDescription?.map((reply, index) => (\n        <ChatCommand\n          key={`quickReply_${reply.id}`}\n          command={reply.command}\n          description={reply.description}\n          peer={self}\n          withAvatar\n          clickArg={reply.id}\n          onClick={handleSendQuickReply}\n          focus={selectedCommandIndex === index}\n        />\n      ))}\n      {botCommands?.map((command, index) => (\n        <ChatCommand\n          key={`${command.botId}_${command.command}`}\n          command={command.command}\n          description={command.description}\n          // No need for expensive global updates on users and chats, so we avoid them\n          peer={getGlobal().users.byId[command.botId]}\n          withAvatar\n          clickArg={command}\n          onClick={handleSendCommand}\n          focus={selectedCommandIndex + (quickRepliesWithDescription?.length || 0) === index}\n        />\n      ))}\n    </div>\n  );\n};\n\nexport default memo(freezeWhenClosed(ChatCommandTooltip));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo } from '../../../lib/teact/teact';\n\nimport type { ApiSticker } from '../../../api/types';\nimport type { ObserveFn } from '../../../hooks/useIntersectionObserver';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport CustomEmoji from '../../common/CustomEmoji';\n\nimport './EmojiButton.scss';\n\nconst CUSTOM_EMOJI_SIZE = 32;\n\ntype OwnProps = {\n  emoji: ApiSticker;\n  focus?: boolean;\n  onClick?: (emoji: ApiSticker) => void;\n  observeIntersection?: ObserveFn;\n};\n\nconst CustomEmojiButton: FC<OwnProps> = ({\n  emoji, focus, onClick, observeIntersection,\n}) => {\n  const handleClick = useLastCallback((e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n    // Preventing safari from losing focus on Composer MessageInput\n    e.preventDefault();\n\n    onClick?.(emoji);\n  });\n\n  const className = buildClassName(\n    'EmojiButton',\n    focus && 'focus',\n  );\n\n  return (\n    <div\n      className={className}\n      onMouseDown={handleClick}\n      title={emoji.emoji}\n    >\n      <CustomEmoji\n        documentId={emoji.id}\n        size={CUSTOM_EMOJI_SIZE}\n        withSharedAnimation\n        shouldPreloadPreview\n        observeIntersectionForPlaying={observeIntersection}\n      />\n    </div>\n  );\n};\n\nexport default memo(CustomEmojiButton);\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useEffect, useRef } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiSticker } from '../../../api/types';\nimport type { GlobalActions } from '../../../global';\n\nimport { COMPOSER_EMOJI_SIZE_PICKER } from '../../../config';\nimport { selectIsChatWithSelf, selectIsCurrentUserPremium } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport captureEscKeyListener from '../../../util/captureEscKeyListener';\n\nimport useHorizontalScroll from '../../../hooks/useHorizontalScroll';\nimport { useIntersectionObserver } from '../../../hooks/useIntersectionObserver';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport usePrevious from '../../../hooks/usePrevious';\nimport useShowTransition from '../../../hooks/useShowTransition';\n\nimport StickerButton from '../../common/StickerButton';\nimport Loading from '../../ui/Loading';\n\nimport styles from './CustomEmojiTooltip.module.scss';\n\nexport type OwnProps = {\n  chatId: string;\n  isOpen: boolean;\n  addRecentCustomEmoji: GlobalActions['addRecentCustomEmoji'];\n  onCustomEmojiSelect: (customEmoji: ApiSticker) => void;\n  onClose: NoneToVoidFunction;\n  noPlay?: boolean;\n};\n\ntype StateProps = {\n  customEmoji?: ApiSticker[];\n  isSavedMessages?: boolean;\n  isCurrentUserPremium?: boolean;\n};\n\nconst INTERSECTION_THROTTLE = 200;\n\nconst CustomEmojiTooltip: FC<OwnProps & StateProps> = ({\n  isOpen,\n  addRecentCustomEmoji,\n  onCustomEmojiSelect,\n  onClose,\n  customEmoji,\n  isSavedMessages,\n  isCurrentUserPremium,\n  noPlay,\n}) => {\n  const { clearCustomEmojiForEmoji } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  const { shouldRender, transitionClassNames } = useShowTransition(isOpen, undefined, undefined, false);\n  const prevStickers = usePrevious(customEmoji, true);\n  const displayedStickers = customEmoji || prevStickers;\n\n  useHorizontalScroll(containerRef);\n\n  const {\n    observe: observeIntersection,\n  } = useIntersectionObserver({ rootRef: containerRef, throttleMs: INTERSECTION_THROTTLE, isDisabled: !isOpen });\n\n  useEffect(() => (isOpen ? captureEscKeyListener(onClose) : undefined), [isOpen, onClose]);\n\n  const handleCustomEmojiSelect = useLastCallback((ce: ApiSticker) => {\n    if (!isOpen) return;\n    onCustomEmojiSelect(ce);\n    addRecentCustomEmoji({\n      documentId: ce.id,\n    });\n    clearCustomEmojiForEmoji();\n  });\n\n  const className = buildClassName(\n    styles.root,\n    'composer-tooltip custom-scroll-x',\n    transitionClassNames,\n    !displayedStickers?.length && styles.hidden,\n  );\n\n  return (\n    <div\n      ref={containerRef}\n      className={className}\n    >\n      {shouldRender && displayedStickers ? (\n        displayedStickers.map((sticker) => (\n          <StickerButton\n            key={sticker.id}\n            sticker={sticker}\n            className={styles.emojiButton}\n            size={COMPOSER_EMOJI_SIZE_PICKER}\n            observeIntersection={observeIntersection}\n            onClick={handleCustomEmojiSelect}\n            clickArg={sticker}\n            isSavedMessages={isSavedMessages}\n            canViewSet\n            isCurrentUserPremium={isCurrentUserPremium}\n            noPlay={noPlay}\n          />\n        ))\n      ) : shouldRender ? (\n        <Loading />\n      ) : undefined}\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { chatId }): StateProps => {\n    const { stickers: customEmoji } = global.customEmojis.forEmoji;\n    const isSavedMessages = selectIsChatWithSelf(global, chatId);\n    const isCurrentUserPremium = selectIsCurrentUserPremium(global);\n\n    return { customEmoji, isSavedMessages, isCurrentUserPremium };\n  },\n)(CustomEmojiTooltip));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useState,\n} from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type {\n  ApiAvailableReaction,\n  ApiReaction,\n} from '../../../api/types';\nimport type { IAnchorPosition } from '../../../types';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { IS_TOUCH_ENV } from '../../../util/windowEnvironment';\n\nimport useEffectWithPrevDeps from '../../../hooks/useEffectWithPrevDeps';\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useMouseInside from '../../../hooks/useMouseInside';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Menu from '../../ui/Menu';\nimport MenuItem from '../../ui/MenuItem';\nimport ReactionSelector from '../message/reactions/ReactionSelector';\n\nimport './CustomSendMenu.scss';\n\nexport type OwnProps = {\n  isOpen: boolean;\n  isOpenToBottom?: boolean;\n  isSavedMessages?: boolean;\n  canSchedule?: boolean;\n  canScheduleUntilOnline?: boolean;\n  onSendSilent?: NoneToVoidFunction;\n  onSendSchedule?: NoneToVoidFunction;\n  onSendWhenOnline?: NoneToVoidFunction;\n  onRemoveEffect?: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n  onCloseAnimationEnd?: NoneToVoidFunction;\n  chatId?: string;\n  withEffects?: boolean;\n  hasCurrentEffect?: boolean;\n  effectReactions?: ApiReaction[];\n  allAvailableReactions?: ApiAvailableReaction[];\n  onToggleReaction?: (reaction: ApiReaction) => void;\n  canBuyPremium?: boolean;\n  isCurrentUserPremium?: boolean;\n  isInSavedMessages?: boolean;\n  isInStoryViewer?: boolean;\n  canPlayAnimatedEmojis?: boolean;\n};\n\nconst ANIMATION_DURATION = 200;\n\nconst CustomSendMenu: FC<OwnProps> = ({\n  isOpen,\n  isOpenToBottom = false,\n  isSavedMessages,\n  canSchedule,\n  canScheduleUntilOnline,\n  onSendSilent,\n  onSendSchedule,\n  onSendWhenOnline,\n  onRemoveEffect,\n  onClose,\n  onCloseAnimationEnd,\n  chatId,\n  withEffects,\n  hasCurrentEffect,\n  effectReactions,\n  allAvailableReactions,\n  onToggleReaction,\n  canBuyPremium,\n  isCurrentUserPremium,\n  isInSavedMessages,\n  isInStoryViewer,\n  canPlayAnimatedEmojis,\n}) => {\n  const {\n    openEffectPicker,\n  } = getActions();\n\n  const [handleMouseEnter, handleMouseLeave] = useMouseInside(isOpen, onClose);\n  const [displayScheduleUntilOnline, setDisplayScheduleUntilOnline] = useState(false);\n\n  const oldLang = useOldLang();\n  const lang = useLang();\n  const [areItemsHidden, hideItems, showItems] = useFlag();\n\n  useEffectWithPrevDeps(([prevIsOpen]) => {\n    // Avoid context menu item shuffling when opened\n    if (isOpen && !prevIsOpen) {\n      showItems();\n      setDisplayScheduleUntilOnline(Boolean(canScheduleUntilOnline));\n    }\n  }, [isOpen, canScheduleUntilOnline]);\n\n  const [isReady, markIsReady, unmarkIsReady] = useFlag();\n\n  const handleOpenMessageEffectsPicker = useLastCallback((position: IAnchorPosition) => {\n    hideItems();\n    if (chatId) openEffectPicker({ chatId, position });\n  });\n\n  useEffect(() => {\n    if (!isOpen) {\n      unmarkIsReady();\n      return;\n    }\n\n    setTimeout(() => {\n      markIsReady();\n    }, ANIMATION_DURATION);\n  }, [isOpen, markIsReady, unmarkIsReady]);\n\n  return (\n    <Menu\n      isOpen={isOpen}\n      autoClose\n      positionX=\"right\"\n      positionY={isOpenToBottom ? 'top' : 'bottom'}\n      className={buildClassName(\n        'CustomSendMenu', 'fluid', 'with-menu-transitions', withEffects && 'with-effects',\n      )}\n      onClose={onClose}\n      onCloseAnimationEnd={onCloseAnimationEnd}\n      onMouseEnter={!IS_TOUCH_ENV ? handleMouseEnter : undefined}\n      onMouseLeave={!IS_TOUCH_ENV ? handleMouseLeave : undefined}\n      noCloseOnBackdrop={!IS_TOUCH_ENV}\n    >\n\n      {withEffects && !isInStoryViewer && (\n        <ReactionSelector\n          allAvailableReactions={allAvailableReactions}\n          effectReactions={effectReactions}\n          currentReactions={undefined}\n          onToggleReaction={onToggleReaction!}\n          isPrivate\n          isReady={isReady}\n          canBuyPremium={canBuyPremium}\n          isCurrentUserPremium={isCurrentUserPremium}\n          isInSavedMessages={isInSavedMessages}\n          isForEffects\n          canPlayAnimatedEmojis={canPlayAnimatedEmojis}\n          onShowMore={handleOpenMessageEffectsPicker}\n          onClose={onClose}\n          className={buildClassName(areItemsHidden && 'ReactionSelector-hidden')}\n        />\n      )}\n\n      <div\n        className={buildClassName(\n          'CustomSendMenu_items',\n          areItemsHidden && 'CustomSendMenu_items-hidden',\n        )}\n        dir={oldLang.isRtl ? 'rtl' : undefined}\n      >\n        {onSendSilent && <MenuItem icon=\"mute\" onClick={onSendSilent}>{oldLang('SendWithoutSound')}</MenuItem>}\n        {canSchedule && onSendSchedule && (\n          <MenuItem icon=\"schedule\" onClick={onSendSchedule}>\n            {oldLang(isSavedMessages ? 'SetReminder' : 'ScheduleMessage')}\n          </MenuItem>\n        )}\n        {canSchedule && onSendSchedule && displayScheduleUntilOnline && (\n          <MenuItem icon=\"user-online\" onClick={onSendWhenOnline}>\n            {oldLang('SendWhenOnline')}\n          </MenuItem>\n        )}\n        {withEffects && hasCurrentEffect && (\n          <MenuItem icon=\"delete\" onClick={onRemoveEffect}>\n            {lang('RemoveEffect')}\n          </MenuItem>\n        )}\n      </div>\n    </Menu>\n  );\n};\n\nexport default memo(CustomSendMenu);\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo } from '../../../lib/teact/teact';\n\nimport { BASE_URL, IS_PACKAGED_ELECTRON } from '../../../config';\nimport buildClassName from '../../../util/buildClassName';\nimport { handleEmojiLoad, LOADED_EMOJIS } from '../../../util/emoji/emoji';\nimport { IS_EMOJI_SUPPORTED } from '../../../util/windowEnvironment';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport './EmojiButton.scss';\n\ntype OwnProps = {\n  emoji: Emoji;\n  focus?: boolean;\n  onClick: (emoji: string, name: string) => void;\n};\n\nconst EmojiButton: FC<OwnProps> = ({\n  emoji, focus, onClick,\n}) => {\n  const handleClick = useLastCallback((e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n    // Preventing safari from losing focus on Composer MessageInput\n    e.preventDefault();\n\n    onClick(emoji.native, emoji.id);\n  });\n\n  const className = buildClassName(\n    'EmojiButton',\n    focus && 'focus',\n  );\n\n  const src = `${IS_PACKAGED_ELECTRON ? BASE_URL : '.'}/img-apple-64/${emoji.image}.png`;\n  const isLoaded = LOADED_EMOJIS.has(src);\n\n  return (\n    <div\n      className={className}\n      onMouseDown={handleClick}\n      title={`:${emoji.names[0]}:`}\n    >\n      {IS_EMOJI_SUPPORTED ? emoji.native : (\n        <img\n          src={src}\n          className={!isLoaded ? 'opacity-transition shown' : undefined}\n          alt={emoji.native}\n          loading=\"lazy\"\n          data-path={src}\n          onLoad={!isLoaded ? handleEmojiLoad : undefined}\n          draggable={false}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default memo(EmojiButton);\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useRef } from '../../../lib/teact/teact';\n\nimport type { ObserveFn } from '../../../hooks/useIntersectionObserver';\n\nimport { EMOJI_SIZE_PICKER, RECENT_SYMBOL_SET_ID } from '../../../config';\nimport buildClassName from '../../../util/buildClassName';\nimport windowSize from '../../../util/windowSize';\nimport { REM } from '../../common/helpers/mediaDimensions';\n\nimport useAppLayout from '../../../hooks/useAppLayout';\nimport { useOnIntersect } from '../../../hooks/useIntersectionObserver';\nimport useMediaTransition from '../../../hooks/useMediaTransition';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport EmojiButton from './EmojiButton';\n\nconst EMOJIS_PER_ROW_ON_DESKTOP = 8;\nconst EMOJI_MARGIN = 0.625 * REM;\nconst EMOJI_VERTICAL_MARGIN = 0.25 * REM;\nconst EMOJI_VERTICAL_MARGIN_MOBILE = 0.5 * REM;\nconst MOBILE_CONTAINER_PADDING = 0.5 * REM;\n\ntype OwnProps = {\n  category: EmojiCategory;\n  index: number;\n  allEmojis: AllEmojis;\n  observeIntersection: ObserveFn;\n  shouldRender: boolean;\n  onEmojiSelect: (emoji: string, name: string) => void;\n};\n\nconst EmojiCategory: FC<OwnProps> = ({\n  category, index, allEmojis, observeIntersection, shouldRender, onEmojiSelect,\n}) => {\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLDivElement>(null);\n\n  useOnIntersect(ref, observeIntersection);\n\n  const transitionClassNames = useMediaTransition(shouldRender);\n\n  const lang = useOldLang();\n  const { isMobile } = useAppLayout();\n\n  const emojisPerRow = isMobile\n    ? Math.floor(\n      (windowSize.get().width - MOBILE_CONTAINER_PADDING + EMOJI_MARGIN) / (EMOJI_SIZE_PICKER + EMOJI_MARGIN),\n    )\n    : EMOJIS_PER_ROW_ON_DESKTOP;\n  const height = Math.ceil(category.emojis.length / emojisPerRow)\n    * (EMOJI_SIZE_PICKER + (isMobile ? EMOJI_VERTICAL_MARGIN_MOBILE : EMOJI_VERTICAL_MARGIN));\n\n  return (\n    <div\n      ref={ref}\n      key={category.id}\n      id={`emoji-category-${index}`}\n      className=\"symbol-set\"\n    >\n      <div className=\"symbol-set-header\">\n        <p className=\"symbol-set-name\" dir=\"auto\">\n          {lang(category.id === RECENT_SYMBOL_SET_ID ? 'RecentStickers' : `Emoji${index}`)}\n        </p>\n      </div>\n      <div\n        className={buildClassName('symbol-set-container', transitionClassNames)}\n        style={`height: ${height}px;`}\n        dir={lang.isRtl ? 'rtl' : undefined}\n      >\n        {shouldRender && category.emojis.map((name) => {\n          const emoji = allEmojis[name];\n          // Recent emojis may contain emoticons that are no longer in the list\n          if (!emoji) {\n            return undefined;\n          }\n          // Some emojis have multiple skins and are represented as an Object with emojis for all skins.\n          // For now, we select only the first emoji with 'neutral' skin.\n          const displayedEmoji = 'id' in emoji ? emoji : emoji[1];\n\n          return (\n            <EmojiButton\n              key={displayedEmoji.id}\n              emoji={displayedEmoji}\n              onClick={onEmojiSelect}\n            />\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(EmojiCategory);\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo,\n  useRef, useState,\n} from '../../../lib/teact/teact';\nimport { withGlobal } from '../../../global';\n\nimport type { GlobalState } from '../../../global/types';\nimport type {\n  EmojiData,\n  EmojiModule,\n  EmojiRawData,\n} from '../../../util/emoji/emoji';\n\nimport { MENU_TRANSITION_DURATION, RECENT_SYMBOL_SET_ID } from '../../../config';\nimport animateHorizontalScroll from '../../../util/animateHorizontalScroll';\nimport animateScroll from '../../../util/animateScroll';\nimport buildClassName from '../../../util/buildClassName';\nimport { uncompressEmoji } from '../../../util/emoji/emoji';\nimport { pick } from '../../../util/iteratees';\nimport { MEMO_EMPTY_ARRAY } from '../../../util/memo';\nimport { IS_TOUCH_ENV } from '../../../util/windowEnvironment';\nimport { REM } from '../../common/helpers/mediaDimensions';\n\nimport useAppLayout from '../../../hooks/useAppLayout';\nimport useHorizontalScroll from '../../../hooks/useHorizontalScroll';\nimport { useIntersectionObserver } from '../../../hooks/useIntersectionObserver';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\nimport useScrolledState from '../../../hooks/useScrolledState';\nimport useAsyncRendering from '../../right/hooks/useAsyncRendering';\n\nimport Button from '../../ui/Button';\nimport Loading from '../../ui/Loading';\nimport EmojiCategory from './EmojiCategory';\n\nimport './EmojiPicker.scss';\n\ntype OwnProps = {\n  className?: string;\n  onEmojiSelect: (emoji: string, name: string) => void;\n};\n\ntype StateProps = Pick<GlobalState, 'recentEmojis'>;\n\ntype EmojiCategoryData = { id: string; name: string; emojis: string[] };\n\nconst ICONS_BY_CATEGORY: Record<string, string> = {\n  recent: 'icon-recent',\n  people: 'icon-smile',\n  nature: 'icon-animals',\n  foods: 'icon-eats',\n  activity: 'icon-sport',\n  places: 'icon-car',\n  objects: 'icon-lamp',\n  symbols: 'icon-language',\n  flags: 'icon-flag',\n};\n\nconst OPEN_ANIMATION_DELAY = 200;\nconst SMOOTH_SCROLL_DISTANCE = 100;\nconst FOCUS_MARGIN = 3.25 * REM;\nconst HEADER_BUTTON_WIDTH = 2.625 * REM; // Includes margins\nconst INTERSECTION_THROTTLE = 200;\n\nconst categoryIntersections: boolean[] = [];\n\nlet emojiDataPromise: Promise<EmojiModule>;\nlet emojiRawData: EmojiRawData;\nlet emojiData: EmojiData;\n\nconst EmojiPicker: FC<OwnProps & StateProps> = ({\n  className,\n  recentEmojis,\n  onEmojiSelect,\n}) => {\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const headerRef = useRef<HTMLDivElement>(null);\n\n  const [categories, setCategories] = useState<EmojiCategoryData[]>();\n  const [emojis, setEmojis] = useState<AllEmojis>();\n  const [activeCategoryIndex, setActiveCategoryIndex] = useState(0);\n  const { isMobile } = useAppLayout();\n  const {\n    handleScroll: handleContentScroll,\n    isAtBeginning: shouldHideTopBorder,\n  } = useScrolledState();\n\n  const { observe: observeIntersection } = useIntersectionObserver({\n    rootRef: containerRef,\n    throttleMs: INTERSECTION_THROTTLE,\n  }, (entries) => {\n    entries.forEach((entry) => {\n      const { id } = entry.target as HTMLDivElement;\n      if (!id || !id.startsWith('emoji-category-')) {\n        return;\n      }\n\n      const index = Number(id.replace('emoji-category-', ''));\n      categoryIntersections[index] = entry.isIntersecting;\n    });\n\n    const minIntersectingIndex = categoryIntersections.reduce((lowestIndex, isIntersecting, index) => {\n      return isIntersecting && index < lowestIndex ? index : lowestIndex;\n    }, Infinity);\n\n    if (minIntersectingIndex === Infinity) {\n      return;\n    }\n\n    setActiveCategoryIndex(minIntersectingIndex);\n  });\n\n  const canRenderContents = useAsyncRendering([], MENU_TRANSITION_DURATION);\n  const shouldRenderContent = emojis && canRenderContents;\n\n  useHorizontalScroll(headerRef, !(isMobile && shouldRenderContent));\n\n  // Scroll header when active set updates\n  useEffect(() => {\n    if (!categories) {\n      return;\n    }\n\n    const header = headerRef.current;\n    if (!header) {\n      return;\n    }\n\n    const newLeft = activeCategoryIndex * HEADER_BUTTON_WIDTH - header.offsetWidth / 2 + HEADER_BUTTON_WIDTH / 2;\n\n    animateHorizontalScroll(header, newLeft);\n  }, [categories, activeCategoryIndex]);\n\n  const lang = useOldLang();\n\n  const allCategories = useMemo(() => {\n    if (!categories) {\n      return MEMO_EMPTY_ARRAY;\n    }\n    const themeCategories = [...categories];\n    if (recentEmojis?.length) {\n      themeCategories.unshift({\n        id: RECENT_SYMBOL_SET_ID,\n        name: lang('RecentStickers'),\n        emojis: recentEmojis,\n      });\n    }\n\n    return themeCategories;\n  }, [categories, lang, recentEmojis]);\n\n  // Initialize data on first render.\n  useEffect(() => {\n    setTimeout(() => {\n      const exec = () => {\n        setCategories(emojiData.categories);\n\n        setEmojis(emojiData.emojis as AllEmojis);\n      };\n\n      if (emojiData) {\n        exec();\n      } else {\n        ensureEmojiData()\n          .then(exec);\n      }\n    }, OPEN_ANIMATION_DELAY);\n  }, []);\n\n  const selectCategory = useLastCallback((index: number) => {\n    setActiveCategoryIndex(index);\n    const categoryEl = containerRef.current!.closest<HTMLElement>('.SymbolMenu-main')!\n      .querySelector(`#emoji-category-${index}`)! as HTMLElement;\n    animateScroll(containerRef.current!, categoryEl, 'start', FOCUS_MARGIN, SMOOTH_SCROLL_DISTANCE);\n  });\n\n  const handleEmojiSelect = useLastCallback((emoji: string, name: string) => {\n    onEmojiSelect(emoji, name);\n  });\n\n  function renderCategoryButton(category: EmojiCategoryData, index: number) {\n    const icon = ICONS_BY_CATEGORY[category.id];\n\n    return icon && (\n      <Button\n        className={`symbol-set-button ${index === activeCategoryIndex ? 'activated' : ''}`}\n        round\n        faded\n        color=\"translucent\"\n        // eslint-disable-next-line react/jsx-no-bind\n        onClick={() => selectCategory(index)}\n        ariaLabel={category.name}\n      >\n        <i className={buildClassName('icon', icon)} />\n      </Button>\n    );\n  }\n\n  const containerClassName = buildClassName('EmojiPicker', className);\n\n  if (!shouldRenderContent) {\n    return (\n      <div className={containerClassName}>\n        <Loading />\n      </div>\n    );\n  }\n\n  const headerClassName = buildClassName(\n    'EmojiPicker-header',\n    !shouldHideTopBorder && 'with-top-border',\n  );\n\n  return (\n    <div className={containerClassName}>\n      <div\n        ref={headerRef}\n        className={headerClassName}\n        dir={lang.isRtl ? 'rtl' : undefined}\n      >\n        {allCategories.map(renderCategoryButton)}\n      </div>\n      <div\n        ref={containerRef}\n        onScroll={handleContentScroll}\n        className={buildClassName('EmojiPicker-main', IS_TOUCH_ENV ? 'no-scrollbar' : 'custom-scroll')}\n      >\n        {allCategories.map((category, i) => (\n          <EmojiCategory\n            category={category}\n            index={i}\n            allEmojis={emojis}\n            observeIntersection={observeIntersection}\n            shouldRender={activeCategoryIndex >= i - 1 && activeCategoryIndex <= i + 1}\n            onEmojiSelect={handleEmojiSelect}\n          />\n        ))}\n      </div>\n    </div>\n  );\n};\n\nasync function ensureEmojiData() {\n  if (!emojiDataPromise) {\n    emojiDataPromise = import('emoji-data-ios/emoji-data.json');\n    emojiRawData = (await emojiDataPromise).default;\n\n    emojiData = uncompressEmoji(emojiRawData);\n  }\n\n  return emojiDataPromise;\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => pick(global, ['recentEmojis']),\n)(EmojiPicker));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useRef } from '../../../lib/teact/teact';\n\nimport type { ApiSticker } from '../../../api/types';\n\nimport animateHorizontalScroll from '../../../util/animateHorizontalScroll';\nimport buildClassName from '../../../util/buildClassName';\nimport findInViewport from '../../../util/findInViewport';\nimport isFullyVisible from '../../../util/isFullyVisible';\n\nimport useEffectWithPrevDeps from '../../../hooks/useEffectWithPrevDeps';\nimport useHorizontalScroll from '../../../hooks/useHorizontalScroll';\nimport { useIntersectionObserver } from '../../../hooks/useIntersectionObserver';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport usePrevDuringAnimation from '../../../hooks/usePrevDuringAnimation';\nimport useShowTransition from '../../../hooks/useShowTransition';\nimport { useKeyboardNavigation } from './hooks/useKeyboardNavigation';\n\nimport Loading from '../../ui/Loading';\nimport CustomEmojiButton from './CustomEmojiButton';\nimport EmojiButton from './EmojiButton';\n\nimport './EmojiTooltip.scss';\n\nconst VIEWPORT_MARGIN = 8;\nconst EMOJI_BUTTON_WIDTH = 44;\nconst CLOSE_DURATION = 350;\n\nfunction setItemVisible(index: number, containerRef: Record<string, any>) {\n  const container = containerRef.current!;\n  if (!container) {\n    return;\n  }\n\n  const { visibleIndexes, allElements } = findInViewport(\n    container,\n    '.EmojiButton',\n    VIEWPORT_MARGIN,\n    true,\n    true,\n    true,\n  );\n\n  if (!allElements.length || !allElements[index]) {\n    return;\n  }\n  const first = visibleIndexes[0];\n  if (!visibleIndexes.includes(index)\n    || (index === first && !isFullyVisible(container, allElements[first], true))) {\n    const position = index > visibleIndexes[visibleIndexes.length - 1] ? 'start' : 'end';\n    const newLeft = position === 'start' ? index * EMOJI_BUTTON_WIDTH : 0;\n\n    animateHorizontalScroll(container, newLeft);\n  }\n}\n\nexport type OwnProps = {\n  isOpen: boolean;\n  emojis: Emoji[];\n  customEmojis: ApiSticker[];\n  onEmojiSelect: (text: string) => void;\n  onCustomEmojiSelect: (emoji: ApiSticker) => void;\n  onClose: NoneToVoidFunction;\n  addRecentEmoji: ({ emoji }: { emoji: string }) => void;\n  addRecentCustomEmoji: ({ documentId }: { documentId: string }) => void;\n};\n\nconst INTERSECTION_THROTTLE = 200;\n\nconst EmojiTooltip: FC<OwnProps> = ({\n  isOpen,\n  emojis,\n  customEmojis,\n  onClose,\n  onEmojiSelect,\n  onCustomEmojiSelect,\n  addRecentEmoji,\n  addRecentCustomEmoji,\n}) => {\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  const { shouldRender, transitionClassNames } = useShowTransition(isOpen, undefined, undefined, false);\n  const listEmojis: (Emoji | ApiSticker)[] = usePrevDuringAnimation(\n    emojis.length ? [...customEmojis, ...emojis] : undefined, CLOSE_DURATION,\n  ) || [];\n\n  useHorizontalScroll(containerRef);\n\n  const {\n    observe: observeIntersection,\n  } = useIntersectionObserver({ rootRef: containerRef, throttleMs: INTERSECTION_THROTTLE, isDisabled: !isOpen });\n\n  const handleSelectEmoji = useLastCallback((emoji: Emoji) => {\n    onEmojiSelect(emoji.native);\n    addRecentEmoji({ emoji: emoji.id });\n  });\n\n  const handleCustomEmojiSelect = useLastCallback((emoji: ApiSticker) => {\n    onCustomEmojiSelect(emoji);\n    addRecentCustomEmoji({ documentId: emoji.id });\n  });\n\n  const handleSelect = useLastCallback((emoji: Emoji | ApiSticker) => {\n    if ('native' in emoji) {\n      handleSelectEmoji(emoji);\n    } else {\n      handleCustomEmojiSelect(emoji);\n    }\n  });\n\n  const handleClick = useLastCallback((native: string, id: string) => {\n    onEmojiSelect(native);\n    addRecentEmoji({ emoji: id });\n  });\n\n  const handleCustomEmojiClick = useLastCallback((emoji: ApiSticker) => {\n    onCustomEmojiSelect(emoji);\n    addRecentCustomEmoji({ documentId: emoji.id });\n  });\n\n  const selectedIndex = useKeyboardNavigation({\n    isActive: isOpen,\n    isHorizontal: true,\n    items: listEmojis,\n    shouldRemoveSelectionOnReset: true,\n    onSelect: handleSelect,\n    onClose,\n  });\n\n  useEffectWithPrevDeps(([prevSelectedIndex]) => {\n    if (prevSelectedIndex === undefined || prevSelectedIndex === -1) {\n      return;\n    }\n\n    setItemVisible(selectedIndex, containerRef);\n  }, [selectedIndex]);\n\n  const className = buildClassName(\n    'EmojiTooltip composer-tooltip custom-scroll-x',\n    transitionClassNames,\n  );\n\n  return (\n    <div\n      ref={containerRef}\n      className={className}\n    >\n      {shouldRender && listEmojis ? (\n        listEmojis.map((emoji, index) => (\n          'native' in emoji ? (\n            <EmojiButton\n              key={emoji.id}\n              emoji={emoji}\n              focus={selectedIndex === index}\n              onClick={handleClick}\n            />\n          ) : (\n            <CustomEmojiButton\n              key={emoji.id}\n              emoji={emoji}\n              focus={selectedIndex === index}\n              onClick={handleCustomEmojiClick}\n              observeIntersection={observeIntersection}\n            />\n          )\n        ))\n      ) : shouldRender ? (\n        <Loading />\n      ) : undefined}\n    </div>\n  );\n};\n\nexport default memo(EmojiTooltip);\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useRef,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiVideo } from '../../../api/types';\n\nimport { SLIDE_TRANSITION_DURATION } from '../../../config';\nimport { selectCurrentMessageList, selectIsChatWithSelf } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { IS_TOUCH_ENV } from '../../../util/windowEnvironment';\n\nimport { useIntersectionObserver } from '../../../hooks/useIntersectionObserver';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useAsyncRendering from '../../right/hooks/useAsyncRendering';\n\nimport GifButton from '../../common/GifButton';\nimport Loading from '../../ui/Loading';\n\nimport './GifPicker.scss';\n\ntype OwnProps = {\n  className: string;\n  loadAndPlay: boolean;\n  canSendGifs?: boolean;\n  onGifSelect?: (gif: ApiVideo, isSilent?: boolean, shouldSchedule?: boolean) => void;\n};\n\ntype StateProps = {\n  savedGifs?: ApiVideo[];\n  isSavedMessages?: boolean;\n};\n\nconst INTERSECTION_DEBOUNCE = 300;\n\nconst GifPicker: FC<OwnProps & StateProps> = ({\n  className,\n  loadAndPlay,\n  canSendGifs,\n  savedGifs,\n  isSavedMessages,\n  onGifSelect,\n}) => {\n  const { loadSavedGifs, saveGif } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  const {\n    observe: observeIntersection,\n  } = useIntersectionObserver({ rootRef: containerRef, debounceMs: INTERSECTION_DEBOUNCE });\n\n  useEffect(() => {\n    if (loadAndPlay) {\n      loadSavedGifs();\n    }\n  }, [loadAndPlay, loadSavedGifs]);\n\n  const handleUnsaveClick = useLastCallback((gif: ApiVideo) => {\n    saveGif({ gif, shouldUnsave: true });\n  });\n\n  const canRenderContents = useAsyncRendering([], SLIDE_TRANSITION_DURATION);\n\n  return (\n    <div>\n      <div\n        ref={containerRef}\n        className={buildClassName('GifPicker', className, IS_TOUCH_ENV ? 'no-scrollbar' : 'custom-scroll')}\n      >\n        {!canSendGifs ? (\n          <div className=\"picker-disabled\">Sending GIFs is not allowed in this chat.</div>\n        ) : canRenderContents && savedGifs && savedGifs.length ? (\n          savedGifs.map((gif) => (\n            <GifButton\n              key={gif.id}\n              gif={gif}\n              observeIntersection={observeIntersection}\n              isDisabled={!loadAndPlay}\n              onClick={canSendGifs ? onGifSelect : undefined}\n              onUnsaveClick={handleUnsaveClick}\n              isSavedMessages={isSavedMessages}\n            />\n          ))\n        ) : canRenderContents && savedGifs ? (\n          <div className=\"picker-disabled\">No saved GIFs.</div>\n        ) : (\n          <Loading />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const { chatId } = selectCurrentMessageList(global) || {};\n    const isSavedMessages = Boolean(chatId) && selectIsChatWithSelf(global, chatId);\n    return {\n      savedGifs: global.gifs.saved.gifs,\n      isSavedMessages,\n    };\n  },\n)(GifPicker));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useEffect, useRef } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type {\n  ApiBotInlineMediaResult, ApiBotInlineResult, ApiBotInlineSwitchPm, ApiBotInlineSwitchWebview,\n} from '../../../api/types';\nimport { LoadMoreDirection } from '../../../types';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { throttle } from '../../../util/schedulers';\nimport setTooltipItemVisible from '../../../util/setTooltipItemVisible';\nimport { extractCurrentThemeParams } from '../../../util/themeStyle';\nimport { IS_TOUCH_ENV } from '../../../util/windowEnvironment';\n\nimport useCurrentOrPrev from '../../../hooks/useCurrentOrPrev';\nimport { useIntersectionObserver } from '../../../hooks/useIntersectionObserver';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport usePrevious from '../../../hooks/usePrevious';\nimport useShowTransition from '../../../hooks/useShowTransition';\nimport { useKeyboardNavigation } from './hooks/useKeyboardNavigation';\n\nimport InfiniteScroll from '../../ui/InfiniteScroll';\nimport ListItem from '../../ui/ListItem';\nimport ArticleResult from './inlineResults/ArticleResult';\nimport GifResult from './inlineResults/GifResult';\nimport MediaResult from './inlineResults/MediaResult';\nimport StickerResult from './inlineResults/StickerResult';\n\nimport './InlineBotTooltip.scss';\n\nconst INTERSECTION_DEBOUNCE_MS = 200;\nconst runThrottled = throttle((cb) => cb(), 500, true);\n\nexport type OwnProps = {\n  isOpen: boolean;\n  botId?: string;\n  isGallery?: boolean;\n  inlineBotResults?: (ApiBotInlineResult | ApiBotInlineMediaResult)[];\n  switchPm?: ApiBotInlineSwitchPm;\n  switchWebview?: ApiBotInlineSwitchWebview;\n  isSavedMessages?: boolean;\n  canSendGifs?: boolean;\n  onSelectResult: (\n    inlineResult: ApiBotInlineMediaResult | ApiBotInlineResult, isSilent?: boolean, shouldSchedule?: boolean,\n  ) => void;\n  loadMore: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n  isCurrentUserPremium?: boolean;\n};\n\nconst InlineBotTooltip: FC<OwnProps> = ({\n  isOpen,\n  botId,\n  isGallery,\n  inlineBotResults,\n  switchPm,\n  switchWebview,\n  isSavedMessages,\n  canSendGifs,\n  loadMore,\n  onClose,\n  onSelectResult,\n  isCurrentUserPremium,\n}) => {\n  const {\n    openChat,\n    startBot,\n    requestSimpleWebView,\n  } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  const { shouldRender, transitionClassNames } = useShowTransition(isOpen, undefined, undefined, false);\n  const renderedIsGallery = useCurrentOrPrev(isGallery, shouldRender);\n  const {\n    observe: observeIntersection,\n  } = useIntersectionObserver({\n    rootRef: containerRef,\n    debounceMs: INTERSECTION_DEBOUNCE_MS,\n    isDisabled: !isOpen,\n  });\n\n  const handleLoadMore = useLastCallback(({ direction }: { direction: LoadMoreDirection }) => {\n    if (direction === LoadMoreDirection.Backwards) {\n      runThrottled(loadMore);\n    }\n  });\n\n  const selectedIndex = useKeyboardNavigation({\n    isActive: isOpen,\n    shouldRemoveSelectionOnReset: renderedIsGallery,\n    noArrowNavigation: renderedIsGallery,\n    items: inlineBotResults,\n    onSelect: onSelectResult,\n    onClose,\n  });\n\n  useEffect(() => {\n    setTooltipItemVisible('.chat-item-clickable', selectedIndex, containerRef);\n  }, [selectedIndex]);\n\n  const handleSendPm = useLastCallback(() => {\n    openChat({ id: botId });\n    startBot({ botId: botId!, param: switchPm!.startParam });\n  });\n\n  const handleOpenWebview = useLastCallback(() => {\n    const theme = extractCurrentThemeParams();\n\n    requestSimpleWebView({\n      botId: botId!,\n      url: switchWebview!.url,\n      buttonText: switchWebview!.text,\n      theme,\n      isFromSwitchWebView: true,\n    });\n  });\n\n  const prevInlineBotResults = usePrevious(\n    inlineBotResults?.length\n      ? inlineBotResults\n      : undefined,\n    shouldRender,\n  );\n  const renderedInlineBotResults = inlineBotResults?.length ? inlineBotResults : prevInlineBotResults;\n\n  if (!shouldRender || !(renderedInlineBotResults?.length || switchPm)) {\n    return undefined;\n  }\n\n  const className = buildClassName(\n    'InlineBotTooltip composer-tooltip',\n    IS_TOUCH_ENV ? 'no-scrollbar' : 'custom-scroll',\n    renderedIsGallery && 'gallery',\n    transitionClassNames,\n  );\n\n  function renderSwitchPm() {\n    return (\n      <ListItem ripple className=\"switch-pm scroll-item\" onClick={handleSendPm}>\n        <span className=\"title\">{switchPm!.text}</span>\n      </ListItem>\n    );\n  }\n\n  function renderSwitchWebview() {\n    return (\n      <ListItem ripple className=\"switch-pm scroll-item\" onClick={handleOpenWebview}>\n        <span className=\"title\">{switchWebview!.text}</span>\n      </ListItem>\n    );\n  }\n\n  function renderContent() {\n    return renderedInlineBotResults!.map((inlineBotResult, index) => {\n      switch (inlineBotResult.type) {\n        case 'gif':\n          return (\n            <GifResult\n              key={inlineBotResult.id}\n              inlineResult={inlineBotResult}\n              observeIntersection={observeIntersection}\n              onClick={onSelectResult}\n              isSavedMessages={isSavedMessages}\n              canSendGifs={canSendGifs}\n            />\n          );\n\n        case 'photo':\n          return (\n            <MediaResult\n              key={inlineBotResult.id}\n              isForGallery={renderedIsGallery}\n              inlineResult={inlineBotResult}\n              onClick={onSelectResult}\n            />\n          );\n\n        case 'sticker':\n          return (\n            <StickerResult\n              key={inlineBotResult.id}\n              inlineResult={inlineBotResult}\n              observeIntersection={observeIntersection}\n              onClick={onSelectResult}\n              isSavedMessages={isSavedMessages}\n              isCurrentUserPremium={isCurrentUserPremium}\n            />\n          );\n\n        case 'video':\n        case 'file':\n        case 'game':\n          return (\n            <MediaResult\n              key={inlineBotResult.id}\n              focus={selectedIndex === index}\n              inlineResult={inlineBotResult}\n              onClick={onSelectResult}\n            />\n          );\n        case 'article':\n        case 'audio':\n        case 'voice':\n          return (\n            <ArticleResult\n              key={inlineBotResult.id}\n              focus={selectedIndex === index}\n              inlineResult={inlineBotResult}\n              onClick={onSelectResult}\n            />\n          );\n\n        default:\n          return undefined;\n      }\n    });\n  }\n\n  return (\n    <InfiniteScroll\n      ref={containerRef}\n      className={className}\n      items={renderedInlineBotResults}\n      itemSelector=\".chat-item-clickable\"\n      noFastList\n      onLoadMore={handleLoadMore}\n      sensitiveArea={160}\n    >\n      {switchPm && renderSwitchPm()}\n      {switchWebview && renderSwitchWebview()}\n      {Boolean(renderedInlineBotResults?.length) && renderContent()}\n    </InfiniteScroll>\n  );\n};\n\nexport default memo(InlineBotTooltip);\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useEffect, useRef } from '../../../lib/teact/teact';\nimport { getGlobal } from '../../../global';\n\nimport type { ApiUser } from '../../../api/types';\n\nimport buildClassName from '../../../util/buildClassName';\nimport setTooltipItemVisible from '../../../util/setTooltipItemVisible';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport usePrevious from '../../../hooks/usePrevious';\nimport useShowTransition from '../../../hooks/useShowTransition';\nimport { useKeyboardNavigation } from './hooks/useKeyboardNavigation';\n\nimport PrivateChatInfo from '../../common/PrivateChatInfo';\nimport ListItem from '../../ui/ListItem';\n\nimport './MentionTooltip.scss';\n\nexport type OwnProps = {\n  isOpen: boolean;\n  onClose: () => void;\n  onInsertUserName: (user: ApiUser, forceFocus?: boolean) => void;\n  filteredUsers?: ApiUser[];\n};\n\nconst MentionTooltip: FC<OwnProps> = ({\n  isOpen,\n  onClose,\n  onInsertUserName,\n  filteredUsers,\n}) => {\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  const { shouldRender, transitionClassNames } = useShowTransition(isOpen, undefined, undefined, false);\n\n  const handleUserSelect = useLastCallback((userId: string, forceFocus = false) => {\n    // No need for expensive global updates on users, so we avoid them\n    const usersById = getGlobal().users.byId;\n    const user = usersById[userId];\n    if (!user) {\n      return;\n    }\n\n    onInsertUserName(user, forceFocus);\n  });\n\n  const handleClick = useLastCallback((e: React.MouseEvent, id: string) => {\n    e.preventDefault();\n\n    handleUserSelect(id);\n  });\n\n  const handleSelectMention = useLastCallback((member: ApiUser) => {\n    handleUserSelect(member.id, true);\n  });\n\n  const selectedMentionIndex = useKeyboardNavigation({\n    isActive: isOpen,\n    items: filteredUsers,\n    onSelect: handleSelectMention,\n    shouldSelectOnTab: true,\n    shouldSaveSelectionOnUpdateItems: true,\n    onClose,\n  });\n\n  useEffect(() => {\n    setTooltipItemVisible('.chat-item-clickable', selectedMentionIndex, containerRef);\n  }, [selectedMentionIndex]);\n\n  useEffect(() => {\n    if (filteredUsers && !filteredUsers.length) {\n      onClose();\n    }\n  }, [filteredUsers, onClose]);\n\n  const prevChatMembers = usePrevious(\n    filteredUsers?.length\n      ? filteredUsers\n      : undefined,\n    shouldRender,\n  );\n  const renderedChatMembers = filteredUsers && !filteredUsers.length\n    ? prevChatMembers\n    : filteredUsers;\n\n  if (!shouldRender || (renderedChatMembers && !renderedChatMembers.length)) {\n    return undefined;\n  }\n\n  const className = buildClassName(\n    'MentionTooltip composer-tooltip custom-scroll',\n    transitionClassNames,\n  );\n\n  return (\n    <div className={className} ref={containerRef}>\n      {renderedChatMembers?.map(({ id }, index) => (\n        <ListItem\n          key={id}\n          className=\"chat-item-clickable scroll-item smaller-icon\"\n          onClick={handleClick}\n          clickArg={id}\n          focus={selectedMentionIndex === index}\n        >\n          <PrivateChatInfo\n            userId={id}\n            avatarSize=\"small\"\n            withUsername\n          />\n        </ListItem>\n      ))}\n    </div>\n  );\n};\n\nexport default memo(MentionTooltip);\n","import type { ChangeEvent, RefObject } from 'react';\nimport type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useRef, useState,\n} from '../../../lib/teact/teact';\n\nimport type { ApiNewPoll } from '../../../api/types';\n\nimport { requestMeasure, requestNextMutation } from '../../../lib/fasterdom/fasterdom';\nimport captureEscKeyListener from '../../../util/captureEscKeyListener';\nimport parseHtmlAsFormattedText from '../../../util/parseHtmlAsFormattedText';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Button from '../../ui/Button';\nimport Checkbox from '../../ui/Checkbox';\nimport InputText from '../../ui/InputText';\nimport Modal from '../../ui/Modal';\nimport RadioGroup from '../../ui/RadioGroup';\nimport TextArea from '../../ui/TextArea';\n\nimport './PollModal.scss';\n\nexport type OwnProps = {\n  isOpen: boolean;\n  shouldBeAnonymous?: boolean;\n  isQuiz?: boolean;\n  onSend: (pollSummary: ApiNewPoll) => void;\n  onClear: () => void;\n};\n\nconst MAX_LIST_HEIGHT = 320;\nconst MAX_OPTIONS_COUNT = 10;\nconst MAX_OPTION_LENGTH = 100;\nconst MAX_QUESTION_LENGTH = 255;\nconst MAX_SOLUTION_LENGTH = 200;\n\nconst PollModal: FC<OwnProps> = ({\n  isOpen, isQuiz, shouldBeAnonymous, onSend, onClear,\n}) => {\n  // eslint-disable-next-line no-null/no-null\n  const questionInputRef = useRef<HTMLInputElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const optionsListRef = useRef<HTMLDivElement>(null);\n\n  const [question, setQuestion] = useState<string>('');\n  const [options, setOptions] = useState<string[]>(['']);\n  const [isAnonymous, setIsAnonymous] = useState(true);\n  const [isMultipleAnswers, setIsMultipleAnswers] = useState(false);\n  const [isQuizMode, setIsQuizMode] = useState(isQuiz || false);\n  const [solution, setSolution] = useState<string>('');\n  const [correctOption, setCorrectOption] = useState<number | undefined>();\n  const [hasErrors, setHasErrors] = useState<boolean>(false);\n\n  const lang = useOldLang();\n\n  const handleSolutionChange = useLastCallback((e: ChangeEvent<HTMLTextAreaElement>) => {\n    setSolution(e.target.value);\n  });\n\n  const focusInput = useLastCallback((ref: RefObject<HTMLInputElement>) => {\n    if (isOpen && ref.current) {\n      ref.current.focus();\n    }\n  });\n\n  useEffect(() => (isOpen ? captureEscKeyListener(onClear) : undefined), [isOpen, onClear]);\n  useEffect(() => {\n    if (!isOpen) {\n      setQuestion('');\n      setOptions(['']);\n      setIsAnonymous(true);\n      setIsMultipleAnswers(false);\n      setIsQuizMode(isQuiz || false);\n      setSolution('');\n      setCorrectOption(undefined);\n      setHasErrors(false);\n    }\n  }, [isQuiz, isOpen]);\n\n  useEffect(() => focusInput(questionInputRef), [focusInput, isOpen]);\n\n  const addNewOption = useLastCallback((newOptions: string[] = []) => {\n    setOptions([...newOptions, '']);\n\n    requestNextMutation(() => {\n      const list = optionsListRef.current;\n      if (!list) {\n        return;\n      }\n\n      requestMeasure(() => {\n        list.scrollTo({ top: list.scrollHeight, behavior: 'smooth' });\n      });\n    });\n  });\n\n  const handleCreate = useLastCallback(() => {\n    setHasErrors(false);\n    if (!isOpen) {\n      return;\n    }\n\n    const isNoCorrectOptionError = isQuizMode && (correctOption === undefined || !options[correctOption].trim());\n\n    const answers = options\n      .map((text, index) => {\n        text = text.trim();\n\n        if (!text) return undefined;\n\n        return {\n          text: {\n            text,\n          },\n          option: String(index),\n          ...(index === correctOption && { correct: true }),\n        };\n      }).filter(Boolean);\n\n    const questionTrimmed = question.trim().substring(0, MAX_QUESTION_LENGTH);\n    if (!questionTrimmed || answers.length < 2) {\n      setQuestion(questionTrimmed);\n      if (answers.length) {\n        const optionsTrimmed = options.map((o) => o.trim().substring(0, MAX_OPTION_LENGTH)).filter(Boolean);\n        if (optionsTrimmed.length < 2) {\n          addNewOption(optionsTrimmed);\n        } else {\n          setOptions(optionsTrimmed);\n        }\n      } else {\n        addNewOption();\n      }\n      setHasErrors(true);\n      return;\n    }\n\n    if (isNoCorrectOptionError) {\n      setHasErrors(true);\n      return;\n    }\n\n    const payload: ApiNewPoll = {\n      summary: {\n        question: {\n          text: questionTrimmed,\n        },\n        answers,\n        ...(!isAnonymous && { isPublic: true }),\n        ...(isMultipleAnswers && { multipleChoice: true }),\n        ...(isQuizMode && { quiz: true }),\n      },\n    };\n\n    if (isQuizMode) {\n      const { text, entities } = (solution && parseHtmlAsFormattedText(solution.substring(0, MAX_SOLUTION_LENGTH)))\n        || {};\n\n      payload.quiz = {\n        correctAnswers: [String(correctOption)],\n        ...(text && { solution: text }),\n        ...(entities && { solutionEntities: entities }),\n      };\n    }\n\n    onSend(payload);\n  });\n\n  const updateOption = useLastCallback((index: number, text: string) => {\n    const newOptions = [...options];\n    newOptions[index] = text;\n    if (newOptions[newOptions.length - 1].trim().length && newOptions.length < MAX_OPTIONS_COUNT) {\n      addNewOption(newOptions);\n    } else {\n      setOptions(newOptions);\n    }\n  });\n\n  const removeOption = useLastCallback((index: number) => {\n    const newOptions = [...options];\n    newOptions.splice(index, 1);\n    setOptions(newOptions);\n\n    if (correctOption !== undefined) {\n      if (correctOption === index) {\n        setCorrectOption(undefined);\n      } else if (index < correctOption) {\n        setCorrectOption(correctOption - 1);\n      }\n    }\n\n    requestNextMutation(() => {\n      if (!optionsListRef.current) {\n        return;\n      }\n\n      optionsListRef.current.classList.toggle('overflown', optionsListRef.current.scrollHeight > MAX_LIST_HEIGHT);\n    });\n  });\n\n  const handleCorrectOptionChange = useLastCallback((newValue: string) => {\n    setCorrectOption(Number(newValue));\n  });\n\n  const handleIsAnonymousChange = useLastCallback((e: ChangeEvent<HTMLInputElement>) => {\n    setIsAnonymous(e.target.checked);\n  });\n\n  const handleMultipleAnswersChange = useLastCallback((e: ChangeEvent<HTMLInputElement>) => {\n    setIsMultipleAnswers(e.target.checked);\n  });\n\n  const handleQuizModeChange = useLastCallback((e: ChangeEvent<HTMLInputElement>) => {\n    setIsQuizMode(e.target.checked);\n  });\n\n  const handleKeyPress = useLastCallback((e: React.KeyboardEvent<HTMLDivElement>) => {\n    if (e.keyCode === 13) {\n      handleCreate();\n    }\n  });\n\n  const handleQuestionChange = useLastCallback((e: ChangeEvent<HTMLInputElement>) => {\n    setQuestion(e.target.value);\n  });\n\n  const getQuestionError = useLastCallback(() => {\n    if (hasErrors && !question.trim().length) {\n      return lang('lng_polls_choose_question');\n    }\n\n    return undefined;\n  });\n\n  const getOptionsError = useLastCallback((index: number) => {\n    const optionsTrimmed = options.map((o) => o.trim()).filter((o) => o.length);\n    if (hasErrors && optionsTrimmed.length < 2 && !options[index].trim().length) {\n      return lang('lng_polls_choose_answers');\n    }\n    return undefined;\n  });\n\n  function renderHeader() {\n    return (\n      <div className=\"modal-header-condensed\">\n        <Button round color=\"translucent\" size=\"smaller\" ariaLabel=\"Cancel poll creation\" onClick={onClear}>\n          <i className=\"icon icon-close\" />\n        </Button>\n        <div className=\"modal-title\">{lang('NewPoll')}</div>\n        <Button\n          color=\"primary\"\n          size=\"smaller\"\n          className=\"modal-action-button\"\n          onClick={handleCreate}\n        >\n          {lang('Create')}\n        </Button>\n      </div>\n    );\n  }\n\n  function renderOptions() {\n    return options.map((option, index) => (\n      <div className=\"option-wrapper\">\n        <InputText\n          label={index !== options.length - 1 || options.length === MAX_OPTIONS_COUNT\n            ? lang('OptionHint')\n            : lang('CreatePoll.AddOption')}\n          error={getOptionsError(index)}\n          value={option}\n          // eslint-disable-next-line react/jsx-no-bind\n          onChange={(e) => updateOption(index, e.currentTarget.value)}\n          onKeyPress={handleKeyPress}\n        />\n        {index !== options.length - 1 && (\n          <Button\n            className=\"option-remove-button\"\n            round\n            color=\"translucent\"\n            size=\"smaller\"\n            ariaLabel={lang('Delete')}\n            // eslint-disable-next-line react/jsx-no-bind\n            onClick={() => removeOption(index)}\n          >\n            <i className=\"icon icon-close\" />\n          </Button>\n        )}\n      </div>\n    ));\n  }\n\n  function renderRadioOptions() {\n    return renderOptions()\n      .map((label, index) => ({ value: String(index), label, hidden: !options[index].trim() }));\n  }\n\n  function renderQuizNoOptionError() {\n    const optionsTrimmed = options.map((o) => o.trim()).filter((o) => o.length);\n\n    return isQuizMode && (correctOption === undefined || !optionsTrimmed[correctOption]) && (\n      <p className=\"poll-error\">{lang('lng_polls_choose_correct')}</p>\n    );\n  }\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClear} header={renderHeader()} className=\"PollModal\">\n      <InputText\n        ref={questionInputRef}\n        label={lang('AskAQuestion')}\n        value={question}\n        error={getQuestionError()}\n        onChange={handleQuestionChange}\n        onKeyPress={handleKeyPress}\n      />\n      <div className=\"options-divider\" />\n\n      <div className=\"options-list custom-scroll\" ref={optionsListRef}>\n        <h3 className=\"options-header\">{lang('PollOptions')}</h3>\n\n        {hasErrors && renderQuizNoOptionError()}\n        {isQuizMode ? (\n          <RadioGroup\n            name=\"correctOption\"\n            options={renderRadioOptions()}\n            selected={String(correctOption)}\n            onChange={handleCorrectOptionChange}\n          />\n        ) : (\n          renderOptions()\n        )}\n\n      </div>\n\n      <div className=\"options-divider\" />\n\n      <div className=\"quiz-mode\">\n        {!shouldBeAnonymous && (\n          <Checkbox\n            label={lang('PollAnonymous')}\n            checked={isAnonymous}\n            onChange={handleIsAnonymousChange}\n          />\n        )}\n        <Checkbox\n          label={lang('PollMultiple')}\n          checked={isMultipleAnswers}\n          disabled={isQuizMode}\n          onChange={handleMultipleAnswersChange}\n        />\n        <Checkbox\n          label={lang('PollQuiz')}\n          checked={isQuizMode}\n          disabled={isMultipleAnswers || isQuiz !== undefined}\n          onChange={handleQuizModeChange}\n        />\n        {isQuizMode && (\n          <>\n            <h3 className=\"options-header\">{lang('lng_polls_solution_title')}</h3>\n            <TextArea\n              value={solution}\n              onChange={handleSolutionChange}\n              noReplaceNewlines\n            />\n            <div className=\"note\">{lang('CreatePoll.ExplanationInfo')}</div>\n          </>\n        )}\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(PollModal);\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useEffect, useRef } from '../../../lib/teact/teact';\nimport { getActions, getGlobal } from '../../../global';\n\nimport type { ApiSendAsPeerId } from '../../../api/types';\n\nimport buildClassName from '../../../util/buildClassName';\nimport setTooltipItemVisible from '../../../util/setTooltipItemVisible';\nimport { IS_TOUCH_ENV } from '../../../util/windowEnvironment';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useMouseInside from '../../../hooks/useMouseInside';\nimport useOldLang from '../../../hooks/useOldLang';\nimport { useKeyboardNavigation } from './hooks/useKeyboardNavigation';\n\nimport Avatar from '../../common/Avatar';\nimport FullNameTitle from '../../common/FullNameTitle';\nimport ListItem from '../../ui/ListItem';\nimport Menu from '../../ui/Menu';\n\nimport './SendAsMenu.scss';\n\nexport type OwnProps = {\n  isOpen: boolean;\n  chatId?: string;\n  selectedSendAsId?: string;\n  sendAsPeerIds?: ApiSendAsPeerId[];\n  isCurrentUserPremium?: boolean;\n  onClose: () => void;\n};\n\nconst SendAsMenu: FC<OwnProps> = ({\n  isOpen,\n  chatId,\n  selectedSendAsId,\n  sendAsPeerIds,\n  isCurrentUserPremium,\n  onClose,\n}) => {\n  const { saveDefaultSendAs, showNotification } = getActions();\n\n  // No need for expensive global updates on users and chats, so we avoid them\n  const usersById = getGlobal().users.byId;\n  const chatsById = getGlobal().chats.byId;\n\n  const lang = useOldLang();\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  const [handleMouseEnter, handleMouseLeave, markMouseInside] = useMouseInside(isOpen, onClose, undefined);\n\n  useEffect(() => {\n    if (isOpen) {\n      markMouseInside();\n    }\n  }, [isOpen, markMouseInside]);\n\n  const handleUserSelect = useLastCallback((id: string) => {\n    onClose();\n    saveDefaultSendAs({ chatId: chatId!, sendAsId: id });\n  });\n\n  const selectedSendAsIndex = useKeyboardNavigation({\n    isActive: isOpen,\n    items: sendAsPeerIds,\n    onSelect: handleUserSelect,\n    shouldSelectOnTab: true,\n    shouldSaveSelectionOnUpdateItems: true,\n    onClose,\n  });\n\n  useEffect(() => {\n    setTooltipItemVisible('.chat-item-clickable', selectedSendAsIndex, containerRef);\n  }, [selectedSendAsIndex]);\n\n  useEffect(() => {\n    if (sendAsPeerIds && !sendAsPeerIds.length) {\n      onClose();\n    }\n  }, [sendAsPeerIds, onClose]);\n\n  return (\n    <Menu\n      isOpen={isOpen}\n      positionX=\"left\"\n      positionY=\"bottom\"\n      onClose={onClose}\n      className=\"SendAsMenu\"\n      onCloseAnimationEnd={onClose}\n      onMouseEnter={!IS_TOUCH_ENV ? handleMouseEnter : undefined}\n      onMouseLeave={!IS_TOUCH_ENV ? handleMouseLeave : undefined}\n      noCloseOnBackdrop={!IS_TOUCH_ENV}\n      noCompact\n    >\n      <div className=\"send-as-title\" dir=\"auto\">{lang('SendMessageAsTitle')}</div>\n      {usersById && chatsById && sendAsPeerIds?.map(({ id, isPremium }, index) => {\n        const user = usersById[id];\n        const chat = chatsById[id];\n        const peer = user || chat;\n\n        const handleClick = () => {\n          if (!isPremium || isCurrentUserPremium) {\n            handleUserSelect(id);\n          } else {\n            showNotification({\n              message: lang('SelectSendAsPeerPremiumHint'),\n              actionText: lang('Open'),\n              action: {\n                action: 'openPremiumModal',\n                payload: {},\n              },\n            });\n          }\n        };\n\n        const avatarClassName = buildClassName(selectedSendAsId === id && 'selected');\n\n        return (\n          <ListItem\n            key={id}\n            className=\"SendAsItem chat-item-clickable scroll-item with-avatar\"\n            // eslint-disable-next-line react/jsx-no-bind\n            onClick={handleClick}\n            focus={selectedSendAsIndex === index}\n            rightElement={!isCurrentUserPremium && isPremium\n              && <i className=\"icon icon-lock-badge send-as-icon-locked\" />}\n          >\n            <Avatar\n              size=\"small\"\n              peer={peer}\n              className={avatarClassName}\n            />\n            <div className=\"info\">\n              {peer && <FullNameTitle peer={peer} noFake />}\n              <span className=\"subtitle\">{user\n                ? lang('VoipGroupPersonalAccount')\n                : lang('Subscribers', chat?.membersCount, 'i')}\n              </span>\n            </div>\n          </ListItem>\n        );\n      })}\n    </Menu>\n  );\n};\n\nexport default memo(SendAsMenu);\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo,\n  useRef,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiChat, ApiSticker, ApiStickerSet } from '../../../api/types';\nimport type { StickerSetOrReactionsSetOrRecent, ThreadId } from '../../../types';\n\nimport {\n  CHAT_STICKER_SET_ID,\n  EFFECT_EMOJIS_SET_ID,\n  EFFECT_STICKERS_SET_ID,\n  FAVORITE_SYMBOL_SET_ID,\n  RECENT_SYMBOL_SET_ID,\n  SLIDE_TRANSITION_DURATION,\n  STICKER_PICKER_MAX_SHARED_COVERS,\n  STICKER_SIZE_PICKER_HEADER,\n} from '../../../config';\nimport { isUserId } from '../../../global/helpers';\nimport {\n  selectChat, selectChatFullInfo, selectIsChatWithSelf, selectIsCurrentUserPremium, selectShouldLoopStickers,\n} from '../../../global/selectors';\nimport animateHorizontalScroll from '../../../util/animateHorizontalScroll';\nimport buildClassName from '../../../util/buildClassName';\nimport { pickTruthy } from '../../../util/iteratees';\nimport { MEMO_EMPTY_ARRAY } from '../../../util/memo';\nimport { IS_TOUCH_ENV } from '../../../util/windowEnvironment';\nimport { REM } from '../../common/helpers/mediaDimensions';\n\nimport useHorizontalScroll from '../../../hooks/useHorizontalScroll';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\nimport useScrolledState from '../../../hooks/useScrolledState';\nimport useSendMessageAction from '../../../hooks/useSendMessageAction';\nimport { useStickerPickerObservers } from '../../common/hooks/useStickerPickerObservers';\nimport useAsyncRendering from '../../right/hooks/useAsyncRendering';\n\nimport Avatar from '../../common/Avatar';\nimport StickerButton from '../../common/StickerButton';\nimport StickerSet from '../../common/StickerSet';\nimport Button from '../../ui/Button';\nimport Loading from '../../ui/Loading';\nimport StickerSetCover from './StickerSetCover';\n\nimport styles from './StickerPicker.module.scss';\n\ntype OwnProps = {\n  chatId: string;\n  threadId?: ThreadId;\n  className: string;\n  isHidden?: boolean;\n  isTranslucent?: boolean;\n  loadAndPlay: boolean;\n  canSendStickers?: boolean;\n  noContextMenus?: boolean;\n  idPrefix: string;\n  onStickerSelect: (\n    sticker: ApiSticker, isSilent?: boolean, shouldSchedule?: boolean, canUpdateStickerSetsOrder?: boolean,\n  ) => void;\n  isForEffects?: boolean;\n};\n\ntype StateProps = {\n  chat?: ApiChat;\n  recentStickers: ApiSticker[];\n  favoriteStickers: ApiSticker[];\n  effectStickers?: ApiSticker[];\n  effectEmojis?: ApiSticker[];\n  stickerSetsById: Record<string, ApiStickerSet>;\n  chatStickerSetId?: string;\n  addedSetIds?: string[];\n  canAnimate?: boolean;\n  isSavedMessages?: boolean;\n  isCurrentUserPremium?: boolean;\n};\n\nconst HEADER_BUTTON_WIDTH = 2.5 * REM; // px (including margin)\n\nconst StickerPicker: FC<OwnProps & StateProps> = ({\n  chat,\n  threadId,\n  className,\n  isHidden,\n  isTranslucent,\n  loadAndPlay,\n  canSendStickers,\n  recentStickers,\n  favoriteStickers,\n  effectStickers,\n  effectEmojis,\n  addedSetIds,\n  stickerSetsById,\n  chatStickerSetId,\n  canAnimate,\n  isSavedMessages,\n  isCurrentUserPremium,\n  noContextMenus,\n  idPrefix,\n  onStickerSelect,\n  isForEffects,\n}) => {\n  const {\n    loadRecentStickers,\n    addRecentSticker,\n    unfaveSticker,\n    faveSticker,\n    removeRecentSticker,\n  } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const headerRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const sharedCanvasRef = useRef<HTMLCanvasElement>(null);\n\n  const {\n    handleScroll: handleContentScroll,\n    isAtBeginning: shouldHideTopBorder,\n  } = useScrolledState();\n\n  const sendMessageAction = useSendMessageAction(chat?.id, threadId);\n\n  const prefix = `${idPrefix}-sticker-set`;\n  const {\n    activeSetIndex,\n    observeIntersectionForSet,\n    observeIntersectionForPlayingItems,\n    observeIntersectionForShowingItems,\n    observeIntersectionForCovers,\n    selectStickerSet,\n  } = useStickerPickerObservers(containerRef, headerRef, prefix, isHidden);\n\n  const lang = useOldLang();\n\n  const areAddedLoaded = Boolean(addedSetIds);\n\n  const allSets = useMemo(() => {\n    if (isForEffects && effectStickers) {\n      const effectSets: StickerSetOrReactionsSetOrRecent[] = [];\n      if (effectEmojis?.length) {\n        effectSets.push({\n          id: EFFECT_EMOJIS_SET_ID,\n          accessHash: '0',\n          title: '',\n          stickers: effectEmojis,\n          count: effectEmojis.length,\n          isEmoji: true,\n        });\n      }\n      if (effectStickers?.length) {\n        effectSets.push({\n          id: EFFECT_STICKERS_SET_ID,\n          accessHash: '0',\n          title: lang('StickerEffects'),\n          stickers: effectStickers,\n          count: effectStickers.length,\n        });\n      }\n      return effectSets;\n    }\n\n    if (!addedSetIds) {\n      return MEMO_EMPTY_ARRAY;\n    }\n\n    const defaultSets = [];\n\n    if (favoriteStickers.length) {\n      defaultSets.push({\n        id: FAVORITE_SYMBOL_SET_ID,\n        accessHash: '0',\n        title: lang('FavoriteStickers'),\n        stickers: favoriteStickers,\n        count: favoriteStickers.length,\n      });\n    }\n\n    if (recentStickers.length) {\n      defaultSets.push({\n        id: RECENT_SYMBOL_SET_ID,\n        accessHash: '0',\n        title: lang('RecentStickers'),\n        stickers: recentStickers,\n        count: recentStickers.length,\n      });\n    }\n\n    const userSetIds = [...(addedSetIds || [])];\n    if (chatStickerSetId) {\n      userSetIds.unshift(chatStickerSetId);\n    }\n\n    const existingAddedSetIds = Object.values(pickTruthy(stickerSetsById, userSetIds));\n\n    return [\n      ...defaultSets,\n      ...existingAddedSetIds,\n    ];\n  }, [\n    addedSetIds,\n    stickerSetsById,\n    favoriteStickers,\n    recentStickers,\n    chatStickerSetId,\n    lang,\n    effectStickers,\n    isForEffects,\n    effectEmojis,\n  ]);\n\n  const noPopulatedSets = useMemo(() => (\n    areAddedLoaded\n    && allSets.filter((set) => set.stickers?.length).length === 0\n  ), [allSets, areAddedLoaded]);\n\n  useEffect(() => {\n    if (!loadAndPlay) return;\n    loadRecentStickers();\n    if (!canSendStickers) return;\n    sendMessageAction({ type: 'chooseSticker' });\n  }, [canSendStickers, loadAndPlay, loadRecentStickers, sendMessageAction]);\n\n  const canRenderContents = useAsyncRendering([], SLIDE_TRANSITION_DURATION);\n  const shouldRenderContents = areAddedLoaded && canRenderContents\n  && !noPopulatedSets && (canSendStickers || isForEffects);\n\n  useHorizontalScroll(headerRef, !shouldRenderContents || !headerRef.current);\n\n  // Scroll container and header when active set changes\n  useEffect(() => {\n    if (!areAddedLoaded) {\n      return;\n    }\n\n    const header = headerRef.current;\n    if (!header) {\n      return;\n    }\n\n    const newLeft = activeSetIndex * HEADER_BUTTON_WIDTH - (header.offsetWidth / 2 - HEADER_BUTTON_WIDTH / 2);\n\n    animateHorizontalScroll(header, newLeft);\n  }, [areAddedLoaded, activeSetIndex]);\n\n  const handleStickerSelect = useLastCallback((sticker: ApiSticker, isSilent?: boolean, shouldSchedule?: boolean) => {\n    onStickerSelect(sticker, isSilent, shouldSchedule, true);\n    addRecentSticker({ sticker });\n  });\n\n  const handleStickerUnfave = useLastCallback((sticker: ApiSticker) => {\n    unfaveSticker({ sticker });\n  });\n\n  const handleStickerFave = useLastCallback((sticker: ApiSticker) => {\n    faveSticker({ sticker });\n  });\n\n  const handleMouseMove = useLastCallback(() => {\n    if (!canSendStickers) return;\n    sendMessageAction({ type: 'chooseSticker' });\n  });\n\n  const handleRemoveRecentSticker = useLastCallback((sticker: ApiSticker) => {\n    removeRecentSticker({ sticker });\n  });\n\n  if (!chat) return undefined;\n\n  function renderCover(stickerSet: StickerSetOrReactionsSetOrRecent, index: number) {\n    const firstSticker = stickerSet.stickers?.[0];\n    const buttonClassName = buildClassName(styles.stickerCover, index === activeSetIndex && styles.activated);\n    const withSharedCanvas = index < STICKER_PICKER_MAX_SHARED_COVERS;\n\n    if (stickerSet.id === RECENT_SYMBOL_SET_ID\n      || stickerSet.id === FAVORITE_SYMBOL_SET_ID\n      || stickerSet.id === CHAT_STICKER_SET_ID\n      || stickerSet.hasThumbnail\n      || !firstSticker\n    ) {\n      return (\n        <Button\n          key={stickerSet.id}\n          className={buttonClassName}\n          ariaLabel={stickerSet.title}\n          round\n          faded={stickerSet.id === RECENT_SYMBOL_SET_ID || stickerSet.id === FAVORITE_SYMBOL_SET_ID}\n          color=\"translucent\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => selectStickerSet(index)}\n        >\n          {stickerSet.id === RECENT_SYMBOL_SET_ID ? (\n            <i className=\"icon icon-recent\" />\n          ) : stickerSet.id === FAVORITE_SYMBOL_SET_ID ? (\n            <i className=\"icon icon-favorite\" />\n          ) : stickerSet.id === CHAT_STICKER_SET_ID ? (\n            <Avatar peer={chat} size=\"small\" />\n          ) : (\n            <StickerSetCover\n              stickerSet={stickerSet as ApiStickerSet}\n              noPlay={!canAnimate || !loadAndPlay}\n              observeIntersection={observeIntersectionForCovers}\n              sharedCanvasRef={withSharedCanvas ? sharedCanvasRef : undefined}\n              forcePlayback\n            />\n          )}\n        </Button>\n      );\n    } else {\n      return (\n        <StickerButton\n          key={stickerSet.id}\n          sticker={firstSticker}\n          size={STICKER_SIZE_PICKER_HEADER}\n          title={stickerSet.title}\n          className={buttonClassName}\n          noPlay={!canAnimate || !loadAndPlay}\n          observeIntersection={observeIntersectionForCovers}\n          noContextMenu\n          isCurrentUserPremium\n          sharedCanvasRef={withSharedCanvas ? sharedCanvasRef : undefined}\n          withTranslucentThumb={isTranslucent}\n          onClick={selectStickerSet}\n          clickArg={index}\n          forcePlayback\n        />\n      );\n    }\n  }\n\n  const fullClassName = buildClassName(styles.root, className);\n\n  if (!shouldRenderContents) {\n    return (\n      <div className={fullClassName}>\n        {!canSendStickers && !isForEffects ? (\n          <div className={styles.pickerDisabled}>{lang('ErrorSendRestrictedStickersAll')}</div>\n        ) : noPopulatedSets ? (\n          <div className={styles.pickerDisabled}>{lang('NoStickers')}</div>\n        ) : (\n          <Loading />\n        )}\n      </div>\n    );\n  }\n\n  const headerClassName = buildClassName(\n    styles.header,\n    'no-scrollbar',\n    !shouldHideTopBorder && styles.headerWithBorder,\n  );\n\n  return (\n    <div className={fullClassName}>\n      { !isForEffects && (\n        <div ref={headerRef} className={headerClassName}>\n          <div className=\"shared-canvas-container\">\n            <canvas ref={sharedCanvasRef} className=\"shared-canvas\" />\n            {allSets.map(renderCover)}\n          </div>\n        </div>\n      ) }\n      <div\n        ref={containerRef}\n        onMouseMove={handleMouseMove}\n        onScroll={handleContentScroll}\n        className={\n          buildClassName(\n            styles.main,\n            IS_TOUCH_ENV ? 'no-scrollbar' : 'custom-scroll',\n            !isForEffects && styles.hasHeader,\n          )\n        }\n      >\n        {allSets.map((stickerSet, i) => (\n          <StickerSet\n            key={stickerSet.id}\n            stickerSet={stickerSet}\n            loadAndPlay={Boolean(canAnimate && loadAndPlay)}\n            noContextMenus={noContextMenus}\n            index={i}\n            idPrefix={prefix}\n            observeIntersection={observeIntersectionForSet}\n            observeIntersectionForPlayingItems={observeIntersectionForPlayingItems}\n            observeIntersectionForShowingItems={observeIntersectionForShowingItems}\n            isNearActive={activeSetIndex >= i - 1 && activeSetIndex <= i + 1}\n            favoriteStickers={favoriteStickers}\n            isSavedMessages={isSavedMessages}\n            isCurrentUserPremium={isCurrentUserPremium}\n            isTranslucent={isTranslucent}\n            isChatStickerSet={stickerSet.id === chatStickerSetId}\n            onStickerSelect={handleStickerSelect}\n            onStickerUnfave={handleStickerUnfave}\n            onStickerFave={handleStickerFave}\n            onStickerRemoveRecent={handleRemoveRecentSticker}\n            forcePlayback\n            shouldHideHeader={stickerSet.id === EFFECT_EMOJIS_SET_ID}\n          />\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { chatId }): StateProps => {\n    const {\n      setsById,\n      added,\n      recent,\n      favorite,\n      effect,\n    } = global.stickers;\n\n    const isSavedMessages = selectIsChatWithSelf(global, chatId);\n    const chat = selectChat(global, chatId);\n    const chatStickerSetId = !isUserId(chatId) ? selectChatFullInfo(global, chatId)?.stickerSet?.id : undefined;\n\n    return {\n      chat,\n      effectStickers: effect?.stickers,\n      effectEmojis: effect?.emojis,\n      recentStickers: recent.stickers,\n      favoriteStickers: favorite.stickers,\n      stickerSetsById: setsById,\n      addedSetIds: added.setIds,\n      canAnimate: selectShouldLoopStickers(global),\n      isSavedMessages,\n      isCurrentUserPremium: selectIsCurrentUserPremium(global),\n      chatStickerSetId,\n    };\n  },\n)(StickerPicker));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useEffect, useRef } from '../../../lib/teact/teact';\nimport { getActions, getGlobal } from '../../../global';\n\nimport type { ApiStickerSet } from '../../../api/types';\nimport type { ObserveFn } from '../../../hooks/useIntersectionObserver';\n\nimport { STICKER_SIZE_PICKER_HEADER } from '../../../config';\nimport { getStickerMediaHash } from '../../../global/helpers';\nimport { selectIsAlwaysHighPriorityEmoji } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { getFirstLetters } from '../../../util/textFormat';\nimport { IS_WEBM_SUPPORTED } from '../../../util/windowEnvironment';\n\nimport useColorFilter from '../../../hooks/stickers/useColorFilter';\nimport useDynamicColorListener from '../../../hooks/stickers/useDynamicColorListener';\nimport useCoordsInSharedCanvas from '../../../hooks/useCoordsInSharedCanvas';\nimport { useIsIntersecting } from '../../../hooks/useIntersectionObserver';\nimport useMedia from '../../../hooks/useMedia';\nimport useMediaTransition from '../../../hooks/useMediaTransition';\nimport useCustomEmoji from '../../common/hooks/useCustomEmoji';\n\nimport AnimatedSticker from '../../common/AnimatedSticker';\nimport CustomEmoji from '../../common/CustomEmoji';\nimport OptimizedVideo from '../../ui/OptimizedVideo';\n\nimport styles from './StickerSetCover.module.scss';\n\ntype OwnProps = {\n  stickerSet: ApiStickerSet;\n  size?: number;\n  noPlay?: boolean;\n  forcePlayback?: boolean;\n  observeIntersection: ObserveFn;\n  sharedCanvasRef?: React.RefObject<HTMLCanvasElement>;\n};\n\nconst StickerSetCover: FC<OwnProps> = ({\n  stickerSet,\n  size = STICKER_SIZE_PICKER_HEADER,\n  noPlay,\n  forcePlayback,\n  observeIntersection,\n  sharedCanvasRef,\n}) => {\n  const { loadStickers } = getActions();\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  const {\n    hasThumbnail, hasVideoThumb, hasAnimatedThumb, hasStaticThumb, thumbCustomEmojiId,\n  } = stickerSet;\n\n  const { customEmoji } = useCustomEmoji(thumbCustomEmojiId);\n  const hasCustomColor = customEmoji?.shouldUseTextColor;\n  const customColor = useDynamicColorListener(containerRef, !hasCustomColor);\n  const colorFilter = useColorFilter(customColor);\n\n  const isIntersecting = useIsIntersecting(containerRef, observeIntersection);\n  const shouldPlay = isIntersecting && !noPlay;\n\n  const hasOnlyStaticThumb = hasStaticThumb && !hasVideoThumb && !hasAnimatedThumb && !thumbCustomEmojiId;\n\n  const shouldFallbackToStatic = hasOnlyStaticThumb || (hasVideoThumb && !IS_WEBM_SUPPORTED && !hasAnimatedThumb);\n  const staticHash = shouldFallbackToStatic && getStickerMediaHash(stickerSet.stickers![0], 'preview');\n  const staticMediaData = useMedia(staticHash, !isIntersecting);\n\n  const mediaHash = ((hasThumbnail && !shouldFallbackToStatic) || hasAnimatedThumb) && `stickerSet${stickerSet.id}`;\n  const mediaData = useMedia(mediaHash, !isIntersecting);\n  const isReady = thumbCustomEmojiId || mediaData || staticMediaData;\n  const transitionClassNames = useMediaTransition(isReady);\n\n  const coords = useCoordsInSharedCanvas(containerRef, sharedCanvasRef);\n\n  useEffect(() => {\n    if (isIntersecting && !stickerSet.stickers?.length) {\n      loadStickers({\n        stickerSetInfo: stickerSet,\n      });\n    }\n  }, [isIntersecting, loadStickers, stickerSet]);\n\n  return (\n    <div ref={containerRef} className={buildClassName(styles.root, 'sticker-set-cover')}>\n      {isReady ? (\n        thumbCustomEmojiId ? (\n          <CustomEmoji\n            documentId={thumbCustomEmojiId}\n            size={size}\n            observeIntersectionForPlaying={observeIntersection}\n            noPlay={noPlay}\n          />\n        ) : hasAnimatedThumb ? (\n          <AnimatedSticker\n            className={transitionClassNames}\n            tgsUrl={mediaData}\n            size={size}\n            play={shouldPlay}\n            isLowPriority={!selectIsAlwaysHighPriorityEmoji(getGlobal(), stickerSet)}\n            sharedCanvas={sharedCanvasRef?.current || undefined}\n            sharedCanvasCoords={coords}\n            forceAlways={forcePlayback}\n          />\n        ) : (hasVideoThumb && !shouldFallbackToStatic) ? (\n          <OptimizedVideo\n            className={buildClassName(styles.video, transitionClassNames)}\n            src={mediaData}\n            canPlay={shouldPlay}\n            style={colorFilter}\n            isPriority={forcePlayback}\n            loop\n            disablePictureInPicture\n          />\n        ) : (\n          <img\n            src={mediaData || staticMediaData}\n            style={colorFilter}\n            className={buildClassName(styles.image, transitionClassNames)}\n            alt=\"\"\n            draggable={false}\n          />\n        )\n      ) : (\n        getFirstLetters(stickerSet.title, 2)\n      )}\n    </div>\n  );\n};\n\nexport default memo(StickerSetCover);\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useEffect, useRef } from '../../../lib/teact/teact';\nimport { withGlobal } from '../../../global';\n\nimport type { ApiSticker } from '../../../api/types';\nimport type { ThreadId } from '../../../types';\n\nimport { STICKER_SIZE_PICKER } from '../../../config';\nimport { selectIsChatWithSelf, selectIsCurrentUserPremium } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport captureEscKeyListener from '../../../util/captureEscKeyListener';\n\nimport { useIntersectionObserver } from '../../../hooks/useIntersectionObserver';\nimport usePrevious from '../../../hooks/usePrevious';\nimport useSendMessageAction from '../../../hooks/useSendMessageAction';\nimport useShowTransition from '../../../hooks/useShowTransition';\n\nimport StickerButton from '../../common/StickerButton';\nimport Loading from '../../ui/Loading';\n\nimport './StickerTooltip.scss';\n\nexport type OwnProps = {\n  chatId: string;\n  threadId?: ThreadId;\n  isOpen: boolean;\n  onStickerSelect: (sticker: ApiSticker, isSilent?: boolean, shouldSchedule?: boolean) => void;\n  onClose: NoneToVoidFunction;\n};\n\ntype StateProps = {\n  stickers?: ApiSticker[];\n  isSavedMessages?: boolean;\n  isCurrentUserPremium?: boolean;\n};\n\nconst INTERSECTION_THROTTLE = 200;\n\nconst StickerTooltip: FC<OwnProps & StateProps> = ({\n  chatId,\n  threadId,\n  isOpen,\n  onStickerSelect,\n  onClose,\n  stickers,\n  isSavedMessages,\n  isCurrentUserPremium,\n}) => {\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  const { shouldRender, transitionClassNames } = useShowTransition(isOpen, undefined, undefined, false);\n  const prevStickers = usePrevious(stickers, true);\n  const displayedStickers = stickers || prevStickers;\n  const sendMessageAction = useSendMessageAction(chatId, threadId);\n\n  const {\n    observe: observeIntersection,\n  } = useIntersectionObserver({ rootRef: containerRef, throttleMs: INTERSECTION_THROTTLE });\n\n  useEffect(() => (isOpen ? captureEscKeyListener(onClose) : undefined), [isOpen, onClose]);\n\n  const handleMouseMove = () => {\n    sendMessageAction({ type: 'chooseSticker' });\n  };\n\n  const className = buildClassName(\n    'StickerTooltip composer-tooltip custom-scroll',\n    transitionClassNames,\n    !(displayedStickers?.length) && 'hidden',\n  );\n\n  return (\n    <div\n      ref={containerRef}\n      className={className}\n      onMouseMove={handleMouseMove}\n    >\n      {shouldRender && displayedStickers ? (\n        displayedStickers.map((sticker) => (\n          <StickerButton\n            key={sticker.id}\n            sticker={sticker}\n            size={STICKER_SIZE_PICKER}\n            observeIntersection={observeIntersection}\n            onClick={isOpen ? onStickerSelect : undefined}\n            clickArg={sticker}\n            isSavedMessages={isSavedMessages}\n            canViewSet\n            isCurrentUserPremium={isCurrentUserPremium}\n          />\n        ))\n      ) : shouldRender ? (\n        <Loading />\n      ) : undefined}\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { chatId }): StateProps => {\n    const { stickers } = global.stickers.forEmoji;\n    const isSavedMessages = selectIsChatWithSelf(global, chatId);\n    const isCurrentUserPremium = selectIsCurrentUserPremium(global);\n    return { stickers, isSavedMessages, isCurrentUserPremium };\n  },\n)(StickerTooltip));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useLayoutEffect, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { withGlobal } from '../../../global';\n\nimport type { ApiSticker, ApiVideo } from '../../../api/types';\nimport type { GlobalActions } from '../../../global';\nimport type { ThreadId } from '../../../types';\n\nimport { requestMutation } from '../../../lib/fasterdom/fasterdom';\nimport { selectIsContextMenuTranslucent, selectTabState } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { IS_TOUCH_ENV } from '../../../util/windowEnvironment';\n\nimport useAppLayout from '../../../hooks/useAppLayout';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useMouseInside from '../../../hooks/useMouseInside';\nimport useOldLang from '../../../hooks/useOldLang';\nimport useShowTransition from '../../../hooks/useShowTransition';\n\nimport CustomEmojiPicker from '../../common/CustomEmojiPicker';\nimport Button from '../../ui/Button';\nimport { UnfreezableMenu } from '../../ui/Menu';\nimport Portal from '../../ui/Portal';\nimport Transition from '../../ui/Transition';\nimport EmojiPicker from './EmojiPicker';\nimport GifPicker from './GifPicker';\nimport StickerPicker from './StickerPicker';\nimport SymbolMenuFooter, { SYMBOL_MENU_TAB_TITLES, SymbolMenuTabs } from './SymbolMenuFooter';\n\nimport './SymbolMenu.scss';\n\nconst ANIMATION_DURATION = 350;\nconst STICKERS_TAB_INDEX = 2;\n\nexport type OwnProps = {\n  chatId: string;\n  threadId?: ThreadId;\n  isOpen: boolean;\n  canSendStickers?: boolean;\n  canSendGifs?: boolean;\n  isMessageComposer?: boolean;\n  idPrefix: string;\n  onLoad: () => void;\n  onClose: () => void;\n  onEmojiSelect: (emoji: string) => void;\n  onCustomEmojiSelect: (emoji: ApiSticker) => void;\n  onStickerSelect?: (\n    sticker: ApiSticker,\n    isSilent?: boolean,\n    shouldSchedule?: boolean,\n    shouldPreserveInput?: boolean,\n    canUpdateStickerSetsOrder?: boolean,\n  ) => void;\n  onGifSelect?: (gif: ApiVideo, isSilent?: boolean, shouldSchedule?: boolean) => void;\n  onRemoveSymbol: () => void;\n  onSearchOpen: (type: 'stickers' | 'gifs') => void;\n  addRecentEmoji: GlobalActions['addRecentEmoji'];\n  addRecentCustomEmoji: GlobalActions['addRecentCustomEmoji'];\n  className?: string;\n  isAttachmentModal?: boolean;\n  canSendPlainText?: boolean;\n  positionX?: 'left' | 'right';\n  positionY?: 'top' | 'bottom';\n  transformOriginX?: number;\n  transformOriginY?: number;\n  style?: string;\n};\n\ntype StateProps = {\n  isLeftColumnShown: boolean;\n  isBackgroundTranslucent?: boolean;\n};\n\nlet isActivated = false;\n\nconst SymbolMenu: FC<OwnProps & StateProps> = ({\n  chatId,\n  threadId,\n  isOpen,\n  canSendStickers,\n  canSendGifs,\n  isMessageComposer,\n  isLeftColumnShown,\n  idPrefix,\n  isAttachmentModal,\n  canSendPlainText,\n  className,\n  positionX,\n  positionY,\n  transformOriginX,\n  transformOriginY,\n  style,\n  isBackgroundTranslucent,\n  onLoad,\n  onClose,\n  onEmojiSelect,\n  onCustomEmojiSelect,\n  onStickerSelect,\n  onGifSelect,\n  onRemoveSymbol,\n  onSearchOpen,\n  addRecentEmoji,\n  addRecentCustomEmoji,\n}) => {\n  const [activeTab, setActiveTab] = useState<number>(0);\n  const [recentEmojis, setRecentEmojis] = useState<string[]>([]);\n  const [recentCustomEmojis, setRecentCustomEmojis] = useState<string[]>([]);\n  const { isMobile } = useAppLayout();\n\n  const [handleMouseEnter, handleMouseLeave] = useMouseInside(isOpen, onClose, undefined, isMobile);\n  const { shouldRender, transitionClassNames } = useShowTransition(isOpen, onClose, false, false);\n\n  const lang = useOldLang();\n\n  if (!isActivated && isOpen) {\n    isActivated = true;\n  }\n\n  useEffect(() => {\n    onLoad();\n  }, [onLoad]);\n\n  // If we can't send plain text, we should always show the stickers tab\n  useEffect(() => {\n    if (canSendPlainText) return;\n    setActiveTab(STICKERS_TAB_INDEX);\n  }, [canSendPlainText]);\n\n  useLayoutEffect(() => {\n    if (!isMobile || !isOpen || isAttachmentModal) {\n      return undefined;\n    }\n\n    document.body.classList.add('enable-symbol-menu-transforms');\n    document.body.classList.add('is-symbol-menu-open');\n\n    return () => {\n      document.body.classList.remove('is-symbol-menu-open');\n\n      setTimeout(() => {\n        requestMutation(() => {\n          document.body.classList.remove('enable-symbol-menu-transforms');\n        });\n      }, ANIMATION_DURATION);\n    };\n  }, [isAttachmentModal, isMobile, isOpen]);\n\n  const recentEmojisRef = useRef(recentEmojis);\n  recentEmojisRef.current = recentEmojis;\n  useEffect(() => {\n    if (!recentEmojisRef.current.length || isOpen) {\n      return;\n    }\n\n    recentEmojisRef.current.forEach((name) => {\n      addRecentEmoji({ emoji: name });\n    });\n\n    setRecentEmojis([]);\n  }, [isOpen, addRecentEmoji]);\n\n  const handleEmojiSelect = useLastCallback((emoji: string, name: string) => {\n    setRecentEmojis((emojis) => [...emojis, name]);\n\n    onEmojiSelect(emoji);\n  });\n\n  const recentCustomEmojisRef = useRef(recentCustomEmojis);\n  recentCustomEmojisRef.current = recentCustomEmojis;\n  useEffect(() => {\n    if (!recentCustomEmojisRef.current.length || isOpen) {\n      return;\n    }\n\n    recentCustomEmojisRef.current.forEach((documentId) => {\n      addRecentCustomEmoji({\n        documentId,\n      });\n    });\n\n    setRecentEmojis([]);\n  }, [isOpen, addRecentCustomEmoji]);\n\n  const handleCustomEmojiSelect = useLastCallback((emoji: ApiSticker) => {\n    setRecentCustomEmojis((ids) => [...ids, emoji.id]);\n\n    onCustomEmojiSelect(emoji);\n  });\n\n  const handleSearch = useLastCallback((type: 'stickers' | 'gifs') => {\n    onClose();\n    onSearchOpen(type);\n  });\n\n  const handleStickerSelect = useLastCallback((\n    sticker: ApiSticker, isSilent?: boolean, shouldSchedule?: boolean, canUpdateStickerSetsOrder?: boolean,\n  ) => {\n    onStickerSelect?.(sticker, isSilent, shouldSchedule, true, canUpdateStickerSetsOrder);\n  });\n\n  function renderContent(isActive: boolean, isFrom: boolean) {\n    switch (activeTab) {\n      case SymbolMenuTabs.Emoji:\n        return (\n          <EmojiPicker\n            className=\"picker-tab\"\n            onEmojiSelect={handleEmojiSelect}\n          />\n        );\n      case SymbolMenuTabs.CustomEmoji:\n        return (\n          <CustomEmojiPicker\n            className=\"picker-tab\"\n            isHidden={!isOpen || !isActive}\n            idPrefix={idPrefix}\n            loadAndPlay={isOpen && (isActive || isFrom)}\n            chatId={chatId}\n            isTranslucent={!isMobile && isBackgroundTranslucent}\n            onCustomEmojiSelect={handleCustomEmojiSelect}\n          />\n        );\n      case SymbolMenuTabs.Stickers:\n        return (\n          <StickerPicker\n            className=\"picker-tab\"\n            isHidden={!isOpen || !isActive}\n            loadAndPlay={canSendStickers ? isOpen && (isActive || isFrom) : false}\n            idPrefix={idPrefix}\n            canSendStickers={canSendStickers}\n            noContextMenus={!isMessageComposer}\n            chatId={chatId}\n            threadId={threadId}\n            isTranslucent={!isMobile && isBackgroundTranslucent}\n            onStickerSelect={handleStickerSelect}\n          />\n        );\n      case SymbolMenuTabs.GIFs:\n        return (\n          <GifPicker\n            className=\"picker-tab\"\n            loadAndPlay={canSendGifs ? isOpen && (isActive || isFrom) : false}\n            canSendGifs={canSendGifs}\n            onGifSelect={onGifSelect}\n          />\n        );\n    }\n\n    return undefined;\n  }\n\n  function stopPropagation(event: any) {\n    event.stopPropagation();\n  }\n\n  const content = (\n    <>\n      <div className=\"SymbolMenu-main\" onClick={stopPropagation}>\n        {isActivated && (\n          <Transition\n            name=\"slide\"\n            activeKey={activeTab}\n            renderCount={Object.values(SYMBOL_MENU_TAB_TITLES).length}\n          >\n            {renderContent}\n          </Transition>\n        )}\n      </div>\n      {isMobile && (\n        <Button\n          round\n          faded\n          color=\"translucent\"\n          ariaLabel={lang('Close')}\n          className=\"symbol-close-button\"\n          size=\"tiny\"\n          onClick={onClose}\n        >\n          <i className=\"icon icon-close\" />\n        </Button>\n      )}\n      <SymbolMenuFooter\n        activeTab={activeTab}\n        onSwitchTab={setActiveTab}\n        onRemoveSymbol={onRemoveSymbol}\n        canSearch={isMessageComposer}\n        onSearchOpen={handleSearch}\n        isAttachmentModal={isAttachmentModal}\n        canSendPlainText={canSendPlainText}\n      />\n    </>\n  );\n\n  if (isMobile) {\n    if (!shouldRender) {\n      return undefined;\n    }\n\n    const mobileClassName = buildClassName(\n      'SymbolMenu mobile-menu',\n      transitionClassNames,\n      isLeftColumnShown && 'left-column-open',\n      isAttachmentModal && 'in-attachment-modal',\n      isMessageComposer && 'in-middle-column',\n    );\n\n    if (isAttachmentModal) {\n      return (\n        <div className={mobileClassName}>\n          {content}\n        </div>\n      );\n    }\n\n    return (\n      <Portal>\n        <div className={mobileClassName}>\n          {content}\n        </div>\n      </Portal>\n    );\n  }\n\n  return (\n    <UnfreezableMenu\n      isOpen={isOpen}\n      positionX={isAttachmentModal ? positionX : 'left'}\n      positionY={isAttachmentModal ? positionY : 'bottom'}\n      onClose={onClose}\n      withPortal={isAttachmentModal}\n      className={buildClassName('SymbolMenu', className)}\n      onCloseAnimationEnd={onClose}\n      onMouseEnter={!IS_TOUCH_ENV ? handleMouseEnter : undefined}\n      onMouseLeave={!IS_TOUCH_ENV ? handleMouseLeave : undefined}\n      noCloseOnBackdrop={!IS_TOUCH_ENV}\n      noCompact\n      transformOriginX={transformOriginX}\n      transformOriginY={transformOriginY}\n      style={style}\n    >\n      {content}\n    </UnfreezableMenu>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    return {\n      isLeftColumnShown: selectTabState(global).isLeftColumnShown,\n      isBackgroundTranslucent: selectIsContextMenuTranslucent(global),\n    };\n  },\n)(SymbolMenu));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo } from '../../../lib/teact/teact';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Button from '../../ui/Button';\n\ntype OwnProps = {\n  activeTab: SymbolMenuTabs;\n  onSwitchTab: (tab: SymbolMenuTabs) => void;\n  onRemoveSymbol: () => void;\n  onSearchOpen: (type: 'stickers' | 'gifs') => void;\n  isAttachmentModal?: boolean;\n  canSendPlainText?: boolean;\n  canSearch?: boolean;\n};\n\nexport enum SymbolMenuTabs {\n  'Emoji',\n  'CustomEmoji',\n  'Stickers',\n  'GIFs',\n}\n\nexport const SYMBOL_MENU_TAB_TITLES: Record<SymbolMenuTabs, string> = {\n  [SymbolMenuTabs.Emoji]: 'Emoji',\n  [SymbolMenuTabs.CustomEmoji]: 'StickersList.EmojiItem',\n  [SymbolMenuTabs.Stickers]: 'AccDescrStickers',\n  [SymbolMenuTabs.GIFs]: 'GifsTab',\n};\n\nconst SYMBOL_MENU_TAB_ICONS = {\n  [SymbolMenuTabs.Emoji]: 'icon-smile',\n  [SymbolMenuTabs.CustomEmoji]: 'icon-favorite',\n  [SymbolMenuTabs.Stickers]: 'icon-stickers',\n  [SymbolMenuTabs.GIFs]: 'icon-gifs',\n};\n\nconst SymbolMenuFooter: FC<OwnProps> = ({\n  activeTab, onSwitchTab, onRemoveSymbol, onSearchOpen, isAttachmentModal,\n  canSendPlainText, canSearch,\n}) => {\n  const lang = useOldLang();\n\n  function renderTabButton(tab: SymbolMenuTabs) {\n    return (\n      <Button\n        className={`symbol-tab-button ${activeTab === tab ? 'activated' : ''}`}\n        // eslint-disable-next-line react/jsx-no-bind\n        onClick={() => onSwitchTab(tab)}\n        ariaLabel={lang(SYMBOL_MENU_TAB_TITLES[tab])}\n        round\n        faded\n        color=\"translucent\"\n      >\n        <i className={buildClassName('icon', SYMBOL_MENU_TAB_ICONS[tab])} />\n      </Button>\n    );\n  }\n\n  const handleSearchOpen = useLastCallback(() => {\n    onSearchOpen(activeTab === SymbolMenuTabs.Stickers ? 'stickers' : 'gifs');\n  });\n\n  function stopPropagation(event: any) {\n    event.stopPropagation();\n  }\n\n  return (\n    <div className=\"SymbolMenu-footer\" onClick={stopPropagation} dir={lang.isRtl ? 'rtl' : undefined}>\n      {activeTab !== SymbolMenuTabs.Emoji && activeTab !== SymbolMenuTabs.CustomEmoji && canSearch && (\n        <Button\n          className=\"symbol-search-button\"\n          ariaLabel={activeTab === SymbolMenuTabs.Stickers ? 'Search Stickers' : 'Search GIFs'}\n          round\n          faded\n          color=\"translucent\"\n          onClick={handleSearchOpen}\n        >\n          <i className=\"icon icon-search\" />\n        </Button>\n      )}\n\n      {canSendPlainText && renderTabButton(SymbolMenuTabs.Emoji)}\n      {canSendPlainText && renderTabButton(SymbolMenuTabs.CustomEmoji)}\n      {!isAttachmentModal && renderTabButton(SymbolMenuTabs.Stickers)}\n      {!isAttachmentModal && renderTabButton(SymbolMenuTabs.GIFs)}\n\n      {(activeTab === SymbolMenuTabs.Emoji || activeTab === SymbolMenuTabs.CustomEmoji) && (\n        <Button\n          className=\"symbol-delete-button\"\n          onClick={onRemoveSymbol}\n          ariaLabel=\"Remove Symbol\"\n          round\n          faded\n          color=\"translucent\"\n        >\n          <i className=\"icon icon-delete-left\" />\n        </Button>\n      )}\n    </div>\n  );\n};\n\nexport default memo(SymbolMenuFooter);\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useRef, useState,\n} from '../../../lib/teact/teact';\n\nimport type { IAnchorPosition } from '../../../types';\nimport { ApiMessageEntityTypes } from '../../../api/types';\n\nimport { EDITABLE_INPUT_ID } from '../../../config';\nimport buildClassName from '../../../util/buildClassName';\nimport captureEscKeyListener from '../../../util/captureEscKeyListener';\nimport { ensureProtocol } from '../../../util/ensureProtocol';\nimport getKeyFromEvent from '../../../util/getKeyFromEvent';\nimport stopEvent from '../../../util/stopEvent';\nimport { INPUT_CUSTOM_EMOJI_SELECTOR } from './helpers/customEmoji';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\nimport useShowTransition from '../../../hooks/useShowTransition';\nimport useVirtualBackdrop from '../../../hooks/useVirtualBackdrop';\n\nimport Button from '../../ui/Button';\n\nimport './TextFormatter.scss';\n\nexport type OwnProps = {\n  isOpen: boolean;\n  anchorPosition?: IAnchorPosition;\n  selectedRange?: Range;\n  setSelectedRange: (range: Range) => void;\n  onClose: () => void;\n};\n\ninterface ISelectedTextFormats {\n  bold?: boolean;\n  italic?: boolean;\n  underline?: boolean;\n  strikethrough?: boolean;\n  monospace?: boolean;\n  spoiler?: boolean;\n}\n\nconst TEXT_FORMAT_BY_TAG_NAME: Record<string, keyof ISelectedTextFormats> = {\n  B: 'bold',\n  STRONG: 'bold',\n  I: 'italic',\n  EM: 'italic',\n  U: 'underline',\n  DEL: 'strikethrough',\n  CODE: 'monospace',\n  SPAN: 'spoiler',\n};\nconst fragmentEl = document.createElement('div');\n\nconst TextFormatter: FC<OwnProps> = ({\n  isOpen,\n  anchorPosition,\n  selectedRange,\n  setSelectedRange,\n  onClose,\n}) => {\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const linkUrlInputRef = useRef<HTMLInputElement>(null);\n  const { shouldRender, transitionClassNames } = useShowTransition(isOpen);\n  const [isLinkControlOpen, openLinkControl, closeLinkControl] = useFlag();\n  const [linkUrl, setLinkUrl] = useState('');\n  const [isEditingLink, setIsEditingLink] = useState(false);\n  const [inputClassName, setInputClassName] = useState<string | undefined>();\n  const [selectedTextFormats, setSelectedTextFormats] = useState<ISelectedTextFormats>({});\n\n  useEffect(() => (isOpen ? captureEscKeyListener(onClose) : undefined), [isOpen, onClose]);\n  useVirtualBackdrop(\n    isOpen,\n    containerRef,\n    onClose,\n    true,\n  );\n\n  useEffect(() => {\n    if (isLinkControlOpen) {\n      linkUrlInputRef.current!.focus();\n    } else {\n      setLinkUrl('');\n      setIsEditingLink(false);\n    }\n  }, [isLinkControlOpen]);\n\n  useEffect(() => {\n    if (!shouldRender) {\n      closeLinkControl();\n      setSelectedTextFormats({});\n      setInputClassName(undefined);\n    }\n  }, [closeLinkControl, shouldRender]);\n\n  useEffect(() => {\n    if (!isOpen || !selectedRange) {\n      return;\n    }\n\n    const selectedFormats: ISelectedTextFormats = {};\n    let { parentElement } = selectedRange.commonAncestorContainer;\n    while (parentElement && parentElement.id !== EDITABLE_INPUT_ID) {\n      const textFormat = TEXT_FORMAT_BY_TAG_NAME[parentElement.tagName];\n      if (textFormat) {\n        selectedFormats[textFormat] = true;\n      }\n\n      parentElement = parentElement.parentElement;\n    }\n\n    setSelectedTextFormats(selectedFormats);\n  }, [isOpen, selectedRange, openLinkControl]);\n\n  const restoreSelection = useLastCallback(() => {\n    if (!selectedRange) {\n      return;\n    }\n\n    const selection = window.getSelection();\n    if (selection) {\n      selection.removeAllRanges();\n      selection.addRange(selectedRange);\n    }\n  });\n\n  const updateSelectedRange = useLastCallback(() => {\n    const selection = window.getSelection();\n    if (selection) {\n      setSelectedRange(selection.getRangeAt(0));\n    }\n  });\n\n  const getSelectedText = useLastCallback((shouldDropCustomEmoji?: boolean) => {\n    if (!selectedRange) {\n      return undefined;\n    }\n    fragmentEl.replaceChildren(selectedRange.cloneContents());\n    if (shouldDropCustomEmoji) {\n      fragmentEl.querySelectorAll(INPUT_CUSTOM_EMOJI_SELECTOR).forEach((el) => {\n        el.replaceWith(el.getAttribute('alt')!);\n      });\n    }\n    return fragmentEl.innerHTML;\n  });\n\n  const getSelectedElement = useLastCallback(() => {\n    if (!selectedRange) {\n      return undefined;\n    }\n\n    return selectedRange.commonAncestorContainer.parentElement;\n  });\n\n  function updateInputStyles() {\n    const input = linkUrlInputRef.current;\n    if (!input) {\n      return;\n    }\n\n    const { offsetWidth, scrollWidth, scrollLeft } = input;\n    if (scrollWidth <= offsetWidth) {\n      setInputClassName(undefined);\n      return;\n    }\n\n    let className = '';\n    if (scrollLeft < scrollWidth - offsetWidth) {\n      className = 'mask-right';\n    }\n    if (scrollLeft > 0) {\n      className += ' mask-left';\n    }\n\n    setInputClassName(className);\n  }\n\n  function handleLinkUrlChange(e: React.ChangeEvent<HTMLInputElement>) {\n    setLinkUrl(e.target.value);\n    updateInputStyles();\n  }\n\n  function getFormatButtonClassName(key: keyof ISelectedTextFormats) {\n    if (selectedTextFormats[key]) {\n      return 'active';\n    }\n\n    if (key === 'monospace' || key === 'strikethrough') {\n      if (Object.keys(selectedTextFormats).some(\n        (fKey) => fKey !== key && Boolean(selectedTextFormats[fKey as keyof ISelectedTextFormats]),\n      )) {\n        return 'disabled';\n      }\n    } else if (selectedTextFormats.monospace || selectedTextFormats.strikethrough) {\n      return 'disabled';\n    }\n\n    return undefined;\n  }\n\n  const handleSpoilerText = useLastCallback(() => {\n    if (selectedTextFormats.spoiler) {\n      const element = getSelectedElement();\n      if (\n        !selectedRange\n        || !element\n        || element.dataset.entityType !== ApiMessageEntityTypes.Spoiler\n        || !element.textContent\n      ) {\n        return;\n      }\n\n      element.replaceWith(element.textContent);\n      setSelectedTextFormats((selectedFormats) => ({\n        ...selectedFormats,\n        spoiler: false,\n      }));\n\n      return;\n    }\n\n    const text = getSelectedText();\n    document.execCommand(\n      'insertHTML', false, `<span class=\"spoiler\" data-entity-type=\"${ApiMessageEntityTypes.Spoiler}\">${text}</span>`,\n    );\n    onClose();\n  });\n\n  const handleBoldText = useLastCallback(() => {\n    setSelectedTextFormats((selectedFormats) => {\n      // Somehow re-applying 'bold' command to already bold text doesn't work\n      document.execCommand(selectedFormats.bold ? 'removeFormat' : 'bold');\n      Object.keys(selectedFormats).forEach((key) => {\n        if ((key === 'italic' || key === 'underline') && Boolean(selectedFormats[key])) {\n          document.execCommand(key);\n        }\n      });\n\n      updateSelectedRange();\n      return {\n        ...selectedFormats,\n        bold: !selectedFormats.bold,\n      };\n    });\n  });\n\n  const handleItalicText = useLastCallback(() => {\n    document.execCommand('italic');\n    updateSelectedRange();\n    setSelectedTextFormats((selectedFormats) => ({\n      ...selectedFormats,\n      italic: !selectedFormats.italic,\n    }));\n  });\n\n  const handleUnderlineText = useLastCallback(() => {\n    document.execCommand('underline');\n    updateSelectedRange();\n    setSelectedTextFormats((selectedFormats) => ({\n      ...selectedFormats,\n      underline: !selectedFormats.underline,\n    }));\n  });\n\n  const handleStrikethroughText = useLastCallback(() => {\n    if (selectedTextFormats.strikethrough) {\n      const element = getSelectedElement();\n      if (\n        !selectedRange\n        || !element\n        || element.tagName !== 'DEL'\n        || !element.textContent\n      ) {\n        return;\n      }\n\n      element.replaceWith(element.textContent);\n      setSelectedTextFormats((selectedFormats) => ({\n        ...selectedFormats,\n        strikethrough: false,\n      }));\n\n      return;\n    }\n\n    const text = getSelectedText();\n    document.execCommand('insertHTML', false, `<del>${text}</del>`);\n    onClose();\n  });\n\n  const handleMonospaceText = useLastCallback(() => {\n    if (selectedTextFormats.monospace) {\n      const element = getSelectedElement();\n      if (\n        !selectedRange\n        || !element\n        || element.tagName !== 'CODE'\n        || !element.textContent\n      ) {\n        return;\n      }\n\n      element.replaceWith(element.textContent);\n      setSelectedTextFormats((selectedFormats) => ({\n        ...selectedFormats,\n        monospace: false,\n      }));\n\n      return;\n    }\n\n    const text = getSelectedText(true);\n    document.execCommand('insertHTML', false, `<code class=\"text-entity-code\" dir=\"auto\">${text}</code>`);\n    onClose();\n  });\n\n  const handleLinkUrlConfirm = useLastCallback(() => {\n    const formattedLinkUrl = (ensureProtocol(linkUrl) || '').split('%').map(encodeURI).join('%');\n\n    if (isEditingLink) {\n      const element = getSelectedElement();\n      if (!element || element.tagName !== 'A') {\n        return;\n      }\n\n      (element as HTMLAnchorElement).href = formattedLinkUrl;\n\n      onClose();\n\n      return;\n    }\n\n    const text = getSelectedText(true);\n    restoreSelection();\n    document.execCommand(\n      'insertHTML',\n      false,\n      `<a href=${formattedLinkUrl} class=\"text-entity-link\" dir=\"auto\">${text}</a>`,\n    );\n    onClose();\n  });\n\n  const handleKeyDown = useLastCallback((e: KeyboardEvent) => {\n    const HANDLERS_BY_KEY: Record<string, AnyToVoidFunction> = {\n      k: openLinkControl,\n      b: handleBoldText,\n      u: handleUnderlineText,\n      i: handleItalicText,\n      m: handleMonospaceText,\n      s: handleStrikethroughText,\n      p: handleSpoilerText,\n    };\n\n    const handler = HANDLERS_BY_KEY[getKeyFromEvent(e)];\n\n    if (\n      e.altKey\n      || !(e.ctrlKey || e.metaKey)\n      || !handler\n    ) {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopPropagation();\n    handler();\n  });\n\n  useEffect(() => {\n    if (isOpen) {\n      document.addEventListener('keydown', handleKeyDown);\n    }\n\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [isOpen, handleKeyDown]);\n\n  const lang = useOldLang();\n\n  function handleContainerKeyDown(e: React.KeyboardEvent<HTMLDivElement>) {\n    if (e.key === 'Enter' && isLinkControlOpen) {\n      handleLinkUrlConfirm();\n      e.preventDefault();\n    }\n  }\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  const className = buildClassName(\n    'TextFormatter',\n    transitionClassNames,\n    isLinkControlOpen && 'link-control-shown',\n  );\n\n  const linkUrlConfirmClassName = buildClassName(\n    'TextFormatter-link-url-confirm',\n    Boolean(linkUrl.length) && 'shown',\n  );\n\n  const style = anchorPosition\n    ? `left: ${anchorPosition.x}px; top: ${anchorPosition.y}px;--text-formatter-left: ${anchorPosition.x}px;`\n    : '';\n\n  return (\n    <div\n      ref={containerRef}\n      className={className}\n      style={style}\n      onKeyDown={handleContainerKeyDown}\n      // Prevents focus loss when clicking on the toolbar\n      onMouseDown={stopEvent}\n    >\n      <div className=\"TextFormatter-buttons\">\n        <Button\n          color=\"translucent\"\n          ariaLabel=\"Spoiler text\"\n          className={getFormatButtonClassName('spoiler')}\n          onClick={handleSpoilerText}\n        >\n          <i className=\"icon icon-eye-closed\" />\n        </Button>\n        <div className=\"TextFormatter-divider\" />\n        <Button\n          color=\"translucent\"\n          ariaLabel=\"Bold text\"\n          className={getFormatButtonClassName('bold')}\n          onClick={handleBoldText}\n        >\n          <i className=\"icon icon-bold\" />\n        </Button>\n        <Button\n          color=\"translucent\"\n          ariaLabel=\"Italic text\"\n          className={getFormatButtonClassName('italic')}\n          onClick={handleItalicText}\n        >\n          <i className=\"icon icon-italic\" />\n        </Button>\n        <Button\n          color=\"translucent\"\n          ariaLabel=\"Underlined text\"\n          className={getFormatButtonClassName('underline')}\n          onClick={handleUnderlineText}\n        >\n          <i className=\"icon icon-underlined\" />\n        </Button>\n        <Button\n          color=\"translucent\"\n          ariaLabel=\"Strikethrough text\"\n          className={getFormatButtonClassName('strikethrough')}\n          onClick={handleStrikethroughText}\n        >\n          <i className=\"icon icon-strikethrough\" />\n        </Button>\n        <Button\n          color=\"translucent\"\n          ariaLabel=\"Monospace text\"\n          className={getFormatButtonClassName('monospace')}\n          onClick={handleMonospaceText}\n        >\n          <i className=\"icon icon-monospace\" />\n        </Button>\n        <div className=\"TextFormatter-divider\" />\n        <Button color=\"translucent\" ariaLabel={lang('TextFormat.AddLinkTitle')} onClick={openLinkControl}>\n          <i className=\"icon icon-link\" />\n        </Button>\n      </div>\n\n      <div className=\"TextFormatter-link-control\">\n        <div className=\"TextFormatter-buttons\">\n          <Button color=\"translucent\" ariaLabel={lang('Cancel')} onClick={closeLinkControl}>\n            <i className=\"icon icon-arrow-left\" />\n          </Button>\n          <div className=\"TextFormatter-divider\" />\n\n          <div\n            className={buildClassName('TextFormatter-link-url-input-wrapper', inputClassName)}\n          >\n            <input\n              ref={linkUrlInputRef}\n              className=\"TextFormatter-link-url-input\"\n              type=\"text\"\n              value={linkUrl}\n              placeholder=\"Enter URL...\"\n              autoComplete=\"off\"\n              inputMode=\"url\"\n              dir=\"auto\"\n              onChange={handleLinkUrlChange}\n              onScroll={updateInputStyles}\n            />\n          </div>\n\n          <div className={linkUrlConfirmClassName}>\n            <div className=\"TextFormatter-divider\" />\n            <Button\n              color=\"translucent\"\n              ariaLabel={lang('Save')}\n              className=\"color-primary\"\n              onClick={handleLinkUrlConfirm}\n            >\n              <i className=\"icon icon-check\" />\n            </Button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(TextFormatter);\n","import { fixImageContent } from '../../../../util/parseHtmlAsFormattedText';\n\nconst div = document.createElement('div');\n\nexport function getHtmlTextLength(html: string) {\n  div.innerHTML = html;\n  fixImageContent(div);\n  div.querySelectorAll('br').forEach((br) => {\n    br.replaceWith('\\n');\n  });\n  return div.textContent?.trim().length || 0;\n}\n","import { useEffect, useState } from '../../../../lib/teact/teact';\n\nimport captureKeyboardListeners from '../../../../util/captureKeyboardListeners';\nimport cycleRestrict from '../../../../util/cycleRestrict';\n\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nexport function useKeyboardNavigation({\n  isActive,\n  isHorizontal,\n  shouldSaveSelectionOnUpdateItems,\n  shouldRemoveSelectionOnReset,\n  noArrowNavigation,\n  items,\n  shouldSelectOnTab,\n  onSelect,\n  onClose,\n}: {\n  isActive: boolean;\n  isHorizontal?: boolean;\n  shouldSaveSelectionOnUpdateItems?: boolean;\n  shouldRemoveSelectionOnReset?: boolean;\n  noArrowNavigation?: boolean;\n  items?: any[];\n  shouldSelectOnTab?: boolean;\n  onSelect: (item: any) => void | boolean;\n  onClose: NoneToVoidFunction;\n}) {\n  const [selectedItemIndex, setSelectedItemIndex] = useState(-1);\n\n  const getSelectedIndex = useLastCallback((newIndex: number) => {\n    if (!items) {\n      return -1;\n    }\n\n    return cycleRestrict(items.length, newIndex);\n  });\n\n  const handleArrowKey = useLastCallback((value: number, e: KeyboardEvent) => {\n    e.preventDefault();\n    setSelectedItemIndex((index) => (getSelectedIndex(index + value)));\n  });\n\n  const handleItemSelect = useLastCallback((e: KeyboardEvent) => {\n    // Prevent action on key combinations\n    if (e.altKey || e.ctrlKey || e.metaKey || e.shiftKey) return false;\n    if (!isActive) return false;\n\n    if (items && items.length && selectedItemIndex > -1) {\n      const item = items[selectedItemIndex];\n      if (item) {\n        if (onSelect(item) === false) {\n          return false;\n        }\n\n        e.preventDefault();\n      }\n    }\n\n    return true;\n  });\n\n  useEffect(() => {\n    if (!isActive) setSelectedItemIndex(shouldRemoveSelectionOnReset ? -1 : 0);\n  }, [isActive, shouldRemoveSelectionOnReset]);\n\n  const isSelectionOutOfRange = !items || selectedItemIndex > items.length - 1;\n  useEffect(() => {\n    if (!shouldSaveSelectionOnUpdateItems || isSelectionOutOfRange) {\n      setSelectedItemIndex(shouldRemoveSelectionOnReset ? -1 : 0);\n    }\n  }, [isSelectionOutOfRange, shouldRemoveSelectionOnReset, shouldSaveSelectionOnUpdateItems]);\n\n  useEffect(() => (isActive ? captureKeyboardListeners({\n    onEsc: onClose,\n    onUp: noArrowNavigation || isHorizontal ? undefined : (e: KeyboardEvent) => handleArrowKey(-1, e),\n    onDown: noArrowNavigation || isHorizontal ? undefined : (e: KeyboardEvent) => handleArrowKey(1, e),\n    onLeft: noArrowNavigation || !isHorizontal ? undefined : (e: KeyboardEvent) => handleArrowKey(-1, e),\n    onRight: noArrowNavigation || !isHorizontal ? undefined : (e: KeyboardEvent) => handleArrowKey(1, e),\n    onTab: shouldSelectOnTab ? handleItemSelect : undefined,\n    onEnter: handleItemSelect,\n  }) : undefined), [\n    noArrowNavigation, handleArrowKey, handleItemSelect, isActive, isHorizontal, onClose, shouldSelectOnTab,\n  ]);\n\n  return selectedItemIndex;\n}\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, { memo } from '../../../../lib/teact/teact';\n\nimport type { ApiBotInlineResult } from '../../../../api/types';\n\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport BaseResult from './BaseResult';\n\nexport type OwnProps = {\n  focus?: boolean;\n  inlineResult: ApiBotInlineResult;\n  onClick: (result: ApiBotInlineResult) => void;\n};\n\nconst ArticleResult: FC<OwnProps> = ({ focus, inlineResult, onClick }) => {\n  const {\n    title, url, description, webThumbnail,\n  } = inlineResult;\n\n  const handleClick = useLastCallback(() => {\n    onClick(inlineResult);\n  });\n\n  return (\n    <BaseResult\n      focus={focus}\n      thumbnail={webThumbnail}\n      title={title || url}\n      description={description}\n      onClick={handleClick}\n    />\n  );\n};\n\nexport default memo(ArticleResult);\n","import type { FC, TeactNode } from '../../../../lib/teact/teact';\nimport React, { memo } from '../../../../lib/teact/teact';\n\nimport type { ApiWebDocument } from '../../../../api/types';\n\nimport { getFirstLetters } from '../../../../util/textFormat';\nimport renderText from '../../../common/helpers/renderText';\nimport { preventMessageInputBlurWithBubbling } from '../../helpers/preventMessageInputBlur';\n\nimport useMedia from '../../../../hooks/useMedia';\n\nimport ListItem from '../../../ui/ListItem';\n\nimport './BaseResult.scss';\n\nexport type OwnProps = {\n  focus?: boolean;\n  thumbnail?: ApiWebDocument;\n  thumbUrl?: string;\n  title?: string;\n  description?: string;\n  transitionClassNames?: string;\n  onClick: NoneToVoidFunction;\n};\n\nconst BaseResult: FC<OwnProps> = ({\n  title,\n  description,\n  thumbnail,\n  thumbUrl,\n  focus,\n  transitionClassNames = '',\n  onClick,\n}) => {\n  let content: TeactNode | undefined;\n\n  const thumbnailDataUrl = useMedia(thumbnail ? `webDocument:${thumbnail.url}` : undefined);\n  thumbUrl = thumbUrl || thumbnailDataUrl;\n\n  if (thumbUrl) {\n    content = (\n      <img src={thumbUrl} className={transitionClassNames} alt=\"\" decoding=\"async\" draggable={false} />\n    );\n  } else if (title) {\n    content = getFirstLetters(title, 1);\n  }\n\n  return (\n    <ListItem\n      focus={focus}\n      className=\"BaseResult chat-item-clickable\"\n      onMouseDown={preventMessageInputBlurWithBubbling}\n      onClick={onClick}\n    >\n      <span className=\"thumb\">\n        {typeof content === 'string' ? renderText(content) : content}\n      </span>\n      <div className=\"content-inner\">\n        {title && (<div className=\"title\">{title}</div>)}\n        {description && (<div className=\"description\">{description}</div>)}\n      </div>\n    </ListItem>\n  );\n};\n\nexport default memo(BaseResult);\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, { memo } from '../../../../lib/teact/teact';\n\nimport type { ApiBotInlineMediaResult, ApiBotInlineResult, ApiVideo } from '../../../../api/types';\nimport type { ObserveFn } from '../../../../hooks/useIntersectionObserver';\n\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport GifButton from '../../../common/GifButton';\n\ntype OwnProps = {\n  inlineResult: ApiBotInlineMediaResult;\n  isSavedMessages?: boolean;\n  canSendGifs?: boolean;\n  observeIntersection: ObserveFn;\n  onClick: (result: ApiBotInlineResult, isSilent?: boolean, shouldSchedule?: boolean) => void;\n};\n\nconst GifResult: FC<OwnProps> = ({\n  inlineResult, isSavedMessages, canSendGifs, observeIntersection, onClick,\n}) => {\n  const { gif } = inlineResult;\n\n  const handleClick = useLastCallback((_gif: ApiVideo, isSilent?: boolean, shouldSchedule?: boolean) => {\n    onClick(inlineResult, isSilent, shouldSchedule);\n  });\n\n  if (!gif) {\n    return undefined;\n  }\n\n  return (\n    <GifButton\n      gif={gif}\n      observeIntersection={observeIntersection}\n      className=\"chat-item-clickable\"\n      onClick={canSendGifs ? handleClick : undefined}\n      isSavedMessages={isSavedMessages}\n    />\n  );\n};\n\nexport default memo(GifResult);\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, { memo } from '../../../../lib/teact/teact';\n\nimport type {\n  ApiBotInlineMediaResult, ApiBotInlineResult, ApiPhoto, ApiThumbnail, ApiWebDocument,\n} from '../../../../api/types';\n\nimport buildClassName from '../../../../util/buildClassName';\n\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useMedia from '../../../../hooks/useMedia';\nimport useMediaTransition from '../../../../hooks/useMediaTransition';\n\nimport BaseResult from './BaseResult';\n\nimport './MediaResult.scss';\n\nexport type OwnProps = {\n  focus?: boolean;\n  isForGallery?: boolean;\n  inlineResult: ApiBotInlineMediaResult | ApiBotInlineResult;\n  onClick: (result: ApiBotInlineResult) => void;\n};\n\nconst MediaResult: FC<OwnProps> = ({\n  focus, isForGallery, inlineResult, onClick,\n}) => {\n  let photo: ApiPhoto | undefined;\n  let thumbnail: ApiThumbnail | undefined;\n  let webThumbnail: ApiWebDocument | undefined;\n\n  if ('photo' in inlineResult) {\n    photo = inlineResult.photo;\n  }\n  // For results with type=video (for example @stikstokbot)\n  if ('thumbnail' in inlineResult) {\n    thumbnail = inlineResult.thumbnail;\n  }\n  if ('webThumbnail' in inlineResult && isForGallery) {\n    webThumbnail = inlineResult.webThumbnail;\n  }\n\n  const thumbnailDataUrl = useMedia(webThumbnail ? `webDocument:${webThumbnail.url}` : undefined);\n  const mediaBlobUrl = useMedia(photo && `photo${photo.id}?size=m`);\n  const transitionClassNames = useMediaTransition(mediaBlobUrl);\n\n  const handleClick = useLastCallback(() => {\n    onClick(inlineResult);\n  });\n\n  if (isForGallery) {\n    return (\n      <div className=\"MediaResult chat-item-clickable\" onClick={handleClick}>\n        <img src={(photo?.thumbnail?.dataUri) || thumbnailDataUrl} alt=\"\" draggable={false} />\n        <img\n          src={mediaBlobUrl}\n          className={buildClassName('full-media', transitionClassNames)}\n          alt=\"\"\n          draggable={false}\n        />\n      </div>\n    );\n  }\n\n  const { title, description } = inlineResult;\n\n  return (\n    <BaseResult\n      focus={focus}\n      thumbUrl={mediaBlobUrl || (thumbnail?.dataUri || thumbnailDataUrl)}\n      transitionClassNames={transitionClassNames}\n      title={title}\n      description={description}\n      onClick={handleClick}\n    />\n  );\n};\n\nexport default memo(MediaResult);\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, { memo } from '../../../../lib/teact/teact';\n\nimport type { ApiBotInlineMediaResult, ApiBotInlineResult } from '../../../../api/types';\nimport type { ObserveFn } from '../../../../hooks/useIntersectionObserver';\n\nimport { STICKER_SIZE_INLINE_BOT_RESULT } from '../../../../config';\n\nimport StickerButton from '../../../common/StickerButton';\n\ntype OwnProps = {\n  inlineResult: ApiBotInlineMediaResult;\n  isSavedMessages?: boolean;\n  observeIntersection: ObserveFn;\n  onClick: (result: ApiBotInlineResult, isSilent?: boolean, shouldSchedule?: boolean) => void;\n  isCurrentUserPremium?: boolean;\n};\n\nconst StickerResult: FC<OwnProps> = ({\n  inlineResult,\n  isSavedMessages,\n  observeIntersection,\n  onClick,\n  isCurrentUserPremium,\n}) => {\n  const { sticker } = inlineResult;\n\n  if (!sticker) {\n    return undefined;\n  }\n\n  return (\n    <StickerButton\n      sticker={sticker}\n      size={STICKER_SIZE_INLINE_BOT_RESULT}\n      observeIntersection={observeIntersection}\n      title={sticker.emoji}\n      className=\"chat-item-clickable\"\n      onClick={onClick}\n      clickArg={inlineResult}\n      isSavedMessages={isSavedMessages}\n      canViewSet\n      noShowPremium\n      isCurrentUserPremium={isCurrentUserPremium}\n    />\n  );\n};\n\nexport default memo(StickerResult);\n","export function formatCardExpiry(input: string) {\n  input = input.replace(/[^\\d]/g, '').slice(0, 4);\n  const parts = input.match(/.{1,2}/g);\n  if (parts?.[0] && Number(parts[0]) > 12) {\n    parts[0] = '12';\n  }\n  if (parts?.[0] && parts[0].length === 2 && !parts[1]) {\n    parts[1] = '';\n  }\n  return parts ? parts.join('/') : '';\n}\n\nexport function formatCardNumber(input: string) {\n  input = input.replace(/[^\\d]/g, '');\n  const parts = input.match(/.{1,4}/g);\n  return parts ? parts.join(' ') : '';\n}\n","import { getActions } from '../../../global';\n\nimport { useHotkeys } from '../../../hooks/useHotkeys';\n\nconst useCopySelectedMessages = (isActive?: boolean) => {\n  function handleCopy(e: KeyboardEvent) {\n    e.preventDefault();\n    getActions().copySelectedMessages();\n  }\n\n  useHotkeys(isActive ? { 'Mod+C': handleCopy } : undefined);\n};\n\nexport default useCopySelectedMessages;\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type { ActiveDownloads, MessageListType } from '../../../global/types';\nimport type { IAlbum, IAnchorPosition, ThreadId } from '../../../types';\nimport {\n  type ApiAvailableReaction,\n  type ApiChatReactions,\n  type ApiMessage,\n  type ApiReaction,\n  type ApiStickerSet,\n  type ApiStickerSetInfo,\n  type ApiThreadInfo,\n  MAIN_THREAD_ID,\n} from '../../../api/types';\n\nimport { PREVIEW_AVATAR_COUNT, SERVICE_NOTIFICATIONS_USER_ID } from '../../../config';\nimport {\n  areReactionsEmpty,\n  getIsDownloading,\n  getMessageDownloadableMedia,\n  getMessageVideo,\n  hasMessageTtl,\n  isActionMessage,\n  isChatChannel,\n  isChatGroup,\n  isMessageLocal,\n  isOwnMessage,\n  isUserId,\n} from '../../../global/helpers';\nimport {\n  selectActiveDownloads,\n  selectAllowedMessageActions,\n  selectCanPlayAnimatedEmojis,\n  selectCanScheduleUntilOnline,\n  selectCanTranslateMessage,\n  selectChat,\n  selectChatFullInfo,\n  selectCurrentMessageList,\n  selectIsChatWithSelf,\n  selectIsCurrentUserPremium,\n  selectIsMessageProtected,\n  selectIsMessageUnread,\n  selectIsPremiumPurchaseBlocked,\n  selectIsReactionPickerOpen,\n  selectMessageCustomEmojiSets,\n  selectMessageTranslations,\n  selectRequestedChatTranslationLanguage,\n  selectRequestedMessageTranslationLanguage,\n  selectStickerSet,\n  selectUserStatus,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { copyTextToClipboard } from '../../../util/clipboard';\nimport { getSelectionAsFormattedText } from './helpers/getSelectionAsFormattedText';\nimport { isSelectionRangeInsideMessage } from './helpers/isSelectionRangeInsideMessage';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\nimport useSchedule from '../../../hooks/useSchedule';\nimport useShowTransition from '../../../hooks/useShowTransition';\n\nimport DeleteMessageModal from '../../common/DeleteMessageModal';\nimport PinMessageModal from '../../common/PinMessageModal.async';\nimport ReportModal from '../../common/ReportModal';\nimport ConfirmDialog from '../../ui/ConfirmDialog';\nimport MessageContextMenu from './MessageContextMenu';\n\nexport type OwnProps = {\n  isOpen: boolean;\n  message: ApiMessage;\n  album?: IAlbum;\n  anchor: IAnchorPosition;\n  targetHref?: string;\n  messageListType: MessageListType;\n  noReplies?: boolean;\n  detectedLanguage?: string;\n  repliesThreadInfo?: ApiThreadInfo;\n  onClose: NoneToVoidFunction;\n  onCloseAnimationEnd: NoneToVoidFunction;\n};\n\ntype StateProps = {\n  threadId?: ThreadId;\n  availableReactions?: ApiAvailableReaction[];\n  topReactions?: ApiReaction[];\n  defaultTagReactions?: ApiReaction[];\n  customEmojiSetsInfo?: ApiStickerSetInfo[];\n  customEmojiSets?: ApiStickerSet[];\n  noOptions?: boolean;\n  canSendNow?: boolean;\n  canReschedule?: boolean;\n  canReply?: boolean;\n  canPin?: boolean;\n  canShowReactionsCount?: boolean;\n  canBuyPremium?: boolean;\n  canShowReactionList?: boolean;\n  canUnpin?: boolean;\n  canDelete?: boolean;\n  canReport?: boolean;\n  canEdit?: boolean;\n  canForward?: boolean;\n  canFaveSticker?: boolean;\n  canUnfaveSticker?: boolean;\n  canCopy?: boolean;\n  canTranslate?: boolean;\n  canShowOriginal?: boolean;\n  isMessageTranslated?: boolean;\n  canSelectLanguage?: boolean;\n  isPrivate?: boolean;\n  isCurrentUserPremium?: boolean;\n  hasFullInfo?: boolean;\n  canCopyLink?: boolean;\n  canSelect?: boolean;\n  canDownload?: boolean;\n  canSaveGif?: boolean;\n  canRevote?: boolean;\n  canClosePoll?: boolean;\n  canLoadReadDate?: boolean;\n  shouldRenderShowWhen?: boolean;\n  activeDownloads: ActiveDownloads;\n  canShowSeenBy?: boolean;\n  enabledReactions?: ApiChatReactions;\n  canScheduleUntilOnline?: boolean;\n  maxUniqueReactions?: number;\n  canPlayAnimatedEmojis?: boolean;\n  isReactionPickerOpen?: boolean;\n  isInSavedMessages?: boolean;\n};\n\nconst selection = window.getSelection();\n\nconst ContextMenuContainer: FC<OwnProps & StateProps> = ({\n  threadId,\n  availableReactions,\n  topReactions,\n  defaultTagReactions,\n  isOpen,\n  messageListType,\n  message,\n  customEmojiSetsInfo,\n  customEmojiSets,\n  album,\n  anchor,\n  targetHref,\n  noOptions,\n  canSendNow,\n  hasFullInfo,\n  canReschedule,\n  canReply,\n  canPin,\n  repliesThreadInfo,\n  canUnpin,\n  canDelete,\n  canReport,\n  canShowReactionsCount,\n  canShowReactionList,\n  canEdit,\n  enabledReactions,\n  maxUniqueReactions,\n  isPrivate,\n  isCurrentUserPremium,\n  canForward,\n  canBuyPremium,\n  canFaveSticker,\n  canUnfaveSticker,\n  canCopy,\n  canCopyLink,\n  canSelect,\n  canDownload,\n  canSaveGif,\n  canRevote,\n  canClosePoll,\n  canPlayAnimatedEmojis,\n  canLoadReadDate,\n  shouldRenderShowWhen,\n  activeDownloads,\n  noReplies,\n  canShowSeenBy,\n  canScheduleUntilOnline,\n  canTranslate,\n  isMessageTranslated,\n  canShowOriginal,\n  canSelectLanguage,\n  isReactionPickerOpen,\n  isInSavedMessages,\n  onClose,\n  onCloseAnimationEnd,\n}) => {\n  const {\n    openThread,\n    updateDraftReplyInfo,\n    setEditingId,\n    pinMessage,\n    openForwardMenu,\n    faveSticker,\n    unfaveSticker,\n    toggleMessageSelection,\n    sendScheduledMessages,\n    rescheduleMessage,\n    downloadMedia,\n    cancelMediaDownload,\n    loadSeenBy,\n    openSeenByModal,\n    openReactorListModal,\n    loadFullChat,\n    loadReactors,\n    copyMessagesByIds,\n    saveGif,\n    loadStickers,\n    cancelPollVote,\n    closePoll,\n    toggleReaction,\n    requestMessageTranslation,\n    showOriginalMessage,\n    openChatLanguageModal,\n    openMessageReactionPicker,\n    openPremiumModal,\n    loadOutboxReadDate,\n    copyMessageLink,\n  } = getActions();\n\n  const lang = useOldLang();\n  const { transitionClassNames } = useShowTransition(isOpen, onCloseAnimationEnd, undefined, false);\n  const [isMenuOpen, setIsMenuOpen] = useState(true);\n  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);\n  const [isReportModalOpen, setIsReportModalOpen] = useState(false);\n  const [isPinModalOpen, setIsPinModalOpen] = useState(false);\n  const [isClosePollDialogOpen, openClosePollDialog, closeClosePollDialog] = useFlag();\n  const [canQuoteSelection, setCanQuoteSelection] = useState(false);\n  const [requestCalendar, calendar] = useSchedule(canScheduleUntilOnline, onClose, message.date);\n\n  // `undefined` indicates that emoji are present and loading\n  const hasCustomEmoji = customEmojiSetsInfo === undefined || Boolean(customEmojiSetsInfo.length);\n\n  useEffect(() => {\n    if (canShowSeenBy && isOpen) {\n      loadSeenBy({ chatId: message.chatId, messageId: message.id });\n    }\n  }, [loadSeenBy, isOpen, message.chatId, message.id, canShowSeenBy]);\n\n  useEffect(() => {\n    if (canLoadReadDate && isOpen) {\n      loadOutboxReadDate({ chatId: message.chatId, messageId: message.id });\n    }\n  }, [canLoadReadDate, isOpen, message.chatId, message.id, message.readDate]);\n\n  useEffect(() => {\n    if (canShowReactionsCount && isOpen) {\n      loadReactors({ chatId: message.chatId, messageId: message.id });\n    }\n  }, [canShowReactionsCount, isOpen, loadReactors, message.chatId, message.id]);\n\n  useEffect(() => {\n    if (customEmojiSetsInfo?.length && customEmojiSets?.length !== customEmojiSetsInfo.length) {\n      customEmojiSetsInfo.forEach((set) => {\n        loadStickers({ stickerSetInfo: set });\n      });\n    }\n  }, [customEmojiSetsInfo, customEmojiSets, loadStickers]);\n\n  useEffect(() => {\n    if (!hasFullInfo && !isPrivate && isOpen) {\n      loadFullChat({ chatId: message.chatId });\n    }\n  }, [hasFullInfo, isOpen, isPrivate, loadFullChat, message.chatId]);\n\n  const seenByRecentPeers = useMemo(() => {\n    // No need for expensive global updates on chats or users, so we avoid them\n    const chatsById = getGlobal().chats.byId;\n    const usersById = getGlobal().users.byId;\n    if (message.reactions?.recentReactions?.length) {\n      const uniqueReactors = new Set(message.reactions?.recentReactions?.map(\n        ({ peerId }) => usersById[peerId] || chatsById[peerId],\n      ));\n\n      return Array.from(uniqueReactors).filter(Boolean).slice(0, PREVIEW_AVATAR_COUNT);\n    }\n\n    if (!message.seenByDates) {\n      return undefined;\n    }\n\n    return Object.keys(message.seenByDates).slice(0, PREVIEW_AVATAR_COUNT)\n      .map((id) => usersById[id] || chatsById[id])\n      .filter(Boolean);\n  }, [message.reactions?.recentReactions, message.seenByDates]);\n\n  const isDownloading = useMemo(() => {\n    if (album) {\n      return album.messages.some((msg) => {\n        const downloadableMedia = getMessageDownloadableMedia(msg);\n        if (!downloadableMedia) return false;\n        return getIsDownloading(activeDownloads, downloadableMedia);\n      });\n    }\n\n    const downloadableMedia = getMessageDownloadableMedia(message);\n    if (!downloadableMedia) return false;\n    return getIsDownloading(activeDownloads, downloadableMedia);\n  }, [activeDownloads, album, message]);\n\n  const selectionRange = canReply && selection?.rangeCount ? selection.getRangeAt(0) : undefined;\n\n  useEffect(() => {\n    if (isMessageTranslated) {\n      setCanQuoteSelection(false);\n      return;\n    }\n\n    const isMessageTextSelected = selectionRange\n      && !selectionRange.collapsed\n      && Boolean(message.content.text?.text)\n      && isSelectionRangeInsideMessage(selectionRange);\n\n    if (!isMessageTextSelected) {\n      setCanQuoteSelection(false);\n      return;\n    }\n\n    const selectionText = getSelectionAsFormattedText(selectionRange);\n\n    setCanQuoteSelection(\n      selectionText.text.trim().length > 0\n      && message.content.text!.text!.includes(selectionText.text),\n    );\n  }, [\n    selectionRange, selectionRange?.collapsed, selectionRange?.startOffset, selectionRange?.endOffset,\n    isMessageTranslated, message.content.text,\n  ]);\n\n  const handleDelete = useLastCallback(() => {\n    setIsMenuOpen(false);\n    setIsDeleteModalOpen(true);\n  });\n\n  const handleReport = useLastCallback(() => {\n    setIsMenuOpen(false);\n    setIsReportModalOpen(true);\n  });\n\n  const closeMenu = useLastCallback(() => {\n    setIsMenuOpen(false);\n    onClose();\n  });\n\n  const closeDeleteModal = useLastCallback(() => {\n    setIsDeleteModalOpen(false);\n    onClose();\n  });\n\n  const closeReportModal = useLastCallback(() => {\n    setIsReportModalOpen(false);\n    onClose();\n  });\n\n  const closePinModal = useLastCallback(() => {\n    setIsPinModalOpen(false);\n    onClose();\n  });\n\n  const handleReply = useLastCallback(() => {\n    updateDraftReplyInfo({\n      replyToMsgId: message.id,\n      quoteText: canQuoteSelection && selectionRange ? getSelectionAsFormattedText(selectionRange) : undefined,\n      replyToPeerId: undefined,\n    });\n    closeMenu();\n  });\n\n  const handleOpenThread = useLastCallback(() => {\n    openThread({\n      chatId: message.chatId,\n      threadId: message.id,\n    });\n    closeMenu();\n  });\n\n  const handleEdit = useLastCallback(() => {\n    setEditingId({ messageId: message.id });\n    closeMenu();\n  });\n\n  const handlePin = useLastCallback(() => {\n    setIsMenuOpen(false);\n    setIsPinModalOpen(true);\n  });\n\n  const handleUnpin = useLastCallback(() => {\n    pinMessage({ messageId: message.id, isUnpin: true });\n    closeMenu();\n  });\n\n  const handleForward = useLastCallback(() => {\n    closeMenu();\n    if (album?.messages) {\n      const messageIds = album.messages.map(({ id }) => id);\n      openForwardMenu({ fromChatId: message.chatId, messageIds });\n    } else {\n      openForwardMenu({ fromChatId: message.chatId, messageIds: [message.id] });\n    }\n  });\n\n  const handleFaveSticker = useLastCallback(() => {\n    closeMenu();\n    faveSticker({ sticker: message.content.sticker! });\n  });\n\n  const handleUnfaveSticker = useLastCallback(() => {\n    closeMenu();\n    unfaveSticker({ sticker: message.content.sticker! });\n  });\n\n  const handleCancelVote = useLastCallback(() => {\n    closeMenu();\n    cancelPollVote({ chatId: message.chatId, messageId: message.id });\n  });\n\n  const handlePollClose = useLastCallback(() => {\n    closeMenu();\n    closePoll({ chatId: message.chatId, messageId: message.id });\n  });\n\n  const handleSelectMessage = useLastCallback(() => {\n    const params = album?.messages\n      ? {\n        messageId: message.id,\n        childMessageIds: album.messages.map(({ id }) => id),\n        withShift: false,\n      }\n      : { messageId: message.id, withShift: false };\n\n    toggleMessageSelection(params);\n    closeMenu();\n  });\n\n  const handleScheduledMessageSend = useLastCallback(() => {\n    sendScheduledMessages({ chatId: message.chatId, id: message.id });\n    closeMenu();\n  });\n\n  const handleRescheduleMessage = useLastCallback((scheduledAt: number) => {\n    rescheduleMessage({\n      chatId: message.chatId,\n      messageId: message.id,\n      scheduledAt,\n    });\n    onClose();\n  });\n\n  const handleOpenCalendar = useLastCallback(() => {\n    setIsMenuOpen(false);\n    requestCalendar(handleRescheduleMessage);\n  });\n\n  const handleOpenSeenByModal = useLastCallback(() => {\n    closeMenu();\n    openSeenByModal({ chatId: message.chatId, messageId: message.id });\n  });\n\n  const handleOpenReactorListModal = useLastCallback(() => {\n    closeMenu();\n    openReactorListModal({ chatId: message.chatId, messageId: message.id });\n  });\n\n  const handleCopyMessages = useLastCallback((messageIds: number[]) => {\n    copyMessagesByIds({ messageIds });\n    closeMenu();\n  });\n\n  const handleCopyLink = useLastCallback(() => {\n    copyMessageLink({\n      chatId: message.chatId,\n      messageId: message.id,\n      shouldIncludeThread: threadId !== MAIN_THREAD_ID,\n      shouldIncludeGrouped: true, // TODO: Provide correct value when ability to target specific message is added\n    });\n    closeMenu();\n  });\n\n  const handleCopyNumber = useLastCallback(() => {\n    copyTextToClipboard(message.content.contact!.phoneNumber);\n    closeMenu();\n  });\n\n  const handleDownloadClick = useLastCallback(() => {\n    (album?.messages || [message]).forEach((msg) => {\n      const downloadableMedia = getMessageDownloadableMedia(msg);\n      if (!downloadableMedia) return;\n\n      if (isDownloading) {\n        cancelMediaDownload({ media: downloadableMedia });\n      } else {\n        downloadMedia({ media: downloadableMedia });\n      }\n    });\n    closeMenu();\n  });\n\n  const handleSaveGif = useLastCallback(() => {\n    const video = getMessageVideo(message);\n    saveGif({ gif: video! });\n    closeMenu();\n  });\n\n  const handleToggleReaction = useLastCallback((reaction: ApiReaction) => {\n    if (isInSavedMessages && !isCurrentUserPremium) {\n      openPremiumModal({\n        initialSection: 'saved_tags',\n      });\n    } else {\n      toggleReaction({\n        chatId: message.chatId, messageId: message.id, reaction, shouldAddToRecent: true,\n      });\n    }\n    closeMenu();\n  });\n\n  const handleReactionPickerOpen = useLastCallback((position: IAnchorPosition) => {\n    openMessageReactionPicker({ chatId: message.chatId, messageId: message.id, position });\n  });\n\n  const handleTranslate = useLastCallback(() => {\n    requestMessageTranslation({\n      chatId: message.chatId,\n      id: message.id,\n    });\n    closeMenu();\n  });\n\n  const handleShowOriginal = useLastCallback(() => {\n    showOriginalMessage({\n      chatId: message.chatId,\n      id: message.id,\n    });\n    closeMenu();\n  });\n\n  const handleSelectLanguage = useLastCallback(() => {\n    openChatLanguageModal({\n      chatId: message.chatId,\n      messageId: message.id,\n    });\n    closeMenu();\n  });\n\n  const reportMessageIds = useMemo(() => (album ? album.messages : [message]).map(({ id }) => id), [album, message]);\n\n  if (noOptions) {\n    closeMenu();\n\n    return undefined;\n  }\n\n  const scheduledMaxDate = new Date();\n  scheduledMaxDate.setFullYear(scheduledMaxDate.getFullYear() + 1);\n\n  return (\n    <div className={buildClassName('ContextMenuContainer', transitionClassNames)}>\n      <MessageContextMenu\n        isReactionPickerOpen={isReactionPickerOpen}\n        availableReactions={availableReactions}\n        topReactions={topReactions}\n        defaultTagReactions={defaultTagReactions}\n        message={message}\n        isPrivate={isPrivate}\n        isCurrentUserPremium={isCurrentUserPremium}\n        canBuyPremium={canBuyPremium}\n        isOpen={isMenuOpen}\n        enabledReactions={enabledReactions}\n        maxUniqueReactions={maxUniqueReactions}\n        anchor={anchor}\n        targetHref={targetHref}\n        canShowReactionsCount={canShowReactionsCount}\n        canShowReactionList={canShowReactionList}\n        canSendNow={canSendNow}\n        canReschedule={canReschedule}\n        canReply={canReply}\n        canQuote={canQuoteSelection}\n        canDelete={canDelete}\n        canReport={canReport}\n        canPin={canPin}\n        repliesThreadInfo={repliesThreadInfo}\n        canUnpin={canUnpin}\n        canEdit={canEdit}\n        canForward={canForward}\n        canFaveSticker={canFaveSticker}\n        canUnfaveSticker={canUnfaveSticker}\n        canCopy={canCopy}\n        canCopyLink={canCopyLink}\n        canSelect={canSelect}\n        canDownload={canDownload}\n        canSaveGif={canSaveGif}\n        canRevote={canRevote}\n        canClosePoll={canClosePoll}\n        canShowSeenBy={canShowSeenBy}\n        canTranslate={canTranslate}\n        canShowOriginal={canShowOriginal}\n        canSelectLanguage={canSelectLanguage}\n        canPlayAnimatedEmojis={canPlayAnimatedEmojis}\n        shouldRenderShowWhen={shouldRenderShowWhen}\n        canLoadReadDate={canLoadReadDate}\n        hasCustomEmoji={hasCustomEmoji}\n        customEmojiSets={customEmojiSets}\n        isDownloading={isDownloading}\n        seenByRecentPeers={seenByRecentPeers}\n        isInSavedMessages={isInSavedMessages}\n        noReplies={noReplies}\n        onOpenThread={handleOpenThread}\n        onReply={handleReply}\n        onEdit={handleEdit}\n        onPin={handlePin}\n        onUnpin={handleUnpin}\n        onForward={handleForward}\n        onDelete={handleDelete}\n        onReport={handleReport}\n        onFaveSticker={handleFaveSticker}\n        onUnfaveSticker={handleUnfaveSticker}\n        onSelect={handleSelectMessage}\n        onSend={handleScheduledMessageSend}\n        onReschedule={handleOpenCalendar}\n        onClose={closeMenu}\n        onCopyLink={handleCopyLink}\n        onCopyMessages={handleCopyMessages}\n        onCopyNumber={handleCopyNumber}\n        onDownload={handleDownloadClick}\n        onSaveGif={handleSaveGif}\n        onCancelVote={handleCancelVote}\n        onClosePoll={openClosePollDialog}\n        onShowSeenBy={handleOpenSeenByModal}\n        onToggleReaction={handleToggleReaction}\n        onShowReactors={handleOpenReactorListModal}\n        onReactionPickerOpen={handleReactionPickerOpen}\n        onTranslate={handleTranslate}\n        onShowOriginal={handleShowOriginal}\n        onSelectLanguage={handleSelectLanguage}\n      />\n      <DeleteMessageModal\n        isOpen={isDeleteModalOpen}\n        isSchedule={messageListType === 'scheduled'}\n        onClose={closeDeleteModal}\n        album={album}\n        message={message}\n      />\n      <ReportModal\n        isOpen={isReportModalOpen}\n        onClose={closeReportModal}\n        messageIds={reportMessageIds}\n      />\n      <PinMessageModal\n        isOpen={isPinModalOpen}\n        messageId={message.id}\n        chatId={message.chatId}\n        onClose={closePinModal}\n      />\n      <ConfirmDialog\n        isOpen={isClosePollDialogOpen}\n        onClose={closeClosePollDialog}\n        text={lang('lng_polls_stop_warning')}\n        confirmLabel={lang('lng_polls_stop_sure')}\n        confirmHandler={handlePollClose}\n      />\n      {canReschedule && calendar}\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { message, messageListType, detectedLanguage }): StateProps => {\n    const { threadId } = selectCurrentMessageList(global) || {};\n\n    const { defaultTags, topReactions, availableReactions } = global.reactions;\n\n    const activeDownloads = selectActiveDownloads(global);\n    const chat = selectChat(global, message.chatId);\n    const {\n      seenByExpiresAt, seenByMaxChatMembers, maxUniqueReactions, readDateExpiresAt,\n    } = global.appConfig || {};\n    const {\n      noOptions,\n      canReply,\n      canPin,\n      canUnpin,\n      canDelete,\n      canReport,\n      canEdit,\n      canForward,\n      canFaveSticker,\n      canUnfaveSticker,\n      canCopy,\n      canCopyLink,\n      canSelect,\n      canDownload,\n      canSaveGif,\n      canRevote,\n      canClosePoll,\n    } = (threadId && selectAllowedMessageActions(global, message, threadId)) || {};\n\n    const isPrivate = chat && isUserId(chat.id);\n    const userStatus = isPrivate ? selectUserStatus(global, chat.id) : undefined;\n    const isOwn = isOwnMessage(message);\n    const isMessageUnread = selectIsMessageUnread(global, message);\n    const canLoadReadDate = Boolean(\n      isPrivate\n        && isOwn\n        && !isMessageUnread\n        && readDateExpiresAt\n        && message.date > Date.now() / 1000 - readDateExpiresAt\n        && !userStatus?.isReadDateRestricted\n        && messageListType !== 'scheduled',\n    );\n    const shouldRenderShowWhen = Boolean(\n      canLoadReadDate && isPrivate && selectUserStatus(global, chat.id)?.isReadDateRestrictedByMe,\n    );\n    const isPinned = messageListType === 'pinned';\n    const isScheduled = messageListType === 'scheduled';\n    const isChannel = chat && isChatChannel(chat);\n    const isLocal = isMessageLocal(message);\n    const hasTtl = hasMessageTtl(message);\n    const canShowSeenBy = Boolean(!isLocal\n      && chat\n      && !isMessageUnread\n      && seenByMaxChatMembers\n      && seenByExpiresAt\n      && isChatGroup(chat)\n      && isOwn\n      && !isScheduled\n      && chat.membersCount\n      && chat.membersCount <= seenByMaxChatMembers\n      && message.date > Date.now() / 1000 - seenByExpiresAt);\n    const isAction = isActionMessage(message);\n    const chatFullInfo = !isPrivate ? selectChatFullInfo(global, message.chatId) : undefined;\n    const canShowReactionsCount = !isLocal && !isChannel && !isScheduled && !isAction && !isPrivate && message.reactions\n      && !areReactionsEmpty(message.reactions) && message.reactions.canSeeList;\n    const isProtected = selectIsMessageProtected(global, message);\n    const canCopyNumber = Boolean(message.content.contact);\n    const isCurrentUserPremium = selectIsCurrentUserPremium(global);\n\n    const customEmojiSetsInfo = selectMessageCustomEmojiSets(global, message);\n    const customEmojiSetsNotFiltered = customEmojiSetsInfo?.map((set) => selectStickerSet(global, set));\n    const customEmojiSets = customEmojiSetsNotFiltered?.every<ApiStickerSet>(Boolean)\n      ? customEmojiSetsNotFiltered : undefined;\n\n    const translationRequestLanguage = selectRequestedMessageTranslationLanguage(global, message.chatId, message.id);\n    const hasTranslation = translationRequestLanguage\n      ? Boolean(selectMessageTranslations(global, message.chatId, translationRequestLanguage)[message.id]?.text)\n      : undefined;\n    const canTranslate = !hasTranslation && selectCanTranslateMessage(global, message, detectedLanguage);\n    const isChatTranslated = selectRequestedChatTranslationLanguage(global, message.chatId);\n\n    const isInSavedMessages = selectIsChatWithSelf(global, message.chatId);\n\n    return {\n      threadId,\n      availableReactions,\n      topReactions,\n      defaultTagReactions: defaultTags,\n      noOptions,\n      canSendNow: isScheduled,\n      canReschedule: isScheduled,\n      canReply: !isPinned && !isScheduled && canReply,\n      canPin: !isScheduled && canPin,\n      canUnpin: !isScheduled && canUnpin,\n      canDelete,\n      canReport,\n      canEdit: !isPinned && canEdit,\n      canForward: !isScheduled && canForward,\n      canFaveSticker: !isScheduled && canFaveSticker,\n      canUnfaveSticker: !isScheduled && canUnfaveSticker,\n      canCopy: (canCopyNumber || (!isProtected && canCopy)),\n      canCopyLink: !isScheduled && canCopyLink,\n      canSelect,\n      canDownload: !isProtected && canDownload,\n      canSaveGif: !isProtected && canSaveGif,\n      canRevote,\n      canClosePoll: !isScheduled && canClosePoll,\n      activeDownloads,\n      canShowSeenBy,\n      canLoadReadDate,\n      shouldRenderShowWhen,\n      enabledReactions: chat?.isForbidden ? undefined : chatFullInfo?.enabledReactions,\n      maxUniqueReactions,\n      isPrivate,\n      isCurrentUserPremium,\n      hasFullInfo: Boolean(chatFullInfo),\n      canShowReactionsCount,\n      canShowReactionList: !isLocal && !isAction\n        && !isScheduled && chat?.id !== SERVICE_NOTIFICATIONS_USER_ID && !hasTtl,\n      canBuyPremium: !isCurrentUserPremium && !selectIsPremiumPurchaseBlocked(global),\n      customEmojiSetsInfo,\n      customEmojiSets,\n      canScheduleUntilOnline: selectCanScheduleUntilOnline(global, message.chatId),\n      canTranslate,\n      canShowOriginal: hasTranslation && !isChatTranslated,\n      canSelectLanguage: hasTranslation && !isChatTranslated,\n      isMessageTranslated: hasTranslation,\n      canPlayAnimatedEmojis: selectCanPlayAnimatedEmojis(global),\n      isReactionPickerOpen: selectIsReactionPickerOpen(global),\n      isInSavedMessages,\n    };\n  },\n)(ContextMenuContainer));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useRef,\n} from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type {\n  ApiAvailableReaction,\n  ApiChat,\n  ApiChatReactions,\n  ApiMessage,\n  ApiPeer,\n  ApiReaction,\n  ApiSponsoredMessage,\n  ApiStickerSet,\n  ApiThreadInfo,\n  ApiUser,\n} from '../../../api/types';\nimport type { IAnchorPosition } from '../../../types';\n\nimport { getUserFullName, isUserId } from '../../../global/helpers';\nimport buildClassName from '../../../util/buildClassName';\nimport { disableScrolling, enableScrolling } from '../../../util/scrollLock';\nimport { REM } from '../../common/helpers/mediaDimensions';\nimport renderText from '../../common/helpers/renderText';\nimport { getMessageCopyOptions } from './helpers/copyOptions';\n\nimport useAppLayout from '../../../hooks/useAppLayout';\nimport useFlag from '../../../hooks/useFlag';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useMenuPosition from '../../../hooks/useMenuPosition';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport AvatarList from '../../common/AvatarList';\nimport Menu from '../../ui/Menu';\nimport MenuItem from '../../ui/MenuItem';\nimport MenuSeparator from '../../ui/MenuSeparator';\nimport Skeleton from '../../ui/placeholder/Skeleton';\nimport ReactionSelector from './reactions/ReactionSelector';\nimport ReadTimeMenuItem from './ReadTimeMenuItem';\n\nimport './MessageContextMenu.scss';\n\ntype OwnProps = {\n  isReactionPickerOpen?: boolean;\n  availableReactions?: ApiAvailableReaction[];\n  topReactions?: ApiReaction[];\n  defaultTagReactions?: ApiReaction[];\n  isOpen: boolean;\n  anchor: IAnchorPosition;\n  targetHref?: string;\n  message: ApiMessage | ApiSponsoredMessage;\n  canSendNow?: boolean;\n  enabledReactions?: ApiChatReactions;\n  maxUniqueReactions?: number;\n  canReschedule?: boolean;\n  canReply?: boolean;\n  canQuote?: boolean;\n  repliesThreadInfo?: ApiThreadInfo;\n  canPin?: boolean;\n  canUnpin?: boolean;\n  canDelete?: boolean;\n  canReport?: boolean;\n  canShowReactionsCount?: boolean;\n  canShowReactionList?: boolean;\n  canBuyPremium?: boolean;\n  canEdit?: boolean;\n  canForward?: boolean;\n  canFaveSticker?: boolean;\n  canUnfaveSticker?: boolean;\n  canCopy?: boolean;\n  canCopyLink?: boolean;\n  canSelect?: boolean;\n  canTranslate?: boolean;\n  canShowOriginal?: boolean;\n  canSelectLanguage?: boolean;\n  isPrivate?: boolean;\n  isCurrentUserPremium?: boolean;\n  canDownload?: boolean;\n  canSaveGif?: boolean;\n  canRevote?: boolean;\n  canClosePoll?: boolean;\n  isDownloading?: boolean;\n  canShowSeenBy?: boolean;\n  seenByRecentPeers?: ApiPeer[];\n  noReplies?: boolean;\n  hasCustomEmoji?: boolean;\n  customEmojiSets?: ApiStickerSet[];\n  canPlayAnimatedEmojis?: boolean;\n  noTransition?: boolean;\n  isInSavedMessages?: boolean;\n  shouldRenderShowWhen?: boolean;\n  canLoadReadDate?: boolean;\n  onReply?: NoneToVoidFunction;\n  onOpenThread?: VoidFunction;\n  onEdit?: NoneToVoidFunction;\n  onPin?: NoneToVoidFunction;\n  onUnpin?: NoneToVoidFunction;\n  onForward?: NoneToVoidFunction;\n  onDelete?: NoneToVoidFunction;\n  onReport?: NoneToVoidFunction;\n  onFaveSticker?: NoneToVoidFunction;\n  onUnfaveSticker?: NoneToVoidFunction;\n  onSelect?: NoneToVoidFunction;\n  onSend?: NoneToVoidFunction;\n  onReschedule?: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n  onCloseAnimationEnd?: NoneToVoidFunction;\n  onCopyLink?: NoneToVoidFunction;\n  onCopyMessages?: (messageIds: number[]) => void;\n  onCopyNumber?: NoneToVoidFunction;\n  onDownload?: NoneToVoidFunction;\n  onSaveGif?: NoneToVoidFunction;\n  onCancelVote?: NoneToVoidFunction;\n  onClosePoll?: NoneToVoidFunction;\n  onShowSeenBy?: NoneToVoidFunction;\n  onShowReactors?: NoneToVoidFunction;\n  onAboutAds?: NoneToVoidFunction;\n  onSponsoredHide?: NoneToVoidFunction;\n  onSponsorInfo?: NoneToVoidFunction;\n  onSponsoredReport?: NoneToVoidFunction;\n  onTranslate?: NoneToVoidFunction;\n  onShowOriginal?: NoneToVoidFunction;\n  onSelectLanguage?: NoneToVoidFunction;\n  onToggleReaction?: (reaction: ApiReaction) => void;\n  onReactionPickerOpen?: (position: IAnchorPosition) => void;\n};\n\nconst SCROLLBAR_WIDTH = 10;\nconst REACTION_SELECTOR_WIDTH_REM = 19.25;\nconst ANIMATION_DURATION = 200;\n\nconst MessageContextMenu: FC<OwnProps> = ({\n  isReactionPickerOpen,\n  availableReactions,\n  topReactions,\n  defaultTagReactions,\n  isOpen,\n  message,\n  isPrivate,\n  isCurrentUserPremium,\n  enabledReactions,\n  maxUniqueReactions,\n  anchor,\n  targetHref,\n  canSendNow,\n  canReschedule,\n  canBuyPremium,\n  canReply,\n  canQuote,\n  canEdit,\n  noReplies,\n  canPin,\n  canUnpin,\n  canDelete,\n  canReport,\n  canForward,\n  canFaveSticker,\n  canUnfaveSticker,\n  canCopy,\n  canCopyLink,\n  canSelect,\n  canDownload,\n  canSaveGif,\n  canRevote,\n  canClosePoll,\n  canTranslate,\n  canShowOriginal,\n  canSelectLanguage,\n  isDownloading,\n  repliesThreadInfo,\n  canShowSeenBy,\n  canShowReactionsCount,\n  canShowReactionList,\n  seenByRecentPeers,\n  hasCustomEmoji,\n  customEmojiSets,\n  canPlayAnimatedEmojis,\n  noTransition,\n  isInSavedMessages,\n  shouldRenderShowWhen,\n  canLoadReadDate,\n  onReply,\n  onOpenThread,\n  onEdit,\n  onPin,\n  onUnpin,\n  onForward,\n  onDelete,\n  onReport,\n  onFaveSticker,\n  onUnfaveSticker,\n  onSelect,\n  onSend,\n  onReschedule,\n  onClose,\n  onCloseAnimationEnd,\n  onCopyLink,\n  onCopyNumber,\n  onDownload,\n  onSaveGif,\n  onCancelVote,\n  onClosePoll,\n  onShowSeenBy,\n  onShowReactors,\n  onToggleReaction,\n  onCopyMessages,\n  onAboutAds,\n  onSponsoredHide,\n  onSponsorInfo,\n  onSponsoredReport,\n  onReactionPickerOpen,\n  onTranslate,\n  onShowOriginal,\n  onSelectLanguage,\n}) => {\n  const { showNotification, openStickerSet, openCustomEmojiSets } = getActions();\n  // eslint-disable-next-line no-null/no-null\n  const menuRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const scrollableRef = useRef<HTMLDivElement>(null);\n  const lang = useOldLang();\n  const noReactions = !isPrivate && !enabledReactions;\n  const withReactions = canShowReactionList && !noReactions;\n  const isSponsoredMessage = !('id' in message);\n  const messageId = !isSponsoredMessage ? message.id : '';\n  const seenByDates = !isSponsoredMessage ? message.seenByDates : undefined;\n\n  const [areItemsHidden, hideItems] = useFlag();\n  const [isReady, markIsReady, unmarkIsReady] = useFlag();\n  const { isMobile, isDesktop } = useAppLayout();\n  const seenByDatesCount = useMemo(() => (seenByDates ? Object.keys(seenByDates).length : 0), [seenByDates]);\n\n  const handleAfterCopy = useLastCallback(() => {\n    showNotification({\n      message: lang('Share.Link.Copied'),\n    });\n    onClose();\n  });\n\n  useEffect(() => {\n    if (isOpen && areItemsHidden && !isReactionPickerOpen) {\n      onClose();\n    }\n  }, [onClose, isOpen, isReactionPickerOpen, areItemsHidden]);\n\n  const handleOpenCustomEmojiSets = useLastCallback(() => {\n    if (!customEmojiSets) return;\n    if (customEmojiSets.length === 1) {\n      openStickerSet({\n        stickerSetInfo: {\n          shortName: customEmojiSets[0].shortName,\n        },\n      });\n    } else {\n      openCustomEmojiSets({\n        setIds: customEmojiSets.map((set) => set.id),\n      });\n    }\n    onClose();\n  });\n\n  const copyOptions = isSponsoredMessage\n    ? []\n    : getMessageCopyOptions(\n      message,\n      targetHref,\n      canCopy,\n      handleAfterCopy,\n      canCopyLink ? onCopyLink : undefined,\n      onCopyMessages,\n      onCopyNumber,\n    );\n\n  const getTriggerElement = useLastCallback(() => {\n    return isSponsoredMessage\n      ? document.querySelector('.Transition_slide-active > .MessageList .SponsoredMessage')\n      : document.querySelector(`.Transition_slide-active > .MessageList div[data-message-id=\"${messageId}\"]`);\n  });\n\n  const getRootElement = useLastCallback(() => document.querySelector('.Transition_slide-active > .MessageList'));\n\n  const getMenuElement = useLastCallback(() => document.querySelector('.MessageContextMenu .bubble'));\n\n  const getLayout = useLastCallback(() => {\n    const extraHeightAudioPlayer = (isMobile\n      && (document.querySelector<HTMLElement>('.AudioPlayer-content'))?.offsetHeight) || 0;\n    const pinnedElement = document.querySelector<HTMLElement>('.HeaderPinnedMessageWrapper');\n    const extraHeightPinned = (((isMobile && !extraHeightAudioPlayer)\n        || (!isMobile && pinnedElement?.classList.contains('full-width')))\n      && pinnedElement?.offsetHeight) || 0;\n\n    return {\n      extraPaddingX: SCROLLBAR_WIDTH,\n      extraTopPadding: (document.querySelector<HTMLElement>('.MiddleHeader')!).offsetHeight,\n      extraMarginTop: extraHeightPinned + extraHeightAudioPlayer,\n      shouldAvoidNegativePosition: !isDesktop,\n      menuElMinWidth: withReactions && isMobile ? REACTION_SELECTOR_WIDTH_REM * REM : undefined,\n    };\n  });\n\n  useEffect(() => {\n    if (!isOpen) {\n      unmarkIsReady();\n      return;\n    }\n\n    setTimeout(() => {\n      markIsReady();\n    }, ANIMATION_DURATION);\n  }, [isOpen, markIsReady, unmarkIsReady]);\n\n  const {\n    positionX, positionY, transformOriginX, transformOriginY, style, menuStyle, withScroll,\n  } = useMenuPosition(anchor, getTriggerElement, getRootElement, getMenuElement, getLayout);\n\n  useEffect(() => {\n    disableScrolling(withScroll ? scrollableRef.current : undefined, '.ReactionPicker');\n\n    return enableScrolling;\n  }, [withScroll]);\n\n  const handleOpenMessageReactionPicker = useLastCallback((position: IAnchorPosition) => {\n    onReactionPickerOpen!(position);\n    hideItems();\n  });\n\n  return (\n    <Menu\n      ref={menuRef}\n      isOpen={isOpen}\n      transformOriginX={transformOriginX}\n      transformOriginY={transformOriginY}\n      positionX={positionX}\n      positionY={positionY}\n      style={style}\n      bubbleStyle={menuStyle}\n      className={buildClassName(\n        'MessageContextMenu', 'fluid', withReactions && 'with-reactions',\n      )}\n      shouldSkipTransition={noTransition}\n      onClose={onClose}\n      onCloseAnimationEnd={onCloseAnimationEnd}\n    >\n      {withReactions && (\n        <ReactionSelector\n          enabledReactions={enabledReactions}\n          topReactions={topReactions}\n          allAvailableReactions={availableReactions}\n          defaultTagReactions={defaultTagReactions}\n          currentReactions={!isSponsoredMessage ? message.reactions?.results : undefined}\n          maxUniqueReactions={maxUniqueReactions}\n          onToggleReaction={onToggleReaction!}\n          isPrivate={isPrivate}\n          isReady={isReady}\n          canBuyPremium={canBuyPremium}\n          isCurrentUserPremium={isCurrentUserPremium}\n          isInSavedMessages={isInSavedMessages}\n          canPlayAnimatedEmojis={canPlayAnimatedEmojis}\n          onShowMore={handleOpenMessageReactionPicker}\n          onClose={onClose}\n          className={buildClassName(areItemsHidden && 'ReactionSelector-hidden')}\n        />\n      )}\n\n      <div\n        className={buildClassName(\n          'MessageContextMenu_items scrollable-content custom-scroll',\n          areItemsHidden && 'MessageContextMenu_items-hidden',\n        )}\n        style={menuStyle}\n        dir={lang.isRtl ? 'rtl' : undefined}\n        ref={scrollableRef}\n      >\n        {canSendNow && <MenuItem icon=\"send-outline\" onClick={onSend}>{lang('MessageScheduleSend')}</MenuItem>}\n        {canReschedule && (\n          <MenuItem icon=\"schedule\" onClick={onReschedule}>{lang('MessageScheduleEditTime')}</MenuItem>\n        )}\n        {canReply && (\n          <MenuItem icon=\"reply\" onClick={onReply}>\n            {lang(canQuote ? 'lng_context_quote_and_reply' : 'Reply')}\n          </MenuItem>\n        )}\n        {!noReplies && Boolean(repliesThreadInfo?.messagesCount) && (\n          <MenuItem icon=\"replies\" onClick={onOpenThread}>\n            {lang('Conversation.ContextViewReplies', repliesThreadInfo!.messagesCount, 'i')}\n          </MenuItem>\n        )}\n        {canEdit && <MenuItem icon=\"edit\" onClick={onEdit}>{lang('Edit')}</MenuItem>}\n        {canFaveSticker && (\n          <MenuItem icon=\"favorite\" onClick={onFaveSticker}>{lang('AddToFavorites')}</MenuItem>\n        )}\n        {canUnfaveSticker && (\n          <MenuItem icon=\"favorite\" onClick={onUnfaveSticker}>{lang('Stickers.RemoveFromFavorites')}</MenuItem>\n        )}\n        {canTranslate && <MenuItem icon=\"language\" onClick={onTranslate}>{lang('TranslateMessage')}</MenuItem>}\n        {canShowOriginal && <MenuItem icon=\"language\" onClick={onShowOriginal}>{lang('ShowOriginalButton')}</MenuItem>}\n        {canSelectLanguage && (\n          <MenuItem icon=\"web\" onClick={onSelectLanguage}>{lang('lng_settings_change_lang')}</MenuItem>\n        )}\n        {copyOptions.map((option) => (\n          <MenuItem\n            key={option.label}\n            icon={option.icon}\n            onClick={option.handler}\n            withPreventDefaultOnMouseDown\n          >{lang(option.label)}\n          </MenuItem>\n        ))}\n        {canPin && <MenuItem icon=\"pin\" onClick={onPin}>{lang('DialogPin')}</MenuItem>}\n        {canUnpin && <MenuItem icon=\"unpin\" onClick={onUnpin}>{lang('DialogUnpin')}</MenuItem>}\n        {canSaveGif && <MenuItem icon=\"gifs\" onClick={onSaveGif}>{lang('lng_context_save_gif')}</MenuItem>}\n        {canRevote && <MenuItem icon=\"revote\" onClick={onCancelVote}>{lang('lng_polls_retract')}</MenuItem>}\n        {canClosePoll && <MenuItem icon=\"stop\" onClick={onClosePoll}>{lang('lng_polls_stop')}</MenuItem>}\n        {canDownload && (\n          <MenuItem icon=\"download\" onClick={onDownload}>\n            {isDownloading ? lang('lng_context_cancel_download') : lang('lng_media_download')}\n          </MenuItem>\n        )}\n        {canForward && <MenuItem icon=\"forward\" onClick={onForward}>{lang('Forward')}</MenuItem>}\n        {canSelect && <MenuItem icon=\"select\" onClick={onSelect}>{lang('Common.Select')}</MenuItem>}\n        {canReport && <MenuItem icon=\"flag\" onClick={onReport}>{lang('lng_context_report_msg')}</MenuItem>}\n        {canDelete && <MenuItem destructive icon=\"delete\" onClick={onDelete}>{lang('Delete')}</MenuItem>}\n        {hasCustomEmoji && (\n          <>\n            <MenuSeparator size=\"thick\" />\n            {!customEmojiSets && (\n              <>\n                <Skeleton inline className=\"menu-loading-row\" />\n                <Skeleton inline className=\"menu-loading-row\" />\n              </>\n            )}\n            {customEmojiSets && customEmojiSets.length === 1 && (\n              <MenuItem withWrap onClick={handleOpenCustomEmojiSets} className=\"menu-custom-emoji-sets\">\n                {renderText(lang('MessageContainsEmojiPack', customEmojiSets[0].title), ['simple_markdown', 'emoji'])}\n              </MenuItem>\n            )}\n            {customEmojiSets && customEmojiSets.length > 1 && (\n              <MenuItem withWrap onClick={handleOpenCustomEmojiSets} className=\"menu-custom-emoji-sets\">\n                {renderText(lang('MessageContainsEmojiPacks', customEmojiSets.length), ['simple_markdown'])}\n              </MenuItem>\n            )}\n          </>\n        )}\n        {isSponsoredMessage && message.sponsorInfo && (\n          <MenuItem icon=\"channel\" onClick={onSponsorInfo}>{lang('SponsoredMessageSponsor')}</MenuItem>\n        )}\n        {isSponsoredMessage && (\n          <MenuItem icon=\"info\" onClick={onAboutAds}>\n            {lang(message.canReport ? 'AboutRevenueSharingAds' : 'SponsoredMessageInfo')}\n          </MenuItem>\n        )}\n        {isSponsoredMessage && message.canReport && (\n          <MenuItem icon=\"hand-stop\" onClick={onSponsoredReport}>\n            {lang('ReportAd')}\n          </MenuItem>\n        )}\n        {isSponsoredMessage && onSponsoredHide && (\n          <>\n            <MenuSeparator />\n            <MenuItem icon=\"close-circle\" onClick={onSponsoredHide}>{lang('HideAd')}</MenuItem>\n          </>\n        )}\n        {(canShowSeenBy || canShowReactionsCount) && !isSponsoredMessage && (\n          <>\n            <MenuSeparator size={hasCustomEmoji ? 'thin' : 'thick'} />\n            <MenuItem\n              icon={canShowReactionsCount ? 'heart-outline' : 'group'}\n              onClick={canShowReactionsCount ? onShowReactors : onShowSeenBy}\n              disabled={!canShowReactionsCount && !seenByDatesCount}\n            >\n              <span className=\"MessageContextMenu--seen-by-label-wrapper\">\n                <span className=\"MessageContextMenu--seen-by-label\" dir={lang.isRtl ? 'rtl' : undefined}>\n                  {canShowReactionsCount && message.reactors?.count ? (\n                    canShowSeenBy && seenByDatesCount\n                      ? lang(\n                        'Chat.OutgoingContextMixedReactionCount',\n                        [message.reactors.count, seenByDatesCount],\n                      )\n                      : lang('Chat.ContextReactionCount', message.reactors.count, 'i')\n                  ) : (\n                    seenByDatesCount === 1 && seenByRecentPeers\n                      ? renderText(\n                        isUserId(seenByRecentPeers[0].id)\n                          ? getUserFullName(seenByRecentPeers[0] as ApiUser)!\n                          : (seenByRecentPeers[0] as ApiChat).title,\n                      ) : (\n                        seenByDatesCount\n                          ? lang('Conversation.ContextMenuSeen', seenByDatesCount, 'i')\n                          : lang('Conversation.ContextMenuNoViews')\n                      )\n                  )}\n                </span>\n              </span>\n              <AvatarList className=\"avatars\" size=\"micro\" peers={seenByRecentPeers} />\n            </MenuItem>\n          </>\n        )}\n        {!isSponsoredMessage && (canLoadReadDate || shouldRenderShowWhen) && (\n          <ReadTimeMenuItem\n            canLoadReadDate={canLoadReadDate}\n            shouldRenderShowWhen={shouldRenderShowWhen}\n            message={message}\n            menuSeparatorSize={hasCustomEmoji ? 'thin' : 'thick'}\n            closeContextMenu={onClose}\n          />\n        )}\n      </div>\n    </Menu>\n  );\n};\n\nexport default memo(MessageContextMenu);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../lib/teact/teactn';\n\nimport type { ApiMessage } from '../../../api/types';\n\nimport { formatDateAtTime } from '../../../util/dates/dateFormat';\n\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport MenuItem from '../../ui/MenuItem';\nimport MenuSeparator from '../../ui/MenuSeparator';\nimport Skeleton from '../../ui/placeholder/Skeleton';\nimport Transition from '../../ui/Transition';\n\nimport styles from './ReadTimeMenuItem.module.scss';\n\ntype OwnProps = {\n  message: ApiMessage;\n  shouldRenderShowWhen?: boolean;\n  canLoadReadDate?: boolean;\n  menuSeparatorSize: 'thin' | 'thick';\n  closeContextMenu: NoneToVoidFunction;\n};\n\nfunction ReadTimeMenuItem({\n  message, shouldRenderShowWhen, canLoadReadDate, closeContextMenu, menuSeparatorSize,\n}: OwnProps) {\n  const { openPrivacySettingsNoticeModal } = getActions();\n  const lang = useOldLang();\n  const { readDate } = message;\n  const shouldRenderSkeleton = canLoadReadDate && !readDate && !shouldRenderShowWhen;\n\n  const handleOpenModal = () => {\n    closeContextMenu();\n    openPrivacySettingsNoticeModal({ chatId: message.chatId, isReadDate: true });\n  };\n\n  return (\n    <>\n      <MenuSeparator size={menuSeparatorSize} />\n      <MenuItem icon=\"message-read\" className={styles.item}>\n        <Transition name=\"fade\" activeKey={shouldRenderSkeleton ? 1 : 2} className={styles.transition}>\n          {shouldRenderSkeleton ? <Skeleton className={styles.skeleton} /> : (\n            <>\n              {Boolean(readDate) && lang('PmReadAt', formatDateAtTime(lang, readDate * 1000))}\n              {!readDate && shouldRenderShowWhen && (\n                <div>\n                  {lang('PmRead')}\n                  <span className={styles.get} onClick={handleOpenModal}>\n                    {lang('PmReadShowWhen')}\n                  </span>\n                </div>\n              )}\n            </>\n          )}\n        </Transition>\n      </MenuItem>\n    </>\n  );\n}\n\nexport default memo(ReadTimeMenuItem);\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { ApiSponsoredMessage } from '../../../api/types';\nimport type { IAnchorPosition } from '../../../types';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useShowTransition from '../../../hooks/useShowTransition';\n\nimport MessageContextMenu from './MessageContextMenu';\n\nexport type OwnProps = {\n  isOpen: boolean;\n  message: ApiSponsoredMessage;\n  anchor: IAnchorPosition;\n  onAboutAds: NoneToVoidFunction;\n  onReportAd: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n  onCloseAnimationEnd: NoneToVoidFunction;\n};\n\nconst SponsoredMessageContextMenuContainer: FC<OwnProps> = ({\n  message,\n  anchor,\n  onAboutAds,\n  onReportAd,\n  onClose,\n  onCloseAnimationEnd,\n}) => {\n  const { openPremiumModal, showDialog } = getActions();\n\n  const [isMenuOpen, , closeMenu] = useFlag(true);\n  const { transitionClassNames } = useShowTransition(isMenuOpen, onCloseAnimationEnd, undefined, false);\n\n  const handleAboutAdsOpen = useLastCallback(() => {\n    onAboutAds();\n    closeMenu();\n  });\n\n  const handleSponsoredHide = useLastCallback(() => {\n    closeMenu();\n    openPremiumModal();\n    onClose();\n  });\n\n  const handleSponsorInfo = useLastCallback(() => {\n    closeMenu();\n    showDialog({\n      data: {\n        message: [message.sponsorInfo, message.additionalInfo].join('\\n'),\n      },\n    });\n  });\n\n  const handleReportSponsoredMessage = useLastCallback(() => {\n    closeMenu();\n    onReportAd();\n  });\n\n  if (!anchor) {\n    return undefined;\n  }\n\n  return (\n    <div className={buildClassName('ContextMenuContainer', transitionClassNames)}>\n      <MessageContextMenu\n        isOpen={isMenuOpen}\n        anchor={anchor}\n        message={message}\n        onClose={closeMenu}\n        onCloseAnimationEnd={closeMenu}\n        onAboutAds={handleAboutAdsOpen}\n        onSponsoredHide={handleSponsoredHide}\n        onSponsorInfo={handleSponsorInfo}\n        onSponsoredReport={handleReportSponsoredMessage}\n      />\n    </div>\n  );\n};\n\nexport default memo(SponsoredMessageContextMenuContainer);\n","import type { ApiMessage } from '../../../../api/types';\nimport type { IconName } from '../../../../types/icons';\nimport { ApiMediaFormat } from '../../../../api/types';\n\nimport {\n  getMessageContact,\n  getMessageHtmlId,\n  getMessagePhoto,\n  getMessageText,\n  getMessageWebPagePhoto,\n  getMessageWebPageVideo,\n  getPhotoMediaHash,\n  hasMediaLocalBlobUrl,\n} from '../../../../global/helpers';\nimport { getMessageTextWithSpoilers } from '../../../../global/helpers/messageSummary';\nimport {\n  CLIPBOARD_ITEM_SUPPORTED,\n  copyHtmlToClipboard,\n  copyImageToClipboard,\n  copyTextToClipboard,\n} from '../../../../util/clipboard';\nimport getMessageIdsForSelectedText from '../../../../util/getMessageIdsForSelectedText';\nimport * as mediaLoader from '../../../../util/mediaLoader';\nimport { IS_SAFARI } from '../../../../util/windowEnvironment';\nimport { renderMessageText } from '../../../common/helpers/renderMessageText';\n\ntype ICopyOptions = {\n  label: string;\n  icon: IconName;\n  handler: () => void;\n}[];\n\nexport function getMessageCopyOptions(\n  message: ApiMessage,\n  href?: string,\n  canCopy?: boolean,\n  afterEffect?: () => void,\n  onCopyLink?: () => void,\n  onCopyMessages?: (messageIds: number[]) => void,\n  onCopyNumber?: () => void,\n): ICopyOptions {\n  const options: ICopyOptions = [];\n  const text = getMessageText(message);\n  const photo = getMessagePhoto(message)\n    || (!getMessageWebPageVideo(message) ? getMessageWebPagePhoto(message) : undefined);\n  const contact = getMessageContact(message);\n  const mediaHash = photo ? getPhotoMediaHash(photo, 'inline') : undefined;\n  const canImageBeCopied = canCopy && photo && (mediaHash || hasMediaLocalBlobUrl(photo))\n    && CLIPBOARD_ITEM_SUPPORTED && !IS_SAFARI;\n  const selection = window.getSelection();\n\n  if (canImageBeCopied) {\n    options.push({\n      label: 'lng_context_copy_image',\n      icon: 'copy-media',\n      handler: () => {\n        Promise.resolve(mediaHash ? mediaLoader.fetch(mediaHash, ApiMediaFormat.BlobUrl) : photo!.blobUrl)\n          .then(copyImageToClipboard);\n\n        afterEffect?.();\n      },\n    });\n  }\n\n  if (canCopy && href) {\n    options.push({\n      label: 'lng_context_copy_link',\n      icon: 'copy',\n      handler: () => {\n        copyTextToClipboard(href);\n\n        afterEffect?.();\n      },\n    });\n  } else if (canCopy && text) {\n    // Detect if the user has selection in the current message\n    const hasSelection = Boolean((\n      selection?.anchorNode?.parentNode\n      && (selection.anchorNode.parentNode as HTMLElement).closest('.Message .content-inner')\n      && selection.toString().replace(/(?:\\r\\n|\\r|\\n)/g, '') !== ''\n      && checkMessageHasSelection(message)\n    ));\n\n    options.push({\n      label: getCopyLabel(hasSelection),\n      icon: 'copy',\n      handler: () => {\n        const messageIds = getMessageIdsForSelectedText();\n        if (messageIds?.length && onCopyMessages) {\n          onCopyMessages(messageIds);\n        } else if (hasSelection) {\n          document.execCommand('copy');\n        } else {\n          const clipboardText = renderMessageText(\n            { message, shouldRenderAsHtml: true },\n          );\n          if (clipboardText) copyHtmlToClipboard(clipboardText.join(''), getMessageTextWithSpoilers(message)!);\n        }\n\n        afterEffect?.();\n      },\n    });\n  }\n\n  if (onCopyLink) {\n    options.push({\n      label: 'lng_context_copy_message_link',\n      icon: 'link',\n      handler: onCopyLink,\n    });\n  }\n\n  if (contact && onCopyNumber) {\n    options.push({\n      label: 'lng_profile_copy_phone',\n      icon: 'copy',\n      handler: () => {\n        onCopyNumber();\n\n        afterEffect?.();\n      },\n    });\n  }\n\n  return options;\n}\nfunction checkMessageHasSelection(message: ApiMessage): boolean {\n  const selection = window.getSelection();\n  const selectionParentNode = (selection?.anchorNode?.parentNode as HTMLElement);\n  const selectedMessageElement = selectionParentNode?.closest<HTMLDivElement>('.Message.message-list-item');\n  return getMessageHtmlId(message.id) === selectedMessageElement?.id;\n}\nfunction getCopyLabel(hasSelection: boolean): string {\n  if (hasSelection) {\n    return 'lng_context_copy_selected';\n  }\n  return 'lng_context_copy_text';\n}\n","import type { ApiFormattedText } from '../../../../api/types';\nimport { ApiMessageEntityTypes } from '../../../../api/types';\n\nimport parseHtmlAsFormattedText from '../../../../util/parseHtmlAsFormattedText';\n\nconst div = document.createElement('div');\nconst ALLOWED_QUOTE_ENTITIES = new Set([\n  ApiMessageEntityTypes.Bold,\n  ApiMessageEntityTypes.Italic,\n  ApiMessageEntityTypes.Underline,\n  ApiMessageEntityTypes.Strike,\n  ApiMessageEntityTypes.Spoiler,\n  ApiMessageEntityTypes.CustomEmoji,\n]);\n\nexport function getSelectionAsFormattedText(range: Range) {\n  const html = getSelectionAsHtml(range);\n  const formattedText = parseHtmlAsFormattedText(html, false, true);\n\n  return stripEntitiesForQuote(formattedText);\n}\n\nfunction getSelectionAsHtml(range: Range) {\n  const clonedSelection = range.cloneContents();\n  div.appendChild(clonedSelection);\n\n  const html = wrapHtmlWithMarkupTags(range, div.innerHTML);\n  div.innerHTML = '';\n\n  return html\n    .replace(/<br\\s*\\/?>/gi, '\\n')\n    .replace(/&nbsp;/gi, ' ') // Convert nbsp's to spaces\n    .replace(/\\u00a0/gi, ' ');\n}\n\nfunction stripEntitiesForQuote(text: ApiFormattedText): ApiFormattedText {\n  if (!text.entities) return text;\n\n  const entities = text.entities.filter((entity) => ALLOWED_QUOTE_ENTITIES.has(entity.type as ApiMessageEntityTypes));\n  return { ...text, entities: entities.length ? entities : undefined };\n}\n\nfunction wrapHtmlWithMarkupTags(range: Range, html: string) {\n  const container = range.commonAncestorContainer;\n  if (container.nodeType === Node.ELEMENT_NODE && (container as Element).classList.contains('text-content')) {\n    return html;\n  }\n  let currentElement = range.commonAncestorContainer.parentElement;\n  while (currentElement && !currentElement.classList.contains('text-content')) {\n    const tag = currentElement.tagName.toLowerCase();\n    const entityType = currentElement.dataset.entityType;\n    html = `<${tag} ${entityType ? `data-entity-type=\"${entityType}\"` : ''}>${html}</${tag}>`;\n    currentElement = currentElement.parentElement;\n  }\n\n  return html;\n}\n","export function isSelectionRangeInsideMessage(range: Range) {\n  const ancestor = range.commonAncestorContainer;\n  const el = ancestor.nodeType === Node.TEXT_NODE\n    ? ancestor.parentNode! as Element\n    : ancestor as Element;\n\n  return Boolean(el.closest('.message-content-wrapper .text-content'))\n    && !(Boolean(el.closest('.EmbeddedMessage')) || Boolean(el.closest('.WebPage')));\n}\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, { memo, useMemo, useRef } from '../../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../../global';\n\nimport type { IAnchorPosition } from '../../../../types';\nimport {\n  type ApiAvailableEffect,\n  type ApiMessage, type ApiMessageEntity,\n  type ApiReaction, type ApiReactionCustomEmoji, type ApiSticker, type ApiStory, type ApiStorySkipped,\n  MAIN_THREAD_ID,\n} from '../../../../api/types';\n\nimport { getReactionKey, getStoryKey, isUserId } from '../../../../global/helpers';\nimport {\n  selectChat, selectChatFullInfo, selectChatMessage, selectIsContextMenuTranslucent, selectIsCurrentUserPremium,\n  selectPeerStory, selectTabState,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport parseHtmlAsFormattedText from '../../../../util/parseHtmlAsFormattedText';\nimport { REM } from '../../../common/helpers/mediaDimensions';\nimport { buildCustomEmojiHtml } from '../../composer/helpers/customEmoji';\n\nimport { getIsMobile } from '../../../../hooks/useAppLayout';\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useMenuPosition from '../../../../hooks/useMenuPosition';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport CustomEmojiPicker from '../../../common/CustomEmojiPicker';\nimport Menu from '../../../ui/Menu';\nimport StickerPicker from '../../composer/StickerPicker';\nimport ReactionPickerLimited from './ReactionPickerLimited';\n\nimport styles from './ReactionPicker.module.scss';\n\nexport type OwnProps = {\n  isOpen: boolean;\n};\n\ninterface StateProps {\n  withCustomReactions?: boolean;\n  message?: ApiMessage;\n  story?: ApiStory | ApiStorySkipped;\n  isCurrentUserPremium?: boolean;\n  position?: IAnchorPosition;\n  isTranslucent?: boolean;\n  sendAsMessage?: boolean;\n  chatId?: string;\n  isForEffects?: boolean;\n  availableEffectById: Record<string, ApiAvailableEffect>;\n}\n\nconst FULL_PICKER_SHIFT_DELTA = { x: -23, y: -64 };\nconst LIMITED_PICKER_SHIFT_DELTA = { x: -21, y: -10 };\nconst REACTION_SELECTOR_WIDTH = 16.375 * REM;\n\nconst ReactionPicker: FC<OwnProps & StateProps> = ({\n  isOpen,\n  message,\n  story,\n  position,\n  isTranslucent,\n  isCurrentUserPremium,\n  withCustomReactions,\n  sendAsMessage,\n  chatId,\n  isForEffects,\n  availableEffectById,\n}) => {\n  const {\n    toggleReaction, closeReactionPicker, sendMessage, showNotification, sendStoryReaction, saveEffectInDraft,\n    requestEffectInComposer,\n  } = getActions();\n\n  const lang = useOldLang();\n\n  const renderedMessageId = useCurrentOrPrev(message?.id, true);\n  const renderedChatId = useCurrentOrPrev(message?.chatId, true);\n  const renderedStoryPeerId = useCurrentOrPrev(story?.peerId, true);\n  const renderedStoryId = useCurrentOrPrev(story?.id);\n  const storedPosition = useCurrentOrPrev(position, true);\n  // eslint-disable-next-line no-null/no-null\n  const menuRef = useRef<HTMLDivElement>(null);\n  const renderingPosition = useMemo((): IAnchorPosition | undefined => {\n    if (!storedPosition) {\n      return undefined;\n    }\n\n    if (renderedStoryId) {\n      return storedPosition;\n    }\n\n    return {\n      x: storedPosition.x + (withCustomReactions ? FULL_PICKER_SHIFT_DELTA.x : LIMITED_PICKER_SHIFT_DELTA.x),\n      y: storedPosition.y + (withCustomReactions ? FULL_PICKER_SHIFT_DELTA.y : LIMITED_PICKER_SHIFT_DELTA.y),\n    };\n  }, [renderedStoryId, storedPosition, withCustomReactions]);\n\n  const getMenuElement = useLastCallback(() => menuRef.current);\n  const getLayout = useLastCallback(() => ({\n    withPortal: true,\n    isDense: !renderedStoryPeerId,\n    deltaX: !getIsMobile() && menuRef.current\n      ? -(menuRef.current.offsetWidth - REACTION_SELECTOR_WIDTH) / 2 - FULL_PICKER_SHIFT_DELTA.x / 2\n      : 0,\n  }));\n  const {\n    positionX, positionY, transformOriginX, transformOriginY, style,\n  } = useMenuPosition(renderingPosition, getTriggerElement, getRootElement, getMenuElement, getLayout);\n\n  const handleToggleCustomReaction = useLastCallback((sticker: ApiSticker) => {\n    if (!renderedChatId || !renderedMessageId) {\n      return;\n    }\n    const reaction = sticker.isCustomEmoji\n      ? { documentId: sticker.id } as ApiReactionCustomEmoji\n      : { emoticon: sticker.emoji } as ApiReaction;\n\n    toggleReaction({\n      chatId: renderedChatId, messageId: renderedMessageId, reaction, shouldAddToRecent: true,\n    });\n    closeReactionPicker();\n  });\n\n  const handleToggleReaction = useLastCallback((reaction: ApiReaction) => {\n    if (!renderedChatId || !renderedMessageId) {\n      return;\n    }\n\n    toggleReaction({\n      chatId: renderedChatId, messageId: renderedMessageId, reaction, shouldAddToRecent: true,\n    });\n    closeReactionPicker();\n  });\n\n  const handleStoryReactionSelect = useLastCallback((item: ApiReaction | ApiSticker) => {\n    const reaction = 'id' in item ? { documentId: item.id } : item;\n\n    const sticker = 'documentId' in item\n      ? getGlobal().customEmojis.byId[item.documentId] : 'emoticon' in item ? undefined : item;\n\n    if (sticker && !sticker.isFree && !isCurrentUserPremium) {\n      showNotification({\n        message: lang('UnlockPremiumEmojiHint'),\n        action: {\n          action: 'openPremiumModal',\n          payload: { initialSection: 'animated_emoji' },\n        },\n        actionText: lang('PremiumMore'),\n      });\n\n      closeReactionPicker();\n\n      return;\n    }\n\n    if (!sendAsMessage) {\n      sendStoryReaction({\n        peerId: renderedStoryPeerId!,\n        storyId: renderedStoryId!,\n        containerId: getStoryKey(renderedStoryPeerId!, renderedStoryId!),\n        reaction,\n        shouldAddToRecent: true,\n      });\n      closeReactionPicker();\n      return;\n    }\n\n    let text: string | undefined;\n    let entities: ApiMessageEntity[] | undefined;\n\n    if ('emoticon' in item) {\n      text = item.emoticon;\n    } else {\n      const customEmojiMessage = parseHtmlAsFormattedText(buildCustomEmojiHtml(sticker!));\n      text = customEmojiMessage.text;\n      entities = customEmojiMessage.entities;\n    }\n\n    sendMessage({ text, entities, isReaction: true });\n    closeReactionPicker();\n  });\n\n  const handleStickerSelect = useLastCallback((sticker: ApiSticker) => {\n    const availableEffects = Object.values(availableEffectById);\n    const effectId = availableEffects.find((effect) => effect.effectStickerId === sticker.id)?.id;\n\n    if (chatId) saveEffectInDraft({ chatId, threadId: MAIN_THREAD_ID, effectId });\n\n    if (effectId) requestEffectInComposer({ });\n    closeReactionPicker();\n  });\n\n  const selectedReactionIds = useMemo(() => {\n    return (message?.reactions?.results || []).reduce<string[]>((acc, { chosenOrder, reaction }) => {\n      if (chosenOrder !== undefined) {\n        acc.push(getReactionKey(reaction));\n      }\n\n      return acc;\n    }, []);\n  }, [message?.reactions?.results]);\n\n  return (\n    <Menu\n      isOpen={isOpen}\n      ref={menuRef}\n      className={buildClassName(styles.menu, 'ReactionPicker')}\n      bubbleClassName={buildClassName(\n        styles.menuContent,\n        !withCustomReactions && !renderedStoryId && styles.onlyReactions,\n        renderedStoryId && styles.storyMenu,\n      )}\n      withPortal\n      noCompact\n      positionX={positionX}\n      positionY={positionY}\n      transformOriginX={transformOriginX}\n      transformOriginY={transformOriginY}\n      style={style}\n      backdropExcludedSelector=\".Modal.confirm\"\n      onClose={closeReactionPicker}\n    >\n      {isForEffects && chatId ? (\n        <StickerPicker\n          className=\"\"\n          isHidden={!isOpen}\n          loadAndPlay={Boolean(isOpen && withCustomReactions)}\n          idPrefix=\"message-effect\"\n          canSendStickers={false}\n          noContextMenus={false}\n          chatId={chatId}\n          isTranslucent={isTranslucent}\n          onStickerSelect={handleStickerSelect}\n          isForEffects={isForEffects}\n        />\n      ) : (\n        <>\n          <CustomEmojiPicker\n            chatId={renderedChatId}\n            idPrefix=\"message-emoji-set-\"\n            isHidden={!isOpen || !(withCustomReactions || renderedStoryId)}\n            loadAndPlay={Boolean(isOpen && withCustomReactions)}\n            isReactionPicker\n            className={!withCustomReactions && !renderedStoryId ? styles.hidden : undefined}\n            selectedReactionIds={selectedReactionIds}\n            isTranslucent={isTranslucent}\n            onCustomEmojiSelect={renderedStoryId ? handleStoryReactionSelect : handleToggleCustomReaction}\n            onReactionSelect={renderedStoryId ? handleStoryReactionSelect : handleToggleReaction}\n          />\n          {!withCustomReactions && Boolean(renderedChatId) && (\n            <ReactionPickerLimited\n              chatId={renderedChatId}\n              loadAndPlay={isOpen}\n              onReactionSelect={renderedStoryId ? handleStoryReactionSelect : handleToggleReaction}\n              selectedReactionIds={selectedReactionIds}\n            />\n          )}\n        </>\n      )}\n    </Menu>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const state = selectTabState(global);\n  const availableEffectById = global.availableEffectById;\n  const {\n    chatId, messageId, storyPeerId, storyId, position, sendAsMessage, isForEffects,\n  } = state.reactionPicker || {};\n  const story = storyPeerId && storyId\n    ? selectPeerStory(global, storyPeerId, storyId) as ApiStory | ApiStorySkipped\n    : undefined;\n  const chat = chatId ? selectChat(global, chatId) : undefined;\n  const chatFullInfo = chatId ? selectChatFullInfo(global, chatId) : undefined;\n  const message = chatId && messageId ? selectChatMessage(global, chatId, messageId) : undefined;\n  const isPrivateChat = isUserId(chatId || storyPeerId || '');\n  const areSomeReactionsAllowed = chatFullInfo?.enabledReactions?.type === 'some';\n  const areCustomReactionsAllowed = chatFullInfo?.enabledReactions?.type === 'all'\n    && chatFullInfo?.enabledReactions?.areCustomAllowed;\n\n  return {\n    message,\n    story,\n    position,\n    withCustomReactions: chat?.isForbidden || areSomeReactionsAllowed\n      ? false\n      : areCustomReactionsAllowed || isPrivateChat,\n    isTranslucent: selectIsContextMenuTranslucent(global),\n    isCurrentUserPremium: selectIsCurrentUserPremium(global),\n    sendAsMessage,\n    isForEffects,\n    chatId,\n    availableEffectById,\n  };\n})(ReactionPicker));\n\nfunction getTriggerElement(): HTMLElement | null {\n  return document.querySelector('body');\n}\n\nfunction getRootElement() {\n  return document.querySelector('body');\n}\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, { memo, useMemo, useRef } from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport type { ApiAvailableReaction, ApiChatReactions, ApiReaction } from '../../../../api/types';\n\nimport { getReactionKey, sortReactions } from '../../../../global/helpers';\nimport { selectChatFullInfo } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { REM } from '../../../common/helpers/mediaDimensions';\n\nimport useAppLayout from '../../../../hooks/useAppLayout';\nimport useWindowSize from '../../../../hooks/window/useWindowSize';\n\nimport ReactionEmoji from '../../../common/ReactionEmoji';\n\nimport styles from './ReactionPickerLimited.module.scss';\n\ntype OwnProps = {\n  chatId: string;\n  loadAndPlay: boolean;\n  onReactionSelect?: (reaction: ApiReaction) => void;\n  selectedReactionIds?: string[];\n};\n\ntype StateProps = {\n  enabledReactions?: ApiChatReactions;\n  availableReactions?: ApiAvailableReaction[];\n  topReactions: ApiReaction[];\n  canAnimate?: boolean;\n  isSavedMessages?: boolean;\n  isCurrentUserPremium?: boolean;\n};\n\nconst REACTION_SIZE = 36;\nconst GRID_GAP_THRESHOLD = 600;\nconst MODAL_PADDING_SIZE_REM = 0.5;\nconst MODAL_MAX_HEIGHT_REM = 18;\nconst MODAL_MAX_WIDTH_REM = 26.25;\nconst GRID_GAP_DESKTOP_REM = 0.625;\nconst GRID_GAP_MOBILE_REM = 0.5;\n\nconst ReactionPickerLimited: FC<OwnProps & StateProps> = ({\n  loadAndPlay,\n  enabledReactions,\n  availableReactions,\n  topReactions,\n  selectedReactionIds,\n  onReactionSelect,\n}) => {\n  // eslint-disable-next-line no-null/no-null\n  const sharedCanvasRef = useRef<HTMLCanvasElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const sharedCanvasHqRef = useRef<HTMLCanvasElement>(null);\n  const { width: windowWidth } = useWindowSize();\n  const { isTouchScreen } = useAppLayout();\n\n  const allAvailableReactions = useMemo(() => {\n    if (!enabledReactions) {\n      return [];\n    }\n\n    if (enabledReactions.type === 'all') {\n      return sortReactions((availableReactions || []).map(({ reaction }) => reaction), topReactions);\n    }\n\n    return sortReactions(enabledReactions.allowed, topReactions);\n  }, [availableReactions, enabledReactions, topReactions]);\n\n  const pickerHeight = useMemo(() => {\n    const pickerWidth = Math.min(MODAL_MAX_WIDTH_REM * REM, windowWidth);\n    const gapWidth = (windowWidth > GRID_GAP_THRESHOLD ? GRID_GAP_DESKTOP_REM : GRID_GAP_MOBILE_REM) * REM;\n    const availableWidth = pickerWidth - MODAL_PADDING_SIZE_REM * REM;\n\n    const itemsInRow = Math.floor((availableWidth + gapWidth) / (REACTION_SIZE + gapWidth));\n    const rowsCount = Math.ceil(allAvailableReactions.length / itemsInRow);\n\n    const pickerMaxHeight = rowsCount * REACTION_SIZE + (rowsCount - 1) * gapWidth + MODAL_PADDING_SIZE_REM * REM * 2;\n\n    return Math.min(MODAL_MAX_HEIGHT_REM * REM, pickerMaxHeight);\n  }, [allAvailableReactions.length, windowWidth]);\n\n  return (\n    <div className={styles.root} style={`height: ${pickerHeight}px`}>\n      <div className={buildClassName(styles.wrapper, isTouchScreen ? 'no-scrollbar' : 'custom-scroll')}>\n        <div className=\"symbol-set-container shared-canvas-container\">\n          <canvas ref={sharedCanvasRef} className=\"shared-canvas\" />\n          <canvas ref={sharedCanvasHqRef} className=\"shared-canvas\" />\n          {allAvailableReactions.map((reaction) => {\n            const reactionId = getReactionKey(reaction);\n            const isSelected = reactionId ? selectedReactionIds?.includes(reactionId) : undefined;\n\n            return (\n              <ReactionEmoji\n                key={reactionId}\n                reaction={reaction}\n                isSelected={isSelected}\n                loadAndPlay={loadAndPlay}\n                availableReactions={availableReactions}\n                onClick={onReactionSelect!}\n                sharedCanvasRef={sharedCanvasRef}\n                sharedCanvasHqRef={sharedCanvasHqRef}\n              />\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { chatId }): StateProps => {\n    const { availableReactions, topReactions } = global.reactions;\n    const { enabledReactions } = selectChatFullInfo(global, chatId) || {};\n\n    return {\n      enabledReactions,\n      availableReactions,\n      topReactions,\n    };\n  },\n)(ReactionPickerLimited));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { TabState } from '../../../global/types';\n\nimport { MINI_APP_TOS_URL } from '../../../config';\nimport renderText from '../../common/helpers/renderText';\n\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Checkbox from '../../ui/Checkbox';\nimport ConfirmDialog from '../../ui/ConfirmDialog';\n\nexport type OwnProps = {\n  modal: TabState['requestedAttachBotInstall'];\n};\n\nconst AttachBotInstallModal: FC<OwnProps> = ({\n  modal,\n}) => {\n  const { confirmAttachBotInstall, cancelAttachBotInstall } = getActions();\n  const bot = modal?.bot;\n\n  const [isTosAccepted, setIsTosAccepted] = useState(false);\n\n  const lang = useOldLang();\n\n  const handleConfirm = useCallback(() => {\n    confirmAttachBotInstall({\n      isWriteAllowed: Boolean(bot?.shouldRequestWriteAccess),\n    });\n  }, [confirmAttachBotInstall, bot]);\n\n  // Reset on re-open\n  useEffect(() => {\n    if (bot) {\n      setIsTosAccepted(false);\n    }\n  }, [bot]);\n\n  const tosLabel = useMemo(() => {\n    const base = lang('lng_mini_apps_disclaimer_button');\n    const split = base.split('{link}');\n    const linkText = lang('lng_mini_apps_disclaimer_link');\n    return [\n      split[0],\n      <a href={MINI_APP_TOS_URL} target=\"_blank\" rel=\"noopener noreferrer\">{linkText}</a>,\n      split[1],\n    ];\n  }, [lang]);\n\n  return (\n    <ConfirmDialog\n      isOpen={Boolean(bot)}\n      onClose={cancelAttachBotInstall}\n      title={lang('lng_mini_apps_disclaimer_title')}\n      confirmHandler={handleConfirm}\n      isConfirmDisabled={!isTosAccepted}\n    >\n      {renderText(lang('lng_mini_apps_disclaimer_text', bot?.shortName), ['simple_markdown'])}\n      <Checkbox\n        className=\"dialog-checkbox\"\n        checked={isTosAccepted}\n        label={tosLabel}\n        onCheck={setIsTosAccepted}\n      />\n      {renderText(lang('WebBot.Account.Desclaimer.Desc', bot?.shortName), ['simple_markdown'])}\n    </ConfirmDialog>\n  );\n};\n\nexport default memo(AttachBotInstallModal);\n","import React, { memo, useEffect, useMemo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiChat, ApiChatFullInfo, ApiMyBoost } from '../../../api/types';\nimport type { TabState } from '../../../global/types';\n\nimport { getChatTitle, isChatAdmin, isChatChannel } from '../../../global/helpers';\nimport { selectChat, selectChatFullInfo, selectIsCurrentUserPremium } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatDateInFuture } from '../../../util/dates/dateFormat';\nimport { getServerTime } from '../../../util/serverTime';\nimport { getBoostProgressInfo } from '../../common/helpers/boostInfo';\nimport renderText from '../../common/helpers/renderText';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Avatar from '../../common/Avatar';\nimport Icon from '../../common/icons/Icon';\nimport PremiumProgress from '../../common/PremiumProgress';\nimport Button from '../../ui/Button';\nimport ConfirmDialog from '../../ui/ConfirmDialog';\nimport Loading from '../../ui/Loading';\nimport Modal from '../../ui/Modal';\n\nimport styles from './BoostModal.module.scss';\n\ntype LoadedParams = {\n  boost?: ApiMyBoost;\n  leftText: string;\n  rightText?: string;\n  value: string;\n  progress: number;\n  descriptionText: string;\n  isBoosted?: boolean;\n  canBoostMore?: boolean;\n};\n\ntype BoostInfo = ({\n  isStatusLoaded: false;\n  title: string;\n} & Undefined<LoadedParams>) | ({\n  isStatusLoaded: true;\n  title: string;\n} & LoadedParams);\n\nexport type OwnProps = {\n  modal: TabState['boostModal'];\n};\n\ntype StateProps = {\n  chat?: ApiChat;\n  chatFullInfo?: ApiChatFullInfo;\n  prevBoostedChat?: ApiChat;\n  isCurrentUserPremium?: boolean;\n};\n\nconst BoostModal = ({\n  modal,\n  chat,\n  chatFullInfo,\n  prevBoostedChat,\n  isCurrentUserPremium,\n}: OwnProps & StateProps) => {\n  const {\n    applyBoost,\n    closeBoostModal,\n    requestConfetti,\n    openPremiumModal,\n    loadFullChat,\n  } = getActions();\n\n  const [isReplaceModalOpen, openReplaceModal, closeReplaceModal] = useFlag();\n  const [isWaitDialogOpen, openWaitDialog, closeWaitDialog] = useFlag();\n  const [isPremiumDialogOpen, openPremiumDialog, closePremiumDialog] = useFlag();\n\n  const isChannel = chat && isChatChannel(chat);\n\n  const isOpen = Boolean(modal);\n\n  const lang = useOldLang();\n\n  useEffect(() => {\n    if (chat && !chatFullInfo) {\n      loadFullChat({ chatId: chat.id });\n    }\n  }, [chat, chatFullInfo]);\n\n  const chatTitle = useMemo(() => {\n    if (!chat) {\n      return undefined;\n    }\n\n    return getChatTitle(lang, chat);\n  }, [chat, lang]);\n\n  const boostedChatTitle = useMemo(() => {\n    if (!prevBoostedChat) {\n      return undefined;\n    }\n\n    return getChatTitle(lang, prevBoostedChat);\n  }, [prevBoostedChat, lang]);\n\n  const {\n    isStatusLoaded,\n    isBoosted,\n    boost,\n    title,\n    leftText,\n    rightText,\n    value,\n    progress,\n    descriptionText,\n    canBoostMore,\n  }: BoostInfo = useMemo(() => {\n    if (!modal?.boostStatus || !chat) {\n      return {\n        isStatusLoaded: false,\n        title: lang('Loading'),\n      };\n    }\n\n    const {\n      hasMyBoost,\n    } = modal.boostStatus;\n\n    const firstBoost = modal?.myBoosts && getFirstAvailableBoost(modal.myBoosts, chat.id);\n    const areBoostsInDifferentChannels = modal?.myBoosts && !areAllBoostsInChannel(modal.myBoosts, chat.id);\n\n    const {\n      boosts,\n      currentLevel,\n      hasNextLevel,\n      levelProgress,\n      remainingBoosts,\n      isMaxLevel,\n    } = getBoostProgressInfo(modal.boostStatus, true);\n\n    const hasBoost = hasMyBoost;\n\n    const left = lang('BoostsLevel', currentLevel);\n    const right = hasNextLevel ? lang('BoostsLevel', currentLevel + 1) : undefined;\n\n    const moreBoosts = lang('ChannelBoost.MoreBoosts', remainingBoosts);\n\n    const modalTitle = isChannel ? lang('BoostChannel') : lang('BoostGroup');\n\n    const boostsLeftToUnrestrict = (chatFullInfo?.boostsToUnrestrict || 0) - (chatFullInfo?.boostsApplied || 0);\n\n    let description: string | undefined;\n    if (isMaxLevel) {\n      description = lang('BoostsMaxLevelReached');\n    } else if (boostsLeftToUnrestrict > 0 && !isChatAdmin(chat)) {\n      const boostTimes = lang('GroupBoost.BoostToUnrestrict.Times', boostsLeftToUnrestrict);\n      description = lang('GroupBoost.BoostToUnrestrict', [boostTimes, chatTitle]);\n    } else {\n      description = lang('ChannelBoost.MoreBoostsNeeded.Text', [chatTitle, moreBoosts]);\n    }\n\n    return {\n      isStatusLoaded: true,\n      title: modalTitle,\n      leftText: left,\n      rightText: right,\n      value: boosts.toString(),\n      progress: levelProgress,\n      remainingBoosts,\n      descriptionText: description,\n      boost: firstBoost,\n      isBoosted: hasBoost,\n      canBoostMore: areBoostsInDifferentChannels && !isMaxLevel,\n    };\n  }, [chat, chatTitle, modal, lang, chatFullInfo, isChannel]);\n\n  const isBoostDisabled = !modal?.myBoosts?.length && isCurrentUserPremium;\n  const isReplacingBoost = boost?.chatId && boost.chatId !== modal?.chatId;\n\n  const handleApplyBoost = useLastCallback(() => {\n    closeReplaceModal();\n    applyBoost({ chatId: chat!.id, slots: [boost!.slot] });\n    requestConfetti({});\n  });\n\n  const handleProceedPremium = useLastCallback(() => {\n    openPremiumModal();\n    closePremiumDialog();\n    closeBoostModal();\n  });\n\n  const handleButtonClick = useLastCallback(() => {\n    if (!boost) {\n      if (!isCurrentUserPremium) {\n        openPremiumDialog();\n        return;\n      }\n\n      closeBoostModal();\n      return;\n    }\n\n    if (!canBoostMore) {\n      closeBoostModal();\n      return;\n    }\n\n    if (boost.cooldownUntil) {\n      openWaitDialog();\n      return;\n    }\n\n    if (isReplacingBoost) {\n      openReplaceModal();\n      return;\n    }\n\n    handleApplyBoost();\n  });\n\n  const handleCloseClick = useLastCallback(() => {\n    closeBoostModal();\n  });\n\n  function renderContent() {\n    if (!isStatusLoaded) {\n      return <Loading className={styles.loading} />;\n    }\n\n    return (\n      <>\n        <PremiumProgress\n          leftText={leftText}\n          rightText={rightText}\n          progress={progress}\n          floatingBadgeText={value}\n          floatingBadgeIcon=\"boost\"\n        />\n        {isBoosted && (\n          <div className={buildClassName(styles.description, styles.bold)}>\n            {lang('ChannelBoost.YouBoostedChannelText', chatTitle)}\n          </div>\n        )}\n        <div className={styles.description}>\n          {renderText(descriptionText, ['simple_markdown', 'emoji'])}\n        </div>\n        <div className=\"dialog-buttons\">\n          <Button isText className=\"confirm-dialog-button\" disabled={isBoostDisabled} onClick={handleButtonClick}>\n            {canBoostMore ? (\n              <>\n                <Icon name=\"boost\" />\n                {lang(isChannel ? 'ChannelBoost.BoostChannel' : 'GroupBoost.BoostGroup')}\n              </>\n            ) : lang('OK')}\n          </Button>\n          <Button isText className=\"confirm-dialog-button\" onClick={handleCloseClick}>\n            {lang('Cancel')}\n          </Button>\n        </div>\n      </>\n    );\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      title={title}\n      className={styles.modal}\n      contentClassName={styles.content}\n      onClose={closeBoostModal}\n    >\n      {renderContent()}\n      {isReplacingBoost && boostedChatTitle && (\n        <Modal\n          isOpen={isReplaceModalOpen}\n          className={styles.replaceModal}\n          contentClassName={styles.replaceModalContent}\n          onClose={closeReplaceModal}\n        >\n          <div className={styles.avatarContainer}>\n            <div className={styles.boostedWrapper}>\n              <Avatar peer={prevBoostedChat} size=\"large\" />\n              <Icon name=\"boostcircle\" className={styles.boostedMark} />\n            </div>\n            <Icon name=\"next\" className={styles.arrow} />\n            <Avatar peer={chat} size=\"large\" />\n          </div>\n          <div>\n            {renderText(lang('ChannelBoost.ReplaceBoost', [boostedChatTitle, chatTitle]), ['simple_markdown', 'emoji'])}\n          </div>\n          <div className=\"dialog-buttons\">\n            <Button isText className=\"confirm-dialog-button\" onClick={handleApplyBoost}>\n              {lang('Replace')}\n            </Button>\n            <Button isText className=\"confirm-dialog-button\" onClick={closeReplaceModal}>\n              {lang('Cancel')}\n            </Button>\n          </div>\n        </Modal>\n      )}\n      {Boolean(boost?.cooldownUntil) && (\n        <ConfirmDialog\n          isOpen={isWaitDialogOpen}\n          isOnlyConfirm\n          confirmLabel={lang('OK')}\n          title={lang('ChannelBoost.Error.BoostTooOftenTitle')}\n          onClose={closeWaitDialog}\n          confirmHandler={closeWaitDialog}\n        >\n          {renderText(\n            lang(\n              'ChannelBoost.Error.BoostTooOftenText',\n              formatDateInFuture(lang, getServerTime(), boost!.cooldownUntil),\n            ),\n            ['simple_markdown', 'emoji'],\n          )}\n        </ConfirmDialog>\n      )}\n      {!isCurrentUserPremium && (\n        <ConfirmDialog\n          isOpen={isPremiumDialogOpen}\n          confirmLabel={lang('Common.Yes')}\n          title={lang('PremiumNeeded')}\n          onClose={closePremiumDialog}\n          confirmHandler={handleProceedPremium}\n        >\n          {renderText(lang('PremiumNeededForBoosting'), ['simple_markdown', 'emoji'])}\n        </ConfirmDialog>\n      )}\n    </Modal>\n  );\n};\n\nfunction getFirstAvailableBoost(myBoosts: ApiMyBoost[], chatId?: string) {\n  return myBoosts.find((boost) => !boost.chatId)\n    || myBoosts.filter((b) => chatId && b.chatId !== chatId)\n      .sort((a, b) => a.date - b.date)[0];\n}\n\nfunction areAllBoostsInChannel(myBoosts: ApiMyBoost[], chatId: string) {\n  return myBoosts.every((boost) => boost.chatId === chatId);\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const chat = modal && selectChat(global, modal?.chatId);\n    const chatFullInfo = chat && selectChatFullInfo(global, chat.id);\n    const firstBoost = modal?.myBoosts && getFirstAvailableBoost(modal.myBoosts, modal.chatId);\n    const boostedChat = firstBoost?.chatId ? selectChat(global, firstBoost?.chatId) : undefined;\n\n    return {\n      chat,\n      chatFullInfo,\n      prevBoostedChat: boostedChat,\n      isCurrentUserPremium: selectIsCurrentUserPremium(global),\n    };\n  },\n)(BoostModal));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useCallback, useState } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { ApiChatFolder, ApiChatlistInviteAlready } from '../../../api/types';\n\nimport buildClassName from '../../../util/buildClassName';\nimport renderText from '../../common/helpers/renderText';\n\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Picker from '../../common/Picker';\nimport Badge from '../../ui/Badge';\nimport Button from '../../ui/Button';\n\nimport styles from './ChatlistModal.module.scss';\n\ntype OwnProps = {\n  invite: ApiChatlistInviteAlready;\n  folder: ApiChatFolder;\n};\n\nconst ChatlistAlready: FC<OwnProps> = ({ invite, folder }) => {\n  const { closeChatlistModal, joinChatlistInvite } = getActions();\n\n  const lang = useOldLang();\n\n  const [selectedPeerIds, setSelectedPeerIds] = useState<string[]>(invite.missingPeerIds);\n\n  const hasChatsToAdd = Boolean(invite.missingPeerIds.length);\n  const newChatsCount = hasChatsToAdd ? invite.missingPeerIds.length : 0;\n  const badgeText = selectedPeerIds.length ? selectedPeerIds.length.toString() : undefined;\n\n  const descriptionText = hasChatsToAdd\n    ? lang('FolderLinkSubtitleChats', [newChatsCount, folder.title], undefined, newChatsCount)\n    : lang('FolderLinkSubtitleAlready', folder.title);\n\n  const handleButtonClick = useCallback(() => {\n    closeChatlistModal();\n\n    if (!selectedPeerIds.length) return;\n\n    joinChatlistInvite({\n      invite,\n      peerIds: selectedPeerIds,\n    });\n  }, [invite, selectedPeerIds]);\n\n  const handleSelectionToggle = useCallback(() => {\n    const areAllSelected = selectedPeerIds.length === invite.missingPeerIds.length;\n    setSelectedPeerIds(areAllSelected ? [] : invite.missingPeerIds);\n  }, [invite.missingPeerIds, selectedPeerIds.length]);\n\n  return (\n    <div className={styles.content}>\n      <div className={styles.description}>\n        {renderText(descriptionText, ['simple_markdown', 'emoji'])}\n      </div>\n      <div className={buildClassName(styles.pickerWrapper, 'custom-scroll')}>\n        {Boolean(invite.missingPeerIds.length) && (\n          <>\n            <div className={styles.pickerHeader}>\n              <div className={styles.pickerHeaderInfo}>\n                {lang('FolderLinkHeaderChatsJoin', selectedPeerIds.length, 'i')}\n              </div>\n              <div\n                className={styles.selectionToggle}\n                role=\"button\"\n                tabIndex={0}\n                onClick={handleSelectionToggle}\n              >\n                {selectedPeerIds.length === invite.missingPeerIds.length ? lang('DeselectAll') : lang('SelectAll')}\n              </div>\n            </div>\n            <Picker\n              itemIds={invite.missingPeerIds}\n              onSelectedIdsChange={setSelectedPeerIds}\n              selectedIds={selectedPeerIds}\n            />\n          </>\n        )}\n        <div className={styles.pickerHeader}>\n          <div className={styles.pickerHeaderInfo}>\n            {lang('FolderLinkHeaderAlready')}\n          </div>\n        </div>\n        <Picker\n          itemIds={invite.alreadyPeerIds}\n          lockedSelectedIds={invite.alreadyPeerIds}\n          selectedIds={invite.alreadyPeerIds}\n        />\n      </div>\n      <Button\n        size=\"smaller\"\n        onClick={handleButtonClick}\n      >\n        <div className={styles.buttonText}>\n          {!selectedPeerIds.length && lang('OK')}\n          {Boolean(selectedPeerIds.length) && (\n            <>\n              {lang('FolderLinkButtonJoinPlural', selectedPeerIds.length, 'i')}\n              <Badge className={styles.buttonBadge} text={badgeText} isAlternateColor />\n            </>\n          )}\n        </div>\n      </Button>\n    </div>\n  );\n};\n\nexport default memo(ChatlistAlready);\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useCallback, useState } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { ApiChatFolder } from '../../../api/types';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { MEMO_EMPTY_ARRAY } from '../../../util/memo';\nimport renderText from '../../common/helpers/renderText';\n\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Picker from '../../common/Picker';\nimport Badge from '../../ui/Badge';\nimport Button from '../../ui/Button';\n\nimport styles from './ChatlistModal.module.scss';\n\ntype OwnProps = {\n  folder: ApiChatFolder;\n  suggestedPeerIds?: string[];\n};\n\nconst ChatlistDelete: FC<OwnProps> = ({\n  folder,\n  suggestedPeerIds = MEMO_EMPTY_ARRAY,\n}) => {\n  const { closeChatlistModal, leaveChatlist } = getActions();\n\n  const lang = useOldLang();\n\n  const [selectedPeerIds, setSelectedPeerIds] = useState<string[]>(suggestedPeerIds);\n\n  const badgeText = selectedPeerIds.length ? selectedPeerIds.length.toString() : undefined;\n\n  const handleSelectionToggle = useCallback(() => {\n    const areAllSelected = selectedPeerIds.length === suggestedPeerIds.length;\n    setSelectedPeerIds(areAllSelected ? [] : suggestedPeerIds);\n  }, [suggestedPeerIds, selectedPeerIds.length]);\n\n  const handleButtonClick = useCallback(() => {\n    closeChatlistModal();\n    leaveChatlist({ folderId: folder.id, peerIds: selectedPeerIds });\n  }, [folder.id, selectedPeerIds]);\n\n  return (\n    <div className={styles.content}>\n      {Boolean(suggestedPeerIds?.length) && (\n        <>\n          <div className={styles.description}>\n            {renderText(lang('FolderLinkSubtitleRemove'), ['simple_markdown', 'emoji'])}\n          </div>\n          <div className={buildClassName(styles.pickerWrapper, 'custom-scroll')}>\n            <div className={styles.pickerHeader}>\n              <div className={styles.pickerHeaderInfo}>\n                {lang('FolderLinkHeaderChatsQuit', selectedPeerIds.length, 'i')}\n              </div>\n              <div\n                className={styles.selectionToggle}\n                role=\"button\"\n                tabIndex={0}\n                onClick={handleSelectionToggle}\n              >\n                {selectedPeerIds.length === suggestedPeerIds.length ? lang('DeselectAll') : lang('SelectAll')}\n              </div>\n            </div>\n            <Picker\n              itemIds={suggestedPeerIds}\n              onSelectedIdsChange={setSelectedPeerIds}\n              selectedIds={selectedPeerIds}\n            />\n          </div>\n        </>\n      )}\n      <Button\n        size=\"smaller\"\n        onClick={handleButtonClick}\n      >\n        <div className={styles.buttonText}>\n          {!selectedPeerIds.length && lang('FolderLinkButtonRemove')}\n          {Boolean(selectedPeerIds.length) && (\n            <>\n              {lang('FolderLinkButtonRemoveChats')}\n              <Badge className={styles.buttonBadge} text={badgeText} isAlternateColor />\n            </>\n          )}\n        </div>\n      </Button>\n    </div>\n  );\n};\n\nexport default memo(ChatlistDelete);\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useCallback, useMemo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiChatFolder } from '../../../api/types';\nimport type { TabState } from '../../../global/types';\n\nimport { selectChatFolder } from '../../../global/selectors';\n\nimport useOldLang from '../../../hooks/useOldLang';\nimport usePrevious from '../../../hooks/usePrevious';\n\nimport Modal from '../../ui/Modal';\nimport Tab from '../../ui/Tab';\nimport ChatlistAlready from './ChatlistAlready';\nimport ChatlistDelete from './ChatlistDelete';\nimport ChatlistNew from './ChatlistNew';\n\nimport styles from './ChatlistModal.module.scss';\n\nexport type OwnProps = {\n  modal?: TabState['chatlistModal'];\n};\n\ntype StateProps = {\n  folder?: ApiChatFolder;\n};\n\nconst ChatlistInviteModal: FC<OwnProps & StateProps> = ({\n  modal,\n  folder,\n}) => {\n  const { closeChatlistModal } = getActions();\n\n  const lang = useOldLang();\n\n  const isOpen = Boolean(modal);\n  const renderingInfo = usePrevious(modal) || modal;\n  const renderingFolder = usePrevious(folder) || folder;\n\n  const title = useMemo(() => {\n    if (!renderingInfo) return undefined;\n    if (renderingInfo.invite) {\n      const invite = renderingInfo.invite;\n      if ('alreadyPeerIds' in invite) {\n        return invite.missingPeerIds.length ? lang('FolderLinkTitleAddChats') : lang('FolderLinkTitleAlready');\n      }\n      return lang('FolderLinkTitleAdd');\n    }\n    if (renderingInfo.removal) {\n      return lang('FolderLinkTitleRemove');\n    }\n\n    return undefined;\n  }, [lang, renderingInfo]);\n\n  const renderingFolderTitle = useMemo(() => {\n    if (renderingFolder) return renderingFolder.title;\n    if (renderingInfo?.invite && 'title' in renderingInfo.invite) return renderingInfo.invite.title;\n    return undefined;\n  }, [renderingFolder, renderingInfo]);\n\n  const folderTabNumber = useMemo(() => {\n    if (!renderingInfo?.invite) return undefined;\n    if ('missingPeerIds' in renderingInfo.invite) return renderingInfo.invite.missingPeerIds.length;\n    return undefined;\n  }, [renderingInfo]);\n\n  function renderFolders(folderTitle: string) {\n    return (\n      <div className={styles.foldersWrapper}>\n        <div className={styles.folders}>\n          <Tab className={styles.folder} title={lang('FolderLinkPreviewLeft')} />\n          <Tab className={styles.folder} isActive badgeCount={folderTabNumber} isBadgeActive title={folderTitle} />\n          <Tab className={styles.folder} title={lang('FolderLinkPreviewRight')} />\n        </div>\n      </div>\n    );\n  }\n\n  const renderContent = useCallback(() => {\n    if (!renderingInfo) return undefined;\n    if (renderingInfo.invite) {\n      const invite = renderingInfo.invite;\n      if ('alreadyPeerIds' in invite) {\n        return <ChatlistAlready invite={invite} folder={renderingFolder!} />;\n      }\n\n      return <ChatlistNew invite={invite} />;\n    }\n\n    if (renderingInfo.removal) {\n      return <ChatlistDelete folder={renderingFolder!} suggestedPeerIds={renderingInfo.removal.suggestedPeerIds} />;\n    }\n\n    return undefined;\n  }, [renderingFolder, renderingInfo]);\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      title={title}\n      onClose={closeChatlistModal}\n      isSlim\n      hasCloseButton\n    >\n      {renderingFolderTitle && renderFolders(renderingFolderTitle)}\n      {renderContent()}\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const { invite, removal } = modal || {};\n    const folderId = removal?.folderId || (invite && 'folderId' in invite ? invite.folderId : undefined);\n    const folder = folderId ? selectChatFolder(global, folderId) : undefined;\n\n    return {\n      folder,\n    };\n  },\n)(ChatlistInviteModal));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal } from '../../../global';\n\nimport type { ApiChatlistInviteNew } from '../../../api/types';\n\nimport buildClassName from '../../../util/buildClassName';\nimport renderText from '../../common/helpers/renderText';\n\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Picker from '../../common/Picker';\nimport Badge from '../../ui/Badge';\nimport Button from '../../ui/Button';\n\nimport styles from './ChatlistModal.module.scss';\n\ntype OwnProps = {\n  invite: ApiChatlistInviteNew;\n};\n\nconst ChatlistNew: FC<OwnProps> = ({ invite }) => {\n  const { closeChatlistModal, joinChatlistInvite } = getActions();\n\n  const lang = useOldLang();\n  const [selectedPeerIds, setSelectedPeerIds] = useState<string[]>(invite.peerIds);\n\n  const joinedIds = useMemo(() => {\n    const chatsById = getGlobal().chats.byId;\n    return invite.peerIds.filter((id) => !chatsById[id].isNotJoined);\n  }, [invite.peerIds]);\n\n  const selectedCount = selectedPeerIds.length - joinedIds.length;\n\n  const badgeText = selectedCount ? selectedCount.toString() : undefined;\n\n  const handleButtonClick = useCallback(() => {\n    closeChatlistModal();\n\n    joinChatlistInvite({\n      invite,\n      peerIds: selectedPeerIds,\n    });\n  }, [invite, selectedPeerIds]);\n\n  const handleSelectionToggle = useCallback(() => {\n    const areAllSelected = selectedPeerIds.length === invite.peerIds.length;\n    setSelectedPeerIds(areAllSelected ? joinedIds : invite.peerIds);\n  }, [invite.peerIds, joinedIds, selectedPeerIds.length]);\n\n  return (\n    <div className={styles.content}>\n      <div className={styles.description}>\n        {renderText(lang('FolderLinkSubtitle', invite.title), ['simple_markdown', 'emoji'])}\n      </div>\n      <div className={buildClassName(styles.pickerWrapper, 'custom-scroll')}>\n        <div className={styles.pickerHeader}>\n          <div className={styles.pickerHeaderInfo}>\n            {lang('FolderLinkHeaderChatsJoin', selectedCount, 'i')}\n          </div>\n          <div\n            className={styles.selectionToggle}\n            role=\"button\"\n            tabIndex={0}\n            onClick={handleSelectionToggle}\n          >\n            {selectedPeerIds.length === invite.peerIds.length ? lang('DeselectAll') : lang('SelectAll')}\n          </div>\n        </div>\n        <Picker\n          itemIds={invite.peerIds}\n          lockedSelectedIds={joinedIds}\n          onSelectedIdsChange={setSelectedPeerIds}\n          selectedIds={selectedPeerIds}\n        />\n      </div>\n      <Button\n        onClick={handleButtonClick}\n        size=\"smaller\"\n        disabled={!selectedPeerIds.length}\n      >\n        <div className={styles.buttonText}>\n          {lang('FolderLinkButtonAdd', invite.title)}\n          <Badge className={styles.buttonBadge} text={badgeText} isAlternateColor />\n        </div>\n      </Button>\n    </div>\n  );\n};\n\nexport default memo(ChatlistNew);\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo,\n  useMemo,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiCountryCode } from '../../../api/types';\nimport type { TabState } from '../../../global/types';\n\nimport { copyTextToClipboard } from '../../../util/clipboard';\nimport { formatDateAtTime } from '../../../util/dates/dateFormat';\nimport { formatCurrencyAsString } from '../../../util/formatCurrency';\nimport { formatPhoneNumberWithCode } from '../../../util/phoneNumber';\nimport { LOCAL_TGS_URLS } from '../../common/helpers/animatedAssets';\nimport formatUsername from '../../common/helpers/formatUsername';\nimport renderText from '../../common/helpers/renderText';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport AnimatedIconWithPreview from '../../common/AnimatedIconWithPreview';\nimport Icon from '../../common/icons/Icon';\nimport PickerSelectedItem from '../../common/PickerSelectedItem';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport styles from './CollectibleInfoModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['collectibleInfoModal'];\n};\n\ntype StateProps = {\n  phoneCodeList: ApiCountryCode[];\n};\n\nconst TOP_ICON_SIZE = 60;\n\nconst CollectibleInfoModal: FC<OwnProps & StateProps> = ({\n  modal,\n  phoneCodeList,\n}) => {\n  const {\n    closeCollectibleInfoModal,\n    openChat,\n    openUrl,\n    showNotification,\n  } = getActions();\n  const lang = useOldLang();\n\n  const isUsername = modal?.type === 'username';\n\n  const handleClose = useLastCallback(() => {\n    closeCollectibleInfoModal();\n  });\n\n  const handleOpenChat = useLastCallback(() => {\n    openChat({ id: modal!.peerId });\n    handleClose();\n  });\n\n  const handleOpenUrl = useLastCallback(() => {\n    openUrl({\n      url: modal!.url,\n      shouldSkipModal: true,\n    });\n    handleClose();\n  });\n\n  const handleCopy = useLastCallback(() => {\n    const text = isUsername ? formatUsername(modal!.collectible)\n      : formatPhoneNumberWithCode(phoneCodeList, modal!.collectible);\n    copyTextToClipboard(text);\n    showNotification({\n      message: lang(isUsername ? 'UsernameCopied' : 'PhoneCopied'),\n    });\n    handleClose();\n  });\n\n  const title = useMemo(() => {\n    if (!modal) return undefined;\n    const key = isUsername ? 'FragmentUsernameTitle' : 'FragmentPhoneTitle';\n    const formattedCollectible = isUsername\n      ? formatUsername(modal.collectible)\n      : formatPhoneNumberWithCode(phoneCodeList, modal.collectible);\n    return lang(key, formattedCollectible);\n  }, [modal, isUsername, phoneCodeList, lang]);\n\n  const description = useMemo(() => {\n    if (!modal) return undefined;\n    const key = isUsername ? 'FragmentUsernameMessage' : 'FragmentPhoneMessage';\n    const date = formatDateAtTime(lang, modal.purchaseDate * 1000);\n    const currency = formatCurrencyAsString(modal.amount, modal.currency, lang.code);\n    const cryptoCurrency = formatCurrencyAsString(modal.cryptoAmount, modal.cryptoCurrency, lang.code);\n    const paid = `${cryptoCurrency} (${currency})`;\n    return lang(key, [date, paid]);\n  }, [modal, isUsername, lang]);\n\n  return (\n    <Modal\n      isOpen={Boolean(modal)}\n      isSlim\n      contentClassName={styles.content}\n      onClose={closeCollectibleInfoModal}\n    >\n      <Button\n        round\n        color=\"translucent\"\n        size=\"smaller\"\n        className={styles.closeButton}\n        ariaLabel={lang('Close')}\n        onClick={handleClose}\n      >\n        <Icon name=\"close\" />\n      </Button>\n      <div className={styles.icon}>\n        <AnimatedIconWithPreview\n          tgsUrl={isUsername ? LOCAL_TGS_URLS.Mention : LOCAL_TGS_URLS.Fragment}\n          size={TOP_ICON_SIZE}\n        />\n      </div>\n      <h3 className={styles.title}>\n        {title && renderText(title, ['simple_markdown'])}\n      </h3>\n      <PickerSelectedItem\n        fluid\n        className={styles.chip}\n        peerId={modal?.peerId}\n        forceShowSelf\n        onClick={handleOpenChat}\n      />\n      <p className={styles.description}>\n        {description && renderText(description, ['simple_markdown'])}\n      </p>\n      <div className=\"dialog-buttons dialog-buttons-centered\">\n        <Button className=\"confirm-dialog-button\" onClick={handleOpenUrl}>\n          {lang('FragmentUsernameOpen')}\n        </Button>\n        <Button isText className=\"confirm-dialog-button\" onClick={handleCopy}>\n          {lang(isUsername ? 'FragmentUsernameCopy' : 'FragmentPhoneCopy')}\n        </Button>\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const { countryList } = global;\n\n    return {\n      phoneCodeList: countryList.phoneCodes,\n    };\n  },\n)(CollectibleInfoModal));\n","import React, { memo, type TeactNode } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { ApiPeer, ApiWebDocument } from '../../../api/types';\nimport type { CustomPeer } from '../../../types';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Avatar from '../../common/Avatar';\nimport PickerSelectedItem from '../../common/PickerSelectedItem';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport styles from './TableInfoModal.module.scss';\n\ntype ChatItem = { chatId: string };\n\nexport type TableData = [TeactNode, TeactNode | ChatItem][];\n\ntype OwnProps = {\n  isOpen?: boolean;\n  title?: string;\n  tableData?: TableData;\n  headerImageUrl?: string;\n  headerAvatarPeer?: ApiPeer | CustomPeer;\n  headerAvatarWebPhoto?: ApiWebDocument;\n  noHeaderImage?: boolean;\n  header?: TeactNode;\n  footer?: TeactNode;\n  buttonText?: string;\n  className?: string;\n  onClose: NoneToVoidFunction;\n  onButtonClick?: NoneToVoidFunction;\n};\n\nconst TableInfoModal = ({\n  isOpen,\n  title,\n  tableData,\n  headerImageUrl,\n  headerAvatarPeer,\n  headerAvatarWebPhoto,\n  noHeaderImage,\n  header,\n  footer,\n  buttonText,\n  className,\n  onClose,\n  onButtonClick,\n}: OwnProps) => {\n  const { openChat } = getActions();\n  const handleOpenChat = useLastCallback((peerId: string) => {\n    openChat({ id: peerId });\n    onClose();\n  });\n\n  const withAvatar = Boolean(headerAvatarPeer || headerAvatarWebPhoto);\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      hasCloseButton={Boolean(title)}\n      hasAbsoluteCloseButton={!title}\n      isSlim\n      title={title}\n      className={className}\n      contentClassName={styles.content}\n      onClose={onClose}\n    >\n      {!noHeaderImage && (\n        withAvatar ? (\n          <Avatar peer={headerAvatarPeer} webPhoto={headerAvatarWebPhoto} size=\"jumbo\" className={styles.avatar} />\n        ) : (\n          <img className={styles.logo} src={headerImageUrl} alt=\"\" draggable={false} />\n        )\n      )}\n      {header}\n      <table className={styles.table}>\n        {tableData?.map(([label, value]) => (\n          <tr className={styles.row}>\n            <td className={buildClassName(styles.cell, styles.title)}>{label}</td>\n            <td className={buildClassName(styles.cell, styles.value)}>\n              {typeof value === 'object' && 'chatId' in value ? (\n                <PickerSelectedItem\n                  peerId={value.chatId}\n                  className={styles.chatItem}\n                  forceShowSelf\n                  fluid\n                  clickArg={value.chatId}\n                  onClick={handleOpenChat}\n                />\n              ) : value}\n            </td>\n          </tr>\n        ))}\n      </table>\n      {footer}\n      {buttonText && (\n        <Button onClick={onButtonClick || onClose}>{buttonText}</Button>\n      )}\n    </Modal>\n  );\n};\n\nexport default memo(TableInfoModal);\n","import React, { memo, useMemo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiPeer } from '../../../api/types';\nimport type { TabState } from '../../../global/types';\n\nimport { TME_LINK_PREFIX } from '../../../config';\nimport { selectChatMessage, selectSender } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatDateTimeToString } from '../../../util/dates/dateFormat';\nimport renderText from '../../common/helpers/renderText';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport LinkField from '../../common/LinkField';\nimport TableInfoModal, { type TableData } from '../common/TableInfoModal';\n\nimport styles from './GiftCodeModal.module.scss';\n\nimport PremiumLogo from '../../../assets/premium/PremiumLogo.svg';\n\nexport type OwnProps = {\n  modal: TabState['giftCodeModal'];\n};\n\nexport type StateProps = {\n  currentUserId?: string;\n  messageSender?: ApiPeer;\n};\n\nconst GIFTCODE_PATH = 'giftcode';\n\nconst GiftCodeModal = ({\n  currentUserId,\n  modal,\n  messageSender,\n}: OwnProps & StateProps) => {\n  const {\n    closeGiftCodeModal, applyGiftCode, focusMessage,\n  } = getActions();\n  const lang = useOldLang();\n  const isOpen = Boolean(modal);\n\n  const canUse = (!modal?.info.toId || modal?.info.toId === currentUserId) && !modal?.info.usedAt;\n\n  const handleOpenGiveaway = useLastCallback(() => {\n    if (!modal || !modal.info.giveawayMessageId) return;\n    focusMessage({\n      chatId: modal.info.fromId!,\n      messageId: modal.info.giveawayMessageId,\n    });\n    closeGiftCodeModal();\n  });\n\n  const handleButtonClick = useLastCallback(() => {\n    if (canUse) {\n      applyGiftCode({ slug: modal!.slug });\n      return;\n    }\n    closeGiftCodeModal();\n  });\n\n  const modalData = useMemo(() => {\n    if (!modal) return undefined;\n    const { slug, info } = modal;\n\n    const fromId = info.fromId || messageSender?.id;\n\n    const header = (\n      <>\n        <p className={styles.centered}>{renderText(lang('lng_gift_link_about'), ['simple_markdown'])}</p>\n        <LinkField title=\"BoostingGiftLink\" link={`${TME_LINK_PREFIX}/${GIFTCODE_PATH}/${slug}`} />\n      </>\n    );\n\n    const tableData = [\n      [lang('BoostingFrom'), fromId ? { chatId: fromId } : lang('BoostingNoRecipient')],\n      [lang('BoostingTo'), info.toId ? { chatId: info.toId } : lang('BoostingNoRecipient')],\n      [lang('BoostingGift'), lang('BoostingTelegramPremiumFor', lang('Months', info.months, 'i'))],\n      [lang('BoostingReason'), (\n        <span className={buildClassName(info.giveawayMessageId && styles.clickable)} onClick={handleOpenGiveaway}>\n          {info.isFromGiveaway && !info.toId ? lang('BoostingIncompleteGiveaway')\n            : lang(info.isFromGiveaway ? 'BoostingGiveaway' : 'BoostingYouWereSelected')}\n        </span>\n      )],\n      [lang('BoostingDate'), formatDateTimeToString(info.date * 1000, lang.code, true)],\n    ] satisfies TableData;\n\n    const footer = (\n      <span className={styles.centered}>\n        {renderText(\n          info.usedAt ? lang('BoostingUsedLinkDate', formatDateTimeToString(info.usedAt * 1000, lang.code, true))\n            : lang('BoostingSendLinkToAnyone'),\n          ['simple_markdown'],\n        )}\n      </span>\n    );\n\n    return {\n      header,\n      tableData,\n      footer,\n    };\n  }, [lang, messageSender?.id, modal]);\n\n  if (!modalData) return undefined;\n\n  return (\n    <TableInfoModal\n      isOpen={isOpen}\n      title={lang('lng_gift_link_title')}\n      headerImageUrl={PremiumLogo}\n      tableData={modalData.tableData}\n      header={modalData.header}\n      footer={modalData.footer}\n      buttonText={canUse ? lang('BoostingUseLink') : lang('Close')}\n      onButtonClick={handleButtonClick}\n      onClose={closeGiftCodeModal}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const { message } = modal || {};\n    const chatMessage = message && selectChatMessage(global, message.chatId, message.messageId);\n    const sender = chatMessage && selectSender(global, chatMessage);\n\n    return {\n      currentUserId: global.currentUserId,\n      messageSender: sender,\n    };\n  },\n)(GiftCodeModal));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useCallback,\n  useEffect,\n  useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type { ApiChat } from '../../../api/types';\nimport type { TabState } from '../../../global/types';\n\nimport { getUserFullName } from '../../../global/helpers';\nimport { selectChat } from '../../../global/selectors';\nimport { partition } from '../../../util/iteratees';\nimport renderText from '../../common/helpers/renderText';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport AvatarList from '../../common/AvatarList';\nimport Picker from '../../common/Picker';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport Separator from '../../ui/Separator';\n\nimport styles from './InviteViaLinkModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['inviteViaLinkModal'];\n};\n\ntype StateProps = {\n  chat?: ApiChat;\n};\n\nconst InviteViaLinkModal: FC<OwnProps & StateProps> = ({\n  modal,\n  chat,\n}) => {\n  const { sendInviteMessages, closeInviteViaLinkModal, openPremiumModal } = getActions();\n  const { missingUsers } = modal || {};\n\n  const lang = useOldLang();\n  const [selectedMemberIds, setSelectedMemberIds] = useState<string[]>([]);\n\n  const userIds = useMemo(() => missingUsers?.map((user) => user.id), [missingUsers]);\n  const [unselectableIds, selectableIds] = useMemo(() => {\n    if (!missingUsers?.length) return [[], []];\n    const [requirePremiumIds, regularIds] = partition(missingUsers, (user) => user.isRequiringPremiumToMessage);\n    return [requirePremiumIds.map((user) => user.id), regularIds.map((user) => user.id)];\n  }, [missingUsers]);\n\n  const invitableWithPremiumIds = useMemo(() => {\n    return missingUsers?.filter((user) => user.isRequiringPremiumToInvite || user.isRequiringPremiumToMessage)\n      .map((user) => user.id);\n  }, [missingUsers]);\n\n  const isEveryPremiumBlocksPm = useMemo(() => {\n    if (!missingUsers) return undefined;\n    return !missingUsers.some((user) => user.isRequiringPremiumToInvite && !user.isRequiringPremiumToMessage);\n  }, [missingUsers]);\n\n  const topListPeers = useMemo(() => {\n    const users = getGlobal().users.byId;\n    return invitableWithPremiumIds?.map((id) => users[id]);\n  }, [invitableWithPremiumIds]);\n\n  useEffect(() => {\n    setSelectedMemberIds(selectableIds);\n  }, [selectableIds]);\n\n  const handleClose = useLastCallback(() => closeInviteViaLinkModal());\n\n  const handleSendInviteLink = useCallback(() => {\n    sendInviteMessages({ chatId: chat!.id, userIds: selectedMemberIds! });\n    closeInviteViaLinkModal();\n  }, [selectedMemberIds, chat]);\n\n  const handleOpenPremiumModal = useCallback(() => {\n    openPremiumModal();\n  }, []);\n\n  const canSendInviteLink = useMemo(() => {\n    if (!chat) return undefined;\n    return Boolean(chat?.isCreator || chat?.adminRights?.inviteUsers);\n  }, [chat]);\n\n  const inviteSectionText = useMemo(() => {\n    return canSendInviteLink\n      ? lang(missingUsers?.length === 1 ? 'InviteBlockedOneMessage' : 'InviteBlockedManyMessage')\n      : lang('InviteRestrictedUsers2', missingUsers?.length);\n  }, [canSendInviteLink, lang, missingUsers?.length]);\n\n  const premiumSectionText = useMemo(() => {\n    if (!invitableWithPremiumIds?.length || !topListPeers?.length) return undefined;\n    const prefix = isEveryPremiumBlocksPm ? 'InviteMessagePremiumBlocked' : 'InvitePremiumBlocked';\n    let langKey = `${prefix}One`;\n    let params = [getUserFullName(topListPeers[0])];\n    if (invitableWithPremiumIds.length === 2) {\n      langKey = `${prefix}Two`;\n      params = [getUserFullName(topListPeers[0]), getUserFullName(topListPeers[1])];\n    } else if (invitableWithPremiumIds.length === 3) {\n      langKey = `${prefix}Three`;\n      params = [getUserFullName(topListPeers[0]), getUserFullName(topListPeers[1]), getUserFullName(topListPeers[2])];\n    } else if (invitableWithPremiumIds.length > 3) {\n      langKey = `${prefix}Many`;\n      params = [\n        getUserFullName(topListPeers[0]),\n        getUserFullName(topListPeers[1]),\n        (invitableWithPremiumIds!.length - 2).toString(),\n      ];\n    }\n\n    return lang(langKey, params, undefined, topListPeers.length);\n  }, [invitableWithPremiumIds, isEveryPremiumBlocksPm, lang, topListPeers]);\n\n  if (!userIds) return undefined;\n\n  const hasPremiumSection = Boolean(topListPeers?.length);\n  const hasSelectableSection = Boolean(selectableIds?.length);\n\n  return (\n    <Modal\n      isOpen={Boolean(userIds && chat)}\n      contentClassName={styles.content}\n      onClose={handleClose}\n      isSlim\n    >\n      <Button\n        round\n        color=\"translucent\"\n        size=\"smaller\"\n        className={styles.closeButton}\n        ariaLabel={lang('Close')}\n        onClick={handleClose}\n      >\n        <i className=\"icon icon-close\" />\n      </Button>\n      {premiumSectionText && (\n        <>\n          <AvatarList\n            className={styles.avatarList}\n            peers={topListPeers}\n            size=\"large\"\n          />\n          <h3 className={styles.title}>\n            {canSendInviteLink ? lang('InvitePremiumBlockedTitle') : lang('ChannelInviteViaLinkRestricted')}\n          </h3>\n          <p className={styles.contentText}>\n            {renderText(premiumSectionText, ['simple_markdown'])}\n          </p>\n          <Button\n            withPremiumGradient\n            isShiny\n            size=\"smaller\"\n            onClick={handleOpenPremiumModal}\n          >\n            {lang('InvitePremiumBlockedSubscribe')}\n          </Button>\n        </>\n      )}\n      {hasPremiumSection && hasSelectableSection && (\n        <Separator className={styles.separator}>\n          {lang('InvitePremiumBlockedOr')}\n        </Separator>\n      )}\n      {hasSelectableSection && (\n        <>\n          <h3 className={styles.title}>{lang('InviteBlockedTitle')}</h3>\n          <p className={styles.contentText}>\n            {inviteSectionText}\n          </p>\n          <Picker\n            className={styles.userPicker}\n            itemIds={userIds!}\n            selectedIds={selectedMemberIds}\n            lockedUnselectedIds={unselectableIds}\n            lockedUnselectedSubtitle={lang('InvitePremiumBlockedUser')}\n            onSelectedIdsChange={setSelectedMemberIds}\n            isViewOnly={!canSendInviteLink}\n            isRoundCheckbox\n          />\n          {canSendInviteLink && (\n            <Button\n              className={styles.sendInvites}\n              size=\"smaller\"\n              onClick={handleSendInviteLink}\n              disabled={!selectedMemberIds.length}\n            >\n              {lang('SendInviteLink.ActionInvite')}\n            </Button>\n          )}\n        </>\n      )}\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const chat = modal?.chatId ? selectChat(global, modal.chatId) : undefined;\n\n    return {\n      chat,\n    };\n  },\n)(InviteViaLinkModal));\n","import React, { memo, useMemo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { TabState } from '../../../global/types';\n\nimport { prepareMapUrl } from '../../../util/map';\nimport { IS_IOS, IS_MAC_OS } from '../../../util/windowEnvironment';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport styles from './MapModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['mapModal'];\n};\n\nconst OpenMapModal = ({ modal }: OwnProps) => {\n  const { closeMapModal } = getActions();\n\n  const { point: geoPoint, zoom } = modal || {};\n\n  const lang = useOldLang();\n\n  const isOpen = Boolean(geoPoint);\n\n  const handleClose = useLastCallback(() => {\n    closeMapModal();\n  });\n\n  const [googleUrl, bingUrl, appleUrl, osmUrl] = useMemo(() => {\n    if (!geoPoint) {\n      return [];\n    }\n\n    const google = prepareMapUrl('google', geoPoint, zoom);\n    const bing = prepareMapUrl('bing', geoPoint, zoom);\n    const osm = prepareMapUrl('osm', geoPoint, zoom);\n    const apple = prepareMapUrl('apple', geoPoint, zoom);\n\n    return [google, bing, apple, osm];\n  }, [geoPoint, zoom]);\n\n  const openUrl = useLastCallback((url: string) => {\n    closeMapModal();\n    window.open(url, '_blank', 'noopener');\n  });\n\n  const handleGoogleClick = useLastCallback(() => {\n    openUrl(googleUrl!);\n  });\n\n  const handleBingClick = useLastCallback(() => {\n    openUrl(bingUrl!);\n  });\n\n  const handleAppleClick = useLastCallback(() => {\n    openUrl(appleUrl!);\n  });\n\n  const handleOsmClick = useLastCallback(() => {\n    openUrl(osmUrl!);\n  });\n\n  return (\n    <Modal\n      contentClassName={styles.root}\n      title={lang('OpenMapWith')}\n      isOpen={isOpen}\n      onClose={handleClose}\n      isSlim\n    >\n      <div className={styles.buttons}>\n        {(IS_IOS || IS_MAC_OS) && (\n          <Button fluid size=\"smaller\" onClick={handleAppleClick}>\n            Apple Maps\n          </Button>\n        )}\n        <Button fluid size=\"smaller\" onClick={handleGoogleClick}>\n          Google Maps\n        </Button>\n        <Button fluid size=\"smaller\" onClick={handleBingClick}>\n          Bing Maps\n        </Button>\n        <Button fluid size=\"smaller\" onClick={handleOsmClick}>\n          OpenStreetMap\n        </Button>\n      </div>\n      <div className=\"dialog-buttons mt-2\">\n        <Button className=\"confirm-dialog-button\" isText onClick={handleClose}>\n          {lang('Cancel')}\n        </Button>\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(OpenMapModal);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions, getGlobal } from '../../../global';\n\nimport type { TabState } from '../../../global/types';\nimport { AudioOrigin } from '../../../types';\n\nimport { isOwnMessage } from '../../../global/helpers';\nimport { selectTheme } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useCurrentOrPrev from '../../../hooks/useCurrentOrPrev';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\nimport useShowTransition from '../../../hooks/useShowTransition';\n\nimport Audio from '../../common/Audio';\nimport RoundVideo from '../../middle/message/RoundVideo';\nimport Button from '../../ui/Button';\n\nimport styles from './OneTimeMediaModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['oneTimeMediaModal'];\n};\n\nconst OneTimeMediaModal = ({\n  modal,\n}: OwnProps) => {\n  const {\n    closeOneTimeMediaModal,\n  } = getActions();\n\n  const lang = useOldLang();\n  const message = useCurrentOrPrev(modal?.message, true);\n\n  const {\n    shouldRender,\n    transitionClassNames,\n  } = useShowTransition(Boolean(modal));\n\n  const handlePlayVoice = useLastCallback(() => {\n    return undefined;\n  });\n\n  const handleClose = useLastCallback(() => {\n    closeOneTimeMediaModal();\n  });\n\n  if (!shouldRender || !message) {\n    return undefined;\n  }\n\n  const isOwn = isOwnMessage(message);\n  const theme = selectTheme(getGlobal());\n  const closeBtnTitle = isOwn ? lang('Chat.Voice.Single.Close') : lang('Chat.Voice.Single.DeleteAndClose');\n\n  function renderMedia() {\n    if (!message?.content) {\n      return undefined;\n    }\n    const { voice, video } = message.content;\n    if (voice) {\n      return (\n        <Audio\n          className={styles.voice}\n          theme={theme}\n          message={message}\n          origin={AudioOrigin.OneTimeModal}\n          autoPlay\n          onPlay={handlePlayVoice}\n          onPause={handleClose}\n        />\n      );\n    } else if (video?.isRound) {\n      return (\n        <RoundVideo\n          className={styles.video}\n          message={message}\n          origin=\"oneTimeModal\"\n          onStop={handleClose}\n        />\n      );\n    }\n    return undefined;\n  }\n\n  return (\n    <div className={buildClassName(styles.root, transitionClassNames)}>\n      {renderMedia()}\n      <div className={styles.footer}>\n        <Button\n          faded\n          onClick={handleClose}\n          pill\n          size=\"smaller\"\n          color={theme === 'dark' ? 'dark' : 'secondary'}\n          className={styles.closeBtn}\n        >\n          {closeBtnTitle}\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(OneTimeMediaModal);\n","import React, {\n  memo, useEffect, useMemo, useRef,\n} from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { TabState } from '../../../global/types';\n\nimport { requestMeasure, requestMutation } from '../../../lib/fasterdom/fasterdom';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Icon from '../../common/icons/Icon';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport ListItem from '../../ui/ListItem';\nimport Modal from '../../ui/Modal';\nimport Transition, { ACTIVE_SLIDE_CLASS_NAME, TO_SLIDE_CLASS_NAME } from '../../ui/Transition';\n\nimport styles from './ReportAdModal.module.scss';\n\nconst ADDED_PADDING = 40;\n\nexport type OwnProps = {\n  modal: TabState['reportAdModal'];\n};\n\nconst ReportAdModal = ({\n  modal,\n}: OwnProps) => {\n  const {\n    reportSponsoredMessage, closeReportAdModal, openPreviousReportAdModal,\n  } = getActions();\n  const lang = useOldLang();\n  const isOpen = Boolean(modal);\n\n  // eslint-disable-next-line no-null/no-null\n  const transitionRef = useRef<HTMLDivElement>(null);\n\n  const handleOptionClick = useLastCallback((e, option: string) => {\n    const { chatId, randomId } = modal!;\n    reportSponsoredMessage({ chatId, randomId, option });\n  });\n\n  const [renderingSection, renderingDepth] = useMemo(() => {\n    if (!modal) return [undefined, 0];\n    const sectionDepth = modal.sections.length - 1;\n    return [modal.sections[sectionDepth], sectionDepth];\n  }, [modal]);\n\n  const handleBackClick = useLastCallback(() => {\n    if (!renderingDepth) {\n      closeReportAdModal();\n      return;\n    }\n\n    openPreviousReportAdModal();\n  });\n\n  const bottomText = useMemo(() => {\n    if (!modal) return undefined;\n    const template = lang('lng_report_sponsored_reported_learn');\n    const parts = template.split('{link}');\n    return [\n      parts[0],\n      <SafeLink text={lang('lng_report_sponsored_reported_link')} url={lang('ReportAd.Help_URL')} />,\n      parts[1],\n    ];\n  }, [lang, modal]);\n\n  const header = useMemo(() => {\n    if (!modal) {\n      return undefined;\n    }\n\n    const hasSubtitle = Boolean(renderingSection?.subtitle);\n\n    return (\n      <div className=\"modal-header-condensed\">\n        <Button\n          round\n          color=\"translucent\"\n          size=\"smaller\"\n          ariaLabel={lang(renderingDepth ? 'Back' : 'Close')}\n          onClick={handleBackClick}\n        >\n          <Icon name={renderingDepth ? 'arrow-left' : 'close'} />\n        </Button>\n        <div className={buildClassName('modal-title', styles.modalTitle, hasSubtitle && styles.titleMultiline)}>\n          <h3 className={styles.title}>{lang('ReportAd')}</h3>\n          {hasSubtitle && (\n            <span className={styles.subtitle}>{renderingSection.subtitle}</span>\n          )}\n        </div>\n      </div>\n    );\n  }, [lang, modal, renderingDepth, renderingSection?.subtitle]);\n\n  useEffect(() => {\n    if (!modal) return;\n    const slide = document.querySelector<HTMLElement>(`.${ACTIVE_SLIDE_CLASS_NAME} > .${styles.slide}`);\n    if (!slide) return;\n\n    const height = slide.scrollHeight;\n    requestMutation(() => {\n      transitionRef.current!.style.height = `${height + ADDED_PADDING}px`;\n    });\n  }, [modal]);\n\n  const handleAnimationStart = useLastCallback(() => {\n    const slide = document.querySelector<HTMLElement>(`.${TO_SLIDE_CLASS_NAME} > .${styles.slide}`)!;\n\n    requestMeasure(() => {\n      const height = slide.scrollHeight;\n      requestMutation(() => {\n        transitionRef.current!.style.height = `${height + ADDED_PADDING}px`;\n      });\n    });\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      hasCloseButton\n      header={header}\n      onClose={closeReportAdModal}\n    >\n      <Transition\n        name=\"slide\"\n        className={styles.transition}\n        ref={transitionRef}\n        activeKey={renderingDepth}\n        onStart={handleAnimationStart}\n      >\n        <div className={styles.slide}>\n          <h3 className={styles.sectionTitle}>{renderingSection?.title}</h3>\n          {renderingSection?.options.map((option) => (\n            <ListItem\n              narrow\n              secondaryIcon=\"next\"\n              className={styles.option}\n              buttonClassName={styles.optionButton}\n              clickArg={option.option}\n              onClick={handleOptionClick}\n            >\n              <div className={styles.optionText}>{option.text}</div>\n            </ListItem>\n          ))}\n        </div>\n        <p className={styles.description}>{bottomText}</p>\n      </Transition>\n    </Modal>\n  );\n};\n\nexport default memo(ReportAdModal);\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { formatInteger } from '../../../util/textFormat';\n\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport StarIcon from '../../common/icons/StarIcon';\n\nimport styles from './StarsBalanceModal.module.scss';\n\ntype OwnProps = {\n  balance: number;\n  className?: string;\n};\n\nconst BalanceBlock = ({ balance, className }: OwnProps) => {\n  const lang = useOldLang();\n\n  return (\n    <div className={buildClassName(styles.balance, className)}>\n      <span className={styles.smallerText}>{lang('StarsBalance')}</span>\n      <div className={styles.balanceBottom}>\n        <StarIcon type=\"gold\" size=\"middle\" />\n        {formatInteger(balance)}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(BalanceBlock);\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport type { ApiMediaExtendedPreview, BoughtPaidMedia } from '../../../api/types';\n\nimport { getMediaHash, getMediaThumbUri } from '../../../global/helpers';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useMedia from '../../../hooks/useMedia';\n\nimport Icon from '../../common/icons/Icon';\nimport MediaSpoiler from '../../common/MediaSpoiler';\n\nimport styles from './PaidMediaThumb.module.scss';\n\ntype OwnProps = {\n  className?: string;\n  media: ApiMediaExtendedPreview[] | BoughtPaidMedia[];\n  isTransactionPreview?: boolean;\n  onClick?: NoneToVoidFunction;\n};\n\nconst THUMB_LIMIT = 3;\nconst PREVIEW_THUMB_LIMIT = 2;\n\nconst PaidMediaThumb = ({\n  media, className, isTransactionPreview, onClick,\n}: OwnProps) => {\n  const count = Math.min(media.length, isTransactionPreview ? PREVIEW_THUMB_LIMIT : THUMB_LIMIT);\n  const isLocked = 'mediaType' in media[0];\n  return (\n    <div\n      className={buildClassName(\n        styles.root,\n        styles[`itemCount${count}`],\n        isTransactionPreview && styles.preview,\n        className,\n      )}\n      dir=\"rtl\"\n      onClick={onClick}\n    >\n      {media.slice(0, count).reverse().map((item, i, arr) => {\n        const realIndex = arr.length - i - 1;\n        return 'mediaType' in item ? (\n          <MediaSpoiler\n            className={styles.thumb}\n            isVisible\n            width={item.width}\n            height={item.height}\n            thumbDataUri={item.thumbnail?.dataUri}\n          />\n        ) : (\n          <SingleMediaThumb\n            className={buildClassName(isTransactionPreview && realIndex > 0 && styles.noOutline)}\n            boughtMedia={item}\n            index={realIndex}\n          />\n        );\n      })}\n      {isLocked && (\n        <div className={styles.count}>\n          <Icon name=\"stars-lock\" />\n          {media.length > 1 ? media.length : ''}\n        </div>\n      )}\n    </div>\n  );\n};\n\nfunction SingleMediaThumb({\n  boughtMedia,\n  index,\n  className,\n}: {\n  boughtMedia: BoughtPaidMedia;\n  index?: number;\n  className?: string;\n}) {\n  const media = (boughtMedia.video || boughtMedia.photo)!;\n  const mediaHash = getMediaHash(media, 'pictogram');\n  const thumb = getMediaThumbUri(media);\n\n  const mediaBlob = useMedia(mediaHash);\n\n  return (\n    <div className={buildClassName(styles.thumb, index !== undefined && `stars-transaction-media-${index}`, className)}>\n      {thumb && <img className={styles.blurry} src={thumb} alt=\"\" />}\n      {mediaBlob && <img className={styles.full} src={mediaBlob} alt=\"\" />}\n    </div>\n  );\n}\n\nexport default memo(PaidMediaThumb);\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiStarTopupOption, ApiUser } from '../../../api/types';\nimport type { GlobalState, TabState } from '../../../global/types';\n\nimport { getUserFullName } from '../../../global/helpers';\nimport { selectUser } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatCurrency } from '../../../util/formatCurrency';\nimport renderText from '../../common/helpers/renderText';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Icon from '../../common/icons/Icon';\nimport StarIcon from '../../common/icons/StarIcon';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport InfiniteScroll from '../../ui/InfiniteScroll';\nimport Modal from '../../ui/Modal';\nimport TabList, { type TabWithProperties } from '../../ui/TabList';\nimport Transition from '../../ui/Transition';\nimport BalanceBlock from './BalanceBlock';\nimport TransactionItem from './StarsTransactionItem';\n\nimport styles from './StarsBalanceModal.module.scss';\n\nimport StarLogo from '../../../assets/icons/StarLogo.svg';\nimport StarsBackground from '../../../assets/stars-bg.png';\n\nconst TRANSACTION_TYPES = ['all', 'inbound', 'outbound'] as const;\n\nconst TRANSACTION_TABS: TabWithProperties[] = [\n  { title: 'StarsTransactionsAll' },\n  { title: 'StarsTransactionsIncoming' },\n  { title: 'StarsTransactionsOutgoing' },\n];\n\nexport type OwnProps = {\n  modal: TabState['starsBalanceModal'];\n};\n\ntype StateProps = {\n  starsBalanceState?: GlobalState['stars'];\n  originPaymentBot?: ApiUser;\n};\n\nconst StarsBalanceModal = ({\n  modal, starsBalanceState, originPaymentBot,\n}: OwnProps & StateProps) => {\n  const { closeStarsBalanceModal, loadStarsTransactions, openInvoice } = getActions();\n\n  const { balance, history, topupOptions } = starsBalanceState || {};\n\n  const lang = useOldLang();\n\n  const [isHeaderHidden, setHeaderHidden] = useState(true);\n  const [areOptionsExtended, markOptionsExtended, unmarkOptionsExtended] = useFlag();\n  const [selectedTabIndex, setSelectedTabIndex] = useState(0);\n\n  const isOpen = Boolean(modal && starsBalanceState);\n\n  const productStarsPrice = modal?.originPayment?.invoice?.amount;\n  const starsNeeded = productStarsPrice ? productStarsPrice - (balance || 0) : undefined;\n  const originBotName = originPaymentBot && getUserFullName(originPaymentBot);\n  const shouldShowTransactions = Boolean(history?.all?.transactions.length && !modal?.originPayment);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setHeaderHidden(true);\n      unmarkOptionsExtended();\n      setSelectedTabIndex(0);\n    }\n  }, [isOpen]);\n\n  const [renderingOptions, canExtend] = useMemo(() => {\n    if (!topupOptions) {\n      return [undefined, false];\n    }\n\n    const maxOption = topupOptions.reduce((max, option) => (\n      max.stars > option.stars ? max : option\n    ));\n    const forceShowAll = starsNeeded && maxOption.stars < starsNeeded;\n\n    const result: { option: ApiStarTopupOption; starsCount: number }[] = [];\n    let currentStackedStarsCount = 0;\n    let canExtendOptions = false;\n    topupOptions.forEach((option) => {\n      if (!option.isExtended) currentStackedStarsCount++;\n\n      if (starsNeeded && !forceShowAll && option.stars < starsNeeded) return;\n      if (!areOptionsExtended && option.isExtended) {\n        canExtendOptions = true;\n        return;\n      }\n      result.push({\n        option,\n        starsCount: currentStackedStarsCount,\n      });\n    });\n\n    return [result, canExtendOptions];\n  }, [areOptionsExtended, topupOptions, starsNeeded]);\n\n  const tosText = useMemo(() => {\n    if (!isOpen) return undefined;\n\n    const text = lang('lng_credits_summary_options_about');\n    const parts = text.split('{link}');\n    return [\n      parts[0],\n      <SafeLink url={lang('StarsTOSLink')} text={lang('lng_credits_summary_options_about_link')} />,\n      parts[1],\n    ];\n  }, [isOpen, lang]);\n\n  function handleScroll(e: React.UIEvent<HTMLDivElement>) {\n    const { scrollTop } = e.currentTarget;\n\n    setHeaderHidden(scrollTop <= 150);\n  }\n\n  const handleClick = useLastCallback((option: ApiStarTopupOption) => {\n    openInvoice({\n      type: 'stars',\n      option,\n    });\n  });\n\n  const handleLoadMore = useLastCallback(() => {\n    loadStarsTransactions({\n      type: TRANSACTION_TYPES[selectedTabIndex],\n    });\n  });\n\n  return (\n    <Modal className={styles.root} isOpen={isOpen} onClose={closeStarsBalanceModal}>\n      <div className={buildClassName(styles.main, 'custom-scroll')} onScroll={handleScroll}>\n        <Button\n          round\n          size=\"smaller\"\n          className={styles.closeButton}\n          color=\"translucent\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => closeStarsBalanceModal()}\n          ariaLabel={lang('Close')}\n        >\n          <Icon name=\"close\" />\n        </Button>\n        <BalanceBlock balance={balance || 0} className={styles.modalBalance} />\n        <div className={buildClassName(styles.header, isHeaderHidden && styles.hiddenHeader)}>\n          <h2 className={styles.starHeaderText}>\n            {lang('TelegramStars')}\n          </h2>\n        </div>\n        <div className={styles.section}>\n          <img className={styles.logo} src={StarLogo} alt=\"\" draggable={false} />\n          <img className={styles.logoBackground} src={StarsBackground} alt=\"\" draggable={false} />\n          <h2 className={styles.headerText}>\n            {starsNeeded ? lang('StarsNeededTitle', starsNeeded) : lang('TelegramStars')}\n          </h2>\n          <div className={styles.description}>\n            {renderText(\n              starsNeeded ? lang('StarsNeededText', originBotName) : lang('TelegramStarsInfo'),\n              ['simple_markdown', 'emoji'],\n            )}\n          </div>\n          <div className={styles.options}>\n            {renderingOptions?.map(({ option, starsCount }) => (\n              <StarTopupOption option={option} starsCount={starsCount} onClick={handleClick} />\n            ))}\n            {!areOptionsExtended && canExtend && (\n              <Button className={styles.moreOptions} isText noForcedUpperCase onClick={markOptionsExtended}>\n                {lang('Stars.Purchase.ShowMore')}\n                <Icon className={styles.iconDown} name=\"down\" />\n              </Button>\n            )}\n          </div>\n        </div>\n        <div className={styles.secondaryInfo}>\n          {tosText}\n        </div>\n        {shouldShowTransactions && (\n          <>\n            <TabList\n              big\n              activeTab={selectedTabIndex}\n              tabs={TRANSACTION_TABS}\n              onSwitchTab={setSelectedTabIndex}\n            />\n            <div className={styles.section}>\n              <Transition\n                name={lang.isRtl ? 'slideOptimizedRtl' : 'slideOptimized'}\n                activeKey={selectedTabIndex}\n                renderCount={TRANSACTION_TABS.length}\n                shouldRestoreHeight\n                className={styles.transition}\n              >\n                <InfiniteScroll\n                  onLoadMore={handleLoadMore}\n                  items={history?.[TRANSACTION_TYPES[selectedTabIndex]]?.transactions}\n                  className={styles.transactions}\n                  noFastList\n                >\n                  {history?.[TRANSACTION_TYPES[selectedTabIndex]]?.transactions.map((transaction) => (\n                    <TransactionItem\n                      key={`${transaction.id}-${transaction.isRefund}`}\n                      transaction={transaction}\n                    />\n                  ))}\n                </InfiniteScroll>\n              </Transition>\n            </div>\n          </>\n        )}\n      </div>\n    </Modal>\n  );\n};\n\nfunction StarTopupOption({\n  option, starsCount, onClick,\n}: {\n  option: ApiStarTopupOption; starsCount: number; onClick?: (option: ApiStarTopupOption) => void;\n}) {\n  const lang = useOldLang();\n\n  return (\n    <div className={styles.option} key={option.stars} onClick={() => onClick?.(option)}>\n      <div className={styles.optionTop}>\n        +{option.stars}\n        {/* Switch directionality for correct order. Can't use flex because https://issues.chromium.org/issues/40249030 */}\n        <div className={styles.stackedStars} dir={lang.isRtl ? 'ltr' : 'rtl'}>\n          {Array.from({ length: starsCount }).map(() => (\n            <StarIcon className={styles.stackedStar} type=\"gold\" size=\"big\" />\n          ))}\n        </div>\n      </div>\n      <div className={styles.optionBottom}>\n        {formatCurrency(option.amount, option.currency, lang.code)}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const botId = modal?.originPayment?.botId;\n    const bot = botId ? selectUser(global, botId) : undefined;\n\n    return {\n      starsBalanceState: global.stars,\n      originPaymentBot: bot,\n    };\n  },\n)(StarsBalanceModal));\n","import React, { memo, useEffect, useMemo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiChat, ApiMediaExtendedPreview, ApiMessage, ApiUser,\n} from '../../../api/types';\nimport type { GlobalState, TabState } from '../../../global/types';\n\nimport { getChatTitle, getUserFullName } from '../../../global/helpers';\nimport {\n  selectChat, selectChatMessage, selectTabState, selectUser,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport renderText from '../../common/helpers/renderText';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Avatar from '../../common/Avatar';\nimport StarIcon from '../../common/icons/StarIcon';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport BalanceBlock from './BalanceBlock';\nimport PaidMediaThumb from './PaidMediaThumb';\n\nimport styles from './StarsBalanceModal.module.scss';\n\nimport StarsBackground from '../../../assets/stars-bg.png';\n\nexport type OwnProps = {\n  modal: TabState['isStarPaymentModalOpen'];\n};\n\ntype StateProps = {\n  payment?: TabState['payment'];\n  starsBalanceState?: GlobalState['stars'];\n  bot?: ApiUser;\n  paidMediaMessage?: ApiMessage;\n  paidMediaChat?: ApiChat;\n};\n\nconst StarPaymentModal = ({\n  modal,\n  bot,\n  starsBalanceState,\n  payment,\n  paidMediaMessage,\n  paidMediaChat,\n}: OwnProps & StateProps) => {\n  const { closePaymentModal, openStarsBalanceModal, sendStarPaymentForm } = getActions();\n  const [isLoading, markLoading, unmarkLoading] = useFlag();\n  const isOpen = Boolean(modal && starsBalanceState);\n\n  const photo = payment?.invoice?.photo;\n\n  const lang = useOldLang();\n\n  useEffect(() => {\n    if (!isOpen) {\n      unmarkLoading();\n    }\n  }, [isOpen]);\n\n  const descriptionText = useMemo(() => {\n    if (!payment?.invoice) {\n      return '';\n    }\n\n    const botName = getUserFullName(bot);\n    const starsText = lang('Stars.Intro.PurchasedText.Stars', payment.invoice.amount);\n\n    if (paidMediaMessage) {\n      const extendedMedia = paidMediaMessage.content.paidMedia!.extendedMedia as ApiMediaExtendedPreview[];\n      const areAllPhotos = extendedMedia.every((media) => !media.duration);\n      const areAllVideos = extendedMedia.every((media) => !!media.duration);\n\n      const mediaText = areAllPhotos ? lang('Stars.Transfer.Photos', extendedMedia.length)\n        : areAllVideos ? lang('Stars.Transfer.Videos', extendedMedia.length)\n          : lang('Media', extendedMedia.length);\n\n      const channelTitle = getChatTitle(lang, paidMediaChat!);\n      return lang('Stars.Transfer.UnlockInfo', [mediaText, channelTitle, starsText]);\n    }\n\n    return lang('Stars.Transfer.Info', [payment.invoice.title, botName, starsText]);\n  }, [payment?.invoice, bot, lang, paidMediaMessage, paidMediaChat]);\n\n  const handlePayment = useLastCallback(() => {\n    const price = payment?.invoice?.amount;\n    const balance = starsBalanceState?.balance;\n    if (price === undefined || balance === undefined) {\n      return;\n    }\n\n    if (price > balance) {\n      openStarsBalanceModal({\n        originPayment: payment,\n      });\n      return;\n    }\n\n    sendStarPaymentForm();\n    markLoading();\n  });\n\n  return (\n    <Modal\n      contentClassName={styles.paymentContent}\n      isOpen={isOpen}\n      hasAbsoluteCloseButton\n      isSlim\n      onClose={closePaymentModal}\n    >\n      <BalanceBlock balance={starsBalanceState?.balance || 0} className={styles.modalBalance} />\n      <div className={styles.paymentImages} dir={lang.isRtl ? 'ltr' : 'rtl'}>\n        {paidMediaMessage ? (\n          <PaidMediaThumb media={paidMediaMessage.content.paidMedia!.extendedMedia} />\n        ) : (\n          <>\n            <Avatar peer={bot} size=\"giant\" />\n            {photo && <Avatar className={styles.paymentPhoto} webPhoto={photo} size=\"giant\" />}\n          </>\n        )}\n        <img className={styles.paymentImageBackground} src={StarsBackground} alt=\"\" draggable={false} />\n      </div>\n      <h2 className={styles.headerText}>\n        {lang('StarsConfirmPurchaseTitle')}\n      </h2>\n      <div className={buildClassName(styles.description, styles.smallerText)}>\n        {renderText(descriptionText, ['simple_markdown', 'emoji'])}\n      </div>\n      <Button className={styles.paymentButton} size=\"smaller\" onClick={handlePayment} isLoading={isLoading}>\n        {lang('Stars.Transfer.Pay')}\n        <div className={styles.paymentAmount}>\n          {payment?.invoice?.amount}\n          <StarIcon className={styles.paymentButtonStar} size=\"small\" />\n        </div>\n      </Button>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const payment = selectTabState(global).payment;\n    const bot = payment?.botId ? selectUser(global, payment.botId) : undefined;\n\n    const messageInputInvoice = payment.inputInvoice?.type === 'message' ? payment.inputInvoice : undefined;\n    const message = messageInputInvoice\n      ? selectChatMessage(global, messageInputInvoice.chatId, messageInputInvoice.messageId) : undefined;\n    const chat = messageInputInvoice ? selectChat(global, messageInputInvoice.chatId) : undefined;\n    const isPaidMedia = message?.content.paidMedia;\n\n    return {\n      bot,\n      starsBalanceState: global.stars,\n      payment,\n      paidMediaMessage: isPaidMedia ? message : undefined,\n      paidMediaChat: isPaidMedia ? chat : undefined,\n    };\n  },\n)(StarPaymentModal));\n","import React, { memo, useMemo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type {\n  ApiPeer,\n  ApiStarsTransaction,\n} from '../../../api/types';\nimport type { GlobalState } from '../../../global/types';\nimport type { CustomPeer } from '../../../types';\n\nimport { getSenderTitle } from '../../../global/helpers';\nimport { buildStarsTransactionCustomPeer, formatStarsTransactionAmount } from '../../../global/helpers/payments';\nimport { selectPeer } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatDateTimeToString } from '../../../util/dates/dateFormat';\nimport { CUSTOM_PEER_PREMIUM } from '../../../util/objects/customPeer';\n\nimport useSelector from '../../../hooks/data/useSelector';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Avatar from '../../common/Avatar';\nimport StarIcon from '../../common/icons/StarIcon';\nimport PaidMediaThumb from './PaidMediaThumb';\n\nimport styles from './StarsTransactionItem.module.scss';\n\ntype OwnProps = {\n  transaction: ApiStarsTransaction;\n};\n\nfunction selectOptionalPeer(peerId?: string) {\n  return (global: GlobalState) => (\n    peerId ? selectPeer(global, peerId) : undefined\n  );\n}\n\nconst StarsTransactionItem = ({ transaction }: OwnProps) => {\n  const { getStarsReceipt } = getActions();\n  const {\n    date,\n    stars,\n    photo,\n    peer: transactionPeer,\n    extendedMedia,\n  } = transaction;\n  const lang = useOldLang();\n\n  const peerId = transactionPeer.type === 'peer' ? transactionPeer.id : undefined;\n  const peer = useSelector(selectOptionalPeer(peerId));\n\n  const data = useMemo(() => {\n    let title = transaction.title || (transaction.extendedMedia ? lang('StarMediaPurchase') : undefined);\n    let description;\n    let status: string | undefined;\n    let avatarPeer: ApiPeer | CustomPeer | undefined;\n\n    if (transaction.peer.type === 'peer') {\n      description = peer && getSenderTitle(lang, peer);\n      avatarPeer = peer || CUSTOM_PEER_PREMIUM;\n    } else {\n      const customPeer = buildStarsTransactionCustomPeer(transaction.peer);\n      title = lang(customPeer.titleKey);\n      description = lang(customPeer.subtitleKey!);\n      avatarPeer = customPeer;\n    }\n\n    if (transaction.photo) {\n      avatarPeer = undefined;\n    }\n\n    if (transaction.isRefund) {\n      status = lang('StarsRefunded');\n    }\n\n    if (transaction.hasFailed) {\n      status = lang('StarsFailed');\n    }\n\n    if (transaction.isPending) {\n      status = lang('StarsPending');\n    }\n\n    return {\n      title,\n      description,\n      avatarPeer,\n      status,\n    };\n  }, [lang, peer, transaction]);\n\n  const handleClick = useLastCallback(() => {\n    getStarsReceipt({ transaction });\n  });\n\n  return (\n    <div className={styles.root} onClick={handleClick}>\n      {extendedMedia ? <PaidMediaThumb media={extendedMedia} isTransactionPreview />\n        : <Avatar size=\"medium\" webPhoto={photo} peer={data.avatarPeer} />}\n      <div className={styles.info}>\n        <h3 className={styles.title}>{data.title}</h3>\n        <p className={styles.description}>{data.description}</p>\n        <p className={styles.date}>\n          {formatDateTimeToString(date * 1000, lang.code, true)}\n          {data.status && `  (${data.status})`}\n        </p>\n      </div>\n      <div className={styles.stars}>\n        <span className={buildClassName(styles.amount, stars < 0 ? styles.negative : styles.positive)}>\n          {formatStarsTransactionAmount(stars)}\n        </span>\n        <StarIcon className={styles.star} type=\"gold\" size=\"big\" />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(StarsTransactionItem);\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type { ApiUser } from '../../../api/types';\nimport type { TabState } from '../../../global/types';\n\nimport { getUserFullName } from '../../../global/helpers';\nimport { selectUser } from '../../../global/selectors';\nimport { ensureProtocol } from '../../../util/ensureProtocol';\nimport renderText from '../../common/helpers/renderText';\n\nimport useCurrentOrPrev from '../../../hooks/useCurrentOrPrev';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Checkbox from '../../ui/Checkbox';\nimport ConfirmDialog from '../../ui/ConfirmDialog';\n\nimport styles from './UrlAuthModal.module.scss';\n\nexport type OwnProps = {\n  modal?: TabState['urlAuth'];\n};\n\ntype StateProps = {\n  currentUser?: ApiUser;\n};\n\nconst UrlAuthModal: FC<OwnProps & StateProps> = ({\n  modal, currentUser,\n}) => {\n  const { closeUrlAuthModal, acceptBotUrlAuth, acceptLinkUrlAuth } = getActions();\n  const [isLoginChecked, setLoginChecked] = useState(true);\n  const [isWriteAccessChecked, setWriteAccessChecked] = useState(true);\n  const currentAuth = useCurrentOrPrev(modal, false);\n  const { domain, botId, shouldRequestWriteAccess } = currentAuth?.request || {};\n  const bot = botId ? getGlobal().users.byId[botId] : undefined;\n\n  const lang = useOldLang();\n\n  const handleOpen = useCallback(() => {\n    if (modal?.url && isLoginChecked) {\n      const acceptAction = modal.button ? acceptBotUrlAuth : acceptLinkUrlAuth;\n      acceptAction({\n        isWriteAllowed: isWriteAccessChecked,\n      });\n    } else {\n      window.open(ensureProtocol(currentAuth?.url), '_blank', 'noopener');\n    }\n    closeUrlAuthModal();\n  }, [\n    modal, isLoginChecked, closeUrlAuthModal, acceptBotUrlAuth, acceptLinkUrlAuth, isWriteAccessChecked, currentAuth,\n  ]);\n\n  const handleDismiss = useCallback(() => {\n    closeUrlAuthModal();\n  }, [closeUrlAuthModal]);\n\n  const handleLoginChecked = useCallback((value: boolean) => {\n    setLoginChecked(value);\n    setWriteAccessChecked(value);\n  }, [setLoginChecked]);\n\n  // Reset on re-open\n  useEffect(() => {\n    if (domain) {\n      setLoginChecked(true);\n      setWriteAccessChecked(Boolean(shouldRequestWriteAccess));\n    }\n  }, [shouldRequestWriteAccess, domain]);\n\n  return (\n    <ConfirmDialog\n      isOpen={Boolean(modal?.url)}\n      onClose={handleDismiss}\n      title={lang('OpenUrlTitle')}\n      confirmLabel={lang('OpenUrlTitle')}\n      confirmHandler={handleOpen}\n    >\n      {renderText(lang('OpenUrlAlert2', currentAuth?.url), ['links'])}\n      {domain && (\n        <Checkbox\n          checked={isLoginChecked}\n          label={(\n            <>\n              {renderText(\n                lang('Conversation.OpenBotLinkLogin', [domain, getUserFullName(currentUser)]),\n                ['simple_markdown'],\n              )}\n            </>\n          )}\n          onCheck={handleLoginChecked}\n          className={styles.checkbox}\n        />\n      )}\n      {shouldRequestWriteAccess && (\n        <Checkbox\n          checked={isWriteAccessChecked}\n          label={(\n            <>\n              {renderText(\n                lang('Conversation.OpenBotLinkAllowMessages', getUserFullName(bot)),\n                ['simple_markdown'],\n              )}\n            </>\n          )}\n          onCheck={setWriteAccessChecked}\n          disabled={!isLoginChecked}\n          className={styles.checkbox}\n        />\n      )}\n    </ConfirmDialog>\n  );\n};\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const currentUser = selectUser(global, global.currentUserId!);\n    return {\n      currentUser,\n    };\n  },\n)(UrlAuthModal));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiAttachBot, ApiChat, ApiUser } from '../../../api/types';\nimport type { TabState } from '../../../global/types';\nimport type { ThemeKey } from '../../../types';\nimport type { PopupOptions, WebAppInboundEvent } from '../../../types/webapp';\n\nimport { TME_LINK_PREFIX } from '../../../config';\nimport { convertToApiChatType } from '../../../global/helpers';\nimport {\n  selectCurrentChat, selectTabState, selectTheme, selectUser,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport buildStyle from '../../../util/buildStyle';\nimport { getColorLuma } from '../../../util/colors';\nimport { hexToRgb } from '../../../util/switchTheme';\nimport { extractCurrentThemeParams, validateHexColor } from '../../../util/themeStyle';\nimport { callApi } from '../../../api/gramjs';\nimport renderText from '../../common/helpers/renderText';\n\nimport useInterval from '../../../hooks/schedulers/useInterval';\nimport useAppLayout from '../../../hooks/useAppLayout';\nimport useFlag from '../../../hooks/useFlag';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\nimport usePrevious from '../../../hooks/usePrevious';\nimport useSyncEffect from '../../../hooks/useSyncEffect';\nimport usePopupLimit from './hooks/usePopupLimit';\nimport useWebAppFrame from './hooks/useWebAppFrame';\n\nimport Icon from '../../common/icons/Icon';\nimport Button from '../../ui/Button';\nimport ConfirmDialog from '../../ui/ConfirmDialog';\nimport DropdownMenu from '../../ui/DropdownMenu';\nimport MenuItem from '../../ui/MenuItem';\nimport Modal from '../../ui/Modal';\nimport Spinner from '../../ui/Spinner';\n\nimport styles from './WebAppModal.module.scss';\n\ntype WebAppButton = {\n  isVisible: boolean;\n  isActive: boolean;\n  text: string;\n  color: string;\n  textColor: string;\n  isProgressVisible: boolean;\n};\n\nexport type OwnProps = {\n  modal?: TabState['webApp'];\n};\n\ntype StateProps = {\n  chat?: ApiChat;\n  bot?: ApiUser;\n  attachBot?: ApiAttachBot;\n  theme?: ThemeKey;\n  isPaymentModalOpen?: boolean;\n  paymentStatus?: TabState['payment']['status'];\n};\n\nconst NBSP = '\\u00A0';\n\nconst MAIN_BUTTON_ANIMATION_TIME = 250;\nconst PROLONG_INTERVAL = 45000; // 45s\nconst ANIMATION_WAIT = 400;\nconst POPUP_SEQUENTIAL_LIMIT = 3;\nconst LUMA_THRESHOLD = 128;\nconst POPUP_RESET_DELAY = 2000; // 2s\nconst SANDBOX_ATTRIBUTES = [\n  'allow-scripts',\n  'allow-same-origin',\n  'allow-popups',\n  'allow-forms',\n  'allow-modals',\n  'allow-storage-access-by-user-activation',\n].join(' ');\n\nconst DEFAULT_BUTTON_TEXT: Record<string, string> = {\n  ok: 'OK',\n  cancel: 'Cancel',\n  close: 'Close',\n};\n\nconst WebAppModal: FC<OwnProps & StateProps> = ({\n  modal,\n  chat,\n  bot,\n  attachBot,\n  theme,\n  isPaymentModalOpen,\n  paymentStatus,\n}) => {\n  const {\n    closeWebApp,\n    sendWebViewData,\n    prolongWebView,\n    toggleAttachBot,\n    openTelegramLink,\n    openChat,\n    setWebAppPaymentSlug,\n    switchBotInline,\n    sharePhoneWithBot,\n  } = getActions();\n  const [mainButton, setMainButton] = useState<WebAppButton | undefined>();\n  const [isBackButtonVisible, setIsBackButtonVisible] = useState(false);\n  const [isSettingsButtonVisible, setIsSettingsButtonVisible] = useState(false);\n\n  const [backgroundColor, setBackgroundColor] = useState<string>();\n  const [headerColor, setHeaderColor] = useState<string>();\n\n  const [shouldConfirmClosing, setShouldConfirmClosing] = useState(false);\n  const [isCloseModalOpen, openCloseModal, hideCloseModal] = useFlag(false);\n  const [isRemoveModalOpen, openRemoveModal, hideRemoveModal] = useFlag(false);\n\n  const [isLoaded, markLoaded, markUnloaded] = useFlag(false);\n\n  const [popupParameters, setPopupParameters] = useState<PopupOptions | undefined>();\n  const [isRequestingPhone, setIsRequestingPhone] = useState(false);\n  const [isRequesingWriteAccess, setIsRequestingWriteAccess] = useState(false);\n  const {\n    unlockPopupsAt, handlePopupOpened, handlePopupClosed,\n  } = usePopupLimit(POPUP_SEQUENTIAL_LIMIT, POPUP_RESET_DELAY);\n\n  const { isMobile } = useAppLayout();\n\n  useEffect(() => {\n    const themeParams = extractCurrentThemeParams();\n    setBackgroundColor(themeParams.bg_color);\n    setHeaderColor(themeParams.bg_color);\n  }, []);\n\n  // eslint-disable-next-line no-null/no-null\n  const frameRef = useRef<HTMLIFrameElement>(null);\n\n  const lang = useOldLang();\n  const {\n    url, buttonText, queryId, replyInfo,\n  } = modal || {};\n  const isOpen = Boolean(url);\n  const isSimple = Boolean(buttonText);\n\n  const {\n    reloadFrame, sendEvent, sendViewport, sendTheme,\n  } = useWebAppFrame(frameRef, isOpen, isSimple, handleEvent, markLoaded);\n\n  const shouldShowMainButton = mainButton?.isVisible && mainButton.text.trim().length > 0;\n\n  useInterval(() => {\n    prolongWebView({\n      botId: bot!.id,\n      queryId: queryId!,\n      peerId: chat!.id,\n      replyInfo,\n    });\n  }, queryId ? PROLONG_INTERVAL : undefined, true);\n\n  const handleMainButtonClick = useLastCallback(() => {\n    sendEvent({\n      eventType: 'main_button_pressed',\n    });\n  });\n\n  const handleSettingsButtonClick = useLastCallback(() => {\n    sendEvent({\n      eventType: 'settings_button_pressed',\n    });\n  });\n\n  const handleRefreshClick = useLastCallback(() => {\n    reloadFrame(modal!.url);\n  });\n\n  const handleClose = useLastCallback(() => {\n    if (shouldConfirmClosing) {\n      openCloseModal();\n    } else {\n      closeWebApp();\n    }\n  });\n\n  const handleAppPopupClose = useLastCallback((buttonId?: string) => {\n    setPopupParameters(undefined);\n    handlePopupClosed();\n    sendEvent({\n      eventType: 'popup_closed',\n      eventData: {\n        button_id: buttonId,\n      },\n    });\n  });\n\n  const handleAppPopupModalClose = useLastCallback(() => {\n    handleAppPopupClose();\n  });\n\n  // Notify view that height changed\n  useSyncEffect(() => {\n    setTimeout(() => {\n      sendViewport();\n    }, ANIMATION_WAIT);\n  }, [mainButton?.isVisible, sendViewport]);\n\n  // Notify view that theme changed\n  useSyncEffect(() => {\n    setTimeout(() => {\n      sendTheme();\n    }, ANIMATION_WAIT);\n  }, [theme, sendTheme]);\n\n  useSyncEffect(([prevIsPaymentModalOpen]) => {\n    if (isPaymentModalOpen === prevIsPaymentModalOpen) return;\n    if (modal?.slug && !isPaymentModalOpen && paymentStatus) {\n      sendEvent({\n        eventType: 'invoice_closed',\n        eventData: {\n          slug: modal.slug,\n          status: paymentStatus,\n        },\n      });\n      setWebAppPaymentSlug({\n        slug: undefined,\n      });\n    }\n  }, [isPaymentModalOpen, paymentStatus, sendEvent, modal?.slug]);\n\n  const handleRemoveAttachBot = useLastCallback(() => {\n    toggleAttachBot({\n      botId: bot!.id,\n      isEnabled: false,\n    });\n    closeWebApp();\n  });\n\n  const handleToggleClick = useLastCallback(() => {\n    if (attachBot) {\n      openRemoveModal();\n      return;\n    }\n\n    toggleAttachBot({\n      botId: bot!.id,\n      isEnabled: true,\n    });\n  });\n\n  const handleBackClick = useLastCallback(() => {\n    if (isBackButtonVisible) {\n      sendEvent({\n        eventType: 'back_button_pressed',\n      });\n    } else {\n      handleClose();\n    }\n  });\n\n  const handleRejectPhone = useLastCallback(() => {\n    setIsRequestingPhone(false);\n    handlePopupClosed();\n    sendEvent({\n      eventType: 'phone_requested',\n      eventData: {\n        status: 'cancelled',\n      },\n    });\n  });\n\n  const handleAcceptPhone = useLastCallback(() => {\n    sharePhoneWithBot({ botId: bot!.id });\n    setIsRequestingPhone(false);\n    handlePopupClosed();\n    sendEvent({\n      eventType: 'phone_requested',\n      eventData: {\n        status: 'sent',\n      },\n    });\n  });\n\n  const handleRejectWriteAccess = useLastCallback(() => {\n    sendEvent({\n      eventType: 'write_access_requested',\n      eventData: {\n        status: 'cancelled',\n      },\n    });\n    setIsRequestingWriteAccess(false);\n    handlePopupClosed();\n  });\n\n  const handleAcceptWriteAccess = useLastCallback(async () => {\n    const result = await callApi('allowBotSendMessages', { bot: bot! });\n    if (!result) {\n      handleRejectWriteAccess();\n      return;\n    }\n\n    sendEvent({\n      eventType: 'write_access_requested',\n      eventData: {\n        status: 'allowed',\n      },\n    });\n    setIsRequestingWriteAccess(false);\n    handlePopupClosed();\n  });\n\n  async function handleRequestWriteAccess() {\n    const canWrite = await callApi('fetchBotCanSendMessage', {\n      bot: bot!,\n    });\n\n    if (canWrite) {\n      sendEvent({\n        eventType: 'write_access_requested',\n        eventData: {\n          status: 'allowed',\n        },\n      });\n    }\n\n    setIsRequestingWriteAccess(!canWrite);\n  }\n\n  async function handleInvokeCustomMethod(requestId: string, method: string, parameters: string) {\n    const result = await callApi('invokeWebViewCustomMethod', {\n      bot: bot!,\n      customMethod: method,\n      parameters,\n    });\n\n    sendEvent({\n      eventType: 'custom_method_invoked',\n      eventData: {\n        req_id: requestId,\n        ...result,\n      },\n    });\n  }\n\n  const openBotChat = useLastCallback(() => {\n    openChat({\n      id: bot!.id,\n    });\n    closeWebApp();\n  });\n\n  useEffect(() => {\n    if (!isOpen) {\n      const themeParams = extractCurrentThemeParams();\n\n      setShouldConfirmClosing(false);\n      hideCloseModal();\n      hideRemoveModal();\n      setPopupParameters(undefined);\n      setIsRequestingPhone(false);\n      setIsRequestingWriteAccess(false);\n      setMainButton(undefined);\n      setIsBackButtonVisible(false);\n      setIsSettingsButtonVisible(false);\n      setBackgroundColor(themeParams.bg_color);\n      setHeaderColor(themeParams.bg_color);\n      markUnloaded();\n    }\n  }, [isOpen]);\n\n  function handleEvent(event: WebAppInboundEvent) {\n    const { eventType, eventData } = event;\n    if (eventType === 'web_app_open_tg_link' && !isPaymentModalOpen) {\n      const linkUrl = TME_LINK_PREFIX + eventData.path_full;\n      openTelegramLink({ url: linkUrl });\n      closeWebApp();\n    }\n\n    if (eventType === 'web_app_setup_back_button') {\n      setIsBackButtonVisible(eventData.is_visible);\n    }\n\n    if (eventType === 'web_app_setup_settings_button') {\n      setIsSettingsButtonVisible(eventData.is_visible);\n    }\n\n    if (eventType === 'web_app_set_background_color') {\n      const themeParams = extractCurrentThemeParams();\n      const color = validateHexColor(eventData.color) ? eventData.color : themeParams.bg_color;\n      setBackgroundColor(color);\n    }\n\n    if (eventType === 'web_app_set_header_color') {\n      if (eventData.color_key) {\n        const themeParams = extractCurrentThemeParams();\n        const key = eventData.color_key;\n        const newColor = themeParams[key];\n        const color = validateHexColor(newColor) ? newColor : headerColor;\n        setHeaderColor(color);\n      }\n\n      if (eventData.color) {\n        const color = validateHexColor(eventData.color) ? eventData.color : headerColor;\n        setHeaderColor(color);\n      }\n    }\n\n    if (eventType === 'web_app_data_send') {\n      closeWebApp();\n      sendWebViewData({\n        bot: bot!,\n        buttonText: buttonText!,\n        data: eventData.data,\n      });\n    }\n\n    if (eventType === 'web_app_setup_main_button') {\n      const themeParams = extractCurrentThemeParams();\n      const color = validateHexColor(eventData.color) ? eventData.color : themeParams.button_color;\n      const textColor = validateHexColor(eventData.text_color) ? eventData.text_color : themeParams.text_color;\n      setMainButton({\n        isVisible: eventData.is_visible && Boolean(eventData.text?.trim().length),\n        isActive: eventData.is_active,\n        text: eventData.text || '',\n        color,\n        textColor,\n        isProgressVisible: eventData.is_progress_visible,\n      });\n    }\n\n    if (eventType === 'web_app_setup_closing_behavior') {\n      setShouldConfirmClosing(eventData.need_confirmation);\n    }\n\n    if (eventType === 'web_app_open_popup') {\n      if (popupParameters || !eventData.message.trim().length || !eventData.buttons?.length\n      || eventData.buttons.length > 3 || isRequestingPhone || isRequesingWriteAccess\n      || unlockPopupsAt > Date.now()) {\n        handleAppPopupClose(undefined);\n        return;\n      }\n\n      setPopupParameters(eventData);\n      handlePopupOpened();\n    }\n\n    if (eventType === 'web_app_switch_inline_query') {\n      const filter = eventData.chat_types?.map(convertToApiChatType).filter(Boolean);\n      const isSamePeer = !filter?.length;\n\n      switchBotInline({\n        botId: bot!.id,\n        query: eventData.query,\n        filter,\n        isSamePeer,\n      });\n\n      closeWebApp();\n    }\n\n    if (eventType === 'web_app_request_phone') {\n      if (popupParameters || isRequesingWriteAccess || unlockPopupsAt > Date.now()) {\n        handleRejectPhone();\n        return;\n      }\n\n      setIsRequestingPhone(true);\n      handlePopupOpened();\n    }\n\n    if (eventType === 'web_app_request_write_access') {\n      if (popupParameters || isRequestingPhone || unlockPopupsAt > Date.now()) {\n        handleRejectWriteAccess();\n        return;\n      }\n\n      handleRequestWriteAccess();\n      handlePopupOpened();\n    }\n\n    if (eventType === 'web_app_invoke_custom_method') {\n      const { method, params, req_id: requestId } = eventData;\n      handleInvokeCustomMethod(requestId, method, JSON.stringify(params));\n    }\n  }\n\n  const MoreMenuButton: FC<{ onTrigger: () => void; isOpen?: boolean }> = useMemo(() => {\n    return ({ onTrigger, isOpen: isMenuOpen }) => (\n      <Button\n        round\n        ripple={!isMobile}\n        size=\"smaller\"\n        color=\"translucent\"\n        className={buildClassName(styles.moreButton, isMenuOpen && 'active')}\n        onClick={onTrigger}\n        ariaLabel=\"More actions\"\n      >\n        <Icon name=\"more\" />\n      </Button>\n    );\n  }, [isMobile]);\n\n  const backButtonClassName = buildClassName(\n    styles.closeIcon,\n    isBackButtonVisible && styles.stateBack,\n  );\n\n  const headerTextVar = useMemo(() => {\n    if (!headerColor) return undefined;\n    const { r, g, b } = hexToRgb(headerColor);\n    const luma = getColorLuma([r, g, b]);\n    const adaptedLuma = theme === 'dark' ? 255 - luma : luma;\n    return adaptedLuma > LUMA_THRESHOLD ? 'color-text' : 'color-background';\n  }, [headerColor, theme]);\n\n  function renderHeader() {\n    return (\n      <div\n        className=\"modal-header\"\n        style={buildStyle(\n          headerColor && `background-color: ${headerColor}`,\n          headerTextVar && `--color-header-text: var(--${headerTextVar})`,\n        )}\n      >\n        <Button\n          round\n          color=\"translucent\"\n          size=\"smaller\"\n          ariaLabel={lang(isBackButtonVisible ? 'Back' : 'Close')}\n          onClick={handleBackClick}\n        >\n          <div className={backButtonClassName} />\n        </Button>\n        <div className=\"modal-title\">{attachBot?.shortName ?? bot?.firstName}</div>\n        <DropdownMenu\n          className=\"web-app-more-menu with-menu-transitions\"\n          trigger={MoreMenuButton}\n          positionX=\"right\"\n        >\n          {chat && bot && chat.id !== bot.id && (\n            <MenuItem icon=\"bots\" onClick={openBotChat}>{lang('BotWebViewOpenBot')}</MenuItem>\n          )}\n          <MenuItem icon=\"reload\" onClick={handleRefreshClick}>{lang('WebApp.ReloadPage')}</MenuItem>\n          {isSettingsButtonVisible && (\n            <MenuItem icon=\"settings\" onClick={handleSettingsButtonClick}>\n              {lang('Settings')}\n            </MenuItem>\n          )}\n          {bot?.isAttachBot && (\n            <MenuItem\n              icon={attachBot ? 'stop' : 'install'}\n              onClick={handleToggleClick}\n              destructive={Boolean(attachBot)}\n            >\n              {lang(attachBot ? 'WebApp.RemoveBot' : 'WebApp.AddToAttachmentAdd')}\n            </MenuItem>\n          )}\n        </DropdownMenu>\n      </div>\n    );\n  }\n\n  const prevMainButtonColor = usePrevious(mainButton?.color, true);\n  const prevMainButtonTextColor = usePrevious(mainButton?.textColor, true);\n  const prevMainButtonIsActive = usePrevious(mainButton && Boolean(mainButton.isActive), true);\n  const prevMainButtonText = usePrevious(mainButton?.text, true);\n\n  const mainButtonCurrentColor = mainButton?.color || prevMainButtonColor;\n  const mainButtonCurrentTextColor = mainButton?.textColor || prevMainButtonTextColor;\n  const mainButtonCurrentIsActive = mainButton?.isActive !== undefined ? mainButton.isActive : prevMainButtonIsActive;\n  const mainButtonCurrentText = mainButton?.text || prevMainButtonText;\n\n  const [shouldDecreaseWebFrameSize, setShouldDecreaseWebFrameSize] = useState(false);\n  const [shouldHideButton, setShouldHideButton] = useState(true);\n\n  const buttonChangeTimeout = useRef<ReturnType<typeof setTimeout>>();\n\n  useEffect(() => {\n    if (buttonChangeTimeout.current) clearTimeout(buttonChangeTimeout.current);\n    if (!shouldShowMainButton) {\n      setShouldDecreaseWebFrameSize(false);\n      buttonChangeTimeout.current = setTimeout(() => {\n        setShouldHideButton(true);\n      }, MAIN_BUTTON_ANIMATION_TIME);\n    } else {\n      setShouldHideButton(false);\n      buttonChangeTimeout.current = setTimeout(() => {\n        setShouldDecreaseWebFrameSize(true);\n      }, MAIN_BUTTON_ANIMATION_TIME);\n    }\n  }, [setShouldDecreaseWebFrameSize, shouldShowMainButton]);\n\n  return (\n    <Modal\n      className={styles.root}\n      isOpen={isOpen}\n      onClose={handleClose}\n      header={renderHeader()}\n      style={`background-color: ${backgroundColor}`}\n    >\n      <Spinner className={buildClassName(styles.loadingSpinner, isLoaded && styles.hide)} />\n      {isOpen && (\n        <>\n          <iframe\n            className={buildClassName(styles.frame, shouldDecreaseWebFrameSize && styles.withButton)}\n            src={url}\n            title={`${bot?.firstName} Web App`}\n            sandbox={SANDBOX_ATTRIBUTES}\n            allow=\"camera; microphone; geolocation;\"\n            allowFullScreen\n            ref={frameRef}\n          />\n          <Button\n            className={buildClassName(\n              styles.mainButton,\n              shouldShowMainButton && styles.visible,\n              shouldHideButton && styles.hidden,\n            )}\n            style={`background-color: ${mainButtonCurrentColor}; color: ${mainButtonCurrentTextColor}`}\n            disabled={!mainButtonCurrentIsActive}\n            onClick={handleMainButtonClick}\n          >\n            {mainButtonCurrentText}\n            {mainButton?.isProgressVisible && <Spinner className={styles.mainButtonSpinner} color=\"white\" />}\n          </Button>\n        </>\n      )}\n      <ConfirmDialog\n        isOpen={isRequestingPhone}\n        onClose={handleRejectPhone}\n        title={lang('ShareYouPhoneNumberTitle')}\n        text={lang('AreYouSureShareMyContactInfoBot')}\n        confirmHandler={handleAcceptPhone}\n        confirmLabel={lang('ContactShare')}\n      />\n      <ConfirmDialog\n        isOpen={isRequesingWriteAccess}\n        onClose={handleRejectWriteAccess}\n        title={lang('lng_bot_allow_write_title')}\n        text={lang('lng_bot_allow_write')}\n        confirmHandler={handleAcceptWriteAccess}\n        confirmLabel={lang('lng_bot_allow_write_confirm')}\n      />\n      {popupParameters && (\n        <Modal\n          isOpen={Boolean(popupParameters)}\n          title={popupParameters.title || NBSP}\n          onClose={handleAppPopupModalClose}\n          hasCloseButton\n          className={\n            buildClassName(styles.webAppPopup, !popupParameters.title?.trim().length && styles.withoutTitle)\n          }\n        >\n          {popupParameters.message}\n          <div className=\"dialog-buttons mt-2\">\n            {popupParameters.buttons.map((button) => (\n              <Button\n                key={button.id || button.type}\n                className=\"confirm-dialog-button\"\n                color={button.type === 'destructive' ? 'danger' : 'primary'}\n                isText\n                size=\"smaller\"\n                // eslint-disable-next-line react/jsx-no-bind\n                onClick={() => handleAppPopupClose(button.id)}\n              >\n                {button.text || lang(DEFAULT_BUTTON_TEXT[button.type])}\n              </Button>\n            ))}\n          </div>\n        </Modal>\n      )}\n\n      <ConfirmDialog\n        isOpen={isCloseModalOpen}\n        onClose={hideCloseModal}\n        title={lang('lng_bot_close_warning_title')}\n        text={lang('lng_bot_close_warning')}\n        confirmHandler={closeWebApp}\n        confirmIsDestructive\n        confirmLabel={lang('lng_bot_close_warning_sure')}\n      />\n      <ConfirmDialog\n        isOpen={isRemoveModalOpen}\n        onClose={hideRemoveModal}\n        title={lang('BotRemoveFromMenuTitle')}\n        textParts={renderText(lang('BotRemoveFromMenu', bot?.firstName), ['simple_markdown'])}\n        confirmHandler={handleRemoveAttachBot}\n        confirmIsDestructive\n      />\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const { botId } = modal || {};\n    const attachBot = botId ? global.attachMenu.bots[botId] : undefined;\n    const bot = botId ? selectUser(global, botId) : undefined;\n    const chat = selectCurrentChat(global);\n    const theme = selectTheme(global);\n    const { isPaymentModalOpen, status } = selectTabState(global).payment;\n    const { isStarPaymentModalOpen } = selectTabState(global);\n\n    return {\n      attachBot,\n      bot,\n      chat,\n      theme,\n      isPaymentModalOpen: isPaymentModalOpen || isStarPaymentModalOpen,\n      paymentStatus: status,\n    };\n  },\n)(WebAppModal));\n","import { useRef, useState } from '../../../../lib/teact/teact';\n\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nexport default function usePopupLimit(sequentialLimit: number, resetAfter: number) {\n  const [unlockPopupsAt, setUnlockPopupsAt] = useState(0);\n  const sequentialCalls = useRef(0);\n  const lastClosedDate = useRef(0);\n\n  const handlePopupOpened = useLastCallback(() => {\n    const now = Date.now();\n\n    if (now - lastClosedDate.current > resetAfter) {\n      sequentialCalls.current = 0;\n    }\n\n    sequentialCalls.current += 1;\n\n    if (sequentialCalls.current >= sequentialLimit) {\n      setUnlockPopupsAt(now + resetAfter);\n    }\n  });\n\n  const handlePopupClosed = useLastCallback(() => {\n    if (unlockPopupsAt < Date.now()) { // Prevent confused user from extending lock time\n      lastClosedDate.current = Date.now();\n    }\n  });\n\n  return {\n    unlockPopupsAt,\n    handlePopupOpened,\n    handlePopupClosed,\n  };\n}\n","import { useCallback, useEffect, useRef } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type { WebAppInboundEvent, WebAppOutboundEvent } from '../../../../types/webapp';\n\nimport { extractCurrentThemeParams } from '../../../../util/themeStyle';\n\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useWindowSize from '../../../../hooks/window/useWindowSize';\n\nconst SCROLLBAR_STYLE = `* {\n  scrollbar-width: thin;\n  scrollbar-color: %SCROLLBAR_COLOR% transparent;\n}\n\n*::-webkit-scrollbar {\n  width: 6px;\n  height: 6px;\n  background-color: transparent;\n}\n\n*::-webkit-scrollbar-thumb {\n  border-radius: 6px;\n  background-color: %SCROLLBAR_COLOR%;\n}\n\n*::-webkit-scrollbar-corner {\n  background-color: transparent;\n}`;\n\nconst RELOAD_TIMEOUT = 500;\n\nconst useWebAppFrame = (\n  ref: React.RefObject<HTMLIFrameElement>,\n  isOpen: boolean,\n  isSimpleView: boolean,\n  onEvent: (event: WebAppInboundEvent) => void,\n  onLoad?: () => void,\n) => {\n  const {\n    showNotification,\n    setWebAppPaymentSlug,\n    openInvoice,\n    closeWebApp,\n  } = getActions();\n\n  const isReloadSupported = useRef<boolean>(false);\n  const reloadTimeout = useRef<ReturnType<typeof setTimeout>>();\n  const ignoreEventsRef = useRef<boolean>(false);\n  const lastFrameSizeRef = useRef<{ width: number; height: number; isResizing?: boolean }>();\n  const windowSize = useWindowSize();\n\n  useEffect(() => {\n    if (!ref.current || !isOpen) return undefined;\n\n    const handleLoad = () => {\n      onLoad?.();\n    };\n\n    const frame = ref.current;\n    frame.addEventListener('load', handleLoad);\n    return () => {\n      frame.removeEventListener('load', handleLoad);\n    };\n  }, [onLoad, ref, isOpen]);\n\n  const sendEvent = useCallback((event: WebAppOutboundEvent) => {\n    if (!ref.current?.contentWindow) return;\n    ref.current.contentWindow.postMessage(JSON.stringify(event), '*');\n  }, [ref]);\n\n  const forceReloadFrame = useLastCallback((url: string) => {\n    if (!ref.current) return;\n    const frame = ref.current;\n    frame.src = 'about:blank';\n    frame.addEventListener('load', () => {\n      frame.src = url;\n    }, { once: true });\n  });\n\n  const reloadFrame = useCallback((url: string) => {\n    if (isReloadSupported.current) {\n      sendEvent({\n        eventType: 'reload_iframe',\n      });\n      reloadTimeout.current = setTimeout(() => {\n        forceReloadFrame(url);\n      }, RELOAD_TIMEOUT);\n      return;\n    }\n\n    forceReloadFrame(url);\n  }, [sendEvent]);\n\n  const sendViewport = useCallback((isNonStable?: boolean) => {\n    if (!ref.current) {\n      return;\n    }\n    const { width, height } = ref.current.getBoundingClientRect();\n    sendEvent({\n      eventType: 'viewport_changed',\n      eventData: {\n        width,\n        height,\n        is_expanded: true,\n        is_state_stable: !isNonStable,\n      },\n    });\n  }, [sendEvent, ref]);\n\n  const sendTheme = useCallback(() => {\n    sendEvent({\n      eventType: 'theme_changed',\n      eventData: {\n        theme_params: extractCurrentThemeParams(),\n      },\n    });\n  }, [sendEvent]);\n\n  const sendCustomStyle = useCallback((style: string) => {\n    sendEvent({\n      eventType: 'set_custom_style',\n      eventData: style,\n    });\n  }, [sendEvent]);\n\n  const handleMessage = useCallback((event: MessageEvent<string>) => {\n    if (ignoreEventsRef.current) {\n      return;\n    }\n\n    try {\n      const data = JSON.parse(event.data) as WebAppInboundEvent;\n      const { eventType, eventData } = data;\n      // Handle some app requests here to simplify hook usage\n      if (eventType === 'web_app_ready') {\n        onLoad?.();\n      }\n\n      if (eventType === 'web_app_close') {\n        closeWebApp();\n      }\n\n      if (eventType === 'web_app_request_viewport') {\n        sendViewport(windowSize.isResizing);\n      }\n\n      if (eventType === 'web_app_request_theme') {\n        sendTheme();\n      }\n\n      if (eventType === 'iframe_ready') {\n        const scrollbarColor = getComputedStyle(document.body).getPropertyValue('--color-scrollbar');\n        sendCustomStyle(SCROLLBAR_STYLE.replace(/%SCROLLBAR_COLOR%/g, scrollbarColor));\n        isReloadSupported.current = Boolean(eventData.reload_supported);\n      }\n\n      if (eventType === 'iframe_will_reload') {\n        clearTimeout(reloadTimeout.current);\n      }\n\n      if (eventType === 'web_app_data_send') {\n        if (!isSimpleView) return; // Allowed only in simple view\n        ignoreEventsRef.current = true;\n      }\n\n      // Clipboard access temporarily disabled to address security concerns\n      if (eventType === 'web_app_read_text_from_clipboard') {\n        sendEvent({\n          eventType: 'clipboard_text_received',\n          eventData: {\n            req_id: eventData.req_id,\n            // eslint-disable-next-line no-null/no-null\n            data: null,\n          },\n        });\n\n        showNotification({\n          message: 'Clipboard access is not supported in this client yet',\n        });\n      }\n\n      if (eventType === 'web_app_open_scan_qr_popup') {\n        showNotification({\n          message: 'Scanning QR code is not supported in this client yet',\n        });\n      }\n\n      if (eventType === 'web_app_open_invoice') {\n        setWebAppPaymentSlug({\n          slug: eventData.slug,\n        });\n        openInvoice({\n          type: 'slug',\n          slug: eventData.slug,\n        });\n      }\n\n      if (eventType === 'web_app_open_link') {\n        const linkUrl = eventData.url;\n        window.open(linkUrl, '_blank', 'noreferrer');\n      }\n\n      if (eventType === 'web_app_biometry_get_info') {\n        sendEvent({\n          eventType: 'biometry_info_received',\n          eventData: {\n            available: false,\n          },\n        });\n      }\n\n      onEvent(data);\n    } catch (err) {\n      // Ignore other messages\n    }\n  }, [isSimpleView, sendEvent, onEvent, sendCustomStyle, sendTheme, sendViewport, onLoad, windowSize.isResizing]);\n\n  useEffect(() => {\n    const { width, height, isResizing } = windowSize;\n    if (lastFrameSizeRef.current && lastFrameSizeRef.current.width === width\n      && lastFrameSizeRef.current.height === height && !lastFrameSizeRef.current.isResizing) return;\n    lastFrameSizeRef.current = { width, height, isResizing };\n    sendViewport(isResizing);\n  }, [sendViewport, windowSize]);\n\n  useEffect(() => {\n    window.addEventListener('message', handleMessage);\n    return () => window.removeEventListener('message', handleMessage);\n  }, [handleMessage]);\n\n  useEffect(() => {\n    if (isOpen && ref.current?.contentWindow) {\n      sendViewport();\n      ignoreEventsRef.current = false;\n    } else {\n      lastFrameSizeRef.current = undefined;\n    }\n  }, [isOpen, sendViewport, ref]);\n\n  return {\n    sendEvent, reloadFrame, sendViewport, sendTheme,\n  };\n};\n\nexport default useWebAppFrame;\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect,\n  useRef, useState,\n} from '../../lib/teact/teact';\n\nimport { CardType, detectCardType } from '../common/helpers/detectCardType';\nimport { formatCardNumber } from '../middle/helpers/inputFormatters';\n\nimport useFocusAfterAnimation from '../../hooks/useFocusAfterAnimation';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport InputText from '../ui/InputText';\n\nimport './CardInput.scss';\n\nimport mastercardIconPath from '../../assets/mastercard.svg';\nimport mirIconPath from '../../assets/mir.svg';\nimport visaIconPath from '../../assets/visa.svg';\n\nconst CARD_NUMBER_MAX_LENGTH = 19;\n\nexport type OwnProps = {\n  value: string;\n  error?: string;\n  onChange: (value: string) => void;\n};\n\nconst CardInput : FC<OwnProps> = ({ value, error, onChange }) => {\n  const lang = useOldLang();\n  // eslint-disable-next-line no-null/no-null\n  const cardNumberRef = useRef<HTMLInputElement>(null);\n\n  useFocusAfterAnimation(cardNumberRef);\n\n  const [cardType, setCardType] = useState<number>(CardType.Default);\n  useEffect(() => {\n    const newCardType = detectCardType(value);\n    setCardType(newCardType);\n  // eslint-disable-next-line\n  }, []);\n\n  const handleChange = useCallback((e) => {\n    const newValue = formatCardNumber(e.target.value);\n    const newCardType = detectCardType(e.target.value);\n    setCardType(newCardType);\n    onChange(newValue);\n  }, [onChange]);\n\n  const cardIcon = getCardIcon(cardType);\n\n  return (\n    <div className=\"CardInput\">\n      <InputText\n        ref={cardNumberRef}\n        label={lang('PaymentCardNumber')}\n        onChange={handleChange}\n        value={value}\n        inputMode=\"numeric\"\n        className={cardType ? 'has-right-addon' : ''}\n        error={error}\n        tabIndex={0}\n        maxLength={CARD_NUMBER_MAX_LENGTH}\n        teactExperimentControlled\n      />\n      <span className=\"right-addon\">{cardIcon}</span>\n    </div>\n  );\n};\n\nexport default memo(CardInput);\n\nfunction getCardIcon(cardType: CardType) {\n  switch (cardType) {\n    case CardType.Mastercard:\n      return <img src={mastercardIconPath} draggable={false} alt=\"\" />;\n    case CardType.Visa:\n      return <img src={visaIconPath} draggable={false} alt=\"\" />;\n    case CardType.Mir:\n      return <img src={mirIconPath} draggable={false} alt=\"\" />;\n    default:\n      return undefined;\n  }\n}\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo, useCallback } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type {\n  ApiInvoice, ApiPaymentCredentials,\n} from '../../api/types';\nimport type { FormEditDispatch } from '../../hooks/reducers/usePaymentReducer';\nimport type { LangCode, Price } from '../../types';\nimport type { IconName } from '../../types/icons';\nimport { PaymentStep } from '../../types';\n\nimport { getWebDocumentHash } from '../../global/helpers';\nimport buildClassName from '../../util/buildClassName';\nimport { formatCurrency } from '../../util/formatCurrency';\nimport renderText from '../common/helpers/renderText';\n\nimport useMedia from '../../hooks/useMedia';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport SafeLink from '../common/SafeLink';\nimport Checkbox from '../ui/Checkbox';\nimport ListItem from '../ui/ListItem';\nimport Skeleton from '../ui/placeholder/Skeleton';\n\nimport styles from './Checkout.module.scss';\n\nexport type OwnProps = {\n  invoice?: ApiInvoice;\n  checkoutInfo?: {\n    paymentMethod?: string;\n    paymentProvider?: string;\n    shippingAddress?: string;\n    name?: string;\n    phone?: string;\n    shippingMethod?: string;\n    botName?: string;\n  };\n  prices?: Price[];\n  totalPrice?: number;\n  needAddress?: boolean;\n  hasShippingOptions?: boolean;\n  tipAmount?: number;\n  shippingPrices?: Price[];\n  currency: string;\n  isTosAccepted?: boolean;\n  dispatch?: FormEditDispatch;\n  onAcceptTos?: (isAccepted: boolean) => void;\n  savedCredentials?: ApiPaymentCredentials[];\n  isPaymentFormUrl?: boolean;\n  botName?: string;\n};\n\nconst Checkout: FC<OwnProps> = ({\n  invoice,\n  prices,\n  shippingPrices,\n  checkoutInfo,\n  currency,\n  totalPrice,\n  isTosAccepted,\n  dispatch,\n  onAcceptTos,\n  tipAmount,\n  needAddress,\n  hasShippingOptions,\n  savedCredentials,\n  isPaymentFormUrl,\n  botName,\n}) => {\n  const { setPaymentStep } = getActions();\n\n  const lang = useOldLang();\n  const isInteractive = Boolean(dispatch);\n\n  const {\n    photo, title, text, termsUrl, suggestedTipAmounts, maxTipAmount,\n  } = invoice || {};\n  const {\n    paymentMethod,\n    paymentProvider,\n    shippingAddress,\n    name,\n    phone,\n    shippingMethod,\n  } = (checkoutInfo || {});\n\n  const photoUrl = useMedia(getWebDocumentHash(photo));\n\n  const handleTipsClick = useCallback((tips: number) => {\n    dispatch!({ type: 'setTipAmount', payload: maxTipAmount ? Math.min(tips, maxTipAmount) : tips });\n  }, [dispatch, maxTipAmount]);\n\n  const handlePaymentMethodClick = useCallback(() => {\n    setPaymentStep({ step: savedCredentials?.length ? PaymentStep.SavedPayments : PaymentStep.PaymentInfo });\n  }, [savedCredentials?.length, setPaymentStep]);\n\n  const handleShippingAddressClick = useCallback(() => {\n    setPaymentStep({ step: PaymentStep.ShippingInfo });\n  }, [setPaymentStep]);\n\n  const handleShippingMethodClick = useCallback(() => {\n    setPaymentStep({ step: PaymentStep.Shipping });\n  }, [setPaymentStep]);\n\n  function renderTips() {\n    return (\n      <>\n        <div className={styles.priceInfoItem}>\n          <div className={styles.priceInfoItemTitle}>\n            {title}\n          </div>\n          <div>\n            {formatCurrency(tipAmount!, currency, lang.code)}\n          </div>\n        </div>\n        <div className={styles.tipsList}>\n          {suggestedTipAmounts!.map((tip) => (\n            <div\n              key={tip}\n              className={buildClassName(styles.tipsItem, tip === tipAmount && styles.tipsItem_active)}\n              onClick={dispatch ? () => handleTipsClick(tip === tipAmount ? 0 : tip) : undefined}\n            >\n              {formatCurrency(tip, currency, lang.code, { shouldOmitFractions: true })}\n            </div>\n          ))}\n        </div>\n      </>\n    );\n  }\n\n  function renderTosLink(url: string, isRtl?: boolean) {\n    const langString = lang('PaymentCheckoutAcceptRecurrent', botName);\n    const langStringSplit = langString.split('*');\n    return (\n      <>\n        {langStringSplit[0]}\n        <SafeLink\n          url={url}\n          text={langStringSplit[1]}\n          isRtl={isRtl}\n        />\n        {langStringSplit.slice(2)}\n      </>\n    );\n  }\n\n  function renderTos(url: string) {\n    return (\n      <Checkbox\n        label={renderTosLink(url, lang.isRtl)}\n        name=\"checkout_tos\"\n        checked={Boolean(isTosAccepted)}\n        className={styles.tosCheckbox}\n        tabIndex={0}\n        onCheck={onAcceptTos}\n      />\n    );\n  }\n\n  return (\n    <div className={styles.root}>\n      <div className={styles.description}>\n        {photoUrl && <img className={styles.checkoutPicture} src={photoUrl} draggable={false} alt=\"\" />}\n        {!photoUrl && photo && (\n          <Skeleton\n            width={photo.dimensions?.width}\n            height={photo.dimensions?.height}\n            className={styles.checkoutPicture}\n            forceAspectRatio\n          />\n        )}\n        <div className={styles.text}>\n          <h5 className={styles.checkoutTitle}>{title}</h5>\n          {text && <div className={styles.checkoutDescription}>{renderText(text, ['br', 'links', 'emoji'])}</div>}\n        </div>\n      </div>\n      <div className={styles.priceInfo}>\n        {prices && prices.map((item) => (\n          renderPaymentItem(lang.code, item.label, item.amount, currency)\n        ))}\n        {shippingPrices && shippingPrices.map((item) => (\n          renderPaymentItem(lang.code, item.label, item.amount, currency)\n        ))}\n        {suggestedTipAmounts && suggestedTipAmounts.length > 0 && renderTips()}\n        {totalPrice !== undefined && (\n          renderPaymentItem(lang.code, lang('Checkout.TotalAmount'), totalPrice, currency, true)\n        )}\n      </div>\n      <div className={styles.invoiceInfo}>\n        {!isPaymentFormUrl && renderCheckoutItem({\n          title: paymentMethod || savedCredentials?.[0].title,\n          label: lang('PaymentCheckoutMethod'),\n          icon: 'card',\n          onClick: isInteractive ? handlePaymentMethodClick : undefined,\n        })}\n        {paymentProvider && renderCheckoutItem({\n          title: paymentProvider,\n          label: lang('PaymentCheckoutProvider'),\n          customIcon: buildClassName(styles.provider, styles[paymentProvider.toLowerCase()]),\n        })}\n        {(needAddress || (!isInteractive && shippingAddress)) && renderCheckoutItem({\n          title: shippingAddress,\n          label: lang('PaymentShippingAddress'),\n          icon: 'location',\n          onClick: isInteractive ? handleShippingAddressClick : undefined,\n        })}\n        {name && renderCheckoutItem({\n          title: name,\n          label: lang('PaymentCheckoutName'),\n          icon: 'user',\n        })}\n        {phone && renderCheckoutItem({\n          title: phone,\n          label: lang('PaymentCheckoutPhoneNumber'),\n          icon: 'phone',\n        })}\n        {(hasShippingOptions || (!isInteractive && shippingMethod)) && renderCheckoutItem({\n          title: shippingMethod,\n          label: lang('PaymentCheckoutShippingMethod'),\n          icon: 'truck',\n          onClick: isInteractive ? handleShippingMethodClick : undefined,\n        })}\n        {termsUrl && renderTos(termsUrl)}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(Checkout);\n\nfunction renderPaymentItem(\n  langCode: LangCode | undefined, title: string, value: number, currency: string, main = false,\n) {\n  return (\n    <div className={buildClassName(styles.priceInfoItem, main && styles.priceInfoItemMain)}>\n      <div className={styles.priceInfoItemTitle}>\n        {title}\n      </div>\n      <div>\n        {formatCurrency(value, currency, langCode)}\n      </div>\n    </div>\n  );\n}\n\nfunction renderCheckoutItem({\n  title,\n  label,\n  icon,\n  customIcon,\n  onClick,\n}: {\n  title : string | undefined;\n  label: string | undefined;\n  icon?: IconName;\n  onClick?: NoneToVoidFunction;\n  customIcon?: string;\n}) {\n  const isMultiline = Boolean(title && label !== title);\n\n  return (\n    <ListItem\n      multiline={isMultiline}\n      narrow={isMultiline}\n      icon={icon}\n      inactive={!onClick}\n      onClick={onClick}\n      leftElement={customIcon && <i className={buildClassName('icon', customIcon)} />}\n    >\n      <div className={styles.checkoutInfoItemInfoTitle}>\n        {title || label}\n      </div>\n      {title && label !== title && (\n        <p className={styles.checkoutInfoItemInfoData}>\n          {label}\n        </p>\n      )}\n    </ListItem>\n  );\n}\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo, useCallback, useEffect } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { TME_LINK_PREFIX } from '../../config';\n\nimport useOldLang from '../../hooks/useOldLang';\n\nimport './ConfirmPayment.scss';\n\nexport type OwnProps = {\n  url: string;\n  noRedirect?: boolean;\n  onClose: NoneToVoidFunction;\n  onPaymentFormSubmit?: (eventData: PaymentFormSubmitEvent['eventData']) => void;\n};\n\nexport interface PaymentFormSubmitEvent {\n  eventType: 'payment_form_submit';\n  eventData: {\n    credentials: {\n      token: string;\n      type: string;\n    };\n    title: string;\n  };\n}\n\ninterface WebAppOpenTgLinkEvent {\n  eventType: 'web_app_open_tg_link';\n  eventData: {\n    path_full?: string;\n  };\n}\n\ntype IframeCallbackEvent = PaymentFormSubmitEvent | WebAppOpenTgLinkEvent;\n\nconst ConfirmPayment: FC<OwnProps> = ({\n  url, noRedirect, onClose, onPaymentFormSubmit,\n}) => {\n  const { openTelegramLink } = getActions();\n\n  const lang = useOldLang();\n\n  const handleMessage = useCallback((event: MessageEvent<string>) => {\n    try {\n      const data = JSON.parse(event.data) as IframeCallbackEvent;\n      const { eventType, eventData } = data;\n      switch (eventType) {\n        case 'web_app_open_tg_link':\n          if (!noRedirect) {\n            const linkUrl = TME_LINK_PREFIX + eventData.path_full!;\n            openTelegramLink({ url: linkUrl });\n          }\n          onClose();\n          break;\n        case 'payment_form_submit':\n          if (onPaymentFormSubmit) {\n            onPaymentFormSubmit(eventData);\n          }\n          break;\n        default:\n          onClose();\n          break;\n      }\n    } catch (err) {\n      // Ignore other messages\n    }\n  }, [onClose, noRedirect, openTelegramLink, onPaymentFormSubmit]);\n\n  useEffect(() => {\n    window.addEventListener('message', handleMessage);\n    return () => window.removeEventListener('message', handleMessage);\n  }, [handleMessage]);\n\n  return (\n    <div className=\"ConfirmPayment\">\n      <iframe\n        src={url}\n        title={lang('Checkout.WebConfirmation.Title')}\n        allow=\"payment\"\n        sandbox=\"allow-modals allow-forms allow-scripts allow-same-origin allow-top-navigation\"\n        className=\"ConfirmPayment__content\"\n      />\n    </div>\n  );\n};\n\nexport default memo(ConfirmPayment);\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo, useCallback } from '../../lib/teact/teact';\n\nimport { formatCardExpiry } from '../middle/helpers/inputFormatters';\n\nimport useOldLang from '../../hooks/useOldLang';\n\nimport InputText from '../ui/InputText';\n\nconst MAX_FIELD_LENGTH = 5;\n\nexport type OwnProps = {\n  value: string;\n  error?: string;\n  onChange: (value: string) => void;\n};\n\nconst ExpiryInput : FC<OwnProps> = ({ value, error, onChange }) => {\n  const lang = useOldLang();\n\n  const handleChange = useCallback((e) => {\n    const newValue = e.target.value;\n    // Allow deleting separator\n    if (value.endsWith('/') && value.length > newValue.length) {\n      onChange(newValue);\n    } else {\n      onChange(formatCardExpiry(e.target.value));\n    }\n  }, [onChange, value]);\n\n  return (\n    <InputText\n      label={lang('PaymentCardExpireDate')}\n      onChange={handleChange}\n      value={value}\n      error={error}\n      inputMode=\"numeric\"\n      tabIndex={0}\n      maxLength={MAX_FIELD_LENGTH}\n      teactExperimentControlled\n    />\n  );\n};\n\nexport default memo(ExpiryInput);\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo, useMemo, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiPaymentCredentials } from '../../api/types';\nimport type { FormState } from '../../hooks/reducers/usePaymentReducer';\n\nimport { selectTabState } from '../../global/selectors';\n\nimport useOldLang from '../../hooks/useOldLang';\n\nimport PasswordForm from '../common/PasswordForm';\nimport PasswordMonkey from '../common/PasswordMonkey';\n\ninterface OwnProps {\n  isActive?: boolean;\n  state: FormState;\n  savedCredentials?: ApiPaymentCredentials[];\n  onPasswordChange: (password: string) => void;\n}\n\ninterface StateProps {\n  error?: string;\n  passwordHint?: string;\n  savedCredentials?: ApiPaymentCredentials[];\n}\n\nconst PasswordConfirm: FC<OwnProps & StateProps> = ({\n  isActive,\n  error,\n  state,\n  savedCredentials,\n  passwordHint,\n  onPasswordChange,\n}) => {\n  const { clearPaymentError } = getActions();\n\n  const lang = useOldLang();\n  const [shouldShowPassword, setShouldShowPassword] = useState(false);\n  const cardName = useMemo(() => {\n    return savedCredentials?.length && state.savedCredentialId\n      ? savedCredentials.find(({ id }) => id === state.savedCredentialId)?.title\n      : undefined;\n  }, [savedCredentials, state.savedCredentialId]);\n\n  return (\n    <div className=\"PaymentInfo\">\n      <PasswordMonkey isBig isPasswordVisible={shouldShowPassword} />\n\n      <PasswordForm\n        error={error ? lang(error) : undefined}\n        hint={passwordHint}\n        description={lang('PaymentConfirmationMessage', cardName)}\n        placeholder={lang('Password')}\n        clearError={clearPaymentError}\n        shouldShowSubmit={false}\n        shouldResetValue={isActive}\n        isPasswordVisible={shouldShowPassword}\n        onChangePasswordVisibility={setShouldShowPassword}\n        onInputChange={onPasswordChange}\n      />\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { payment } = selectTabState(global);\n  return {\n    error: payment.error?.message,\n    passwordHint: global.twoFaSettings.hint,\n    savedCredentials: payment.savedCredentials,\n  };\n})(PasswordConfirm));\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect,\n  useRef,\n} from '../../lib/teact/teact';\n\nimport type { ApiCountry } from '../../api/types';\nimport type { FormEditDispatch, FormState } from '../../hooks/reducers/usePaymentReducer';\n\nimport useOldLang from '../../hooks/useOldLang';\n\nimport Checkbox from '../ui/Checkbox';\nimport InputText from '../ui/InputText';\nimport Select from '../ui/Select';\nimport CardInput from './CardInput';\nimport ExpiryInput from './ExpiryInput';\n\nimport './PaymentInfo.scss';\n\nexport type OwnProps = {\n  state: FormState;\n  canSaveCredentials: boolean;\n  needCardholderName?: boolean;\n  needCountry?: boolean;\n  needZip?: boolean;\n  countryList: ApiCountry[];\n  dispatch: FormEditDispatch;\n};\n\nconst PaymentInfo: FC<OwnProps> = ({\n  state,\n  canSaveCredentials,\n  needCardholderName,\n  needCountry,\n  needZip,\n  countryList,\n  dispatch,\n}) => {\n  // eslint-disable-next-line no-null/no-null\n  const selectCountryRef = useRef<HTMLSelectElement>(null);\n\n  useEffect(() => {\n    if (selectCountryRef.current\n      && selectCountryRef.current.value !== state.billingCountry) {\n      selectCountryRef.current.value = state.billingCountry;\n    }\n  }, [state.billingCountry]);\n\n  const handleCardNumberChange = useCallback((value) => {\n    dispatch({ type: 'changeCardNumber', payload: value });\n  }, [dispatch]);\n\n  const handleCardholderChange = useCallback((e) => {\n    dispatch({ type: 'changeCardholder', payload: e.target.value.toUpperCase() });\n  }, [dispatch]);\n\n  const handleExpiryChange = useCallback((value) => {\n    dispatch({ type: 'changeExpiryDate', payload: value });\n  }, [dispatch]);\n\n  const handleCvvChange = useCallback((e) => {\n    const newValue = e.target.value.replace(/[^0-9]/g, '');\n    dispatch({ type: 'changeCvvCode', payload: newValue });\n  }, [dispatch]);\n\n  const handleCountryChange = useCallback((e) => {\n    dispatch({ type: 'changeBillingCountry', payload: e.target.value });\n  }, [dispatch]);\n\n  const handleBillingPostCodeChange = useCallback((e) => {\n    dispatch({ type: 'changeBillingZip', payload: e.target.value });\n  }, [dispatch]);\n\n  const handleChangeSaveCredentials = useCallback((e) => {\n    dispatch({ type: 'changeSaveCredentials', payload: e.target.value });\n  }, [dispatch]);\n\n  const lang = useOldLang();\n\n  const { formErrors = {} } = state;\n\n  return (\n    <div className=\"PaymentInfo\">\n      <form>\n        <h5>{lang('PaymentCardTitle')}</h5>\n        <CardInput\n          onChange={handleCardNumberChange}\n          value={state.cardNumber}\n          error={formErrors.cardNumber}\n        />\n        { needCardholderName && (\n          <InputText\n            label={lang('Checkout.NewCard.CardholderNamePlaceholder')}\n            onChange={handleCardholderChange}\n            value={state.cardholder}\n            inputMode=\"text\"\n            tabIndex={0}\n            error={formErrors.cardholder}\n          />\n        )}\n        <section className=\"inline-inputs\">\n          <ExpiryInput\n            value={state.expiry}\n            onChange={handleExpiryChange}\n            error={formErrors.expiry}\n          />\n          <InputText\n            label={lang('lng_payments_card_cvc')}\n            onChange={handleCvvChange}\n            value={state.cvv}\n            inputMode=\"numeric\"\n            maxLength={3}\n            tabIndex={0}\n            error={formErrors.cvv}\n            teactExperimentControlled\n          />\n        </section>\n        { needCountry || needZip ? (\n          <h5>{lang('PaymentBillingAddress')}</h5>\n        ) : undefined }\n        { needCountry && (\n          <Select\n            label={lang('PaymentShippingCountry')}\n            onChange={handleCountryChange}\n            value={state.billingCountry}\n            hasArrow={Boolean(true)}\n            id=\"billing-country\"\n            error={formErrors.billingCountry}\n            tabIndex={0}\n            ref={selectCountryRef}\n          >\n            {\n              countryList.map(({ defaultName, name }) => (\n                <option\n                  value={defaultName}\n                  className=\"county-item\"\n                  selected={defaultName === state.billingCountry}\n                >\n                  {defaultName || name}\n                </option>\n              ))\n            }\n          </Select>\n        ) }\n        { needZip && (\n          <InputText\n            label={lang('PaymentShippingZipPlaceholder')}\n            onChange={handleBillingPostCodeChange}\n            value={state.billingZip}\n            inputMode=\"text\"\n            tabIndex={0}\n            maxLength={12}\n            error={formErrors.billingZip}\n          />\n        )}\n        <Checkbox\n          label={lang('PaymentCardSavePaymentInformation')}\n          checked={canSaveCredentials ? state.saveCredentials : false}\n          tabIndex={0}\n          onChange={handleChangeSaveCredentials}\n          disabled={!canSaveCredentials}\n        />\n        <p className=\"description\">\n          {lang(canSaveCredentials ? 'Checkout.NewCard.SaveInfoHelp' : 'Checkout.2FA.Text')}\n        </p>\n      </form>\n    </div>\n  );\n};\n\nexport default memo(PaymentInfo);\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiChat, ApiCountry, ApiPaymentCredentials } from '../../api/types';\nimport type { TabState } from '../../global/types';\nimport type { FormState } from '../../hooks/reducers/usePaymentReducer';\nimport type { Price, ShippingOption } from '../../types';\nimport type { PaymentFormSubmitEvent } from './ConfirmPayment';\nimport { PaymentStep } from '../../types';\n\nimport { getUserFullName } from '../../global/helpers';\nimport { selectChat, selectTabState, selectUser } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { formatCurrencyAsString } from '../../util/formatCurrency';\nimport { detectCardTypeText } from '../common/helpers/detectCardType';\n\nimport usePaymentReducer from '../../hooks/reducers/usePaymentReducer';\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useOldLang from '../../hooks/useOldLang';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport Spinner from '../ui/Spinner';\nimport Transition from '../ui/Transition';\nimport Checkout from './Checkout';\nimport ConfirmPayment from './ConfirmPayment';\nimport PasswordConfirm from './PasswordConfirm';\nimport PaymentInfo from './PaymentInfo';\nimport SavedPaymentCredentials from './SavedPaymentCredentials';\nimport Shipping from './Shipping';\nimport ShippingInfo from './ShippingInfo';\n\nimport './PaymentModal.scss';\n\nconst DEFAULT_PROVIDER = 'stripe';\nconst DONATE_PROVIDER = 'smartglocal';\nconst DONATE_PROVIDER_URL = 'https://payment.smart-glocal.com';\nconst SUPPORTED_PROVIDERS = new Set([DEFAULT_PROVIDER, DONATE_PROVIDER]);\n\nexport type OwnProps = {\n  isOpen?: boolean;\n  onClose: NoneToVoidFunction;\n};\n\ntype StateProps = {\n  chat?: ApiChat;\n  isNameRequested?: boolean;\n  isShippingAddressRequested?: boolean;\n  isPhoneRequested?: boolean;\n  isEmailRequested?: boolean;\n  shouldSendPhoneToProvider?: boolean;\n  shouldSendEmailToProvider?: boolean;\n  currency?: string;\n  prices?: Price[];\n  isProviderError?: boolean;\n  needCardholderName?: boolean;\n  needCountry?: boolean;\n  needZip?: boolean;\n  confirmPaymentUrl?: string;\n  countryList: ApiCountry[];\n  hasShippingOptions?: boolean;\n  requestId?: string;\n  smartGlocalToken?: string;\n  stripeId?: string;\n  savedCredentials?: ApiPaymentCredentials[];\n  passwordValidUntil?: number;\n  isExtendedMedia?: boolean;\n  isPaymentFormUrl?: boolean;\n  botName?: string;\n};\n\ntype GlobalStateProps = Pick<TabState['payment'], (\n  'step' | 'shippingOptions' |\n  'savedInfo' | 'canSaveCredentials' | 'nativeProvider' | 'passwordMissing' | 'invoice' | 'error'\n)>;\n\nconst NETWORK_REQUEST_TIMEOUT_S = 3;\n\nconst PaymentModal: FC<OwnProps & StateProps & GlobalStateProps> = ({\n  isOpen,\n  onClose,\n  step,\n  shippingOptions,\n  savedInfo,\n  canSaveCredentials,\n  isNameRequested,\n  isShippingAddressRequested,\n  isPhoneRequested,\n  isEmailRequested,\n  shouldSendPhoneToProvider,\n  shouldSendEmailToProvider,\n  currency,\n  passwordMissing,\n  isProviderError,\n  invoice,\n  nativeProvider,\n  prices,\n  needCardholderName,\n  needCountry,\n  needZip,\n  confirmPaymentUrl,\n  error,\n  countryList,\n  hasShippingOptions,\n  requestId,\n  smartGlocalToken,\n  stripeId,\n  savedCredentials,\n  passwordValidUntil,\n  isExtendedMedia,\n  isPaymentFormUrl,\n  botName,\n}) => {\n  const {\n    loadPasswordInfo,\n    validateRequestedInfo,\n    sendPaymentForm,\n    setPaymentStep,\n    sendCredentialsInfo,\n    clearPaymentError,\n    validatePaymentPassword,\n    setSmartGlocalCardInfo,\n  } = getActions();\n\n  const lang = useOldLang();\n\n  const [isModalOpen, openModal, closeModal] = useFlag();\n  const [paymentState, paymentDispatch] = usePaymentReducer();\n  const [isLoading, setIsLoading] = useState(false);\n  const [isTosAccepted, setIsTosAccepted] = useState(false);\n  const [twoFaPassword, setTwoFaPassword] = useState('');\n  const prevStep = usePrevious(step, true);\n  const prevRequestId = usePrevious(requestId);\n  const canRenderFooter = step !== PaymentStep.ConfirmPayment;\n\n  const setStep = useCallback((nextStep) => {\n    setPaymentStep({ step: nextStep });\n  }, [setPaymentStep]);\n\n  useEffect(() => {\n    if (isOpen) {\n      setTwoFaPassword('');\n      loadPasswordInfo();\n      openModal();\n    }\n  }, [isOpen, loadPasswordInfo, openModal]);\n\n  // Modal window can be closed by an event from the server side\n  useEffect(() => {\n    if (!isOpen && isModalOpen) {\n      closeModal();\n    }\n  }, [closeModal, isModalOpen, isOpen]);\n\n  useEffect(() => {\n    if (step !== undefined || error) {\n      setIsLoading(false);\n    }\n  }, [step, error, requestId]);\n\n  // When payment verification occurs and the `step` does not change, the card details must be requested\n  useEffect(() => {\n    if (\n      step === PaymentStep.Checkout\n      && step === prevStep\n      && requestId !== prevRequestId\n      && !paymentState.savedCredentialId\n      && !paymentState.cardNumber\n    ) {\n      setStep(PaymentStep.PaymentInfo);\n    }\n  }, [paymentState.cardNumber, paymentState.savedCredentialId, prevRequestId, prevStep, requestId, setStep, step]);\n\n  useEffect(() => {\n    if (error?.field) {\n      paymentDispatch({\n        type: 'setFormErrors',\n        payload: {\n          [error.field]: error.message,\n        },\n      });\n    }\n  }, [error, paymentDispatch]);\n\n  useEffect(() => {\n    if (savedInfo) {\n      const {\n        name: fullName, phone, email, shippingAddress,\n      } = savedInfo;\n      const {\n        countryIso2, ...shippingAddressRest\n      } = shippingAddress || {};\n      const shippingCountry = countryIso2 && countryList.find(({ iso2 }) => iso2 === countryIso2)!.defaultName;\n      paymentDispatch({\n        type: 'updateUserInfo',\n        payload: {\n          fullName,\n          phone: phone && phone.charAt(0) !== '+'\n            ? `+${phone}`\n            : phone,\n          email,\n          ...(shippingCountry && {\n            country: shippingCountry,\n            countryIso2,\n            ...shippingAddressRest,\n          }),\n        },\n      });\n    }\n  }, [savedInfo, paymentDispatch, countryList]);\n\n  useEffect(() => {\n    if (savedCredentials?.length) {\n      paymentDispatch({\n        type: 'changeSavedCredentialId',\n        payload: savedCredentials[0].id,\n      });\n    }\n  }, [paymentDispatch, savedCredentials]);\n\n  const handleErrorModalClose = useCallback(() => {\n    clearPaymentError();\n  }, [clearPaymentError]);\n\n  const totalPrice = useMemo(() => {\n    if (step !== PaymentStep.Checkout) {\n      return 0;\n    }\n\n    return getTotalPrice(prices, shippingOptions, paymentState.shipping, paymentState.tipAmount);\n  }, [step, prices, shippingOptions, paymentState.shipping, paymentState.tipAmount]);\n\n  const checkoutInfo = useMemo(() => {\n    if (step !== PaymentStep.Checkout) {\n      return undefined;\n    }\n    return getCheckoutInfo(paymentState, shippingOptions, nativeProvider || '');\n  }, [step, paymentState, shippingOptions, nativeProvider]);\n\n  const handleNewCardClick = useCallback(() => {\n    setStep(PaymentStep.PaymentInfo);\n  }, [setStep]);\n\n  const handleClearPaymentError = useCallback(() => {\n    clearPaymentError();\n  }, [clearPaymentError]);\n\n  function renderError() {\n    if (!error) {\n      return undefined;\n    }\n    return (\n      <Modal\n        className=\"error\"\n        isOpen={Boolean(error)}\n        onClose={handleErrorModalClose}\n      >\n        <h4>{error.description || 'Error'}</h4>\n        <p>{error.description || 'Error'}</p>\n        <div className=\"dialog-buttons mt-2\">\n          <Button\n            isText\n            onClick={handleClearPaymentError}\n          >\n            {lang('OK')}\n          </Button>\n        </div>\n      </Modal>\n    );\n  }\n\n  const sendForm = useCallback(() => {\n    sendPaymentForm({\n      shippingOptionId: paymentState.shipping,\n      saveCredentials: paymentState.saveCredentials,\n      savedCredentialId: paymentState.savedCredentialId,\n      tipAmount: paymentState.tipAmount,\n    });\n  }, [sendPaymentForm, paymentState]);\n\n  const handlePaymentFormSubmit = useCallback((eventData: PaymentFormSubmitEvent['eventData']) => {\n    const { credentials } = eventData;\n    setSmartGlocalCardInfo(credentials);\n    sendForm();\n  }, [sendForm]);\n\n  function renderModalContent(currentStep: PaymentStep) {\n    switch (currentStep) {\n      case PaymentStep.Checkout:\n        return (\n          <Checkout\n            prices={prices}\n            dispatch={paymentDispatch}\n            shippingPrices={paymentState.shipping && shippingOptions\n              ? getShippingPrices(shippingOptions, paymentState.shipping)\n              : undefined}\n            totalPrice={totalPrice}\n            invoice={invoice}\n            checkoutInfo={checkoutInfo}\n            isPaymentFormUrl={isPaymentFormUrl}\n            currency={currency!}\n            hasShippingOptions={hasShippingOptions}\n            tipAmount={paymentState.tipAmount}\n            needAddress={Boolean(isShippingAddressRequested)}\n            savedCredentials={savedCredentials}\n            isTosAccepted={isTosAccepted}\n            onAcceptTos={setIsTosAccepted}\n            botName={botName}\n          />\n        );\n      case PaymentStep.SavedPayments:\n        return (\n          <SavedPaymentCredentials\n            state={paymentState}\n            savedCredentials={savedCredentials}\n            dispatch={paymentDispatch}\n            onNewCardClick={handleNewCardClick}\n          />\n        );\n      case PaymentStep.ConfirmPassword:\n        return (\n          <PasswordConfirm\n            state={paymentState}\n            savedCredentials={savedCredentials}\n            onPasswordChange={setTwoFaPassword}\n            isActive={currentStep === step}\n          />\n        );\n      case PaymentStep.PaymentInfo:\n        return (\n          <PaymentInfo\n            state={paymentState}\n            dispatch={paymentDispatch}\n            canSaveCredentials={Boolean(!passwordMissing && canSaveCredentials)}\n            needCardholderName={needCardholderName}\n            needCountry={needCountry}\n            needZip={needZip}\n            countryList={countryList!}\n          />\n        );\n      case PaymentStep.ShippingInfo:\n        return (\n          <ShippingInfo\n            state={paymentState}\n            dispatch={paymentDispatch}\n            needAddress={Boolean(isShippingAddressRequested)}\n            needEmail={Boolean(isEmailRequested || shouldSendEmailToProvider)}\n            needPhone={Boolean(isPhoneRequested || shouldSendPhoneToProvider)}\n            needName={Boolean(isNameRequested)}\n            countryList={countryList!}\n          />\n        );\n      case PaymentStep.Shipping:\n        return (\n          <Shipping\n            state={paymentState}\n            dispatch={paymentDispatch}\n            shippingOptions={shippingOptions || []}\n            currency={currency!}\n          />\n        );\n      case PaymentStep.ConfirmPayment:\n        return (\n          <ConfirmPayment\n            url={confirmPaymentUrl!}\n            noRedirect={isExtendedMedia}\n            onPaymentFormSubmit={handlePaymentFormSubmit}\n            onClose={closeModal}\n          />\n        );\n      default:\n        return undefined;\n    }\n  }\n\n  const validateRequest = useCallback(() => {\n    const { saveInfo } = paymentState;\n    const requestInfo = getRequestInfo(paymentState);\n    validateRequestedInfo({ requestInfo, saveInfo });\n  }, [validateRequestedInfo, paymentState]);\n\n  const sendCredentials = useCallback(() => {\n    const credentials = getCredentials(paymentState);\n    sendCredentialsInfo({\n      credentials,\n    });\n  }, [sendCredentialsInfo, paymentState]);\n\n  const handleButtonClick = useLastCallback(() => {\n    switch (step) {\n      case PaymentStep.ShippingInfo:\n        setIsLoading(true);\n        validateRequest();\n        break;\n\n      case PaymentStep.Shipping:\n        setStep(PaymentStep.Checkout);\n        break;\n\n      case PaymentStep.SavedPayments:\n        setStep(PaymentStep.ConfirmPassword);\n        break;\n\n      case PaymentStep.ConfirmPassword:\n        if (twoFaPassword === '') {\n          return;\n        }\n\n        setIsLoading(true);\n        validatePaymentPassword({ password: twoFaPassword });\n        break;\n\n      case PaymentStep.PaymentInfo:\n        setIsLoading(true);\n        sendCredentials();\n        paymentDispatch({ type: 'changeSavedCredentialId', payload: '' });\n        break;\n\n      case PaymentStep.Checkout: {\n        if (isPaymentFormUrl) {\n          setIsLoading(true);\n          setStep(PaymentStep.ConfirmPayment);\n          return;\n        }\n\n        if (savedInfo && !requestId && !paymentState.shipping) {\n          setIsLoading(true);\n          validateRequest();\n          return;\n        }\n\n        if (\n          paymentState.savedCredentialId\n          && (!passwordValidUntil || passwordValidUntil <= (Date.now() / 1000 - NETWORK_REQUEST_TIMEOUT_S))\n        ) {\n          setStep(PaymentStep.ConfirmPassword);\n          return;\n        }\n\n        if (\n          !paymentState.savedCredentialId\n          && (\n            (nativeProvider === DEFAULT_PROVIDER && !stripeId)\n            || (nativeProvider === DONATE_PROVIDER && !smartGlocalToken)\n          )\n        ) {\n          setStep(PaymentStep.PaymentInfo);\n          return;\n        }\n\n        const { phone, email, fullName } = paymentState;\n        const shouldFillRequestedData = (isEmailRequested && !email)\n          || (isPhoneRequested && !phone)\n          || (isNameRequested && !fullName);\n\n        if ((isShippingAddressRequested && !requestId) || shouldFillRequestedData) {\n          setStep(PaymentStep.ShippingInfo);\n          return;\n        }\n\n        if (isShippingAddressRequested && !paymentState.shipping && shippingOptions?.length) {\n          setStep(PaymentStep.Shipping);\n          return;\n        }\n\n        setIsLoading(true);\n        sendForm();\n        break;\n      }\n    }\n  });\n\n  useEffect(() => {\n    return step === PaymentStep.ConfirmPassword\n      ? captureKeyboardListeners({ onEnter: handleButtonClick })\n      : undefined;\n  },\n  [handleButtonClick, step]);\n\n  const handleModalClose = useCallback(() => {\n    paymentDispatch({\n      type: 'resetState',\n    });\n    setIsTosAccepted(false);\n    onClose();\n  }, [onClose, paymentDispatch]);\n\n  const handleBackClick = useCallback(() => {\n    setStep(step === PaymentStep.ConfirmPassword ? PaymentStep.SavedPayments : PaymentStep.Checkout);\n  }, [setStep, step]);\n\n  const modalHeader = useMemo(() => {\n    switch (step) {\n      case PaymentStep.Checkout:\n        return lang('PaymentCheckout');\n      case PaymentStep.ShippingInfo:\n        return lang('PaymentShippingInfo');\n      case PaymentStep.Shipping:\n        return lang('PaymentShippingMethod');\n      case PaymentStep.SavedPayments:\n        return lang('PaymentCheckoutMethod');\n      case PaymentStep.ConfirmPassword:\n        return lang('Checkout.PasswordEntry.Title');\n      case PaymentStep.PaymentInfo:\n        return lang('PaymentCardInfo');\n      case PaymentStep.ConfirmPayment:\n        return lang('Checkout.WebConfirmation.Title');\n      default:\n        return '';\n    }\n  }, [step, lang]);\n\n  const buttonText = step === PaymentStep.Checkout\n    ? lang('Checkout.PayPrice', formatCurrencyAsString(totalPrice, currency!, lang.code))\n    : lang('Next');\n\n  function getIsSubmitDisabled() {\n    if (isLoading) {\n      return true;\n    }\n\n    switch (step) {\n      case PaymentStep.Checkout:\n        return Boolean(invoice?.termsUrl) && !isTosAccepted;\n\n      case PaymentStep.PaymentInfo:\n        return Boolean(\n          paymentState.cardNumber === ''\n          || (needCardholderName && paymentState.cardholder === '')\n          || paymentState.cvv === ''\n          || paymentState.expiry === '',\n        );\n\n      default:\n        return false;\n    }\n  }\n\n  if (isProviderError) {\n    return (\n      <Modal\n        className=\"error\"\n        isOpen={isModalOpen}\n        onClose={closeModal}\n        onCloseAnimationEnd={handleModalClose}\n      >\n        <p>\n          Sorry, Telegram Web A doesn&apos;t support payments with this provider yet. <br />\n          Please use one of our mobile apps to do this.\n        </p>\n        <div className=\"dialog-buttons mt-2\">\n          <Button\n            isText\n            onClick={closeModal}\n          >\n            {lang('OK')}\n          </Button>\n        </div>\n      </Modal>\n    );\n  }\n\n  const isSubmitDisabled = getIsSubmitDisabled();\n\n  return (\n    <Modal\n      className={buildClassName('PaymentModal', invoice?.isRecurring && 'recurring')}\n      isOpen={isModalOpen}\n      onClose={closeModal}\n      onCloseAnimationEnd={handleModalClose}\n    >\n      <div className=\"header\" dir={lang.isRtl ? 'rtl' : undefined}>\n        <Button\n          className=\"close-button\"\n          color=\"translucent\"\n          round\n          size=\"smaller\"\n          onClick={step === PaymentStep.Checkout ? closeModal : handleBackClick}\n          ariaLabel=\"Close\"\n        >\n          <i className={buildClassName(\n            'icon', step === PaymentStep.Checkout ? 'icon-close' : 'icon-arrow-left',\n          )}\n          />\n        </Button>\n        <h3>{modalHeader}</h3>\n      </div>\n      {step !== undefined ? (\n        <Transition\n          name=\"slide\"\n          activeKey={step}\n          shouldCleanup\n          cleanupOnlyKey={PaymentStep.ConfirmPayment}\n        >\n          <div className=\"content custom-scroll\">\n            {renderModalContent(step)}\n          </div>\n        </Transition>\n      ) : (\n        <div className=\"empty-content\">\n          <Spinner color=\"gray\" />\n        </div>\n      )}\n      {canRenderFooter && (\n        <div className=\"footer\">\n          <Button\n            type=\"submit\"\n            onClick={handleButtonClick}\n            disabled={isSubmitDisabled}\n            isLoading={isLoading}\n          >\n            {buttonText}\n          </Button>\n        </div>\n      )}\n      {error && !error.field && renderError()}\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps & GlobalStateProps => {\n    const {\n      step,\n      shippingOptions,\n      savedInfo,\n      canSaveCredentials,\n      invoice,\n      invoiceContainer,\n      nativeProvider,\n      nativeParams,\n      passwordMissing,\n      error,\n      confirmPaymentUrl,\n      inputInvoice,\n      requestId,\n      stripeCredentials,\n      smartGlocalCredentials,\n      savedCredentials,\n      temporaryPassword,\n      isExtendedMedia,\n      url,\n      botId,\n      type,\n    } = selectTabState(global).payment;\n\n    const countryList = global.countryList.general;\n\n    // Handled in `StarPaymentModal`\n    if (type === 'stars') {\n      return {\n        countryList,\n      };\n    }\n\n    let providerName = nativeProvider;\n    if (!providerName && url) {\n      providerName = url.startsWith(DONATE_PROVIDER_URL) ? DONATE_PROVIDER : undefined;\n    }\n\n    const chat = inputInvoice && 'chatId' in inputInvoice ? selectChat(global, inputInvoice.chatId!) : undefined;\n    const isProviderError = Boolean(invoice && (!providerName || !SUPPORTED_PROVIDERS.has(providerName)));\n    const { needCardholderName, needCountry, needZip } = (nativeParams || {});\n    const {\n      isNameRequested,\n      isShippingAddressRequested,\n      isPhoneRequested,\n      isEmailRequested,\n      shouldSendPhoneToProvider,\n      shouldSendEmailToProvider,\n      currency,\n      prices,\n    } = (invoiceContainer || {});\n    const bot = botId ? selectUser(global, botId) : undefined;\n    const botName = getUserFullName(bot);\n\n    return {\n      step,\n      chat,\n      shippingOptions,\n      savedInfo,\n      canSaveCredentials,\n      nativeProvider: providerName,\n      passwordMissing,\n      isNameRequested,\n      isShippingAddressRequested,\n      isPhoneRequested,\n      isEmailRequested,\n      shouldSendPhoneToProvider,\n      shouldSendEmailToProvider,\n      currency,\n      prices,\n      isProviderError,\n      invoice,\n      needCardholderName,\n      needCountry,\n      needZip,\n      error,\n      confirmPaymentUrl: confirmPaymentUrl ?? url,\n      isPaymentFormUrl: Boolean(!nativeProvider && url),\n      countryList,\n      requestId,\n      hasShippingOptions: Boolean(shippingOptions?.length),\n      smartGlocalToken: smartGlocalCredentials?.token,\n      stripeId: stripeCredentials?.id,\n      savedCredentials,\n      passwordValidUntil: temporaryPassword?.validUntil,\n      isExtendedMedia,\n      botName,\n    };\n  },\n)(PaymentModal));\n\nfunction findShippingOption(shippingOptions: ShippingOption[], optionId: string) {\n  return shippingOptions.find(({ id }) => id === optionId);\n}\n\nfunction getShippingPrices(shippingOptions: ShippingOption[], shippingOption: string) {\n  const option = findShippingOption(shippingOptions, shippingOption);\n  return option?.prices;\n}\n\nfunction getTotalPrice(\n  prices: Price[] = [],\n  shippingOptions: ShippingOption[] | undefined,\n  shippingOption: string,\n  tipAmount: number,\n) {\n  const shippingPrices = shippingOptions\n    ? getShippingPrices(shippingOptions, shippingOption)\n    : [];\n  let total = tipAmount;\n  const totalPrices = prices.concat(shippingPrices || []);\n  total = totalPrices.reduce((acc, cur) => {\n    return acc + cur.amount;\n  }, total);\n  return total;\n}\n\nfunction getCheckoutInfo(state: FormState, shippingOptions: ShippingOption[] | undefined, paymentProvider: string) {\n  const cardTypeText = detectCardTypeText(state.cardNumber);\n  const paymentMethod = cardTypeText && state.cardNumber ? `${cardTypeText} *${state.cardNumber.slice(-4)}` : undefined;\n  const shippingAddress = state.streetLine1\n    ? `${state.streetLine1}, ${state.city}, ${state.countryIso2}`\n    : undefined;\n  const { phone, fullName: name } = state;\n  const shippingOption = shippingOptions ? findShippingOption(shippingOptions, state.shipping) : undefined;\n  const shippingMethod = shippingOption?.title;\n  return {\n    paymentMethod,\n    paymentProvider,\n    shippingAddress,\n    name,\n    phone,\n    shippingMethod,\n  };\n}\n\nfunction getRequestInfo(paymentState: FormState) {\n  const {\n    streetLine1,\n    streetLine2,\n    city,\n    state,\n    countryIso2,\n    postCode,\n    fullName: name,\n    phone,\n    email,\n  } = paymentState;\n\n  const shippingAddress = {\n    streetLine1,\n    streetLine2,\n    city,\n    state,\n    countryIso2,\n    postCode,\n  };\n\n  return {\n    name,\n    phone,\n    email,\n    shippingAddress,\n  };\n}\n\nexport type ApiCredentials = {\n  data: {\n    cardNumber: string;\n    cardholder: string;\n    expiryMonth: string;\n    expiryYear: string;\n    cvv: string;\n    country: string;\n    zip: string;\n  };\n};\n\nfunction getCredentials(paymentState: FormState): ApiCredentials {\n  const {\n    cardNumber, cardholder, expiry, cvv, billingCountry, billingZip,\n  } = paymentState;\n  const [expiryMonth, expiryYear] = expiry.split('/');\n  const data = {\n    cardNumber,\n    cardholder,\n    expiryMonth,\n    expiryYear,\n    cvv,\n    country: billingCountry,\n    zip: billingZip,\n  };\n\n  return {\n    data,\n  };\n}\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo, useEffect, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type {\n  ApiInvoice,\n  ApiPeer,\n  ApiReceipt, ApiReceiptRegular, ApiShippingAddress,\n  ApiStarsTransactionPeer,\n} from '../../api/types';\nimport { MediaViewerOrigin } from '../../types';\n\nimport { getMessageLink } from '../../global/helpers';\nimport { buildStarsTransactionCustomPeer, formatStarsTransactionAmount } from '../../global/helpers/payments';\nimport { selectPeer, selectTabState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { copyTextToClipboard } from '../../util/clipboard';\nimport { formatDateTimeToString } from '../../util/dates/dateFormat';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport Icon from '../common/icons/Icon';\nimport StarIcon from '../common/icons/StarIcon';\nimport SafeLink from '../common/SafeLink';\nimport TableInfoModal, { type TableData } from '../modals/common/TableInfoModal';\nimport PaidMediaThumb from '../modals/stars/PaidMediaThumb';\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport Checkout from './Checkout';\n\nimport './PaymentModal.scss';\nimport styles from './ReceiptModal.module.scss';\n\nimport StarsBackground from '../../assets/stars-bg.png';\n\nexport type OwnProps = {\n  isOpen?: boolean;\n  onClose: NoneToVoidFunction;\n};\n\ntype StateProps = {\n  receipt?: ApiReceipt;\n  peer?: ApiPeer;\n};\n\nconst ReceiptModal: FC<OwnProps & StateProps> = ({\n  isOpen, receipt, peer, onClose,\n}) => {\n  const { showNotification, openMediaViewer } = getActions();\n  const lang = useOldLang();\n\n  const handleOpenMedia = useLastCallback(() => {\n    const media = receipt?.type === 'stars' && receipt.media;\n    if (!media) return;\n\n    openMediaViewer({\n      origin: MediaViewerOrigin.StarsTransaction,\n      standaloneMedia: media.flatMap((item) => Object.values(item)),\n    });\n  });\n\n  const starModalData = useMemo(() => {\n    if (receipt?.type !== 'stars') return undefined;\n\n    const customPeer = (receipt.peer && receipt.peer.type !== 'peer' && buildStarsTransactionCustomPeer(receipt.peer))\n      || undefined;\n\n    const botId = receipt.botId || (receipt.peer?.type === 'peer' ? receipt.peer.id : undefined);\n    const toName = receipt.peer && lang(getStarsPeerTitleKey(receipt.peer));\n\n    const title = receipt.title || (customPeer ? lang(customPeer.titleKey) : undefined);\n\n    const messageLink = peer && receipt.messageId ? getMessageLink(peer, undefined, receipt.messageId) : undefined;\n\n    const media = receipt.media;\n\n    const mediaAmount = media?.length || 0;\n    const areAllPhotos = media?.every((m) => !m.video);\n    const areAllVideos = media?.every((m) => !m.photo);\n\n    const mediaText = areAllPhotos ? lang('Stars.Transfer.Photos', mediaAmount)\n      : areAllVideos ? lang('Stars.Transfer.Videos', mediaAmount)\n        : lang('Media', mediaAmount);\n\n    const description = receipt.text || (media ? mediaText : undefined);\n\n    const header = (\n      <div className={styles.header}>\n        {media && (\n          <PaidMediaThumb\n            className={buildClassName(styles.mediaPreview, 'transaction-media-preview')}\n            media={media}\n            onClick={handleOpenMedia}\n          />\n        )}\n        <img\n          className={buildClassName(styles.starsBackground, receipt.media && styles.mediaShift)}\n          src={StarsBackground}\n          alt=\"\"\n          draggable={false}\n        />\n        {title && <h1 className={styles.title}>{title}</h1>}\n        <p className={styles.description}>{description}</p>\n        <p className={styles.amount}>\n          <span className={buildClassName(styles.amount, receipt.totalAmount < 0 ? styles.negative : styles.positive)}>\n            {formatStarsTransactionAmount(receipt.totalAmount)}\n          </span>\n          <StarIcon type=\"gold\" size=\"big\" />\n        </p>\n      </div>\n    );\n\n    const tableData: TableData = [];\n\n    tableData.push([\n      lang(receipt.totalAmount < 0 ? 'Stars.Transaction.To' : 'Stars.Transaction.Via'),\n      botId ? { chatId: botId } : toName || '',\n    ]);\n\n    if (messageLink) {\n      tableData.push([lang('Stars.Transaction.Media'), <SafeLink url={messageLink} text={messageLink} />]);\n    }\n\n    tableData.push([\n      lang('Stars.Transaction.Id'),\n      (\n        <span\n          className={styles.tid}\n          onClick={() => {\n            copyTextToClipboard(receipt.transactionId);\n            showNotification({\n              message: lang('StarsTransactionIDCopied'),\n            });\n          }}\n        >\n          {receipt.transactionId}\n          <Icon className={styles.copyIcon} name=\"copy\" />\n        </span>\n      ),\n    ]);\n\n    tableData.push([\n      lang('Stars.Transaction.Date'),\n      formatDateTimeToString(receipt.date * 1000, lang.code, true),\n    ]);\n\n    const footerText = lang('lng_credits_box_out_about');\n    const footerTextParts = footerText.split('{link}');\n\n    const footer = (\n      <span className={styles.footer}>\n        {footerTextParts[0]}\n        <SafeLink url={lang('StarsTOSLink')} text={lang('lng_credits_summary_options_about_link')} />\n        {footerTextParts[1]}\n      </span>\n    );\n\n    return {\n      header,\n      tableData,\n      footer,\n      avatarPeer: !receipt.photo ? (peer || customPeer) : undefined,\n    };\n  }, [lang, receipt, peer]);\n\n  if (receipt?.type === 'regular') {\n    return <ReceiptModalRegular isOpen={isOpen} receipt={receipt} onClose={onClose} />;\n  }\n\n  return (\n    <TableInfoModal\n      isOpen={isOpen}\n      className={styles.modal}\n      header={starModalData?.header}\n      tableData={starModalData?.tableData}\n      footer={starModalData?.footer}\n      noHeaderImage={Boolean(receipt?.media)}\n      headerAvatarWebPhoto={receipt?.photo}\n      headerAvatarPeer={starModalData?.avatarPeer}\n      buttonText={lang('OK')}\n      onClose={onClose}\n    />\n  );\n};\n\nfunction ReceiptModalRegular({\n  isOpen, receipt, onClose,\n}: {\n  isOpen?: boolean;\n  receipt: ApiReceiptRegular;\n  onClose: NoneToVoidFunction;\n}) {\n  const {\n    credentialsTitle,\n    currency,\n    prices,\n    tipAmount,\n    totalAmount,\n    info,\n    photo,\n    shippingMethod,\n    shippingPrices,\n    text,\n    title,\n  } = receipt;\n  const lang = useOldLang();\n\n  const [isModalOpen, openModal, closeModal] = useFlag();\n\n  useEffect(() => {\n    if (isOpen) {\n      openModal();\n    }\n  }, [isOpen, openModal]);\n\n  const checkoutInfo = useMemo(() => {\n    return getCheckoutInfo(credentialsTitle, info, shippingMethod);\n  }, [info, shippingMethod, credentialsTitle]);\n\n  const invoice: ApiInvoice = useMemo(() => {\n    return {\n      mediaType: 'invoice',\n      photo,\n      text: text!,\n      title: title!,\n      amount: totalAmount!,\n      currency: currency!,\n    };\n  }, [currency, photo, text, title, totalAmount]);\n\n  return (\n    <Modal\n      className=\"PaymentModal PaymentModal-receipt\"\n      isOpen={isModalOpen}\n      onClose={closeModal}\n      onCloseAnimationEnd={onClose}\n    >\n      <div>\n        <div className=\"header\" dir={lang.isRtl ? 'rtl' : undefined}>\n          <Button\n            className=\"close-button\"\n            color=\"translucent\"\n            round\n            size=\"smaller\"\n            onClick={closeModal}\n            ariaLabel=\"Close\"\n          >\n            <i className=\"icon icon-close\" />\n          </Button>\n          <h3> {lang('PaymentReceipt')} </h3>\n        </div>\n        <div className=\"receipt-content custom-scroll\">\n          <Checkout\n            prices={prices}\n            shippingPrices={shippingPrices}\n            totalPrice={totalAmount}\n            tipAmount={tipAmount}\n            invoice={invoice}\n            checkoutInfo={checkoutInfo}\n            currency={currency!}\n          />\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const { receipt } = selectTabState(global).payment;\n\n    const peerId = receipt?.type === 'stars' && (receipt.botId || (receipt.peer?.type === 'peer' && receipt.peer.id));\n    const peer = peerId ? selectPeer(global, peerId) : undefined;\n\n    return {\n      receipt,\n      peer,\n    };\n  },\n)(ReceiptModal));\n\nfunction getCheckoutInfo(paymentMethod?: string,\n  info?:\n  { phone?: string;\n    name?: string;\n    shippingAddress?: ApiShippingAddress;\n  },\n  shippingMethod?: string) {\n  if (!info) {\n    return { paymentMethod };\n  }\n  const { shippingAddress } = info;\n  const fullAddress = shippingAddress?.streetLine1\n    ? `${shippingAddress.streetLine1}, ${shippingAddress.city}, ${shippingAddress.countryIso2}`\n    : undefined;\n  const { phone, name } = info;\n  return {\n    paymentMethod,\n    shippingAddress: fullAddress,\n    name,\n    phone,\n    shippingMethod,\n  };\n}\n\nfunction getStarsPeerTitleKey(peer: ApiStarsTransactionPeer) {\n  switch (peer.type) {\n    case 'appStore':\n      return 'AppStore';\n    case 'playMarket':\n      return 'PlayMarket';\n    case 'fragment':\n      return 'Fragment';\n    case 'premiumBot':\n      return 'StarsTransactionBot';\n    case 'ads':\n      return 'StarsTransactionAds';\n    default:\n      return 'Stars.Transaction.Unsupported.Title';\n  }\n}\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo, useCallback, useMemo } from '../../lib/teact/teact';\n\nimport type { ApiPaymentCredentials } from '../../api/types';\nimport type { FormEditDispatch, FormState } from '../../hooks/reducers/usePaymentReducer';\n\nimport { MEMO_EMPTY_ARRAY } from '../../util/memo';\n\nimport useOldLang from '../../hooks/useOldLang';\n\nimport Button from '../ui/Button';\nimport RadioGroup from '../ui/RadioGroup';\n\ninterface OwnProps {\n  state: FormState;\n  savedCredentials?: ApiPaymentCredentials[];\n  dispatch: FormEditDispatch;\n  onNewCardClick: NoneToVoidFunction;\n}\n\nconst SavedPaymentCredentials: FC<OwnProps> = ({\n  state,\n  savedCredentials,\n  dispatch,\n  onNewCardClick,\n}) => {\n  const lang = useOldLang();\n\n  const options = useMemo(() => {\n    return savedCredentials?.length\n      ? savedCredentials.map(({ id, title }) => ({ label: title, value: id }))\n      : MEMO_EMPTY_ARRAY;\n  }, [savedCredentials]);\n\n  const onChange = useCallback((value) => {\n    dispatch({ type: 'changeSavedCredentialId', payload: value });\n  }, [dispatch]);\n\n  return (\n    <div className=\"PaymentInfo\">\n      <form>\n        <h5>{lang('PaymentCardTitle')}</h5>\n\n        <RadioGroup\n          name=\"saved-credentials\"\n          options={options}\n          selected={state.savedCredentialId}\n          onChange={onChange}\n        />\n\n        <Button isText onClick={onNewCardClick}>\n          {lang('PaymentCheckoutMethodNewCard')}\n        </Button>\n      </form>\n    </div>\n  );\n};\n\nexport default memo(SavedPaymentCredentials);\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect,\n  useMemo,\n} from '../../lib/teact/teact';\n\nimport type { FormEditDispatch, FormState } from '../../hooks/reducers/usePaymentReducer';\nimport type { ShippingOption } from '../../types';\n\nimport { formatCurrency } from '../../util/formatCurrency';\n\nimport useOldLang from '../../hooks/useOldLang';\n\nimport RadioGroup from '../ui/RadioGroup';\n\nimport './Shipping.scss';\n\nexport type OwnProps = {\n  state: FormState;\n  shippingOptions: ShippingOption[];\n  currency: string;\n  dispatch: FormEditDispatch;\n};\n\nconst Shipping: FC<OwnProps> = ({\n  state,\n  shippingOptions,\n  currency,\n  dispatch,\n}) => {\n  const lang = useOldLang();\n\n  useEffect(() => {\n    if (!shippingOptions || !shippingOptions.length || state.shipping) {\n      return;\n    }\n    dispatch({ type: 'changeShipping', payload: shippingOptions[0].id });\n  }, [shippingOptions, state.shipping, dispatch]);\n\n  const handleShippingSelect = useCallback((value) => {\n    dispatch({ type: 'changeShipping', payload: value });\n  }, [dispatch]);\n\n  const options = useMemo(() => (shippingOptions.map(({ id: value, title: label, amount }) => ({\n    label,\n    subLabel: formatCurrency(amount, currency, lang.code),\n    value,\n  }))), [shippingOptions, currency, lang.code]);\n\n  return (\n    <div className=\"Shipping\">\n      <form>\n        <p>{lang('PaymentShippingMethod')}</p>\n        <RadioGroup\n          name=\"shipping-options\"\n          options={options}\n          onChange={handleShippingSelect}\n          selected={state.shipping}\n        />\n      </form>\n    </div>\n  );\n};\n\nexport default memo(Shipping);\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo,\n  useCallback, useEffect, useRef,\n} from '../../lib/teact/teact';\n\nimport type { ApiCountry } from '../../api/types';\nimport type { FormEditDispatch, FormState } from '../../hooks/reducers/usePaymentReducer';\n\nimport useFocusAfterAnimation from '../../hooks/useFocusAfterAnimation';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport Checkbox from '../ui/Checkbox';\nimport InputText from '../ui/InputText';\nimport Select from '../ui/Select';\n\nimport './ShippingInfo.scss';\n\nexport type OwnProps = {\n  state: FormState;\n  needEmail: boolean;\n  needPhone: boolean;\n  needName: boolean;\n  needAddress: boolean;\n  countryList: ApiCountry[];\n  dispatch: FormEditDispatch;\n};\n\nconst ShippingInfo: FC<OwnProps> = ({\n  state,\n  needEmail,\n  needPhone,\n  needName,\n  needAddress,\n  countryList,\n  dispatch,\n}) => {\n  // eslint-disable-next-line no-null/no-null\n  const inputRef = useRef<HTMLInputElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const phoneRef = useRef<HTMLInputElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const selectCountryRef = useRef<HTMLSelectElement>(null);\n\n  useEffect(() => {\n    if (selectCountryRef.current\n      && selectCountryRef.current.value !== state.countryIso2) {\n      selectCountryRef.current.value = state.countryIso2;\n    }\n  }, [state.countryIso2]);\n\n  const lang = useOldLang();\n\n  useFocusAfterAnimation(inputRef);\n\n  const handleAddress1Change = useCallback((e) => {\n    dispatch({ type: 'changeAddress1', payload: e.target.value });\n  }, [dispatch]);\n\n  const handleAddress2Change = useCallback((e) => {\n    dispatch({ type: 'changeAddress2', payload: e.target.value });\n  }, [dispatch]);\n\n  const handleCityChange = useCallback((e) => {\n    dispatch({ type: 'changeCity', payload: e.target.value });\n  }, [dispatch]);\n\n  const handleStateChange = useCallback((e) => {\n    dispatch({ type: 'changeState', payload: e.target.value });\n  }, [dispatch]);\n\n  const handleCountryChange = useCallback((e) => {\n    dispatch({ type: 'changeCountry', payload: countryList.find((country) => country.iso2 === e.target.value) });\n  }, [countryList, dispatch]);\n\n  const handlePostCodeChange = useCallback((e) => {\n    dispatch({ type: 'changePostCode', payload: e.target.value });\n  }, [dispatch]);\n\n  const handleFullNameChange = useCallback((e) => {\n    dispatch({ type: 'changeFullName', payload: e.target.value });\n  }, [dispatch]);\n\n  const handleEmailChange = useCallback((e) => {\n    dispatch({ type: 'changeEmail', payload: e.target.value });\n  }, [dispatch]);\n\n  const handlePhoneChange = useCallback((e) => {\n    let { value } = e.target;\n    value = `+${value.replace(/\\D/g, '')}`;\n    if (phoneRef.current) {\n      phoneRef.current.value = value;\n    }\n    dispatch({ type: 'changePhone', payload: value });\n  }, [dispatch]);\n\n  const handleSaveInfoChange = useCallback((e) => {\n    dispatch({ type: 'changeSaveInfo', payload: e.target.value });\n  }, [dispatch]);\n\n  const { formErrors } = state;\n  return (\n    <div className=\"ShippingInfo\">\n      <form>\n        {needAddress ? (\n          <div>\n            <h5>{lang('PaymentShippingAddress')}</h5>\n            <InputText\n              ref={inputRef}\n              label={lang('PaymentShippingAddress1Placeholder')}\n              onChange={handleAddress1Change}\n              value={state.streetLine1}\n              inputMode=\"text\"\n              tabIndex={0}\n              error={formErrors.streetLine1}\n            />\n            <InputText\n              label={lang('PaymentShippingAddress2Placeholder')}\n              onChange={handleAddress2Change}\n              value={state.streetLine2}\n              inputMode=\"text\"\n              tabIndex={0}\n              error={formErrors.streetLine2}\n            />\n            <InputText\n              label={lang('PaymentShippingCityPlaceholder')}\n              onChange={handleCityChange}\n              value={state.city}\n              inputMode=\"text\"\n              tabIndex={0}\n              error={formErrors.city}\n            />\n            <InputText\n              label={lang('PaymentShippingStatePlaceholder')}\n              onChange={handleStateChange}\n              value={state.state}\n              inputMode=\"text\"\n              error={formErrors.state}\n            />\n            <Select\n              label={lang('PaymentShippingCountry')}\n              onChange={handleCountryChange}\n              value={state.countryIso2}\n              hasArrow={Boolean(true)}\n              id=\"shipping-country\"\n              error={formErrors.countryIso2}\n              ref={selectCountryRef}\n              tabIndex={0}\n            >\n              {countryList.map(({ defaultName, name, iso2 }) => (\n                <option\n                  value={iso2}\n                  className=\"county-item\"\n                  selected={iso2 === state.countryIso2}\n                >\n                  {defaultName || name}\n                </option>\n              ))}\n            </Select>\n\n            <InputText\n              label={lang('PaymentShippingZipPlaceholder')}\n              onChange={handlePostCodeChange}\n              value={state.postCode}\n              inputMode=\"text\"\n              tabIndex={0}\n              error={formErrors.postCode}\n            />\n          </div>\n        ) : undefined}\n        { needName || needEmail || needPhone ? (\n          <h5>{lang('PaymentShippingReceiver')}</h5>\n        ) : undefined }\n        { needName && (\n          <InputText\n            label={lang('PaymentShippingName')}\n            onChange={handleFullNameChange}\n            value={state.fullName}\n            inputMode=\"text\"\n            tabIndex={0}\n            error={formErrors.fullName}\n          />\n        ) }\n        { needEmail && (\n          <InputText\n            label={lang('PaymentShippingEmailPlaceholder')}\n            onChange={handleEmailChange}\n            value={state.email}\n            inputMode=\"email\"\n            tabIndex={0}\n            error={formErrors.email}\n          />\n        ) }\n        { needPhone && (\n          <InputText\n            label={lang('PaymentShippingPhoneNumber')}\n            onChange={handlePhoneChange}\n            value={state.phone}\n            inputMode=\"tel\"\n            tabIndex={0}\n            error={formErrors.phone}\n            ref={phoneRef}\n          />\n        ) }\n        <Checkbox\n          label={lang('PaymentShippingSave')}\n          subLabel={lang('PaymentShippingSaveInfo')}\n          checked={Boolean(state.saveInfo)}\n          tabIndex={0}\n          onChange={handleSaveInfoChange}\n        />\n      </form>\n    </div>\n  );\n};\n\nexport default memo(ShippingInfo);\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiChat, ApiSticker } from '../../api/types';\nimport type { TabState } from '../../global/types';\n\nimport { DEFAULT_TOPIC_ICON_STICKER_ID } from '../../config';\nimport { selectChat, selectIsCurrentUserPremium, selectTabState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport cycleRestrict from '../../util/cycleRestrict';\nimport { getTopicColors } from '../../util/forumColors';\nimport { REM } from '../common/helpers/mediaDimensions';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport CustomEmojiPicker from '../common/CustomEmojiPicker';\nimport TopicIcon from '../common/TopicIcon';\nimport FloatingActionButton from '../ui/FloatingActionButton';\nimport InputText from '../ui/InputText';\nimport Spinner from '../ui/Spinner';\nimport Transition from '../ui/Transition';\n\nimport styles from './ManageTopic.module.scss';\n\nconst ICON_SIZE = 5 * REM;\n\nexport type OwnProps = {\n  isActive: boolean;\n  onClose: NoneToVoidFunction;\n};\n\ntype StateProps = {\n  chat?: ApiChat;\n  createTopicPanel?: TabState['createTopicPanel'];\n  isCurrentUserPremium?: boolean;\n};\n\nconst CreateTopic: FC<OwnProps & StateProps> = ({\n  isActive,\n  chat,\n  createTopicPanel,\n  isCurrentUserPremium,\n  onClose,\n}) => {\n  const { createTopic, openPremiumModal } = getActions();\n  const [title, setTitle] = useState('');\n  const [iconColorIndex, setIconColorIndex] = useState(0);\n  const [iconEmojiId, setIconEmojiId] = useState<string | undefined>(undefined);\n  const lang = useOldLang();\n\n  const isTouched = Boolean(title);\n  const isLoading = Boolean(createTopicPanel?.isLoading);\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  useEffect(() => {\n    if (!isActive) {\n      setTitle('');\n      setIconEmojiId(undefined);\n    }\n  }, [isActive]);\n\n  const handleTitleChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setTitle(e.target.value);\n  }, []);\n\n  const handleIconClick = useCallback(() => {\n    setIconColorIndex((prev) => cycleRestrict(getTopicColors().length, prev + 1));\n  }, []);\n\n  const handleCreateTopic = useCallback(() => {\n    createTopic({\n      chatId: chat!.id,\n      title,\n      iconColor: getTopicColors()[iconColorIndex],\n      iconEmojiId,\n    });\n  }, [chat, createTopic, iconColorIndex, iconEmojiId, title]);\n\n  const handleCustomEmojiSelect = useCallback((emoji: ApiSticker) => {\n    if (!emoji.isFree && !isCurrentUserPremium && emoji.id !== DEFAULT_TOPIC_ICON_STICKER_ID) {\n      openPremiumModal({ initialSection: 'animated_emoji' });\n      return;\n    }\n\n    if (emoji.id === DEFAULT_TOPIC_ICON_STICKER_ID) {\n      setIconEmojiId(undefined);\n      return;\n    }\n\n    setIconEmojiId(emoji.id);\n  }, [isCurrentUserPremium, openPremiumModal]);\n\n  const dummyTopic = useMemo(() => {\n    return {\n      id: 0,\n      title,\n      iconColor: getTopicColors()[iconColorIndex],\n      iconEmojiId,\n    };\n  }, [iconColorIndex, iconEmojiId, title]);\n\n  if (!chat?.isForum) {\n    return undefined;\n  }\n\n  return (\n    <div className={styles.root}>\n      <div className={buildClassName(styles.content, 'custom-scroll')}>\n        <div className={buildClassName(styles.section, styles.top)}>\n          <span className={styles.heading}>{lang('CreateTopicTitle')}</span>\n          <Transition\n            name=\"zoomFade\"\n            activeKey={Number(dummyTopic.iconEmojiId) || 0}\n            shouldCleanup\n            direction={1}\n            className={styles.iconWrapper}\n          >\n            <TopicIcon\n              topic={dummyTopic}\n              className={buildClassName(styles.icon, styles.clickable)}\n              onClick={handleIconClick}\n              size={ICON_SIZE}\n              noLoopLimit\n            />\n          </Transition>\n          <InputText\n            value={title}\n            onChange={handleTitleChange}\n            label={lang('lng_forum_topic_title')}\n            disabled={isLoading}\n            teactExperimentControlled\n          />\n        </div>\n        <div className={buildClassName(styles.section, styles.bottom)}>\n          <CustomEmojiPicker\n            idPrefix=\"create-topic-icons-set-\"\n            isHidden={!isActive}\n            loadAndPlay={isActive}\n            onCustomEmojiSelect={handleCustomEmojiSelect}\n            className={styles.iconPicker}\n            pickerListClassName=\"fab-padding-bottom\"\n            withDefaultTopicIcons\n          />\n        </div>\n      </div>\n      <FloatingActionButton\n        isShown={isTouched}\n        disabled={isLoading}\n        onClick={handleCreateTopic}\n        ariaLabel={lang('Save')}\n      >\n        {isLoading ? (\n          <Spinner color=\"white\" />\n        ) : (\n          <i className=\"icon icon-check\" />\n        )}\n      </FloatingActionButton>\n    </div>\n  );\n};\n\nexport default memo(withGlobal(\n  (global): StateProps => {\n    const { createTopicPanel } = selectTabState(global);\n    return {\n      chat: createTopicPanel?.chatId ? selectChat(global, createTopicPanel.chatId) : undefined,\n      createTopicPanel,\n      isCurrentUserPremium: selectIsCurrentUserPremium(global),\n    };\n  },\n)(CreateTopic));\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiChat, ApiSticker, ApiTopic } from '../../api/types';\nimport type { TabState } from '../../global/types';\n\nimport { DEFAULT_TOPIC_ICON_STICKER_ID, GENERAL_TOPIC_ID } from '../../config';\nimport { selectChat, selectIsCurrentUserPremium, selectTabState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { REM } from '../common/helpers/mediaDimensions';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport CustomEmojiPicker from '../common/CustomEmojiPicker';\nimport TopicIcon from '../common/TopicIcon';\nimport FloatingActionButton from '../ui/FloatingActionButton';\nimport InputText from '../ui/InputText';\nimport Loading from '../ui/Loading';\nimport Spinner from '../ui/Spinner';\nimport Transition from '../ui/Transition';\n\nimport styles from './ManageTopic.module.scss';\n\nconst ICON_SIZE = 5 * REM;\nconst RESET_ICON_ID = '0';\n\nexport type OwnProps = {\n  isActive: boolean;\n  onClose: NoneToVoidFunction;\n};\n\ntype StateProps = {\n  chat?: ApiChat;\n  topic?: ApiTopic;\n  editTopicPanel?: TabState['editTopicPanel'];\n  isCurrentUserPremium?: boolean;\n};\n\nconst EditTopic: FC<OwnProps & StateProps> = ({\n  isActive,\n  chat,\n  topic,\n  editTopicPanel,\n  isCurrentUserPremium,\n  onClose,\n}) => {\n  const { editTopic, openPremiumModal } = getActions();\n  const [title, setTitle] = useState('');\n  const [iconEmojiId, setIconEmojiId] = useState<string | undefined>(undefined);\n  const lang = useOldLang();\n\n  const isLoading = Boolean(editTopicPanel?.isLoading);\n  const isGeneral = topic?.id === GENERAL_TOPIC_ID;\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  useEffect(() => {\n    if (!isActive) {\n      setTitle('');\n      setIconEmojiId(undefined);\n    }\n  }, [isActive]);\n\n  useEffect(() => {\n    if (topic?.title || topic?.iconEmojiId) {\n      setTitle(topic.title);\n      setIconEmojiId(topic.iconEmojiId);\n    }\n  }, [topic]);\n\n  const isTouched = useMemo(() => {\n    return title !== topic?.title || iconEmojiId !== topic?.iconEmojiId;\n  }, [iconEmojiId, title, topic?.iconEmojiId, topic?.title]);\n\n  const handleTitleChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const newTitle = e.target.value;\n    setTitle(newTitle);\n  }, []);\n\n  const handleEditTopic = useCallback(() => {\n    editTopic({\n      chatId: chat!.id,\n      title,\n      topicId: topic!.id,\n      iconEmojiId,\n    });\n  }, [chat, editTopic, iconEmojiId, title, topic]);\n\n  const handleCustomEmojiSelect = useCallback((emoji: ApiSticker) => {\n    if (!emoji.isFree && !isCurrentUserPremium && emoji.id !== DEFAULT_TOPIC_ICON_STICKER_ID) {\n      openPremiumModal({ initialSection: 'animated_emoji' });\n      return;\n    }\n\n    if (emoji.id === DEFAULT_TOPIC_ICON_STICKER_ID) {\n      setIconEmojiId(RESET_ICON_ID);\n      return;\n    }\n\n    setIconEmojiId(emoji.id);\n  }, [isCurrentUserPremium, openPremiumModal]);\n\n  const dummyTopic = useMemo(() => {\n    return {\n      ...topic!,\n      title,\n      iconEmojiId,\n    };\n  }, [iconEmojiId, title, topic]);\n\n  if (!chat?.isForum) {\n    return undefined;\n  }\n\n  return (\n    <div className={styles.root}>\n      <div className={buildClassName(styles.content, 'custom-scroll')}>\n        {!topic && <Loading />}\n        {topic && (\n          <>\n            <div className={buildClassName(styles.section, styles.top, isGeneral && styles.general)}>\n              <span className={styles.heading}>{lang(isGeneral ? 'CreateGeneralTopicTitle' : 'CreateTopicTitle')}</span>\n              <Transition\n                name=\"zoomFade\"\n                activeKey={Number(dummyTopic.iconEmojiId) || 0}\n                shouldCleanup\n                direction={1}\n                className={styles.iconWrapper}\n              >\n                <TopicIcon\n                  topic={dummyTopic}\n                  className={styles.icon}\n                  size={ICON_SIZE}\n                  noLoopLimit\n                />\n              </Transition>\n              <InputText\n                value={title}\n                onChange={handleTitleChange}\n                label={lang('lng_forum_topic_title')}\n                disabled={isLoading}\n                teactExperimentControlled\n              />\n            </div>\n            {!isGeneral && (\n              <div className={buildClassName(styles.section, styles.bottom)}>\n                <CustomEmojiPicker\n                  idPrefix=\"edit-topic-icons-set-\"\n                  isHidden={!isActive}\n                  loadAndPlay={isActive}\n                  onCustomEmojiSelect={handleCustomEmojiSelect}\n                  className={styles.iconPicker}\n                  pickerListClassName=\"fab-padding-bottom\"\n                  withDefaultTopicIcons\n                />\n              </div>\n            )}\n          </>\n        )}\n      </div>\n      <FloatingActionButton\n        isShown={isTouched}\n        disabled={isLoading}\n        onClick={handleEditTopic}\n        ariaLabel={lang('Save')}\n      >\n        {isLoading ? (\n          <Spinner color=\"white\" />\n        ) : (\n          <i className=\"icon icon-check\" />\n        )}\n      </FloatingActionButton>\n    </div>\n  );\n};\n\nexport default memo(withGlobal(\n  (global): StateProps => {\n    const { editTopicPanel } = selectTabState(global);\n    const chat = editTopicPanel?.chatId ? selectChat(global, editTopicPanel.chatId) : undefined;\n    const topic = editTopicPanel?.topicId ? chat?.topics?.[editTopicPanel?.topicId] : undefined;\n\n    return {\n      chat,\n      topic,\n      editTopicPanel,\n      isCurrentUserPremium: selectIsCurrentUserPremium(global),\n    };\n  },\n)(EditTopic));\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo, useCallback, useRef } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiChat, ApiChatFullInfo, ApiVideo } from '../../api/types';\nimport type { MessageList } from '../../global/types';\n\nimport { getAllowedAttachmentOptions, getCanPostInChat } from '../../global/helpers';\nimport {\n  selectCanScheduleUntilOnline,\n  selectChat,\n  selectChatFullInfo,\n  selectCurrentGifSearch,\n  selectCurrentMessageList,\n  selectIsChatWithBot,\n  selectIsChatWithSelf, selectThreadInfo,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { IS_TOUCH_ENV } from '../../util/windowEnvironment';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport { useIntersectionObserver } from '../../hooks/useIntersectionObserver';\nimport useOldLang from '../../hooks/useOldLang';\nimport useSchedule from '../../hooks/useSchedule';\n\nimport GifButton from '../common/GifButton';\nimport InfiniteScroll from '../ui/InfiniteScroll';\nimport Loading from '../ui/Loading';\n\nimport './GifSearch.scss';\n\ntype OwnProps = {\n  onClose: NoneToVoidFunction;\n  isActive: boolean;\n};\n\ntype StateProps = {\n  query?: string;\n  results?: ApiVideo[];\n  chat?: ApiChat;\n  chatFullInfo?: ApiChatFullInfo;\n  isChatWithBot?: boolean;\n  canScheduleUntilOnline?: boolean;\n  isSavedMessages?: boolean;\n  canPostInChat?: boolean;\n  currentMessageList?: MessageList;\n};\n\nconst PRELOAD_BACKWARDS = 96; // GIF Search bot results are multiplied by 24\nconst INTERSECTION_DEBOUNCE = 300;\n\nconst GifSearch: FC<OwnProps & StateProps> = ({\n  isActive,\n  query,\n  results,\n  chat,\n  chatFullInfo,\n  isChatWithBot,\n  canScheduleUntilOnline,\n  isSavedMessages,\n  canPostInChat,\n  currentMessageList,\n  onClose,\n}) => {\n  const {\n    searchMoreGifs,\n    sendMessage,\n    setGifSearchQuery,\n  } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  const [requestCalendar, calendar] = useSchedule(canScheduleUntilOnline);\n\n  const {\n    observe: observeIntersection,\n  } = useIntersectionObserver({ rootRef: containerRef, debounceMs: INTERSECTION_DEBOUNCE });\n\n  const canSendGifs = canPostInChat && getAllowedAttachmentOptions(chat, chatFullInfo, isChatWithBot).canSendGifs;\n\n  const handleGifClick = useCallback((gif: ApiVideo, isSilent?: boolean, shouldSchedule?: boolean) => {\n    if (canSendGifs) {\n      if (!currentMessageList) {\n        return;\n      }\n\n      if (shouldSchedule) {\n        requestCalendar((scheduledAt) => {\n          sendMessage({\n            messageList: currentMessageList,\n            gif,\n            scheduledAt,\n            isSilent,\n          });\n        });\n      } else {\n        sendMessage({ messageList: currentMessageList, gif, isSilent });\n      }\n    }\n\n    if (IS_TOUCH_ENV) {\n      setGifSearchQuery({ query: undefined });\n    }\n  }, [canSendGifs, currentMessageList, requestCalendar]);\n\n  const handleSearchMoreGifs = useCallback(() => {\n    searchMoreGifs();\n  }, [searchMoreGifs]);\n\n  const lang = useOldLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  function renderContent() {\n    if (query === undefined) {\n      return undefined;\n    }\n\n    if (!results) {\n      return (\n        <Loading />\n      );\n    }\n\n    if (!results.length) {\n      return (\n        <p className=\"helper-text\" dir=\"auto\">{lang('NoGIFsFound')}</p>\n      );\n    }\n\n    return results.map((gif) => (\n      <GifButton\n        key={gif.id}\n        gif={gif}\n        observeIntersection={observeIntersection}\n        onClick={canSendGifs ? handleGifClick : undefined}\n        isSavedMessages={isSavedMessages}\n      />\n    ));\n  }\n\n  const hasResults = Boolean(query !== undefined && results && results.length);\n\n  return (\n    <div className=\"GifSearch\" dir={lang.isRtl ? 'rtl' : undefined}>\n      <InfiniteScroll\n        ref={containerRef}\n        className={buildClassName('gif-container custom-scroll', hasResults && 'grid')}\n        items={results}\n        itemSelector=\".GifButton\"\n        preloadBackwards={PRELOAD_BACKWARDS}\n        noFastList\n        onLoadMore={handleSearchMoreGifs}\n      >\n        {renderContent()}\n      </InfiniteScroll>\n      {calendar}\n    </div>\n  );\n};\n\nexport default memo(withGlobal(\n  (global): StateProps => {\n    const currentSearch = selectCurrentGifSearch(global);\n    const { query, results } = currentSearch || {};\n    const { chatId, threadId } = selectCurrentMessageList(global) || {};\n    const chat = chatId ? selectChat(global, chatId) : undefined;\n    const chatFullInfo = chatId ? selectChatFullInfo(global, chatId) : undefined;\n    const isChatWithBot = chat ? selectIsChatWithBot(global, chat) : undefined;\n    const isSavedMessages = Boolean(chatId) && selectIsChatWithSelf(global, chatId);\n    const threadInfo = chatId && threadId ? selectThreadInfo(global, chatId, threadId) : undefined;\n    const isMessageThread = Boolean(!threadInfo?.isCommentsInfo && threadInfo?.fromChannelId);\n    const canPostInChat = Boolean(chat) && Boolean(threadId)\n      && getCanPostInChat(chat, threadId, isMessageThread, chatFullInfo);\n\n    return {\n      query,\n      results,\n      chat,\n      isChatWithBot,\n      isSavedMessages,\n      canPostInChat,\n      canScheduleUntilOnline: Boolean(chatId) && selectCanScheduleUntilOnline(global, chatId),\n      currentMessageList: selectCurrentMessageList(global),\n    };\n  },\n)(GifSearch));\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect,\n  useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type {\n  ApiChat,\n  ApiMessage,\n  ApiPollAnswer,\n  ApiPollResult,\n} from '../../api/types';\n\nimport { isUserId } from '../../global/helpers';\nimport { selectTabState } from '../../global/selectors';\nimport { renderTextWithEntities } from '../common/helpers/renderTextWithEntities';\n\nimport useOldLang from '../../hooks/useOldLang';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport GroupChatInfo from '../common/GroupChatInfo';\nimport PrivateChatInfo from '../common/PrivateChatInfo';\nimport ListItem from '../ui/ListItem';\nimport Loading from '../ui/Loading';\nimport ShowMoreButton from '../ui/ShowMoreButton';\n\nimport './PollAnswerResults.scss';\n\ntype OwnProps = {\n  chat: ApiChat;\n  message: ApiMessage;\n  answer: ApiPollAnswer;\n  answerVote: ApiPollResult;\n  totalVoters: number;\n};\n\ntype StateProps = {\n  voters?: string[];\n  offset: string;\n};\n\nconst INITIAL_LIMIT = 4;\nconst VIEW_MORE_LIMIT = 50;\n\nconst PollAnswerResults: FC<OwnProps & StateProps> = ({\n  chat,\n  message,\n  answer,\n  answerVote,\n  totalVoters,\n  voters,\n  offset,\n}) => {\n  const {\n    loadPollOptionResults,\n    openChat,\n    closePollResults,\n  } = getActions();\n\n  const prevVotersCount = usePrevious<number>(answerVote.votersCount);\n  const [isLoading, setIsLoading] = useState<boolean>(true);\n  const areVotersLoaded = Boolean(voters);\n  const { option, text } = answer;\n  const lang = useOldLang();\n\n  useEffect(() => {\n    // For update when new votes arrive or when the user takes back his vote\n    if (!areVotersLoaded || prevVotersCount !== answerVote.votersCount) {\n      loadPollOptionResults({\n        chat, messageId: message.id, option, offset, limit: INITIAL_LIMIT, shouldResetVoters: true,\n      });\n    }\n    // eslint-disable-next-line\n  }, [answerVote.votersCount, areVotersLoaded]);\n\n  const handleViewMoreClick = useCallback(() => {\n    setIsLoading(true);\n    loadPollOptionResults({\n      chat, messageId: message.id, option, offset, limit: VIEW_MORE_LIMIT,\n    });\n  }, [chat, loadPollOptionResults, message.id, offset, option]);\n\n  useEffect(() => {\n    setIsLoading(false);\n  }, [voters]);\n\n  const handleMemberClick = useCallback((id: string) => {\n    openChat({ id });\n    closePollResults();\n  }, [closePollResults, openChat]);\n\n  function renderViewMoreButton() {\n    const leftVotersCount = answerVote.votersCount - voters!.length;\n\n    return answerVote.votersCount > INITIAL_LIMIT && leftVotersCount > 0 && (\n      <ShowMoreButton\n        count={leftVotersCount}\n        itemName=\"voter\"\n        isLoading={isLoading}\n        onClick={handleViewMoreClick}\n      />\n    );\n  }\n\n  return (\n    <div className=\"PollAnswerResults\">\n      <div className=\"poll-voters\">\n        {voters\n          ? voters.map((id) => (\n            <ListItem\n              key={id}\n              className=\"chat-item-clickable\"\n              // eslint-disable-next-line react/jsx-no-bind\n              onClick={() => handleMemberClick(id)}\n            >\n              {isUserId(id) ? (\n                <PrivateChatInfo\n                  avatarSize=\"tiny\"\n                  userId={id}\n                  forceShowSelf\n                  noStatusOrTyping\n                />\n              ) : (\n                <GroupChatInfo\n                  avatarSize=\"tiny\"\n                  chatId={id}\n                  noStatusOrTyping\n                />\n              )}\n            </ListItem>\n          ))\n          : <Loading />}\n        {voters && renderViewMoreButton()}\n      </div>\n      <div className=\"answer-head\" dir={lang.isRtl ? 'rtl' : undefined}>\n        <span className=\"answer-title\" dir=\"auto\">\n          {renderTextWithEntities({\n            text: text.text,\n            entities: text.entities,\n          })}\n        </span>\n        <span className=\"answer-percent\" dir={lang.isRtl ? 'auto' : undefined}>\n          {getPercentage(answerVote.votersCount, totalVoters)}%\n        </span>\n      </div>\n    </div>\n  );\n};\n\nfunction getPercentage(value: number, total: number) {\n  return total > 0 ? ((value / total) * 100).toFixed() : 0;\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { answer }: OwnProps): StateProps => {\n    const { voters, offsets } = selectTabState(global).pollResults;\n\n    return {\n      voters: voters?.[answer.option],\n      offset: (offsets?.[answer.option]) || '',\n    };\n  },\n)(PollAnswerResults));\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { ApiChat, ApiMessage } from '../../api/types';\n\nimport { getMessagePoll } from '../../global/helpers';\nimport { selectChat, selectChatMessage, selectTabState } from '../../global/selectors';\nimport { buildCollectionByKey } from '../../util/iteratees';\nimport { renderTextWithEntities } from '../common/helpers/renderTextWithEntities';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport Loading from '../ui/Loading';\nimport PollAnswerResults from './PollAnswerResults';\n\nimport './PollResults.scss';\n\ntype OwnProps = {\n  isActive: boolean;\n  onClose: NoneToVoidFunction;\n};\n\ntype StateProps = {\n  chat?: ApiChat;\n  message?: ApiMessage;\n};\n\nconst PollResults: FC<OwnProps & StateProps> = ({\n  isActive,\n  chat,\n  message,\n  onClose,\n}) => {\n  const lang = useOldLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  if (!message || !chat) {\n    return <Loading />;\n  }\n\n  const { summary, results } = getMessagePoll(message)!;\n  if (!results.results) {\n    return undefined;\n  }\n\n  const resultsByOption = buildCollectionByKey(results.results, 'option');\n\n  return (\n    <div className=\"PollResults\" dir={lang.isRtl ? 'rtl' : undefined}>\n      <h3 className=\"poll-question\" dir=\"auto\">\n        {renderTextWithEntities({\n          text: summary.question.text,\n          entities: summary.question.entities,\n        })}\n      </h3>\n      <div className=\"poll-results-list custom-scroll\">\n        {summary.answers.map((answer) => (\n          <PollAnswerResults\n            key={`${message.id}-${answer.option}`}\n            chat={chat}\n            message={message}\n            answer={answer}\n            answerVote={resultsByOption[answer.option]}\n            totalVoters={results.totalVoters!}\n          />\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal(\n  (global): StateProps => {\n    const {\n      pollResults: { chatId, messageId },\n    } = selectTabState(global);\n\n    if (!chatId || !messageId) {\n      return {};\n    }\n\n    const chat = selectChat(global, chatId);\n    const message = selectChatMessage(global, chatId, messageId);\n\n    return {\n      chat,\n      message,\n    };\n  },\n)(PollResults));\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useRef,\n} from '../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../global';\n\nimport type {\n  ApiMessage, ApiPeer, ApiReaction, ApiReactionKey, ApiSavedReactionTag,\n} from '../../api/types';\nimport type { ThreadId } from '../../types';\n\nimport { ANONYMOUS_USER_ID, REPLIES_USER_ID } from '../../config';\nimport { getIsSavedDialog, getReactionKey, isSameReaction } from '../../global/helpers';\nimport {\n  selectChatMessages,\n  selectCurrentTextSearch,\n  selectForwardedSender,\n  selectIsChatWithSelf,\n  selectIsCurrentUserPremium,\n  selectSender,\n} from '../../global/selectors';\nimport { disableDirectTextInput, enableDirectTextInput } from '../../util/directInputManager';\nimport { MEMO_EMPTY_ARRAY } from '../../util/memo';\nimport { debounce } from '../../util/schedulers';\nimport { renderMessageSummary } from '../common/helpers/renderMessageText';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useHorizontalScroll from '../../hooks/useHorizontalScroll';\nimport useInfiniteScroll from '../../hooks/useInfiniteScroll';\nimport useKeyboardListNavigation from '../../hooks/useKeyboardListNavigation';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport Avatar from '../common/Avatar';\nimport FullNameTitle from '../common/FullNameTitle';\nimport LastMessageMeta from '../common/LastMessageMeta';\nimport SavedTagButton from '../middle/message/reactions/SavedTagButton';\nimport InfiniteScroll from '../ui/InfiniteScroll';\nimport ListItem from '../ui/ListItem';\n\nimport './RightSearch.scss';\n\nexport type OwnProps = {\n  chatId: string;\n  threadId: ThreadId;\n  onClose: NoneToVoidFunction;\n  isActive: boolean;\n};\n\ntype StateProps = {\n  messagesById?: Record<number, ApiMessage>;\n  query?: string;\n  savedTags?: Record<ApiReactionKey, ApiSavedReactionTag>;\n  searchTag?: ApiReaction;\n  totalCount?: number;\n  foundIds?: number[];\n  isSavedMessages?: boolean;\n  isCurrentUserPremium?: boolean;\n};\n\nconst runDebouncedForSearch = debounce((cb) => cb(), 200, false);\n\nconst RightSearch: FC<OwnProps & StateProps> = ({\n  chatId,\n  threadId,\n  isActive,\n  messagesById,\n  query,\n  totalCount,\n  foundIds,\n  savedTags,\n  searchTag,\n  isSavedMessages,\n  isCurrentUserPremium,\n  onClose,\n}) => {\n  const {\n    searchTextMessagesLocal,\n    setLocalTextSearchTag,\n    focusMessage,\n    openPremiumModal,\n    loadSavedReactionTags,\n  } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const tagsRef = useRef<HTMLDivElement>(null);\n\n  const lang = useOldLang();\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  useEffect(() => {\n    if (!isActive) {\n      return undefined;\n    }\n\n    disableDirectTextInput();\n\n    return enableDirectTextInput;\n  }, [isActive]);\n\n  const tags = useMemo(() => {\n    if (!savedTags) return undefined;\n    return Object.values(savedTags);\n  }, [savedTags]);\n\n  const hasTags = Boolean(tags?.length);\n  const areTagsDisabled = hasTags && !isCurrentUserPremium;\n\n  useHorizontalScroll(tagsRef, !hasTags);\n\n  useEffect(() => {\n    if (isActive) loadSavedReactionTags();\n  }, [hasTags, isActive]);\n\n  const handleSearchTextMessagesLocal = useLastCallback(() => {\n    runDebouncedForSearch(searchTextMessagesLocal);\n  });\n\n  const handleTagClick = useLastCallback((tag: ApiReaction) => {\n    if (areTagsDisabled) {\n      openPremiumModal({\n        initialSection: 'saved_tags',\n      });\n      return;\n    }\n\n    if (isSameReaction(tag, searchTag)) {\n      setLocalTextSearchTag({ tag: undefined });\n      return;\n    }\n\n    setLocalTextSearchTag({ tag });\n    handleSearchTextMessagesLocal();\n  });\n\n  const [viewportIds, getMore] = useInfiniteScroll(handleSearchTextMessagesLocal, foundIds);\n\n  const viewportResults = useMemo(() => {\n    if ((!query && !searchTag) || !viewportIds?.length || !messagesById) {\n      return MEMO_EMPTY_ARRAY;\n    }\n\n    return viewportIds.map((id) => {\n      const message = messagesById[id];\n      if (!message) {\n        return undefined;\n      }\n\n      const global = getGlobal();\n\n      const originalSender = (isSavedMessages || chatId === REPLIES_USER_ID || chatId === ANONYMOUS_USER_ID)\n        ? selectForwardedSender(global, message) : undefined;\n      const messageSender = selectSender(global, message);\n\n      const senderPeer = originalSender || messageSender;\n\n      const hiddenForwardTitle = message.forwardInfo?.hiddenUserName;\n\n      return {\n        message,\n        senderPeer,\n        hiddenForwardTitle,\n        onClick: () => focusMessage({ chatId, threadId, messageId: id }),\n      };\n    }).filter(Boolean);\n  }, [query, searchTag, viewportIds, messagesById, isSavedMessages, chatId, threadId]);\n\n  const handleKeyDown = useKeyboardListNavigation(containerRef, true, (index) => {\n    const foundResult = viewportResults?.[index === -1 ? 0 : index];\n    if (foundResult) {\n      foundResult.onClick();\n    }\n  }, '.ListItem-button', true);\n\n  const renderSearchResult = ({\n    message, senderPeer, hiddenForwardTitle, onClick,\n  }: {\n    message: ApiMessage;\n    senderPeer?: ApiPeer;\n    hiddenForwardTitle?: string;\n    onClick: NoneToVoidFunction;\n  }) => {\n    const text = renderMessageSummary(lang, message, undefined, query);\n\n    return (\n      <ListItem\n        key={message.id}\n        teactOrderKey={-message.date}\n        className=\"chat-item-clickable search-result-message m-0\"\n        onClick={onClick}\n      >\n        <Avatar\n          peer={senderPeer}\n          text={hiddenForwardTitle}\n        />\n        <div className=\"info\">\n          <div className=\"search-result-message-top\">\n            {senderPeer && <FullNameTitle peer={senderPeer} withEmojiStatus />}\n            {!senderPeer && hiddenForwardTitle}\n            <LastMessageMeta message={message} />\n          </div>\n          <div className=\"subtitle\" dir=\"auto\">\n            {text}\n          </div>\n        </div>\n      </ListItem>\n    );\n  };\n\n  const isOnTop = viewportIds?.[0] === foundIds?.[0];\n\n  return (\n    <InfiniteScroll\n      ref={containerRef}\n      className=\"RightSearch custom-scroll\"\n      items={viewportResults}\n      preloadBackwards={0}\n      onLoadMore={getMore}\n      onKeyDown={handleKeyDown}\n    >\n      {hasTags && (\n        <div\n          ref={tagsRef}\n          className=\"search-tags custom-scroll-x no-scrollbar\"\n          key=\"search-tags\"\n        >\n          {tags.map((tag) => (\n            <SavedTagButton\n              containerId=\"local-search\"\n              key={getReactionKey(tag.reaction)}\n              reaction={tag.reaction}\n              tag={tag}\n              withCount\n              isDisabled={areTagsDisabled}\n              isChosen={isSameReaction(tag.reaction, searchTag)}\n              onClick={handleTagClick}\n            />\n          ))}\n        </div>\n      )}\n      {isOnTop && (\n        <p key=\"helper-text\" className=\"helper-text\" dir=\"auto\">\n          {!query ? (\n            lang('lng_dlg_search_for_messages')\n          ) : (totalCount === 0 || !viewportResults.length) ? (\n            lang('lng_search_no_results')\n          ) : totalCount === 1 ? (\n            '1 message found'\n          ) : (\n            `${(viewportResults.length && (totalCount || viewportResults.length))} messages found`\n          )}\n        </p>\n      )}\n      {viewportResults.map(renderSearchResult)}\n    </InfiniteScroll>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { chatId, threadId }): StateProps => {\n    const messagesById = selectChatMessages(global, chatId);\n    if (!messagesById) {\n      return {};\n    }\n\n    const { query, savedTag, results } = selectCurrentTextSearch(global) || {};\n    const { totalCount, foundIds } = results || {};\n\n    const isSavedMessages = selectIsChatWithSelf(global, chatId);\n    const isSavedDialog = getIsSavedDialog(chatId, threadId, global.currentUserId);\n\n    const savedTags = isSavedMessages && !isSavedDialog ? global.savedReactionTags?.byKey : undefined;\n\n    return {\n      messagesById,\n      query,\n      totalCount,\n      foundIds,\n      isSavedMessages,\n      savedTags,\n      searchTag: savedTag,\n      isCurrentUserPremium: selectIsCurrentUserPremium(global),\n    };\n  },\n)(RightSearch));\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useRef,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { selectCurrentStickerSearch, selectTabState } from '../../global/selectors';\nimport { throttle } from '../../util/schedulers';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport { useIntersectionObserver } from '../../hooks/useIntersectionObserver';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport Loading from '../ui/Loading';\nimport StickerSetResult from './StickerSetResult';\n\nimport './StickerSearch.scss';\n\ntype OwnProps = {\n  onClose: NoneToVoidFunction;\n  isActive: boolean;\n};\n\ntype StateProps = {\n  query?: string;\n  featuredIds?: string[];\n  resultIds?: string[];\n  isModalOpen: boolean;\n};\n\nconst INTERSECTION_THROTTLE = 200;\n\nconst runThrottled = throttle((cb) => cb(), 60000, true);\n\nconst StickerSearch: FC<OwnProps & StateProps> = ({\n  isActive,\n  query,\n  featuredIds,\n  resultIds,\n  isModalOpen,\n  onClose,\n}) => {\n  const { loadFeaturedStickers } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  const lang = useOldLang();\n\n  const {\n    observe: observeIntersection,\n  } = useIntersectionObserver({ rootRef: containerRef, throttleMs: INTERSECTION_THROTTLE });\n\n  // Due to the parent Transition, this component never gets unmounted,\n  // that's why we use throttled API call on every update.\n  useEffect(() => {\n    runThrottled(() => {\n      loadFeaturedStickers();\n    });\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  function renderContent() {\n    if (query === undefined) {\n      return undefined;\n    }\n\n    if (!query && featuredIds) {\n      return featuredIds.map((id) => (\n        <StickerSetResult\n          key={id}\n          stickerSetId={id}\n          observeIntersection={observeIntersection}\n          isModalOpen={isModalOpen}\n        />\n      ));\n    }\n\n    if (resultIds) {\n      if (!resultIds.length) {\n        return <p className=\"helper-text\" dir=\"auto\">Nothing found.</p>;\n      }\n\n      return resultIds.map((id) => (\n        <StickerSetResult\n          key={id}\n          stickerSetId={id}\n          observeIntersection={observeIntersection}\n          isModalOpen={isModalOpen}\n        />\n      ));\n    }\n\n    return <Loading />;\n  }\n\n  return (\n    <div ref={containerRef} className=\"StickerSearch custom-scroll\" dir={lang.isRtl ? 'rtl' : undefined}>\n      {renderContent()}\n    </div>\n  );\n};\n\nexport default memo(withGlobal(\n  (global): StateProps => {\n    const currentSearch = selectCurrentStickerSearch(global);\n    const { query, resultIds } = currentSearch || {};\n    const { featured } = global.stickers;\n\n    return {\n      query,\n      featuredIds: featured.setIds,\n      resultIds,\n      isModalOpen: Boolean(selectTabState(global).openedStickerSetShortName),\n    };\n  },\n)(StickerSearch));\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect, useMemo, useRef,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiSticker, ApiStickerSet } from '../../api/types';\nimport type { ObserveFn } from '../../hooks/useIntersectionObserver';\n\nimport { STICKER_SIZE_SEARCH } from '../../config';\nimport { selectIsCurrentUserPremium, selectShouldLoopStickers, selectStickerSet } from '../../global/selectors';\n\nimport useOldLang from '../../hooks/useOldLang';\n\nimport StickerButton from '../common/StickerButton';\nimport Button from '../ui/Button';\nimport Spinner from '../ui/Spinner';\n\ntype OwnProps = {\n  stickerSetId: string;\n  observeIntersection: ObserveFn;\n  isModalOpen?: boolean;\n};\n\ntype StateProps = {\n  set?: ApiStickerSet;\n  shouldPlay?: boolean;\n  isCurrentUserPremium?: boolean;\n};\n\nconst PREMIUM_STICKERS_TO_DISPLAY = 3;\nconst STICKERS_TO_DISPLAY = 5;\n\nconst StickerSetResult: FC<OwnProps & StateProps> = ({\n  stickerSetId, observeIntersection, set, shouldPlay,\n  isModalOpen, isCurrentUserPremium,\n}) => {\n  const { loadStickers, toggleStickerSet, openStickerSet } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const sharedCanvasRef = useRef<HTMLCanvasElement>(null);\n\n  const lang = useOldLang();\n  const isAdded = set && !set.isArchived && Boolean(set.installedDate);\n  const areStickersLoaded = Boolean(set?.stickers);\n\n  const displayedStickers = useMemo(() => {\n    if (!set) {\n      return [];\n    }\n\n    const premiumStickerIds = (set.stickers?.filter(({ hasEffect }) => hasEffect) ?? [])\n      .slice(0, PREMIUM_STICKERS_TO_DISPLAY);\n    const coverStickerIds = (set.covers || []).map(({ id }) => id);\n    const otherStickers = set.stickers ? set.stickers.filter(({ id }) => !coverStickerIds.includes(id)) : [];\n\n    return [...premiumStickerIds, ...(set.covers || []), ...otherStickers].slice(0, STICKERS_TO_DISPLAY);\n  }, [set]);\n\n  useEffect(() => {\n    // Featured stickers are initialized with one sticker in collection (cover of SickerSet)\n    if (!areStickersLoaded && displayedStickers.length < STICKERS_TO_DISPLAY && set) {\n      loadStickers({\n        stickerSetInfo: {\n          shortName: set.shortName,\n        },\n      });\n    }\n  }, [areStickersLoaded, displayedStickers.length, loadStickers, set, stickerSetId]);\n\n  const handleAddClick = useCallback(() => {\n    toggleStickerSet({ stickerSetId });\n  }, [toggleStickerSet, stickerSetId]);\n\n  const handleStickerClick = useCallback((sticker: ApiSticker) => {\n    openStickerSet({ stickerSetInfo: sticker.stickerSetInfo });\n  }, [openStickerSet]);\n\n  if (!set) {\n    return undefined;\n  }\n\n  const canRenderStickers = displayedStickers.length > 0;\n\n  return (\n    <div key={set.id} className=\"sticker-set\" dir={lang.isRtl ? 'rtl' : undefined}>\n      <div className=\"sticker-set-header\">\n        <div className=\"title-wrapper\">\n          <h3 className=\"title\" dir=\"auto\">{set.title}</h3>\n          <p className=\"count\" dir=\"auto\">{lang('Stickers', set.count, 'i')}</p>\n        </div>\n        <Button\n          className={isAdded ? 'is-added' : undefined}\n          color=\"primary\"\n          size=\"tiny\"\n          pill\n          fluid\n          onClick={handleAddClick}\n        >\n          {lang(isAdded ? 'Stickers.Installed' : 'Stickers.Install')}\n        </Button>\n      </div>\n      <div className=\"sticker-set-main shared-canvas-container\">\n        <canvas ref={sharedCanvasRef} className=\"shared-canvas\" />\n        {!canRenderStickers && <Spinner />}\n        {canRenderStickers && displayedStickers.map((sticker) => (\n          <StickerButton\n            sticker={sticker}\n            size={STICKER_SIZE_SEARCH}\n            observeIntersection={observeIntersection}\n            noPlay={!shouldPlay || isModalOpen}\n            clickArg={sticker}\n            onClick={handleStickerClick}\n            noContextMenu\n            isCurrentUserPremium={isCurrentUserPremium}\n            sharedCanvasRef={sharedCanvasRef}\n          />\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { stickerSetId }): StateProps => {\n    return {\n      set: selectStickerSet(global, stickerSetId),\n      shouldPlay: selectShouldLoopStickers(global),\n      isCurrentUserPremium: selectIsCurrentUserPremium(global),\n    };\n  },\n)(StickerSetResult));\n","import type React from '../../../lib/teact/teact';\nimport { useCallback, useEffect, useState } from '../../../lib/teact/teact';\n\nimport type { ApiChatBannedRights } from '../../../api/types';\n\nconst FLOATING_BUTTON_ANIMATION_TIMEOUT_MS = 250;\nconst MEDIA_PERMISSIONS: Array<keyof ApiChatBannedRights> = [\n  'embedLinks',\n  'sendPolls',\n  'sendPhotos',\n  'sendVideos',\n  'sendRoundvideos',\n  'sendVoices',\n  'sendAudios',\n  'sendDocs',\n  'sendStickers',\n  'sendGifs',\n];\nconst MESSAGE_PERMISSIONS: typeof MEDIA_PERMISSIONS = [...MEDIA_PERMISSIONS, 'sendPlain'];\n\nexport default function useManagePermissions(defaultPermissions: ApiChatBannedRights | undefined) {\n  const [permissions, setPermissions] = useState<ApiChatBannedRights>({});\n  const [havePermissionChanged, setHavePermissionChanged] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    setPermissions(defaultPermissions || {});\n    setHavePermissionChanged(false);\n    setTimeout(() => {\n      setIsLoading(false);\n    }, FLOATING_BUTTON_ANIMATION_TIMEOUT_MS);\n  }, [defaultPermissions]);\n\n  const handlePermissionChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name: targetName } = e.target;\n\n    const name = targetName as Exclude<keyof ApiChatBannedRights, 'untilDate'>;\n\n    function getUpdatedPermissionValue(value: true | undefined) {\n      return value ? undefined : true;\n    }\n\n    const oldPermissions = permissions;\n\n    let newPermissions: ApiChatBannedRights = {\n      ...oldPermissions,\n      [name]: getUpdatedPermissionValue(oldPermissions[name]),\n      ...(name === 'sendStickers' && {\n        sendGifs: getUpdatedPermissionValue(oldPermissions[name]),\n      }),\n    };\n\n    const checkMedia = () => {\n      const mediaPermissions = MEDIA_PERMISSIONS.map((key) => newPermissions[key]);\n      if (mediaPermissions.some((v) => !v)) {\n        newPermissions = {\n          ...newPermissions,\n          sendMedia: undefined,\n        };\n      } else if (mediaPermissions.every(Boolean)) {\n        newPermissions = {\n          ...newPermissions,\n          sendMedia: true,\n        };\n      }\n    };\n\n    if (name !== 'sendMedia') {\n      checkMedia();\n    } else {\n      newPermissions = {\n        ...newPermissions,\n        ...(MEDIA_PERMISSIONS.reduce((acc, key) => (\n          Object.assign(acc, { [key]: newPermissions.sendMedia })\n        ), {})),\n      };\n    }\n\n    // Embed links can't be enabled if plain text is banned\n    if (name !== 'embedLinks' && !newPermissions.embedLinks && newPermissions.sendPlain) {\n      newPermissions = {\n        ...newPermissions,\n        embedLinks: true,\n      };\n    }\n\n    if (name !== 'sendPlain' && !newPermissions.embedLinks && newPermissions.sendPlain) {\n      newPermissions = {\n        ...newPermissions,\n        sendPlain: undefined,\n      };\n    }\n\n    if (name !== 'sendMedia') {\n      checkMedia();\n    }\n\n    const sendMessages = MESSAGE_PERMISSIONS.every((key) => newPermissions[key]);\n    newPermissions = {\n      ...newPermissions,\n      sendMessages: sendMessages ? true : undefined,\n    };\n\n    setPermissions(newPermissions);\n\n    setHavePermissionChanged(!defaultPermissions || Object.keys(newPermissions).some((k) => {\n      const key = k as Exclude<keyof ApiChatBannedRights, 'untilDate'>;\n      return Boolean(defaultPermissions[key]) !== Boolean(newPermissions[key]);\n    }));\n  }, [defaultPermissions, permissions]);\n\n  return {\n    permissions,\n    isLoading,\n    havePermissionChanged,\n    handlePermissionChange,\n    setIsLoading,\n  };\n}\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useCallback } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiUser } from '../../../api/types';\n\nimport { getUserFullName } from '../../../global/helpers';\nimport { selectUser } from '../../../global/selectors';\nimport { createClassNameBuilder } from '../../../util/buildClassName';\nimport { formatHumanDate, formatTime, isToday } from '../../../util/dates/dateFormat';\nimport { getServerTime } from '../../../util/serverTime';\n\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Avatar from '../../common/Avatar';\nimport Button from '../../ui/Button';\n\nimport './JoinRequest.scss';\n\ntype OwnProps = {\n  userId: string;\n  about?: string;\n  isChannel?: boolean;\n  date: number;\n  chatId: string;\n};\n\ntype StateProps = {\n  user?: ApiUser;\n  isSavedMessages?: boolean;\n};\n\nconst JoinRequest: FC<OwnProps & StateProps> = ({\n  userId,\n  chatId,\n  about,\n  date,\n  isChannel,\n  user,\n}) => {\n  const { openChat, hideChatJoinRequest } = getActions();\n\n  const buildClassName = createClassNameBuilder('JoinRequest');\n  const lang = useOldLang();\n\n  const fullName = getUserFullName(user);\n  const fixedDate = (date - getServerTime()) * 1000 + Date.now();\n\n  const dateString = isToday(new Date(fixedDate))\n    ? formatTime(lang, fixedDate) : formatHumanDate(lang, fixedDate, true, false, true);\n\n  const handleUserClick = () => {\n    openChat({ id: userId });\n  };\n\n  const handleAcceptRequest = useCallback(() => {\n    hideChatJoinRequest({ chatId, userId, isApproved: true });\n  }, [chatId, hideChatJoinRequest, userId]);\n\n  const handleRejectRequest = useCallback(() => {\n    hideChatJoinRequest({ chatId, userId, isApproved: false });\n  }, [chatId, hideChatJoinRequest, userId]);\n\n  return (\n    <div className={buildClassName('&')}>\n      <div className={buildClassName('top')}>\n        <div className={buildClassName('user')} onClick={handleUserClick}>\n          <Avatar\n            key={userId}\n            size=\"medium\"\n            peer={user}\n          />\n          <div className={buildClassName('user-info')}>\n            <div className={buildClassName('user-name')}>{fullName}</div>\n            <div className={buildClassName('user-subtitle')}>{about}</div>\n          </div>\n        </div>\n        <div className={buildClassName('date')}>{dateString}</div>\n      </div>\n      <div className={buildClassName('buttons')}>\n        <Button className={buildClassName('button')} onClick={handleAcceptRequest}>\n          {isChannel ? lang('ChannelAddToChannel') : lang('ChannelAddToGroup')}\n        </Button>\n        <Button className={buildClassName('button')} isText onClick={handleRejectRequest}>\n          {lang('DismissRequest')}\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { userId }): StateProps => {\n    const user = selectUser(global, userId);\n\n    return {\n      user,\n    };\n  },\n)(JoinRequest));\n","import type { ChangeEvent } from 'react';\nimport type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiBotInfo, ApiUser } from '../../../api/types';\nimport { ApiMediaFormat } from '../../../api/types';\nimport { ManagementProgress } from '../../../types';\n\nimport {\n  getChatAvatarHash, getMainUsername, getUserFirstOrLastName,\n} from '../../../global/helpers';\nimport {\n  selectBot,\n  selectTabState,\n  selectUserFullInfo,\n} from '../../../global/selectors';\nimport { selectCurrentLimit } from '../../../global/selectors/limits';\nimport renderText from '../../common/helpers/renderText';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useMedia from '../../../hooks/useMedia';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Icon from '../../common/icons/Icon';\nimport AvatarEditable from '../../ui/AvatarEditable';\nimport FloatingActionButton from '../../ui/FloatingActionButton';\nimport InputText from '../../ui/InputText';\nimport ListItem from '../../ui/ListItem';\nimport SelectAvatar from '../../ui/SelectAvatar';\nimport Spinner from '../../ui/Spinner';\nimport TextArea from '../../ui/TextArea';\n\nimport './Management.scss';\n\ntype OwnProps = {\n  userId: string;\n  onClose: NoneToVoidFunction;\n  isActive: boolean;\n};\n\ntype StateProps = {\n  userId?: string;\n  user?: ApiUser;\n  chatBot?: ApiBotInfo;\n  currentBio?: string;\n  progress?: ManagementProgress;\n  isMuted?: boolean;\n  maxBioLength: number;\n};\n\nconst ERROR_NAME_MISSING = 'Please provide name';\n\nconst ManageBot: FC<OwnProps & StateProps> = ({\n  userId,\n  user,\n  progress,\n  onClose,\n  currentBio,\n  isActive,\n  maxBioLength,\n}) => {\n  const {\n    setBotInfo,\n    uploadProfilePhoto,\n    uploadContactProfilePhoto,\n    startBotFatherConversation,\n  } = getActions();\n\n  const [isFieldTouched, markFieldTouched, unmarkProfileTouched] = useFlag(false);\n  const [isAvatarTouched, markAvatarTouched, unmarkAvatarTouched] = useFlag(false);\n  const [error, setError] = useState<string | undefined>();\n  const lang = useOldLang();\n\n  const username = useMemo(() => (user ? getMainUsername(user) : undefined), [user]);\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  const currentName = user ? getUserFirstOrLastName(user) : '';\n\n  const [photo, setPhoto] = useState<File | undefined>();\n  const [name, setName] = useState(currentName || '');\n  const [bio, setBio] = useState(currentBio || '');\n\n  const currentAvatarHash = user && getChatAvatarHash(user);\n  const currentAvatarBlobUrl = useMedia(currentAvatarHash, false, ApiMediaFormat.BlobUrl);\n\n  useEffect(() => {\n    unmarkProfileTouched();\n    unmarkAvatarTouched();\n  }, [userId]);\n\n  useEffect(() => {\n    setName(currentName || '');\n    setBio(currentBio || '');\n  }, [currentName, currentBio, user]);\n\n  useEffect(() => {\n    setPhoto(undefined);\n  }, [currentAvatarBlobUrl]);\n\n  useEffect(() => {\n    if (progress === ManagementProgress.Complete) {\n      unmarkProfileTouched();\n      unmarkAvatarTouched();\n      setError(undefined);\n    }\n  }, [progress]);\n\n  const handleNameChange = useLastCallback((e: ChangeEvent<HTMLInputElement>) => {\n    setName(e.target.value);\n    markFieldTouched();\n\n    if (error === ERROR_NAME_MISSING) {\n      setError(undefined);\n    }\n  });\n\n  const handleBioChange = useLastCallback((e: ChangeEvent<HTMLTextAreaElement>) => {\n    setBio(e.target.value);\n    markFieldTouched();\n  });\n\n  const handlePhotoChange = useLastCallback((newPhoto: File) => {\n    setPhoto(newPhoto);\n    markAvatarTouched();\n  });\n\n  const handleProfileSave = useLastCallback(() => {\n    const trimmedName = name.trim();\n    const trimmedBio = bio.trim();\n\n    if (!trimmedName.length) {\n      setError(ERROR_NAME_MISSING);\n      return;\n    }\n\n    setBotInfo({\n      ...(isFieldTouched && {\n        bot: user,\n        name: trimmedName,\n        description: trimmedBio,\n      }),\n    });\n\n    if (photo) {\n      uploadProfilePhoto({\n        file: photo,\n        ...(isAvatarTouched && { bot: user }),\n      });\n    }\n  });\n\n  const handleChangeEditIntro = useLastCallback(() => {\n    startBotFatherConversation({ param: `${username}-intro` });\n  });\n\n  const handleChangeEditCommands = useLastCallback(() => {\n    startBotFatherConversation({ param: `${username}-commands` });\n  });\n\n  const handleChangeSettings = useLastCallback(() => {\n    startBotFatherConversation({ param: `${username}` });\n  });\n\n  // eslint-disable-next-line no-null/no-null\n  const inputRef = useRef<HTMLInputElement>(null);\n  const isSuggestRef = useRef(false);\n\n  const handleSelectAvatar = useLastCallback((file: File) => {\n    markAvatarTouched();\n    uploadContactProfilePhoto({ userId, file, isSuggest: isSuggestRef.current });\n  });\n\n  if (!user) {\n    return undefined;\n  }\n\n  const isLoading = progress === ManagementProgress.InProgress;\n\n  return (\n    <div className=\"Management\">\n      <div className=\"custom-scroll\">\n        <div className=\"section\">\n          <AvatarEditable\n            currentAvatarBlobUrl={currentAvatarBlobUrl}\n            onChange={handlePhotoChange}\n            title={lang('ChatSetPhotoOrVideo')}\n            disabled={isLoading}\n          />\n          <InputText\n            id=\"user-name\"\n            label={lang('PaymentCheckoutName')}\n            onChange={handleNameChange}\n            value={name}\n            error={error === ERROR_NAME_MISSING ? error : undefined}\n            teactExperimentControlled\n          />\n          <TextArea\n            value={bio}\n            onChange={handleBioChange}\n            label={lang('DescriptionPlaceholder')}\n            disabled={isLoading}\n            maxLength={maxBioLength}\n            maxLengthIndicator={maxBioLength ? (maxBioLength - bio.length).toString() : undefined}\n          />\n        </div>\n        <div className=\"section\">\n          <div className=\"dialog-buttons\">\n            <ListItem icon=\"bot-commands-filled\" ripple onClick={handleChangeEditIntro}>\n              <span>{lang('BotEditIntro')}</span>\n            </ListItem>\n            <ListItem icon=\"bot-command\" ripple onClick={handleChangeEditCommands}>\n              <span>{lang('BotEditCommands')}</span>\n            </ListItem>\n            <ListItem icon=\"bots\" ripple onClick={handleChangeSettings}>\n              <span>{lang('BotChangeSettings')}</span>\n            </ListItem>\n            <div className=\"section-info section-info_push\">\n              {renderText(lang('BotManageInfo'), ['links'])}\n            </div>\n          </div>\n        </div>\n      </div>\n      <FloatingActionButton\n        isShown={isFieldTouched || isAvatarTouched}\n        onClick={handleProfileSave}\n        disabled={isLoading}\n        ariaLabel={lang('Save')}\n      >\n        {isLoading ? (\n          <Spinner color=\"white\" />\n        ) : (\n          <Icon name=\"check\" />\n        )}\n      </FloatingActionButton>\n      <SelectAvatar\n        onChange={handleSelectAvatar}\n        inputRef={inputRef}\n      />\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { userId }): StateProps => {\n    const user = selectBot(global, userId);\n    const userFullInfo = selectUserFullInfo(global, userId);\n    const { progress } = selectTabState(global).management;\n    const maxBioLength = selectCurrentLimit(global, 'aboutLength');\n\n    return {\n      userId,\n      user,\n      progress,\n      currentBio: userFullInfo?.bio,\n      maxBioLength,\n    };\n  },\n)(ManageBot));\n","import type { ChangeEvent } from 'react';\nimport type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiAvailableReaction, ApiChat, ApiChatFullInfo, ApiExportedInvite,\n} from '../../../api/types';\nimport { ApiMediaFormat } from '../../../api/types';\nimport { ManagementProgress, ManagementScreens } from '../../../types';\n\nimport { getChatAvatarHash, getHasAdminRight, isChatPublic } from '../../../global/helpers';\nimport { selectChat, selectChatFullInfo, selectTabState } from '../../../global/selectors';\nimport { formatInteger } from '../../../util/textFormat';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useMedia from '../../../hooks/useMedia';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport AvatarEditable from '../../ui/AvatarEditable';\nimport Checkbox from '../../ui/Checkbox';\nimport ConfirmDialog from '../../ui/ConfirmDialog';\nimport FloatingActionButton from '../../ui/FloatingActionButton';\nimport InputText from '../../ui/InputText';\nimport ListItem from '../../ui/ListItem';\nimport Spinner from '../../ui/Spinner';\nimport TextArea from '../../ui/TextArea';\n\nimport './Management.scss';\n\ntype OwnProps = {\n  chatId: string;\n  onScreenSelect: (screen: ManagementScreens) => void;\n  onClose: NoneToVoidFunction;\n  isActive: boolean;\n};\n\ntype StateProps = {\n  chat: ApiChat;\n  chatFullInfo?: ApiChatFullInfo;\n  progress?: ManagementProgress;\n  isSignaturesShown: boolean;\n  canChangeInfo?: boolean;\n  canInvite?: boolean;\n  canPost?: boolean;\n  exportedInvites?: ApiExportedInvite[];\n  availableReactions?: ApiAvailableReaction[];\n};\n\nconst CHANNEL_TITLE_EMPTY = 'Channel title can\\'t be empty';\nconst CHANNEL_MAX_DESCRIPTION = 255;\n\nconst ManageChannel: FC<OwnProps & StateProps> = ({\n  chatId,\n  chat,\n  chatFullInfo,\n  progress,\n  isSignaturesShown,\n  canChangeInfo,\n  canInvite,\n  canPost,\n  exportedInvites,\n  isActive,\n  availableReactions,\n  onScreenSelect,\n  onClose,\n}) => {\n  const {\n    updateChat,\n    toggleSignatures,\n    closeManagement,\n    leaveChannel,\n    deleteChannel,\n    openChat,\n    loadExportedChatInvites,\n    loadChatJoinRequests,\n  } = getActions();\n\n  const currentTitle = chat?.title || '';\n  const currentAbout = chatFullInfo?.about || '';\n  const hasLinkedChat = Boolean(chatFullInfo?.linkedChatId);\n\n  const [isDeleteDialogOpen, openDeleteDialog, closeDeleteDialog] = useFlag();\n  const [isProfileFieldsTouched, setIsProfileFieldsTouched] = useState(false);\n  const [title, setTitle] = useState(currentTitle);\n  const [about, setAbout] = useState(currentAbout);\n  const [photo, setPhoto] = useState<File | undefined>();\n  const [error, setError] = useState<string | undefined>();\n  const imageHash = chat && getChatAvatarHash(chat);\n  const currentAvatarBlobUrl = useMedia(imageHash, false, ApiMediaFormat.BlobUrl);\n  const lang = useOldLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  useEffect(() => {\n    if (!canInvite) return;\n    loadExportedChatInvites({ chatId });\n    loadExportedChatInvites({ chatId, isRevoked: true });\n    loadChatJoinRequests({ chatId });\n  }, [chatId, canInvite]);\n\n  useEffect(() => {\n    if (progress === ManagementProgress.Complete) {\n      setIsProfileFieldsTouched(false);\n      setError(undefined);\n    }\n  }, [progress]);\n\n  const adminsCount = useMemo(() => {\n    return Object.keys(chatFullInfo?.adminMembersById || {}).length;\n  }, [chatFullInfo?.adminMembersById]);\n  const removedUsersCount = chatFullInfo?.kickedMembers?.length || 0;\n\n  const handleClickEditType = useCallback(() => {\n    onScreenSelect(ManagementScreens.ChatPrivacyType);\n  }, [onScreenSelect]);\n\n  const handleClickDiscussion = useCallback(() => {\n    onScreenSelect(ManagementScreens.Discussion);\n  }, [onScreenSelect]);\n\n  const handleClickReactions = useCallback(() => {\n    onScreenSelect(ManagementScreens.Reactions);\n  }, [onScreenSelect]);\n\n  const handleClickAdministrators = useCallback(() => {\n    onScreenSelect(ManagementScreens.ChatAdministrators);\n  }, [onScreenSelect]);\n\n  const handleClickInvites = useCallback(() => {\n    onScreenSelect(ManagementScreens.Invites);\n  }, [onScreenSelect]);\n\n  const handleClickRequests = useCallback(() => {\n    onScreenSelect(ManagementScreens.JoinRequests);\n  }, [onScreenSelect]);\n\n  const handleSetPhoto = useCallback((file: File) => {\n    setPhoto(file);\n    setIsProfileFieldsTouched(true);\n  }, []);\n\n  const handleTitleChange = useCallback((e: ChangeEvent<HTMLInputElement>) => {\n    setTitle(e.target.value);\n    setIsProfileFieldsTouched(true);\n  }, []);\n\n  const handleAboutChange = useCallback((e: ChangeEvent<HTMLTextAreaElement>) => {\n    setAbout(e.target.value);\n    setIsProfileFieldsTouched(true);\n  }, []);\n\n  const handleUpdateChannel = useCallback(() => {\n    const trimmedTitle = title.trim();\n    const trimmedAbout = about.trim();\n\n    if (!trimmedTitle.length) {\n      setError(CHANNEL_TITLE_EMPTY);\n      return;\n    }\n\n    updateChat({\n      chatId,\n      title: trimmedTitle,\n      about: trimmedAbout,\n      photo,\n    });\n  }, [about, chatId, photo, title, updateChat]);\n\n  const handleToggleSignatures = useCallback(() => {\n    toggleSignatures({ chatId, isEnabled: !isSignaturesShown });\n  }, [chatId, isSignaturesShown, toggleSignatures]);\n\n  const handleClickSubscribers = useCallback(() => {\n    onScreenSelect(ManagementScreens.ChannelSubscribers);\n  }, [onScreenSelect]);\n\n  const handleRemovedUsersClick = useCallback(() => {\n    onScreenSelect(ManagementScreens.ChannelRemovedUsers);\n  }, [onScreenSelect]);\n\n  const handleDeleteChannel = useCallback(() => {\n    if (chat.isCreator) {\n      deleteChannel({ chatId: chat.id });\n    } else {\n      leaveChannel({ chatId: chat.id });\n    }\n\n    closeDeleteDialog();\n    closeManagement();\n    openChat({ id: undefined });\n  }, [chat.isCreator, chat.id, closeDeleteDialog, closeManagement, leaveChannel, deleteChannel, openChat]);\n\n  const chatReactionsDescription = useMemo(() => {\n    if (!chatFullInfo?.enabledReactions) {\n      return lang('ReactionsOff');\n    }\n\n    if (chatFullInfo.enabledReactions.type === 'all') {\n      return lang('ReactionsAll');\n    }\n\n    const enabledLength = chatFullInfo.enabledReactions.allowed.length;\n    const totalLength = availableReactions?.filter((reaction) => !reaction.isInactive).length || 0;\n\n    return totalLength ? `${enabledLength} / ${totalLength}` : `${enabledLength}`;\n  }, [availableReactions, chatFullInfo?.enabledReactions, lang]);\n  const isChannelPublic = useMemo(() => isChatPublic(chat), [chat]);\n\n  if (chat.isRestricted || chat.isForbidden) {\n    return undefined;\n  }\n\n  const isLoading = progress === ManagementProgress.InProgress;\n\n  return (\n    <div className=\"Management\">\n      <div className=\"custom-scroll\">\n        <div className=\"section\">\n          <AvatarEditable\n            currentAvatarBlobUrl={currentAvatarBlobUrl}\n            onChange={handleSetPhoto}\n            disabled={!canChangeInfo}\n          />\n          <InputText\n            id=\"channel-title\"\n            label={lang('EnterChannelName')}\n            onChange={handleTitleChange}\n            value={title}\n            error={error === CHANNEL_TITLE_EMPTY ? error : undefined}\n            disabled={!canChangeInfo}\n          />\n          <TextArea\n            id=\"channel-about\"\n            className=\"mb-2\"\n            label={lang('DescriptionPlaceholder')}\n            onChange={handleAboutChange}\n            value={about}\n            maxLength={CHANNEL_MAX_DESCRIPTION}\n            maxLengthIndicator={(CHANNEL_MAX_DESCRIPTION - about.length).toString()}\n            disabled={!canChangeInfo}\n            noReplaceNewlines\n          />\n          {chat.isCreator && (\n            <ListItem icon=\"lock\" multiline onClick={handleClickEditType}>\n              <span className=\"title\">{lang('ChannelType')}</span>\n              <span className=\"subtitle\">{isChannelPublic ? lang('TypePublic') : lang('TypePrivate')}</span>\n            </ListItem>\n          )}\n          <ListItem\n            icon=\"message\"\n            multiline\n            onClick={handleClickDiscussion}\n            disabled={!canChangeInfo}\n          >\n            <span className=\"title\">{lang('Discussion')}</span>\n            <span className=\"subtitle\">{hasLinkedChat ? lang('DiscussionUnlink') : lang('Add')}</span>\n          </ListItem>\n          {canInvite && (\n            <ListItem\n              icon=\"link\"\n              onClick={handleClickInvites}\n              multiline\n              disabled={!exportedInvites}\n            >\n              <span className=\"title\">{lang('GroupInfo.InviteLinks')}</span>\n              <span className=\"subtitle\">\n                {exportedInvites ? formatInteger(exportedInvites.length) : lang('Loading')}\n              </span>\n            </ListItem>\n          )}\n          {Boolean(chat.joinRequests?.length) && (\n            <ListItem\n              icon=\"add-user-filled\"\n              onClick={handleClickRequests}\n              multiline\n            >\n              <span className=\"title\">{lang('SubscribeRequests')}</span>\n              <span className=\"subtitle\">\n                {formatInteger(chat.joinRequests!.length)}\n              </span>\n            </ListItem>\n          )}\n          <ListItem\n            icon=\"heart-outline\"\n            multiline\n            onClick={handleClickReactions}\n            disabled={!canChangeInfo}\n          >\n            <span className=\"title\">{lang('Reactions')}</span>\n            <span className=\"subtitle\" dir=\"auto\">\n              {chatReactionsDescription}\n            </span>\n          </ListItem>\n          {canPost && (\n            <div className=\"ListItem narrow\">\n              <Checkbox\n                checked={isSignaturesShown}\n                label={lang('ChannelSignMessages')}\n                onChange={handleToggleSignatures}\n              />\n            </div>\n          )}\n        </div>\n        <div className=\"section\">\n          <ListItem\n            icon=\"admin\"\n            multiline\n            onClick={handleClickAdministrators}\n          >\n            <span className=\"title\">{lang('ChannelAdministrators')}</span>\n            <span className=\"subtitle\">{adminsCount}</span>\n          </ListItem>\n          <ListItem\n            icon=\"group\"\n            multiline\n            onClick={handleClickSubscribers}\n          >\n            <span className=\"title\" dir=\"auto\">{lang('ChannelSubscribers')}</span>\n            <span className=\"subtitle\" dir=\"auto\">{lang('Subscribers', chat.membersCount ?? 0, 'i')}</span>\n          </ListItem>\n          <ListItem\n            icon=\"delete-user\"\n            multiline\n            narrow\n            onClick={handleRemovedUsersClick}\n          >\n            <span className=\"title\">{lang('ChannelBlockedUsers')}</span>\n            <span className=\"subtitle\">{removedUsersCount}</span>\n          </ListItem>\n        </div>\n        <div className=\"section\">\n          <ListItem icon=\"delete\" ripple destructive onClick={openDeleteDialog}>\n            {chat.isCreator ? lang('ChannelDelete') : lang('LeaveChannel')}\n          </ListItem>\n        </div>\n      </div>\n      <FloatingActionButton\n        isShown={isProfileFieldsTouched}\n        onClick={handleUpdateChannel}\n        disabled={isLoading}\n        ariaLabel={lang('Save')}\n      >\n        {isLoading ? (\n          <Spinner color=\"white\" />\n        ) : (\n          <i className=\"icon icon-check\" />\n        )}\n      </FloatingActionButton>\n      <ConfirmDialog\n        isOpen={isDeleteDialogOpen}\n        onClose={closeDeleteDialog}\n        text={chat.isCreator ? lang('ChannelDeleteAlert') : lang('ChannelLeaveAlert')}\n        confirmLabel={chat.isCreator ? lang('ChannelDelete') : lang('LeaveChannel')}\n        confirmHandler={handleDeleteChannel}\n        confirmIsDestructive\n      />\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { chatId }): StateProps => {\n    const chat = selectChat(global, chatId)!;\n    const { management } = selectTabState(global);\n    const { progress } = management;\n    const isSignaturesShown = Boolean(chat?.isSignaturesShown);\n    const { invites } = management.byChatId[chatId] || {};\n\n    return {\n      chat,\n      chatFullInfo: selectChatFullInfo(global, chatId),\n      progress,\n      isSignaturesShown,\n      canChangeInfo: getHasAdminRight(chat, 'changeInfo'),\n      canInvite: getHasAdminRight(chat, 'inviteUsers'),\n      canPost: getHasAdminRight(chat, 'postMessages'),\n      exportedInvites: invites,\n      availableReactions: global.reactions.availableReactions,\n    };\n  },\n  (global, { chatId }) => {\n    return Boolean(selectChat(global, chatId));\n  },\n)(ManageChannel));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useCallback, useMemo } from '../../../lib/teact/teact';\nimport { getGlobal, withGlobal } from '../../../global';\n\nimport type { ApiChat, ApiChatMember } from '../../../api/types';\nimport { ManagementScreens } from '../../../types';\n\nimport { getUserFullName, isChatChannel } from '../../../global/helpers';\nimport { selectChat, selectChatFullInfo } from '../../../global/selectors';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport PrivateChatInfo from '../../common/PrivateChatInfo';\nimport FloatingActionButton from '../../ui/FloatingActionButton';\nimport ListItem from '../../ui/ListItem';\n\ntype OwnProps = {\n  chatId: string;\n  onScreenSelect: (screen: ManagementScreens) => void;\n  onChatMemberSelect: (memberId: string, isPromotedByCurrentUser?: boolean) => void;\n  onClose: NoneToVoidFunction;\n  isActive: boolean;\n};\n\ntype StateProps = {\n  chat?: ApiChat;\n  currentUserId?: string;\n  isChannel?: boolean;\n  adminMembersById?: Record<string, ApiChatMember>;\n};\n\nconst ManageChatAdministrators: FC<OwnProps & StateProps> = ({\n  chat,\n  isChannel,\n  currentUserId,\n  adminMembersById,\n  onScreenSelect,\n  onChatMemberSelect,\n  onClose,\n  isActive,\n}) => {\n  const lang = useOldLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  const canAddNewAdmins = Boolean(chat?.isCreator || chat?.adminRights?.addAdmins);\n\n  const adminMembers = useMemo(() => {\n    if (!adminMembersById) {\n      return [];\n    }\n\n    return Object.values(adminMembersById).sort((a, b) => {\n      if (a.isOwner) {\n        return -1;\n      } else if (b.isOwner) {\n        return 1;\n      }\n\n      return 0;\n    });\n  }, [adminMembersById]);\n\n  const handleAdminMemberClick = useCallback((member: ApiChatMember) => {\n    onChatMemberSelect(member.userId, member.promotedByUserId === currentUserId);\n    onScreenSelect(ManagementScreens.ChatAdminRights);\n  }, [currentUserId, onChatMemberSelect, onScreenSelect]);\n\n  const handleAddAdminClick = useCallback(() => {\n    onScreenSelect(ManagementScreens.GroupAddAdmins);\n  }, [onScreenSelect]);\n\n  const getMemberStatus = useCallback((member: ApiChatMember) => {\n    if (member.isOwner) {\n      return lang('ChannelCreator');\n    }\n\n    // No need for expensive global updates on users, so we avoid them\n    const usersById = getGlobal().users.byId;\n    const promotedByUser = member.promotedByUserId ? usersById[member.promotedByUserId] : undefined;\n\n    if (promotedByUser) {\n      return lang('EditAdminPromotedBy', getUserFullName(promotedByUser));\n    }\n\n    return lang('ChannelAdmin');\n  }, [lang]);\n\n  return (\n    <div className=\"Management\">\n      <div className=\"custom-scroll\">\n        <div className=\"section\">\n          <ListItem\n            icon=\"recent\"\n            multiline\n            disabled\n          >\n            <span className=\"title\">{lang('EventLog')}</span>\n            <span className=\"subtitle\">{lang(isChannel ? 'EventLogInfoDetailChannel' : 'EventLogInfoDetail')}</span>\n          </ListItem>\n        </div>\n\n        <div className=\"section\" dir={lang.isRtl ? 'rtl' : undefined}>\n          <p className=\"text-muted\" dir=\"auto\">\n            {isChannel\n              ? 'You can add administrators to help you manage your channel.'\n              : 'You can add administrators to help you manage your group.'}\n          </p>\n\n          {adminMembers.map((member) => (\n            <ListItem\n              key={member.userId}\n              className=\"chat-item-clickable\"\n              // eslint-disable-next-line react/jsx-no-bind\n              onClick={() => handleAdminMemberClick(member)}\n            >\n              <PrivateChatInfo\n                userId={member.userId}\n                status={getMemberStatus(member)}\n                forceShowSelf\n              />\n            </ListItem>\n          ))}\n\n          <FloatingActionButton\n            isShown={canAddNewAdmins}\n            onClick={handleAddAdminClick}\n            ariaLabel={lang('Channel.Management.AddModerator')}\n          >\n            <i className=\"icon icon-add-user-filled\" />\n          </FloatingActionButton>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { chatId }): StateProps => {\n    const chat = selectChat(global, chatId);\n\n    return {\n      chat,\n      currentUserId: global.currentUserId,\n      isChannel: chat && isChatChannel(chat),\n      adminMembersById: selectChatFullInfo(global, chatId)?.adminMembersById,\n    };\n  },\n)(ManageChatAdministrators));\n","import type { ChangeEvent } from 'react';\nimport type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type { ApiChat } from '../../../api/types';\nimport { ManagementProgress } from '../../../types';\n\nimport { PURCHASE_USERNAME, TME_LINK_PREFIX, USERNAME_PURCHASE_ERROR } from '../../../config';\nimport { isChatChannel, isChatPublic } from '../../../global/helpers';\nimport {\n  selectChat, selectChatFullInfo,\n  selectManagement, selectTabState,\n} from '../../../global/selectors';\nimport { selectCurrentLimit } from '../../../global/selectors/limits';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useOldLang from '../../../hooks/useOldLang';\nimport usePrevious from '../../../hooks/usePrevious';\n\nimport ManageUsernames from '../../common/ManageUsernames';\nimport SafeLink from '../../common/SafeLink';\nimport UsernameInput from '../../common/UsernameInput';\nimport ConfirmDialog from '../../ui/ConfirmDialog';\nimport FloatingActionButton from '../../ui/FloatingActionButton';\nimport ListItem from '../../ui/ListItem';\nimport Loading from '../../ui/Loading';\nimport RadioGroup from '../../ui/RadioGroup';\nimport Spinner from '../../ui/Spinner';\n\ntype PrivacyType = 'private' | 'public';\n\ntype OwnProps = {\n  chatId: string;\n  onClose: NoneToVoidFunction;\n  isActive: boolean;\n};\n\ntype StateProps = {\n  chat: ApiChat;\n  isChannel: boolean;\n  progress?: ManagementProgress;\n  isUsernameAvailable?: boolean;\n  checkedUsername?: string;\n  error?: string;\n  isProtected?: boolean;\n  maxPublicLinks: number;\n  privateInviteLink?: string;\n};\n\nconst ManageChatPrivacyType: FC<OwnProps & StateProps> = ({\n  chat,\n  isActive,\n  isChannel,\n  progress,\n  isUsernameAvailable,\n  checkedUsername,\n  error,\n  isProtected,\n  maxPublicLinks,\n  privateInviteLink,\n  onClose,\n}) => {\n  const {\n    updatePublicLink,\n    updatePrivateLink,\n    toggleIsProtected,\n    openLimitReachedModal,\n    resetManagementError,\n  } = getActions();\n\n  const firstEditableUsername = useMemo(() => chat.usernames?.find(({ isEditable }) => isEditable), [chat.usernames]);\n  const currentUsername = firstEditableUsername?.username || '';\n  const isPublic = useMemo(() => isChatPublic(chat), [chat]);\n\n  const [isProfileFieldsTouched, setIsProfileFieldsTouched] = useState(false);\n  const [privacyType, setPrivacyType] = useState<PrivacyType>(isPublic ? 'public' : 'private');\n  const [editableUsername, setEditableUsername] = useState<string>();\n  const [isRevokeConfirmDialogOpen, openRevokeConfirmDialog, closeRevokeConfirmDialog] = useFlag();\n  const [isUsernameLostDialogOpen, openUsernameLostDialog, closeUsernameLostDialog] = useFlag();\n\n  const previousIsUsernameAvailable = usePrevious(isUsernameAvailable);\n  const renderingIsUsernameAvailable = isUsernameAvailable ?? previousIsUsernameAvailable;\n\n  const canUpdate = isProfileFieldsTouched && Boolean(\n    (privacyType === 'public'\n      && (editableUsername || (currentUsername && editableUsername === ''))\n      && renderingIsUsernameAvailable)\n    || (privacyType === 'private' && isPublic),\n  );\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  useEffect(() => {\n    setIsProfileFieldsTouched(false);\n  }, [currentUsername]);\n\n  useEffect(() => {\n    if (privacyType && !privateInviteLink) {\n      updatePrivateLink();\n    }\n  }, [privacyType, privateInviteLink, updatePrivateLink]);\n\n  const handleUsernameChange = useCallback((value: string) => {\n    setEditableUsername(value);\n    setIsProfileFieldsTouched(true);\n\n    if (error) {\n      resetManagementError({\n        chatId: chat.id,\n      });\n    }\n  }, [chat.id, error]);\n\n  const handleOptionChange = useCallback((value: string, e: ChangeEvent<HTMLInputElement>) => {\n    const myChats = Object.values(getGlobal().chats.byId)\n      .filter(({ isCreator, usernames }) => isCreator && usernames?.some((c) => c.isActive));\n\n    if (myChats.length >= maxPublicLinks && value === 'public') {\n      openLimitReachedModal({ limit: 'channelsPublic' });\n      const radioGroup = e.currentTarget.closest('.radio-group') as HTMLDivElement;\n      // Patch for Teact bug with controlled inputs\n      // TODO Teact support added, this can now be removed\n      (radioGroup.querySelector('[value=public]') as HTMLInputElement).checked = false;\n      (radioGroup.querySelector('[value=private]') as HTMLInputElement).checked = true;\n      return;\n    }\n    setPrivacyType(value as PrivacyType);\n    setIsProfileFieldsTouched(true);\n  }, [maxPublicLinks, openLimitReachedModal]);\n\n  const handleForwardingOptionChange = useCallback((value: string) => {\n    toggleIsProtected({\n      chatId: chat.id,\n      isProtected: value === 'protected',\n    });\n  }, [chat.id, toggleIsProtected]);\n\n  const handleSave = useCallback(() => {\n    if (isPublic && privacyType === 'private') {\n      openUsernameLostDialog();\n    } else {\n      updatePublicLink({ username: privacyType === 'public' ? (editableUsername || '') : '' });\n    }\n  }, [isPublic, openUsernameLostDialog, privacyType, updatePublicLink, editableUsername]);\n\n  const handleMakeChannelPrivateConfirm = useCallback(() => {\n    updatePublicLink({ username: '', shouldDisableUsernames: true });\n    closeUsernameLostDialog();\n  }, [closeUsernameLostDialog, updatePublicLink]);\n\n  const handleRevokePrivateLink = useCallback(() => {\n    closeRevokeConfirmDialog();\n    updatePrivateLink();\n  }, [closeRevokeConfirmDialog, updatePrivateLink]);\n\n  const lang = useOldLang();\n  const langPrefix1 = isChannel ? 'Channel' : 'Mega';\n  const langPrefix2 = isChannel ? 'Channel' : 'Group';\n\n  const options = [\n    { value: 'private', label: lang(`${langPrefix1}Private`), subLabel: lang(`${langPrefix1}PrivateInfo`) },\n    { value: 'public', label: lang(`${langPrefix1}Public`), subLabel: lang(`${langPrefix1}PublicInfo`) },\n  ];\n\n  const forwardingOptions = [{\n    value: 'allowed',\n    label: lang('ChannelVisibility.Forwarding.Enabled'),\n  }, {\n    value: 'protected',\n    label: lang('ChannelVisibility.Forwarding.Disabled'),\n  }];\n\n  const isLoading = progress === ManagementProgress.InProgress;\n  const shouldRenderUsernamesManage = privacyType === 'public' && chat.usernames && chat.usernames.length > 0;\n\n  function renderPurchaseLink() {\n    const purchaseInfoLink = `${TME_LINK_PREFIX}${PURCHASE_USERNAME}`;\n\n    return (\n      <p className=\"section-info\" dir=\"auto\">\n        {(lang('lng_username_purchase_available') as string)\n          .replace('{link}', '%PURCHASE_LINK%')\n          .split('%')\n          .map((s) => {\n            return (s === 'PURCHASE_LINK' ? <SafeLink url={purchaseInfoLink} text={`@${PURCHASE_USERNAME}`} /> : s);\n          })}\n      </p>\n    );\n  }\n\n  return (\n    <div className=\"Management\">\n      <div className=\"custom-scroll\">\n        <div className=\"section\" dir={lang.isRtl ? 'rtl' : undefined}>\n          <h3 className=\"section-heading\">{lang(`${langPrefix2}Type`)}</h3>\n          <RadioGroup\n            selected={privacyType}\n            name=\"channel-type\"\n            options={options}\n            onChange={handleOptionChange}\n          />\n        </div>\n        {privacyType === 'private' ? (\n          <div className=\"section\" dir={lang.isRtl ? 'rtl' : undefined}>\n            {privateInviteLink ? (\n              <>\n                <SafeLink url={privateInviteLink} className=\"group-link\" text={privateInviteLink} />\n                <p className=\"section-info\" dir={lang.isRtl ? 'rtl' : undefined}>\n                  {lang(`${langPrefix1}PrivateLinkHelp`)}\n                </p>\n\n                <ListItem icon=\"delete\" ripple destructive onClick={openRevokeConfirmDialog}>\n                  {lang('RevokeLink')}\n                </ListItem>\n                <ConfirmDialog\n                  isOpen={isRevokeConfirmDialogOpen}\n                  onClose={closeRevokeConfirmDialog}\n                  text={lang('RevokeAlert')}\n                  confirmLabel={lang('RevokeButton')}\n                  confirmHandler={handleRevokePrivateLink}\n                  confirmIsDestructive\n                />\n              </>\n            ) : (\n              <Loading />\n            )}\n          </div>\n        ) : (\n          <div className=\"section no-border\">\n            <UsernameInput\n              asLink\n              currentUsername={currentUsername}\n              isLoading={isLoading}\n              isUsernameAvailable={isUsernameAvailable}\n              checkedUsername={checkedUsername}\n              onChange={handleUsernameChange}\n            />\n            {error === USERNAME_PURCHASE_ERROR && renderPurchaseLink()}\n            <p className=\"section-info\" dir=\"auto\">\n              {lang(`${langPrefix2}.Username.CreatePublicLinkHelp`)}\n            </p>\n          </div>\n        )}\n        {shouldRenderUsernamesManage && (\n          <ManageUsernames\n            chatId={chat.id}\n            usernames={chat.usernames!}\n            onEditUsername={handleUsernameChange}\n          />\n        )}\n        <div className=\"section\" dir={lang.isRtl ? 'rtl' : undefined}>\n          <h3 className=\"section-heading\">\n            {lang(isChannel ? 'ChannelVisibility.Forwarding.ChannelTitle' : 'ChannelVisibility.Forwarding.GroupTitle')}\n          </h3>\n          <RadioGroup\n            selected={isProtected ? 'protected' : 'allowed'}\n            name=\"forwarding-type\"\n            options={forwardingOptions}\n            onChange={handleForwardingOptionChange}\n          />\n          <p className=\"section-info\">\n            {isChannel\n              ? lang('ChannelVisibility.Forwarding.ChannelInfo')\n              : lang('ChannelVisibility.Forwarding.GroupInfo')}\n          </p>\n        </div>\n      </div>\n      <FloatingActionButton\n        isShown={canUpdate}\n        disabled={isLoading}\n        ariaLabel={lang('Save')}\n        onClick={handleSave}\n      >\n        {isLoading ? (\n          <Spinner color=\"white\" />\n        ) : (\n          <i className=\"icon icon-check\" />\n        )}\n      </FloatingActionButton>\n      <ConfirmDialog\n        isOpen={isUsernameLostDialogOpen}\n        onClose={closeUsernameLostDialog}\n        text={lang('ChannelVisibility.Confirm.MakePrivate.Channel', currentUsername)}\n        confirmHandler={handleMakeChannelPrivateConfirm}\n        confirmIsDestructive\n      />\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { chatId }): StateProps => {\n    const chat = selectChat(global, chatId)!;\n    const { isUsernameAvailable, checkedUsername, error } = selectManagement(global, chatId)!;\n\n    return {\n      chat,\n      isChannel: isChatChannel(chat),\n      progress: selectTabState(global).management.progress,\n      error,\n      isUsernameAvailable,\n      checkedUsername,\n      isProtected: chat?.isProtected,\n      maxPublicLinks: selectCurrentLimit(global, 'channelsPublic'),\n      privateInviteLink: selectChatFullInfo(global, chatId)?.inviteLink,\n    };\n  },\n  (global, { chatId }) => {\n    return Boolean(selectChat(global, chatId) && selectManagement(global, chatId));\n  },\n)(ManageChatPrivacyType));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useCallback } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiChat, ApiChatMember, ApiUser } from '../../../api/types';\n\nimport { getHasAdminRight, getUserFullName, isChatChannel } from '../../../global/helpers';\nimport { selectChat, selectChatFullInfo } from '../../../global/selectors';\nimport { MEMO_EMPTY_ARRAY } from '../../../util/memo';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport PrivateChatInfo from '../../common/PrivateChatInfo';\nimport FloatingActionButton from '../../ui/FloatingActionButton';\nimport ListItem, { type MenuItemContextAction } from '../../ui/ListItem';\nimport RemoveGroupUserModal from './RemoveGroupUserModal';\n\ntype OwnProps = {\n  chatId: string;\n  onClose: NoneToVoidFunction;\n  isActive: boolean;\n};\n\ntype StateProps = {\n  chat?: ApiChat;\n  usersById: Record<string, ApiUser>;\n  removedMembers: ApiChatMember[];\n  canDeleteMembers?: boolean;\n  isChannel?: boolean;\n};\n\nconst ManageChatRemovedUsers: FC<OwnProps & StateProps> = ({\n  chat,\n  usersById,\n  canDeleteMembers,\n  removedMembers,\n  isChannel,\n  onClose,\n  isActive,\n}) => {\n  const { updateChatMemberBannedRights } = getActions();\n\n  const lang = useOldLang();\n  const [isRemoveUserModalOpen, openRemoveUserModal, closeRemoveUserModal] = useFlag();\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  const getRemovedBy = useCallback((member: ApiChatMember) => {\n    if (!member.kickedByUserId) {\n      return undefined;\n    }\n\n    const kickedByUser = usersById[member.kickedByUserId];\n    if (!kickedByUser) {\n      return undefined;\n    }\n\n    return lang('UserRemovedBy', getUserFullName(kickedByUser));\n  }, [lang, usersById]);\n\n  const getContextActions = useCallback((member: ApiChatMember): MenuItemContextAction[] | undefined => {\n    if (!chat) {\n      return undefined;\n    }\n\n    return [{\n      title: lang('Unblock'),\n      icon: 'delete',\n      destructive: true,\n      handler: () => updateChatMemberBannedRights({\n        chatId: chat.id,\n        userId: member.userId,\n        bannedRights: {},\n      }),\n    }];\n  }, [lang, chat, updateChatMemberBannedRights]);\n\n  return (\n    <div className=\"Management\">\n      <div className=\"custom-scroll\">\n        <div className=\"section\" dir={lang.isRtl ? 'rtl' : undefined}>\n          <p className=\"text-muted\">{lang(isChannel ? 'NoBlockedChannel2' : 'NoBlockedGroup2')}</p>\n\n          {removedMembers.map((member) => (\n            <ListItem\n              key={member.userId}\n              className=\"chat-item-clickable\"\n              ripple\n              contextActions={getContextActions(member)}\n            >\n              <PrivateChatInfo\n                userId={member.userId}\n                status={getRemovedBy(member)}\n                forceShowSelf\n              />\n            </ListItem>\n          ))}\n          {canDeleteMembers && (\n            <FloatingActionButton\n              isShown\n              onClick={openRemoveUserModal}\n              ariaLabel={lang('Channel.EditAdmin.Permission.BanUsers')}\n            >\n              <i className=\"icon icon-add-user-filled\" />\n            </FloatingActionButton>\n          )}\n          {chat && canDeleteMembers && (\n            <RemoveGroupUserModal\n              chat={chat}\n              isOpen={isRemoveUserModalOpen}\n              onClose={closeRemoveUserModal}\n            />\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { chatId }): StateProps => {\n    const chat = selectChat(global, chatId);\n    const { byId: usersById } = global.users;\n    const canDeleteMembers = chat && (getHasAdminRight(chat, 'banUsers') || chat.isCreator);\n\n    return {\n      chat,\n      usersById,\n      canDeleteMembers,\n      removedMembers: selectChatFullInfo(global, chatId)?.kickedMembers || MEMO_EMPTY_ARRAY,\n      isChannel: chat && isChatChannel(chat),\n    };\n  },\n)(ManageChatRemovedUsers));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiChat } from '../../../api/types';\nimport { ManagementScreens } from '../../../types';\n\nimport { STICKER_SIZE_DISCUSSION_GROUPS } from '../../../config';\nimport { isChatChannel } from '../../../global/helpers';\nimport { selectChat, selectChatFullInfo } from '../../../global/selectors';\nimport { LOCAL_TGS_URLS } from '../../common/helpers/animatedAssets';\nimport renderText from '../../common/helpers/renderText';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport AnimatedIcon from '../../common/AnimatedIcon';\nimport Avatar from '../../common/Avatar';\nimport GroupChatInfo from '../../common/GroupChatInfo';\nimport NothingFound from '../../common/NothingFound';\nimport Checkbox from '../../ui/Checkbox';\nimport ConfirmDialog from '../../ui/ConfirmDialog';\nimport ListItem from '../../ui/ListItem';\n\ntype OwnProps = {\n  chatId: string;\n  onScreenSelect: (screen: ManagementScreens) => void;\n  onClose: NoneToVoidFunction;\n  isActive: boolean;\n};\n\ntype StateProps = {\n  chat?: ApiChat;\n  chatsByIds: Record<string, ApiChat>;\n  linkedChat?: ApiChat;\n  forDiscussionIds?: string[];\n  isChannel?: boolean;\n};\n\nconst ManageDiscussion: FC<OwnProps & StateProps> = ({\n  chat,\n  onClose,\n  isActive,\n  chatId,\n  chatsByIds,\n  linkedChat,\n  forDiscussionIds,\n  isChannel,\n  onScreenSelect,\n}) => {\n  const {\n    loadGroupsForDiscussion,\n    linkDiscussionGroup,\n    unlinkDiscussionGroup,\n    toggleJoinRequest,\n    toggleJoinToSend,\n  } = getActions();\n\n  const [linkedGroupId, setLinkedGroupId] = useState<string>();\n  const [isConfirmUnlinkGroupDialogOpen, openConfirmUnlinkGroupDialog, closeConfirmUnlinkGroupDialog] = useFlag();\n  const [isConfirmLinkGroupDialogOpen, openConfirmLinkGroupDialog, closeConfirmLinkGroupDialog] = useFlag();\n  const [isJoinToSend, setIsJoinToSend] = useState(Boolean(linkedChat?.isJoinToSend));\n  const [isJoinRequest, setIsJoinRequest] = useState(Boolean(linkedChat?.isJoinRequest));\n  const lang = useOldLang();\n  const linkedChatId = linkedChat?.id;\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  useEffect(() => {\n    loadGroupsForDiscussion();\n  }, [loadGroupsForDiscussion]);\n\n  useEffect(() => {\n    if (isActive) {\n      setIsJoinToSend(linkedChat?.isJoinToSend || false);\n      setIsJoinRequest(linkedChat?.isJoinRequest || false);\n    }\n  }, [linkedChat, isActive]);\n\n  const handleUnlinkGroupSessions = useCallback(() => {\n    closeConfirmUnlinkGroupDialog();\n    unlinkDiscussionGroup({ channelId: isChannel ? chatId : linkedChatId! });\n    if (!isChannel) {\n      onScreenSelect(ManagementScreens.Initial);\n    }\n  }, [closeConfirmUnlinkGroupDialog, unlinkDiscussionGroup, isChannel, chatId, linkedChatId, onScreenSelect]);\n\n  const handleLinkGroupSessions = useCallback(() => {\n    closeConfirmLinkGroupDialog();\n    linkDiscussionGroup({ channelId: chatId, chatId: linkedGroupId! });\n  }, [closeConfirmLinkGroupDialog, linkDiscussionGroup, chatId, linkedGroupId]);\n\n  const handleJoinToSendCheck = useCallback((checked: boolean) => {\n    setIsJoinToSend(checked);\n    toggleJoinToSend({ chatId: linkedChatId!, isEnabled: checked });\n    if (!checked) {\n      setIsJoinRequest(false);\n    }\n  }, [linkedChatId, toggleJoinToSend]);\n\n  const handleJoinRequestCheck = useCallback((checked: boolean) => {\n    setIsJoinRequest(checked);\n    toggleJoinRequest({ chatId: linkedChatId!, isEnabled: checked });\n  }, [linkedChatId, toggleJoinRequest]);\n\n  const onDiscussionClick = (groupId: string) => {\n    setLinkedGroupId(groupId);\n    openConfirmLinkGroupDialog();\n  };\n\n  function renderUnlinkGroupHeader() {\n    return (\n      <div className=\"modal-header\">\n        <Avatar\n          size=\"tiny\"\n          peer={linkedChat}\n        />\n        <div className=\"modal-title\">\n          {lang(isChannel ? 'DiscussionUnlinkGroup' : 'DiscussionUnlinkChannel')}\n        </div>\n      </div>\n    );\n  }\n\n  function renderLinkGroupHeader() {\n    if (!linkedGroupId) return undefined;\n    const linkedGroup = chatsByIds[linkedGroupId];\n    if (!linkedGroup) return undefined;\n\n    return (\n      <div className=\"modal-header\">\n        <Avatar\n          size=\"tiny\"\n          peer={linkedGroup}\n        />\n        <div className=\"modal-title\">\n          {lang('Channel.DiscussionGroup.LinkGroup')}\n        </div>\n      </div>\n    );\n  }\n\n  function renderLinkGroupConfirmText() {\n    if (!linkedGroupId) return undefined;\n    const linkedGroup = chatsByIds[linkedGroupId];\n    if (!linkedGroup) return undefined;\n\n    if (linkedGroup.hasPrivateLink) {\n      return renderText(\n        `Do you want to make **${linkedGroup.title}** the discussion board for **${chat!.title}**?`,\n        ['br', 'simple_markdown'],\n      );\n    }\n\n    return renderText(\n      // eslint-disable-next-line max-len\n      `Do you want to make **${linkedGroup.title}** the discussion board for **${chat!.title}**?\\n\\nAnyone from the channel will be able to see messages in this group.`,\n      ['br', 'simple_markdown'],\n    );\n  }\n\n  function renderLinkedGroup() {\n    return (\n      <div>\n        <ListItem\n          className=\"chat-item-clickable\"\n          inactive\n        >\n          <GroupChatInfo chatId={linkedChat!.id} />\n        </ListItem>\n        <ListItem\n          icon=\"delete\"\n          ripple\n          destructive\n          onClick={openConfirmUnlinkGroupDialog}\n        >\n          {lang(isChannel ? 'DiscussionUnlinkGroup' : 'DiscussionUnlinkChannel')}\n        </ListItem>\n        <ConfirmDialog\n          isOpen={isConfirmUnlinkGroupDialogOpen}\n          onClose={closeConfirmUnlinkGroupDialog}\n          header={renderUnlinkGroupHeader()}\n          textParts={renderText(\n            lang(isChannel ? 'DiscussionUnlinkChannelAlert' : 'DiscussionUnlinkGroupAlert', linkedChat!.title),\n            ['br', 'simple_markdown'],\n          )}\n          confirmLabel={lang(isChannel ? 'DiscussionUnlinkGroup' : 'DiscussionUnlinkChannel')}\n          confirmHandler={handleUnlinkGroupSessions}\n          confirmIsDestructive\n        />\n      </div>\n    );\n  }\n\n  function renderDiscussionGroups() {\n    return (\n      <div>\n        <p className=\"section-help\" dir=\"auto\">{lang('DiscussionChannelHelp')}</p>\n\n        <div teactFastList>\n          <ListItem\n            key=\"create-group\"\n            icon=\"group\"\n            ripple\n            teactOrderKey={0}\n            disabled\n          >\n            {lang('DiscussionCreateGroup')}\n          </ListItem>\n          {forDiscussionIds ? (\n            forDiscussionIds.map((id, i) => (\n              <ListItem\n                key={id}\n                teactOrderKey={i + 1}\n                className=\"chat-item-clickable scroll-item\"\n                // eslint-disable-next-line react/jsx-no-bind\n                onClick={() => {\n                  onDiscussionClick(id);\n                }}\n              >\n                <GroupChatInfo chatId={id} />\n              </ListItem>\n            ))\n          ) : (\n            <NothingFound key=\"nothing-found\" teactOrderKey={0} text=\"No discussion groups found\" />\n          )}\n        </div>\n        <p className=\"mt-4 mb-0 section-help\" dir=\"auto\">{lang('DiscussionChannelHelp2')}</p>\n        <ConfirmDialog\n          isOpen={isConfirmLinkGroupDialogOpen}\n          onClose={closeConfirmLinkGroupDialog}\n          header={renderLinkGroupHeader()}\n          textParts={renderLinkGroupConfirmText()}\n          confirmLabel={lang('DiscussionLinkGroup')}\n          confirmHandler={handleLinkGroupSessions}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"Management\">\n      <div className=\"custom-scroll\">\n        <div className=\"section\">\n          <AnimatedIcon\n            tgsUrl={LOCAL_TGS_URLS.DiscussionGroups}\n            size={STICKER_SIZE_DISCUSSION_GROUPS}\n            className=\"section-icon\"\n          />\n          {linkedChat && renderLinkedGroup()}\n          {!linkedChat && renderDiscussionGroups()}\n        </div>\n        {linkedChat && (\n          <div className=\"section\">\n            <h3 className=\"section-heading\">{lang('ChannelSettingsJoinTitle')}</h3>\n            <Checkbox\n              checked={isJoinToSend}\n              onCheck={handleJoinToSendCheck}\n              label={lang('ChannelSettingsJoinToSend')}\n            />\n            {isJoinToSend && (\n              <Checkbox\n                checked={isJoinRequest}\n                onCheck={handleJoinRequestCheck}\n                label={lang('ChannelSettingsJoinRequest')}\n              />\n            )}\n            <p className=\"text-muted\">\n              {isJoinToSend ? lang('ChannelSettingsJoinRequestInfo') : lang('ChannelSettingsJoinToSendInfo')}\n            </p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { chatId }): StateProps => {\n    const chat = selectChat(global, chatId);\n    const { linkedChatId } = selectChatFullInfo(global, chatId) || {};\n    const { forDiscussionIds, byId: chatsByIds } = global.chats;\n    const linkedChat = linkedChatId ? selectChat(global, linkedChatId) : undefined;\n\n    return {\n      chat,\n      chatsByIds,\n      forDiscussionIds,\n      linkedChat,\n      isChannel: chat && isChatChannel(chat),\n    };\n  },\n)(ManageDiscussion));\n","import type { ChangeEvent } from 'react';\nimport type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiAvailableReaction, ApiChat, ApiChatBannedRights, ApiChatFullInfo, ApiExportedInvite,\n} from '../../../api/types';\nimport { ApiMediaFormat } from '../../../api/types';\nimport { ManagementProgress, ManagementScreens } from '../../../types';\n\nimport {\n  getChatAvatarHash,\n  getHasAdminRight,\n  isChatBasicGroup,\n  isChatPublic,\n} from '../../../global/helpers';\nimport { selectChat, selectChatFullInfo, selectTabState } from '../../../global/selectors';\nimport { debounce } from '../../../util/schedulers';\nimport { formatInteger } from '../../../util/textFormat';\nimport renderText from '../../common/helpers/renderText';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useMedia from '../../../hooks/useMedia';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport AvatarEditable from '../../ui/AvatarEditable';\nimport Checkbox from '../../ui/Checkbox';\nimport ConfirmDialog from '../../ui/ConfirmDialog';\nimport FloatingActionButton from '../../ui/FloatingActionButton';\nimport InputText from '../../ui/InputText';\nimport ListItem from '../../ui/ListItem';\nimport Spinner from '../../ui/Spinner';\nimport Switcher from '../../ui/Switcher';\nimport TextArea from '../../ui/TextArea';\n\nimport './Management.scss';\n\ntype OwnProps = {\n  chatId: string;\n  onScreenSelect: (screen: ManagementScreens) => void;\n  onClose: NoneToVoidFunction;\n  isActive: boolean;\n};\n\ntype StateProps = {\n  chat: ApiChat;\n  chatFullInfo?: ApiChatFullInfo;\n  progress?: ManagementProgress;\n  isBasicGroup: boolean;\n  hasLinkedChannel: boolean;\n  canChangeInfo?: boolean;\n  canBanUsers?: boolean;\n  canInvite?: boolean;\n  canEditForum?: boolean;\n  exportedInvites?: ApiExportedInvite[];\n  isChannelsPremiumLimitReached: boolean;\n  availableReactions?: ApiAvailableReaction[];\n};\n\nconst GROUP_TITLE_EMPTY = 'Group title can\\'t be empty';\nconst GROUP_MAX_DESCRIPTION = 255;\n\nconst ALL_PERMISSIONS: Array<keyof ApiChatBannedRights> = [\n  'sendMessages',\n  'embedLinks',\n  'sendPolls',\n  'changeInfo',\n  'inviteUsers',\n  'pinMessages',\n  'manageTopics',\n  'sendPhotos',\n  'sendVideos',\n  'sendRoundvideos',\n  'sendVoices',\n  'sendAudios',\n  'sendDocs',\n];\n// Some checkboxes control multiple rights, and some rights are not controlled from Permissions screen,\n// so we need to define the amount manually\nconst TOTAL_PERMISSIONS_COUNT = ALL_PERMISSIONS.length + 1;\n\nconst runDebounced = debounce((cb) => cb(), 500, false);\n\nconst ManageGroup: FC<OwnProps & StateProps> = ({\n  chatId,\n  chat,\n  chatFullInfo,\n  progress,\n  isBasicGroup,\n  hasLinkedChannel,\n  canChangeInfo,\n  canBanUsers,\n  canInvite,\n  canEditForum,\n  isActive,\n  exportedInvites,\n  isChannelsPremiumLimitReached,\n  availableReactions,\n  onScreenSelect,\n  onClose,\n}) => {\n  const {\n    togglePreHistoryHidden,\n    updateChat,\n    deleteChat,\n    leaveChannel,\n    deleteChannel,\n    closeManagement,\n    openChat,\n    loadExportedChatInvites,\n    loadChatJoinRequests,\n    toggleForum,\n  } = getActions();\n\n  const [isDeleteDialogOpen, openDeleteDialog, closeDeleteDialog] = useFlag();\n  const currentTitle = chat.title;\n  const currentAbout = chatFullInfo?.about || '';\n\n  const [isProfileFieldsTouched, setIsProfileFieldsTouched] = useState(false);\n  const [title, setTitle] = useState(currentTitle);\n  const [about, setAbout] = useState(currentAbout);\n  const [photo, setPhoto] = useState<File | undefined>();\n  const [error, setError] = useState<string | undefined>();\n  const [isForumEnabled, setIsForumEnabled] = useState(chat.isForum);\n  const imageHash = getChatAvatarHash(chat);\n  const currentAvatarBlobUrl = useMedia(imageHash, false, ApiMediaFormat.BlobUrl);\n  const isPublicGroup = useMemo(() => isChatPublic(chat), [chat]);\n  const lang = useOldLang();\n  // eslint-disable-next-line no-null/no-null\n  const isPreHistoryHiddenCheckboxRef = useRef<HTMLDivElement>(null);\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  useEffect(() => {\n    if (canInvite) {\n      loadExportedChatInvites({ chatId });\n      loadExportedChatInvites({ chatId, isRevoked: true });\n      loadChatJoinRequests({ chatId });\n    }\n  }, [chatId, canInvite]);\n\n  // Resetting `isForum` switch on flood wait error\n  useEffect(() => {\n    setIsForumEnabled(Boolean(chat.isForum));\n  }, [chat.isForum]);\n\n  useEffect(() => {\n    if (progress === ManagementProgress.Complete) {\n      setIsProfileFieldsTouched(false);\n      setError(undefined);\n    }\n  }, [progress]);\n\n  const handleClickEditType = useLastCallback(() => {\n    onScreenSelect(ManagementScreens.ChatPrivacyType);\n  });\n\n  const handleClickDiscussion = useLastCallback(() => {\n    onScreenSelect(ManagementScreens.Discussion);\n  });\n\n  const handleClickReactions = useLastCallback(() => {\n    onScreenSelect(ManagementScreens.Reactions);\n  });\n\n  const handleClickPermissions = useLastCallback(() => {\n    onScreenSelect(ManagementScreens.GroupPermissions);\n  });\n\n  const handleClickAdministrators = useLastCallback(() => {\n    onScreenSelect(ManagementScreens.ChatAdministrators);\n  });\n\n  const handleClickInvites = useLastCallback(() => {\n    onScreenSelect(ManagementScreens.Invites);\n  });\n\n  const handleClickRequests = useLastCallback(() => {\n    onScreenSelect(ManagementScreens.JoinRequests);\n  });\n\n  const handleSetPhoto = useLastCallback((file: File) => {\n    setPhoto(file);\n    setIsProfileFieldsTouched(true);\n  });\n\n  const handleTitleChange = useLastCallback((e: ChangeEvent<HTMLInputElement>) => {\n    setTitle(e.target.value);\n    setIsProfileFieldsTouched(true);\n  });\n\n  const handleAboutChange = useLastCallback((e: ChangeEvent<HTMLTextAreaElement>) => {\n    setAbout(e.target.value);\n    setIsProfileFieldsTouched(true);\n  });\n\n  const handleUpdateGroup = useLastCallback(() => {\n    const trimmedTitle = title.trim();\n    const trimmedAbout = about.trim();\n\n    if (!trimmedTitle.length) {\n      setError(GROUP_TITLE_EMPTY);\n      return;\n    }\n\n    updateChat({\n      chatId,\n      title: trimmedTitle,\n      about: trimmedAbout,\n      photo,\n    });\n  });\n\n  const handleClickMembers = useLastCallback(() => {\n    onScreenSelect(ManagementScreens.GroupMembers);\n  });\n\n  const handleTogglePreHistory = useLastCallback(() => {\n    if (!chatFullInfo) {\n      return;\n    }\n\n    const { isPreHistoryHidden } = chatFullInfo;\n\n    togglePreHistoryHidden({ chatId: chat.id, isEnabled: !isPreHistoryHidden });\n  });\n\n  const handleForumToggle = useLastCallback(() => {\n    setIsForumEnabled((current) => {\n      const newIsForumEnabled = !current;\n\n      runDebounced(() => {\n        toggleForum({ chatId, isEnabled: newIsForumEnabled });\n      });\n\n      return newIsForumEnabled;\n    });\n  });\n\n  useEffect(() => {\n    if (!isChannelsPremiumLimitReached) {\n      return;\n    }\n\n    // Teact does not have full support of controlled form components, we need to \"disable\" input value change manually\n    // TODO Teact support added, this can now be removed\n    const checkbox = isPreHistoryHiddenCheckboxRef.current?.querySelector('input') as HTMLInputElement;\n    checkbox.checked = !chatFullInfo?.isPreHistoryHidden;\n  }, [isChannelsPremiumLimitReached, chatFullInfo?.isPreHistoryHidden]);\n\n  const chatReactionsDescription = useMemo(() => {\n    if (!chatFullInfo?.enabledReactions) {\n      return lang('ReactionsOff');\n    }\n\n    if (chatFullInfo.enabledReactions.type === 'all') {\n      return lang('ReactionsAll');\n    }\n\n    const enabledLength = chatFullInfo.enabledReactions.allowed.length;\n    const totalLength = availableReactions?.filter((reaction) => !reaction.isInactive).length || 0;\n\n    return totalLength\n      ? `${enabledLength} / ${totalLength}`\n      : `${enabledLength}`;\n  }, [availableReactions, chatFullInfo?.enabledReactions, lang]);\n\n  const enabledPermissionsCount = useMemo(() => {\n    if (!chat.defaultBannedRights) {\n      return 0;\n    }\n\n    let totalCount = ALL_PERMISSIONS.filter(\n      (key) => {\n        if (key === 'manageTopics' && !isForumEnabled) return false;\n        return !chat.defaultBannedRights![key as keyof ApiChatBannedRights];\n      },\n    ).length;\n\n    const { sendStickers, sendGifs } = chat.defaultBannedRights;\n\n    // These two rights are controlled with a single checkbox\n    if (!sendStickers && !sendGifs) {\n      totalCount += 1;\n    }\n\n    return totalCount;\n  }, [chat.defaultBannedRights, isForumEnabled]);\n\n  const adminsCount = useMemo(() => {\n    return Object.keys(chatFullInfo?.adminMembersById || {}).length;\n  }, [chatFullInfo?.adminMembersById]);\n\n  const handleDeleteGroup = useLastCallback(() => {\n    if (isBasicGroup) {\n      deleteChat({ chatId: chat.id });\n    } else if (!chat.isCreator) {\n      leaveChannel({ chatId: chat.id });\n    } else {\n      deleteChannel({ chatId: chat.id });\n    }\n    closeDeleteDialog();\n    closeManagement();\n    openChat({ id: undefined });\n  });\n\n  if (chat.isRestricted || chat.isForbidden) {\n    return undefined;\n  }\n\n  const isLoading = progress === ManagementProgress.InProgress;\n\n  return (\n    <div className=\"Management\">\n      <div className=\"custom-scroll\">\n        <div className=\"section\">\n          <AvatarEditable\n            isForForum={isForumEnabled}\n            currentAvatarBlobUrl={currentAvatarBlobUrl}\n            onChange={handleSetPhoto}\n            disabled={!canChangeInfo}\n          />\n          <InputText\n            id=\"group-title\"\n            label={lang('GroupName')}\n            onChange={handleTitleChange}\n            value={title}\n            error={error === GROUP_TITLE_EMPTY ? error : undefined}\n            disabled={!canChangeInfo}\n          />\n          <TextArea\n            id=\"group-about\"\n            className=\"mb-2\"\n            label={lang('DescriptionPlaceholder')}\n            maxLength={GROUP_MAX_DESCRIPTION}\n            maxLengthIndicator={(GROUP_MAX_DESCRIPTION - about.length).toString()}\n            onChange={handleAboutChange}\n            value={about}\n            disabled={!canChangeInfo}\n            noReplaceNewlines\n          />\n          {chat.isCreator && (\n            <ListItem icon=\"lock\" multiline onClick={handleClickEditType}>\n              <span className=\"title\">{lang('GroupType')}</span>\n              <span className=\"subtitle\">{isPublicGroup ? lang('TypePublic') : lang('TypePrivate')}</span>\n            </ListItem>\n          )}\n          {hasLinkedChannel && (\n            <ListItem\n              icon=\"message\"\n              multiline\n              onClick={handleClickDiscussion}\n            >\n              <span className=\"title\">{lang('LinkedChannel')}</span>\n              <span className=\"subtitle\">{lang('DiscussionUnlink')}</span>\n            </ListItem>\n          )}\n          <ListItem\n            icon=\"permissions\"\n            multiline\n            onClick={handleClickPermissions}\n            disabled={!canBanUsers}\n          >\n            <span className=\"title\">{lang('ChannelPermissions')}</span>\n            <span className=\"subtitle\" dir=\"auto\">\n              {enabledPermissionsCount}/{TOTAL_PERMISSIONS_COUNT - (isForumEnabled ? 0 : 1)}\n            </span>\n          </ListItem>\n          <ListItem\n            icon=\"heart-outline\"\n            multiline\n            onClick={handleClickReactions}\n            disabled={!canChangeInfo}\n          >\n            <span className=\"title\">{lang('Reactions')}</span>\n            <span className=\"subtitle\" dir=\"auto\">\n              {chatReactionsDescription}\n            </span>\n          </ListItem>\n          <ListItem\n            icon=\"admin\"\n            multiline\n            onClick={handleClickAdministrators}\n          >\n            <span className=\"title\">{lang('ChannelAdministrators')}</span>\n            <span className=\"subtitle\">{formatInteger(adminsCount)}</span>\n          </ListItem>\n          {canInvite && (\n            <ListItem\n              icon=\"link\"\n              onClick={handleClickInvites}\n              multiline\n              disabled={!exportedInvites}\n            >\n              <span className=\"title\">{lang('GroupInfo.InviteLinks')}</span>\n              <span className=\"subtitle\">\n                {exportedInvites ? formatInteger(exportedInvites.length) : lang('Loading')}\n              </span>\n            </ListItem>\n          )}\n          {Boolean(chat.joinRequests?.length) && (\n            <ListItem\n              icon=\"add-user-filled\"\n              onClick={handleClickRequests}\n              multiline\n            >\n              <span className=\"title\">{lang('MemberRequests')}</span>\n              <span className=\"subtitle\">\n                {formatInteger(chat.joinRequests!.length)}\n              </span>\n            </ListItem>\n          )}\n          {canEditForum && (\n            <>\n              <ListItem icon=\"forums\" ripple onClick={handleForumToggle}>\n                <span>{lang('ChannelTopics')}</span>\n                <Switcher\n                  id=\"group-notifications\"\n                  label={lang('ChannelTopics')}\n                  checked={isForumEnabled}\n                  inactive\n                />\n              </ListItem>\n              <div className=\"section-info section-info_push\">{lang('ForumToggleDescription')}</div>\n            </>\n          )}\n        </div>\n        <div className=\"section\">\n          <ListItem icon=\"group\" multiline onClick={handleClickMembers}>\n            <span className=\"title\">{lang('GroupMembers')}</span>\n            <span className=\"subtitle\">{formatInteger(chat.membersCount ?? 0)}</span>\n          </ListItem>\n\n          {!isPublicGroup && !hasLinkedChannel && Boolean(chatFullInfo) && (\n            <div className=\"ListItem narrow\" ref={isPreHistoryHiddenCheckboxRef}>\n              <Checkbox\n                checked={!chatFullInfo.isPreHistoryHidden}\n                label={lang('ChatHistory')}\n                onChange={handleTogglePreHistory}\n                disabled={!canBanUsers}\n              />\n            </div>\n          )}\n        </div>\n        <div className=\"section\">\n          <ListItem icon=\"delete\" ripple destructive onClick={openDeleteDialog}>\n            {lang('DeleteMega')}\n          </ListItem>\n        </div>\n      </div>\n      <FloatingActionButton\n        isShown={isProfileFieldsTouched}\n        onClick={handleUpdateGroup}\n        disabled={isLoading}\n        ariaLabel={lang('Save')}\n      >\n        {isLoading ? (\n          <Spinner color=\"white\" />\n        ) : (\n          <i className=\"icon icon-check\" />\n        )}\n      </FloatingActionButton>\n      <ConfirmDialog\n        isOpen={isDeleteDialogOpen}\n        onClose={closeDeleteDialog}\n        textParts={renderText(\n          isBasicGroup || !chat.isCreator\n            ? lang('AreYouSureDeleteAndExit')\n            : lang('AreYouSureDeleteThisChatWithGroup', chat.title),\n          ['br', 'simple_markdown'],\n        )}\n        confirmLabel={isBasicGroup || !chat.isCreator ? lang('DeleteMega') : lang('DeleteGroupForAll')}\n        confirmHandler={handleDeleteGroup}\n        confirmIsDestructive\n      />\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { chatId }): StateProps => {\n    const chat = selectChat(global, chatId)!;\n    const chatFullInfo = selectChatFullInfo(global, chatId);\n    const { management, limitReachedModal } = selectTabState(global);\n    const { progress } = management;\n    const hasLinkedChannel = Boolean(chatFullInfo?.linkedChatId);\n    const isBasicGroup = isChatBasicGroup(chat);\n    const { invites } = management.byChatId[chatId] || {};\n    const canEditForum = !hasLinkedChannel && (getHasAdminRight(chat, 'changeInfo') || chat.isCreator);\n    const canChangeInfo = chat.isCreator || getHasAdminRight(chat, 'changeInfo');\n    const canBanUsers = chat.isCreator || getHasAdminRight(chat, 'banUsers');\n    const canInvite = chat.isCreator || getHasAdminRight(chat, 'inviteUsers');\n\n    return {\n      chat,\n      chatFullInfo,\n      progress,\n      isBasicGroup,\n      hasLinkedChannel,\n      canChangeInfo,\n      canBanUsers,\n      canInvite,\n      exportedInvites: invites,\n      isChannelsPremiumLimitReached: limitReachedModal?.limit === 'channels',\n      availableReactions: global.reactions.availableReactions,\n      canEditForum,\n    };\n  },\n  (global, { chatId }) => {\n    return Boolean(selectChat(global, chatId));\n  },\n)(ManageGroup));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type {\n  ApiChat, ApiChatAdminRights, ApiChatMember, ApiUser,\n} from '../../../api/types';\nimport { ManagementScreens } from '../../../types';\n\nimport { getUserFullName, isChatBasicGroup, isChatChannel } from '../../../global/helpers';\nimport { selectChat, selectChatFullInfo } from '../../../global/selectors';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport PrivateChatInfo from '../../common/PrivateChatInfo';\nimport Checkbox from '../../ui/Checkbox';\nimport ConfirmDialog from '../../ui/ConfirmDialog';\nimport FloatingActionButton from '../../ui/FloatingActionButton';\nimport InputText from '../../ui/InputText';\nimport ListItem from '../../ui/ListItem';\nimport Spinner from '../../ui/Spinner';\n\ntype OwnProps = {\n  chatId: string;\n  selectedUserId?: string;\n  isPromotedByCurrentUser?: boolean;\n  isNewAdmin?: boolean;\n  isActive: boolean;\n  onScreenSelect: (screen: ManagementScreens) => void;\n  onClose: NoneToVoidFunction;\n};\n\ntype StateProps = {\n  chat: ApiChat;\n  usersById: Record<string, ApiUser>;\n  adminMembersById?: Record<string, ApiChatMember>;\n  hasFullInfo: boolean;\n  currentUserId?: string;\n  isChannel: boolean;\n  isFormFullyDisabled: boolean;\n  isForum?: boolean;\n  defaultRights?: ApiChatAdminRights;\n};\n\nconst CUSTOM_TITLE_MAX_LENGTH = 16;\n\nconst ManageGroupAdminRights: FC<OwnProps & StateProps> = ({\n  isActive,\n  isNewAdmin,\n  selectedUserId,\n  defaultRights,\n  chat,\n  usersById,\n  currentUserId,\n  adminMembersById,\n  hasFullInfo,\n  isChannel,\n  isForum,\n  isFormFullyDisabled,\n  onClose,\n  onScreenSelect,\n}) => {\n  const { updateChatAdmin } = getActions();\n\n  const [permissions, setPermissions] = useState<ApiChatAdminRights>({});\n  const [isTouched, setIsTouched] = useState(Boolean(isNewAdmin));\n  const [isLoading, setIsLoading] = useState(false);\n  const [isDismissConfirmationDialogOpen, openDismissConfirmationDialog, closeDismissConfirmationDialog] = useFlag();\n  const [customTitle, setCustomTitle] = useState('');\n  const lang = useOldLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  const selectedChatMember = useMemo(() => {\n    const selectedAdminMember = selectedUserId ? adminMembersById?.[selectedUserId] : undefined;\n\n    // If `selectedAdminMember` variable is filled with a value, then we have already saved the administrator,\n    // so now we need to return to the list of administrators\n    if (isNewAdmin && (selectedAdminMember || !selectedUserId)) {\n      return undefined;\n    }\n\n    if (isNewAdmin) {\n      const user = getGlobal().users.byId[selectedUserId!];\n\n      return user ? {\n        userId: user.id,\n        adminRights: defaultRights,\n        customTitle: lang('ChannelAdmin'),\n        isOwner: false,\n        promotedByUserId: undefined,\n      } : undefined;\n    }\n\n    return selectedAdminMember;\n  }, [adminMembersById, defaultRights, isNewAdmin, lang, selectedUserId]);\n\n  useEffect(() => {\n    if (hasFullInfo && selectedUserId && !selectedChatMember) {\n      onScreenSelect(ManagementScreens.ChatAdministrators);\n    }\n  }, [chat, hasFullInfo, onScreenSelect, selectedChatMember, selectedUserId]);\n\n  useEffect(() => {\n    setPermissions(selectedChatMember?.adminRights || {});\n    setCustomTitle((selectedChatMember?.customTitle || '').substr(0, CUSTOM_TITLE_MAX_LENGTH));\n    setIsTouched(Boolean(isNewAdmin));\n    setIsLoading(false);\n  }, [defaultRights, isNewAdmin, selectedChatMember]);\n\n  const handlePermissionChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name } = e.target;\n\n    function getUpdatedPermissionValue(value: true | undefined) {\n      return value ? undefined : true;\n    }\n\n    setPermissions((p) => ({\n      ...p,\n      [name]: getUpdatedPermissionValue(p[name as keyof ApiChatAdminRights]),\n    }));\n    setIsTouched(true);\n  }, []);\n\n  const handleSavePermissions = useCallback(() => {\n    if (!selectedUserId) {\n      return;\n    }\n\n    setIsLoading(true);\n    updateChatAdmin({\n      chatId: chat.id,\n      userId: selectedUserId,\n      adminRights: permissions,\n      customTitle,\n    });\n  }, [selectedUserId, updateChatAdmin, chat.id, permissions, customTitle]);\n\n  const handleDismissAdmin = useCallback(() => {\n    if (!selectedUserId) {\n      return;\n    }\n\n    updateChatAdmin({\n      chatId: chat.id,\n      userId: selectedUserId,\n      adminRights: {},\n    });\n    closeDismissConfirmationDialog();\n  }, [chat.id, closeDismissConfirmationDialog, selectedUserId, updateChatAdmin]);\n\n  const getControlIsDisabled = useCallback((key: keyof ApiChatAdminRights) => {\n    if (isChatBasicGroup(chat)) {\n      return false;\n    }\n\n    if (isFormFullyDisabled || !chat.adminRights) {\n      return true;\n    }\n\n    if (chat.isCreator) {\n      return false;\n    }\n\n    return !chat.adminRights![key];\n  }, [chat, isFormFullyDisabled]);\n\n  const memberStatus = useMemo(() => {\n    if (isNewAdmin || !selectedChatMember) {\n      return undefined;\n    }\n\n    if (selectedChatMember.isOwner) {\n      return lang('ChannelCreator');\n    }\n\n    const promotedByUser = selectedChatMember.promotedByUserId\n      ? usersById[selectedChatMember.promotedByUserId]\n      : undefined;\n\n    if (promotedByUser) {\n      return lang('EditAdminPromotedBy', getUserFullName(promotedByUser));\n    }\n\n    return lang('ChannelAdmin');\n  }, [isNewAdmin, selectedChatMember, usersById, lang]);\n\n  const handleCustomTitleChange = useCallback((e) => {\n    const { value } = e.target;\n    setCustomTitle(value);\n    setIsTouched(true);\n  }, []);\n\n  if (!selectedChatMember) {\n    return undefined;\n  }\n\n  return (\n    <div className=\"Management\">\n      <div className=\"custom-scroll\">\n        <div className=\"section\">\n          <ListItem inactive className=\"chat-item-clickable\">\n            <PrivateChatInfo\n              userId={selectedChatMember.userId}\n              status={memberStatus}\n              forceShowSelf\n            />\n          </ListItem>\n\n          <h3 className=\"section-heading mt-4\" dir=\"auto\">{lang('EditAdminWhatCanDo')}</h3>\n\n          <div className=\"ListItem\">\n            <Checkbox\n              name=\"changeInfo\"\n              checked={Boolean(permissions.changeInfo)}\n              label={lang(isChannel ? 'EditAdminChangeChannelInfo' : 'EditAdminChangeGroupInfo')}\n              blocking\n              disabled={getControlIsDisabled('changeInfo')}\n              onChange={handlePermissionChange}\n            />\n          </div>\n          {isChannel && (\n            <div className=\"ListItem\">\n              <Checkbox\n                name=\"postMessages\"\n                checked={Boolean(permissions.postMessages)}\n                label={lang('EditAdminPostMessages')}\n                blocking\n                disabled={getControlIsDisabled('postMessages')}\n                onChange={handlePermissionChange}\n              />\n            </div>\n          )}\n          {isChannel && (\n            <div className=\"ListItem\">\n              <Checkbox\n                name=\"editMessages\"\n                checked={Boolean(permissions.editMessages)}\n                label={lang('EditAdminEditMessages')}\n                blocking\n                disabled={getControlIsDisabled('editMessages')}\n                onChange={handlePermissionChange}\n              />\n            </div>\n          )}\n          <div className=\"ListItem\">\n            <Checkbox\n              name=\"deleteMessages\"\n              checked={Boolean(permissions.deleteMessages)}\n              label={lang(isChannel ? 'EditAdminDeleteMessages' : 'EditAdminGroupDeleteMessages')}\n              blocking\n              disabled={getControlIsDisabled('deleteMessages')}\n              onChange={handlePermissionChange}\n            />\n          </div>\n          <div className=\"ListItem\">\n            <Checkbox\n              name=\"postStories\"\n              checked={Boolean(permissions.postStories)}\n              label={lang('EditAdminPostStories')}\n              blocking\n              disabled={getControlIsDisabled('postStories')}\n              onChange={handlePermissionChange}\n            />\n          </div>\n          <div className=\"ListItem\">\n            <Checkbox\n              name=\"editStories\"\n              checked={Boolean(permissions.editStories)}\n              label={lang('EditAdminEditStories')}\n              blocking\n              disabled={getControlIsDisabled('editStories')}\n              onChange={handlePermissionChange}\n            />\n          </div>\n          <div className=\"ListItem\">\n            <Checkbox\n              name=\"deleteStories\"\n              checked={Boolean(permissions.deleteStories)}\n              label={lang('EditAdminDeleteStories')}\n              blocking\n              disabled={getControlIsDisabled('deleteStories')}\n              onChange={handlePermissionChange}\n            />\n          </div>\n          {!isChannel && (\n            <div className=\"ListItem\">\n              <Checkbox\n                name=\"banUsers\"\n                checked={Boolean(permissions.banUsers)}\n                label={lang('EditAdminBanUsers')}\n                blocking\n                disabled={getControlIsDisabled('banUsers')}\n                onChange={handlePermissionChange}\n              />\n            </div>\n          )}\n          <div className=\"ListItem\">\n            <Checkbox\n              name=\"inviteUsers\"\n              checked={Boolean(permissions.inviteUsers)}\n              label={lang('EditAdminAddUsers')}\n              blocking\n              disabled={getControlIsDisabled('inviteUsers')}\n              onChange={handlePermissionChange}\n            />\n          </div>\n          {!isChannel && (\n            <div className=\"ListItem\">\n              <Checkbox\n                name=\"pinMessages\"\n                checked={Boolean(permissions.pinMessages)}\n                label={lang('EditAdminPinMessages')}\n                blocking\n                disabled={getControlIsDisabled('pinMessages')}\n                onChange={handlePermissionChange}\n              />\n            </div>\n          )}\n          <div className=\"ListItem\">\n            <Checkbox\n              name=\"addAdmins\"\n              checked={Boolean(permissions.addAdmins)}\n              label={lang('EditAdminAddAdmins')}\n              blocking\n              disabled={getControlIsDisabled('addAdmins')}\n              onChange={handlePermissionChange}\n            />\n          </div>\n          <div className=\"ListItem\">\n            <Checkbox\n              name=\"manageCall\"\n              checked={Boolean(permissions.manageCall)}\n              label={lang('StartVoipChatPermission')}\n              blocking\n              disabled={getControlIsDisabled('manageCall')}\n              onChange={handlePermissionChange}\n            />\n          </div>\n          {isForum && (\n            <div className=\"ListItem\">\n              <Checkbox\n                name=\"manageTopics\"\n                checked={Boolean(permissions.manageTopics)}\n                label={lang('ManageTopicsPermission')}\n                blocking\n                disabled={getControlIsDisabled('manageTopics')}\n                onChange={handlePermissionChange}\n              />\n            </div>\n          )}\n          {!isChannel && (\n            <div className=\"ListItem\">\n              <Checkbox\n                name=\"anonymous\"\n                checked={Boolean(permissions.anonymous)}\n                label={lang('EditAdminSendAnonymously')}\n                blocking\n                disabled={getControlIsDisabled('anonymous')}\n                onChange={handlePermissionChange}\n              />\n            </div>\n          )}\n\n          {isFormFullyDisabled && (\n            <p className=\"section-info mb-4\" dir=\"auto\">\n              {lang('Channel.EditAdmin.CannotEdit')}\n            </p>\n          )}\n\n          {!isChannel && (\n            <InputText\n              id=\"admin-title\"\n              label={lang('EditAdminRank')}\n              onChange={handleCustomTitleChange}\n              value={customTitle}\n              disabled={isFormFullyDisabled}\n              maxLength={CUSTOM_TITLE_MAX_LENGTH}\n            />\n          )}\n\n          {currentUserId !== selectedUserId && !isFormFullyDisabled && !isNewAdmin && (\n            <ListItem icon=\"delete\" ripple destructive onClick={openDismissConfirmationDialog}>\n              {lang('EditAdminRemoveAdmin')}\n            </ListItem>\n          )}\n        </div>\n      </div>\n\n      <FloatingActionButton\n        isShown={isTouched}\n        onClick={handleSavePermissions}\n        ariaLabel={lang('Save')}\n        disabled={isLoading}\n      >\n        {isLoading ? (\n          <Spinner color=\"white\" />\n        ) : (\n          <i className=\"icon icon-check\" />\n        )}\n      </FloatingActionButton>\n\n      {!isNewAdmin && (\n        <ConfirmDialog\n          isOpen={isDismissConfirmationDialogOpen}\n          onClose={closeDismissConfirmationDialog}\n          text=\"Are you sure you want to dismiss this admin?\"\n          confirmLabel={lang('Channel.Admin.Dismiss')}\n          confirmHandler={handleDismissAdmin}\n          confirmIsDestructive\n        />\n      )}\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { chatId, isPromotedByCurrentUser }): StateProps => {\n    const chat = selectChat(global, chatId)!;\n    const fullInfo = selectChatFullInfo(global, chatId);\n    const { byId: usersById } = global.users;\n    const { currentUserId } = global;\n    const isChannel = isChatChannel(chat);\n    const isFormFullyDisabled = !(chat.isCreator || isPromotedByCurrentUser);\n    const isForum = chat.isForum;\n\n    return {\n      chat,\n      usersById,\n      currentUserId,\n      isChannel,\n      isForum,\n      isFormFullyDisabled,\n      defaultRights: chat.adminRights,\n      hasFullInfo: Boolean(fullInfo),\n      adminMembersById: fullInfo?.adminMembersById,\n    };\n  },\n  (global, { chatId }) => {\n    return Boolean(selectChat(global, chatId));\n  },\n)(ManageGroupAdminRights));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useMemo, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type { ApiChatMember, ApiUserStatus } from '../../../api/types';\nimport { ManagementScreens, NewChatMembersProgress } from '../../../types';\n\nimport {\n  filterUsersByName, getHasAdminRight, isChatBasicGroup,\n  isChatChannel, isUserBot, isUserRightBanned, sortUserIds,\n} from '../../../global/helpers';\nimport { selectChat, selectChatFullInfo, selectTabState } from '../../../global/selectors';\nimport { unique } from '../../../util/iteratees';\nimport sortChatIds from '../../common/helpers/sortChatIds';\n\nimport usePeerStoriesPolling from '../../../hooks/polling/usePeerStoriesPolling';\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useInfiniteScroll from '../../../hooks/useInfiniteScroll';\nimport useKeyboardListNavigation from '../../../hooks/useKeyboardListNavigation';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Icon from '../../common/icons/Icon';\nimport NothingFound from '../../common/NothingFound';\nimport PrivateChatInfo from '../../common/PrivateChatInfo';\nimport FloatingActionButton from '../../ui/FloatingActionButton';\nimport InfiniteScroll from '../../ui/InfiniteScroll';\nimport InputText from '../../ui/InputText';\nimport ListItem, { type MenuItemContextAction } from '../../ui/ListItem';\nimport Loading from '../../ui/Loading';\nimport Switcher from '../../ui/Switcher';\nimport DeleteMemberModal from '../DeleteMemberModal';\n\ntype OwnProps = {\n  chatId: string;\n  isActive: boolean;\n  noAdmins?: boolean;\n  onClose: NoneToVoidFunction;\n  onScreenSelect?: (screen: ManagementScreens) => void;\n  onChatMemberSelect?: (memberId: string, isPromotedByCurrentUser?: boolean) => void;\n};\n\ntype StateProps = {\n  userStatusesById: Record<string, ApiUserStatus>;\n  members?: ApiChatMember[];\n  canAddMembers?: boolean;\n  adminMembersById?: Record<string, ApiChatMember>;\n  isChannel?: boolean;\n  localContactIds?: string[];\n  searchQuery?: string;\n  isSearching?: boolean;\n  localUserIds?: string[];\n  globalUserIds?: string[];\n  currentUserId?: string;\n  canDeleteMembers?: boolean;\n  areParticipantsHidden?: boolean;\n  canHideParticipants?: boolean;\n};\n\nconst ManageGroupMembers: FC<OwnProps & StateProps> = ({\n  chatId,\n  noAdmins,\n  members,\n  canAddMembers,\n  adminMembersById,\n  userStatusesById,\n  isChannel,\n  isActive,\n  globalUserIds,\n  localContactIds,\n  localUserIds,\n  isSearching,\n  searchQuery,\n  currentUserId,\n  canDeleteMembers,\n  areParticipantsHidden,\n  canHideParticipants,\n  onClose,\n  onScreenSelect,\n  onChatMemberSelect,\n}) => {\n  const {\n    openChat, setUserSearchQuery, closeManagement,\n    toggleParticipantsHidden, setNewChatMembersDialogState, toggleManagement,\n  } = getActions();\n  const lang = useOldLang();\n  // eslint-disable-next-line no-null/no-null\n  const inputRef = useRef<HTMLInputElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  const [deletingUserId, setDeletingUserId] = useState<string | undefined>();\n\n  const adminIds = useMemo(() => {\n    return noAdmins && adminMembersById ? Object.keys(adminMembersById) : [];\n  }, [adminMembersById, noAdmins]);\n\n  const memberIds = useMemo(() => {\n    // No need for expensive global updates on users, so we avoid them\n    const usersById = getGlobal().users.byId;\n    if (!members || !usersById) {\n      return [];\n    }\n\n    const userIds = sortUserIds(\n      members.map(({ userId }) => userId),\n      usersById,\n      userStatusesById,\n    );\n\n    return noAdmins ? userIds.filter((userId) => !adminIds.includes(userId)) : userIds;\n  }, [members, userStatusesById, noAdmins, adminIds]);\n\n  usePeerStoriesPolling(memberIds);\n\n  const displayedIds = useMemo(() => {\n    // No need for expensive global updates on users, so we avoid them\n    const usersById = getGlobal().users.byId;\n    const shouldUseSearchResults = Boolean(searchQuery);\n    const listedIds = !shouldUseSearchResults\n      ? memberIds\n      : (localContactIds ? filterUsersByName(localContactIds, usersById, searchQuery) : []);\n\n    return sortChatIds(\n      unique([\n        ...listedIds,\n        ...(shouldUseSearchResults ? localUserIds || [] : []),\n        ...(shouldUseSearchResults ? globalUserIds || [] : []),\n      ]).filter((contactId) => {\n        const user = usersById[contactId];\n        if (!user) {\n          return true;\n        }\n\n        return (isChannel || user.canBeInvitedToGroup || !isUserBot(user))\n          && (!noAdmins || !adminIds.includes(contactId));\n      }),\n      true,\n    );\n  }, [memberIds, localContactIds, searchQuery, localUserIds, globalUserIds, isChannel, noAdmins, adminIds]);\n\n  const [viewportIds, getMore] = useInfiniteScroll(undefined, displayedIds, Boolean(searchQuery));\n\n  const handleMemberClick = useLastCallback((id: string) => {\n    if (noAdmins) {\n      onChatMemberSelect!(id, true);\n      onScreenSelect!(ManagementScreens.ChatNewAdminRights);\n    } else {\n      closeManagement();\n      openChat({ id });\n    }\n  });\n\n  const handleFilterChange = useLastCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setUserSearchQuery({ query: e.target.value });\n  });\n\n  const handleKeyDown = useKeyboardListNavigation(containerRef, isActive, (index) => {\n    if (viewportIds && viewportIds.length > 0) {\n      handleMemberClick(viewportIds[index === -1 ? 0 : index]);\n    }\n  }, '.ListItem-button', true);\n\n  const handleDeleteMembersModalClose = useLastCallback(() => {\n    setDeletingUserId(undefined);\n  });\n\n  const handleToggleParticipantsHidden = useLastCallback(() => {\n    toggleParticipantsHidden({ chatId, isEnabled: !areParticipantsHidden });\n  });\n\n  const handleNewMemberDialogOpen = useLastCallback(() => {\n    toggleManagement();\n    setNewChatMembersDialogState({ newChatMembersProgress: NewChatMembersProgress.InProgress });\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  function getMemberContextAction(memberId: string): MenuItemContextAction[] | undefined {\n    return memberId === currentUserId || !canDeleteMembers ? undefined : [{\n      title: lang('lng_context_remove_from_group'),\n      icon: 'stop',\n      handler: () => {\n        setDeletingUserId(memberId);\n      },\n    }];\n  }\n\n  function renderSearchField() {\n    return (\n      <div className=\"Management__filter\" dir={lang.isRtl ? 'rtl' : undefined}>\n        <InputText\n          ref={inputRef}\n          value={searchQuery}\n          onChange={handleFilterChange}\n          placeholder={lang('Search')}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"Management\">\n      {noAdmins && renderSearchField()}\n      <div className=\"custom-scroll\">\n        {canHideParticipants && (\n          <div className=\"section\">\n            <ListItem icon=\"group\" ripple onClick={handleToggleParticipantsHidden}>\n              <span>{lang('ChannelHideMembers')}</span>\n              <Switcher label={lang('ChannelHideMembers')} checked={areParticipantsHidden} />\n            </ListItem>\n            <p className=\"section-info\">\n              {lang(areParticipantsHidden ? 'GroupMembers.MembersHiddenOn' : 'GroupMembers.MembersHiddenOff')}\n            </p>\n          </div>\n        )}\n        <div className=\"section\">\n          {viewportIds?.length ? (\n            <InfiniteScroll\n              className=\"picker-list custom-scroll\"\n              items={displayedIds}\n              onLoadMore={getMore}\n              noScrollRestore={Boolean(searchQuery)}\n              ref={containerRef}\n              onKeyDown={handleKeyDown}\n            >\n              {viewportIds.map((id) => (\n                <ListItem\n                  key={id}\n                  className=\"chat-item-clickable scroll-item\"\n                  // eslint-disable-next-line react/jsx-no-bind\n                  onClick={() => handleMemberClick(id)}\n                  contextActions={getMemberContextAction(id)}\n                >\n                  <PrivateChatInfo userId={id} forceShowSelf withStory />\n                </ListItem>\n              ))}\n            </InfiniteScroll>\n          ) : !isSearching && viewportIds && !viewportIds.length ? (\n            <NothingFound\n              teactOrderKey={0}\n              key=\"nothing-found\"\n              text={isChannel ? 'No subscribers found' : 'No members found'}\n            />\n          ) : (\n            <Loading />\n          )}\n        </div>\n      </div>\n      {canAddMembers && (\n        <FloatingActionButton\n          isShown\n          onClick={handleNewMemberDialogOpen}\n          ariaLabel={lang('lng_channel_add_users')}\n        >\n          <Icon name=\"add-user-filled\" />\n        </FloatingActionButton>\n      )}\n      {canDeleteMembers && (\n        <DeleteMemberModal\n          isOpen={Boolean(deletingUserId)}\n          userId={deletingUserId}\n          onClose={handleDeleteMembersModalClose}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { chatId }): StateProps => {\n    const chat = selectChat(global, chatId);\n    const { statusesById: userStatusesById } = global.users;\n    const { members, adminMembersById, areParticipantsHidden } = selectChatFullInfo(global, chatId) || {};\n    const isChannel = chat && isChatChannel(chat);\n    const { userIds: localContactIds } = global.contactList || {};\n    const hiddenMembersMinCount = global.appConfig?.hiddenMembersMinCount;\n\n    const canDeleteMembers = chat && (chat.isCreator || getHasAdminRight(chat, 'banUsers'));\n\n    const canHideParticipants = canDeleteMembers && !isChatBasicGroup(chat) && chat.membersCount !== undefined\n    && hiddenMembersMinCount !== undefined && chat.membersCount >= hiddenMembersMinCount;\n\n    const canAddMembers = chat && ((getHasAdminRight(chat, 'inviteUsers')\n        || (!isChannel && !isUserRightBanned(chat, 'inviteUsers')))\n      || chat.isCreator\n    );\n\n    const {\n      query: searchQuery,\n      fetchingStatus,\n      globalUserIds,\n      localUserIds,\n    } = selectTabState(global).userSearch;\n\n    return {\n      areParticipantsHidden: Boolean(chat && areParticipantsHidden),\n      members,\n      canAddMembers,\n      adminMembersById,\n      userStatusesById,\n      isChannel,\n      localContactIds,\n      searchQuery,\n      isSearching: fetchingStatus,\n      globalUserIds,\n      localUserIds,\n      canDeleteMembers,\n      currentUserId: global.currentUserId,\n      canHideParticipants,\n    };\n  },\n)(ManageGroupMembers));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiChat, ApiChatBannedRights, ApiChatMember } from '../../../api/types';\nimport { ManagementScreens } from '../../../types';\n\nimport { isChatPublic } from '../../../global/helpers';\nimport { selectChat, selectChatFullInfo } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport stopEvent from '../../../util/stopEvent';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useOldLang from '../../../hooks/useOldLang';\nimport useManagePermissions from '../hooks/useManagePermissions';\n\nimport PrivateChatInfo from '../../common/PrivateChatInfo';\nimport Checkbox from '../../ui/Checkbox';\nimport FloatingActionButton from '../../ui/FloatingActionButton';\nimport ListItem from '../../ui/ListItem';\nimport Spinner from '../../ui/Spinner';\n\ntype OwnProps = {\n  chatId: string;\n  onScreenSelect: (screen: ManagementScreens) => void;\n  onChatMemberSelect: (memberId: string, isPromotedByCurrentUser?: boolean) => void;\n  onClose: NoneToVoidFunction;\n  isActive: boolean;\n};\n\ntype StateProps = {\n  chat?: ApiChat;\n  currentUserId?: string;\n  hasLinkedChat?: boolean;\n  removedUsersCount: number;\n  members?: ApiChatMember[];\n};\n\nconst ITEM_HEIGHT = 24 + 32;\nconst BEFORE_ITEMS_COUNT = 2;\nconst ITEMS_COUNT = 9;\n\nfunction getLangKeyForBannedRightKey(key: keyof ApiChatBannedRights) {\n  switch (key) {\n    case 'sendMessages':\n      return 'UserRestrictionsNoSend';\n    case 'sendMedia':\n      return 'UserRestrictionsNoSendMedia';\n    case 'sendStickers':\n      return 'UserRestrictionsNoSendStickers';\n    case 'embedLinks':\n      return 'UserRestrictionsNoEmbedLinks';\n    case 'sendPolls':\n      return 'UserRestrictionsNoSendPolls';\n    case 'changeInfo':\n      return 'UserRestrictionsNoChangeInfo';\n    case 'inviteUsers':\n      return 'UserRestrictionsInviteUsers';\n    case 'pinMessages':\n      return 'UserRestrictionsPinMessages';\n    case 'manageTopics':\n      return 'GroupPermission.NoManageTopics';\n    case 'sendPlain':\n      return 'UserRestrictionsNoSendText';\n    case 'sendDocs':\n      return 'UserRestrictionsNoSendDocs';\n    case 'sendRoundvideos':\n      return 'UserRestrictionsNoSendRound';\n    case 'sendVoices':\n      return 'UserRestrictionsNoSendVoice';\n    case 'sendAudios':\n      return 'UserRestrictionsNoSendMusic';\n    case 'sendVideos':\n      return 'UserRestrictionsNoSendVideos';\n    case 'sendPhotos':\n      return 'UserRestrictionsNoSendPhotos';\n    default:\n      return undefined;\n  }\n}\n\nconst ManageGroupPermissions: FC<OwnProps & StateProps> = ({\n  onScreenSelect,\n  onChatMemberSelect,\n  chat,\n  currentUserId,\n  hasLinkedChat,\n  removedUsersCount,\n  members,\n  onClose,\n  isActive,\n}) => {\n  const { updateChatDefaultBannedRights, showNotification } = getActions();\n\n  const {\n    permissions, havePermissionChanged, isLoading, handlePermissionChange, setIsLoading,\n  } = useManagePermissions(chat?.defaultBannedRights);\n  const lang = useOldLang();\n  const { isForum } = chat || {};\n  const isPublic = useMemo(() => chat && isChatPublic(chat), [chat]);\n  const shouldDisablePermissionForPublicGroup = hasLinkedChat || isPublic;\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  const handleRemovedUsersClick = useCallback(() => {\n    onScreenSelect(ManagementScreens.GroupRemovedUsers);\n  }, [onScreenSelect]);\n\n  const handleAddExceptionClick = useCallback(() => {\n    onScreenSelect(ManagementScreens.GroupUserPermissionsCreate);\n  }, [onScreenSelect]);\n\n  const handleExceptionMemberClick = useCallback((member: ApiChatMember) => {\n    onChatMemberSelect(member.userId, member.promotedByUserId === currentUserId);\n    onScreenSelect(ManagementScreens.GroupUserPermissions);\n  }, [currentUserId, onChatMemberSelect, onScreenSelect]);\n\n  const [isMediaDropdownOpen, setIsMediaDropdownOpen] = useState(false);\n  const handleOpenMediaDropdown = useCallback((e: React.MouseEvent) => {\n    stopEvent(e);\n    setIsMediaDropdownOpen(!isMediaDropdownOpen);\n  }, [isMediaDropdownOpen]);\n\n  const handleDisabledClick = useCallback(() => {\n    showNotification({ message: lang('lng_rights_permission_unavailable') });\n  }, [lang, showNotification]);\n\n  const handleSavePermissions = useCallback(() => {\n    if (!chat) {\n      return;\n    }\n\n    setIsLoading(true);\n    updateChatDefaultBannedRights({ chatId: chat.id, bannedRights: permissions });\n  }, [chat, permissions, setIsLoading, updateChatDefaultBannedRights]);\n\n  const exceptionMembers = useMemo(() => {\n    if (!members) {\n      return [];\n    }\n\n    return members.filter(({ bannedRights }) => Boolean(bannedRights));\n  }, [members]);\n\n  const getMemberExceptions = useCallback((member: ApiChatMember) => {\n    const { bannedRights } = member;\n    if (!bannedRights || !chat) {\n      return undefined;\n    }\n\n    const { defaultBannedRights } = chat;\n\n    return Object.keys(bannedRights).reduce((result, k) => {\n      const key = k as keyof ApiChatBannedRights;\n      if (\n        !bannedRights[key]\n        || (defaultBannedRights?.[key])\n        || key === 'sendInline' || key === 'viewMessages' || key === 'sendGames'\n      ) {\n        return result;\n      }\n\n      const langKey = getLangKeyForBannedRightKey(key);\n\n      if (!langKey) {\n        return result;\n      }\n\n      const translatedString = lang(langKey);\n\n      return `${result}${!result.length ? translatedString : `, ${translatedString}`}`;\n    }, '');\n  }, [chat, lang]);\n\n  return (\n    <div\n      className=\"Management with-shifted-dropdown\"\n      style={`--shift-height: ${ITEMS_COUNT * ITEM_HEIGHT}px;`\n        + `--before-shift-height: ${BEFORE_ITEMS_COUNT * ITEM_HEIGHT}px;`}\n    >\n      <div className=\"custom-scroll\">\n        <div className=\"section without-bottom-shadow\">\n          <h3 className=\"section-heading\" dir=\"auto\">{lang('ChannelPermissionsHeader')}</h3>\n\n          <div className=\"ListItem with-checkbox\">\n            <Checkbox\n              name=\"sendPlain\"\n              checked={!permissions.sendPlain}\n              label={lang('UserRestrictionsSend')}\n              blocking\n              onChange={handlePermissionChange}\n            />\n          </div>\n          <div className=\"ListItem with-checkbox\">\n            <Checkbox\n              name=\"sendMedia\"\n              checked={!permissions.sendMedia}\n              label={lang('UserRestrictionsSendMedia')}\n              blocking\n              rightIcon={isMediaDropdownOpen ? 'up' : 'down'}\n              onChange={handlePermissionChange}\n              onClickLabel={handleOpenMediaDropdown}\n            />\n          </div>\n          <div className=\"DropdownListTrap\">\n            <div\n              className={buildClassName(\n                'DropdownList',\n                isMediaDropdownOpen && 'DropdownList--open',\n              )}\n            >\n              <div className=\"ListItem with-checkbox\">\n                <Checkbox\n                  name=\"sendPhotos\"\n                  checked={!permissions.sendPhotos}\n                  label={lang('UserRestrictionsSendPhotos')}\n                  blocking\n                  onChange={handlePermissionChange}\n                />\n              </div>\n\n              <div className=\"ListItem with-checkbox\">\n                <Checkbox\n                  name=\"sendVideos\"\n                  checked={!permissions.sendVideos}\n                  label={lang('UserRestrictionsSendVideos')}\n                  blocking\n                  onChange={handlePermissionChange}\n                />\n              </div>\n\n              <div className=\"ListItem with-checkbox\">\n                <Checkbox\n                  name=\"sendStickers\"\n                  checked={!permissions.sendStickers && !permissions.sendGifs}\n                  label={lang('UserRestrictionsSendStickers')}\n                  blocking\n                  onChange={handlePermissionChange}\n                />\n              </div>\n\n              <div className=\"ListItem with-checkbox\">\n                <Checkbox\n                  name=\"sendAudios\"\n                  checked={!permissions.sendAudios}\n                  label={lang('UserRestrictionsSendMusic')}\n                  blocking\n                  onChange={handlePermissionChange}\n                />\n              </div>\n\n              <div className=\"ListItem with-checkbox\">\n                <Checkbox\n                  name=\"sendDocs\"\n                  checked={!permissions.sendDocs}\n                  label={lang('UserRestrictionsSendFiles')}\n                  blocking\n                  onChange={handlePermissionChange}\n                />\n              </div>\n\n              <div className=\"ListItem with-checkbox\">\n                <Checkbox\n                  name=\"sendVoices\"\n                  checked={!permissions.sendVoices}\n                  label={lang('UserRestrictionsSendVoices')}\n                  blocking\n                  onChange={handlePermissionChange}\n                />\n              </div>\n\n              <div className=\"ListItem with-checkbox\">\n                <Checkbox\n                  name=\"sendRoundvideos\"\n                  checked={!permissions.sendRoundvideos}\n                  label={lang('UserRestrictionsSendRound')}\n                  blocking\n                  onChange={handlePermissionChange}\n                />\n              </div>\n\n              <div className=\"ListItem with-checkbox\">\n                <Checkbox\n                  name=\"embedLinks\"\n                  checked={!permissions.embedLinks}\n                  label={lang('UserRestrictionsEmbedLinks')}\n                  blocking\n                  onChange={handlePermissionChange}\n                />\n              </div>\n\n              <div className=\"ListItem with-checkbox\">\n                <Checkbox\n                  name=\"sendPolls\"\n                  checked={!permissions.sendPolls}\n                  label={lang('UserRestrictionsSendPolls')}\n                  blocking\n                  onChange={handlePermissionChange}\n                />\n              </div>\n            </div>\n          </div>\n\n          <div className={buildClassName('part', isMediaDropdownOpen && 'shifted')}>\n            <div className=\"ListItem with-checkbox\">\n              <Checkbox\n                name=\"inviteUsers\"\n                checked={!permissions.inviteUsers}\n                label={lang('UserRestrictionsInviteUsers')}\n                blocking\n                onChange={handlePermissionChange}\n              />\n            </div>\n            <div\n              className=\"ListItem with-checkbox\"\n              onClick={shouldDisablePermissionForPublicGroup ? handleDisabledClick : undefined}\n            >\n              <Checkbox\n                name=\"pinMessages\"\n                checked={!permissions.pinMessages}\n                label={lang('UserRestrictionsPinMessages')}\n                disabled={shouldDisablePermissionForPublicGroup}\n                blocking\n                onChange={handlePermissionChange}\n              />\n            </div>\n            <div\n              className=\"ListItem with-checkbox\"\n              onClick={shouldDisablePermissionForPublicGroup ? handleDisabledClick : undefined}\n            >\n              <Checkbox\n                name=\"changeInfo\"\n                checked={!permissions.changeInfo}\n                label={lang('UserRestrictionsChangeInfo')}\n                blocking\n                disabled={shouldDisablePermissionForPublicGroup}\n                onChange={handlePermissionChange}\n              />\n            </div>\n            {isForum && (\n              <div className=\"ListItem with-checkbox\">\n                <Checkbox\n                  name=\"manageTopics\"\n                  checked={!permissions.manageTopics}\n                  label={lang('CreateTopicsPermission')}\n                  blocking\n                  onChange={handlePermissionChange}\n                />\n              </div>\n            )}\n          </div>\n        </div>\n\n        <div\n          className={buildClassName(\n            'section',\n            isMediaDropdownOpen && 'shifted',\n          )}\n        >\n          <ListItem\n            icon=\"delete-user\"\n            multiline\n            narrow\n            onClick={handleRemovedUsersClick}\n          >\n            <span className=\"title\">{lang('ChannelBlockedUsers')}</span>\n            <span className=\"subtitle\">{removedUsersCount}</span>\n          </ListItem>\n        </div>\n\n        <div\n          className={buildClassName(\n            'section',\n            isMediaDropdownOpen && 'shifted',\n          )}\n        >\n          <h3 className=\"section-heading\" dir=\"auto\">{lang('PrivacyExceptions')}</h3>\n\n          <ListItem\n            icon=\"add-user\"\n            onClick={handleAddExceptionClick}\n          >\n            {lang('ChannelAddException')}\n          </ListItem>\n\n          {exceptionMembers.map((member) => (\n            <ListItem\n              key={member.userId}\n              className=\"chat-item-clickable exceptions-member\"\n              // eslint-disable-next-line react/jsx-no-bind\n              onClick={() => handleExceptionMemberClick(member)}\n            >\n              <PrivateChatInfo\n                userId={member.userId}\n                status={getMemberExceptions(member)}\n                forceShowSelf\n              />\n            </ListItem>\n          ))}\n        </div>\n      </div>\n\n      <FloatingActionButton\n        isShown={havePermissionChanged}\n        onClick={handleSavePermissions}\n        ariaLabel={lang('Save')}\n        disabled={isLoading}\n      >\n        {isLoading ? (\n          <Spinner color=\"white\" />\n        ) : (\n          <i className=\"icon icon-check\" />\n        )}\n      </FloatingActionButton>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { chatId }): StateProps => {\n    const chat = selectChat(global, chatId);\n    const fullInfo = selectChatFullInfo(global, chatId);\n    const hasLinkedChat = Boolean(fullInfo?.linkedChatId);\n\n    return {\n      chat,\n      currentUserId: global.currentUserId,\n      hasLinkedChat,\n      removedUsersCount: fullInfo?.kickedMembers?.length || 0,\n      members: fullInfo?.members,\n    };\n  },\n)(ManageGroupPermissions));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiChat, ApiChatBannedRights, ApiChatMember } from '../../../api/types';\nimport { ManagementScreens } from '../../../types';\n\nimport { selectChat, selectChatFullInfo } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport stopEvent from '../../../util/stopEvent';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useOldLang from '../../../hooks/useOldLang';\nimport useManagePermissions from '../hooks/useManagePermissions';\n\nimport PrivateChatInfo from '../../common/PrivateChatInfo';\nimport Checkbox from '../../ui/Checkbox';\nimport ConfirmDialog from '../../ui/ConfirmDialog';\nimport FloatingActionButton from '../../ui/FloatingActionButton';\nimport ListItem from '../../ui/ListItem';\nimport Spinner from '../../ui/Spinner';\n\ntype OwnProps = {\n  chatId: string;\n  selectedChatMemberId?: string;\n  isPromotedByCurrentUser?: boolean;\n  onScreenSelect: (screen: ManagementScreens) => void;\n  onClose: NoneToVoidFunction;\n  isActive: boolean;\n};\n\ntype StateProps = {\n  chat?: ApiChat;\n  hasFullInfo?: boolean;\n  members?: ApiChatMember[];\n  isFormFullyDisabled?: boolean;\n};\n\nconst ITEM_HEIGHT = 24 + 32;\nconst SHIFT_HEIGHT_MINUS = 1;\nconst BEFORE_ITEMS_COUNT = 2;\nconst BEFORE_USER_INFO_HEIGHT = 96;\nconst ITEMS_COUNT = 9;\n\nconst ManageGroupUserPermissions: FC<OwnProps & StateProps> = ({\n  chat,\n  selectedChatMemberId,\n  hasFullInfo,\n  members,\n  onScreenSelect,\n  isFormFullyDisabled,\n  onClose,\n  isActive,\n}) => {\n  const { updateChatMemberBannedRights } = getActions();\n\n  const selectedChatMember = useMemo(() => {\n    if (!members) {\n      return undefined;\n    }\n\n    return members.find(({ userId }) => userId === selectedChatMemberId);\n  }, [members, selectedChatMemberId]);\n\n  const {\n    permissions, havePermissionChanged, isLoading, handlePermissionChange, setIsLoading,\n  } = useManagePermissions(selectedChatMember?.bannedRights || chat?.defaultBannedRights);\n  const [isBanConfirmationDialogOpen, openBanConfirmationDialog, closeBanConfirmationDialog] = useFlag();\n  const lang = useOldLang();\n\n  const { isForum } = chat || {};\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  useEffect(() => {\n    if (hasFullInfo && selectedChatMemberId && !selectedChatMember) {\n      onScreenSelect(ManagementScreens.GroupPermissions);\n    }\n  }, [chat, hasFullInfo, onScreenSelect, selectedChatMember, selectedChatMemberId]);\n\n  const handleSavePermissions = useCallback(() => {\n    if (!chat || !selectedChatMemberId) {\n      return;\n    }\n\n    setIsLoading(true);\n    updateChatMemberBannedRights({\n      chatId: chat.id,\n      userId: selectedChatMemberId,\n      bannedRights: permissions,\n    });\n  }, [chat, selectedChatMemberId, setIsLoading, updateChatMemberBannedRights, permissions]);\n\n  const handleBanFromGroup = useCallback(() => {\n    if (!chat || !selectedChatMemberId) {\n      return;\n    }\n\n    updateChatMemberBannedRights({\n      chatId: chat.id,\n      userId: selectedChatMemberId,\n      bannedRights: {\n        viewMessages: true,\n      },\n    });\n  }, [chat, selectedChatMemberId, updateChatMemberBannedRights]);\n\n  const getControlIsDisabled = useCallback((key: Exclude<keyof ApiChatBannedRights, 'untilDate'>) => {\n    if (isFormFullyDisabled) {\n      return true;\n    }\n\n    if (!chat || !chat.defaultBannedRights) {\n      return false;\n    }\n\n    return chat.defaultBannedRights[key];\n  }, [chat, isFormFullyDisabled]);\n\n  const [isMediaDropdownOpen, setIsMediaDropdownOpen] = useState(false);\n  const handleOpenMediaDropdown = useCallback((e: React.MouseEvent) => {\n    stopEvent(e);\n    setIsMediaDropdownOpen(!isMediaDropdownOpen);\n  }, [isMediaDropdownOpen]);\n\n  if (!selectedChatMember) {\n    return undefined;\n  }\n\n  return (\n    <div\n      className=\"Management with-shifted-dropdown\"\n      style={`--shift-height: ${ITEMS_COUNT * ITEM_HEIGHT - SHIFT_HEIGHT_MINUS}px;`\n           + `--before-shift-height: ${BEFORE_ITEMS_COUNT * ITEM_HEIGHT + BEFORE_USER_INFO_HEIGHT}px;`}\n    >\n      <div className=\"custom-scroll\">\n        <div className=\"section without-bottom-shadow\">\n          <ListItem inactive className=\"chat-item-clickable\">\n            <PrivateChatInfo userId={selectedChatMember.userId} forceShowSelf />\n          </ListItem>\n\n          <h3 className=\"section-heading mt-4\" dir=\"auto\">{lang('UserRestrictionsCanDo')}</h3>\n\n          <div className=\"ListItem\">\n            <Checkbox\n              name=\"sendPlain\"\n              checked={!permissions.sendPlain}\n              label={lang('UserRestrictionsSend')}\n              blocking\n              disabled={getControlIsDisabled('sendPlain')}\n              onChange={handlePermissionChange}\n            />\n          </div>\n\n          <div className=\"ListItem\">\n            <Checkbox\n              name=\"sendMedia\"\n              checked={!permissions.sendMedia}\n              label={lang('UserRestrictionsSendMedia')}\n              blocking\n              rightIcon={isMediaDropdownOpen ? 'up' : 'down'}\n              disabled={getControlIsDisabled('sendMedia')}\n              onChange={handlePermissionChange}\n              onClickLabel={handleOpenMediaDropdown}\n            />\n          </div>\n\n          <div className=\"DropdownListTrap\">\n            <div\n              className={buildClassName(\n                'DropdownList',\n                isMediaDropdownOpen && 'DropdownList--open',\n              )}\n            >\n              <div className=\"ListItem\">\n                <Checkbox\n                  name=\"sendPhotos\"\n                  checked={!permissions.sendPhotos}\n                  label={lang('UserRestrictionsSendPhotos')}\n                  blocking\n                  disabled={getControlIsDisabled('sendPhotos')}\n                  onChange={handlePermissionChange}\n                />\n              </div>\n\n              <div className=\"ListItem\">\n                <Checkbox\n                  name=\"sendVideos\"\n                  checked={!permissions.sendVideos}\n                  label={lang('UserRestrictionsSendVideos')}\n                  blocking\n                  disabled={getControlIsDisabled('sendVideos')}\n                  onChange={handlePermissionChange}\n                />\n              </div>\n\n              <div className=\"ListItem\">\n                <Checkbox\n                  name=\"sendStickers\"\n                  checked={!permissions.sendStickers && !permissions.sendGifs}\n                  label={lang('UserRestrictionsSendStickers')}\n                  blocking\n                  disabled={getControlIsDisabled('sendStickers')}\n                  onChange={handlePermissionChange}\n                />\n              </div>\n\n              <div className=\"ListItem\">\n                <Checkbox\n                  name=\"sendAudios\"\n                  checked={!permissions.sendAudios}\n                  label={lang('UserRestrictionsSendMusic')}\n                  blocking\n                  disabled={getControlIsDisabled('sendAudios')}\n                  onChange={handlePermissionChange}\n                />\n              </div>\n\n              <div className=\"ListItem\">\n                <Checkbox\n                  name=\"sendDocs\"\n                  checked={!permissions.sendDocs}\n                  label={lang('UserRestrictionsSendFiles')}\n                  blocking\n                  disabled={getControlIsDisabled('sendDocs')}\n                  onChange={handlePermissionChange}\n                />\n              </div>\n\n              <div className=\"ListItem\">\n                <Checkbox\n                  name=\"sendVoices\"\n                  checked={!permissions.sendVoices}\n                  label={lang('UserRestrictionsSendVoices')}\n                  blocking\n                  disabled={getControlIsDisabled('sendVoices')}\n                  onChange={handlePermissionChange}\n                />\n              </div>\n\n              <div className=\"ListItem\">\n                <Checkbox\n                  name=\"sendRoundvideos\"\n                  checked={!permissions.sendRoundvideos}\n                  label={lang('UserRestrictionsSendRound')}\n                  blocking\n                  disabled={getControlIsDisabled('sendRoundvideos')}\n                  onChange={handlePermissionChange}\n                />\n              </div>\n\n              <div className=\"ListItem\">\n                <Checkbox\n                  name=\"embedLinks\"\n                  checked={!permissions.embedLinks}\n                  label={lang('UserRestrictionsEmbedLinks')}\n                  blocking\n                  disabled={getControlIsDisabled('embedLinks')}\n                  onChange={handlePermissionChange}\n                />\n              </div>\n\n              <div className=\"ListItem\">\n                <Checkbox\n                  name=\"sendPolls\"\n                  checked={!permissions.sendPolls}\n                  label={lang('UserRestrictionsSendPolls')}\n                  blocking\n                  disabled={getControlIsDisabled('sendPolls')}\n                  onChange={handlePermissionChange}\n                />\n              </div>\n            </div>\n          </div>\n\n          <div className={buildClassName('part', isMediaDropdownOpen && 'shifted')}>\n\n            <div className=\"ListItem\">\n              <Checkbox\n                name=\"inviteUsers\"\n                checked={!permissions.inviteUsers}\n                label={lang('UserRestrictionsInviteUsers')}\n                blocking\n                disabled={getControlIsDisabled('inviteUsers')}\n                onChange={handlePermissionChange}\n              />\n            </div>\n            <div className=\"ListItem\">\n              <Checkbox\n                name=\"pinMessages\"\n                checked={!permissions.pinMessages}\n                label={lang('UserRestrictionsPinMessages')}\n                blocking\n                disabled={getControlIsDisabled('pinMessages')}\n                onChange={handlePermissionChange}\n              />\n            </div>\n            <div className=\"ListItem\">\n              <Checkbox\n                name=\"changeInfo\"\n                checked={!permissions.changeInfo}\n                label={lang('UserRestrictionsChangeInfo')}\n                blocking\n                disabled={getControlIsDisabled('changeInfo')}\n                onChange={handlePermissionChange}\n              />\n            </div>\n            {isForum && (\n              <div className=\"ListItem\">\n                <Checkbox\n                  name=\"manageTopics\"\n                  checked={!permissions.manageTopics}\n                  label={lang('CreateTopicsPermission')}\n                  blocking\n                  disabled={getControlIsDisabled('manageTopics')}\n                  onChange={handlePermissionChange}\n                />\n              </div>\n            )}\n          </div>\n        </div>\n\n        {!isFormFullyDisabled && (\n          <div\n            className={buildClassName(\n              'section',\n              isMediaDropdownOpen && 'shifted',\n            )}\n          >\n            <ListItem icon=\"delete-user\" ripple destructive onClick={openBanConfirmationDialog}>\n              {lang('UserRestrictionsBlock')}\n            </ListItem>\n          </div>\n        )}\n      </div>\n\n      <FloatingActionButton\n        isShown={havePermissionChanged}\n        onClick={handleSavePermissions}\n        ariaLabel={lang('Save')}\n        disabled={isLoading}\n      >\n        {isLoading ? (\n          <Spinner color=\"white\" />\n        ) : (\n          <i className=\"icon icon-check\" />\n        )}\n      </FloatingActionButton>\n\n      <ConfirmDialog\n        isOpen={isBanConfirmationDialogOpen}\n        onClose={closeBanConfirmationDialog}\n        text=\"Are you sure you want to ban and remove this user from the group?\"\n        confirmLabel=\"Remove\"\n        confirmHandler={handleBanFromGroup}\n        confirmIsDestructive\n      />\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { chatId, isPromotedByCurrentUser }): StateProps => {\n    const chat = selectChat(global, chatId)!;\n    const fullInfo = selectChatFullInfo(global, chatId);\n    const isFormFullyDisabled = !(chat.isCreator || isPromotedByCurrentUser);\n\n    return {\n      chat,\n      isFormFullyDisabled,\n      hasFullInfo: Boolean(fullInfo),\n      members: fullInfo?.members,\n    };\n  },\n  (global, { chatId }) => {\n    return Boolean(selectChat(global, chatId));\n  },\n)(ManageGroupUserPermissions));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useCallback, useMemo } from '../../../lib/teact/teact';\nimport { withGlobal } from '../../../global';\n\nimport type { ApiChatMember, ApiUser, ApiUserStatus } from '../../../api/types';\nimport { ManagementScreens } from '../../../types';\n\nimport { isChatChannel, sortUserIds } from '../../../global/helpers';\nimport { selectChat, selectChatFullInfo } from '../../../global/selectors';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\n\nimport NothingFound from '../../common/NothingFound';\nimport PrivateChatInfo from '../../common/PrivateChatInfo';\nimport ListItem from '../../ui/ListItem';\n\ntype OwnProps = {\n  chatId: string;\n  onScreenSelect: (screen: ManagementScreens) => void;\n  onChatMemberSelect: (memberId: string) => void;\n  onClose: NoneToVoidFunction;\n  isActive: boolean;\n};\n\ntype StateProps = {\n  usersById: Record<string, ApiUser>;\n  userStatusesById: Record<string, ApiUserStatus>;\n  members?: ApiChatMember[];\n  isChannel?: boolean;\n};\n\nconst ManageGroupUserPermissionsCreate: FC<OwnProps & StateProps> = ({\n  usersById,\n  userStatusesById,\n  members,\n  isChannel,\n  onScreenSelect,\n  onChatMemberSelect,\n  onClose,\n  isActive,\n}) => {\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  const memberIds = useMemo(() => {\n    if (!members || !usersById) {\n      return undefined;\n    }\n\n    return sortUserIds(\n      members.filter((member) => !member.isOwner).map(({ userId }) => userId),\n      usersById,\n      userStatusesById,\n    );\n  }, [members, usersById, userStatusesById]);\n\n  const handleExceptionMemberClick = useCallback((memberId: string) => {\n    onChatMemberSelect(memberId);\n    onScreenSelect(ManagementScreens.GroupUserPermissions);\n  }, [onChatMemberSelect, onScreenSelect]);\n\n  return (\n    <div className=\"Management\">\n      <div className=\"custom-scroll\">\n        <div className=\"section\" teactFastList>\n          {memberIds ? (\n            memberIds.map((id, i) => (\n              <ListItem\n                key={id}\n                teactOrderKey={i}\n                className=\"chat-item-clickable scroll-item\"\n                // eslint-disable-next-line react/jsx-no-bind\n                onClick={() => handleExceptionMemberClick(id)}\n              >\n                <PrivateChatInfo userId={id} forceShowSelf />\n              </ListItem>\n            ))\n          ) : (\n            <NothingFound\n              teactOrderKey={0}\n              key=\"nothing-found\"\n              text={isChannel ? 'No subscribers found' : 'No members found'}\n            />\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { chatId }): StateProps => {\n    const chat = selectChat(global, chatId);\n    const { byId: usersById, statusesById: userStatusesById } = global.users;\n    const members = selectChatFullInfo(global, chatId)?.members;\n    const isChannel = chat && isChatChannel(chat);\n\n    return {\n      members,\n      usersById,\n      userStatusesById,\n      isChannel,\n    };\n  },\n)(ManageGroupUserPermissionsCreate));\n","import type { ChangeEvent } from 'react';\nimport type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useCallback, useState } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiExportedInvite } from '../../../api/types';\nimport { ManagementScreens } from '../../../types';\n\nimport { selectTabState } from '../../../global/selectors';\nimport { formatFullDate, formatTime } from '../../../util/dates/dateFormat';\nimport { getServerTime } from '../../../util/serverTime';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useOldLang from '../../../hooks/useOldLang';\nimport useSyncEffect from '../../../hooks/useSyncEffect';\n\nimport CalendarModal from '../../common/CalendarModal';\nimport Button from '../../ui/Button';\nimport Checkbox from '../../ui/Checkbox';\nimport FloatingActionButton from '../../ui/FloatingActionButton';\nimport InputText from '../../ui/InputText';\nimport RadioGroup from '../../ui/RadioGroup';\n\nconst DEFAULT_USAGE_LIMITS = [1, 10, 100];\nconst DEFAULT_EXPIRE_DATE = {\n  hour: 3600000,\n  day: 86400000,\n  week: 604800000,\n};\nconst DEFAULT_CUSTOM_EXPIRE_DATE = DEFAULT_EXPIRE_DATE.hour;\n\ntype OwnProps = {\n  chatId: string;\n  onClose: NoneToVoidFunction;\n  onScreenSelect: (screen: ManagementScreens) => void;\n  isActive: boolean;\n};\n\ntype StateProps = {\n  editingInvite?: ApiExportedInvite;\n};\n\nconst ManageInvite: FC<OwnProps & StateProps> = ({\n  chatId,\n  editingInvite,\n  isActive,\n  onClose,\n  onScreenSelect,\n}) => {\n  const { editExportedChatInvite, exportChatInvite } = getActions();\n\n  const lang = useOldLang();\n  const [isCalendarOpened, openCalendar, closeCalendar] = useFlag();\n  const [isRequestNeeded, setIsRequestNeeded] = useState(false);\n  const [title, setTitle] = useState('');\n  const [customExpireDate, setCustomExpireDate] = useState<number>(Date.now() + DEFAULT_CUSTOM_EXPIRE_DATE);\n  const [selectedExpireOption, setSelectedExpireOption] = useState('unlimited');\n  const [customUsageLimit, setCustomUsageLimit] = useState<number | undefined>(10);\n  const [selectedUsageOption, setSelectedUsageOption] = useState('0');\n  const [isSubmitBlocked, setIsSubmitBlocked] = useState(false);\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  useSyncEffect(([oldEditingInvite]) => {\n    if (oldEditingInvite === editingInvite) return;\n    if (!editingInvite) {\n      setTitle('');\n      setSelectedExpireOption('unlimited');\n      setSelectedUsageOption('0');\n      setCustomExpireDate(getServerTime() * 1000 + DEFAULT_CUSTOM_EXPIRE_DATE);\n      setCustomUsageLimit(10);\n      setIsRequestNeeded(false);\n    } else {\n      const {\n        title: editingTitle, usageLimit, expireDate, isRequestNeeded: editingIsRequestNeeded,\n      } = editingInvite;\n      if (editingTitle) setTitle(editingTitle);\n      if (usageLimit) {\n        setSelectedUsageOption(DEFAULT_USAGE_LIMITS.includes(usageLimit) ? usageLimit.toString() : 'custom');\n        setCustomUsageLimit(usageLimit);\n      }\n      if (expireDate) {\n        const minSafeDate = getServerTime() + DEFAULT_CUSTOM_EXPIRE_DATE;\n        setSelectedExpireOption('custom');\n        setCustomExpireDate(Math.max(expireDate, minSafeDate) * 1000);\n      }\n      if (editingIsRequestNeeded) {\n        setIsRequestNeeded(true);\n      }\n    }\n  }, [editingInvite]);\n\n  const handleIsRequestChange = useCallback((e: ChangeEvent<HTMLInputElement>) => {\n    setIsRequestNeeded(e.target.checked);\n  }, []);\n\n  const handleTitleChange = useCallback((e: ChangeEvent<HTMLInputElement>) => {\n    setTitle(e.target.value);\n  }, []);\n\n  const handleCustomUsageLimitChange = useCallback((e: ChangeEvent<HTMLInputElement>) => {\n    setCustomUsageLimit(Number.parseInt(e.target.value, 10));\n  }, []);\n\n  const handleExpireDateChange = useCallback((date: Date) => {\n    setCustomExpireDate(date.getTime());\n    closeCalendar();\n  }, [closeCalendar]);\n\n  const handleSaveClick = useCallback(() => {\n    setIsSubmitBlocked(true);\n    const usageLimit = selectedUsageOption === 'custom' ? customUsageLimit : Number(selectedUsageOption);\n    let expireDate;\n    switch (selectedExpireOption) {\n      case 'custom':\n        expireDate = getServerTime() + (customExpireDate - Date.now()) / 1000;\n        break;\n      case 'hour':\n      case 'day':\n      case 'week':\n        expireDate = getServerTime() + DEFAULT_EXPIRE_DATE[selectedExpireOption] / 1000;\n        break;\n      case 'unlimited':\n        expireDate = 0;\n        break;\n      default:\n        expireDate = undefined;\n    }\n\n    if (editingInvite) {\n      editExportedChatInvite({\n        link: editingInvite.link,\n        chatId,\n        title,\n        isRequestNeeded,\n        expireDate,\n        usageLimit,\n      });\n    } else {\n      exportChatInvite({\n        chatId,\n        title,\n        isRequestNeeded,\n        expireDate,\n        usageLimit,\n      });\n    }\n    onScreenSelect(ManagementScreens.Invites);\n  }, [\n    chatId, customExpireDate, customUsageLimit, editExportedChatInvite, editingInvite,\n    exportChatInvite, isRequestNeeded, selectedExpireOption, selectedUsageOption, title, onScreenSelect,\n  ]);\n\n  return (\n    <div className=\"Management ManageInvite\">\n      <div className=\"custom-scroll\">\n        <div className=\"section\">\n          <Checkbox\n            label={lang('ApproveNewMembers')}\n            subLabel={lang('ApproveNewMembersDescription')}\n            checked={isRequestNeeded}\n            onChange={handleIsRequestChange}\n          />\n        </div>\n        <div className=\"section\">\n          <InputText\n            className=\"link-name\"\n            placeholder={lang('LinkNameHint')}\n            value={title}\n            onChange={handleTitleChange}\n          />\n          <p className=\"text-muted hint\">{lang('LinkNameHelp')}</p>\n        </div>\n        <div className=\"section\">\n          <div className=\"section-header\">{lang('LimitByPeriod')}</div>\n          <RadioGroup\n            name=\"expireOptions\"\n            options={[\n              {\n                value: 'hour',\n                label: lang('Hours', 1),\n              },\n              {\n                value: 'day',\n                label: lang('Days', 1),\n              },\n              {\n                value: 'week',\n                label: lang('Weeks', 1),\n              },\n              {\n                value: 'unlimited',\n                label: lang('NoLimit'),\n              },\n              {\n                value: 'custom',\n                label: lang('lng_group_invite_expire_custom'),\n              },\n            ]}\n            onChange={setSelectedExpireOption}\n            selected={selectedExpireOption}\n          />\n          {selectedExpireOption === 'custom' && (\n            <Button className=\"expire-limit\" isText onClick={openCalendar}>\n              {formatFullDate(lang, customExpireDate)} {formatTime(lang, customExpireDate)}\n            </Button>\n          )}\n          <p className=\"text-muted hint\">{lang('TimeLimitHelp')}</p>\n        </div>\n        {!isRequestNeeded && (\n          <div className=\"section\">\n            <div className=\"section-header\">{lang('LimitNumberOfUses')}</div>\n            <RadioGroup\n              name=\"usageOptions\"\n              options={[\n                ...DEFAULT_USAGE_LIMITS.map((n) => ({ value: n.toString(), label: n })),\n                {\n                  value: '0',\n                  label: lang('NoLimit'),\n                },\n                {\n                  value: 'custom',\n                  label: lang('lng_group_invite_usage_custom'),\n                },\n              ]}\n              onChange={setSelectedUsageOption}\n              selected={selectedUsageOption}\n            />\n            {selectedUsageOption === 'custom' && (\n              <input\n                className=\"form-control usage-limit\"\n                type=\"number\"\n                min=\"1\"\n                max=\"99999\"\n                value={customUsageLimit}\n                onChange={handleCustomUsageLimitChange}\n              />\n            )}\n            <p className=\"text-muted hint\">{lang('UsesLimitHelp')}</p>\n          </div>\n        )}\n        <FloatingActionButton\n          isShown\n          onClick={handleSaveClick}\n          disabled={isSubmitBlocked}\n          ariaLabel={editingInvite ? lang('SaveLink') : lang('CreateLink')}\n        >\n          <i className=\"icon icon-check\" />\n        </FloatingActionButton>\n      </div>\n      <CalendarModal\n        isOpen={isCalendarOpened}\n        isFutureMode\n        withTimePicker\n        onClose={closeCalendar}\n        onSubmit={handleExpireDateChange}\n        selectedAt={customExpireDate}\n        submitButtonLabel={lang('Save')}\n      />\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { chatId }): StateProps => {\n    const { editingInvite } = selectTabState(global).management.byChatId[chatId] || {};\n\n    return {\n      editingInvite,\n    };\n  },\n)(ManageInvite));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useCallback, useEffect } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiChatInviteImporter, ApiExportedInvite, ApiUser } from '../../../api/types';\n\nimport { isChatChannel } from '../../../global/helpers';\nimport { selectChat, selectTabState } from '../../../global/selectors';\nimport { copyTextToClipboard } from '../../../util/clipboard';\nimport { formatFullDate, formatMediaDateTime, formatTime } from '../../../util/dates/dateFormat';\nimport { getServerTime } from '../../../util/serverTime';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport PrivateChatInfo from '../../common/PrivateChatInfo';\nimport Button from '../../ui/Button';\nimport ListItem from '../../ui/ListItem';\nimport Spinner from '../../ui/Spinner';\n\ntype OwnProps = {\n  chatId: string;\n  onClose: NoneToVoidFunction;\n  isActive: boolean;\n};\n\ntype StateProps = {\n  invite?: ApiExportedInvite;\n  importers?: ApiChatInviteImporter[];\n  requesters?: ApiChatInviteImporter[];\n  admin?: ApiUser;\n  isChannel?: boolean;\n};\n\nconst BULLET = '\\u2022';\n\nconst ManageInviteInfo: FC<OwnProps & StateProps> = ({\n  chatId,\n  invite,\n  importers,\n  requesters,\n  isChannel,\n  isActive,\n  onClose,\n}) => {\n  const {\n    showNotification,\n    loadChatInviteImporters,\n    loadChatInviteRequesters,\n    openChat,\n  } = getActions();\n\n  const lang = useOldLang();\n  const {\n    usage = 0, usageLimit, link, adminId,\n  } = invite || {};\n  const expireDate = invite?.expireDate && (invite.expireDate - getServerTime()) * 1000 + Date.now();\n  const isExpired = ((invite?.expireDate || 0) - getServerTime()) < 0;\n\n  useEffect(() => {\n    if (link) {\n      loadChatInviteImporters({ chatId, link });\n      loadChatInviteRequesters({ chatId, link });\n    }\n  }, [chatId, link, loadChatInviteImporters, loadChatInviteRequesters]);\n\n  const handleCopyClicked = useCallback(() => {\n    copyTextToClipboard(invite!.link);\n    showNotification({\n      message: lang('LinkCopied'),\n    });\n  }, [invite, lang, showNotification]);\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  const renderImporters = () => {\n    if (!importers?.length && requesters?.length) return undefined;\n    if (!importers) return <Spinner />;\n    return (\n      <div className=\"section\">\n        <p>{importers.length ? lang('PeopleJoined', usage) : lang('NoOneJoined')}</p>\n        <p className=\"text-muted\">\n          {!importers.length && (\n            usageLimit ? lang('PeopleCanJoinViaLinkCount', usageLimit - usage) : lang('NoOneJoinedYet')\n          )}\n          {importers.map((importer) => {\n            const joinTime = formatMediaDateTime(lang, importer.date * 1000, true);\n            const status = importer.isFromChatList ? `${joinTime} ${BULLET} ${lang('JoinedViaFolder')}` : joinTime;\n            return (\n              <ListItem\n                className=\"chat-item-clickable scroll-item small-icon\"\n                // eslint-disable-next-line react/jsx-no-bind\n                onClick={() => openChat({ id: importer.userId })}\n              >\n                <PrivateChatInfo\n                  userId={importer.userId}\n                  status={status}\n                  forceShowSelf\n                />\n              </ListItem>\n            );\n          })}\n        </p>\n      </div>\n    );\n  };\n\n  const renderRequesters = () => {\n    if (invite?.isRevoked) return undefined;\n    if (!requesters && importers) return <Spinner />;\n    if (!requesters?.length) return undefined;\n    return (\n      <div className=\"section\">\n        <p>{isChannel ? lang('SubscribeRequests') : lang('MemberRequests')}</p>\n        <p className=\"text-muted\">\n          {requesters.map((requester) => (\n            <ListItem\n              className=\"chat-item-clickable scroll-item small-icon\"\n              // eslint-disable-next-line react/jsx-no-bind\n              onClick={() => openChat({ id: requester.userId })}\n            >\n              <PrivateChatInfo\n                userId={requester.userId}\n                status={formatMediaDateTime(lang, requester.date * 1000, true)}\n                forceShowSelf\n              />\n            </ListItem>\n          ))}\n        </p>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"Management ManageInviteInfo\">\n      <div className=\"custom-scroll\">\n        {!invite && (\n          <p className=\"text-muted\">{lang('Loading')}</p>\n        )}\n        {invite && (\n          <>\n            <div className=\"section\">\n              <h3 className=\"link-title\">{invite.title || invite.link}</h3>\n              <input\n                className=\"form-control\"\n                value={invite.link}\n                readOnly\n                onClick={handleCopyClicked}\n              />\n              <Button className=\"copy-link\" onClick={handleCopyClicked}>{lang('CopyLink')}</Button>\n              {Boolean(expireDate) && (\n                <p className=\"text-muted\">\n                  {isExpired\n                    ? lang('ExpiredLink')\n                    : lang('LinkExpiresIn', `${formatFullDate(lang, expireDate)} ${formatTime(lang, expireDate)}`)}\n                </p>\n              )}\n            </div>\n            {adminId && (\n              <div className=\"section\">\n                <p>{lang('LinkCreatedeBy')}</p>\n                <ListItem\n                  className=\"chat-item-clickable scroll-item small-icon\"\n                  // eslint-disable-next-line react/jsx-no-bind\n                  onClick={() => openChat({ id: adminId })}\n                >\n                  <PrivateChatInfo\n                    userId={adminId}\n                    status={formatMediaDateTime(lang, invite.date * 1000, true)}\n                    forceShowSelf\n                  />\n                </ListItem>\n              </div>\n            )}\n            {renderImporters()}\n            {renderRequesters()}\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { chatId }): StateProps => {\n    const { inviteInfo } = selectTabState(global).management.byChatId[chatId] || {};\n    const { invite, importers, requesters } = inviteInfo || {};\n    const chat = selectChat(global, chatId);\n    const isChannel = chat && isChatChannel(chat);\n\n    return {\n      invite,\n      importers,\n      requesters,\n      isChannel,\n    };\n  },\n)(ManageInviteInfo));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiChat, ApiExportedInvite } from '../../../api/types';\nimport { ManagementScreens } from '../../../types';\n\nimport { STICKER_SIZE_INVITES, TME_LINK_PREFIX } from '../../../config';\nimport { getMainUsername, isChatChannel } from '../../../global/helpers';\nimport { selectChat, selectTabState } from '../../../global/selectors';\nimport { copyTextToClipboard } from '../../../util/clipboard';\nimport { formatCountdown, MILLISECONDS_IN_DAY } from '../../../util/dates/dateFormat';\nimport { getServerTime } from '../../../util/serverTime';\nimport { LOCAL_TGS_URLS } from '../../common/helpers/animatedAssets';\n\nimport useInterval from '../../../hooks/schedulers/useInterval';\nimport useFlag from '../../../hooks/useFlag';\nimport useForceUpdate from '../../../hooks/useForceUpdate';\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport AnimatedIcon from '../../common/AnimatedIcon';\nimport LinkField from '../../common/LinkField';\nimport NothingFound from '../../common/NothingFound';\nimport Button from '../../ui/Button';\nimport ConfirmDialog from '../../ui/ConfirmDialog';\nimport ListItem, { type MenuItemContextAction } from '../../ui/ListItem';\n\ntype OwnProps = {\n  chatId: string;\n  onClose: NoneToVoidFunction;\n  onScreenSelect: (screen: ManagementScreens) => void;\n  isActive: boolean;\n};\n\ntype StateProps = {\n  chat?: ApiChat;\n  isChannel?: boolean;\n  exportedInvites?: ApiExportedInvite[];\n  revokedExportedInvites?: ApiExportedInvite[];\n};\n\nconst BULLET = '\\u2022';\n\nfunction inviteComparator(i1: ApiExportedInvite, i2: ApiExportedInvite) {\n  const { isPermanent: i1IsPermanent, usage: i1Usage = 0, date: i1Date } = i1;\n  const { isPermanent: i2IsPermanent, usage: i2Usage = 0, date: i2Date } = i2;\n  if (i1IsPermanent || i2IsPermanent) return Number(i1IsPermanent) - Number(i2IsPermanent);\n  if (i1Usage || i2Usage) return i2Usage - i1Usage;\n  return i2Date - i1Date;\n}\n\nconst ManageInvites: FC<OwnProps & StateProps> = ({\n  chatId,\n  chat,\n  exportedInvites,\n  revokedExportedInvites,\n  isActive,\n  isChannel,\n  onClose,\n  onScreenSelect,\n}) => {\n  const {\n    setEditingExportedInvite,\n    showNotification,\n    editExportedChatInvite,\n    deleteExportedChatInvite,\n    deleteRevokedExportedChatInvites,\n    setOpenedInviteInfo,\n  } = getActions();\n\n  const lang = useOldLang();\n\n  const [isDeleteRevokeAllDialogOpen, openDeleteRevokeAllDialog, closeDeleteRevokeAllDialog] = useFlag();\n  const [isRevokeDialogOpen, openRevokeDialog, closeRevokeDialog] = useFlag();\n  const [revokingInvite, setRevokingInvite] = useState<ApiExportedInvite | undefined>();\n  const [isDeleteDialogOpen, openDeleteDialog, closeDeleteDialog] = useFlag();\n  const [deletingInvite, setDeletingInvite] = useState<ApiExportedInvite | undefined>();\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  const hasDetailedCountdown = useMemo(() => {\n    if (!exportedInvites) return undefined;\n    return exportedInvites\n      .some(({ expireDate }) => (\n        expireDate && (expireDate - getServerTime() < MILLISECONDS_IN_DAY / 1000)\n      ));\n  }, [exportedInvites]);\n  const forceUpdate = useForceUpdate();\n  useInterval(forceUpdate, hasDetailedCountdown ? 1000 : undefined);\n\n  const chatMainUsername = useMemo(() => chat && getMainUsername(chat), [chat]);\n  const primaryInvite = exportedInvites?.find(({ isPermanent }) => isPermanent);\n  const primaryInviteLink = chatMainUsername ? `${TME_LINK_PREFIX}${chatMainUsername}` : primaryInvite?.link;\n  const temporalInvites = useMemo(() => {\n    const invites = chat?.usernames ? exportedInvites : exportedInvites?.filter(({ isPermanent }) => !isPermanent);\n    return invites?.sort(inviteComparator);\n  }, [chat?.usernames, exportedInvites]);\n\n  const editInvite = (invite: ApiExportedInvite) => {\n    setEditingExportedInvite({ chatId, invite });\n    onScreenSelect(ManagementScreens.EditInvite);\n  };\n\n  const revokeInvite = useCallback((invite: ApiExportedInvite) => {\n    const {\n      link, title, isRequestNeeded, expireDate, usageLimit,\n    } = invite;\n    editExportedChatInvite({\n      chatId,\n      link,\n      title,\n      isRequestNeeded,\n      expireDate,\n      usageLimit,\n      isRevoked: true,\n    });\n  }, [chatId, editExportedChatInvite]);\n\n  const askToRevoke = useCallback((invite: ApiExportedInvite) => {\n    setRevokingInvite(invite);\n    openRevokeDialog();\n  }, [openRevokeDialog]);\n\n  const handleRevoke = useCallback(() => {\n    if (!revokingInvite) return;\n    revokeInvite(revokingInvite);\n    setRevokingInvite(undefined);\n    closeRevokeDialog();\n  }, [closeRevokeDialog, revokeInvite, revokingInvite]);\n\n  const handleCreateNewClick = useCallback(() => {\n    onScreenSelect(ManagementScreens.EditInvite);\n  }, [onScreenSelect]);\n\n  const handlePrimaryRevoke = useCallback(() => {\n    if (primaryInvite) {\n      askToRevoke(primaryInvite);\n    }\n  }, [askToRevoke, primaryInvite]);\n\n  const handleDeleteAllRevoked = useCallback(() => {\n    deleteRevokedExportedChatInvites({ chatId });\n    closeDeleteRevokeAllDialog();\n  }, [chatId, closeDeleteRevokeAllDialog, deleteRevokedExportedChatInvites]);\n\n  const showInviteInfo = useCallback((invite: ApiExportedInvite) => {\n    setOpenedInviteInfo({ chatId, invite });\n    onScreenSelect(ManagementScreens.InviteInfo);\n  }, [chatId, onScreenSelect, setOpenedInviteInfo]);\n\n  const deleteInvite = useCallback((invite: ApiExportedInvite) => {\n    deleteExportedChatInvite({ chatId, link: invite.link });\n  }, [chatId, deleteExportedChatInvite]);\n\n  const askToDelete = useCallback((invite: ApiExportedInvite) => {\n    setDeletingInvite(invite);\n    openDeleteDialog();\n  }, [openDeleteDialog]);\n\n  const handleDelete = useCallback(() => {\n    if (!deletingInvite) return;\n    deleteInvite(deletingInvite);\n    setDeletingInvite(undefined);\n    closeDeleteDialog();\n  }, [closeDeleteDialog, deleteInvite, deletingInvite]);\n\n  const copyLink = useCallback((link: string) => {\n    copyTextToClipboard(link);\n    showNotification({\n      message: lang('LinkCopied'),\n    });\n  }, [lang, showNotification]);\n\n  const prepareUsageText = (invite: ApiExportedInvite) => {\n    const {\n      usage = 0, usageLimit, expireDate, isPermanent, requested, isRevoked,\n    } = invite;\n    let text = '';\n    if (!isRevoked && usageLimit && usage < usageLimit) {\n      text = lang('CanJoin', usageLimit - usage);\n    } else if (usage) {\n      text = lang('PeopleJoined', usage);\n    } else {\n      text = lang('NoOneJoined');\n    }\n\n    if (isRevoked) {\n      text += ` ${BULLET} ${lang('Revoked')}`;\n      return text;\n    }\n\n    if (requested) {\n      text += ` ${BULLET} ${lang('JoinRequests', requested)}`;\n    }\n\n    if (usageLimit !== undefined && usage === usageLimit) {\n      text += ` ${BULLET} ${lang('LinkLimitReached')}`;\n    } else if (expireDate) {\n      const diff = (expireDate - getServerTime()) * 1000;\n      text += ` ${BULLET} `;\n      if (diff > 0) {\n        text += lang('InviteLink.ExpiresIn', formatCountdown(lang, diff));\n      } else {\n        text += lang('InviteLink.Expired');\n      }\n    } else if (isPermanent) {\n      text += ` ${BULLET} ${lang('Permanent')}`;\n    }\n\n    return text;\n  };\n\n  const getInviteIconClass = (invite: ApiExportedInvite) => {\n    const {\n      usage = 0, usageLimit, isRevoked, expireDate,\n    } = invite;\n    if (isRevoked) {\n      return 'link-status-icon-gray';\n    }\n    if (usageLimit && usage < usageLimit) {\n      return 'link-status-icon-green';\n    }\n    if (expireDate) {\n      const diff = (expireDate - getServerTime()) * 1000;\n      if (diff <= 0) {\n        return 'link-status-icon-red';\n      }\n    }\n    return 'link-status-icon-blue';\n  };\n\n  const prepareContextActions = (invite: ApiExportedInvite) => {\n    const actions: MenuItemContextAction[] = [];\n    actions.push({\n      title: lang('Copy'),\n      icon: 'copy',\n      handler: () => copyLink(invite.link),\n    });\n\n    if (!invite.isPermanent && !invite.isRevoked) {\n      actions.push({\n        title: lang('Edit'),\n        icon: 'edit',\n        handler: () => editInvite(invite),\n      });\n    }\n\n    if (!invite.isRevoked) {\n      actions.push({\n        title: lang('RevokeButton'),\n        icon: 'delete',\n        handler: () => askToRevoke(invite),\n        destructive: true,\n      });\n    } else {\n      actions.push({\n        title: lang('DeleteLink'),\n        icon: 'delete',\n        handler: () => askToDelete(invite),\n        destructive: true,\n      });\n    }\n    return actions;\n  };\n\n  return (\n    <div className=\"Management ManageInvites\">\n      <div className=\"custom-scroll\">\n        <div className=\"section\">\n          <AnimatedIcon\n            tgsUrl={LOCAL_TGS_URLS.Invite}\n            size={STICKER_SIZE_INVITES}\n            className=\"section-icon\"\n          />\n          <p className=\"text-muted\">{isChannel ? lang('PrimaryLinkHelpChannel') : lang('PrimaryLinkHelp')}</p>\n        </div>\n        {primaryInviteLink && (\n          <LinkField\n            className=\"section\"\n            link={primaryInviteLink}\n            withShare\n            onRevoke={!chat?.usernames ? handlePrimaryRevoke : undefined}\n            title={chat?.usernames ? lang('PublicLink') : lang('lng_create_permanent_link_title')}\n          />\n        )}\n        <div className=\"section\" teactFastList>\n          <Button isText key=\"create\" className=\"create-link\" onClick={handleCreateNewClick}>\n            {lang('CreateNewLink')}\n          </Button>\n          {(!temporalInvites || !temporalInvites.length) && <NothingFound text=\"No links found\" key=\"nothing\" />}\n          {temporalInvites?.map((invite) => (\n            <ListItem\n              leftElement={<i className={`icon icon-link link-status-icon ${getInviteIconClass(invite)}`} />}\n              secondaryIcon=\"more\"\n              multiline\n              // eslint-disable-next-line react/jsx-no-bind\n              onClick={() => showInviteInfo(invite)}\n              contextActions={prepareContextActions(invite)}\n              key={invite.link}\n            >\n              <span className=\"title invite-title\">{invite.title || invite.link}</span>\n              <span className=\"subtitle\" dir=\"auto\">\n                {prepareUsageText(invite)}\n              </span>\n            </ListItem>\n          ))}\n          <p className=\"text-muted hint\" key=\"links-hint\">{lang('ManageLinksInfoHelp')}</p>\n        </div>\n        {revokedExportedInvites && Boolean(revokedExportedInvites.length) && (\n          <div className=\"section\" teactFastList>\n            <p className=\"text-muted\" key=\"title\">{lang('RevokedLinks')}</p>\n            <ListItem\n              icon=\"delete\"\n              destructive\n              key=\"delete\"\n              onClick={openDeleteRevokeAllDialog}\n            >\n              <span className=\"title\">{lang('DeleteAllRevokedLinks')}</span>\n            </ListItem>\n            {revokedExportedInvites?.map((invite) => (\n              <ListItem\n                leftElement={<i className={`icon icon-link link-status-icon ${getInviteIconClass(invite)}`} />}\n                secondaryIcon=\"more\"\n                multiline\n                // eslint-disable-next-line react/jsx-no-bind\n                onClick={() => showInviteInfo(invite)}\n                contextActions={prepareContextActions(invite)}\n                key={invite.link}\n              >\n                <span className=\"title\">{invite.title || invite.link}</span>\n                <span className=\"subtitle\" dir=\"auto\">\n                  {prepareUsageText(invite)}\n                </span>\n              </ListItem>\n            ))}\n          </div>\n        )}\n      </div>\n      <ConfirmDialog\n        isOpen={isDeleteRevokeAllDialogOpen}\n        onClose={closeDeleteRevokeAllDialog}\n        title={lang('DeleteAllRevokedLinks')}\n        text={lang('DeleteAllRevokedLinkHelp')}\n        confirmIsDestructive\n        confirmLabel={lang('DeleteAll')}\n        confirmHandler={handleDeleteAllRevoked}\n      />\n      <ConfirmDialog\n        isOpen={isRevokeDialogOpen}\n        onClose={closeRevokeDialog}\n        title={lang('RevokeLink')}\n        text={lang('RevokeAlert')}\n        confirmIsDestructive\n        confirmLabel={lang('RevokeButton')}\n        confirmHandler={handleRevoke}\n      />\n      <ConfirmDialog\n        isOpen={isDeleteDialogOpen}\n        onClose={closeDeleteDialog}\n        title={lang('DeleteLink')}\n        text={lang('DeleteLinkHelp')}\n        confirmIsDestructive\n        confirmLabel={lang('Delete')}\n        confirmHandler={handleDelete}\n      />\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { chatId }): StateProps => {\n    const { invites, revokedInvites } = selectTabState(global).management.byChatId[chatId] || {};\n    const chat = selectChat(global, chatId);\n    const isChannel = chat && isChatChannel(chat);\n\n    return {\n      exportedInvites: invites,\n      revokedExportedInvites: revokedInvites,\n      chat,\n      isChannel,\n    };\n  },\n)(ManageInvites));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useCallback, useEffect } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiChat } from '../../../api/types';\n\nimport { STICKER_SIZE_JOIN_REQUESTS } from '../../../config';\nimport { isChatChannel, isUserId } from '../../../global/helpers';\nimport { selectChat } from '../../../global/selectors';\nimport { LOCAL_TGS_URLS } from '../../common/helpers/animatedAssets';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport AnimatedIcon from '../../common/AnimatedIcon';\nimport Button from '../../ui/Button';\nimport ConfirmDialog from '../../ui/ConfirmDialog';\nimport Spinner from '../../ui/Spinner';\nimport JoinRequest from './JoinRequest';\n\ntype OwnProps = {\n  chatId: string;\n  onClose: NoneToVoidFunction;\n  isActive: boolean;\n};\n\ntype StateProps = {\n  chat?: ApiChat;\n  isChannel?: boolean;\n};\n\nconst ManageJoinRequests: FC<OwnProps & StateProps> = ({\n  chat,\n  chatId,\n  isActive,\n  isChannel,\n  onClose,\n}) => {\n  const { hideAllChatJoinRequests, loadChatJoinRequests } = getActions();\n  const [isAcceptAllDialogOpen, openAcceptAllDialog, closeAcceptAllDialog] = useFlag();\n  const [isRejectAllDialogOpen, openRejectAllDialog, closeRejectAllDialog] = useFlag();\n\n  const lang = useOldLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  useEffect(() => {\n    if (!chat?.joinRequests && !isUserId(chatId)) {\n      loadChatJoinRequests({ chatId });\n    }\n  }, [chat, chatId, loadChatJoinRequests]);\n\n  const handleAcceptAllRequests = useCallback(() => {\n    hideAllChatJoinRequests({ chatId, isApproved: true });\n    closeAcceptAllDialog();\n  }, [hideAllChatJoinRequests, chatId, closeAcceptAllDialog]);\n\n  const handleRejectAllRequests = useCallback(() => {\n    hideAllChatJoinRequests({ chatId, isApproved: false });\n    closeRejectAllDialog();\n  }, [hideAllChatJoinRequests, chatId, closeRejectAllDialog]);\n\n  return (\n    <div className=\"Management ManageJoinRequests\">\n      <div className=\"custom-scroll\">\n        <div className=\"section\">\n          <AnimatedIcon\n            tgsUrl={LOCAL_TGS_URLS.JoinRequest}\n            size={STICKER_SIZE_JOIN_REQUESTS}\n            className=\"section-icon\"\n          />\n          {Boolean(chat?.joinRequests?.length) && (\n            <div className=\"bulk-actions\">\n              <Button className=\"bulk-action-button\" onClick={openAcceptAllDialog}>Accept all</Button>\n              <Button className=\"bulk-action-button\" onClick={openRejectAllDialog} isText>Dismiss all</Button>\n            </div>\n          )}\n        </div>\n        <div className=\"section\" teactFastList>\n          <p key=\"title\">\n            {!chat?.joinRequests ? lang('Loading') : chat.joinRequests.length\n              ? lang('JoinRequests', chat.joinRequests.length) : lang('NoMemberRequests')}\n          </p>\n          {!chat?.joinRequests && (\n            <Spinner key=\"loading\" />\n          )}\n          {chat?.joinRequests?.length === 0 && (\n            <p className=\"text-muted\" key=\"empty\">\n              {isChannel ? lang('NoSubscribeRequestsDescription') : lang('NoMemberRequestsDescription')}\n            </p>\n          )}\n          {chat?.joinRequests?.map(({ userId, about, date }) => (\n            <JoinRequest\n              userId={userId}\n              about={about}\n              date={date}\n              isChannel={isChannel}\n              chatId={chatId}\n              key={userId}\n            />\n          ))}\n        </div>\n      </div>\n      <ConfirmDialog\n        isOpen={isAcceptAllDialogOpen}\n        onClose={closeAcceptAllDialog}\n        title=\"Accept all requests?\"\n        text=\"Are you sure you want to accept all requests?\"\n        confirmHandler={handleAcceptAllRequests}\n      />\n      <ConfirmDialog\n        isOpen={isRejectAllDialogOpen}\n        onClose={closeRejectAllDialog}\n        title=\"Reject all requests?\"\n        text=\"Are you sure you want to reject all requests?\"\n        confirmHandler={handleRejectAllRequests}\n      />\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { chatId }): StateProps => {\n    const chat = selectChat(global, chatId);\n\n    return {\n      chat,\n      isChannel: chat && isChatChannel(chat),\n    };\n  },\n)(ManageJoinRequests));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect, useMemo,\n  useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiAvailableReaction, ApiChat, ApiChatReactions, ApiReaction,\n} from '../../../api/types';\n\nimport { isSameReaction } from '../../../global/helpers';\nimport { selectChat, selectChatFullInfo } from '../../../global/selectors';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport ReactionStaticEmoji from '../../common/ReactionStaticEmoji';\nimport Checkbox from '../../ui/Checkbox';\nimport FloatingActionButton from '../../ui/FloatingActionButton';\nimport RadioGroup from '../../ui/RadioGroup';\nimport Spinner from '../../ui/Spinner';\n\ntype OwnProps = {\n  chatId: string;\n  onClose: NoneToVoidFunction;\n  isActive: boolean;\n};\n\ntype StateProps = {\n  chat?: ApiChat;\n  availableReactions?: ApiAvailableReaction[];\n  enabledReactions?: ApiChatReactions;\n};\n\nconst ManageReactions: FC<OwnProps & StateProps> = ({\n  availableReactions,\n  enabledReactions,\n  chat,\n  isActive,\n  onClose,\n}) => {\n  const { setChatEnabledReactions } = getActions();\n\n  const lang = useOldLang();\n  const [isTouched, setIsTouched] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [localEnabledReactions, setLocalEnabledReactions] = useState<ApiChatReactions | undefined>(enabledReactions);\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  const reactionsOptions = useMemo(() => [{\n    value: 'all',\n    label: lang('AllReactions'),\n  }, {\n    value: 'some',\n    label: lang('SomeReactions'),\n  }, {\n    value: 'none',\n    label: lang('NoReactions'),\n  }], [lang]);\n\n  const handleSaveReactions = useCallback(() => {\n    if (!chat) return;\n    setIsLoading(true);\n\n    setChatEnabledReactions({\n      chatId: chat.id,\n      enabledReactions: localEnabledReactions,\n    });\n  }, [chat, localEnabledReactions, setChatEnabledReactions]);\n\n  useEffect(() => {\n    setIsLoading(false);\n    setIsTouched(false);\n    setLocalEnabledReactions(enabledReactions);\n  }, [enabledReactions]);\n\n  const availableActiveReactions = useMemo<ApiAvailableReaction[] | undefined>(\n    () => availableReactions?.filter(({ isInactive }) => !isInactive),\n    [availableReactions],\n  );\n\n  const handleReactionsOptionChange = useCallback((value: string) => {\n    if (value === 'all') {\n      setLocalEnabledReactions({ type: 'all' });\n    } else if (value === 'some') {\n      setLocalEnabledReactions({\n        type: 'some',\n        allowed: enabledReactions?.type === 'some' ? enabledReactions.allowed : [],\n      });\n    } else {\n      setLocalEnabledReactions(undefined);\n    }\n    setIsTouched(true);\n  }, [enabledReactions]);\n\n  const handleReactionChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    if (!chat || !availableActiveReactions) return;\n\n    const { name, checked } = e.currentTarget;\n    if (localEnabledReactions?.type === 'some') {\n      const reaction = { emoticon: name } as ApiReaction;\n      if (checked) {\n        setLocalEnabledReactions({\n          type: 'some',\n          allowed: [...localEnabledReactions.allowed, reaction],\n        });\n      } else {\n        setLocalEnabledReactions({\n          type: 'some',\n          allowed: localEnabledReactions.allowed.filter((local) => !isSameReaction(local, reaction)),\n        });\n      }\n    }\n    setIsTouched(true);\n  }, [availableActiveReactions, chat, localEnabledReactions]);\n\n  return (\n    <div className=\"Management\">\n      <div className=\"custom-scroll\">\n        <div className=\"section\">\n          <h3 className=\"section-heading\">\n            {lang('AvailableReactions')}\n          </h3>\n          <RadioGroup\n            selected={localEnabledReactions?.type || 'none'}\n            name=\"reactions\"\n            options={reactionsOptions}\n            onChange={handleReactionsOptionChange}\n          />\n          <p className=\"section-info mt-4\">\n            {localEnabledReactions?.type === 'all' && lang('EnableAllReactionsInfo')}\n            {localEnabledReactions?.type === 'some' && lang('EnableSomeReactionsInfo')}\n            {!localEnabledReactions && lang('DisableReactionsInfo')}\n          </p>\n        </div>\n        {localEnabledReactions?.type === 'some' && (\n          <div className=\"section\">\n            <h3 className=\"section-heading\">\n              {lang('AvailableReactions')}\n            </h3>\n            {availableActiveReactions?.map(({ reaction, title }) => (\n              <div className=\"ListItem\">\n                <Checkbox\n                  name={reaction.emoticon}\n                  checked={localEnabledReactions?.allowed.some((r) => isSameReaction(reaction, r))}\n                  label={(\n                    <div className=\"Reaction\">\n                      <ReactionStaticEmoji reaction={reaction} availableReactions={availableReactions} />\n                      {title}\n                    </div>\n                  )}\n                  onChange={handleReactionChange}\n                />\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      <FloatingActionButton\n        isShown={isTouched}\n        onClick={handleSaveReactions}\n        ariaLabel={lang('Save')}\n        disabled={isLoading}\n      >\n        {isLoading ? (\n          <Spinner color=\"white\" />\n        ) : (\n          <i className=\"icon icon-check\" />\n        )}\n      </FloatingActionButton>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { chatId }): StateProps => {\n    const chat = selectChat(global, chatId)!;\n\n    return {\n      enabledReactions: selectChatFullInfo(global, chatId)?.enabledReactions,\n      availableReactions: global.reactions.availableReactions,\n      chat,\n    };\n  },\n  (global, { chatId }) => {\n    return Boolean(selectChat(global, chatId));\n  },\n)(ManageReactions));\n","import type { ChangeEvent } from 'react';\nimport type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useCallback, useEffect, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiPhoto, ApiUser } from '../../../api/types';\nimport { ManagementProgress } from '../../../types';\n\nimport { SERVICE_NOTIFICATIONS_USER_ID } from '../../../config';\nimport { isUserBot, selectIsChatMuted } from '../../../global/helpers';\nimport {\n  selectChat,\n  selectNotifyExceptions,\n  selectNotifySettings,\n  selectTabState,\n  selectUser,\n  selectUserFullInfo,\n} from '../../../global/selectors';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Avatar from '../../common/Avatar';\nimport PrivateChatInfo from '../../common/PrivateChatInfo';\nimport Checkbox from '../../ui/Checkbox';\nimport ConfirmDialog from '../../ui/ConfirmDialog';\nimport FloatingActionButton from '../../ui/FloatingActionButton';\nimport InputText from '../../ui/InputText';\nimport ListItem from '../../ui/ListItem';\nimport SelectAvatar from '../../ui/SelectAvatar';\nimport Spinner from '../../ui/Spinner';\n\nimport './Management.scss';\n\ntype OwnProps = {\n  userId: string;\n  onClose: NoneToVoidFunction;\n  isActive: boolean;\n};\n\ntype StateProps = {\n  user?: ApiUser;\n  progress?: ManagementProgress;\n  isMuted?: boolean;\n  personalPhoto?: ApiPhoto;\n  notPersonalPhoto?: ApiPhoto;\n};\n\nconst ERROR_FIRST_NAME_MISSING = 'Please provide first name';\n\nconst ManageUser: FC<OwnProps & StateProps> = ({\n  userId,\n  user,\n  progress,\n  isMuted,\n  onClose,\n  isActive,\n  personalPhoto,\n  notPersonalPhoto,\n}) => {\n  const {\n    updateContact,\n    deleteContact,\n    closeManagement,\n    uploadContactProfilePhoto,\n  } = getActions();\n\n  const [isDeleteDialogOpen, openDeleteDialog, closeDeleteDialog] = useFlag();\n  const [isResetPersonalPhotoDialogOpen, openResetPersonalPhotoDialog, closeResetPersonalPhotoDialog] = useFlag();\n  const [isProfileFieldsTouched, setIsProfileFieldsTouched] = useState(false);\n  const [error, setError] = useState<string | undefined>();\n  const lang = useOldLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  const currentFirstName = user ? (user.firstName || '') : '';\n  const currentLastName = user ? (user.lastName || '') : '';\n\n  const [firstName, setFirstName] = useState(currentFirstName);\n  const [lastName, setLastName] = useState(currentLastName);\n  const [isNotificationsEnabled, setIsNotificationsEnabled] = useState(!isMuted);\n\n  useEffect(() => {\n    setIsNotificationsEnabled(!isMuted);\n  }, [isMuted]);\n\n  useEffect(() => {\n    setIsProfileFieldsTouched(false);\n    closeDeleteDialog();\n  }, [closeDeleteDialog, userId]);\n\n  useEffect(() => {\n    setFirstName(currentFirstName);\n    setLastName(currentLastName);\n  }, [currentFirstName, currentLastName, user]);\n\n  useEffect(() => {\n    if (progress === ManagementProgress.Complete) {\n      setIsProfileFieldsTouched(false);\n      setError(undefined);\n      closeDeleteDialog();\n    }\n  }, [closeDeleteDialog, progress]);\n\n  const handleFirstNameChange = useCallback((e: ChangeEvent<HTMLInputElement>) => {\n    setFirstName(e.target.value);\n    setIsProfileFieldsTouched(true);\n\n    if (error === ERROR_FIRST_NAME_MISSING) {\n      setError(undefined);\n    }\n  }, [error]);\n\n  const handleLastNameChange = useCallback((e: ChangeEvent<HTMLInputElement>) => {\n    setLastName(e.target.value);\n    setIsProfileFieldsTouched(true);\n  }, []);\n\n  const handleNotificationChange = useCallback((e: ChangeEvent<HTMLInputElement>) => {\n    setIsNotificationsEnabled(e.target.checked);\n    setIsProfileFieldsTouched(true);\n  }, []);\n\n  const handleProfileSave = useCallback(() => {\n    const trimmedFirstName = firstName.trim();\n    const trimmedLastName = lastName.trim();\n\n    if (!trimmedFirstName.length) {\n      setError(ERROR_FIRST_NAME_MISSING);\n      return;\n    }\n\n    updateContact({\n      userId,\n      isMuted: !isNotificationsEnabled,\n      firstName: trimmedFirstName,\n      lastName: trimmedLastName,\n    });\n  }, [firstName, lastName, updateContact, userId, isNotificationsEnabled]);\n\n  const handleDeleteContact = useCallback(() => {\n    deleteContact({ userId });\n    closeDeleteDialog();\n    closeManagement();\n  }, [closeDeleteDialog, closeManagement, deleteContact, userId]);\n\n  // eslint-disable-next-line no-null/no-null\n  const inputRef = useRef<HTMLInputElement>(null);\n  const isSuggestRef = useRef(false);\n\n  const handleSuggestPhoto = useCallback(() => {\n    inputRef.current?.click();\n    isSuggestRef.current = true;\n  }, []);\n\n  const handleSetPersonalPhoto = useCallback(() => {\n    inputRef.current?.click();\n    isSuggestRef.current = false;\n  }, []);\n\n  const handleResetPersonalAvatar = useCallback(() => {\n    closeResetPersonalPhotoDialog();\n    setIsProfileFieldsTouched(true);\n    uploadContactProfilePhoto({ userId });\n  }, [closeResetPersonalPhotoDialog, uploadContactProfilePhoto, userId]);\n\n  const handleSelectAvatar = useCallback((file: File) => {\n    setIsProfileFieldsTouched(true);\n    uploadContactProfilePhoto({ userId, file, isSuggest: isSuggestRef.current });\n  }, [uploadContactProfilePhoto, userId]);\n\n  if (!user) {\n    return undefined;\n  }\n\n  const canSetPersonalPhoto = !isUserBot(user) && user.id !== SERVICE_NOTIFICATIONS_USER_ID;\n  const isLoading = progress === ManagementProgress.InProgress;\n\n  return (\n    <div className=\"Management\">\n      <div className=\"custom-scroll\">\n        <div className=\"section\">\n          <PrivateChatInfo\n            userId={user.id}\n            avatarSize=\"jumbo\"\n            noStatusOrTyping\n            noEmojiStatus\n            withFullInfo\n          />\n          <InputText\n            id=\"user-first-name\"\n            label={lang('UserInfo.FirstNamePlaceholder')}\n            onChange={handleFirstNameChange}\n            value={firstName}\n            error={error === ERROR_FIRST_NAME_MISSING ? error : undefined}\n          />\n          <InputText\n            id=\"user-last-name\"\n            label={lang('UserInfo.LastNamePlaceholder')}\n            onChange={handleLastNameChange}\n            value={lastName}\n          />\n          <div className=\"ListItem narrow\">\n            <Checkbox\n              checked={isNotificationsEnabled}\n              label={lang('Notifications')}\n              subLabel={lang(isNotificationsEnabled\n                ? 'UserInfo.NotificationsEnabled'\n                : 'UserInfo.NotificationsDisabled')}\n              onChange={handleNotificationChange}\n            />\n          </div>\n        </div>\n        {canSetPersonalPhoto && (\n          <div className=\"section\">\n            <ListItem icon=\"camera-add\" ripple onClick={handleSuggestPhoto}>\n              <span className=\"list-item-ellipsis\">{lang('UserInfo.SuggestPhoto', user.firstName)}</span>\n            </ListItem>\n            <ListItem icon=\"camera-add\" ripple onClick={handleSetPersonalPhoto}>\n              <span className=\"list-item-ellipsis\">{lang('UserInfo.SetCustomPhoto', user.firstName)}</span>\n            </ListItem>\n            {personalPhoto && (\n              <ListItem\n                leftElement={(\n                  <Avatar\n                    photo={notPersonalPhoto}\n                    noPersonalPhoto\n                    peer={user}\n                    size=\"mini\"\n                    className=\"personal-photo\"\n                  />\n                )}\n                ripple\n                onClick={openResetPersonalPhotoDialog}\n              >\n                {lang('UserInfo.ResetCustomPhoto')}\n              </ListItem>\n            )}\n            <p className=\"text-muted\" dir=\"auto\">{lang('UserInfo.CustomPhotoInfo', user.firstName)}</p>\n          </div>\n        )}\n        <div className=\"section\">\n          <ListItem icon=\"delete\" ripple destructive onClick={openDeleteDialog}>\n            {lang('DeleteContact')}\n          </ListItem>\n        </div>\n      </div>\n      <FloatingActionButton\n        isShown={isProfileFieldsTouched}\n        onClick={handleProfileSave}\n        disabled={isLoading}\n        ariaLabel={lang('Save')}\n      >\n        {isLoading ? (\n          <Spinner color=\"white\" />\n        ) : (\n          <i className=\"icon icon-check\" />\n        )}\n      </FloatingActionButton>\n      <ConfirmDialog\n        isOpen={isDeleteDialogOpen}\n        onClose={closeDeleteDialog}\n        text={lang('AreYouSureDeleteContact')}\n        confirmLabel={lang('DeleteContact')}\n        confirmHandler={handleDeleteContact}\n        confirmIsDestructive\n      />\n      <ConfirmDialog\n        isOpen={isResetPersonalPhotoDialogOpen}\n        onClose={closeResetPersonalPhotoDialog}\n        text={lang('UserInfo.ResetToOriginalAlertText', user.firstName)}\n        confirmLabel={lang('Reset')}\n        confirmHandler={handleResetPersonalAvatar}\n        confirmIsDestructive\n      />\n      <SelectAvatar\n        onChange={handleSelectAvatar}\n        inputRef={inputRef}\n      />\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { userId }): StateProps => {\n    const user = selectUser(global, userId);\n    const chat = selectChat(global, userId);\n    const userFullInfo = selectUserFullInfo(global, userId);\n    const { progress } = selectTabState(global).management;\n    const isMuted = chat && selectIsChatMuted(chat, selectNotifySettings(global), selectNotifyExceptions(global));\n    const personalPhoto = userFullInfo?.personalPhoto;\n    const notPersonalPhoto = userFullInfo?.profilePhoto || userFullInfo?.fallbackPhoto;\n\n    return {\n      user, progress, isMuted, personalPhoto, notPersonalPhoto,\n    };\n  },\n)(ManageUser));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo } from '../../../lib/teact/teact';\nimport { withGlobal } from '../../../global';\n\nimport type { ManagementType } from '../../../types';\nimport { ManagementScreens } from '../../../types';\n\nimport { selectCurrentManagementType } from '../../../global/selectors';\n\nimport ManageBot from './ManageBot';\nimport ManageChannel from './ManageChannel';\nimport ManageChatAdministrators from './ManageChatAdministrators';\nimport ManageChatPrivacyType from './ManageChatPrivacyType';\nimport ManageChatRemovedUsers from './ManageChatRemovedUsers';\nimport ManageDiscussion from './ManageDiscussion';\nimport ManageGroup from './ManageGroup';\nimport ManageGroupAdminRights from './ManageGroupAdminRights';\nimport ManageGroupMembers from './ManageGroupMembers';\nimport ManageGroupPermissions from './ManageGroupPermissions';\nimport ManageGroupUserPermissions from './ManageGroupUserPermissions';\nimport ManageGroupUserPermissionsCreate from './ManageGroupUserPermissionsCreate';\nimport ManageInvite from './ManageInvite';\nimport ManageInviteInfo from './ManageInviteInfo';\nimport ManageInvites from './ManageInvites';\nimport ManageJoinRequests from './ManageJoinRequests';\nimport ManageReactions from './ManageReactions';\nimport ManageUser from './ManageUser';\n\nexport type OwnProps = {\n  chatId: string;\n  currentScreen: ManagementScreens;\n  selectedChatMemberId?: string;\n  isPromotedByCurrentUser?: boolean;\n  onScreenSelect: (screen: ManagementScreens) => void;\n  onChatMemberSelect: (memberId: string, isPromotedByCurrentUser?: boolean) => void;\n  onClose: NoneToVoidFunction;\n  isActive: boolean;\n};\n\ntype StateProps = {\n  managementType?: ManagementType;\n};\n\nconst Management: FC<OwnProps & StateProps> = ({\n  chatId,\n  currentScreen,\n  selectedChatMemberId,\n  isPromotedByCurrentUser,\n  onScreenSelect,\n  onChatMemberSelect,\n  onClose,\n  isActive,\n  managementType,\n}) => {\n  switch (currentScreen) {\n    case ManagementScreens.Initial: {\n      switch (managementType) {\n        case 'bot':\n          return (\n            <ManageBot\n              key={chatId}\n              userId={chatId}\n              onClose={onClose}\n              isActive={isActive}\n            />\n          );\n        case 'user':\n          return (\n            <ManageUser\n              key={chatId}\n              userId={chatId}\n              onClose={onClose}\n              isActive={isActive}\n            />\n          );\n        case 'group':\n          return (\n            <ManageGroup\n              key={chatId}\n              chatId={chatId}\n              onScreenSelect={onScreenSelect}\n              onClose={onClose}\n              isActive={isActive || [\n                ManagementScreens.ChatPrivacyType,\n                ManagementScreens.Discussion,\n                ManagementScreens.GroupPermissions,\n                ManagementScreens.ChatAdministrators,\n                ManagementScreens.GroupRemovedUsers,\n                ManagementScreens.GroupUserPermissionsCreate,\n                ManagementScreens.GroupUserPermissions,\n                ManagementScreens.ChatAdminRights,\n                ManagementScreens.ChatNewAdminRights,\n                ManagementScreens.GroupRecentActions,\n              ].includes(currentScreen)}\n            />\n          );\n        case 'channel':\n          return (\n            <ManageChannel\n              key={chatId}\n              chatId={chatId}\n              onScreenSelect={onScreenSelect}\n              onClose={onClose}\n              isActive={isActive || [\n                ManagementScreens.ChannelSubscribers,\n                ManagementScreens.ChatAdministrators,\n                ManagementScreens.ChannelRemovedUsers,\n                ManagementScreens.Discussion,\n                ManagementScreens.ChatPrivacyType,\n                ManagementScreens.ChatAdminRights,\n                ManagementScreens.ChatNewAdminRights,\n                ManagementScreens.GroupRecentActions,\n              ].includes(currentScreen)}\n            />\n          );\n      }\n\n      break;\n    }\n\n    case ManagementScreens.ChatPrivacyType:\n      return (\n        <ManageChatPrivacyType\n          chatId={chatId}\n          isActive={isActive}\n          onClose={onClose}\n        />\n      );\n\n    case ManagementScreens.Discussion:\n      return (\n        <ManageDiscussion\n          chatId={chatId}\n          onScreenSelect={onScreenSelect}\n          isActive={isActive}\n          onClose={onClose}\n        />\n      );\n\n    case ManagementScreens.GroupPermissions:\n      return (\n        <ManageGroupPermissions\n          chatId={chatId}\n          onScreenSelect={onScreenSelect}\n          onChatMemberSelect={onChatMemberSelect}\n          isActive={isActive || [\n            ManagementScreens.GroupRemovedUsers,\n            ManagementScreens.GroupUserPermissionsCreate,\n            ManagementScreens.GroupUserPermissions,\n          ].includes(currentScreen)}\n          onClose={onClose}\n        />\n      );\n\n    case ManagementScreens.ChannelRemovedUsers:\n    case ManagementScreens.GroupRemovedUsers:\n      return (\n        <ManageChatRemovedUsers\n          chatId={chatId}\n          isActive={isActive}\n          onClose={onClose}\n        />\n      );\n\n    case ManagementScreens.GroupUserPermissionsCreate:\n      return (\n        <ManageGroupUserPermissionsCreate\n          chatId={chatId}\n          onChatMemberSelect={onChatMemberSelect}\n          onScreenSelect={onScreenSelect}\n          isActive={isActive || [\n            ManagementScreens.GroupUserPermissions,\n          ].includes(currentScreen)}\n          onClose={onClose}\n        />\n      );\n\n    case ManagementScreens.GroupUserPermissions:\n      return (\n        <ManageGroupUserPermissions\n          chatId={chatId}\n          selectedChatMemberId={selectedChatMemberId}\n          isPromotedByCurrentUser={isPromotedByCurrentUser}\n          onScreenSelect={onScreenSelect}\n          isActive={isActive}\n          onClose={onClose}\n        />\n      );\n\n    case ManagementScreens.ChatAdministrators:\n      return (\n        <ManageChatAdministrators\n          chatId={chatId}\n          onScreenSelect={onScreenSelect}\n          onChatMemberSelect={onChatMemberSelect}\n          isActive={isActive || [\n            ManagementScreens.ChatAdminRights,\n            ManagementScreens.ChatNewAdminRights,\n            ManagementScreens.GroupRecentActions,\n          ].includes(currentScreen)}\n          onClose={onClose}\n        />\n      );\n\n    case ManagementScreens.ChatNewAdminRights:\n    case ManagementScreens.ChatAdminRights:\n      return (\n        <ManageGroupAdminRights\n          chatId={chatId}\n          isNewAdmin={currentScreen === ManagementScreens.ChatNewAdminRights}\n          selectedUserId={selectedChatMemberId}\n          isPromotedByCurrentUser={isPromotedByCurrentUser}\n          onScreenSelect={onScreenSelect}\n          isActive={isActive}\n          onClose={onClose}\n        />\n      );\n\n    case ManagementScreens.ChannelSubscribers:\n    case ManagementScreens.GroupMembers:\n      return (\n        <ManageGroupMembers\n          chatId={chatId}\n          isActive={isActive}\n          onClose={onClose}\n        />\n      );\n    case ManagementScreens.Invites:\n      return (\n        <ManageInvites\n          chatId={chatId}\n          isActive={isActive}\n          onClose={onClose}\n          onScreenSelect={onScreenSelect}\n        />\n      );\n    case ManagementScreens.EditInvite:\n      return (\n        <ManageInvite\n          chatId={chatId}\n          isActive={isActive}\n          onClose={onClose}\n          onScreenSelect={onScreenSelect}\n        />\n      );\n    case ManagementScreens.GroupAddAdmins:\n      return (\n        <ManageGroupMembers\n          chatId={chatId}\n          noAdmins\n          isActive={isActive}\n          onClose={onClose}\n          onScreenSelect={onScreenSelect}\n          onChatMemberSelect={onChatMemberSelect}\n        />\n      );\n\n    case ManagementScreens.Reactions:\n      return (\n        <ManageReactions\n          chatId={chatId}\n          isActive={isActive}\n          onClose={onClose}\n        />\n      );\n    case ManagementScreens.InviteInfo:\n      return (\n        <ManageInviteInfo\n          chatId={chatId}\n          isActive={isActive}\n          onClose={onClose}\n        />\n      );\n    case ManagementScreens.JoinRequests:\n      return (\n        <ManageJoinRequests\n          chatId={chatId}\n          isActive={isActive}\n          onClose={onClose}\n        />\n      );\n  }\n\n  return undefined; // Never reached\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const managementType = selectCurrentManagementType(global);\n\n    return {\n      managementType,\n    };\n  },\n)(Management));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useCallback,\n  useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type { ApiChat, ApiChatMember } from '../../../api/types';\n\nimport { filterUsersByName } from '../../../global/helpers';\nimport { selectChatFullInfo } from '../../../global/selectors';\n\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport ChatOrUserPicker from '../../common/ChatOrUserPicker';\n\nexport type OwnProps = {\n  chat: ApiChat;\n  isOpen: boolean;\n  onClose: NoneToVoidFunction;\n};\n\ntype StateProps = {\n  currentUserId?: string;\n  chatMembers?: ApiChatMember[];\n};\n\nconst RemoveGroupUserModal: FC<OwnProps & StateProps> = ({\n  chat,\n  currentUserId,\n  chatMembers,\n  isOpen,\n  onClose,\n}) => {\n  const {\n    loadMoreMembers,\n    deleteChatMember,\n  } = getActions();\n\n  const lang = useOldLang();\n  const [search, setSearch] = useState('');\n\n  const usersId = useMemo(() => {\n    const availableMemberIds = (chatMembers || [])\n      .reduce((acc: string[], member) => {\n        if (!member.isAdmin && !member.isOwner && member.userId !== currentUserId) {\n          acc.push(member.userId);\n        }\n        return acc;\n      }, []);\n\n    // No need for expensive global updates on users, so we avoid them\n    const usersById = getGlobal().users.byId;\n\n    return filterUsersByName(availableMemberIds, usersById, search);\n  }, [chatMembers, currentUserId, search]);\n\n  const handleRemoveUser = useCallback((userId: string) => {\n    deleteChatMember({ chatId: chat.id, userId });\n    onClose();\n  }, [chat.id, deleteChatMember, onClose]);\n\n  return (\n    <ChatOrUserPicker\n      isOpen={isOpen}\n      chatOrUserIds={usersId}\n      searchPlaceholder={lang('ChannelBlockUser')}\n      search={search}\n      onSearchChange={setSearch}\n      loadMore={loadMoreMembers}\n      onSelectChatOrUser={handleRemoveUser}\n      onClose={onClose}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { chat }): StateProps => {\n    const { currentUserId } = global;\n\n    return {\n      currentUserId,\n      chatMembers: selectChatFullInfo(global, chat.id)?.members,\n    };\n  },\n)(RemoveGroupUserModal));\n","import React, {\n  memo, useEffect, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiMessagePublicForward,\n  ApiPostStatistics,\n  StatisticsGraph,\n} from '../../../api/types';\nimport { LoadMoreDirection } from '../../../types';\n\nimport { STATISTICS_PUBLIC_FORWARDS_LIMIT } from '../../../config';\nimport { selectChatFullInfo, selectTabState } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { callApi } from '../../../api/gramjs';\n\nimport useForceUpdate from '../../../hooks/useForceUpdate';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport InfiniteScroll from '../../ui/InfiniteScroll';\nimport Loading from '../../ui/Loading';\nimport StatisticsMessagePublicForward from './StatisticsMessagePublicForward';\nimport StatisticsOverview from './StatisticsOverview';\n\nimport styles from './Statistics.module.scss';\n\ntype ILovelyChart = { create: Function };\nlet lovelyChartPromise: Promise<ILovelyChart>;\nlet LovelyChart: ILovelyChart;\n\nasync function ensureLovelyChart() {\n  if (!lovelyChartPromise) {\n    lovelyChartPromise = import('../../../lib/lovely-chart/LovelyChart') as Promise<ILovelyChart>;\n    LovelyChart = await lovelyChartPromise;\n  }\n\n  return lovelyChartPromise;\n}\n\nconst GRAPH_TITLES = {\n  viewsGraph: 'Stats.MessageInteractionsTitle',\n  reactionsGraph: 'ReactionsByEmotionChartTitle',\n};\nconst GRAPHS = Object.keys(GRAPH_TITLES) as (keyof ApiPostStatistics)[];\n\nexport type OwnProps = {\n  chatId: string;\n  isActive: boolean;\n};\n\nexport type StateProps = {\n  statistics?: ApiPostStatistics;\n  messageId?: number;\n  dcId?: number;\n};\n\nfunction Statistics({\n  chatId,\n  isActive,\n  statistics,\n  dcId,\n  messageId,\n}: OwnProps & StateProps) {\n  const lang = useOldLang();\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [isReady, setIsReady] = useState(false);\n  const loadedCharts = useRef<string[]>([]);\n\n  const { loadMessageStatistics, loadMessagePublicForwards, loadStatisticsAsyncGraph } = getActions();\n  const forceUpdate = useForceUpdate();\n\n  useEffect(() => {\n    if (messageId) {\n      loadMessageStatistics({ chatId, messageId });\n    }\n  }, [chatId, loadMessageStatistics, messageId]);\n\n  useEffect(() => {\n    if (!isActive || messageId) {\n      loadedCharts.current = [];\n      setIsReady(false);\n    }\n  }, [isActive, messageId]);\n\n  // Load async graphs\n  useEffect(() => {\n    if (!statistics) {\n      return;\n    }\n\n    GRAPHS.forEach((name) => {\n      const graph = statistics[name as keyof typeof statistics];\n      const isAsync = typeof graph === 'string';\n\n      if (isAsync) {\n        loadStatisticsAsyncGraph({ name, chatId, token: graph });\n      }\n    });\n  }, [chatId, statistics, loadStatisticsAsyncGraph]);\n\n  useEffect(() => {\n    (async () => {\n      await ensureLovelyChart();\n\n      if (!isReady) {\n        setIsReady(true);\n        return;\n      }\n\n      if (!statistics || !containerRef.current) {\n        return;\n      }\n\n      GRAPHS.forEach((name, index: number) => {\n        const graph = statistics[name as keyof typeof statistics];\n        const isAsync = typeof graph === 'string';\n\n        if (isAsync || loadedCharts.current.includes(name)) {\n          return;\n        }\n\n        if (!graph) {\n          loadedCharts.current.push(name);\n\n          return;\n        }\n\n        const { zoomToken } = graph as StatisticsGraph;\n\n        LovelyChart.create(\n          containerRef.current!.children[index],\n          {\n            title: lang((GRAPH_TITLES as Record<string, string>)[name]),\n            ...zoomToken ? {\n              onZoom: (x: number) => callApi('fetchStatisticsAsyncGraph', { token: zoomToken, x, dcId }),\n              zoomOutLabel: lang('Graph.ZoomOut'),\n            } : {},\n            ...graph as StatisticsGraph,\n          },\n        );\n\n        loadedCharts.current.push(name);\n      });\n\n      forceUpdate();\n    })();\n  }, [\n    isReady, statistics, lang, chatId, messageId, loadStatisticsAsyncGraph, dcId, forceUpdate,\n  ]);\n\n  const handleLoadMore = useLastCallback(({ direction }: { direction: LoadMoreDirection }) => {\n    if (direction === LoadMoreDirection.Backwards && messageId) {\n      loadMessagePublicForwards({ chatId, messageId });\n    }\n  });\n\n  if (!isReady || !statistics || !messageId) {\n    return <Loading />;\n  }\n\n  return (\n    <div className={buildClassName(styles.root, 'custom-scroll', isReady && styles.ready)}>\n      <StatisticsOverview statistics={statistics} type=\"message\" title={lang('StatisticOverview')} />\n\n      {!loadedCharts.current.length && <Loading />}\n\n      <div ref={containerRef}>\n        {GRAPHS.map((graph) => (\n          <div className={buildClassName(styles.graph, !loadedCharts.current.includes(graph) && styles.hidden)} />\n        ))}\n      </div>\n\n      {Boolean(statistics.publicForwards) && (\n        <div className={styles.publicForwards}>\n          <h2 className={styles.publicForwardsTitle}>{lang('Stats.Message.PublicShares')}</h2>\n\n          <InfiniteScroll\n            items={statistics.publicForwardsData}\n            itemSelector=\".statistic-public-forward\"\n            onLoadMore={handleLoadMore}\n            preloadBackwards={STATISTICS_PUBLIC_FORWARDS_LIMIT}\n            noFastList\n          >\n            {(statistics.publicForwardsData as ApiMessagePublicForward[]).map((item) => (\n              <StatisticsMessagePublicForward key={item.messageId} data={item} />\n            ))}\n          </InfiniteScroll>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { chatId }): StateProps => {\n    const dcId = selectChatFullInfo(global, chatId)?.statisticsDcId;\n    const tabState = selectTabState(global);\n    const statistics = tabState.statistics.currentMessage;\n    const messageId = tabState.statistics.currentMessageId;\n\n    return { statistics, dcId, messageId };\n  },\n)(Statistics));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo,\n  useRef, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiChannelStatistics,\n  ApiChat,\n  ApiGroupStatistics,\n  ApiMessage,\n  ApiTypeStory,\n  StatisticsGraph,\n} from '../../../api/types';\n\nimport {\n  selectChat,\n  selectChatFullInfo,\n  selectChatMessages,\n  selectPeerStories,\n  selectStatistics,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { callApi } from '../../../api/gramjs';\n\nimport useForceUpdate from '../../../hooks/useForceUpdate';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Loading from '../../ui/Loading';\nimport StatisticsOverview from './StatisticsOverview';\nimport StatisticsRecentMessage from './StatisticsRecentMessage';\nimport StatisticsRecentStory from './StatisticsRecentStory';\n\nimport styles from './Statistics.module.scss';\n\ntype ILovelyChart = { create: Function };\nlet lovelyChartPromise: Promise<ILovelyChart>;\nlet LovelyChart: ILovelyChart;\n\nasync function ensureLovelyChart() {\n  if (!lovelyChartPromise) {\n    lovelyChartPromise = import('../../../lib/lovely-chart/LovelyChart') as Promise<ILovelyChart>;\n    LovelyChart = await lovelyChartPromise;\n  }\n\n  return lovelyChartPromise;\n}\n\nconst CHANNEL_GRAPHS_TITLES = {\n  growthGraph: 'ChannelStats.Graph.Growth',\n  followersGraph: 'ChannelStats.Graph.Followers',\n  muteGraph: 'ChannelStats.Graph.Notifications',\n  topHoursGraph: 'ChannelStats.Graph.ViewsByHours',\n  viewsBySourceGraph: 'ChannelStats.Graph.ViewsBySource',\n  newFollowersBySourceGraph: 'ChannelStats.Graph.NewFollowersBySource',\n  languagesGraph: 'ChannelStats.Graph.Language',\n  interactionsGraph: 'ChannelStats.Graph.Interactions',\n  reactionsByEmotionGraph: 'ChannelStats.Graph.Reactions',\n  storyInteractionsGraph: 'ChannelStats.Graph.Stories',\n  storyReactionsByEmotionGraph: 'ChannelStats.Graph.StoriesReactions',\n};\nconst CHANNEL_GRAPHS = Object.keys(CHANNEL_GRAPHS_TITLES) as (keyof ApiChannelStatistics)[];\n\nconst GROUP_GRAPHS_TITLES = {\n  growthGraph: 'Stats.GroupGrowthTitle',\n  membersGraph: 'Stats.GroupMembersTitle',\n  languagesGraph: 'Stats.GroupLanguagesTitle',\n  messagesGraph: 'Stats.GroupMessagesTitle',\n  actionsGraph: 'Stats.GroupActionsTitle',\n  topHoursGraph: 'Stats.GroupTopHoursTitle',\n};\nconst GROUP_GRAPHS = Object.keys(GROUP_GRAPHS_TITLES) as (keyof ApiGroupStatistics)[];\n\nexport type OwnProps = {\n  chatId: string;\n};\n\nexport type StateProps = {\n  chat?: ApiChat;\n  statistics: ApiChannelStatistics | ApiGroupStatistics;\n  dcId?: number;\n  isGroup: boolean;\n  messagesById: Record<string, ApiMessage>;\n  storiesById?: Record<string, ApiTypeStory>;\n};\n\nconst Statistics: FC<OwnProps & StateProps> = ({\n  chatId,\n  chat,\n  statistics,\n  dcId,\n  isGroup,\n  messagesById,\n  storiesById,\n}) => {\n  const lang = useOldLang();\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [isReady, setIsReady] = useState(false);\n  const loadedCharts = useRef<string[]>([]);\n\n  const { loadStatistics, loadStatisticsAsyncGraph } = getActions();\n  const forceUpdate = useForceUpdate();\n\n  useEffect(() => {\n    loadStatistics({ chatId, isGroup });\n  }, [chatId, loadStatistics, isGroup]);\n\n  const graphs = useMemo(() => {\n    return isGroup ? GROUP_GRAPHS : CHANNEL_GRAPHS;\n  }, [isGroup]);\n\n  const graphTitles = useMemo(() => {\n    return isGroup ? GROUP_GRAPHS_TITLES : CHANNEL_GRAPHS_TITLES;\n  }, [isGroup]);\n\n  // Load async graphs\n  useEffect(() => {\n    if (!statistics) {\n      return;\n    }\n\n    graphs.forEach((name) => {\n      const graph = statistics[name as keyof typeof statistics];\n      const isAsync = typeof graph === 'string';\n\n      if (isAsync) {\n        loadStatisticsAsyncGraph({\n          name,\n          chatId,\n          token: graph,\n          // Hardcode percentage for languages graph, since API does not return `percentage` flag\n          isPercentage: name === 'languagesGraph',\n        });\n      }\n    });\n  }, [graphs, chatId, statistics, loadStatisticsAsyncGraph]);\n\n  useEffect(() => {\n    (async () => {\n      await ensureLovelyChart();\n\n      if (!isReady) {\n        setIsReady(true);\n        return;\n      }\n\n      if (!statistics || !containerRef.current) {\n        return;\n      }\n\n      graphs.forEach((name, index: number) => {\n        const graph = statistics[name as keyof typeof statistics];\n        const isAsync = typeof graph === 'string';\n\n        if (isAsync || loadedCharts.current.includes(name)) {\n          return;\n        }\n\n        if (!graph) {\n          loadedCharts.current.push(name);\n\n          return;\n        }\n\n        const { zoomToken } = graph;\n\n        LovelyChart.create(\n          containerRef.current!.children[index],\n          {\n            title: lang((graphTitles as Record<string, string>)[name]),\n            ...zoomToken ? {\n              onZoom: (x: number) => callApi('fetchStatisticsAsyncGraph', { token: zoomToken, x, dcId }),\n              zoomOutLabel: lang('Graph.ZoomOut'),\n            } : {},\n            ...graph as StatisticsGraph,\n          },\n        );\n\n        loadedCharts.current.push(name);\n\n        containerRef.current!.children[index].classList.remove(styles.hidden);\n      });\n\n      forceUpdate();\n    })();\n  }, [\n    graphs, graphTitles, isReady, statistics, lang, chatId, loadStatisticsAsyncGraph, dcId, forceUpdate,\n  ]);\n\n  if (!isReady || !statistics) {\n    return <Loading />;\n  }\n\n  return (\n    <div className={buildClassName(styles.root, 'custom-scroll', isReady && styles.ready)}>\n      <StatisticsOverview\n        statistics={statistics}\n        type={isGroup ? 'group' : 'channel'}\n        title={lang('StatisticOverview')}\n      />\n\n      {!loadedCharts.current.length && <Loading />}\n\n      <div ref={containerRef}>\n        {graphs.map((graph) => (\n          <div key={graph} className={buildClassName(styles.graph, styles.hidden)} />\n        ))}\n      </div>\n\n      {Boolean((statistics as ApiChannelStatistics).recentPosts?.length) && (\n        <div className={styles.messages}>\n          <h2 className={styles.messagesTitle}>{lang('ChannelStats.Recent.Header')}</h2>\n\n          {(statistics as ApiChannelStatistics).recentPosts.map((postStatistic) => {\n            if ('msgId' in postStatistic) {\n              const message = messagesById[postStatistic.msgId];\n              if (!message || !('content' in message)) return undefined;\n\n              return (\n                <StatisticsRecentMessage\n                  key={`statistic_message_${postStatistic.msgId}`}\n                  message={message}\n                  postStatistic={postStatistic}\n                />\n              );\n            }\n\n            if ('storyId' in postStatistic && chat) {\n              const story = storiesById?.[postStatistic.storyId];\n\n              return (\n                <StatisticsRecentStory\n                  key={`statistic_story_${postStatistic.storyId}`}\n                  chat={chat}\n                  story={story}\n                  postStatistic={postStatistic}\n                />\n              );\n            }\n\n            return undefined;\n          })}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { chatId }): StateProps => {\n    const statistics = selectStatistics(global, chatId);\n    const chat = selectChat(global, chatId);\n    const dcId = selectChatFullInfo(global, chatId)?.statisticsDcId;\n    const isGroup = chat?.type === 'chatTypeSuperGroup';\n    const messagesById = selectChatMessages(global, chatId);\n    const storiesById = selectPeerStories(global, chatId)?.byId;\n\n    return {\n      statistics, dcId, isGroup, chat, messagesById, storiesById,\n    };\n  },\n)(Statistics));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useCallback, useMemo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { ApiMessagePublicForward } from '../../../api/types';\n\nimport { getMainUsername } from '../../../global/helpers';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Avatar from '../../common/Avatar';\n\nimport styles from './StatisticsPublicForward.module.scss';\n\nexport type OwnProps = {\n  data: ApiMessagePublicForward;\n};\n\nconst StatisticsMessagePublicForward: FC<OwnProps> = ({ data }) => {\n  const lang = useOldLang();\n  const { openChatByUsername } = getActions();\n\n  const username = useMemo(() => (data.chat ? getMainUsername(data.chat) : undefined), [data.chat]);\n  const handleClick = useCallback(() => {\n    openChatByUsername({ username: username!, messageId: data.messageId });\n  }, [data.messageId, openChatByUsername, username]);\n\n  return (\n    <div className={buildClassName(styles.root, 'statistic-public-forward')} onClick={handleClick}>\n      <Avatar size=\"medium\" peer={data.chat} />\n\n      <div>\n        <div className={styles.title}>\n          {data.title}\n        </div>\n\n        <div className={styles.views}>\n          {lang('ChannelStats.ViewsCount', data.views, 'i')}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(StatisticsMessagePublicForward);\n","import type { FC } from '../../../lib/teact/teact';\nimport React, { memo, useCallback } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { ApiMessage, StatisticsMessageInteractionCounter } from '../../../api/types';\nimport type { LangFn } from '../../../hooks/useOldLang';\n\nimport {\n  getMessageMediaHash,\n  getMessageMediaThumbDataUri,\n  getMessageRoundVideo,\n  getMessageVideo,\n} from '../../../global/helpers';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatDateTimeToString } from '../../../util/dates/dateFormat';\nimport { renderMessageSummary } from '../../common/helpers/renderMessageText';\n\nimport useMedia from '../../../hooks/useMedia';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Icon from '../../common/icons/Icon';\nimport StatisticsRecentPostMeta from './StatisticsRecentPostMeta';\n\nimport styles from './StatisticsRecentPost.module.scss';\n\nexport type OwnProps = {\n  postStatistic: StatisticsMessageInteractionCounter;\n  message: ApiMessage;\n};\n\nconst StatisticsRecentMessage: FC<OwnProps> = ({ postStatistic, message }) => {\n  const lang = useOldLang();\n  const { toggleMessageStatistics } = getActions();\n\n  const mediaThumbnail = getMessageMediaThumbDataUri(message);\n  const mediaBlobUrl = useMedia(getMessageMediaHash(message, 'micro'));\n  const isRoundVideo = Boolean(getMessageRoundVideo(message));\n\n  const handleClick = useCallback(() => {\n    toggleMessageStatistics({ messageId: message.id });\n  }, [toggleMessageStatistics, message.id]);\n\n  return (\n    <div\n      className={buildClassName(\n        styles.root,\n        Boolean(mediaBlobUrl || mediaThumbnail) && styles.withImage,\n      )}\n      onClick={handleClick}\n    >\n      <div className={styles.title}>\n        <div className={styles.summary}>\n          {renderSummary(lang, message, mediaBlobUrl || mediaThumbnail, isRoundVideo)}\n        </div>\n        <div className={styles.meta}>\n          {lang('ChannelStats.ViewsCount', postStatistic.viewsCount, 'i')}\n        </div>\n      </div>\n\n      <div className={styles.info}>\n        <div className={styles.date}>\n          {formatDateTimeToString(message.date * 1000, lang.code)}\n        </div>\n        <StatisticsRecentPostMeta postStatistic={postStatistic} />\n      </div>\n    </div>\n  );\n};\n\nfunction renderSummary(lang: LangFn, message: ApiMessage, blobUrl?: string, isRoundVideo?: boolean) {\n  if (!blobUrl) {\n    return renderMessageSummary(lang, message);\n  }\n\n  return (\n    <span>\n      <img\n        src={blobUrl}\n        alt=\"\"\n        draggable={false}\n        className={buildClassName(styles.image, isRoundVideo && styles.round)}\n      />\n      {getMessageVideo(message) && <Icon name=\"play\" />}\n      {renderMessageSummary(lang, message, true)}\n    </span>\n  );\n}\n\nexport default memo(StatisticsRecentMessage);\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport type { StatisticsMessageInteractionCounter, StatisticsStoryInteractionCounter } from '../../../api/types';\n\nimport { formatIntegerCompact } from '../../../util/textFormat';\n\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Icon from '../../common/icons/Icon';\n\nimport styles from './StatisticsRecentPost.module.scss';\n\ninterface OwnProps {\n  postStatistic: StatisticsStoryInteractionCounter | StatisticsMessageInteractionCounter;\n}\n\nfunction StatisticsRecentPostMeta({ postStatistic }: OwnProps) {\n  const lang = useOldLang();\n  return (\n    <div className={styles.meta}>\n      {postStatistic.reactionsCount > 0 && (\n        <span className={styles.metaWithIcon}>\n          <Icon name=\"heart-outline\" className={styles.metaIcon} />\n          {formatIntegerCompact(postStatistic.reactionsCount)}\n        </span>\n      )}\n\n      {postStatistic.forwardsCount > 0 && (\n        <span className={styles.metaWithIcon}>\n          <Icon name=\"forward\" className={styles.metaIcon} />\n          {formatIntegerCompact(postStatistic.forwardsCount)}\n        </span>\n      )}\n\n      {!postStatistic.forwardsCount && !postStatistic.reactionsCount\n        && lang('ChannelStats.SharesCount_ZeroValueHolder')}\n    </div>\n  );\n}\n\nexport default memo(StatisticsRecentPostMeta);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type {\n  ApiChat,\n  ApiTypeStory,\n  StatisticsStoryInteractionCounter,\n} from '../../../api/types';\nimport type { LangFn } from '../../../hooks/useOldLang';\n\nimport { getStoryMediaHash } from '../../../global/helpers';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatDateTimeToString } from '../../../util/dates/dateFormat';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useMedia from '../../../hooks/useMedia';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Avatar from '../../common/Avatar';\nimport StatisticsRecentPostMeta from './StatisticsRecentPostMeta';\n\nimport styles from './StatisticsRecentPost.module.scss';\n\nexport type OwnProps = {\n  chat: ApiChat;\n  story?: ApiTypeStory;\n  postStatistic: StatisticsStoryInteractionCounter;\n};\n\nfunction StatisticsRecentStory({ chat, story, postStatistic }: OwnProps) {\n  const lang = useOldLang();\n  const { toggleStoryStatistics } = getActions();\n  const isLoaded = story && 'content' in story;\n\n  const video = isLoaded ? story.content.video : undefined;\n  const imageHash = isLoaded ? getStoryMediaHash(story) : undefined;\n  const imgBlobUrl = useMedia(imageHash);\n  const mediaThumbnail = imgBlobUrl || video?.thumbnail?.dataUri;\n\n  const handleClick = useLastCallback(() => {\n    toggleStoryStatistics({ storyId: postStatistic.storyId });\n  });\n\n  return (\n    <div\n      className={buildClassName(styles.root, styles.withImage)}\n      onClick={handleClick}\n    >\n      <div className={styles.title}>\n        <div className={styles.summary}>\n          {renderSummary(lang, chat, imgBlobUrl || mediaThumbnail)}\n        </div>\n        <div className={styles.meta}>\n          {lang('ChannelStats.ViewsCount', postStatistic.viewsCount, 'i')}\n        </div>\n      </div>\n\n      <div className={styles.info}>\n        <div className={styles.date}>\n          {isLoaded && Boolean(story.date) && formatDateTimeToString(story.date * 1000, lang.code)}\n        </div>\n        <StatisticsRecentPostMeta postStatistic={postStatistic} />\n      </div>\n    </div>\n  );\n}\n\nfunction renderSummary(lang: LangFn, chat: ApiChat, blobUrl?: string) {\n  return (\n    <span>\n      {blobUrl ? (\n        <span className={styles.imageContainer}>\n          <img\n            src={blobUrl}\n            alt=\"\"\n            draggable={false}\n            className={buildClassName(styles.image, styles.circle, styles.withStoryCircle)}\n          />\n        </span>\n      ) : (\n        <Avatar\n          peer={chat}\n          size=\"small-mobile\"\n          className={styles.image}\n          withStorySolid\n          forceUnreadStorySolid\n        />\n      )}\n\n      {lang('Story')}\n    </span>\n  );\n}\n\nexport default memo(StatisticsRecentStory);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type {\n  ApiChat, ApiStoryPublicForward, ApiUser,\n} from '../../../api/types';\n\nimport { getChatTitle, getUserFullName } from '../../../global/helpers';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Avatar from '../../common/Avatar';\n\nimport styles from './StatisticsPublicForward.module.scss';\n\nexport type OwnProps = {\n  data: ApiStoryPublicForward;\n  usersById: Record<string, ApiUser>;\n  chatsById: Record<string, ApiChat>;\n};\n\nfunction StatisticsMessagePublicForward({ data, chatsById, usersById }: OwnProps) {\n  const lang = useOldLang();\n  const { openChat } = getActions();\n  const user = usersById[data.peerId];\n  const chat = chatsById[data.peerId];\n\n  const handleClick = useLastCallback(() => {\n    openChat({ id: user.id });\n  });\n\n  return (\n    <div className={buildClassName(styles.root, 'statistic-public-forward')} onClick={handleClick}>\n      <Avatar size=\"medium\" peer={user || chat} withStorySolid forceUnreadStorySolid />\n\n      <div>\n        <div className={styles.title}>\n          {user ? getUserFullName(user) : getChatTitle(lang, chat)}\n        </div>\n\n        <div className={styles.views}>\n          {data.viewsCount ? lang('ChannelStats.ViewsCount', data.viewsCount, 'i') : lang('NoViews')}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(StatisticsMessagePublicForward);\n","import React, {\n  memo, useEffect, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiChat,\n  ApiPostStatistics,\n  ApiUser,\n  StatisticsGraph,\n} from '../../../api/types';\n\nimport { STATISTICS_PUBLIC_FORWARDS_LIMIT } from '../../../config';\nimport { selectChatFullInfo, selectTabState } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { callApi } from '../../../api/gramjs';\n\nimport useForceUpdate from '../../../hooks/useForceUpdate';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport InfiniteScroll from '../../ui/InfiniteScroll';\nimport Loading from '../../ui/Loading';\nimport StatisticsMessagePublicForward from './StatisticsMessagePublicForward';\nimport StatisticsOverview from './StatisticsOverview';\nimport StatisticsStoryPublicForward from './StatisticsStoryPublicForward';\n\nimport styles from './Statistics.module.scss';\n\ntype ILovelyChart = { create: Function };\nlet lovelyChartPromise: Promise<ILovelyChart>;\nlet LovelyChart: ILovelyChart;\n\nasync function ensureLovelyChart() {\n  if (!lovelyChartPromise) {\n    lovelyChartPromise = import('../../../lib/lovely-chart/LovelyChart') as Promise<ILovelyChart>;\n    LovelyChart = await lovelyChartPromise;\n  }\n\n  return lovelyChartPromise;\n}\n\nconst GRAPH_TITLES = {\n  viewsGraph: 'Stats.StoryInteractionsTitle',\n  reactionsGraph: 'ReactionsByEmotionChartTitle',\n};\nconst GRAPHS = Object.keys(GRAPH_TITLES) as (keyof ApiPostStatistics)[];\n\nexport type OwnProps = {\n  chatId: string;\n  isActive: boolean;\n};\n\nexport type StateProps = {\n  statistics?: ApiPostStatistics;\n  storyId?: number;\n  dcId?: number;\n  chatsById: Record<string, ApiChat>;\n  usersById: Record<string, ApiUser>;\n};\n\nfunction StoryStatistics({\n  chatId,\n  isActive,\n  statistics,\n  dcId,\n  storyId,\n  chatsById,\n  usersById,\n}: OwnProps & StateProps) {\n  const lang = useOldLang();\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [isReady, setIsReady] = useState(false);\n  const loadedCharts = useRef<string[]>([]);\n\n  const { loadStoryStatistics, loadStoryPublicForwards, loadStatisticsAsyncGraph } = getActions();\n  const forceUpdate = useForceUpdate();\n\n  useEffect(() => {\n    if (storyId) {\n      loadStoryStatistics({ chatId, storyId });\n    }\n  }, [chatId, storyId]);\n\n  useEffect(() => {\n    if (!isActive || storyId) {\n      loadedCharts.current = [];\n      setIsReady(false);\n    }\n  }, [isActive, storyId]);\n\n  // Load async graphs\n  useEffect(() => {\n    if (!statistics) {\n      return;\n    }\n\n    GRAPHS.forEach((name) => {\n      const graph = statistics[name as keyof typeof statistics];\n      const isAsync = typeof graph === 'string';\n\n      if (isAsync) {\n        loadStatisticsAsyncGraph({ name, chatId, token: graph });\n      }\n    });\n  }, [chatId, statistics, loadStatisticsAsyncGraph]);\n\n  useEffect(() => {\n    (async () => {\n      await ensureLovelyChart();\n\n      if (!isReady) {\n        setIsReady(true);\n        return;\n      }\n\n      if (!statistics || !containerRef.current) {\n        return;\n      }\n\n      GRAPHS.forEach((name, index: number) => {\n        const graph = statistics[name as keyof typeof statistics];\n        const isAsync = typeof graph === 'string';\n\n        if (isAsync || loadedCharts.current.includes(name)) {\n          return;\n        }\n\n        if (!graph) {\n          loadedCharts.current.push(name);\n\n          return;\n        }\n\n        const { zoomToken } = graph as StatisticsGraph;\n\n        LovelyChart.create(\n          containerRef.current!.children[index],\n          {\n            title: lang((GRAPH_TITLES as Record<string, string>)[name]),\n            ...zoomToken ? {\n              onZoom: (x: number) => callApi('fetchStatisticsAsyncGraph', { token: zoomToken, x, dcId }),\n              zoomOutLabel: lang('Graph.ZoomOut'),\n            } : {},\n            ...graph as StatisticsGraph,\n          },\n        );\n\n        loadedCharts.current.push(name);\n      });\n\n      forceUpdate();\n    })();\n  }, [\n    isReady, statistics, lang, chatId, storyId, loadStatisticsAsyncGraph, dcId, forceUpdate,\n  ]);\n\n  const handleLoadMore = useLastCallback(() => {\n    if (!storyId) return;\n\n    loadStoryPublicForwards({ chatId, storyId });\n  });\n\n  if (!isReady || !statistics || !storyId) {\n    return <Loading />;\n  }\n\n  return (\n    <div className={buildClassName(styles.root, 'custom-scroll', isReady && styles.ready)}>\n      <StatisticsOverview statistics={statistics} type=\"story\" title={lang('StatisticOverview')} />\n\n      {!loadedCharts.current.length && <Loading />}\n\n      <div ref={containerRef}>\n        {GRAPHS.map((graph) => (\n          <div className={buildClassName(styles.graph, !loadedCharts.current.includes(graph) && styles.hidden)} />\n        ))}\n      </div>\n\n      {Boolean(statistics.publicForwards) && (\n        <div className={styles.publicForwards}>\n          <h2 className={styles.publicForwardsTitle}>{lang('Stats.Message.PublicShares')}</h2>\n\n          <InfiniteScroll\n            items={statistics.publicForwardsData}\n            itemSelector=\".statistic-public-forward\"\n            onLoadMore={handleLoadMore}\n            preloadBackwards={STATISTICS_PUBLIC_FORWARDS_LIMIT}\n            noFastList\n          >\n            {statistics.publicForwardsData!.map((item) => {\n              if ('messageId' in item) {\n                return (\n                  <StatisticsMessagePublicForward key={`message_${item.messageId}`} data={item} />\n                );\n              }\n\n              return (\n                <StatisticsStoryPublicForward\n                  key={`story_${item.storyId}`}\n                  data={item}\n                  chatsById={chatsById}\n                  usersById={usersById}\n                />\n              );\n            })}\n          </InfiniteScroll>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { chatId }): StateProps => {\n    const dcId = selectChatFullInfo(global, chatId)?.statisticsDcId;\n    const tabState = selectTabState(global);\n    const statistics = tabState.statistics.currentStory;\n    const storyId = tabState.statistics.currentStoryId;\n    const { byId: usersById } = global.users;\n    const { byId: chatsById } = global.chats;\n\n    return {\n      statistics, dcId, storyId, usersById, chatsById,\n    };\n  },\n)(StoryStatistics));\n","import React, { memo, useEffect, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiStealthMode } from '../../api/types';\n\nimport { selectIsCurrentUserPremium, selectTabState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { getServerTime } from '../../util/serverTime';\n\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport Button from '../ui/Button';\nimport ListItem from '../ui/ListItem';\nimport Modal from '../ui/Modal';\nimport TextTimer from '../ui/TextTimer';\n\nimport styles from './StealthModeModal.module.scss';\n\ntype StateProps = {\n  isOpen?: boolean;\n  stealthMode?: ApiStealthMode;\n  isCurrentUserPremium?: boolean;\n};\n\nconst StealthModeModal = ({ isOpen, stealthMode, isCurrentUserPremium } : StateProps) => {\n  const {\n    toggleStealthModal,\n    activateStealthMode,\n    showNotification,\n    openPremiumModal,\n  } = getActions();\n  const [isOnCooldown, setIsOnCooldown] = useState(false);\n\n  useEffect(() => {\n    if (!stealthMode) return;\n    const serverTime = getServerTime();\n    if (stealthMode.cooldownUntil && stealthMode.cooldownUntil > serverTime) {\n      setIsOnCooldown(true);\n    }\n  }, [stealthMode, isOpen]);\n\n  const lang = useOldLang();\n\n  const handleTimerEnds = useLastCallback(() => {\n    setIsOnCooldown(false);\n  });\n\n  const handleClose = useLastCallback(() => {\n    toggleStealthModal({ isOpen: false });\n  });\n\n  const handleActivate = useLastCallback(() => {\n    if (!isCurrentUserPremium) {\n      openPremiumModal({ initialSection: 'stories' });\n      return;\n    }\n\n    activateStealthMode();\n    showNotification({\n      title: lang('StealthModeOn'),\n      message: lang('StealthModeOnHint'),\n    });\n    toggleStealthModal({ isOpen: false });\n  });\n\n  return (\n    <Modal\n      className=\"component-theme-dark\"\n      contentClassName={styles.root}\n      isOpen={isOpen}\n      isSlim\n      onClose={handleClose}\n    >\n      <Button\n        round\n        color=\"translucent\"\n        size=\"smaller\"\n        className={styles.closeButton}\n        ariaLabel={lang('Close')}\n        onClick={handleClose}\n      >\n        <i className=\"icon icon-close\" />\n      </Button>\n      <div className={styles.stealthIcon}>\n        <i className=\"icon icon-eye-closed-outline\" />\n      </div>\n      <div className={styles.title}>{lang('StealthMode')}</div>\n      <div className={styles.description}>\n        {lang(isCurrentUserPremium ? 'StealthModeHint' : 'StealthModePremiumHint')}\n      </div>\n      <ListItem\n        className={buildClassName(styles.listItem, 'smaller-icon')}\n        multiline\n        inactive\n        leftElement={<i className={buildClassName('icon icon-stealth-past', styles.icon)} />}\n      >\n        <span className=\"title\">{lang('HideRecentViews')}</span>\n        <span className={buildClassName('subtitle', styles.subtitle)}>{lang('HideRecentViewsDescription')}</span>\n      </ListItem>\n      <ListItem\n        className={buildClassName(styles.listItem, 'smaller-icon')}\n        multiline\n        inactive\n        leftElement={<i className={buildClassName('icon icon-stealth-future', styles.icon)} aria-hidden />}\n      >\n        <span className=\"title\">{lang('HideNextViews')}</span>\n        <span className={buildClassName('subtitle', styles.subtitle)}>{lang('HideNextViewsDescription')}</span>\n      </ListItem>\n      <Button\n        className={styles.button}\n        size=\"smaller\"\n        disabled={isOnCooldown}\n        isShiny={!isCurrentUserPremium}\n        withPremiumGradient={!isCurrentUserPremium}\n        onClick={handleActivate}\n      >\n        {!isCurrentUserPremium ? lang('UnlockStealthMode')\n          : isOnCooldown\n            ? (<TextTimer langKey=\"AvailableIn\" endsAt={stealthMode!.cooldownUntil!} onEnd={handleTimerEnds} />)\n            : lang('EnableStealthMode')}\n      </Button>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal((global): StateProps => {\n  const tabState = selectTabState(global);\n\n  return {\n    isOpen: tabState.storyViewer?.isStealthModalOpen,\n    stealthMode: global.stories.stealthMode,\n    isCurrentUserPremium: selectIsCurrentUserPremium(global),\n  };\n})(StealthModeModal));\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type {\n  ApiChat,\n  ApiMediaAreaChannelPost,\n  ApiPeer, ApiStealthMode, ApiStory, ApiTypeStory,\n} from '../../api/types';\nimport type { IDimensions } from '../../global/types';\nimport type { Signal } from '../../util/signals';\nimport { MAIN_THREAD_ID } from '../../api/types';\n\nimport { EDITABLE_STORY_INPUT_CSS_SELECTOR, EDITABLE_STORY_INPUT_ID } from '../../config';\nimport { getSenderTitle, isChatChannel, isUserId } from '../../global/helpers';\nimport {\n  selectChat,\n  selectIsCurrentUserPremium,\n  selectPeer,\n  selectPeerStory,\n  selectPerformanceSettingsValue,\n  selectTabState,\n  selectUser,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { formatMediaDuration, formatRelativeTime } from '../../util/dates/dateFormat';\nimport download from '../../util/download';\nimport { round } from '../../util/math';\nimport { getServerTime } from '../../util/serverTime';\nimport { IS_SAFARI } from '../../util/windowEnvironment';\nimport renderText from '../common/helpers/renderText';\nimport { BASE_STORY_HEIGHT, BASE_STORY_WIDTH } from './helpers/dimensions';\nimport { PRIMARY_VIDEO_MIME, SECONDARY_VIDEO_MIME } from './helpers/videoFormats';\n\nimport useUnsupportedMedia from '../../hooks/media/useUnsupportedMedia';\nimport useAppLayout, { getIsMobile } from '../../hooks/useAppLayout';\nimport useCanvasBlur from '../../hooks/useCanvasBlur';\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useLongPress from '../../hooks/useLongPress';\nimport useMediaTransition from '../../hooks/useMediaTransition';\nimport useOldLang from '../../hooks/useOldLang';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport { useStreaming } from '../../hooks/useStreaming';\nimport useBackgroundMode from '../../hooks/window/useBackgroundMode';\nimport useStoryPreloader from './hooks/useStoryPreloader';\nimport useStoryProps from './hooks/useStoryProps';\n\nimport Avatar from '../common/Avatar';\nimport Composer from '../common/Composer';\nimport Icon from '../common/icons/Icon';\nimport Button from '../ui/Button';\nimport DropdownMenu from '../ui/DropdownMenu';\nimport MenuItem from '../ui/MenuItem';\nimport OptimizedVideo from '../ui/OptimizedVideo';\nimport Skeleton from '../ui/placeholder/Skeleton';\nimport Transition from '../ui/Transition';\nimport MediaAreaOverlay from './mediaArea/MediaAreaOverlay';\nimport StoryCaption from './StoryCaption';\nimport StoryFooter from './StoryFooter';\nimport StoryProgress from './StoryProgress';\n\nimport styles from './StoryViewer.module.scss';\n\ninterface OwnProps {\n  peerId: string;\n  storyId: number;\n  dimensions: IDimensions;\n  // eslint-disable-next-line react/no-unused-prop-types\n  isReportModalOpen?: boolean;\n  // eslint-disable-next-line react/no-unused-prop-types\n  isDeleteModalOpen?: boolean;\n  isPrivateStories?: boolean;\n  isArchivedStories?: boolean;\n  isSingleStory?: boolean;\n  getIsAnimating: Signal<boolean>;\n  onDelete: (story: ApiTypeStory) => void;\n  onClose: NoneToVoidFunction;\n  onReport: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  peer: ApiPeer;\n  forwardSender?: ApiPeer;\n  fromPeer?: ApiPeer;\n  story?: ApiTypeStory;\n  isMuted: boolean;\n  orderedIds?: number[];\n  shouldForcePause?: boolean;\n  storyChangelogUserId?: string;\n  viewersExpirePeriod: number;\n  isChatExist?: boolean;\n  areChatSettingsLoaded?: boolean;\n  isCurrentUserPremium?: boolean;\n  stealthMode: ApiStealthMode;\n  withHeaderAnimation?: boolean;\n}\n\nconst VIDEO_MIN_READY_STATE = IS_SAFARI ? 4 : 3;\nconst SPACEBAR_CODE = 32;\n\nconst STEALTH_MODE_NOTIFICATION_DURATION = 4000;\n\nfunction Story({\n  peerId,\n  storyId,\n  peer,\n  forwardSender,\n  fromPeer,\n  isMuted,\n  isArchivedStories,\n  isPrivateStories,\n  story,\n  orderedIds,\n  isSingleStory,\n  dimensions,\n  shouldForcePause,\n  storyChangelogUserId,\n  viewersExpirePeriod,\n  isChatExist,\n  areChatSettingsLoaded,\n  getIsAnimating,\n  isCurrentUserPremium,\n  stealthMode,\n  withHeaderAnimation,\n  onDelete,\n  onClose,\n  onReport,\n}: OwnProps & StateProps) {\n  const {\n    viewStory,\n    setStoryViewerMuted,\n    openPreviousStory,\n    openNextStory,\n    loadPeerSkippedStories,\n    openForwardMenu,\n    copyStoryLink,\n    toggleStoryInProfile,\n    openChat,\n    showNotification,\n    openStoryPrivacyEditor,\n    loadChatSettings,\n    fetchChat,\n    loadStoryViews,\n    toggleStealthModal,\n  } = getActions();\n  const serverTime = getServerTime();\n\n  const lang = useOldLang();\n  const { isMobile } = useAppLayout();\n  const [isComposerHasFocus, markComposerHasFocus, unmarkComposerHasFocus] = useFlag(false);\n  const [isStoryPlaybackRequested, playStory, pauseStory] = useFlag(false);\n  const [isStoryPlaying, markStoryPlaying, unmarkStoryPlaying] = useFlag(false);\n  const [isAppFocused, markAppFocused, unmarkAppFocused] = useFlag(true);\n  const [isCaptionExpanded, expandCaption, foldCaption] = useFlag(false);\n  const [isPausedBySpacebar, setIsPausedBySpacebar] = useState(false);\n  const [isPausedByLongPress, markIsPausedByLongPress, unmarkIsPausedByLongPress] = useFlag(false);\n  const [isDropdownMenuOpen, markDropdownMenuOpen, unmarkDropdownMenuOpen] = useFlag(false);\n  // eslint-disable-next-line no-null/no-null\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const {\n    isDeletedStory,\n    hasText,\n    hasForwardInfo,\n    thumbnail,\n    previewBlobUrl,\n    isVideo,\n    noSound,\n    fullMediaData,\n    altMediaHash,\n    altMediaData,\n    hasFullData,\n    hasThumb,\n    canDownload,\n    downloadMediaData,\n  } = useStoryProps(story, isCurrentUserPremium, isDropdownMenuOpen);\n\n  const isLoadedStory = story && 'content' in story;\n  const isChangelog = peerId === storyChangelogUserId;\n  const isUserStory = isUserId(peerId);\n  const isChatStory = !isUserStory;\n  const isChannelStory = isChatStory && isChatChannel(peer as ApiChat);\n  const isOut = isLoadedStory && story.isOut;\n\n  const canPinToProfile = useCurrentOrPrev(\n    isOut ? !story.isInProfile : undefined,\n    true,\n  );\n  const canUnpinFromProfile = useCurrentOrPrev(\n    isOut ? story.isInProfile : undefined,\n    true,\n  );\n  const areViewsExpired = Boolean(\n    isOut && (story!.date + viewersExpirePeriod) < getServerTime(),\n  );\n\n  const forwardSenderTitle = forwardSender ? getSenderTitle(lang, forwardSender)\n    : (isLoadedStory && story.forwardInfo?.fromName);\n\n  const canCopyLink = Boolean(\n    isLoadedStory\n    && story.isPublic\n    && !isChangelog\n    && peer?.usernames?.length,\n  );\n\n  const canShare = Boolean(\n    isLoadedStory\n    && story.isPublic\n    && !story.noForwards\n    && !isChangelog\n    && !isCaptionExpanded,\n  );\n\n  const canPlayStory = Boolean(\n    hasFullData && !shouldForcePause && isAppFocused && !isComposerHasFocus && !isCaptionExpanded\n    && !isPausedBySpacebar && !isPausedByLongPress,\n  );\n\n  const duration = isLoadedStory && story.content.video?.duration\n    ? story.content.video.duration\n    : undefined;\n\n  const shouldShowComposer = !(isOut && isUserStory) && !isChangelog && !isChannelStory;\n  const shouldShowFooter = isLoadedStory && !shouldShowComposer && (isOut || isChannelStory);\n  const headerAnimation = isMobile && withHeaderAnimation ? 'slideFade' : 'none';\n\n  const {\n    shouldRender: shouldRenderSkeleton,\n    transitionClassNames: skeletonTransitionClassNames,\n  } = useShowTransition(!hasFullData);\n\n  const {\n    transitionClassNames: mediaTransitionClassNames,\n  } = useShowTransition(Boolean(fullMediaData));\n\n  const thumbRef = useCanvasBlur(thumbnail, !hasThumb);\n  const previewTransitionClassNames = useMediaTransition(previewBlobUrl);\n\n  const {\n    shouldRender: shouldRenderComposer,\n    transitionClassNames: composerAppearanceAnimationClassNames,\n  } = useShowTransition(shouldShowComposer);\n\n  const {\n    shouldRender: shouldRenderCaptionBackdrop,\n    transitionClassNames: captionBackdropTransitionClassNames,\n  } = useShowTransition(hasText && isCaptionExpanded);\n\n  const { transitionClassNames: appearanceAnimationClassNames } = useShowTransition(true);\n  const {\n    shouldRender: shouldRenderCaption,\n    transitionClassNames: captionAppearanceAnimationClassNames,\n  } = useShowTransition(hasText || hasForwardInfo);\n\n  const isStreamingSupported = useStreaming(videoRef, fullMediaData, PRIMARY_VIDEO_MIME);\n\n  useStoryPreloader(peerId, storyId);\n\n  useEffect(() => {\n    if (storyId) {\n      viewStory({ peerId, storyId });\n    }\n  }, [storyId, peerId]);\n\n  useEffect(() => {\n    loadPeerSkippedStories({ peerId });\n  }, [peerId]);\n\n  // Fetching user privacy settings for use in Composer\n  useEffect(() => {\n    const canWrite = isUserId(peerId);\n    if (!isChatExist && canWrite) {\n      fetchChat({ chatId: peerId });\n    }\n  }, [isChatExist, peerId]);\n  useEffect(() => {\n    if (isChatExist && !areChatSettingsLoaded) {\n      loadChatSettings({ chatId: peerId });\n    }\n  }, [areChatSettingsLoaded, isChatExist, peerId]);\n\n  const handlePauseStory = useLastCallback(() => {\n    if (isVideo) {\n      videoRef.current?.pause();\n    }\n\n    unmarkStoryPlaying();\n    pauseStory();\n  });\n\n  const handlePlayStory = useLastCallback(() => {\n    if (!canPlayStory) return;\n\n    playStory();\n    if (!isVideo) markStoryPlaying();\n  });\n\n  const handleLongPressStart = useLastCallback(() => {\n    markIsPausedByLongPress();\n  });\n  const handleLongPressEnd = useLastCallback(() => {\n    unmarkIsPausedByLongPress();\n  });\n\n  const handleDropdownMenuOpen = useLastCallback(() => {\n    markDropdownMenuOpen();\n    handlePauseStory();\n  });\n\n  const handleDropdownMenuClose = useLastCallback(() => {\n    unmarkDropdownMenuOpen();\n    handlePlayStory();\n  });\n\n  const {\n    onMouseDown: handleLongPressMouseDown,\n    onMouseUp: handleLongPressMouseUp,\n    onMouseLeave: handleLongPressMouseLeave,\n    onTouchStart: handleLongPressTouchStart,\n    onTouchEnd: handleLongPressTouchEnd,\n  } = useLongPress(handleLongPressStart, handleLongPressEnd);\n\n  const isUnsupported = useUnsupportedMedia(\n    videoRef,\n    undefined,\n    !isVideo || !fullMediaData || isStreamingSupported,\n  );\n\n  const hasAllData = fullMediaData && (!altMediaHash || altMediaData);\n  // Play story after media has been downloaded\n  useEffect(() => {\n    if (hasAllData && !isUnsupported) handlePlayStory();\n  }, [hasAllData, isUnsupported]);\n\n  useBackgroundMode(unmarkAppFocused, markAppFocused);\n\n  useEffect(() => {\n    if (!hasAllData) return;\n    videoRef.current?.load();\n  }, [hasAllData]);\n\n  useEffect(() => {\n    if (!isLoadedStory || isDeletedStory || areViewsExpired) return;\n\n    if (!isOut && !isChannelStory) return;\n\n    // Refresh counters each time\n    loadStoryViews({ peerId, storyId });\n  }, [isDeletedStory, areViewsExpired, isLoadedStory, peerId, storyId, isOut, isChannelStory]);\n\n  useEffect(() => {\n    if (\n      shouldForcePause || !isAppFocused || isComposerHasFocus\n      || isCaptionExpanded || isPausedBySpacebar || isPausedByLongPress\n    ) {\n      handlePauseStory();\n    } else {\n      handlePlayStory();\n    }\n  }, [\n    handlePlayStory, isAppFocused, isCaptionExpanded, isComposerHasFocus,\n    shouldForcePause, isPausedBySpacebar, isPausedByLongPress,\n  ]);\n\n  useEffect(() => {\n    if (isComposerHasFocus || shouldForcePause || isCaptionExpanded) {\n      return undefined;\n    }\n\n    function handleKeyDown(e: KeyboardEvent) {\n      if (e.keyCode === SPACEBAR_CODE) {\n        e.preventDefault();\n        setIsPausedBySpacebar(!isPausedBySpacebar);\n      }\n    }\n\n    document.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [isCaptionExpanded, isComposerHasFocus, isPausedBySpacebar, shouldForcePause]);\n\n  // Reset the state of `isPausedBySpacebar` when closing the caption, losing focus by composer or disable forced pause\n  useEffectWithPrevDeps(([\n    prevIsComposerHasFocus,\n    prevIsCaptionExpanded,\n    prevShouldForcePause,\n    prevIsAppFocused,\n    prevIsPausedByLongPress,\n  ]) => {\n    if (\n      !isPausedBySpacebar || isCaptionExpanded || isComposerHasFocus\n      || shouldForcePause || !isAppFocused || isPausedByLongPress\n    ) {\n      return;\n    }\n\n    if (\n      prevIsCaptionExpanded !== isCaptionExpanded\n      || prevIsComposerHasFocus !== isComposerHasFocus\n      || prevShouldForcePause !== shouldForcePause\n      || prevIsAppFocused !== isAppFocused\n      || prevIsPausedByLongPress !== isPausedByLongPress\n    ) {\n      setIsPausedBySpacebar(false);\n    }\n  }, [isComposerHasFocus, isCaptionExpanded, shouldForcePause, isAppFocused, isPausedByLongPress, isPausedBySpacebar]);\n\n  const handleOpenChat = useLastCallback(() => {\n    onClose();\n    openChat({ id: peerId });\n  });\n\n  const handleForwardPeerClick = useLastCallback(() => {\n    onClose();\n    openChat({ id: forwardSender!.id });\n  });\n\n  const handleFromPeerClick = useLastCallback(() => {\n    onClose();\n    openChat({ id: fromPeer!.id });\n  });\n\n  const handleOpenPrevStory = useLastCallback(() => {\n    openPreviousStory();\n  });\n\n  const handleOpenNextStory = useLastCallback(() => {\n    openNextStory();\n  });\n\n  const handleVideoStoryTimeUpdate = useLastCallback((e: React.SyntheticEvent<HTMLVideoElement>) => {\n    const video = e.currentTarget;\n    if (video.readyState >= VIDEO_MIN_READY_STATE) {\n      markStoryPlaying();\n    } else {\n      unmarkStoryPlaying();\n    }\n    if (duration && round(video.currentTime, 2) >= round(duration, 2)) {\n      handleOpenNextStory();\n    }\n  });\n\n  useEffect(() => {\n    return !getIsAnimating() && !isComposerHasFocus ? captureKeyboardListeners({\n      onRight: handleOpenNextStory,\n      onLeft: handleOpenPrevStory,\n    }) : undefined;\n  }, [getIsAnimating, isComposerHasFocus]);\n\n  const handleCopyStoryLink = useLastCallback(() => {\n    copyStoryLink({ peerId, storyId });\n  });\n\n  const handlePinClick = useLastCallback(() => {\n    toggleStoryInProfile({ peerId, storyId, isInProfile: true });\n  });\n\n  const handleUnpinClick = useLastCallback(() => {\n    toggleStoryInProfile({ peerId, storyId, isInProfile: false });\n  });\n\n  const handleDeleteStoryClick = useLastCallback(() => {\n    onDelete(story!);\n  });\n\n  const handleReportStoryClick = useLastCallback(() => {\n    onReport();\n  });\n\n  const handleForwardClick = useLastCallback(() => {\n    openForwardMenu({ fromChatId: peerId, storyId });\n  });\n\n  const handleInfoPrivacyEdit = useLastCallback(() => {\n    openStoryPrivacyEditor();\n  });\n\n  const handleInfoPrivacyClick = useLastCallback(() => {\n    const visibility = !isLoadedStory || story.isPublic\n      ? undefined\n      : story.isForContacts ? 'contacts' : (story.isForCloseFriends ? 'closeFriends' : 'nobody');\n\n    let message;\n    const myName = getSenderTitle(lang, peer);\n    switch (visibility) {\n      case 'nobody':\n        message = lang('StorySelectedContactsHint', myName);\n        break;\n      case 'contacts':\n        message = lang('StoryContactsHint', myName);\n        break;\n      case 'closeFriends':\n        message = lang('StoryCloseFriendsHint', myName);\n        break;\n      default:\n        return;\n    }\n    showNotification({ message });\n  });\n\n  const handleVolumeMuted = useLastCallback(() => {\n    if (noSound) {\n      showNotification({\n        message: lang('Story.TooltipVideoHasNoSound'),\n      });\n      return;\n    }\n    // Browser requires explicit user interaction to keep video playing after unmuting\n    videoRef.current!.muted = !videoRef.current!.muted;\n    setStoryViewerMuted({ isMuted: !isMuted });\n  });\n\n  const handleOpenStealthModal = useLastCallback(() => {\n    if (stealthMode.activeUntil && getServerTime() < stealthMode.activeUntil) {\n      const diff = stealthMode.activeUntil - getServerTime();\n      showNotification({\n        title: lang('StealthModeOn'),\n        message: lang('Story.ToastStealthModeActiveText', formatMediaDuration(diff)),\n        duration: STEALTH_MODE_NOTIFICATION_DURATION,\n      });\n      return;\n    }\n\n    toggleStealthModal({ isOpen: true });\n  });\n\n  const handleDownload = useLastCallback(() => {\n    if (!downloadMediaData) return;\n    download(downloadMediaData, `story-${peerId}-${storyId}.${isVideo ? 'mp4' : 'jpg'}`);\n  });\n\n  useEffect(() => {\n    if (!isDeletedStory) return;\n\n    showNotification({\n      message: lang('StoryNotFound'),\n    });\n  }, [lang, isDeletedStory]);\n\n  const MenuButton: FC<{ onTrigger: () => void; isOpen?: boolean }> = useMemo(() => {\n    return ({ onTrigger, isOpen }) => {\n      return (\n        <Button\n          round\n          ripple={!isMobile}\n          size=\"tiny\"\n          color=\"translucent-white\"\n          onClick={onTrigger}\n          className={buildClassName(styles.button, isOpen && 'active')}\n          ariaLabel={lang('AccDescrOpenMenu2')}\n        >\n          <i className={buildClassName('icon icon-more')} aria-hidden />\n        </Button>\n      );\n    };\n  }, [isMobile, lang]);\n\n  function renderStoriesTabs() {\n    return (\n      <div className={styles.storyIndicators}>\n        {(isSingleStory ? [storyId] : orderedIds ?? []).map((id) => (\n          <StoryProgress\n            key={`progress-${id}`}\n            isActive={id === story?.id}\n            isVideo={isVideo}\n            isViewed={Boolean(story?.id && ((isPrivateStories || isArchivedStories) ? id > story?.id : id < story?.id))}\n            isPaused={!isStoryPlaying}\n            duration={duration}\n            onImageComplete={handleOpenNextStory}\n          />\n        ))}\n      </div>\n    );\n  }\n\n  function renderStoryPrivacyButton() {\n    if (!isUserStory) return undefined;\n\n    let privacyIcon = 'channel-filled';\n    const gradient: Record<string, [string, string]> = {\n      'channel-filled': ['#50ABFF', '#007AFF'],\n      'user-filled': ['#C36EFF', '#8B60FA'],\n      'favorite-filled': ['#88D93A', '#30B73B'],\n      'group-filled': ['#FFB743', '#F69A36'],\n    };\n\n    if (isOut) {\n      const { visibility } = (story && 'visibility' in story && story.visibility) || {};\n\n      switch (visibility) {\n        case 'everybody':\n          privacyIcon = 'channel-filled';\n          break;\n        case 'contacts':\n          privacyIcon = 'user-filled';\n          break;\n        case 'closeFriends':\n          privacyIcon = 'favorite-filled';\n          break;\n        case 'nobody':\n          privacyIcon = 'group-filled';\n      }\n    } else {\n      if (!story || !('content' in story) || story.isPublic) {\n        return undefined;\n      }\n\n      privacyIcon = story.isForCloseFriends\n        ? 'favorite-filled'\n        : (story.isForContacts ? 'user-filled' : 'group-filled');\n    }\n\n    return (\n      <div\n        className={buildClassName(styles.visibilityButton, isOut && styles.visibilityButtonSelf)}\n        onClick={isOut ? handleInfoPrivacyEdit : handleInfoPrivacyClick}\n        style={`--color-from: ${gradient[privacyIcon][0]}; --color-to: ${gradient[privacyIcon][1]}`}\n      >\n        <i className={`icon icon-${privacyIcon}`} aria-hidden />\n        {isOut && <i className=\"icon icon-next\" aria-hidden />}\n      </div>\n    );\n  }\n\n  function renderSenderInfo() {\n    return (\n      <div className={styles.senderInfo}>\n        <Avatar\n          peer={peer}\n          size=\"tiny\"\n          onClick={handleOpenChat}\n        />\n        <div className={styles.senderMeta}>\n          <span onClick={handleOpenChat} className={styles.senderName}>\n            {renderText(getSenderTitle(lang, peer) || '')}\n          </span>\n          <div className={styles.storyMetaRow}>\n            {forwardSenderTitle && (\n              <span\n                className={buildClassName(\n                  styles.storyMeta, styles.forwardHeader, forwardSender && styles.clickable,\n                )}\n                onClick={forwardSender ? handleForwardPeerClick : undefined}\n              >\n                <Icon name=\"loop\" />\n                <span className={styles.headerTitle}>\n                  {renderText(forwardSenderTitle)}\n                </span>\n              </span>\n            )}\n            {fromPeer && (\n              <span\n                className={buildClassName(\n                  styles.storyMeta, styles.fromPeer,\n                )}\n                onClick={handleFromPeerClick}\n              >\n                <Avatar peer={fromPeer} size=\"micro\" />\n                <span className={styles.headerTitle}>\n                  {renderText(getSenderTitle(lang, fromPeer) || '')}\n                </span>\n              </span>\n            )}\n            {story && 'date' in story && (\n              <span className={styles.storyMeta}>{formatRelativeTime(lang, serverTime, story.date)}</span>\n            )}\n            {isLoadedStory && story.isEdited && (\n              <span className={styles.storyMeta}>{lang('Story.HeaderEdited')}</span>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  function renderSender() {\n    return (\n      <div className={styles.sender}>\n        <Transition activeKey={Number(peerId)} name={headerAnimation} className={styles.senderInfoTransition}>\n          {renderSenderInfo()}\n        </Transition>\n\n        <div className={styles.actions}>\n          {renderStoryPrivacyButton()}\n          {isVideo && (\n            <Button\n              className={styles.button}\n              round\n              ripple={!isMobile}\n              size=\"tiny\"\n              color=\"translucent-white\"\n              disabled={!hasFullData}\n              onClick={handleVolumeMuted}\n              ariaLabel={lang('Volume')}\n            >\n              <i\n                className={buildClassName(\n                  'icon',\n                  isMuted || noSound ? 'icon-speaker-muted-story' : 'icon-speaker-story',\n                )}\n                aria-hidden\n              />\n            </Button>\n          )}\n          <DropdownMenu\n            className={styles.buttonMenu}\n            trigger={MenuButton}\n            positionX=\"right\"\n            onOpen={handleDropdownMenuOpen}\n            onClose={handleDropdownMenuClose}\n          >\n            {canCopyLink && <MenuItem icon=\"copy\" onClick={handleCopyStoryLink}>{lang('CopyLink')}</MenuItem>}\n            {canPinToProfile && (\n              <MenuItem icon=\"save-story\" onClick={handlePinClick}>\n                {lang(isUserStory ? 'StorySave' : 'SaveToPosts')}\n              </MenuItem>\n            )}\n            {canUnpinFromProfile && (\n              <MenuItem icon=\"delete\" onClick={handleUnpinClick}>\n                {lang(isUserStory ? 'ArchiveStory' : 'RemoveFromPosts')}\n              </MenuItem>\n            )}\n            {canDownload && (\n              <MenuItem icon=\"download\" disabled={!downloadMediaData} onClick={handleDownload}>\n                {lang('lng_media_download')}\n              </MenuItem>\n            )}\n            {!isOut && isUserStory && (\n              <MenuItem icon=\"eye-closed-outline\" onClick={handleOpenStealthModal}>\n                {lang('StealthMode')}\n              </MenuItem>\n            )}\n            {!isOut && <MenuItem icon=\"flag\" onClick={handleReportStoryClick}>{lang('lng_report_story')}</MenuItem>}\n            {isOut && <MenuItem icon=\"delete\" destructive onClick={handleDeleteStoryClick}>{lang('Delete')}</MenuItem>}\n          </DropdownMenu>\n          <Button\n            className={buildClassName(styles.button, styles.closeButton)}\n            round\n            size=\"tiny\"\n            color=\"translucent-white\"\n            ariaLabel={lang('Close')}\n            onClick={onClose}\n          >\n            <i className={buildClassName('icon icon-close')} aria-hidden />\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={buildClassName(styles.slideInner, 'component-theme-dark')}\n      onMouseDown={handleLongPressMouseDown}\n      onMouseUp={handleLongPressMouseUp}\n      onMouseLeave={handleLongPressMouseLeave}\n      onTouchStart={handleLongPressTouchStart}\n      onTouchEnd={handleLongPressTouchEnd}\n    >\n      <div className={buildClassName(styles.storyHeader, appearanceAnimationClassNames)}>\n        {renderStoriesTabs()}\n        {renderSender()}\n      </div>\n\n      <div\n        className={styles.mediaWrapper}\n        style={`width: ${dimensions.width}px; height: ${dimensions.height}px`}\n      >\n        <canvas ref={thumbRef} className={styles.thumbnail} />\n        {previewBlobUrl && (\n          <img\n            key={`preview-${storyId}`}\n            src={previewBlobUrl}\n            draggable={false}\n            alt=\"\"\n            className={buildClassName(styles.media, styles.mediaPreview, previewTransitionClassNames)}\n          />\n        )}\n        {shouldRenderSkeleton && (\n          <Skeleton className={buildClassName(skeletonTransitionClassNames, styles.fullSize)} />\n        )}\n        {!isVideo && fullMediaData && (\n          <img\n            src={fullMediaData}\n            alt=\"\"\n            className={buildClassName(styles.media, mediaTransitionClassNames)}\n            draggable={false}\n          />\n        )}\n        {isVideo && fullMediaData && (\n          <OptimizedVideo\n            ref={videoRef}\n            key={`video-${storyId}`}\n            className={buildClassName(styles.media, mediaTransitionClassNames)}\n            canPlay={isStoryPlaybackRequested}\n            muted={isMuted}\n            width={BASE_STORY_WIDTH}\n            height={BASE_STORY_HEIGHT}\n            draggable={false}\n            playsInline\n            disablePictureInPicture\n            isPriority\n            onPause={unmarkStoryPlaying}\n            onWaiting={unmarkStoryPlaying}\n            disableRemotePlayback\n            onTimeUpdate={handleVideoStoryTimeUpdate}\n          >\n            <source src={fullMediaData} type={PRIMARY_VIDEO_MIME} width=\"720\" />\n            {altMediaData && <source src={altMediaData} type={SECONDARY_VIDEO_MIME} width=\"480\" />}\n          </OptimizedVideo>\n        )}\n\n        {!isPausedByLongPress && !isComposerHasFocus && (\n          <>\n            <button\n              type=\"button\"\n              className={buildClassName(styles.navigate, styles.prev)}\n              onClick={handleOpenPrevStory}\n              aria-label={lang('Previous')}\n            />\n            <button\n              type=\"button\"\n              className={buildClassName(styles.navigate, styles.next)}\n              onClick={handleOpenNextStory}\n              aria-label={lang('Next')}\n            />\n          </>\n        )}\n        {isLoadedStory && fullMediaData && (\n          <MediaAreaOverlay story={story} isActive />\n        )}\n        {!isMobile && (\n          <div className={styles.content}>\n            <div className={styles.contentInner}>\n              <Avatar\n                peer={peer}\n                withStory\n                storyViewerMode=\"disabled\"\n              />\n              <div className={styles.name}>{renderText(getSenderTitle(lang, peer) || '')}</div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {shouldShowFooter && (\n        <StoryFooter story={story} className={appearanceAnimationClassNames} />\n      )}\n      {shouldRenderCaptionBackdrop && (\n        <div\n          tabIndex={0}\n          role=\"button\"\n          className={buildClassName(styles.captionBackdrop, captionBackdropTransitionClassNames)}\n          onClick={() => foldCaption()}\n          aria-label={lang('Close')}\n        />\n      )}\n      {hasText && <div className={buildClassName(styles.captionGradient, captionAppearanceAnimationClassNames)} />}\n      {shouldRenderCaption && (\n        <StoryCaption\n          key={`caption-${storyId}-${peerId}`}\n          story={story as ApiStory}\n          isExpanded={isCaptionExpanded}\n          onExpand={expandCaption}\n          onFold={foldCaption}\n          className={captionAppearanceAnimationClassNames}\n        />\n      )}\n      {shouldRenderComposer && (\n        <Composer\n          type=\"story\"\n          chatId={peerId}\n          threadId={MAIN_THREAD_ID}\n          storyId={storyId}\n          isReady={!isOut}\n          messageListType=\"thread\"\n          isMobile={getIsMobile()}\n          editableInputCssSelector={EDITABLE_STORY_INPUT_CSS_SELECTOR}\n          editableInputId={EDITABLE_STORY_INPUT_ID}\n          inputId=\"story-input-text\"\n          className={buildClassName(styles.composer, composerAppearanceAnimationClassNames)}\n          inputPlaceholder={lang(isChatStory ? 'ReplyToGroupStory' : 'ReplyPrivately')}\n          onForward={canShare ? handleForwardClick : undefined}\n          onFocus={markComposerHasFocus}\n          onBlur={unmarkComposerHasFocus}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global, {\n  peerId,\n  storyId,\n  isReportModalOpen,\n  isDeleteModalOpen,\n}): StateProps => {\n  const { appConfig } = global;\n  const user = selectUser(global, peerId);\n  const chat = selectChat(global, peerId);\n  const tabState = selectTabState(global);\n  const {\n    storyViewer: {\n      isMuted,\n      viewModal,\n      isPrivacyModalOpen,\n      isStealthModalOpen,\n      storyList,\n    },\n    forwardMessages: { storyId: forwardedStoryId },\n    premiumModal,\n    safeLinkModalUrl,\n    mapModal,\n  } = tabState;\n  const { isOpen: isPremiumModalOpen } = premiumModal || {};\n  const story = selectPeerStory(global, peerId, storyId);\n  const isLoadedStory = story && 'content' in story;\n  const shouldForcePause = Boolean(\n    viewModal || forwardedStoryId || tabState.reactionPicker?.storyId || isReportModalOpen || isPrivacyModalOpen\n    || isPremiumModalOpen || isDeleteModalOpen || safeLinkModalUrl || isStealthModalOpen || mapModal,\n  );\n\n  const forwardInfo = isLoadedStory ? story.forwardInfo : undefined;\n  const mediaAreas = isLoadedStory ? story.mediaAreas : undefined;\n  const forwardSenderId = forwardInfo?.fromPeerId\n    || mediaAreas?.find((area): area is ApiMediaAreaChannelPost => area.type === 'channelPost')?.channelId;\n  const forwardSender = forwardSenderId ? selectPeer(global, forwardSenderId) : undefined;\n  const withHeaderAnimation = selectPerformanceSettingsValue(global, 'mediaViewerAnimations');\n\n  const fromPeer = isLoadedStory && story.fromId ? selectPeer(global, story.fromId) : undefined;\n\n  return {\n    peer: (user || chat)!,\n    forwardSender,\n    fromPeer,\n    story,\n    orderedIds: storyList?.storyIdsByPeerId[peerId],\n    isMuted,\n    isCurrentUserPremium: selectIsCurrentUserPremium(global),\n    shouldForcePause,\n    storyChangelogUserId: appConfig!.storyChangelogUserId,\n    viewersExpirePeriod: appConfig!.storyExpirePeriod + appConfig!.storyViewersExpirePeriod,\n    isChatExist: Boolean(chat),\n    areChatSettingsLoaded: Boolean(chat?.settings),\n    stealthMode: global.stories.stealthMode,\n    withHeaderAnimation,\n  };\n})(Story));\n","import React, {\n  memo, useEffect, useLayoutEffect, useRef, useState,\n} from '../../lib/teact/teact';\nimport { addExtraClass, removeExtraClass } from '../../lib/teact/teact-dom';\n\nimport type { ApiStory } from '../../api/types';\n\nimport { requestForcedReflow, requestMeasure, requestMutation } from '../../lib/fasterdom/fasterdom';\nimport buildClassName from '../../util/buildClassName';\nimport calcTextLineHeightAndCount from '../../util/element/calcTextLineHeightAndCount';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useOldLang from '../../hooks/useOldLang';\nimport usePrevDuringAnimation from '../../hooks/usePrevDuringAnimation';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport EmbeddedStoryForward from '../common/embedded/EmbeddedStoryForward';\nimport MessageText from '../common/MessageText';\n\nimport styles from './StoryViewer.module.scss';\n\ninterface OwnProps {\n  story: ApiStory;\n  isExpanded: boolean;\n  className?: string;\n  onExpand: NoneToVoidFunction;\n  onFold?: NoneToVoidFunction;\n}\n\nconst EXPAND_ANIMATION_DURATION_MS = 400;\nconst LINES_TO_SHOW = 3;\n\nfunction StoryCaption({\n  story, isExpanded, className, onExpand, onFold,\n}: OwnProps) {\n  const lang = useOldLang();\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const contentRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const textRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const showMoreButtonRef = useRef<HTMLDivElement>(null);\n  const renderingStory = useCurrentOrPrev(story, true);\n\n  const caption = renderingStory?.content.text;\n\n  const [hasOverflow, setHasOverflow] = useState(false);\n  const prevIsExpanded = usePrevDuringAnimation(isExpanded || undefined, EXPAND_ANIMATION_DURATION_MS);\n  const isInExpandedState = isExpanded || prevIsExpanded;\n\n  useEffect(() => {\n    requestMutation(() => {\n      if (!contentRef.current) {\n        return;\n      }\n\n      if (isExpanded) {\n        addExtraClass(contentRef.current, styles.animate);\n      } else {\n        removeExtraClass(contentRef.current, styles.animate);\n      }\n    });\n  }, [isExpanded]);\n\n  const canExpand = hasOverflow && !isInExpandedState;\n  const { shouldRender: shouldRenderShowMore, transitionClassNames } = useShowTransition(\n    canExpand, undefined, true, 'slow', true,\n  );\n\n  useLayoutEffect(() => {\n    requestMeasure(() => {\n      if (!showMoreButtonRef.current) {\n        return;\n      }\n\n      const button = showMoreButtonRef.current;\n\n      const { offsetWidth } = button;\n\n      requestMutation(() => {\n        button.style.setProperty('--expand-button-width', `${offsetWidth}px`);\n      });\n    });\n  }, []);\n\n  useLayoutEffect(() => {\n    requestForcedReflow(() => {\n      if (!contentRef.current || !textRef.current) {\n        return undefined;\n      }\n\n      const container = contentRef.current;\n      const textContainer = textRef.current;\n\n      const textOffsetTop = textContainer.offsetTop;\n      const { lineHeight, totalLines } = calcTextLineHeightAndCount(textContainer);\n      const isOverflowing = totalLines > LINES_TO_SHOW;\n      const overflowShift = textOffsetTop + lineHeight * LINES_TO_SHOW;\n\n      return () => {\n        if (isOverflowing) {\n          addExtraClass(container, styles.hasOverflow);\n          setHasOverflow(true);\n        }\n\n        container.style.setProperty('--_overflow-shift', `${overflowShift}px`);\n      };\n    });\n  }, [caption]);\n\n  useEffect(() => {\n    if (!isExpanded) {\n      ref.current?.scrollTo({ top: 0 });\n    }\n  }, [isExpanded]);\n\n  const fullClassName = buildClassName(\n    styles.captionContent,\n    isInExpandedState && styles.expanded,\n    shouldRenderShowMore && styles.withShowMore,\n  );\n\n  return (\n    <div className={buildClassName(styles.caption, className)}>\n      <div\n        ref={contentRef}\n        className={fullClassName}\n        role={canExpand ? 'button' : undefined}\n        onClick={canExpand ? onExpand : onFold}\n      >\n        <div\n          ref={ref}\n          className={buildClassName(styles.captionInner, 'allow-selection', 'custom-scroll')}\n        >\n          {renderingStory?.forwardInfo && (\n            <EmbeddedStoryForward\n              forwardInfo={renderingStory.forwardInfo}\n              className={styles.forwardInfo}\n            />\n          )}\n          {renderingStory && (\n            <div ref={textRef} className={styles.captionText}>\n              <MessageText\n                messageOrStory={renderingStory}\n                withTranslucentThumbs\n                forcePlayback\n              />\n            </div>\n          )}\n        </div>\n      </div>\n      {shouldRenderShowMore && (\n        <div\n          ref={showMoreButtonRef}\n          className={buildClassName(styles.captionShowMore, transitionClassNames)}\n          onClick={onExpand}\n        >\n          {lang('Story.CaptionShowMore')}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default memo(StoryCaption);\n","import React, { memo, useCallback } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiTypeStory } from '../../api/types';\n\nimport useOldLang from '../../hooks/useOldLang';\n\nimport ConfirmDialog from '../ui/ConfirmDialog';\n\ninterface OwnProps {\n  isOpen: boolean;\n  story?: ApiTypeStory;\n  onClose: NoneToVoidFunction;\n}\n\nfunction StoryDeleteConfirmModal({\n  isOpen, story, onClose,\n}: OwnProps) {\n  const { deleteStory, openNextStory } = getActions();\n\n  const lang = useOldLang();\n\n  const handleDeleteStoryClick = useCallback(() => {\n    if (!story) {\n      return;\n    }\n\n    openNextStory();\n    deleteStory({ peerId: story.peerId, storyId: story.id });\n    onClose();\n  }, [onClose, story]);\n\n  return (\n    <ConfirmDialog\n      isOpen={isOpen}\n      onClose={onClose}\n      title={lang('DeleteStoryTitle')}\n      text={lang('DeleteStorySubtitle')}\n      confirmLabel={lang('Delete')}\n      confirmHandler={handleDeleteStoryClick}\n      confirmIsDestructive\n      className=\"component-theme-dark\"\n    />\n  );\n}\n\nexport default memo(StoryDeleteConfirmModal);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, getGlobal } from '../../global';\n\nimport type { ApiStory } from '../../api/types';\n\nimport { HEART_REACTION } from '../../config';\nimport { getStoryKey, isUserId } from '../../global/helpers';\nimport buildClassName from '../../util/buildClassName';\n\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport AvatarList from '../common/AvatarList';\nimport Icon from '../common/icons/Icon';\nimport ReactionAnimatedEmoji from '../common/reactions/ReactionAnimatedEmoji';\nimport Button from '../ui/Button';\n\nimport styles from './StoryFooter.module.scss';\n\ntype OwnProps = {\n  story: ApiStory;\n  className?: string;\n};\n\nconst StoryFooter = ({\n  story,\n  className,\n}: OwnProps) => {\n  const { openStoryViewModal, openForwardMenu, sendStoryReaction } = getActions();\n  const lang = useOldLang();\n\n  const {\n    views, isOut, peerId, id: storyId, sentReaction,\n  } = story;\n  const { viewsCount, forwardsCount, reactionsCount } = views || {};\n  const isChannel = !isUserId(peerId);\n\n  const isSentStoryReactionHeart = sentReaction && 'emoticon' in sentReaction\n    ? sentReaction.emoticon === HEART_REACTION.emoticon : false;\n\n  const canForward = Boolean(\n    (isOut || isChannel)\n    && story.isPublic\n    && !story.noForwards,\n  );\n\n  const containerId = getStoryKey(peerId, storyId);\n\n  const recentViewers = useMemo(() => {\n    const { users: { byId: usersById } } = getGlobal();\n\n    const recentViewerIds = views && 'recentViewerIds' in views ? views.recentViewerIds : undefined;\n    if (!recentViewerIds) return undefined;\n\n    return recentViewerIds.map((id) => usersById[id]).filter(Boolean);\n  }, [views]);\n\n  const handleOpenStoryViewModal = useLastCallback(() => {\n    openStoryViewModal({ storyId });\n  });\n\n  const handleForwardClick = useLastCallback(() => {\n    openForwardMenu({ fromChatId: peerId, storyId });\n  });\n\n  const handleLikeStory = useLastCallback(() => {\n    const reaction = sentReaction ? undefined : HEART_REACTION;\n    sendStoryReaction({\n      peerId,\n      storyId,\n      containerId,\n      reaction,\n    });\n  });\n\n  if (!viewsCount) {\n    return (\n      <div className={buildClassName(styles.root, className)}>\n        {lang('NobodyViewed')}\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={buildClassName(\n        styles.root,\n        className,\n      )}\n    >\n      <div\n        className={buildClassName(styles.viewInfo, !isChannel && styles.interactive)}\n        onClick={!isChannel ? handleOpenStoryViewModal : undefined}\n      >\n        {Boolean(recentViewers?.length) && (\n          <AvatarList\n            size=\"small\"\n            peers={recentViewers}\n            className={styles.avatars}\n          />\n        )}\n\n        {isChannel ? (\n          <span className={styles.views}><Icon name=\"channelviews\" className={styles.viewIcon} />{viewsCount}</span>\n        ) : (\n          <span className={styles.views}>{lang('Views', viewsCount, 'i')}</span>\n        )}\n        {Boolean(reactionsCount) && !isChannel && (\n          <span className={styles.reactionCount}>\n            <Icon name=\"heart\" className={styles.reactionCountHeart} />\n            {reactionsCount}\n          </span>\n        )}\n      </div>\n      <div className={styles.spacer} />\n      {canForward && (\n        <Button\n          color=\"translucent\"\n          size=\"smaller\"\n          round\n          onClick={handleForwardClick}\n          ariaLabel={lang('Forward')}\n          className={styles.footerItem}\n        >\n          <Icon name=\"forward\" />\n        </Button>\n      )}\n      {isChannel && (\n        <>\n          {Boolean(forwardsCount) && (\n            <div className={styles.footerItem}>\n              <Button\n                round\n                color=\"translucent\"\n                size=\"smaller\"\n                nonInteractive\n                ariaLabel={lang('PublicShares')}\n              >\n                <Icon name=\"loop\" />\n              </Button>\n              <span>{forwardsCount}</span>\n            </div>\n          )}\n          <div className={styles.footerItem}>\n            <Button\n              round\n              className={styles.reactionButton}\n              color=\"translucent\"\n              size=\"smaller\"\n              onClick={handleLikeStory}\n              ariaLabel={lang('AccDescrLike')}\n            >\n              {sentReaction && (\n                <ReactionAnimatedEmoji\n                  key={'documentId' in sentReaction ? sentReaction.documentId : sentReaction.emoticon}\n                  containerId={containerId}\n                  reaction={sentReaction}\n                  withEffectOnly={isSentStoryReactionHeart}\n                />\n              )}\n              {(!sentReaction || isSentStoryReactionHeart) && (\n                <Icon\n                  name={isSentStoryReactionHeart ? 'heart' : 'heart-outline'}\n                  className={buildClassName(isSentStoryReactionHeart && styles.reactionHeart)}\n                />\n              )}\n            </Button>\n            {Boolean(reactionsCount) && (<span>{reactionsCount}</span>)}\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default memo(StoryFooter);\n","import React, { memo, useEffect, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type {\n  ApiPeer, ApiPeerStories, ApiTypeStory,\n} from '../../api/types';\nimport type { StoryViewerOrigin } from '../../types';\n\nimport { getSenderTitle, getStoryMediaHash } from '../../global/helpers';\nimport { selectTabState } from '../../global/selectors';\nimport renderText from '../common/helpers/renderText';\n\nimport useMedia from '../../hooks/useMedia';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport Avatar from '../common/Avatar';\nimport MediaAreaOverlay from './mediaArea/MediaAreaOverlay';\n\nimport styles from './StoryViewer.module.scss';\n\ninterface OwnProps {\n  peer?: ApiPeer;\n  peerStories?: ApiPeerStories;\n}\n\ninterface StateProps {\n  lastViewedId?: number;\n  origin?: StoryViewerOrigin;\n  storyIdsForViewer?: number[];\n}\n\nfunction StoryPreview({\n  peer, peerStories, lastViewedId, storyIdsForViewer, origin,\n}: OwnProps & StateProps) {\n  const { openStoryViewer, loadPeerSkippedStories } = getActions();\n  const lang = useOldLang();\n\n  const story = useMemo<ApiTypeStory | undefined>(() => {\n    if (!peerStories) {\n      return undefined;\n    }\n\n    const {\n      orderedIds, lastReadId, byId,\n    } = peerStories;\n    const hasUnreadStories = orderedIds[orderedIds.length - 1] !== lastReadId;\n    const previewIndexId = lastViewedId && storyIdsForViewer?.includes(lastViewedId)\n      ? lastViewedId ?? (hasUnreadStories ? (lastReadId ?? -1) : -1)\n      : -1;\n    const resultId = byId[previewIndexId]?.id || storyIdsForViewer?.[0] || orderedIds[0];\n\n    return byId[resultId];\n  }, [lastViewedId, peerStories, storyIdsForViewer]);\n\n  const isLoaded = story && 'content' in story;\n\n  useEffect(() => {\n    if (story && !isLoaded) {\n      loadPeerSkippedStories({ peerId: story.peerId });\n    }\n  }, [story, isLoaded]);\n\n  const video = isLoaded ? story.content.video : undefined;\n  const imageHash = isLoaded ? getStoryMediaHash(story) : undefined;\n  const imgBlobUrl = useMedia(imageHash);\n  const thumbUrl = imgBlobUrl || video?.thumbnail?.dataUri;\n\n  if (!peer || !story || 'isDeleted' in story) {\n    return undefined;\n  }\n\n  return (\n    <div\n      className={styles.slideInner}\n      onClick={() => { openStoryViewer({ peerId: story.peerId, storyId: story.id, origin }); }}\n    >\n      {thumbUrl && (\n        <img src={thumbUrl} alt=\"\" className={styles.media} draggable={false} />\n      )}\n      {isLoaded && <MediaAreaOverlay story={story} />}\n\n      <div className={styles.content}>\n        <div className={styles.contentInner}>\n          <Avatar\n            peer={peer}\n            withStory\n            storyViewerMode=\"disabled\"\n          />\n          <div className={styles.name}>{renderText(getSenderTitle(lang, peer) || '')}</div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global, { peer }): StateProps => {\n  const {\n    storyViewer: {\n      lastViewedByPeerIds,\n      origin,\n      storyList,\n    },\n  } = selectTabState(global);\n\n  return {\n    lastViewedId: peer?.id ? lastViewedByPeerIds?.[peer.id] : undefined,\n    origin,\n    storyIdsForViewer: peer?.id ? storyList?.storyIdsByPeerId[peer.id] : undefined,\n  };\n})(StoryPreview));\n","import React, {\n  memo,\n} from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport styles from './StoryProgress.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  isViewed: boolean;\n  isVideo?: boolean;\n  duration?: number;\n  isPaused?: boolean;\n  onImageComplete: NoneToVoidFunction;\n}\n\nconst DEFAULT_STORY_DURATION_S = 6;\n\nfunction StoryProgress({\n  isActive, isViewed, isVideo, duration = DEFAULT_STORY_DURATION_S, isPaused, onImageComplete,\n}: OwnProps) {\n  const handleAnimationEnd = useLastCallback((event: React.AnimationEvent<HTMLElement>) => {\n    if (!isVideo && event.animationName === styles.progress) {\n      onImageComplete();\n    }\n  });\n\n  const classNames = buildClassName(\n    styles.root,\n    isViewed && styles.viewed,\n    isActive && styles.active,\n    isPaused && styles.paused,\n  );\n\n  return (\n    <span\n      className={classNames}\n      aria-hidden\n    >\n      {isActive && (\n        <i style={`--progress-duration: ${duration}s`} className={styles.inner} onAnimationEnd={handleAnimationEnd} />\n      )}\n    </span>\n  );\n}\n\nexport default memo(StoryProgress);\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiStory, ApiUser } from '../../api/types';\nimport type { ApiPrivacySettings, PrivacyVisibility } from '../../types';\nimport type { IconName } from '../../types/icons';\n\nimport { getSenderTitle, getUserFullName } from '../../global/helpers';\nimport { selectPeerStory, selectTabState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport stopEvent from '../../util/stopEvent';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport Button from '../ui/Button';\nimport ListItem from '../ui/ListItem';\nimport Modal from '../ui/Modal';\nimport Switcher from '../ui/Switcher';\nimport Transition from '../ui/Transition';\nimport AllowDenyList from './privacy/AllowDenyList';\nimport CloseFriends from './privacy/CloseFriends';\n\nimport styles from './StorySettings.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  onClose?: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  story?: ApiStory;\n  visibility?: ApiPrivacySettings;\n  contactListIds?: string[];\n  usersById: Record<string, ApiUser>;\n  currentUserId: string;\n}\n\ntype PrivacyAction = 'blockUserIds' | 'closeFriends' | 'blockContactUserIds' | 'allowUserIds';\n\ninterface PrivacyOption {\n  name: string;\n  value: PrivacyVisibility;\n  color: [string, string];\n  icon: IconName;\n  actions?: PrivacyAction;\n}\n\nconst OPTIONS: PrivacyOption[] = [{\n  name: 'StoryPrivacyOptionEveryone',\n  value: 'everybody',\n  color: ['#50ABFF', '#007AFF'],\n  icon: 'channel-filled',\n  actions: 'blockUserIds',\n}, {\n  name: 'StoryPrivacyOptionContacts',\n  value: 'contacts',\n  color: ['#C36EFF', '#8B60FA'],\n  icon: 'user-filled',\n  actions: 'blockContactUserIds',\n}, {\n  name: 'StoryPrivacyOptionCloseFriends',\n  value: 'closeFriends',\n  color: ['#88D93A', '#30B73B'],\n  icon: 'favorite-filled',\n  actions: 'closeFriends',\n}, {\n  name: 'StoryPrivacyOptionSelectedContacts',\n  value: 'nobody',\n  color: ['#FFB743', '#F69A36'],\n  icon: 'group-filled',\n  actions: 'allowUserIds',\n}];\n\nenum Screens {\n  privacy,\n  allowList,\n  closeFriends,\n  denyList,\n}\n\nfunction StorySettings({\n  isOpen,\n  story,\n  visibility,\n  contactListIds,\n  usersById,\n  currentUserId,\n  onClose,\n}: OwnProps & StateProps) {\n  const { editStoryPrivacy, toggleStoryInProfile } = getActions();\n\n  const lang = useOldLang();\n  const [isOpenModal, openModal, closeModal] = useFlag(false);\n  const [privacy, setPrivacy] = useState<ApiPrivacySettings | undefined>(visibility);\n  const [isPinned, setIsPinned] = useState(story?.isInProfile);\n  const [activeKey, setActiveKey] = useState<Screens>(Screens.privacy);\n  const [editingBlockingCategory, setEditingBlockingCategory] = useState<PrivacyVisibility>('everybody');\n  const isBackButton = activeKey !== Screens.privacy;\n\n  const closeFriendIds = useMemo(() => {\n    return (contactListIds || []).filter((userId) => usersById[userId]?.isCloseFriend);\n  }, [contactListIds, usersById]);\n\n  const lockedIds = useMemo(() => {\n    if (activeKey === Screens.allowList\n      && (!privacy?.allowUserIds?.length || privacy.allowUserIds[0] === currentUserId)\n    ) {\n      return [currentUserId];\n    }\n\n    return undefined;\n  }, [activeKey, currentUserId, privacy?.allowUserIds]);\n\n  const selectedBlockedIds = useMemo(() => {\n    if (editingBlockingCategory !== privacy?.visibility) return [];\n    return privacy?.blockUserIds || [];\n  }, [editingBlockingCategory, privacy?.blockUserIds, privacy?.visibility]);\n\n  const handleAllowUserIdsChange = useLastCallback((newIds: string[]) => {\n    setPrivacy({\n      ...privacy!,\n      allowUserIds: newIds?.length ? newIds?.filter((id) => id !== currentUserId) : [currentUserId],\n    });\n  });\n\n  const handleDenyUserIdsChange = useLastCallback((newIds: string[]) => {\n    setPrivacy({\n      ...privacy!,\n      blockUserIds: newIds,\n      visibility: editingBlockingCategory,\n    });\n  });\n\n  useEffect(() => {\n    if (isOpen) {\n      setActiveKey(Screens.privacy);\n      openModal();\n    }\n  }, [isOpen]);\n\n  useEffect(() => {\n    setPrivacy(visibility);\n  }, [visibility]);\n\n  const handleCloseButtonClick = useLastCallback(() => {\n    if (activeKey === Screens.privacy) {\n      closeModal();\n      return;\n    }\n\n    setActiveKey(Screens.privacy);\n  });\n\n  function handleVisibilityChange(newVisibility: PrivacyVisibility) {\n    setPrivacy({\n      ...privacy!,\n      visibility: newVisibility,\n    });\n  }\n\n  function handleActionClick(e: React.MouseEvent<HTMLDivElement>, action: PrivacyAction) {\n    stopEvent(e);\n\n    switch (action) {\n      case 'closeFriends':\n        setActiveKey(Screens.closeFriends);\n        break;\n      case 'allowUserIds':\n        setActiveKey(Screens.allowList);\n        break;\n      case 'blockUserIds':\n        setActiveKey(Screens.denyList);\n        setEditingBlockingCategory('everybody');\n        break;\n      case 'blockContactUserIds':\n        setActiveKey(Screens.denyList);\n        setEditingBlockingCategory('contacts');\n        break;\n    }\n  }\n\n  const handleIsPinnedToggle = useLastCallback(() => {\n    setIsPinned(!isPinned);\n  });\n\n  // console.warn(privacy?.visibility, story?.visibility, OPTIONS);\n\n  const handleSubmit = useLastCallback(() => {\n    editStoryPrivacy({\n      peerId: story!.peerId,\n      storyId: story!.id,\n      privacy: privacy!,\n    });\n    if (story!.isInProfile !== isPinned) {\n      toggleStoryInProfile({ peerId: story!.peerId, storyId: story!.id, isInProfile: isPinned });\n    }\n    closeModal();\n  });\n\n  function renderActionName(action: PrivacyAction) {\n    if (action === 'closeFriends') {\n      if (closeFriendIds.length === 0) {\n        return lang('StoryPrivacyOptionCloseFriendsDetail');\n      }\n\n      if (closeFriendIds.length === 1) {\n        return getSenderTitle(lang, usersById[closeFriendIds[0]]);\n      }\n\n      return lang('StoryPrivacyOptionPeople', closeFriendIds.length, 'i');\n    }\n\n    if ((action === 'blockUserIds' && privacy?.visibility === 'everybody')\n      || (action === 'blockContactUserIds' && privacy?.visibility === 'contacts')) {\n      if (!privacy?.blockUserIds?.length) {\n        return lang('StoryPrivacyOptionContactsDetail');\n      }\n\n      if (privacy.blockUserIds.length === 1) {\n        return lang('StoryPrivacyOptionExcludePerson', getUserFullName(usersById[privacy.blockUserIds[0]]));\n      }\n\n      return lang('StoryPrivacyOptionExcludePeople', privacy.blockUserIds.length, 'i');\n    }\n\n    if (!privacy?.allowUserIds || privacy.allowUserIds.length === 0) {\n      return lang('StoryPrivacyOptionSelectedContactsDetail');\n    }\n\n    if (privacy.allowUserIds.length === 1) {\n      return getUserFullName(usersById[privacy.allowUserIds[0]]);\n    }\n\n    return lang('StoryPrivacyOptionPeople', privacy.allowUserIds.length, 'i');\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderHeaderContent() {\n    switch (activeKey) {\n      case Screens.privacy:\n        return <h3 className={styles.headerTitle}>{lang('StoryPrivacyAlertEditTitle')}</h3>;\n      case Screens.allowList:\n        return <h3 className={styles.headerTitle}>{lang('StoryPrivacyAlertSelectContactsTitle')}</h3>;\n      case Screens.closeFriends:\n        return <h3 className={styles.headerTitle}>{lang('CloseFriends')}</h3>;\n      case Screens.denyList:\n        return <h3 className={styles.headerTitle}>{lang('StoryPrivacyAlertExcludedContactsTitle')}</h3>;\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean) {\n    switch (activeKey) {\n      case Screens.privacy:\n        return renderPrivacyList();\n      case Screens.closeFriends:\n        return (\n          <CloseFriends\n            key=\"close-friends\"\n            isActive={isActive}\n            contactListIds={contactListIds}\n            currentUserId={currentUserId}\n            usersById={usersById}\n            onClose={handleCloseButtonClick}\n          />\n        );\n      case Screens.denyList:\n        return (\n          <AllowDenyList\n            key=\"deny-list\"\n            id=\"deny-list\"\n            contactListIds={contactListIds}\n            currentUserId={currentUserId}\n            usersById={usersById}\n            selectedIds={selectedBlockedIds}\n            onSelect={handleDenyUserIdsChange}\n          />\n        );\n      case Screens.allowList:\n        return (\n          <AllowDenyList\n            key=\"allow-list\"\n            id=\"allow-list\"\n            contactListIds={contactListIds}\n            lockedIds={lockedIds}\n            currentUserId={currentUserId}\n            usersById={usersById}\n            selectedIds={privacy?.allowUserIds}\n            onSelect={handleAllowUserIdsChange}\n          />\n        );\n    }\n  }\n\n  function renderPrivacyList() {\n    const storyLifeTime = story ? convertSecondsToHours(story.expireDate - story.date) : 0;\n\n    return (\n      <>\n        <div className={styles.section}>\n          <h3 className={styles.title}>{lang('StoryPrivacyAlertSubtitleProfile')}</h3>\n          <div className={styles.list}>\n            {OPTIONS.map((option) => (\n              <label\n                key={option.value}\n                className={buildClassName(styles.option, option.value === privacy?.visibility && styles.checked)}\n              >\n                <input\n                  type=\"radio\"\n                  name=\"story_privacy\"\n                  className={styles.input}\n                  value={option.value}\n                  checked={option.value === privacy?.visibility}\n                  onChange={() => handleVisibilityChange(option.value)}\n                  teactExperimentControlled\n                />\n                <span\n                  className={styles.icon}\n                  style={`--color-from: ${option.color[0]}; --color-to: ${option.color[1]}`}\n                >\n                  <i className={`icon icon-${option.icon}`} />\n                </span>\n                <div className={styles.optionContent}>\n                  <span className={buildClassName(styles.option_name)}>{lang(option.name)}</span>\n                  {option.actions && (\n                    <div\n                      tabIndex={0}\n                      role=\"button\"\n                      className={styles.action}\n                      aria-label={lang('Edit')}\n                      onClick={(e) => { handleActionClick(e, option.actions!); }}\n                    >\n                      <span className={styles.actionInner}>{renderActionName(option.actions)}</span>\n                      <i className=\"icon icon-next\" aria-hidden />\n                    </div>\n                  )}\n                </div>\n              </label>\n            ))}\n          </div>\n        </div>\n        <div className={styles.section}>\n          <ListItem ripple onClick={handleIsPinnedToggle}>\n            <span>{lang('StoryKeep')}</span>\n            <Switcher\n              id=\"group-notifications\"\n              label={lang('StoryKeep')}\n              checked={isPinned}\n              inactive\n            />\n          </ListItem>\n        </div>\n        <div className={styles.footer}>\n          <div className={styles.info}>{lang('StoryKeepInfo', storyLifeTime)}</div>\n          <div className={styles.submit}>\n            <Button onClick={handleSubmit}>{lang('StoryPrivacyButtonSave')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  return (\n    <Modal\n      isOpen={isOpenModal}\n      className={buildClassName(styles.modal, 'component-theme-dark')}\n      onClose={closeModal}\n      noBackdrop\n      onCloseAnimationEnd={onClose}\n    >\n      <div className={styles.header}>\n        <Button\n          className={buildClassName(styles.closeButton, 'close-button')}\n          round\n          color=\"translucent\"\n          size=\"smaller\"\n          onClick={handleCloseButtonClick}\n          ariaLabel={isBackButton ? lang('Common.Back') : lang('Common.Close')}\n        >\n          <div className={buildClassName('animated-close-icon', isBackButton && 'state-back')} />\n        </Button>\n        <Transition name=\"slideFade\" activeKey={activeKey}>\n          {renderHeaderContent()}\n        </Transition>\n      </div>\n      <Transition\n        activeKey={activeKey}\n        name=\"slideFade\"\n        slideClassName=\"ChatOrUserPicker_slide\"\n        className={styles.content}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    storyViewer: {\n      storyId, peerId,\n    },\n  } = selectTabState(global);\n  const story = (peerId && storyId)\n    ? selectPeerStory(global, peerId, storyId)\n    : undefined;\n\n  return {\n    story: story && 'content' in story ? story as ApiStory : undefined,\n    visibility: story && 'visibility' in story ? story.visibility : undefined,\n    contactListIds: global.contactList?.userIds,\n    usersById: global.users.byId,\n    currentUserId: global.currentUserId!,\n  };\n})(StorySettings));\n\nfunction convertSecondsToHours(seconds: number): number {\n  const secondsInHour = 3600;\n  const minutesInHour = 60;\n\n  const hours = Math.floor(seconds / secondsInHour);\n  const remainingSeconds = seconds % secondsInHour;\n  const remainingMinutes = Math.floor(remainingSeconds / minutesInHour);\n\n  // If remaining minutes are greater than or equal to 30, round up the hours\n  return remainingMinutes >= 30 ? hours + 1 : hours;\n}\n","import React, {\n  memo, useEffect, useLayoutEffect, useMemo, useRef, useSignal, useState,\n} from '../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../global';\n\nimport type { ApiPeerStories, ApiTypeStory } from '../../api/types';\nimport type { RealTouchEvent } from '../../util/captureEvents';\n\nimport { EDITABLE_STORY_INPUT_ID } from '../../config';\nimport { requestMutation } from '../../lib/fasterdom/fasterdom';\nimport { getStoryKey } from '../../global/helpers';\nimport {\n  selectIsStoryViewerOpen,\n  selectPeer,\n  selectTabState,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport buildStyle from '../../util/buildStyle';\nimport {\n  captureEvents,\n  IOS_SCREEN_EDGE_THRESHOLD,\n  SWIPE_DIRECTION_THRESHOLD,\n  SWIPE_DIRECTION_TOLERANCE,\n} from '../../util/captureEvents';\nimport focusEditableElement from '../../util/focusEditableElement';\nimport { clamp } from '../../util/math';\nimport { disableScrolling, enableScrolling } from '../../util/scrollLock';\nimport { IS_IOS } from '../../util/windowEnvironment';\nimport { calculateOffsetX } from './helpers/dimensions';\n\nimport useAppLayout from '../../hooks/useAppLayout';\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport usePrevious from '../../hooks/usePrevious';\nimport useWindowSize from '../../hooks/window/useWindowSize';\nimport useSlideSizes from './hooks/useSlideSizes';\n\nimport Story from './Story';\nimport StoryPreview from './StoryPreview';\n\nimport styles from './StoryViewer.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  isReportModalOpen?: boolean;\n  isDeleteModalOpen?: boolean;\n  onDelete: (story: ApiTypeStory) => void;\n  onReport: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  peerIds: string[];\n  currentPeerId?: string;\n  currentStoryId?: number;\n  byPeerId?: Record<string, ApiPeerStories>;\n  isSinglePeer?: boolean;\n  isSingleStory?: boolean;\n  isPrivate?: boolean;\n  isArchive?: boolean;\n}\n\nconst ACTIVE_SLIDE_VERTICAL_CORRECTION_REM = 1.75;\nconst SWIPE_Y_THRESHOLD = 50;\nconst SCROLL_RELEASE_DELAY = 1500;\n\nenum SwipeDirection {\n  Horizontal,\n  Vertical,\n}\n\nfunction StorySlides({\n  peerIds,\n  currentPeerId,\n  currentStoryId,\n  isOpen,\n  isSinglePeer,\n  isSingleStory,\n  isPrivate,\n  isArchive,\n  byPeerId,\n  isReportModalOpen,\n  isDeleteModalOpen,\n  onDelete,\n  onClose,\n  onReport,\n}: OwnProps & StateProps) {\n  const { stopActiveReaction } = getActions();\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [renderingPeerId, setRenderingPeerId] = useState(currentPeerId);\n  const [renderingStoryId, setRenderingStoryId] = useState(currentStoryId);\n  const prevPeerId = usePrevious(currentPeerId);\n  const renderingIsArchive = useCurrentOrPrev(isArchive, true);\n  const renderingIsPrivate = useCurrentOrPrev(isPrivate, true);\n  const renderingIsSinglePeer = useCurrentOrPrev(isSinglePeer, true);\n  const renderingIsSingleStory = useCurrentOrPrev(isSingleStory, true);\n  const slideSizes = useSlideSizes();\n  const { height: windowHeight, width: windowWidth } = useWindowSize();\n  const swipeDirectionRef = useRef<SwipeDirection | undefined>(undefined);\n  const isReleasedRef = useRef(false);\n  const { isMobile } = useAppLayout();\n\n  const rendersRef = useRef<Record<string, { current: HTMLDivElement | null }>>({});\n  const [getIsAnimating, setIsAnimating] = useSignal(false);\n\n  useHistoryBack({\n    isActive: isOpen,\n    onBack: onClose,\n    shouldBeReplaced: true,\n  });\n\n  function setRef(ref: HTMLDivElement | null, peerId: string) {\n    if (!ref) {\n      return;\n    }\n    if (!rendersRef.current[peerId]) {\n      rendersRef.current[peerId] = { current: ref };\n    } else {\n      rendersRef.current[peerId].current = ref;\n    }\n  }\n\n  const renderingPeerIds = useMemo(() => {\n    if (renderingPeerId && (renderingIsSinglePeer || renderingIsSingleStory)) {\n      return [renderingPeerId];\n    }\n\n    const index = renderingPeerId ? peerIds.indexOf(renderingPeerId) : -1;\n    if (!renderingPeerId || index === -1) {\n      return [];\n    }\n\n    const start = Math.max(index - 4, 0);\n    const end = Math.min(index + 5, peerIds.length);\n\n    return peerIds.slice(start, end);\n  }, [renderingIsSingleStory, renderingIsSinglePeer, renderingPeerId, peerIds]);\n\n  const renderingPeerPosition = useMemo(() => {\n    if (!renderingPeerIds.length || !renderingPeerId) {\n      return -1;\n    }\n\n    return renderingPeerIds.indexOf(renderingPeerId);\n  }, [renderingPeerId, renderingPeerIds]);\n\n  const currentPeerPosition = useMemo(() => {\n    if (!renderingPeerIds.length || !currentPeerId) {\n      return -1;\n    }\n    return renderingPeerIds.indexOf(currentPeerId);\n  }, [currentPeerId, renderingPeerIds]);\n\n  useEffect(() => {\n    if (!isMobile) return;\n\n    // If animation disabled, set rendering peer id to current peer\n    setRenderingPeerId(currentPeerId);\n  }, [currentPeerId, isMobile]);\n\n  // Handling the flipping of stories from a current user\n  useEffect(() => {\n    if (renderingPeerId === currentPeerId && currentStoryId !== renderingStoryId) {\n      setRenderingStoryId(currentStoryId);\n    }\n  }, [currentPeerId, currentStoryId, renderingPeerId, renderingStoryId]);\n\n  useEffect(() => {\n    if (isMobile) return undefined;\n    if (prevPeerId && prevPeerId !== currentPeerId) {\n      setIsAnimating(true);\n    }\n\n    return () => {\n      setIsAnimating(false);\n    };\n  }, [prevPeerId, currentPeerId, setIsAnimating, isMobile]);\n\n  useEffect(() => {\n    return () => {\n      if (!currentStoryId || !currentPeerId) return;\n      stopActiveReaction({\n        containerId: getStoryKey(currentPeerId, currentStoryId),\n      });\n    };\n  }, [currentStoryId, currentPeerId]);\n\n  const slideAmount = currentPeerPosition - renderingPeerPosition;\n  const isBackward = renderingPeerPosition > currentPeerPosition;\n\n  const calculateTransformX = useLastCallback(() => {\n    return peerIds.reduce<Record<string, number>>((transformX, peerId, index) => {\n      if (peerId === renderingPeerId) {\n        transformX[peerId] = calculateOffsetX({\n          scale: slideSizes.scale,\n          slideAmount,\n          isBackward,\n          isActiveSlideSize: isBackward,\n        });\n      } else {\n        let isMoveThroughActiveSlide = false;\n        if (!isBackward && index > 0 && peerIds[index - 1] === renderingPeerId) {\n          isMoveThroughActiveSlide = true;\n        }\n        if (isBackward && index < peerIds.length - 1 && peerIds[index + 1] === renderingPeerId) {\n          isMoveThroughActiveSlide = true;\n        }\n\n        transformX[peerId] = calculateOffsetX({\n          scale: slideSizes.scale,\n          slideAmount,\n          isBackward,\n          isActiveSlideSize: currentPeerId === peerId && !isBackward,\n          isMoveThroughActiveSlide,\n        });\n      }\n\n      return transformX;\n    }, {});\n  });\n\n  useEffect(() => {\n    if (!containerRef.current || !isOpen) {\n      return undefined;\n    }\n\n    let offsetY = 0;\n\n    const getCurrentStoryRef = () => {\n      return renderingPeerId ? rendersRef.current[renderingPeerId]?.current : undefined;\n    };\n\n    const onRelease = (event: MouseEvent | TouchEvent | WheelEvent) => {\n      // This allows to prevent onRelease triggered by debounced wheel event\n      // after onRelease was triggered manually in onDrag\n      if (isReleasedRef.current) {\n        isReleasedRef.current = false;\n        return;\n      }\n      const current = getCurrentStoryRef();\n      if (!current) return;\n\n      if (offsetY < -SWIPE_Y_THRESHOLD) {\n        const composer = document.getElementById(EDITABLE_STORY_INPUT_ID);\n        if (composer) {\n          requestMutation(() => {\n            focusEditableElement(composer);\n          });\n        }\n        return;\n      }\n\n      if (offsetY > SWIPE_Y_THRESHOLD) {\n        onClose();\n        if (event.type === 'wheel') {\n          disableScrolling();\n          setTimeout(enableScrolling, SCROLL_RELEASE_DELAY);\n        }\n      } else {\n        requestMutation(() => {\n          current.style.setProperty('--slide-translate-y', '0px');\n        });\n      }\n    };\n\n    return captureEvents(containerRef.current, {\n      isNotPassive: true,\n      withNativeDrag: true,\n      withWheelDrag: true,\n      excludedClosestSelector: '.Composer',\n      onDrag: (event, captureEvent, {\n        dragOffsetX, dragOffsetY,\n      }) => {\n        if (isReleasedRef.current) return;\n        // Avoid conflicts with swipe-to-back gestures\n        if (IS_IOS && captureEvent.type === 'touchstart') {\n          const { pageX } = (captureEvent as RealTouchEvent).touches[0];\n          if (pageX <= IOS_SCREEN_EDGE_THRESHOLD || pageX >= windowWidth - IOS_SCREEN_EDGE_THRESHOLD) {\n            return;\n          }\n        }\n        if (event.type === 'mousemove') return;\n        const absOffsetX = Math.abs(dragOffsetX);\n        const absOffsetY = Math.abs(dragOffsetY);\n        const current = getCurrentStoryRef();\n        if (!current) return;\n        // If vertical shift is dominant we change only vertical position\n        if (swipeDirectionRef.current === SwipeDirection.Vertical\n          || Math.abs(absOffsetY) > SWIPE_DIRECTION_THRESHOLD || absOffsetY / absOffsetX > SWIPE_DIRECTION_TOLERANCE) {\n          swipeDirectionRef.current = SwipeDirection.Vertical;\n          const limit = windowHeight;\n          offsetY = clamp(dragOffsetY, -limit, limit);\n          if (offsetY > 0) {\n            requestMutation(() => {\n              current.style.setProperty('--slide-translate-y', `${offsetY * (isMobile ? 1 : -1)}px`);\n            });\n          }\n          if (event.type === 'wheel' && Math.abs(offsetY) > SWIPE_Y_THRESHOLD * 2) {\n            onRelease(event);\n            isReleasedRef.current = true;\n          }\n        }\n      },\n      onRelease,\n    });\n  }, [isOpen, onClose, windowWidth, windowHeight, isMobile, renderingPeerId]);\n\n  useLayoutEffect(() => {\n    if (isMobile) return;\n    const transformX = calculateTransformX();\n\n    Object.entries(rendersRef.current).forEach(([peerId, { current }]) => {\n      if (!current) return;\n\n      if (!getIsAnimating()) {\n        current.classList.remove(styles.slideAnimation, styles.slideAnimationToActive, styles.slideAnimationFromActive);\n        current.style.setProperty('--slide-translate-x', '0px');\n        current.style.setProperty('--slide-translate-y', '0px');\n        current.style.setProperty('--slide-translate-scale', '1');\n        current.style.setProperty('--slide-content-scale', String(slideSizes.toActiveScale));\n\n        return;\n      }\n\n      const getScale = () => {\n        if (currentPeerId === peerId) {\n          return String(slideSizes.toActiveScale);\n        }\n        if (peerId === renderingPeerId) {\n          return String(slideSizes.fromActiveScale);\n        }\n        return '1';\n      };\n\n      let offsetY = 0;\n      if (peerId === renderingPeerId) {\n        offsetY = -ACTIVE_SLIDE_VERTICAL_CORRECTION_REM * slideSizes.fromActiveScale;\n        current.classList.add(styles.slideAnimationFromActive);\n      }\n      if (peerId === currentPeerId) {\n        offsetY = ACTIVE_SLIDE_VERTICAL_CORRECTION_REM;\n        current.classList.add(styles.slideAnimationToActive);\n      }\n\n      current.classList.add(styles.slideAnimation);\n      current.style.setProperty('--slide-translate-x', `${transformX[peerId] || 0}px`);\n      current.style.setProperty('--slide-translate-y', `${offsetY}rem`);\n      current.style.setProperty('--slide-translate-scale', getScale());\n    });\n  }, [currentPeerId, getIsAnimating, renderingPeerId, slideSizes, isMobile]);\n\n  const handleTransitionEnd = useLastCallback((event: React.TransitionEvent<HTMLDivElement>) => {\n    // It is `target` that is needed here, not `currentTarget`\n    const target = event.target as HTMLDivElement | null;\n\n    if (!target || !target.classList.contains(styles.activeSlide)) return;\n\n    if (renderingPeerId !== currentPeerId) {\n      setRenderingPeerId(currentPeerId);\n      setRenderingStoryId(currentStoryId);\n    } else if (currentStoryId !== renderingStoryId) {\n      setRenderingStoryId(currentStoryId);\n    }\n    setIsAnimating(false);\n  });\n\n  if (isMobile) {\n    return (\n      <div className={styles.wrapper} ref={containerRef}>\n        <div\n          className={styles.mobileSlide}\n          ref={(ref) => setRef(ref, renderingPeerId!)}\n        >\n          <Story\n            peerId={renderingPeerId!}\n            storyId={renderingStoryId!}\n            onDelete={onDelete}\n            dimensions={slideSizes.activeSlide}\n            isPrivateStories={renderingIsPrivate}\n            isArchivedStories={renderingIsArchive}\n            isReportModalOpen={isReportModalOpen}\n            isDeleteModalOpen={isDeleteModalOpen}\n            isSingleStory={isSingleStory}\n            getIsAnimating={getIsAnimating}\n            onClose={onClose}\n            onReport={onReport}\n          />\n        </div>\n      </div>\n    );\n  }\n\n  function renderStoryPreview(peerId: string, index: number, position: number) {\n    const style = buildStyle(\n      `width: ${slideSizes.slide.width}px`,\n      `height: ${slideSizes.slide.height}px`,\n    );\n    const className = buildClassName(\n      styles.slide,\n      styles.slidePreview,\n      `slide-${position}`,\n    );\n\n    return (\n      <div\n        key={peerId}\n        ref={(ref) => setRef(ref, peerId)}\n        className={className}\n        style={style}\n      >\n        <StoryPreview\n          peer={selectPeer(getGlobal(), peerId)}\n          peerStories={byPeerId?.[peerId]}\n        />\n      </div>\n    );\n  }\n\n  function renderStory(peerId: string) {\n    const style = isMobile ? undefined : buildStyle(\n      `width: ${slideSizes.activeSlide.width}px`,\n      `--slide-media-height: ${slideSizes.activeSlide.height}px`,\n    );\n\n    return (\n      <div\n        key={peerId}\n        ref={(ref) => setRef(ref, peerId)}\n        className={buildClassName(styles.slide, styles.activeSlide)}\n        style={style}\n      >\n        <Story\n          peerId={peerId}\n          storyId={renderingStoryId!}\n          onDelete={onDelete}\n          dimensions={slideSizes.activeSlide}\n          isPrivateStories={renderingIsPrivate}\n          isArchivedStories={renderingIsArchive}\n          isReportModalOpen={isReportModalOpen}\n          isDeleteModalOpen={isDeleteModalOpen}\n          isSingleStory={isSingleStory}\n          getIsAnimating={getIsAnimating}\n          onClose={onClose}\n          onReport={onReport}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={styles.wrapper}\n      ref={containerRef}\n      style={`--story-viewer-scale: ${slideSizes.scale}`}\n      onTransitionEnd={handleTransitionEnd}\n    >\n      <div className={styles.fullSize} onClick={onClose} />\n      {renderingPeerIds.length > 1 && (\n        <div className={styles.backdropNonInteractive} style={`height: ${slideSizes.slide.height}px`} />\n      )}\n      {renderingPeerIds.map((peerId, index) => {\n        if (peerId === renderingPeerId) {\n          return renderStory(renderingPeerId);\n        }\n\n        return renderStoryPreview(peerId, index, index - renderingPeerPosition);\n      })}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    storyViewer: {\n      peerId: currentPeerId, storyId: currentStoryId, isSinglePeer, isSingleStory, isPrivate, isArchive, storyList,\n    },\n  } = selectTabState(global);\n  const { byPeerId, orderedPeerIds: { active } } = global.stories;\n\n  return {\n    byPeerId,\n    peerIds: storyList?.peerIds ?? active,\n    currentPeerId,\n    currentStoryId,\n    isSinglePeer,\n    isSingleStory,\n    isPrivate,\n    isArchive,\n  };\n}, (global) => selectIsStoryViewerOpen(global))(StorySlides));\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type {\n  ApiAvailableReaction, ApiPeer, ApiTypeStoryView, ApiUser,\n} from '../../api/types';\nimport type { IconName } from '../../types/icons';\n\nimport { getUserFullName, isUserId } from '../../global/helpers';\nimport { selectPeer } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { formatDateAtTime } from '../../util/dates/dateFormat';\nimport { REM } from '../common/helpers/mediaDimensions';\n\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport GroupChatInfo from '../common/GroupChatInfo';\nimport PrivateChatInfo from '../common/PrivateChatInfo';\nimport ReactionStaticEmoji from '../common/ReactionStaticEmoji';\nimport ListItem, { type MenuItemContextAction } from '../ui/ListItem';\n\nimport styles from './StoryViewModal.module.scss';\n\ntype OwnProps = {\n  storyView: ApiTypeStoryView;\n};\n\ntype StateProps = {\n  peer?: ApiPeer;\n  availableReactions?: ApiAvailableReaction[];\n};\n\nconst CLOSE_ANIMATION_DURATION = 100;\nconst DEFAULT_REACTION_SIZE = 1.5 * REM;\nconst BULLET = '\\u2022';\n\nconst StoryView = ({\n  storyView,\n  peer,\n  availableReactions,\n}: OwnProps & StateProps) => {\n  const {\n    openChat,\n    closeStoryViewer,\n    unblockUser,\n    blockUser,\n    deleteContact,\n    updateStoryView,\n    focusMessage,\n    openStoryViewer,\n    closeStoryViewModal,\n  } = getActions();\n\n  const lang = useOldLang();\n\n  const handleClick = useLastCallback(() => {\n    const { type } = storyView;\n\n    if (type === 'repost') {\n      closeStoryViewModal();\n      openStoryViewer({\n        peerId: storyView.peerId,\n        storyId: storyView.storyId,\n      });\n      return;\n    }\n\n    closeStoryViewer();\n\n    setTimeout(() => {\n      if (type === 'user') {\n        openChat({ id: storyView.peerId });\n      } else if (type === 'forward') {\n        focusMessage({ chatId: storyView.peerId, messageId: storyView.messageId });\n      }\n    }, CLOSE_ANIMATION_DURATION);\n  });\n\n  const contextActions = useMemo(() => {\n    if (!isUserId(storyView.peerId)) return undefined;\n    const { peerId, areStoriesBlocked, isUserBlocked } = storyView;\n    const user = peer as ApiUser;\n    const { isContact } = user || {};\n    const fullName = getUserFullName(user);\n\n    const actions: MenuItemContextAction[] = [];\n\n    if (!isUserBlocked) {\n      if (!areStoriesBlocked) {\n        actions.push({\n          handler: () => {\n            blockUser({ userId: peerId, isOnlyStories: true });\n            updateStoryView({ userId: peerId, areStoriesBlocked: true });\n          },\n          title: lang('StoryHideFrom', fullName),\n          icon: 'hand-stop',\n        });\n      } else {\n        actions.push({\n          handler: () => {\n            unblockUser({ userId: peerId, isOnlyStories: true });\n            updateStoryView({ userId: peerId, areStoriesBlocked: false });\n          },\n          title: lang('StoryShowBackTo', fullName),\n          icon: 'play-story',\n        });\n      }\n    }\n\n    if (isContact) {\n      actions.push({\n        handler: () => {\n          deleteContact({ userId: peerId });\n        },\n        title: lang('DeleteContact'),\n        icon: 'delete-user',\n        destructive: true,\n      });\n    } else {\n      actions.push({\n        handler: () => {\n          if (isUserBlocked) {\n            unblockUser({ userId: peerId });\n            updateStoryView({ userId: peerId, isUserBlocked: false });\n          } else {\n            blockUser({ userId: peerId });\n            updateStoryView({ userId: peerId, isUserBlocked: true });\n          }\n        },\n        title: lang(isUserBlocked ? 'Unblock' : 'BlockUser'),\n        icon: isUserBlocked ? 'user' : 'delete-user',\n        destructive: !isUserBlocked,\n      });\n    }\n\n    return actions;\n  }, [lang, storyView, peer]);\n\n  const statusIcon: IconName = storyView.type === 'user' ? 'message-read'\n    : storyView.type === 'forward' ? 'forward' : 'loop';\n  const shouldColorStatus = storyView.type === 'forward' || storyView.type === 'repost';\n\n  const status = useMemo(() => {\n    const isModified = storyView.type === 'repost' && storyView.story.forwardInfo?.isModified;\n    const parts = [formatDateAtTime(lang, storyView.date * 1000)];\n    if (isModified) {\n      parts.push(lang('lng_edited'));\n    }\n\n    return parts.join(` ${BULLET} `);\n  }, [lang, storyView]);\n\n  return (\n    <ListItem\n      key={storyView.peerId}\n      className={buildClassName(\n        'chat-item-clickable small-icon',\n        styles.opacityFadeIn,\n        (storyView.isUserBlocked || storyView.areStoriesBlocked) && styles.blocked,\n      )}\n      onClick={handleClick}\n      rightElement={storyView.type === 'user' && storyView.reaction ? (\n        <ReactionStaticEmoji\n          reaction={storyView.reaction}\n          className={styles.viewReaction}\n          size={DEFAULT_REACTION_SIZE}\n          availableReactions={availableReactions}\n          withIconHeart\n        />\n      ) : undefined}\n      contextActions={contextActions}\n      withPortalForMenu\n      menuBubbleClassName={styles.menuBubble}\n    >\n      {isUserId(storyView.peerId) ? (\n        <PrivateChatInfo\n          className={buildClassName(shouldColorStatus && styles.withColoredStatus)}\n          userId={storyView.peerId}\n          noStatusOrTyping\n          status={status}\n          statusIcon={statusIcon}\n          withStory\n          forceShowSelf\n        />\n      ) : (\n        <GroupChatInfo\n          className={buildClassName(shouldColorStatus && styles.withColoredStatus)}\n          chatId={storyView.peerId}\n          status={status}\n          statusIcon={statusIcon}\n          withStory\n        />\n      )}\n    </ListItem>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global, { storyView }) => {\n  const peer = selectPeer(global, storyView.peerId);\n\n  return {\n    peer,\n    availableReactions: global.reactions.availableReactions,\n  };\n})(StoryView));\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiStory, ApiTypeStoryView } from '../../api/types';\n\nimport {\n  STORY_MIN_REACTIONS_SORT,\n  STORY_VIEWS_MIN_CONTACTS_FILTER,\n  STORY_VIEWS_MIN_SEARCH,\n} from '../../config';\nimport {\n  selectIsCurrentUserPremium,\n  selectPeerStory,\n  selectTabState,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { getServerTime } from '../../util/serverTime';\nimport renderText from '../common/helpers/renderText';\n\nimport useDebouncedCallback from '../../hooks/useDebouncedCallback';\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useOldLang from '../../hooks/useOldLang';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport Button from '../ui/Button';\nimport DropdownMenu from '../ui/DropdownMenu';\nimport InfiniteScroll from '../ui/InfiniteScroll';\nimport ListItem from '../ui/ListItem';\nimport MenuItem from '../ui/MenuItem';\nimport Modal from '../ui/Modal';\nimport PlaceholderChatInfo from '../ui/placeholder/PlaceholderChatInfo';\nimport SearchInput from '../ui/SearchInput';\nimport StoryView from './StoryView';\n\nimport styles from './StoryViewModal.module.scss';\n\ninterface StateProps {\n  story?: ApiStory;\n  isLoading?: boolean;\n  views?: ApiTypeStoryView[];\n  nextOffset?: string;\n  viewersExpirePeriod: number;\n  isCurrentUserPremium?: boolean;\n}\n\nconst REFETCH_DEBOUNCE = 250;\n\nfunction StoryViewModal({\n  story,\n  viewersExpirePeriod,\n  views,\n  nextOffset,\n  isLoading,\n  isCurrentUserPremium,\n}: StateProps) {\n  const {\n    loadStoryViewList, closeStoryViewModal, clearStoryViews,\n  } = getActions();\n\n  const [areJustContacts, markJustContacts, unmarkJustContacts] = useFlag(false);\n  const [areReactionsFirst, markReactionsFirst, unmarkReactionsFirst] = useFlag(true);\n  const [query, setQuery] = useState('');\n\n  const lang = useOldLang();\n\n  const isOpen = Boolean(story);\n  const isExpired = Boolean(story?.date) && (story!.date + viewersExpirePeriod) < getServerTime();\n  const { viewsCount = 0, reactionsCount = 0 } = story?.views || {};\n\n  const shouldShowJustContacts = story?.isPublic && viewsCount > STORY_VIEWS_MIN_CONTACTS_FILTER;\n  const shouldShowSortByReactions = reactionsCount > STORY_MIN_REACTIONS_SORT;\n  const shouldShowSearch = viewsCount > STORY_VIEWS_MIN_SEARCH;\n  const hasHeader = shouldShowJustContacts || shouldShowSortByReactions || shouldShowSearch;\n\n  useEffect(() => {\n    if (!isOpen) {\n      setQuery('');\n      unmarkJustContacts();\n      markReactionsFirst();\n    }\n  }, [isOpen]);\n\n  const refetchViews = useDebouncedCallback(() => {\n    clearStoryViews({ isLoading: true });\n  }, [], REFETCH_DEBOUNCE, true);\n\n  useEffect(() => {\n    refetchViews();\n  }, [areJustContacts, areReactionsFirst, query, refetchViews]);\n\n  const sortedViews = useMemo(() => {\n    return views?.sort(prepareComparator(areReactionsFirst));\n  }, [areReactionsFirst, views]);\n\n  const placeholderCount = !sortedViews?.length ? Math.min(viewsCount, 8) : 1;\n\n  const notAllAvailable = Boolean(sortedViews?.length) && sortedViews!.length < viewsCount && isExpired;\n\n  const handleLoadMore = useLastCallback(() => {\n    if (!story?.id || nextOffset === undefined) return;\n    loadStoryViewList({\n      peerId: story.peerId,\n      storyId: story.id,\n      offset: nextOffset,\n      areReactionsFirst: areReactionsFirst || undefined,\n      areJustContacts: areJustContacts || undefined,\n      query,\n    });\n  });\n\n  const { handleScroll, isAtBeginning } = useScrolledState();\n\n  const handleClose = useLastCallback(() => {\n    closeStoryViewModal();\n  });\n\n  const MoreMenuButton: FC<{ onTrigger: () => void; isOpen?: boolean }> = useMemo(() => {\n    return ({ onTrigger, isOpen: isMenuOpen }) => (\n      <Button\n        fluid\n        size=\"tiny\"\n        color=\"translucent\"\n        className={buildClassName(!isMenuOpen && 'active', styles.sortButton, styles.topButton)}\n        faded={isMenuOpen}\n        onClick={onTrigger}\n        ariaLabel={lang('SortBy')}\n      >\n        <i className={buildClassName(\n          'icon',\n          areReactionsFirst ? 'icon-heart-outline' : 'icon-recent',\n          styles.iconSort,\n        )}\n        />\n        <i className={buildClassName('icon icon-down', styles.iconDown)} />\n      </Button>\n    );\n  }, [areReactionsFirst, lang]);\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={handleClose}\n      className=\"component-theme-dark\"\n      contentClassName={styles.viewsList}\n      isSlim\n    >\n      {hasHeader && (\n        <div className={styles.header}>\n          {shouldShowJustContacts && (\n            <div className={styles.contactFilter}>\n              <Button\n                className={buildClassName(!areJustContacts && styles.selected, styles.topButton)}\n                size=\"tiny\"\n                color=\"translucent-white\"\n                fluid\n                onClick={unmarkJustContacts}\n              >\n                {lang('AllViewers')}\n              </Button>\n              <Button\n                className={buildClassName(areJustContacts && styles.selected, styles.topButton)}\n                size=\"tiny\"\n                color=\"translucent-white\"\n                fluid\n                onClick={markJustContacts}\n              >\n                {lang('Contacts')}\n              </Button>\n            </div>\n          )}\n          {shouldShowSortByReactions && (\n            <DropdownMenu\n              className={styles.sort}\n              trigger={MoreMenuButton}\n              positionX=\"right\"\n            >\n              <MenuItem icon=\"heart-outline\" onClick={markReactionsFirst}>\n                {lang('SortByReactions')}\n                {areReactionsFirst && (\n                  <i className={buildClassName('icon icon-check', styles.check)} aria-hidden />\n                )}\n              </MenuItem>\n              <MenuItem icon=\"recent\" onClick={unmarkReactionsFirst}>\n                {lang('SortByTime')}\n                {!areReactionsFirst && (\n                  <i className={buildClassName('icon icon-check', styles.check)} aria-hidden />\n                )}\n              </MenuItem>\n            </DropdownMenu>\n          )}\n          {shouldShowSearch && (\n            <SearchInput className={styles.search} value={query} onChange={setQuery} />\n          )}\n        </div>\n      )}\n      <div\n        className={buildClassName(styles.content, !isAtBeginning && styles.topScrolled, 'custom-scroll')}\n        onScroll={handleScroll}\n      >\n        {isExpired && !isLoading && !query && Boolean(!sortedViews?.length) && (\n          <div className={buildClassName(styles.info, styles.centeredInfo)}>\n            {renderText(\n              lang(isCurrentUserPremium ? 'ServerErrorViewers' : 'ExpiredViewsStub'),\n              ['simple_markdown', 'emoji'],\n            )}\n          </div>\n        )}\n        {!isLoading && Boolean(query.length) && !sortedViews?.length && (\n          <div className={styles.info}>\n            {lang('Story.ViewList.EmptyTextSearch')}\n          </div>\n        )}\n        <InfiniteScroll\n          items={sortedViews}\n          onLoadMore={handleLoadMore}\n        >\n          {sortedViews?.map((view) => {\n            const additionalKeyId = view.type === 'forward' ? view.messageId\n              : view.type === 'repost' ? view.storyId : 'user';\n            return (\n              <StoryView key={`${view.peerId}-${view.date}-${additionalKeyId}`} storyView={view} />\n            );\n          })}\n          {isLoading && Array.from({ length: placeholderCount }).map((_, i) => (\n            <ListItem\n              // eslint-disable-next-line react/no-array-index-key\n              key={`placeholder-${i}`}\n              className=\"chat-item-clickable contact-list-item scroll-item small-icon\"\n              disabled\n            >\n              <PlaceholderChatInfo />\n            </ListItem>\n          ))}\n          {notAllAvailable && (\n            <div key=\"not-all-available\" className={buildClassName(styles.info, styles.bottomInfo)}>\n              {lang('Story.ViewList.NotFullyRecorded')}\n            </div>\n          )}\n        </InfiniteScroll>\n      </div>\n      <div className={buildClassName(styles.footer, 'dialog-buttons')}>\n        <Button\n          className={buildClassName('confirm-dialog-button', styles.close)}\n          isText\n          onClick={handleClose}\n        >\n          {lang('Close')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nfunction prepareComparator(areReactionsFirst?: boolean) {\n  return (a: ApiTypeStoryView, b: ApiTypeStoryView) => {\n    if (areReactionsFirst) {\n      const reactionA = a.type === 'user' && a.reaction;\n      const reactionB = b.type === 'user' && b.reaction;\n      if (reactionA && !reactionB) {\n        return -1;\n      }\n      if (!reactionA && reactionB) {\n        return 1;\n      }\n    }\n\n    return b.date - a.date;\n  };\n}\n\nexport default memo(withGlobal((global) => {\n  const { appConfig } = global;\n  const { storyViewer: { viewModal } } = selectTabState(global);\n  const {\n    storyId, views, nextOffset, isLoading,\n  } = viewModal || {};\n  const story = storyId ? selectPeerStory(global, global.currentUserId!, storyId) : undefined;\n\n  return {\n    storyId,\n    views,\n    viewersExpirePeriod: appConfig!.storyExpirePeriod + appConfig!.storyViewersExpirePeriod,\n    story: story && 'content' in story ? story : undefined,\n    nextOffset,\n    isLoading,\n    availableReactions: global.reactions.availableReactions,\n    isCurrentUserPremium: selectIsCurrentUserPremium(global),\n  };\n})(StoryViewModal));\n","import React, {\n  memo, useCallback, useEffect, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiTypeStory } from '../../api/types';\nimport type { StoryViewerOrigin } from '../../types';\n\nimport { ANIMATION_END_DELAY } from '../../config';\nimport {\n  selectIsStoryViewerOpen,\n  selectPeerStory,\n  selectPerformanceSettingsValue,\n  selectTabState,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport captureEscKeyListener from '../../util/captureEscKeyListener';\nimport { disableDirectTextInput, enableDirectTextInput } from '../../util/directInputManager';\nimport { animateClosing, animateOpening } from './helpers/ghostAnimation';\n\nimport useFlag from '../../hooks/useFlag';\nimport { dispatchHeavyAnimationEvent } from '../../hooks/useHeavyAnimationCheck';\nimport useOldLang from '../../hooks/useOldLang';\nimport usePrevious from '../../hooks/usePrevious';\nimport { dispatchPriorityPlaybackEvent } from '../../hooks/usePriorityPlaybackCheck';\nimport useSlideSizes from './hooks/useSlideSizes';\nimport useStoryProps from './hooks/useStoryProps';\n\nimport ReportModal from '../common/ReportModal';\nimport Button from '../ui/Button';\nimport ShowTransition from '../ui/ShowTransition';\nimport StealthModeModal from './StealthModeModal';\nimport StoryDeleteConfirmModal from './StoryDeleteConfirmModal';\nimport StorySettings from './StorySettings';\nimport StorySlides from './StorySlides';\nimport StoryViewModal from './StoryViewModal';\n\nimport styles from './StoryViewer.module.scss';\n\nconst ANIMATION_DURATION = 250;\n\ninterface StateProps {\n  isOpen: boolean;\n  peerId: string;\n  storyId?: number;\n  story?: ApiTypeStory;\n  origin?: StoryViewerOrigin;\n  shouldSkipHistoryAnimations?: boolean;\n  withAnimation?: boolean;\n  isPrivacyModalOpen?: boolean;\n}\n\nfunction StoryViewer({\n  isOpen,\n  peerId,\n  storyId,\n  story,\n  origin,\n  shouldSkipHistoryAnimations,\n  withAnimation,\n  isPrivacyModalOpen,\n}: StateProps) {\n  const { closeStoryViewer, closeStoryPrivacyEditor } = getActions();\n\n  const lang = useOldLang();\n  const [storyToDelete, setStoryToDelete] = useState<ApiTypeStory | undefined>(undefined);\n  const [isDeleteModalOpen, openDeleteModal, closeDeleteModal] = useFlag(false);\n  const [isReportModalOpen, openReportModal, closeReportModal] = useFlag(false);\n\n  const { bestImageData, thumbnail } = useStoryProps(story);\n  const slideSizes = useSlideSizes();\n  const isPrevOpen = usePrevious(isOpen);\n  const prevBestImageData = usePrevious(bestImageData);\n  const prevPeerId = usePrevious(peerId);\n  const prevOrigin = usePrevious(origin);\n  const isGhostAnimation = Boolean(withAnimation && !shouldSkipHistoryAnimations);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setStoryToDelete(undefined);\n      closeReportModal();\n      closeDeleteModal();\n    }\n  }, [isOpen]);\n\n  useEffect(() => {\n    if (!isOpen) {\n      return undefined;\n    }\n\n    disableDirectTextInput();\n    const stopPriorityPlayback = dispatchPriorityPlaybackEvent();\n\n    return () => {\n      enableDirectTextInput();\n      stopPriorityPlayback();\n    };\n  }, [isOpen]);\n\n  const handleClose = useCallback(() => {\n    closeStoryViewer();\n  }, [closeStoryViewer]);\n\n  const handleOpenDeleteModal = useCallback((s: ApiTypeStory) => {\n    setStoryToDelete(s);\n    openDeleteModal();\n  }, []);\n\n  const handleCloseDeleteModal = useCallback(() => {\n    closeDeleteModal();\n    setStoryToDelete(undefined);\n  }, []);\n\n  useEffect(() => (isOpen ? captureEscKeyListener(() => {\n    handleClose();\n  }) : undefined), [handleClose, isOpen]);\n\n  useEffect(() => {\n    if (isGhostAnimation && !isPrevOpen && isOpen && peerId && thumbnail && origin !== undefined) {\n      dispatchHeavyAnimationEvent(ANIMATION_DURATION + ANIMATION_END_DELAY);\n      animateOpening(peerId, origin, thumbnail, bestImageData, slideSizes.activeSlide);\n    }\n    if (isGhostAnimation && isPrevOpen && !isOpen && prevPeerId && prevBestImageData && prevOrigin !== undefined) {\n      dispatchHeavyAnimationEvent(ANIMATION_DURATION + ANIMATION_END_DELAY);\n      animateClosing(prevPeerId, prevOrigin, prevBestImageData);\n    }\n  }, [\n    isGhostAnimation,\n    bestImageData,\n    prevBestImageData,\n    isOpen,\n    isPrevOpen,\n    slideSizes.activeSlide,\n    thumbnail,\n    peerId,\n    prevPeerId,\n    origin,\n    prevOrigin,\n  ]);\n\n  return (\n    <ShowTransition\n      id=\"StoryViewer\"\n      className={styles.root}\n      isOpen={isOpen}\n      shouldAnimateFirstRender\n      noCloseTransition={shouldSkipHistoryAnimations}\n    >\n      <div className={styles.backdrop} onClick={handleClose} />\n      <Button\n        className={styles.close}\n        round\n        size=\"smaller\"\n        color=\"translucent-white\"\n        ariaLabel={lang('Close')}\n        onClick={handleClose}\n      >\n        <i className={buildClassName('icon icon-close')} aria-hidden />\n      </Button>\n\n      <StorySlides\n        isOpen={isOpen}\n        isReportModalOpen={isReportModalOpen}\n        isDeleteModalOpen={isDeleteModalOpen}\n        onReport={openReportModal}\n        onClose={handleClose}\n        onDelete={handleOpenDeleteModal}\n      />\n\n      <StoryDeleteConfirmModal\n        isOpen={isDeleteModalOpen}\n        story={storyToDelete}\n        onClose={handleCloseDeleteModal}\n      />\n      <StoryViewModal />\n      <StealthModeModal />\n      <StorySettings isOpen={isPrivacyModalOpen} onClose={closeStoryPrivacyEditor} />\n      <ReportModal\n        isOpen={isReportModalOpen}\n        onClose={closeReportModal}\n        subject=\"story\"\n        peerId={peerId!}\n        storyId={storyId}\n      />\n    </ShowTransition>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const {\n    shouldSkipHistoryAnimations, storyViewer: {\n      storyId, peerId, isPrivacyModalOpen, origin,\n    },\n  } = selectTabState(global);\n  const story = peerId && storyId ? selectPeerStory(global, peerId, storyId) : undefined;\n  const withAnimation = selectPerformanceSettingsValue(global, 'mediaViewerAnimations');\n\n  return {\n    isOpen: selectIsStoryViewerOpen(global),\n    shouldSkipHistoryAnimations,\n    peerId: peerId!,\n    storyId,\n    story,\n    origin,\n    withAnimation,\n    isPrivacyModalOpen,\n  };\n})(StoryViewer));\n","import type { IDimensions } from '../../../global/types';\n\nimport { roundToNearestEven } from '../../../util/math';\n\nexport const BASE_STORY_WIDTH = 720;\nexport const BASE_STORY_HEIGHT = 1280;\nconst BASE_SCREEN_WIDTH = 1200;\nconst BASE_SCREEN_HEIGHT = 800;\nconst BASE_ACTIVE_SLIDE_WIDTH = 405;\nconst BASE_ACTIVE_SLIDE_HEIGHT = 720;\nconst BASE_SLIDE_WIDTH = 135;\nconst BASE_SLIDE_HEIGHT = 240;\nconst BASE_GAP_WIDTH = 40;\n\nexport function calculateSlideSizes(windowWidth: number, windowHeight: number): {\n  activeSlide: IDimensions;\n  slide: IDimensions;\n  scale: number;\n  toActiveScale: number;\n  fromActiveScale: number;\n} {\n  const scale = calculateScale(BASE_SCREEN_WIDTH, BASE_SCREEN_HEIGHT, windowWidth, windowHeight);\n\n  const activeSlideWidth = roundToNearestEven(BASE_ACTIVE_SLIDE_WIDTH * scale);\n  const slideWidth = roundToNearestEven(BASE_SLIDE_WIDTH * scale);\n  // Avoid fractional values to prevent blurry text\n  return {\n    activeSlide: {\n      width: activeSlideWidth,\n      height: roundToNearestEven(BASE_ACTIVE_SLIDE_HEIGHT * scale),\n    },\n    slide: {\n      width: slideWidth,\n      height: roundToNearestEven(BASE_SLIDE_HEIGHT * scale),\n    },\n    scale,\n    toActiveScale: activeSlideWidth / slideWidth,\n    fromActiveScale: slideWidth / activeSlideWidth,\n  };\n}\n\nexport function calculateOffsetX({\n  scale,\n  slideAmount,\n  isActiveSlideSize,\n  isMoveThroughActiveSlide,\n  isBackward,\n}: {\n  scale: number;\n  slideAmount: number;\n  isActiveSlideSize: boolean;\n  isMoveThroughActiveSlide?: boolean;\n  isBackward: boolean;\n}) {\n  const mainOffset = BASE_GAP_WIDTH + (isActiveSlideSize ? BASE_ACTIVE_SLIDE_WIDTH : BASE_SLIDE_WIDTH);\n  const additionalOffset = (Math.abs(slideAmount) - 1)\n    * ((isMoveThroughActiveSlide ? BASE_ACTIVE_SLIDE_WIDTH : BASE_SLIDE_WIDTH) + BASE_GAP_WIDTH);\n  const totalOffset = roundToNearestEven((mainOffset + additionalOffset) * scale);\n\n  return isBackward ? -totalOffset : totalOffset;\n}\n\nfunction calculateScale(baseWidth: number, baseHeight: number, newWidth: number, newHeight: number) {\n  const widthScale = newWidth / baseWidth;\n  const heightScale = newHeight / baseHeight;\n\n  return Math.min(widthScale, heightScale);\n}\n","import type { IDimensions } from '../../../global/types';\nimport { StoryViewerOrigin } from '../../../types';\n\nimport { ANIMATION_END_DELAY } from '../../../config';\nimport fastBlur from '../../../lib/fastBlur';\nimport { requestMutation } from '../../../lib/fasterdom/fasterdom';\nimport { getPeerStoryHtmlId } from '../../../global/helpers';\nimport { applyStyles } from '../../../util/animation';\nimport stopEvent from '../../../util/stopEvent';\nimport { IS_CANVAS_FILTER_SUPPORTED } from '../../../util/windowEnvironment';\nimport windowSize from '../../../util/windowSize';\nimport { REM } from '../../common/helpers/mediaDimensions';\n\nimport storyRibbonStyles from '../StoryRibbon.module.scss';\nimport styles from '../StoryViewer.module.scss';\n\nconst ANIMATION_DURATION = 200;\nconst OFFSET_BOTTOM = 3.5 * REM;\nconst MOBILE_OFFSET = 0.5 * REM;\nconst MOBILE_WIDTH = 600;\n\nexport function animateOpening(\n  userId: string,\n  origin: StoryViewerOrigin,\n  thumb: string,\n  bestImageData: string | undefined,\n  dimensions: IDimensions,\n) {\n  const { mediaEl: fromImage } = getNodes(origin, userId);\n  if (!fromImage) {\n    return;\n  }\n  const { width: windowWidth, height: windowHeight } = windowSize.get();\n  let { width: toWidth, height: toHeight } = dimensions;\n\n  const isMobile = windowWidth <= MOBILE_WIDTH;\n\n  if (isMobile) {\n    toWidth = windowWidth - 2 * MOBILE_OFFSET;\n    toHeight = windowHeight - OFFSET_BOTTOM - 2 * MOBILE_OFFSET;\n\n    const safeAreaBottom = getComputedStyle(document.documentElement).getPropertyValue('--safe-area-bottom');\n    if (safeAreaBottom) {\n      toHeight -= parseFloat(safeAreaBottom);\n    }\n  }\n\n  const toLeft = isMobile ? MOBILE_OFFSET : (windowWidth - toWidth) / 2;\n  const toTop = isMobile ? MOBILE_OFFSET : (windowHeight - (toHeight + OFFSET_BOTTOM)) / 2;\n\n  const {\n    top: fromTop, left: fromLeft, width: fromWidth, height: fromHeight,\n  } = fromImage.getBoundingClientRect();\n\n  const fromTranslateX = (fromLeft + fromWidth / 2) - (toLeft + toWidth / 2);\n  const fromTranslateY = (fromTop + fromHeight / 2) - (toTop + toHeight / 2);\n  const fromScaleX = fromWidth / toWidth;\n  const fromScaleY = fromHeight / toHeight;\n\n  requestMutation(() => {\n    const ghost = createGhost(bestImageData || thumb, !bestImageData);\n    applyStyles(ghost, {\n      top: `${toTop}px`,\n      left: `${toLeft}px`,\n      width: `${toWidth}px`,\n      height: `${toHeight}px`,\n      transform: `translate3d(${fromTranslateX}px, ${fromTranslateY}px, 0) scale(${fromScaleX}, ${fromScaleY})`,\n    });\n\n    const container = document.getElementById('StoryViewer')!;\n    container.appendChild(ghost);\n    document.body.classList.add('ghost-animating');\n\n    requestMutation(() => {\n      applyStyles(ghost, {\n        transform: '',\n      });\n\n      setTimeout(() => {\n        requestMutation(() => {\n          if (container.contains(ghost)) {\n            container.removeChild(ghost);\n          }\n          document.body.classList.remove('ghost-animating');\n        });\n      }, ANIMATION_DURATION + ANIMATION_END_DELAY);\n    });\n  });\n}\n\nexport function animateClosing(\n  userId: string,\n  origin: StoryViewerOrigin,\n  bestImageData: string,\n) {\n  const { mediaEl: toImage } = getNodes(origin, userId);\n\n  const fromImage = document.getElementById('StoryViewer')!.querySelector<HTMLImageElement>(\n    `.${styles.mobileSlide} .${styles.media}, .${styles.activeSlide} .${styles.media}`,\n  );\n  if (!fromImage || !toImage) {\n    return;\n  }\n  const {\n    top: fromTop, left: fromLeft, width: fromWidth, height: fromHeight,\n  } = fromImage.getBoundingClientRect();\n  const {\n    top: toTop, left: toLeft, width: toWidth, height: toHeight,\n  } = toImage.getBoundingClientRect();\n\n  const toTranslateX = (toLeft + toWidth / 2) - (fromLeft + fromWidth / 2);\n  const toTranslateY = (toTop + toHeight / 2) - (fromTop + fromHeight / 2);\n  const toScaleX = toWidth / fromWidth;\n  const toScaleY = toHeight / fromHeight;\n\n  requestMutation(() => {\n    const ghost = createGhost(bestImageData);\n    applyStyles(ghost, {\n      top: `${fromTop}px`,\n      left: `${fromLeft}px`,\n      width: `${fromWidth}px`,\n      height: `${fromHeight}px`,\n    });\n\n    const ghost2 = createGhost(toImage.src, undefined, true);\n    const ghost2Top = (fromTop + fromHeight / 2) - fromWidth / 2;\n    applyStyles(ghost2, {\n      top: `${ghost2Top}px`,\n      left: `${fromLeft}px`,\n      width: `${fromWidth}px`,\n      height: `${fromWidth}px`,\n    });\n\n    const container = document.getElementById('StoryViewer')!;\n    container.appendChild(ghost);\n    document.body.appendChild(ghost2);\n    document.body.classList.add('ghost-animating');\n\n    requestMutation(() => {\n      applyStyles(ghost, {\n        transform: `translate3d(${toTranslateX}px, ${toTranslateY}px, 0) scale(${toScaleX}, ${toScaleY})`,\n      });\n\n      applyStyles(ghost2, {\n        transform: `translate3d(${toTranslateX}px, ${toTranslateY}px, 0) scale(${toScaleX})`,\n        opacity: '1',\n      });\n\n      setTimeout(() => {\n        requestMutation(() => {\n          if (container.contains(ghost)) {\n            container.removeChild(ghost);\n          }\n\n          if (document.body.contains(ghost2)) {\n            document.body.removeChild(ghost2);\n          }\n\n          document.body.classList.remove('ghost-animating');\n        });\n      }, ANIMATION_DURATION + ANIMATION_END_DELAY);\n    });\n  });\n}\n\nconst RADIUS = 2;\nconst ITERATIONS = 2;\n\nfunction createGhost(source: string, hasBlur = false, isGhost2 = false) {\n  const ghost = document.createElement('div');\n  ghost.classList.add(!isGhost2 ? styles.ghost : styles.ghost2);\n\n  const img = new Image();\n  img.draggable = false;\n  img.oncontextmenu = stopEvent;\n  img.classList.add(styles.ghostImage);\n\n  if (hasBlur) {\n    const canvas = document.createElement('canvas');\n    canvas.classList.add(styles.thumbnail);\n    img.onload = () => {\n      const ctx = canvas.getContext('2d', { alpha: false })!;\n      const {\n        width,\n        height,\n      } = img;\n\n      requestMutation(() => {\n        canvas.width = width;\n        canvas.height = height;\n\n        if (IS_CANVAS_FILTER_SUPPORTED) {\n          ctx.filter = `blur(${RADIUS}px)`;\n        }\n\n        ctx.drawImage(img, -RADIUS * 2, -RADIUS * 2, width + RADIUS * 4, height + RADIUS * 4);\n\n        if (!IS_CANVAS_FILTER_SUPPORTED) {\n          fastBlur(ctx, 0, 0, width, height, RADIUS, ITERATIONS);\n        }\n      });\n    };\n    img.src = source;\n    ghost.appendChild(canvas);\n  } else {\n    img.src = source;\n    ghost.appendChild(img);\n  }\n\n  return ghost;\n}\n\nfunction getNodes(origin: StoryViewerOrigin, userId: string) {\n  let containerSelector;\n  const mediaSelector = `#${getPeerStoryHtmlId(userId)}`;\n\n  switch (origin) {\n    case StoryViewerOrigin.StoryRibbon:\n      containerSelector = `#LeftColumn .${storyRibbonStyles.root}`;\n      break;\n    case StoryViewerOrigin.MiddleHeaderAvatar:\n      containerSelector = '.MiddleHeader .Transition_slide-active .ChatInfo';\n      break;\n    case StoryViewerOrigin.ChatList:\n      containerSelector = '#LeftColumn .chat-list';\n      break;\n    case StoryViewerOrigin.SearchResult:\n      containerSelector = '#LeftColumn .LeftSearch';\n      break;\n  }\n\n  const container = document.querySelector<HTMLElement>(containerSelector)!;\n  const mediaEls = container && container.querySelectorAll<HTMLImageElement>(`${mediaSelector} img`);\n\n  return {\n    container,\n    mediaEl: mediaEls?.[0],\n  };\n}\n","import { useMemo } from '../../../lib/teact/teact';\n\nimport { calculateSlideSizes } from '../helpers/dimensions';\n\nimport useWindowSize from '../../../hooks/window/useWindowSize';\n\nexport default function useSlideSizes() {\n  const { width: windowWidth, height: windowHeight } = useWindowSize();\n  return useMemo(() => calculateSlideSizes(windowWidth, windowHeight), [windowWidth, windowHeight]);\n}\n","import type { ApiTypeStory } from '../../../api/types';\nimport { ApiMediaFormat } from '../../../api/types';\n\nimport { getStoryMediaHash, hasMessageText } from '../../../global/helpers';\n\nimport useMedia from '../../../hooks/useMedia';\n\nexport default function useStoryProps(\n  story?: ApiTypeStory, isCurrentUserPremium = false, isDropdownMenuOpen = false,\n) {\n  const isLoadedStory = story && 'content' in story;\n  const isDeletedStory = story && 'isDeleted' in story;\n  const hasText = isLoadedStory ? hasMessageText(story) : false;\n  const hasForwardInfo = isLoadedStory && Boolean(story.forwardInfo);\n\n  let thumbnail: string | undefined;\n  if (isLoadedStory) {\n    if (story.content.photo?.thumbnail) {\n      thumbnail = story.content.photo.thumbnail.dataUri;\n    }\n    if (story.content.video?.thumbnail?.dataUri) {\n      thumbnail = story.content.video.thumbnail.dataUri;\n    }\n  }\n\n  const previewHash = isLoadedStory ? getStoryMediaHash(story) : undefined;\n  const previewBlobUrl = useMedia(previewHash);\n  const isVideo = Boolean(isLoadedStory && story.content.video);\n  const noSound = isLoadedStory && story.content.video?.noSound;\n  const fullMediaHash = isLoadedStory ? getStoryMediaHash(story, 'full') : undefined;\n  const fullMediaData = useMedia(fullMediaHash, !story, isVideo ? ApiMediaFormat.Progressive : ApiMediaFormat.BlobUrl);\n  const altMediaHash = isVideo && isLoadedStory ? getStoryMediaHash(story, 'full', true) : undefined;\n  const altMediaData = useMedia(altMediaHash, !story, ApiMediaFormat.Progressive);\n\n  const hasFullData = Boolean(fullMediaData || altMediaData);\n  const bestImageData = isVideo ? previewBlobUrl : fullMediaData || previewBlobUrl;\n  const hasThumb = !previewBlobUrl && !hasFullData;\n\n  const canDownload = isCurrentUserPremium && isLoadedStory && !story.noForwards;\n  const downloadHash = isLoadedStory ? getStoryMediaHash(story, 'download') : undefined;\n  const downloadMediaData = useMedia(downloadHash, !canDownload && !isDropdownMenuOpen);\n\n  return {\n    isLoadedStory,\n    isDeletedStory,\n    hasText,\n    hasForwardInfo,\n    thumbnail,\n    previewHash,\n    previewBlobUrl,\n    isVideo,\n    noSound,\n    fullMediaHash,\n    fullMediaData,\n    altMediaHash,\n    altMediaData,\n    hasFullData,\n    bestImageData,\n    hasThumb,\n    canDownload,\n    downloadMediaData,\n  };\n}\n","import React, { memo, useMemo, useState } from '../../../lib/teact/teact';\n\nimport type { ApiUser } from '../../../api/types';\n\nimport { filterUsersByName } from '../../../global/helpers';\nimport { unique } from '../../../util/iteratees';\nimport { MEMO_EMPTY_ARRAY } from '../../../util/memo';\n\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Picker from '../../common/Picker';\n\ninterface OwnProps {\n  id: string;\n  contactListIds?: string[];\n  currentUserId: string;\n  selectedIds?: string[];\n  lockedIds?: string[];\n  usersById: Record<string, ApiUser>;\n  onSelect: (selectedIds: string[]) => void;\n}\n\nfunction AllowDenyList({\n  id,\n  contactListIds,\n  currentUserId,\n  usersById,\n  selectedIds,\n  lockedIds,\n  onSelect,\n}: OwnProps) {\n  const lang = useOldLang();\n\n  const [searchQuery, setSearchQuery] = useState<string>('');\n  const displayedIds = useMemo(() => {\n    const contactIds = (contactListIds || []).filter((userId) => userId !== currentUserId);\n    return unique(filterUsersByName([...selectedIds || [], ...contactIds], usersById, searchQuery));\n  }, [contactListIds, currentUserId, searchQuery, selectedIds, usersById]);\n\n  return (\n    <Picker\n      key={id}\n      itemIds={displayedIds}\n      selectedIds={selectedIds ?? MEMO_EMPTY_ARRAY}\n      lockedSelectedIds={lockedIds}\n      filterValue={searchQuery}\n      filterPlaceholder={lang('Search')}\n      searchInputId={`${id}-picker-search`}\n      isSearchable\n      forceShowSelf\n      onSelectedIdsChange={onSelect}\n      onFilterChange={setSearchQuery}\n    />\n  );\n}\n\nexport default memo(AllowDenyList);\n","import React, {\n  memo, useCallback, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { ApiUser } from '../../../api/types';\n\nimport { filterUsersByName } from '../../../global/helpers';\nimport buildClassName from '../../../util/buildClassName';\nimport { unique } from '../../../util/iteratees';\n\nimport useEffectWithPrevDeps from '../../../hooks/useEffectWithPrevDeps';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Picker from '../../common/Picker';\nimport FloatingActionButton from '../../ui/FloatingActionButton';\n\nimport styles from './CloseFriends.module.scss';\n\nexport type OwnProps = {\n  isActive?: boolean;\n  currentUserId: string;\n  usersById: Record<string, ApiUser>;\n  contactListIds?: string[];\n  onClose: NoneToVoidFunction;\n};\n\nfunction CloseFriends({\n  isActive, contactListIds, usersById, currentUserId, onClose,\n}: OwnProps) {\n  const { saveCloseFriends } = getActions();\n\n  const lang = useOldLang();\n  const [searchQuery, setSearchQuery] = useState<string>('');\n  const [isSubmitShown, setIsSubmitShown] = useState<boolean>(false);\n  const [newSelectedContactIds, setNewSelectedContactIds] = useState<string[]>([]);\n\n  const closeFriendIds = useMemo(() => {\n    return (contactListIds || []).filter((userId) => usersById[userId]?.isCloseFriend);\n  }, [contactListIds, usersById]);\n\n  const displayedIds = useMemo(() => {\n    const contactIds = (contactListIds || []).filter((id) => id !== currentUserId);\n    return unique(filterUsersByName([...closeFriendIds, ...contactIds], usersById, searchQuery));\n  }, [closeFriendIds, contactListIds, currentUserId, searchQuery, usersById]);\n\n  useEffectWithPrevDeps(([prevIsActive]) => {\n    if (!prevIsActive && isActive) {\n      setIsSubmitShown(false);\n      setNewSelectedContactIds(closeFriendIds);\n    }\n  }, [isActive, closeFriendIds]);\n\n  const handleSelectedContactIdsChange = useCallback((value: string[]) => {\n    setNewSelectedContactIds(value);\n    setIsSubmitShown(true);\n  }, []);\n\n  const handleSubmit = useLastCallback(() => {\n    saveCloseFriends({ userIds: newSelectedContactIds });\n    onClose();\n  });\n\n  return (\n    <>\n      <Picker\n        itemIds={displayedIds || []}\n        selectedIds={newSelectedContactIds}\n        filterValue={searchQuery}\n        filterPlaceholder={lang('Search')}\n        searchInputId=\"close-friends-picker-search\"\n        isSearchable\n        onSelectedIdsChange={handleSelectedContactIdsChange}\n        onFilterChange={setSearchQuery}\n      />\n\n      <div className={buildClassName(styles.buttonHolder, isSubmitShown && styles.active)}>\n        <FloatingActionButton\n          isShown={isSubmitShown}\n          onClick={handleSubmit}\n          ariaLabel={lang('Save')}\n        >\n          <i className=\"icon icon-check\" />\n        </FloatingActionButton>\n      </div>\n    </>\n  );\n}\n\nexport default memo(CloseFriends);\n","import type { Dispatch, StateReducer } from '../useReducer';\n\nimport useReducer from '../useReducer';\n\nexport type FormState = {\n  streetLine1: string;\n  streetLine2: string;\n  city: string;\n  state: string;\n  countryIso2: string;\n  postCode: string;\n  fullName: string;\n  email: string;\n  phone: string;\n  shipping: string;\n  cardNumber: string;\n  cardholder: string;\n  expiry: string;\n  cvv: string;\n  billingCountry: string;\n  billingZip: string;\n  saveInfo: boolean;\n  saveCredentials: boolean;\n  formErrors: Record<string, string>;\n  tipAmount: number;\n  savedCredentialId: string;\n};\n\nexport type FormActions = (\n  'changeAddress1' | 'changeAddress2' | 'changeCity' | 'changeState' | 'changeCountry' |\n  'changePostCode' | 'changeFullName' | 'changeEmail' | 'changePhone' | 'changeShipping' | 'updateUserInfo' |\n  'changeCardNumber' | 'changeCardholder' | 'changeExpiryDate' | 'changeCvvCode' | 'changeBillingCountry' |\n  'changeBillingZip' | 'changeSaveInfo' | 'changeSaveCredentials' | 'setFormErrors' | 'resetState' | 'setTipAmount' |\n  'changeSavedCredentialId'\n);\nexport type FormEditDispatch = Dispatch<FormState, FormActions>;\n\nconst INITIAL_STATE: FormState = {\n  streetLine1: '',\n  streetLine2: '',\n  city: '',\n  state: '',\n  countryIso2: '',\n  postCode: '',\n  fullName: '',\n  email: '',\n  phone: '',\n  shipping: '',\n  cardNumber: '',\n  cardholder: '',\n  expiry: '',\n  cvv: '',\n  billingCountry: '',\n  billingZip: '',\n  saveInfo: true,\n  saveCredentials: false,\n  formErrors: {},\n  tipAmount: 0,\n  savedCredentialId: '',\n};\n\nconst reducer: StateReducer<FormState, FormActions> = (state, action) => {\n  switch (action.type) {\n    case 'changeAddress1':\n      return {\n        ...state,\n        streetLine1: action.payload,\n        formErrors: {\n          ...state.formErrors,\n          streetLine1: undefined,\n        },\n      };\n    case 'changeAddress2':\n      return {\n        ...state,\n        streetLine2: action.payload,\n        formErrors: {\n          ...state.formErrors,\n          streetLine2: undefined,\n        },\n      };\n    case 'changeCity':\n      return {\n        ...state,\n        city: action.payload,\n        formErrors: {\n          ...state.formErrors,\n          city: undefined,\n        },\n      };\n    case 'changeState':\n      return {\n        ...state,\n        state: action.payload,\n        formErrors: {\n          ...state.formErrors,\n          state: undefined,\n        },\n      };\n    case 'changeCountry':\n      return {\n        ...state,\n        countryIso2: action.payload.iso2,\n        billingCountry: action.payload.defaultName,\n        formErrors: {\n          ...state.formErrors,\n          countryIso2: undefined,\n        },\n      };\n    case 'changePostCode':\n      return {\n        ...state,\n        postCode: action.payload,\n        formErrors: {\n          ...state.formErrors,\n          postCode: undefined,\n        },\n      };\n    case 'changeFullName':\n      return {\n        ...state,\n        fullName: action.payload,\n        formErrors: {\n          ...state.formErrors,\n          fullName: undefined,\n        },\n      };\n    case 'changeEmail':\n      return {\n        ...state,\n        email: action.payload,\n        formErrors: {\n          ...state.formErrors,\n          email: undefined,\n        },\n      };\n    case 'changePhone':\n      return {\n        ...state,\n        phone: action.payload,\n        formErrors: {\n          ...state.formErrors,\n          phone: undefined,\n        },\n      };\n    case 'changeShipping':\n      return { ...state, shipping: action.payload };\n    case 'changeCardNumber':\n      return {\n        ...state,\n        cardNumber: action.payload,\n        formErrors: {\n          ...state.formErrors,\n          cardNumber: undefined,\n        },\n      };\n    case 'changeCardholder':\n      return {\n        ...state,\n        cardholder: action.payload,\n        formErrors: {\n          ...state.formErrors,\n          cardholder: undefined,\n        },\n      };\n    case 'changeExpiryDate':\n      return {\n        ...state,\n        expiry: action.payload,\n        formErrors: {\n          ...state.formErrors,\n          expiry: undefined,\n        },\n      };\n    case 'changeCvvCode':\n      return {\n        ...state,\n        cvv: action.payload,\n        formErrors: {\n          ...state.formErrors,\n          cvv: undefined,\n        },\n      };\n    case 'changeBillingCountry':\n      return {\n        ...state,\n        billingCountry: action.payload,\n        formErrors: {\n          ...state.formErrors,\n          billingCountry: undefined,\n        },\n      };\n    case 'changeBillingZip':\n      return {\n        ...state,\n        billingZip: action.payload,\n        formErrors: {\n          ...state.formErrors,\n          billingZip: undefined,\n        },\n      };\n    case 'changeSaveInfo':\n      return { ...state, saveInfo: action.payload };\n    case 'changeSaveCredentials':\n      return { ...state, saveCredentials: action.payload };\n    case 'updateUserInfo':\n      if (action.payload.country) {\n        return {\n          ...state,\n          ...action.payload,\n          billingCountry: action.payload.country,\n        };\n      }\n      return { ...state, ...action.payload };\n    case 'setFormErrors':\n      return {\n        ...state,\n        formErrors: {\n          ...state.formErrors,\n          ...action.payload,\n        },\n      };\n    case 'setTipAmount':\n      return {\n        ...state,\n        tipAmount: action.payload,\n      };\n    case 'changeSavedCredentialId':\n      return {\n        ...state,\n        savedCredentialId: action.payload,\n      };\n    case 'resetState':\n      return {\n        ...INITIAL_STATE,\n      };\n    default:\n      return state;\n  }\n};\n\nconst usePaymentReducer = () => {\n  return useReducer(reducer, INITIAL_STATE);\n};\n\nexport default usePaymentReducer;\n","import type { Dispatch, StateReducer } from '../useReducer';\n\nimport useReducer from '../useReducer';\n\nexport type TwoFaActions = (\n  'setCurrentPassword' | 'setPassword' | 'setHint' | 'setEmail' | 'reset'\n);\nexport type TwoFaDispatch = Dispatch<TwoFaState, TwoFaActions>;\n\nexport type TwoFaState = {\n  currentPassword: string;\n  password: string;\n  hint: string;\n  email: string;\n};\n\nconst INITIAL_STATE: TwoFaState = {\n  currentPassword: '',\n  password: '',\n  hint: '',\n  email: '',\n};\n\nconst twoFaReducer: StateReducer<TwoFaState, TwoFaActions> = (\n  state,\n  action,\n) => {\n  switch (action.type) {\n    case 'setCurrentPassword':\n      return {\n        ...state,\n        currentPassword: action.payload,\n      };\n\n    case 'setPassword':\n      return {\n        ...state,\n        password: action.payload,\n      };\n\n    case 'setHint':\n      return {\n        ...state,\n        hint: action.payload,\n      };\n\n    case 'setEmail':\n      return {\n        ...state,\n        email: action.payload,\n      };\n\n    case 'reset':\n      return INITIAL_STATE;\n\n    default:\n      return state;\n  }\n};\n\nconst useTwoFaReducer = () => {\n  return useReducer(twoFaReducer, INITIAL_STATE);\n};\n\nexport default useTwoFaReducer;\n","import { useEffect, useRef } from '../lib/teact/teact';\n\nimport fastBlur from '../lib/fastBlur';\nimport { imgToCanvas } from '../util/files';\nimport useForceUpdate from './useForceUpdate';\n\nconst RADIUS = 2;\nconst ITERATIONS = 2;\nconst MAX_CACHE_SIZE = 1000;\n\nconst cache = new Map<string, string>();\n\nexport default function useBlur(dataUri?: string, isDisabled = false, delay?: number) {\n  const blurredRef = useRef<string | undefined>(dataUri ? cache.get(dataUri) : undefined);\n  const timeoutRef = useRef<number>();\n  const forceUpdate = useForceUpdate();\n\n  if (timeoutRef.current && isDisabled) {\n    clearTimeout(timeoutRef.current);\n    timeoutRef.current = undefined;\n  }\n\n  useEffect(() => {\n    if (!dataUri || blurredRef.current || isDisabled) {\n      return;\n    }\n\n    const img = new Image();\n\n    img.onload = () => {\n      const canvas = imgToCanvas(img);\n      fastBlur(canvas.getContext('2d'), 0, 0, canvas.width, canvas.height, RADIUS, ITERATIONS);\n      const blurredDataUri = canvas.toDataURL();\n\n      blurredRef.current = blurredDataUri;\n      forceUpdate();\n\n      if (cache.size >= MAX_CACHE_SIZE) {\n        cache.clear();\n      }\n      cache.set(dataUri, blurredDataUri);\n    };\n\n    if (delay) {\n      timeoutRef.current = window.setTimeout(() => {\n        img.src = dataUri;\n      }, delay);\n    } else {\n      img.src = dataUri;\n    }\n  }, [dataUri, delay, forceUpdate, isDisabled]);\n\n  return blurredRef.current;\n}\n","import { useRef } from '../lib/teact/teact';\n\nimport fastBlur from '../lib/fastBlur';\nimport { imgToCanvas } from '../util/files';\nimport useBlur from './useBlur';\nimport useSyncEffect from './useSyncEffect';\n\nconst RADIUS = 2;\nconst ITERATIONS = 2;\n\nexport default function useBlurSync(dataUri: string | false | undefined) {\n  const blurredRef = useRef<string>();\n\n  let isChanged = false;\n\n  useSyncEffect(() => {\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n    isChanged = true;\n\n    blurredRef.current = undefined;\n\n    if (!dataUri) {\n      return;\n    }\n\n    const img = new Image();\n    img.src = dataUri;\n    if (!img.width) {\n      return;\n    }\n\n    const canvas = imgToCanvas(img);\n    fastBlur(canvas.getContext('2d'), 0, 0, canvas.width, canvas.height, RADIUS, ITERATIONS);\n\n    blurredRef.current = canvas.toDataURL();\n  }, [dataUri]);\n\n  // Sometimes `Image` do not manage to load synchronously,\n  // so we fall back the non-blurred variant and prepare the async one at least for the next time\n  const blurredAsync = useBlur(dataUri || undefined, Boolean(blurredRef.current));\n\n  return blurredRef.current || (!isChanged && blurredAsync) || dataUri || undefined;\n}\n","import { useEffect } from '../lib/teact/teact';\n\nimport { createSignal } from '../util/signals';\n\nexport const [getCurrentTime, setCurrentTime] = createSignal(0);\n\nexport default function useCurrentTimeSignal() {\n  useEffect(() => {\n    return () => {\n      setCurrentTime(0);\n    };\n  }, []);\n  return [getCurrentTime, setCurrentTime] as const;\n}\n","import type { RefObject } from 'react';\nimport { useEffect } from '../lib/teact/teact';\n\nimport { requestMeasure } from '../lib/fasterdom/fasterdom';\nimport { IS_TOUCH_ENV } from '../util/windowEnvironment';\n\nconst DEFAULT_DURATION = 300;\n\nexport default function useFocusAfterAnimation(\n  ref: RefObject<HTMLInputElement>, animationDuration = DEFAULT_DURATION,\n) {\n  useEffect(() => {\n    if (IS_TOUCH_ENV) {\n      return;\n    }\n\n    setTimeout(() => {\n      requestMeasure(() => {\n        ref.current?.focus();\n      });\n    }, animationDuration);\n  }, [ref, animationDuration]);\n}\n","import { useCallback, useEffect, useRef } from '../lib/teact/teact';\n\nconst DEFAULT_THRESHOLD = 250;\n\nfunction useLongPress(\n  onStart: NoneToVoidFunction,\n  onEnd: NoneToVoidFunction,\n) {\n  const isLongPressActive = useRef(false);\n  const isPressed = useRef(false);\n  const timerId = useRef<number | undefined>(undefined);\n\n  const start = useCallback((e: React.MouseEvent | React.TouchEvent) => {\n    const canProcessEvent = ('button' in e && e.button === 0) || ('touches' in e && e.touches.length > 0);\n    if (isPressed.current || !canProcessEvent) {\n      return;\n    }\n\n    isPressed.current = true;\n    timerId.current = window.setTimeout(() => {\n      onStart();\n      isLongPressActive.current = true;\n    }, DEFAULT_THRESHOLD);\n  }, [onStart]);\n\n  const cancel = useCallback(() => {\n    if (isLongPressActive.current) {\n      onEnd();\n    }\n\n    isLongPressActive.current = false;\n    isPressed.current = false;\n    window.clearTimeout(timerId.current);\n  }, [onEnd]);\n\n  useEffect(() => {\n    return () => {\n      window.clearTimeout(timerId.current);\n    };\n  }, []);\n\n  return {\n    onMouseDown: start,\n    onMouseUp: cancel,\n    onMouseLeave: cancel,\n    onTouchStart: start,\n    onTouchEnd: cancel,\n  };\n}\n\nexport default useLongPress;\n","import { useCallback, useRef } from '../lib/teact/teact';\n\nconst CLICK_TIMEOUT = 300;\n\nexport default function useMultiClick(amount: number, callback: NoneToVoidFunction) {\n  const currentAmountRef = useRef(0);\n  const timeoutRef = useRef<ReturnType<typeof setTimeout>>();\n  const handleClick = useCallback(() => {\n    currentAmountRef.current++;\n    if (currentAmountRef.current === amount) {\n      currentAmountRef.current = 0;\n      callback();\n      return;\n    }\n\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n\n    timeoutRef.current = setTimeout(() => {\n      currentAmountRef.current = 0;\n    }, CLICK_TIMEOUT);\n  }, [amount, callback]);\n\n  return handleClick;\n}\n","import { useCallback, useLayoutEffect, useState } from '../lib/teact/teact';\n\nimport { DEBUG } from '../config';\nimport safePlay, { getIsVideoPlaying } from '../util/safePlay';\nimport { createSignal } from '../util/signals';\nimport { IS_IOS, IS_PWA } from '../util/windowEnvironment';\n\ntype RefType = {\n  current: HTMLVideoElement | null;\n};\n\ntype ReturnType = [boolean, () => void, boolean] | [false];\ntype CallbackType = () => void;\n\nconst signal = createSignal(false);\nconst setIsPictureInPicture = signal[1];\n\nexport function usePictureInPictureSignal() {\n  return signal;\n}\n\nexport default function usePictureInPicture(\n  elRef: RefType,\n  onEnter: CallbackType,\n  onLeave: CallbackType,\n): ReturnType {\n  const [isSupported, setIsSupported] = useState(false);\n  const [isActive, setIsActive] = useState(false);\n\n  useLayoutEffect(() => {\n    // PIP is not supported in PWA on iOS, despite being detected\n    if ((IS_IOS && IS_PWA) || !elRef.current) return undefined;\n    const video = elRef.current;\n    const setMode = getSetPresentationMode(video);\n    const isEnabled = (document.pictureInPictureEnabled && !elRef.current?.disablePictureInPicture)\n      || setMode !== undefined;\n    if (!isEnabled) return undefined;\n    // @ts-ignore\n    video.autoPictureInPicture = true;\n    setIsSupported(true);\n    const onEnterInternal = () => {\n      onEnter();\n      setIsActive(true);\n      setIsPictureInPicture(true);\n    };\n    const onLeaveInternal = () => {\n      setIsPictureInPicture(false);\n      setIsActive(false);\n      onLeave();\n    };\n    video.addEventListener('enterpictureinpicture', onEnterInternal);\n    video.addEventListener('leavepictureinpicture', onLeaveInternal);\n    return () => {\n      video.removeEventListener('enterpictureinpicture', onEnterInternal);\n      video.removeEventListener('leavepictureinpicture', onLeaveInternal);\n    };\n  }, [elRef, onEnter, onLeave]);\n\n  const exitPictureInPicture = useCallback(() => {\n    if (!elRef.current) return;\n    const video = elRef.current;\n    const setMode = getSetPresentationMode(video);\n    if (setMode) {\n      setMode('inline');\n    } else {\n      exitPictureInPictureIfNeeded();\n    }\n  }, [elRef]);\n\n  const enterPictureInPicture = useCallback(() => {\n    if (!elRef.current) return;\n    exitPictureInPicture();\n    const video = elRef.current;\n    const isPlaying = getIsVideoPlaying(video);\n    const setMode = getSetPresentationMode(video);\n    if (setMode) {\n      setMode('picture-in-picture');\n    } else {\n      requestPictureInPicture(video);\n    }\n    // Muted video stops in PiP mode, so we need to play it again\n    if (isPlaying) {\n      safePlay(video);\n    }\n  }, [elRef, exitPictureInPicture]);\n\n  if (!isSupported) {\n    return [false];\n  }\n\n  return [isSupported, enterPictureInPicture, isActive];\n}\n\nfunction getSetPresentationMode(video: HTMLVideoElement) {\n  // @ts-ignore\n  if (video.webkitSupportsPresentationMode && typeof video.webkitSetPresentationMode === 'function') {\n    // @ts-ignore\n    return video.webkitSetPresentationMode.bind(video);\n  }\n  return undefined;\n}\n\nfunction requestPictureInPicture(video: HTMLVideoElement) {\n  if (video.requestPictureInPicture) {\n    try {\n      video.requestPictureInPicture();\n    } catch (err) {\n      if (DEBUG) {\n        // eslint-disable-next-line no-console\n        console.log('[MV] PictureInPicture Error', err);\n      }\n    }\n  }\n}\n\nexport function exitPictureInPictureIfNeeded() {\n  if (document.pictureInPictureElement) {\n    try {\n      document.exitPictureInPicture();\n    } catch (err) {\n      if (DEBUG) {\n        // eslint-disable-next-line no-console\n        console.log('[MV] PictureInPicture Error', err);\n      }\n    }\n  }\n}\n","import { useState } from '../lib/teact/teact';\n\nimport useLastCallback from './useLastCallback';\n\nconst THRESHOLD = 5;\n\nexport default function useScrolledState(threshold = THRESHOLD) {\n  const [isAtBeginning, setIsAtBeginning] = useState(true);\n  const [isAtEnd, setIsAtEnd] = useState(true);\n\n  const handleScroll = useLastCallback((e: React.UIEvent<HTMLElement>) => {\n    const { scrollHeight, scrollTop, clientHeight } = e.target as HTMLElement;\n\n    setIsAtBeginning(scrollTop < threshold);\n    setIsAtEnd(scrollHeight - scrollTop - clientHeight < threshold);\n  });\n\n  return { isAtBeginning, isAtEnd, handleScroll };\n}\n","import { useCallback, useEffect, useRef } from '../lib/teact/teact';\n\nconst useSendWithEnter = (\n  onSelect: NoneToVoidFunction,\n) => {\n  // eslint-disable-next-line no-null/no-null\n  const buttonRef = useRef<HTMLDivElement>(null);\n\n  const handleKeyDown = useCallback((e: KeyboardEvent) => {\n    if (e.key !== 'Enter') return;\n    const isFocused = buttonRef.current === document.activeElement;\n\n    if (isFocused) {\n      onSelect();\n    }\n  }, [onSelect]);\n\n  useEffect(() => {\n    window.addEventListener('keydown', handleKeyDown, false);\n\n    return () => window.removeEventListener('keydown', handleKeyDown, false);\n  }, [handleKeyDown]);\n\n  return buttonRef;\n};\n\nexport default useSendWithEnter;\n","import { useRef } from '../lib/teact/teact';\n\nimport type { Signal } from '../util/signals';\n\nimport useEffectOnce from './useEffectOnce';\n\n// Allows to use signal value as \"silent\" dependency in hooks (not causing updates)\nexport function useSignalRef<T>(getValue: Signal<T>) {\n  const ref = useRef<T>(getValue());\n\n  useEffectOnce(() => {\n    return getValue.subscribe(() => {\n      ref.current = getValue();\n    });\n  });\n\n  return ref;\n}\n","import { ApiMediaFormat } from '../../api/types';\n\nimport launchMediaWorkers, { MAX_WORKERS } from '../../util/launchMediaWorkers';\nimport { IS_ANDROID, IS_IOS } from '../../util/windowEnvironment';\nimport { callApi } from '../../api/gramjs';\nimport { requestMutation } from '../fasterdom/fasterdom';\n\nconst IS_MOBILE = IS_ANDROID || IS_IOS;\nconst PREVIEW_SIZE_RATIO = (IS_ANDROID || IS_IOS) ? 0.3 : 0.25;\nconst MAX_FRAMES = IS_MOBILE ? 40 : 80;\nconst PREVIEW_MAX_SIDE = 200;\n\nconst connections = launchMediaWorkers();\n\nlet videoPreview: VideoPreview | undefined;\n\nexport class VideoPreview {\n  frames: Map<number, ImageBitmap> = new Map();\n\n  currentTime = 0;\n\n  canvas: HTMLCanvasElement;\n\n  constructor(url: string, canvas: HTMLCanvasElement) {\n    this.canvas = canvas;\n    connections.forEach(({ connector }, index) => {\n      void connector.request({\n        name: 'video-preview:init',\n        args: [\n          url,\n          MAX_FRAMES,\n          index,\n          MAX_WORKERS,\n          this.onFrame.bind(this),\n        ],\n      });\n    });\n  }\n\n  private onFrame(time: number, frame: ImageBitmap) {\n    this.frames.set(time, frame);\n    if (time === this.currentTime) {\n      this.render(time);\n    }\n  }\n\n  private clearCache() {\n    this.frames.forEach((frame) => {\n      frame.close();\n    });\n    this.frames.clear();\n  }\n\n  render(time: number) {\n    this.currentTime = time;\n    const frame = this.frames.get(time);\n    if (!frame) return false;\n    requestMutation(() => {\n      this.canvas.width = frame.width;\n      this.canvas.height = frame.height;\n      const ctx = this.canvas.getContext('2d')!;\n      ctx.drawImage(frame, 0, 0, this.canvas.width, this.canvas.height);\n    });\n    return true;\n  }\n\n  destroy() {\n    this.clearCache();\n    connections.forEach(({ connector }) => {\n      void connector.request({\n        name: 'video-preview:destroy',\n        args: [],\n      });\n    });\n  }\n}\n\nexport function getPreviewDimensions(width: number, height: number) {\n  width = Math.round(width * PREVIEW_SIZE_RATIO);\n  height = Math.round(height * PREVIEW_SIZE_RATIO);\n  const ratio = width / height;\n  if (width > PREVIEW_MAX_SIDE) {\n    width = PREVIEW_MAX_SIDE;\n    height = Math.round(width / ratio);\n  }\n  if (height > PREVIEW_MAX_SIDE) {\n    height = PREVIEW_MAX_SIDE;\n    width = Math.round(height * ratio);\n  }\n  return { width, height };\n}\n\nconnections.forEach(({ worker }) => {\n  worker.addEventListener('message', async (e) => {\n    const { type, messageId, params } = e.data as {\n      type: string;\n      messageId: string;\n      params: { url: string; start: number; end: number };\n    };\n\n    if (type !== 'requestPart') {\n      return;\n    }\n\n    const result = await callApi('downloadMedia', { mediaFormat: ApiMediaFormat.Progressive, ...params });\n    if (!result) {\n      return;\n    }\n\n    const { arrayBuffer } = result;\n\n    worker.postMessage({\n      type: 'partResponse',\n      messageId,\n      result: arrayBuffer,\n    }, [arrayBuffer!]);\n  });\n});\n\nexport function createVideoPreviews(url: string, canvas: HTMLCanvasElement) {\n  if (videoPreview) {\n    videoPreview.destroy();\n  }\n  videoPreview = new VideoPreview(url, canvas);\n  return () => {\n    videoPreview?.destroy();\n    videoPreview = undefined;\n  };\n}\n\nexport function renderVideoPreview(time: number) {\n  if (!videoPreview) return false;\n  return videoPreview.render(time);\n}\n","export default function findInViewport(\n  container: HTMLElement,\n  selectorOrElements: string | NodeListOf<HTMLElement> | HTMLElement[],\n  margin = 0,\n  isDense = false,\n  shouldContainBottom = false,\n  isHorizontal = false,\n) {\n  const viewportY1 = container[isHorizontal ? 'scrollLeft' : 'scrollTop'];\n  const viewportY2 = viewportY1 + container[isHorizontal ? 'offsetWidth' : 'offsetHeight'];\n  const allElements = typeof selectorOrElements === 'string'\n    ? container.querySelectorAll<HTMLElement>(selectorOrElements)\n    : selectorOrElements;\n  const { length } = allElements;\n  const visibleIndexes: number[] = [];\n  let isFound = false;\n\n  for (let i = 0; i < length; i++) {\n    const element = allElements[i];\n    const y1 = element[isHorizontal ? 'offsetLeft' : 'offsetTop'];\n    const y2 = y1 + element[isHorizontal ? 'offsetWidth' : 'offsetHeight'];\n    const isVisible = shouldContainBottom\n      ? y2 >= viewportY1 - margin && y2 <= viewportY2 + margin\n      : y1 <= viewportY2 + margin && y2 >= viewportY1 - margin;\n\n    if (isVisible) {\n      visibleIndexes.push(i);\n      isFound = true;\n    } else if (isFound && !isDense) {\n      break;\n    }\n  }\n\n  return { allElements, visibleIndexes };\n}\n","export default function getKeyFromEvent(e: KeyboardEvent) {\n  const key = e.key || e.code;\n\n  return key.startsWith('Key') ? key.slice(3).toLowerCase() : key;\n}\n","function isFullyVisible(container: HTMLElement, element: HTMLElement, isHorizontal = false) {\n  const viewportY1 = container[isHorizontal ? 'scrollLeft' : 'scrollTop'];\n  const viewportY2 = viewportY1 + container[isHorizontal ? 'offsetWidth' : 'offsetHeight'];\n  const y1 = element[isHorizontal ? 'offsetLeft' : 'offsetTop'];\n  const y2 = y1 + element[isHorizontal ? 'offsetWidth' : 'offsetHeight'];\n  return y1 > viewportY1 && y2 < viewportY2;\n}\n\nexport default isFullyVisible;\n","import type { MediaWorkerApi } from '../lib/mediaWorker/index.worker';\nimport type { Connector } from './PostMessageConnector';\n\nimport { IS_TEST } from '../config';\n\nimport { createConnector } from './PostMessageConnector';\n\nexport const MAX_WORKERS = Math.min(navigator.hardwareConcurrency || 4, 4);\n\nlet instances: {\n  worker: Worker;\n  connector: Connector<MediaWorkerApi>;\n}[] | undefined;\n\nexport default function launchMediaWorkers() {\n  if (IS_TEST) return [];\n  if (!instances) {\n    instances = new Array(MAX_WORKERS).fill(undefined).map(\n      () => {\n        const worker = new Worker(new URL('../lib/mediaWorker/index.worker.ts', import.meta.url));\n        const connector = createConnector<MediaWorkerApi>(worker);\n        return { worker, connector };\n      },\n    );\n  }\n\n  return instances;\n}\n","let scrollLockEl: HTMLElement | null | undefined;\nlet excludedClosestSelector: string | undefined;\n\nconst IGNORED_KEYS: Record<string, boolean> = {\n  Down: true,\n  ArrowDown: true,\n  Up: true,\n  ArrowUp: true,\n  Left: true,\n  ArrowLeft: true,\n  Right: true,\n  ArrowRight: true,\n  ' ': true,\n  PageUp: true,\n  PageDown: true,\n  End: true,\n  Home: true,\n  Tab: true,\n};\n\nfunction isTextBox(target: EventTarget | null) {\n  if (!target || !(target instanceof HTMLElement)) return false;\n  const element = target;\n  const tagName = element.tagName.toLowerCase();\n  if (tagName === 'textarea') return true;\n  if (tagName !== 'input') return false;\n  const type = element.getAttribute('type');\n  if (!type) return false;\n  const inputTypes = [\n    'text', 'password', 'number', 'email', 'tel', 'url',\n    'search', 'date', 'datetime', 'datetime-local', 'time', 'month', 'week',\n  ];\n  return inputTypes.indexOf(type.toLowerCase()) > -1;\n}\n\nexport const getTouchY = (e: WheelEvent | TouchEvent | React.WheelEvent | React.TouchEvent) => {\n  return ('changedTouches' in e ? e.changedTouches[0].clientY : 0);\n};\n\nconst preventDefault = (e: WheelEvent | TouchEvent) => {\n  const deltaY = 'deltaY' in e ? e.deltaY : getTouchY(e);\n\n  if (\n    !scrollLockEl\n    // Allow overlay scrolling\n    || !scrollLockEl.contains(e.target as HTMLElement)\n    // Prevent top overscroll\n    || (scrollLockEl.scrollTop <= 0 && deltaY <= 0)\n    // Prevent bottom overscroll\n    || (scrollLockEl.scrollTop >= (scrollLockEl.scrollHeight - scrollLockEl.offsetHeight) && deltaY >= 0)\n  ) {\n    if (excludedClosestSelector && (e.target as HTMLElement).closest(excludedClosestSelector)) return;\n    e.preventDefault();\n  }\n};\n\nfunction preventDefaultForScrollKeys(e: KeyboardEvent) {\n  if (IGNORED_KEYS[e.key] && !isTextBox(e.target)) {\n    e.preventDefault();\n  }\n}\n\nexport function disableScrolling(el?: HTMLElement | null, _excludedClosestSelector?: string) {\n  scrollLockEl = el;\n  excludedClosestSelector = _excludedClosestSelector;\n  // Disable scrolling in Chrome\n  document.addEventListener('wheel', preventDefault, { passive: false });\n  document.addEventListener('touchmove', preventDefault, { passive: false });\n  document.onkeydown = preventDefaultForScrollKeys;\n}\n\nexport function enableScrolling() {\n  scrollLockEl = undefined;\n  excludedClosestSelector = undefined;\n  document.removeEventListener('wheel', preventDefault); // Enable scrolling in Chrome\n  document.removeEventListener('touchmove', preventDefault);\n  // eslint-disable-next-line no-null/no-null\n  document.onkeydown = null;\n}\n","import animateScroll from './animateScroll';\nimport findInViewport from './findInViewport';\nimport isFullyVisible from './isFullyVisible';\n\nconst VIEWPORT_MARGIN = 8;\nconst SCROLL_MARGIN = 10;\n\nexport default function setTooltipItemVisible(selector: string, index: number, containerRef: Record<string, any>) {\n  const container = containerRef.current!;\n  if (!container || index < 0) {\n    return;\n  }\n  const { visibleIndexes, allElements } = findInViewport(\n    container,\n    selector,\n    VIEWPORT_MARGIN,\n    true,\n    true,\n  );\n\n  if (!allElements.length || !allElements[index]) {\n    return;\n  }\n  const first = visibleIndexes[0];\n  if (!visibleIndexes.includes(index)\n    || (index === first && !isFullyVisible(container, allElements[first]))) {\n    const position = index > visibleIndexes[visibleIndexes.length - 1] ? 'start' : 'end';\n    animateScroll(container, allElements[index], position, SCROLL_MARGIN);\n  }\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"title\":\"FqyZSYhX\",\"description\":\"DkalJSBt\",\"secondary\":\"xNUKKd8T\",\"separator\":\"kiRrTaj3\",\"topIcon\":\"PKnc2DV2\",\"content\":\"qxOr0JyQ\"};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"wzzA3MFh\",\"pickerSelector\":\"xhujrq9i\",\"pickerTitle\":\"YuRK4e7S\",\"picker\":\"YF9nLkCK\",\"footer\":\"ATCZ2Q5G\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"Qk9PEGRE\",\"activated\":\"WYeuJNQx\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"nZYT4vJ3\",\"sets\":\"JzkmXjFF\"};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"PaO1MMi5\",\"header\":\"wSswdVkR\",\"description\":\"oiJc22Aj\",\"sortableContainer\":\"lAeeBh9K\",\"item\":\"l04OwRBg\"};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"tauadiDm\",\"icon\":\"i4wZg_0J\",\"header\":\"MQxuEIRA\",\"desc\":\"AEAN1Au4\",\"separator\":\"sXXb5yOS\",\"button\":\"F7owtTHj\",\"closeButton\":\"i6iFv9YE\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"Lu0K9UZP\",\"selected\":\"UF8XKO4C\"};","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"slqA9gR2\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"HmY1pYD9\",\"arrow\":\"cqNhvdib\",\"right\":\"hIgQCprt\",\"arrow-hidden\":\"wDzTWXzO\",\"arrowHidden\":\"wDzTWXzO\",\"dot\":\"Ac0pMX9w\",\"medium\":\"yDo_8Y7X\",\"small\":\"bhODNwmU\",\"invisible\":\"O9pyrgj0\",\"active\":\"NYDxCNdz\"};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport default {\"menuContent\":\"hRzvfaRb\"};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport default {\"contacts_and_premium_option-title\":\"TGUdGos3\",\"contactsAndPremiumOptionTitle\":\"TGUdGos3\",\"lock-icon\":\"jWxrRbkh\",\"lockIcon\":\"jWxrRbkh\"};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport default {\"SettingsActiveSession\":\"M84mrPgu\",\"settingsActiveSession\":\"M84mrPgu\",\"iconDevice\":\"Add8P_K4\",\"iconDevice__android\":\"onkXVGY4\",\"iconDeviceAndroid\":\"onkXVGY4\",\"iconDevice__apple\":\"xw13aT8u\",\"iconDeviceApple\":\"xw13aT8u\",\"iconDevice__brave\":\"HESrGUdv\",\"iconDeviceBrave\":\"HESrGUdv\",\"iconDevice__chrome\":\"Vpej7wm7\",\"iconDeviceChrome\":\"Vpej7wm7\",\"iconDevice__edge\":\"ueWE77x9\",\"iconDeviceEdge\":\"ueWE77x9\",\"iconDevice__firefox\":\"_lMTmvya\",\"iconDeviceFirefox\":\"_lMTmvya\",\"iconDevice__linux\":\"cDVfvyG_\",\"iconDeviceLinux\":\"cDVfvyG_\",\"iconDevice__opera\":\"nWqlTxZt\",\"iconDeviceOpera\":\"nWqlTxZt\",\"iconDevice__safari\":\"ldFLp1Gf\",\"iconDeviceSafari\":\"ldFLp1Gf\",\"iconDevice__samsung\":\"VHNORBGL\",\"iconDeviceSamsung\":\"VHNORBGL\",\"iconDevice__ubuntu\":\"QBVivtdu\",\"iconDeviceUbuntu\":\"QBVivtdu\",\"iconDevice__unknown\":\"GbjIgrwU\",\"iconDeviceUnknown\":\"GbjIgrwU\",\"iconDevice__vivaldi\":\"yieVnjoI\",\"iconDeviceVivaldi\":\"yieVnjoI\",\"iconDevice__windows\":\"_0dnTFOE\",\"iconDeviceWindows\":\"_0dnTFOE\",\"iconDevice__xbox\":\"fbCjjDpU\",\"iconDeviceXbox\":\"fbCjjDpU\",\"title\":\"c6edjhlh\",\"note\":\"lRqTZAYn\",\"date\":\"oLnN6crs\",\"box\":\"wVEXuPlZ\",\"actionHeader\":\"olQS2T1n\",\"actionName\":\"KuX1APpO\",\"headerButton\":\"VT8pZfMu\"};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"Wd0fmiSY\",\"avatar\":\"OhZHdRsP\",\"title\":\"EQ7__xGn\",\"note\":\"YRYk96ki\",\"box\":\"kmCTIfvf\",\"action-header\":\"qkq5Fa0V\",\"actionHeader\":\"qkq5Fa0V\",\"action-name\":\"zFYUiy13\",\"actionName\":\"zFYUiy13\",\"header-button\":\"lUf0RJ2h\",\"headerButton\":\"lUf0RJ2h\"};","// extracted by mini-css-extract-plugin\nexport default {\"avatar\":\"v0wP46TR\",\"clear-help\":\"WnnxcARX\",\"clearHelp\":\"WnnxcARX\",\"subtitle\":\"uEUfjByC\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"Ys1i4ssl\",\"item\":\"skaVPMTF\",\"checkbox\":\"obmoCKjY\",\"languages\":\"BccnzXwC\"};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport default {\"fallback-photo\":\"Qvhl9Jjv\",\"fallbackPhoto\":\"Qvhl9Jjv\"};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"fAO_fMJD\",\"main\":\"vtyWYWNc\",\"filter\":\"OM3FgjkD\",\"title\":\"d3EvpDij\",\"buttons\":\"w2D1Ddo7\",\"picker\":\"dWDj6lW6\"};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"PMXzSiTT\",\"closeButton\":\"j3gx2vFZ\",\"avatars\":\"yIKcy5ir\",\"center\":\"EIXAUV27\",\"description\":\"TJy4zGvM\",\"premiumFeatures\":\"JqQfM_r9\",\"options\":\"eXU0NjiF\",\"boostIcon\":\"ZsR31o4m\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"P0kLOw15\",\"button\":\"ILuhBsJG\",\"main\":\"SqiN63Ef\",\"logo\":\"Me2hCsMs\",\"header-text\":\"UVDnB0Wq\",\"headerText\":\"UVDnB0Wq\",\"description\":\"v5yGzV6v\",\"header\":\"U6XNIToQ\",\"hidden-header\":\"tDZc21ZC\",\"hiddenHeader\":\"tDZc21ZC\",\"close-button\":\"OX6_HqAd\",\"closeButton\":\"OX6_HqAd\",\"premium-header-text\":\"v6hiGpEn\",\"premiumHeaderText\":\"v6hiGpEn\",\"primary-footer-text\":\"YGbiSd3e\",\"primaryFooterText\":\"YGbiSd3e\",\"section\":\"rZRDMqUL\",\"types\":\"sQ5PkKEs\",\"footer\":\"hD_AEzjd\",\"options\":\"JjDLNrKG\",\"giveawayTitle\":\"p5Hn4Q6E\",\"subscription\":\"rniPcuiP\",\"subscriptionOption\":\"ggZrgZnv\",\"status\":\"q1y2qUTn\",\"info\":\"IsT38nlq\",\"titleInfo\":\"nmsfBLut\",\"month\":\"TsGuei3B\",\"quantity\":\"G9H3tm6D\",\"floatingBadge\":\"xKl2UeV8\",\"floatingBadgeColor\":\"HLx3wTBD\",\"floatingBadgeButtonColor\":\"JLH0MExt\",\"floatingBadgeIcon\":\"Ftr7zf2v\",\"floatingBadgeValue\":\"Ce0Ob2tg\",\"subscriptionFooter\":\"rDFQAfTt\",\"premiumFeatures\":\"eNQ_nrKr\",\"dateButton\":\"GeKqKRgP\",\"title\":\"LZ3vPzak\",\"checkboxSection\":\"Z9QJQ6IS\",\"prizesSection\":\"eQVP0Nx8\",\"prizesInput\":\"qMYNwiUZ\",\"subLabelClassName\":\"txXJxVFu\",\"prepaidImg\":\"ldn4mh2T\",\"addButton\":\"sOXvh85b\",\"addChannel\":\"aGbyR60s\",\"transition\":\"vEI2Wewt\"};","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"w3OGYFKn\",\"input\":\"xy4AclZa\",\"content\":\"TTgSI7Xh\",\"notChecked\":\"JDcXsByU\",\"giveaway\":\"sEt7TF59\",\"title\":\"u4NzVBBi\",\"link\":\"y7XfPOoG\",\"optionImg\":\"lGhZJbMF\",\"contentText\":\"kt2ZKZ6j\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"Wn7D2H1e\",\"text\":\"IQ1U2TrZ\",\"header\":\"F6qqXRvD\",\"description\":\"ILLaH6qQ\",\"icon\":\"DzGwbpu5\",\"font-icon\":\"Pa9h5mh3\",\"fontIcon\":\"Pa9h5mh3\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"oyUTEj8I\",\"button\":\"EPfM7AgT\",\"button-content\":\"GysZk2mF\",\"buttonContent\":\"GysZk2mF\",\"back-button\":\"njYoMrKM\",\"backButton\":\"njYoMrKM\",\"white-back-button\":\"SB4pczOo\",\"whiteBackButton\":\"SB4pczOo\",\"content\":\"sJubG84j\",\"frame\":\"a7IoUtQG\",\"slide\":\"gubS9KP1\",\"limits\":\"U7ePgVBR\",\"stories\":\"J1M6fEdo\",\"limits-content\":\"n_rowVPI\",\"limitsContent\":\"n_rowVPI\",\"header\":\"mz2Hmd83\",\"no-header-border\":\"AgmNOqi7\",\"noHeaderBorder\":\"AgmNOqi7\",\"preview\":\"dIVBSdWi\",\"title\":\"iZLwcL8v\",\"description\":\"A7YHY8qF\",\"footer\":\"yN2611rA\",\"no-footer-border\":\"rCHMABcD\",\"noFooterBorder\":\"rCHMABcD\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"cKwZp5xA\",\"main\":\"bo8ICYep\",\"filter\":\"HK8ZNKHl\",\"title\":\"LUU19p8W\",\"buttons\":\"CdZFeuxb\",\"picker\":\"JBzw9a0l\",\"avatars\":\"UAhbe3L3\",\"center\":\"JZ7y_T5c\",\"description\":\"OySCJvvR\",\"premiumFeatures\":\"CrYMy2g6\",\"options\":\"IRkNlxtz\",\"button\":\"HIPk0a6e\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"sfbpMFHM\",\"transition\":\"ELNkgPve\",\"button\":\"c1tMxuFH\",\"main\":\"ZpOIPrhp\",\"logo\":\"mlMezt6b\",\"status-emoji\":\"mQwvY9LA\",\"statusEmoji\":\"mQwvY9LA\",\"header-text\":\"y71v6ECL\",\"headerText\":\"y71v6ECL\",\"description\":\"cUcKXV3j\",\"list\":\"c3Ee2oSo\",\"no-button\":\"yWEHoJOL\",\"noButton\":\"yWEHoJOL\",\"header\":\"Bc_F0RKb\",\"hidden-header\":\"ltXo0Xi7\",\"hiddenHeader\":\"ltXo0Xi7\",\"close-button\":\"XyN3eWog\",\"closeButton\":\"XyN3eWog\",\"premium-header-text\":\"xysPdANX\",\"premiumHeaderText\":\"xysPdANX\",\"footer-text\":\"yKm9hKQP\",\"footerText\":\"yKm9hKQP\",\"primary-footer-text\":\"l1WlNpmu\",\"primaryFooterText\":\"l1WlNpmu\",\"footer\":\"nCnlO9UZ\",\"stickerSetText\":\"xw_GbDj7\",\"stickerSetLink\":\"FLzl2ng5\",\"stickerSetLinkIcon\":\"Y0jTcadE\",\"subscriptionOptions\":\"xZC_Oajr\",\"subscriptionOption\":\"gygsbDbE\"};","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"qZA6S2kc\",\"giveawayWrapper\":\"PkseWxFK\",\"active\":\"EJOQwnRj\",\"input\":\"WOEkhx6R\",\"content\":\"BHUCScsU\",\"month\":\"DfYCMUkL\",\"perMonth\":\"poxOXJ2o\",\"amount\":\"IGMrERf_\",\"discount\":\"uqDlP3Zt\",\"giveawayDiscount\":\"ublijP0j\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"ZXp65Wgy\",\"title\":\"W1xG3pjS\",\"description\":\"b_CBXIkT\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"QAs_iFxO\",\"limit-compare\":\"k0O6Rnjh\",\"limitCompare\":\"k0O6Rnjh\",\"limit-badge\":\"Q5d_7bB4\",\"limitBadge\":\"Q5d_7bB4\",\"limit-value\":\"ArEy3hhB\",\"limitValue\":\"ArEy3hhB\",\"limit-icon\":\"rbnU7JVX\",\"limitIcon\":\"rbnU7JVX\",\"dialog-buttons\":\"RVM_RSap\",\"dialogButtons\":\"RVM_RSap\",\"x2\":\"esB1OhAF\",\"button-icon\":\"ydpxmYS3\",\"buttonIcon\":\"ydpxmYS3\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"u84X0r2z\",\"floating-badge\":\"hPi4fICJ\",\"floatingBadge\":\"hPi4fICJ\",\"floating-badge-triangle\":\"jufjjcX9\",\"floatingBadgeTriangle\":\"jufjjcX9\",\"floating-badge-icon\":\"XkiOXdMP\",\"floatingBadgeIcon\":\"XkiOXdMP\",\"text\":\"YaiSoFKE\",\"floating-badge-value\":\"iC3LJrvy\",\"floatingBadgeValue\":\"iC3LJrvy\",\"left-text\":\"OejVAPj6 YaiSoFKE YaiSoFKE\",\"leftText\":\"OejVAPj6 YaiSoFKE YaiSoFKE\",\"right-text\":\"COQdFBQk YaiSoFKE YaiSoFKE\",\"rightText\":\"COQdFBQk YaiSoFKE YaiSoFKE\",\"right-value\":\"BEq3jFlz YaiSoFKE YaiSoFKE\",\"rightValue\":\"BEq3jFlz YaiSoFKE YaiSoFKE\",\"left-value\":\"RJosx238 YaiSoFKE\",\"leftValue\":\"RJosx238 YaiSoFKE\",\"line\":\"Hy5kWx0p\",\"left\":\"scGr4JS9\",\"right\":\"nPaUalQf\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"O1fqNCy0\",\"sticker\":\"ogaoEAcn\",\"effect-sticker\":\"Stdz4UIW ogaoEAcn\",\"effectSticker\":\"Stdz4UIW ogaoEAcn\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"mFElmm7a\",\"header\":\"Jjbochk6\",\"circle\":\"ChteQ9C3\",\"title\":\"d2ayix6L\",\"features\":\"ensyCeMe\",\"mobile\":\"DFbZJafh\",\"scrolled\":\"iN1T0a2Y\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"Ot0dA1yZ\",\"wrapper\":\"yxSAGAc1\",\"down\":\"Jcy6cDoc\",\"frame\":\"Vn81yTTJ\",\"video\":\"rrVJClLL\"};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"ingarEvU\",\"preview\":\"TqpEWfl3\",\"previewCanvas\":\"fKVz2lln\",\"previewTime\":\"bGiNvx5D\",\"previewTimeText\":\"mnkqvOMR\",\"track\":\"Od9ZSc1U\",\"buffered\":\"ANe2DKfp\",\"played\":\"igaGLblf\",\"seeking\":\"beUP6SqY\"};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"aMjNU9gm\",\"list-item\":\"T3An6Hoz\",\"listItem\":\"T3An6Hoz\",\"title\":\"dQ9wwFu1\",\"subtitle\":\"m_J41YYl\",\"languages\":\"r3YNWDQr\"};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"a27O2Qlr\",\"mobile\":\"khvUZbGZ\",\"symbolMenuOpen\":\"ir5kkMy1\",\"header-border\":\"Pc1k8G8s\",\"headerBorder\":\"Pc1k8G8s\",\"attachments\":\"_bxSIFgj\",\"attachments-bottom-padding\":\"RPVunBe2\",\"attachmentsBottomPadding\":\"RPVunBe2\",\"caption-wrapper\":\"EtmiUn2k\",\"captionWrapper\":\"EtmiUn2k\",\"caption-top-border\":\"FjjSKMYe\",\"captionTopBorder\":\"FjjSKMYe\",\"caption\":\"Te7lIfpB\",\"drop-target\":\"LhhRTsy6\",\"dropTarget\":\"LhhRTsy6\",\"hovered\":\"AnO3BgVv\",\"send-wrapper\":\"wDqWK9MD\",\"sendWrapper\":\"wDqWK9MD\",\"send\":\"kNlWmBJI\",\"is-pointer-env\":\"rYZmraWo\",\"isPointerEnv\":\"rYZmraWo\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"QucaiGVU\",\"preview\":\"SHoF85Vw\",\"duration\":\"nI2M1SBH\",\"single\":\"FjrnqGba\",\"no-grouping\":\"g0cTsM9d\",\"noGrouping\":\"g0cTsM9d\",\"file\":\"B6f6GcvN\",\"overlay\":\"bX7LdgxW\",\"action-item\":\"Zo7u5epf\",\"actionItem\":\"Zo7u5epf\",\"delete-file\":\"CYJwy9T_\",\"deleteFile\":\"CYJwy9T_\"};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"iaTB59vy\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_8sFuAomM\",\"emojiButton\":\"crWzZ2jr\"};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"lq8BD6Hc\",\"main\":\"p7c8y0LH\",\"hasHeader\":\"zTGriBHY\",\"main_customEmoji\":\"U0BL1VvK\",\"mainCustomEmoji\":\"U0BL1VvK\",\"header\":\"Qn3lBUNs\",\"headerWithBorder\":\"HMspKpNp\",\"stickerCover\":\"YKO0Obwy\",\"activated\":\"y02WwQk6\",\"pickerDisabled\":\"BZfaP1GD\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"m6XpTzQX\",\"video\":\"OZHqKbDL\",\"image\":\"enA6c8gc\"};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport default {\"item\":\"lhinieg0\",\"get\":\"wysoV1T4\",\"skeleton\":\"gPqaUijR\",\"transition\":\"Yg6u_MIn\"};","// extracted by mini-css-extract-plugin\nexport default {\"menu\":\"gBh4WvBC\",\"menuContent\":\"qSfKwMzX\",\"storyMenu\":\"srpBMrqr\",\"onlyReactions\":\"dRNSqkOC\",\"hidden\":\"KVwgF6DG\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"MhpiTAwi\",\"wrapper\":\"NIaqmosK\"};","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"pUyNTysT\",\"modal\":\"IK2mBqbm\",\"loading\":\"zjXCH3pT\",\"description\":\"j6xEoljc\",\"bold\":\"hAA6B1lc\",\"chip\":\"smWR78pO\",\"replaceModal\":\"GIFAjZPY\",\"replaceModalContent\":\"Jxyz9TaL\",\"avatarContainer\":\"OKp6HS1U\",\"arrow\":\"WSJdWV7L\",\"boostedWrapper\":\"NU9itcIm\",\"boostedMark\":\"upXvhNRY\"};","// extracted by mini-css-extract-plugin\nexport default {\"description\":\"dl10exNi\",\"picker-wrapper\":\"gxWY5c6x\",\"pickerWrapper\":\"gxWY5c6x\",\"picker-header\":\"h8N7eyob\",\"pickerHeader\":\"h8N7eyob\",\"picker-header-info\":\"Rth2Qu07\",\"pickerHeaderInfo\":\"Rth2Qu07\",\"selection-toggle\":\"B6eAugx8\",\"selectionToggle\":\"B6eAugx8\",\"foldersWrapper\":\"mwcvgD2S\",\"folders\":\"LKavx8ww\",\"folder\":\"qglLx5Dn\",\"button-text\":\"bgaRuEMs\",\"buttonText\":\"bgaRuEMs\",\"button-badge\":\"rTe14Z22\",\"buttonBadge\":\"rTe14Z22\"};","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"WEJIbFQj\",\"closeButton\":\"_vwPuDEM\",\"icon\":\"BUiGM8qZ\",\"title\":\"Q3NhXpNI\",\"description\":\"frZbGQ0G\"};","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"KYHkJ9Qf\",\"title\":\"AwnUe4Qk\",\"value\":\"JGH6P9Az\",\"table\":\"DFRB0Ad4\",\"cell\":\"Cnh5ENvm\",\"logo\":\"jbiW0GE8\",\"avatar\":\"SHQbPR5Y\",\"chatItem\":\"aS9U4hiQ\"};","// extracted by mini-css-extract-plugin\nexport default {\"clickable\":\"IzcASdzD\",\"centered\":\"xVLGjLub\"};","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"n8eENbaR\",\"closeButton\":\"smosGkw9\",\"contentText\":\"Qo4PtFZI\",\"title\":\"wtfpombl\",\"separator\":\"UoMeVIyC\",\"userPicker\":\"nEYyTS_m\",\"sendInvites\":\"Ttkq3nqt\",\"avatarList\":\"Nc3SOtKd\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"VJDwJpsF\",\"buttons\":\"aYO2C2Hx\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"c3xMWwzW\",\"fade-in-opacity\":\"cHb04cFv\",\"fadeInOpacity\":\"cHb04cFv\",\"closing\":\"_0HkZ8ITm\",\"voice\":\"VLiJWMs0\",\"video\":\"ML2YEpGq\",\"footer\":\"VWy1qXJL\",\"closeBtn\":\"FfMrCmD9\"};","// extracted by mini-css-extract-plugin\nexport default {\"slide\":\"qJDgUtjV\",\"modalTitle\":\"ZAdG13Ah\",\"optionText\":\"oWujoaSC\",\"option\":\"aFbjDzNo\",\"optionButton\":\"VbE0HzDs\",\"sectionTitle\":\"jrA2dOiw\",\"description\":\"k71Zrc_P\",\"title\":\"mMmY6YR4\",\"titleMultiline\":\"lVVyV0py\",\"subtitle\":\"gSkAFc4u\",\"transition\":\"HjsGIG6e\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"uRzvCSL9\",\"preview\":\"a3DW6BD4\",\"count\":\"D85xnc2A\",\"thumb\":\"YQkhSHTF\",\"noOutline\":\"DEHX4KE0\",\"itemCount1\":\"v2LXw_Ji\",\"itemCount2\":\"wMnTbflA\",\"itemCount3\":\"mfaJvWR5\",\"blurry\":\"SWzA5Thi\",\"full\":\"tWmMeHMH\",\"fadeIn\":\"rQLLTTKj\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"TtE8LQNJ\",\"transition\":\"nXQS4E59\",\"main\":\"JuWZY1ds\",\"section\":\"lYkNd_gb\",\"secondaryInfo\":\"fBublGG8\",\"logo\":\"sjhpNB8l\",\"logoBackground\":\"jjESKN3H\",\"headerHext\":\"xbpAOr37\",\"description\":\"teXilLxe\",\"header\":\"fnhXotO2\",\"starHeaderText\":\"iUwego5s\",\"hiddenHeader\":\"DZk6d6hF\",\"closeButton\":\"piD1PXHW\",\"balance\":\"LitvQduT\",\"smallerText\":\"rUnPcfmE\",\"balanceBottom\":\"F5BTkZ9G\",\"modalBalance\":\"t8tMrx3y\",\"options\":\"qPBycZTv\",\"option\":\"UJPk4YLZ\",\"optionTop\":\"uYCOjzEO\",\"stackedStars\":\"uulRH8gY\",\"stackedStar\":\"pXdx3arJ\",\"optionBottom\":\"ByyaPmxJ\",\"moreOptions\":\"z4OfLFqg\",\"iconDown\":\"Hj7jRHF8\",\"paymentContent\":\"OReEUNTV\",\"paymentImages\":\"oKorQYTC\",\"paymentPhoto\":\"HGTrEtUF\",\"paymentImageBackground\":\"os8jb_qv\",\"paymentAmount\":\"sd2jk3Hn\",\"paymentButton\":\"VzR5cibf\",\"paymentButtonStar\":\"Uhg7yWxK\",\"transactions\":\"Qvc0fTTH\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"Ic1OO5om\",\"info\":\"mNSPocCT\",\"stars\":\"mNOFB1jr\",\"amount\":\"vocPCemA\",\"star\":\"Ev50qDRR\",\"title\":\"LiLNLeVH\",\"description\":\"Iu1Cg3HS\",\"date\":\"mPKxgyId\",\"positive\":\"dKHKLKDW\",\"negative\":\"Qsu5djeZ\"};","// extracted by mini-css-extract-plugin\nexport default {\"checkbox\":\"eha3Z6eU\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"XWfkIDLY\",\"more-button\":\"kKPD09tc\",\"moreButton\":\"kKPD09tc\",\"close-icon\":\"RuJ3d9N6\",\"closeIcon\":\"RuJ3d9N6\",\"state-back\":\"IWA50OWU\",\"stateBack\":\"IWA50OWU\",\"loading-spinner\":\"ZvO65ZK4\",\"loadingSpinner\":\"ZvO65ZK4\",\"hide\":\"_90e04Jo\",\"frame\":\"zA1w1IOq\",\"with-button\":\"XsPaFD9G\",\"withButton\":\"XsPaFD9G\",\"main-button\":\"Os96PEjQ\",\"mainButton\":\"Os96PEjQ\",\"visible\":\"C8aMayAw\",\"hidden\":\"GllU9an9\",\"main-button-spinner\":\"nYSFrf_X\",\"mainButtonSpinner\":\"nYSFrf_X\",\"web-app-popup\":\"cTVKrIjM\",\"webAppPopup\":\"cTVKrIjM\",\"without-title\":\"d0DG1SkF\",\"withoutTitle\":\"d0DG1SkF\"};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"maC_9u6e\",\"description\":\"zQ6lEVJ2\",\"checkout-picture\":\"JgWvLdK2\",\"checkoutPicture\":\"JgWvLdK2\",\"text\":\"T2pYH395\",\"checkout-title\":\"HadolzeF\",\"checkoutTitle\":\"HadolzeF\",\"checkout-description\":\"oZW7mUNP\",\"checkoutDescription\":\"oZW7mUNP\",\"price-info\":\"P618Q3yr\",\"priceInfo\":\"P618Q3yr\",\"price-info-item\":\"XNNG_ajy\",\"priceInfoItem\":\"XNNG_ajy\",\"price-info-item-main\":\"D9gYNLVk\",\"priceInfoItemMain\":\"D9gYNLVk\",\"price-info-item-title\":\"NtY5Aah7\",\"priceInfoItemTitle\":\"NtY5Aah7\",\"tipsList\":\"WHO341eB\",\"tipsItem\":\"ksLlzBxw\",\"tipsItem_active\":\"J4yem62L\",\"tipsItemActive\":\"J4yem62L\",\"invoice-info\":\"U2IBOLP1\",\"invoiceInfo\":\"U2IBOLP1\",\"provider\":\"kqWcdro1\",\"stripe\":\"xKztZrna\",\"smartglocal\":\"X_Ge1o4u\",\"checkout-info-item-info-title\":\"ysWuPklS\",\"checkoutInfoItemInfoTitle\":\"ysWuPklS\",\"checkout-info-item-info-data\":\"MpC_P8_c\",\"checkoutInfoItemInfoData\":\"MpC_P8_c\",\"tos-checkbox\":\"OrRb0xG7\",\"tosCheckbox\":\"OrRb0xG7\"};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"at4C5dtI\",\"positive\":\"ziem0hIt\",\"negative\":\"w5IBroJ0\",\"header\":\"LGfGeGBe\",\"amount\":\"qw8_2l5a\",\"title\":\"jUEywRxM\",\"description\":\"fqcBAivG\",\"tid\":\"Ryt8HXRa\",\"footer\":\"YxElnkFc\",\"starsBackground\":\"gqB7YL11\",\"mediaShift\":\"IKoS4bgV\",\"copyIcon\":\"VjTcIW6A\",\"mediaPreview\":\"gKrSXXpY\"};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"xrnUE4e6\",\"content\":\"z7kF7tij\",\"section\":\"T6wFpdQO\",\"general\":\"YftUWqqw\",\"top\":\"CWsWIKQ1\",\"bottom\":\"KBl0ycLl\",\"iconWrapper\":\"iJ1U9kDD\",\"icon\":\"Rk6PT_yc\",\"clickable\":\"K1CTKtBS\",\"heading\":\"qlo3vSEw\",\"icon-picker\":\"r06zwL42\",\"iconPicker\":\"r06zwL42\"};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"T1l_4J8z\",\"pie-slim-in\":\"EgyLOizu\",\"pieSlimIn\":\"EgyLOizu\",\"pie-slim-out\":\"TBiNdFb4\",\"pieSlimOut\":\"TBiNdFb4\",\"messages\":\"suY9dEIz\",\"publicForwards\":\"S1x1ovkC\",\"messages-title\":\"evQIkAqx\",\"messagesTitle\":\"evQIkAqx\",\"publicForwards-title\":\"WxL3i5PM\",\"publicForwardsTitle\":\"WxL3i5PM\",\"ready\":\"aUrozL5_\",\"graph\":\"QQHwjG88\",\"hidden\":\"QGctP1Nk\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"oXLpD4Y4\",\"title\":\"paQ2VBe_\",\"views\":\"WvFuOAIf\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"OAKzmAva\",\"withImage\":\"BQ6HUOqN\",\"imageContainer\":\"TmJvv2A6\",\"image\":\"U96CW2I7\",\"round\":\"yxjDeIct\",\"circle\":\"cdfiLmXo\",\"withStoryCircle\":\"BOfHPv20\",\"summary\":\"vXi2JQlj\",\"title\":\"bi3fL59p\",\"info\":\"GUK4ajPK\",\"meta\":\"YH6jeZIh\",\"metaWithIcon\":\"q1LnuIUn\",\"metaIcon\":\"PJZzyVLK\",\"date\":\"C7NpG5Y9\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"GrE47IXS\",\"closeButton\":\"NlWSF1pA\",\"stealthIcon\":\"qKi5jsGM\",\"title\":\"BFctFGoT\",\"description\":\"fZIJH4IG\",\"listItem\":\"RGD70uBt\",\"icon\":\"HCYfPccW\",\"button\":\"AM_sxoXP\",\"subtitle\":\"L8oRQyKb\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"YVD19vOP\",\"viewInfo\":\"cknL5COh\",\"interactive\":\"pJAyeGkG\",\"avatars\":\"Vz_VtJ16\",\"spacer\":\"kKoeDk3Z\",\"reactionCount\":\"sf3u_6Vh\",\"reactionCountHeart\":\"Er2XKRqi\",\"footerItem\":\"vJRk_UUk\",\"views\":\"nIv3YAnZ\",\"viewIcon\":\"WyBiNM6e\",\"reactionButton\":\"lpDXVIuf\",\"reactionHeart\":\"twgMDT1y\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"c1fbGgcx\",\"viewed\":\"xwOKghO2\",\"active\":\"ZuByYcIx\",\"inner\":\"qyBCpJct\",\"progress\":\"XY98E7VM\",\"paused\":\"n9V6B7hP\"};","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"hz7SomkK\",\"header\":\"NV6Rt2g9\",\"closeButton\":\"SN1GFS6L\",\"headerTitle\":\"gi0Y6Ns6\",\"content\":\"sTaVDkiD\",\"section\":\"eUiuPoEC\",\"title\":\"iPPiw9DI\",\"list\":\"OUP1Ss0W\",\"option\":\"JL33Sa3b\",\"checked\":\"qVPo_cVL\",\"input\":\"zsDaUk0i\",\"icon\":\"AfYCVlys\",\"action\":\"njMeBBwY\",\"optionContent\":\"TUAAnG2w\",\"footer\":\"r24Qz2bf\",\"info\":\"ljeRVBOm\",\"submit\":\"RwNLN_rH\"};","// extracted by mini-css-extract-plugin\nexport default {\"views-list\":\"gpDY8bos\",\"viewsList\":\"gpDY8bos\",\"views-list-loading\":\"vuRAfQ5v\",\"viewsListLoading\":\"vuRAfQ5v\",\"info\":\"AOSUIChK\",\"centeredInfo\":\"oGLhkkS7\",\"view-reaction\":\"MLaabS6n\",\"viewReaction\":\"MLaabS6n\",\"header\":\"d3N2bktu\",\"content\":\"QmRA3HZK\",\"top-button\":\"Dkv8GAxf\",\"topButton\":\"Dkv8GAxf\",\"contact-filter\":\"YpB_9VxE\",\"contactFilter\":\"YpB_9VxE\",\"selected\":\"DoUlpdZJ\",\"sort\":\"axDpgq9G\",\"sort-button\":\"Bm5VA66f\",\"sortButton\":\"Bm5VA66f\",\"icon-sort\":\"YVQiH93R\",\"iconSort\":\"YVQiH93R\",\"icon-down\":\"NXP9aMD0\",\"iconDown\":\"NXP9aMD0\",\"search\":\"QQQqBLK6\",\"bottom-info\":\"_CSv6suH\",\"bottomInfo\":\"_CSv6suH\",\"scrolled\":\"RYQ0liYe\",\"footer\":\"dUK7rP37\",\"closeButton\":\"abPzLiCH\",\"opacity-fade-in\":\"cX8oY3zb\",\"opacityFadeIn\":\"cX8oY3zb\",\"fadeIn\":\"Sx_aeh1o\",\"blocked\":\"L82sciL8\",\"check\":\"UqGBKwjg\",\"menuBubble\":\"dRqemuTA\",\"with-colored-status\":\"GQ96fta9\",\"withColoredStatus\":\"GQ96fta9\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"bu_hGbaa\",\"fullSize\":\"W9A8SEMl\",\"backdrop\":\"OFh6u50Q\",\"captionBackdrop\":\"Jd1DYS6Y\",\"backdropNonInteractive\":\"xe67dhtF\",\"close\":\"Mye8Dwxa\",\"wrapper\":\"gLHHo5k8\",\"slideAnimation\":\"GJVwqV9e\",\"slideAnimationToActive\":\"_Yn4SWUB\",\"content\":\"hGCH03qc\",\"slideAnimationFromActive\":\"ZecqXqKy\",\"storyHeader\":\"e7HHuS1g\",\"composer\":\"FXineBYO\",\"caption\":\"RKedwa0I\",\"captionGradient\":\"sHNAfxzf\",\"media\":\"PVZ8TOWS\",\"mediaPreview\":\"lQfkulvp\",\"contentInner\":\"Wi0DXPH2\",\"name\":\"Ka1CGfzq\",\"slide\":\"urTtSsk9\",\"mobileSlide\":\"AjXOHOgE\",\"slidePreview\":\"Sef28wEh\",\"activeSlide\":\"uAlXNXJN\",\"slideInner\":\"g8ypsnnC\",\"mediaWrapper\":\"YiuvOPgT\",\"forward\":\"pGKsAszF\",\"storyIndicators\":\"jGDd2sza\",\"sender\":\"eMYhXF_X\",\"senderInfoTransition\":\"PXnfXZur\",\"senderInfo\":\"WpyVfrsc\",\"senderMeta\":\"jmKI_lhC\",\"senderName\":\"H1uod43o\",\"storyMetaRow\":\"zimpR8Hz\",\"storyMeta\":\"hGTnZuar\",\"closeButton\":\"WlLsjJ2Z\",\"actions\":\"GrsJNw3y\",\"active\":\"q756IpZB\",\"visibilityButton\":\"prxptFFf\",\"visibilityButtonSelf\":\"_MVsZpgB\",\"button\":\"TkphaPyQ\",\"buttonMenu\":\"K0_xAdzf\",\"captionInner\":\"D_5mWNmi\",\"captionContent\":\"ilyTRZtw\",\"captionText\":\"hmFA5qb1\",\"hasOverflow\":\"e1gyTmKe\",\"expanded\":\"HIMnUViv\",\"animate\":\"CvnxnCxN\",\"withShowMore\":\"Vq8pl_kQ\",\"captionShowMore\":\"bM5rlQtM\",\"navigate\":\"nZ30pf4g\",\"prev\":\"SXpRZiax\",\"next\":\"twOBFwUE\",\"modal\":\"nLPOogqS\",\"thumbnail\":\"MnNC7VHS\",\"ghost\":\"fME2l_yv\",\"ghost2\":\"TYicp2_K\",\"ghostImage\":\"HjoURJRK\",\"forwardHeader\":\"JJFtefb9\",\"clickable\":\"BsqMBS2I\",\"headerTitle\":\"G8OgmMDJ\",\"forwardInfo\":\"_M8CgT7s\",\"fromPeer\":\"nJr8QgYX\"};","// extracted by mini-css-extract-plugin\nexport default {\"buttonHolder\":\"BDK_pgpt\",\"active\":\"N8ujSwlC\"};"],"names":["default","MediaViewer","StoryViewer","ForwardRecipientPicker","DraftRecipientPicker","AttachBotRecipientPicker","Dialogs","Notifications","SafeLinkModal","MapModal","UrlAuthModal","HistoryCalendar","NewContactModal","WebAppModal","BotTrustModal","AttachBotInstallModal","DeleteFolderDialog","PremiumMainModal","GiftPremiumModal","GiveawayModal","PremiumGiftingModal","AppendEntityPickerModal","PremiumLimitReachedModal","StatusPickerMenu","BoostModal","GiftCodeModal","ChatlistModal","StarsBalanceModal","StarPaymentModal","AboutAdsModal","ReportAdModal","CalendarModal","DeleteMessageModal","PinMessageModal","UnpinAllMessagesModal","MessageSelectToolbar","SeenByModal","PrivacySettingsNoticeModal","CountryPickerModal","ReactorListModal","EmojiInteractionAnimation","ChatLanguageModal","CollectibleInfoModal","LeftSearch","Settings","ContactList","NewChat","ArchivedChats","ChatFolderModal","MuteChatModal","ContextMenuContainer","SponsoredMessageContextMenuContainer","StickerSetModal","CustomEmojiSetsModal","HeaderMenuContainer","MobileSearch","ReactionPicker","AttachmentModal","PollModal","SymbolMenu","ChatCommandTooltip","BotCommandMenu","MentionTooltip","StickerTooltip","CustomEmojiTooltip","CustomSendMenu","DropArea","TextFormatter","EmojiTooltip","InlineBotTooltip","SendAsMenu","RightSearch","StickerSearch","GifSearch","Statistics","MessageStatistics","StoryStatistics","PollResults","CreateTopic","EditTopic","Management","PaymentModal","ReceiptModal","InviteViaLinkModal","OneTimeMediaModal","React","memo","useMemo","buildClassName","renderText","useSelectorSignal","useDerivedState","useOldLang","Button","ListItem","Modal","Separator","Icon","SafeLink","styles","_ref","isOpen","isRevenueSharing","onClose","lang","minLevelSignal","global","appConfig","channelRestrictAdsLevelMin","minLevelToRestrictAds","regularAdContent","createElement","Fragment","url","text","revenueSharingAdContent","className","topIcon","name","title","description","secondary","isStatic","multiline","icon","separator","contentClassName","content","size","onClick","useCallback","useEffect","useState","MAX_INT_32","formatDateToString","formatTime","getDayStart","useFlag","usePrevious","MAX_SAFE_DATE","MIN_SAFE_DATE","WEEKDAY_LETTERS","selectedAt","minAt","maxAt","isFutureMode","isPastMode","withTimePicker","submitButtonLabel","secondButtonLabel","onSubmit","onSecondButtonClick","now","Date","minDate","Math","max","maxDate","min","passedSelectedDate","prevIsOpen","isTimeInputFocused","markTimeInputAsFocused","selectedDate","setSelectedDate","currentMonthAndYear","setCurrentMonthAndYear","getFullYear","getMonth","selectedHours","setSelectedHours","formatInputTime","getHours","selectedMinutes","setSelectedMinutes","getMinutes","selectedDay","formatDay","getDate","currentYear","currentMonth","isDisabled","getTime","newSelectedDate","shouldDisableNextMonth","shouldDisablePrevMonth","prevMonthGrid","currentMonthGrid","nextMonthGrid","buildCalendarGrid","submitLabel","formatSubmitLabel","handlePrevMonth","d","dateCopy","setMonth","handleNextMonth","handleDateSelect","date","setDate","setFullYear","handleSubmit","handleChangeHours","e","value","target","replace","length","hours","Number","setHours","hoursStr","handleChangeMinutes","minutes","setMinutes","minutesStr","renderTimePicker","type","inputMode","onChange","onFocus","onEnter","round","color","disabled","undefined","map","day","gridDate","role","tabIndex","isDisabledDay","Boolean","isText","year","month","firstDay","getDay","totalDaysInPrevMonth","i","push","lastRowDaysCount","fixedMinDate","fixedMaxDate","String","padStart","code","today","useRef","getActions","getGlobal","CHAT_HEIGHT_PX","getCanPostInChat","isUserId","REM","useInfiniteScroll","useInputFocusOnOpen","useKeyboardListNavigation","useLastCallback","InfiniteScroll","InputText","Loading","Transition","GroupChatInfo","PrivateChatInfo","TopicIcon","CHAT_LIST_SLIDE","TOPIC_LIST_SLIDE","TOPIC_ICON_SIZE","ChatOrUserPicker","currentUserId","chatOrUserIds","search","searchPlaceholder","loadMore","onSearchChange","onSelectChatOrUser","onCloseAnimationEnd","loadTopics","containerRef","topicContainerRef","searchRef","topicSearchRef","viewportIds","getMore","forumId","setForumId","topicSearch","setTopicSearch","activeKey","viewportOffset","indexOf","resetSearch","topicIds","topics","chatsById","chats","byId","chatFullInfoById","fullInfoById","topicsResult","searchTitle","toLowerCase","result","Object","values","reduce","acc","topic","id","includes","keys","handleHeaderBackClick","handleSearchChange","currentTarget","handleTopicSearchChange","handleKeyDown","index","chatId","chat","isForum","handleTopicKeyDown","handleClick","handleTopicClick","topicId","renderTopicList","dir","isRtl","ariaLabel","ref","onKeyDown","placeholder","items","withAbsolutePositioning","maxHeight","key","style","clickArg","letterClassName","renderChatList","onLoadMore","status","userId","slideClassName","Picker","countryList","selectionLimit","showNotification","selectedCountryIds","setSelectedCountryIds","prevSelectedCountryIds","noPickerScrollRestore","displayedIds","filter","country","isHidden","iso2","handleSelectedIdsChange","newSelectedIds","message","root","container","pickerSelector","pickerTitle","main","picker","itemIds","selectedIds","onSelectedIdsChange","noScrollRestore","isCountryList","footer","withGlobal","FAVORITE_SYMBOL_SET_ID","POPULAR_SYMBOL_SET_ID","RECENT_SYMBOL_SET_ID","SLIDE_TRANSITION_DURATION","STICKER_PICKER_MAX_SHARED_COVERS","STICKER_SIZE_PICKER_HEADER","TOP_SYMBOL_SET_ID","isSameReaction","selectCanPlayAnimatedEmojis","selectChatFullInfo","selectIsAlwaysHighPriorityEmoji","selectIsChatWithSelf","selectIsCurrentUserPremium","animateHorizontalScroll","pickTruthy","unique","IS_TOUCH_ENV","useAppLayout","useHorizontalScroll","useScrolledState","useAsyncRendering","useStickerPickerObservers","StickerSetCover","StickerButton","StickerSet","pickerStyles","HEADER_BUTTON_WIDTH","DEFAULT_ID_PREFIX","TOP_REACTIONS_COUNT","RECENT_REACTIONS_COUNT","FADED_BUTTON_SET_IDS","Set","STICKER_SET_IDS_WITH_COVER","CustomEmojiPicker","pickerListClassName","loadAndPlay","addedCustomEmojiIds","customEmojisById","recentCustomEmojiIds","selectedReactionIds","recentStatusEmojis","stickerSetsById","chatEmojiSetId","topReactions","recentReactions","availableReactions","idPrefix","customEmojiFeaturedIds","canAnimate","isReactionPicker","isStatusPicker","isTranslucent","isSavedMessages","isCurrentUserPremium","withDefaultTopicIcons","defaultTopicIconsId","defaultStatusIconsId","defaultTagReactions","onCustomEmojiSelect","onReactionSelect","onContextMenuOpen","onContextMenuClose","onContextMenuClick","headerRef","sharedCanvasRef","sharedCanvasHqRef","isMobile","handleScroll","handleContentScroll","isAtBeginning","shouldHideTopBorder","recentCustomEmojis","prefix","activeSetIndex","observeIntersectionForSet","observeIntersectionForPlayingItems","observeIntersectionForShowingItems","observeIntersectionForCovers","selectStickerSet","areAddedLoaded","allSets","defaultSets","accessHash","reactions","count","isEmoji","topReactionsSlice","slice","cleanRecentReactions","reaction","some","topReaction","cleanAvailableReactions","_ref2","isInactive","_ref3","isPopular","allRecentReactions","concat","defaultStatusIconsPack","stickers","defaultTopicIconsPack","userSetIds","unshift","setIdsToDisplay","setsToDisplay","noPopulatedSets","set","canRenderContent","shouldRenderContent","header","current","newLeft","offsetWidth","handleEmojiSelect","emoji","handleReactionSelect","renderCover","stickerSet","firstSticker","buttonClassName","stickerCover","activated","withSharedCanvas","isHq","has","hasThumbnail","isRecent","isFaded","faded","noPlay","forcePlayback","observeIntersection","sticker","noContextMenu","withTranslucentThumb","fullClassName","pickerDisabled","headerClassName","headerWithBorder","listClassName","main_customEmoji","hasHeader","onScroll","shouldHideHeader","isChatEmojiSet","isNearActive","withDefaultTopicIcon","withDefaultStatusIcon","onStickerSelect","_ref4","setsById","customEmojis","featuredIds","statusRecent","emojis","defaultTags","chatFullInfo","added","setIds","emojiSet","useIntersectionObserver","StickerSetCard","customEmojiSets","canPlayAnimatedEmojis","openStickerSet","customEmojiModalRef","observe","rootRef","prevCustomEmojiSets","renderingCustomEmojiSets","handleSetClick","stickerSetInfo","hasCloseButton","sets","teactFastList","customEmojiSet","setCard","customEmojiSetIds","getPrivateChatUserId","getUserFirstOrLastName","isChatBasicGroup","isChatSuperGroup","selectAllowedMessageActions","selectBot","selectChat","selectCurrentMessageList","selectUser","isSchedule","album","canDeleteForAll","contactName","willDeleteForCurrentUserOnly","willDeleteForAll","onConfirm","deleteMessages","deleteScheduledMessages","handleDeleteMessageForAll","messageIds","messages","shouldDeleteForAll","handleDeleteMessageForSelf","threadId","isChatWithBot","DeleteProfilePhotoModal","photo","profileId","deleteProfilePhoto","deleteChatPhoto","handleDeletePhoto","ApiMediaFormat","getVideoMediaHash","preventMessageInputBlurWithBubbling","useBuffering","useCanvasBlur","useContextMenuHandlers","useIsIntersecting","useMedia","useMenuPosition","Menu","MenuItem","OptimizedVideo","Spinner","GifButton","gif","onUnsaveClick","isIntersecting","previewBlobUrl","BlobUrl","withThumb","thumbnail","dataUri","thumbRef","videoData","shouldRenderVideo","isBuffered","bufferingHandlers","shouldRenderSpinner","isVideoReady","isContextMenuOpen","contextMenuPosition","handleBeforeContextMenu","handleContextMenu","handleContextMenuClose","handleContextMenuHide","getTriggerElement","getRootElement","closest","getMenuElement","querySelector","positionX","positionY","transformOriginX","transformOriginY","menuStyle","blobUrl","handleUnsaveClick","stopPropagation","preventDefault","handleContextDelete","handleSendQuiet","handleSendScheduled","handleMouseDown","width","height","onMouseDown","onContextMenu","pill","noFastClick","src","alt","draggable","_extends","canPlay","autoPlay","loop","muted","disablePictureInPicture","playsInline","preload","autoClose","destructive","copyTextToClipboard","isBetween","ConfirmDialog","Draggable","USERNAME_HEIGHT_PX","ManageUsernames","usernames","onEditUsername","toggleUsername","toggleChatUsername","sortUsernames","sortChatUsernames","usernameForConfirm","setUsernameForConfirm","usernameList","username","prevUsernameList","state","setState","orderedUsernames","dragOrderUsernames","draggedIndex","handleCopyUsername","handleUsernameClick","data","isEditable","closeConfirmUsernameDialog","handleUsernameToggle","isActive","handleDrag","translation","delta","y","splice","handleDragEnd","sortableContainer","usernameData","isDragged","draggedTop","top","subtitle","onDrag","onDragEnd","knobStyle","item","narrow","secondaryIcon","contextActions","handler","confirmLabel","confirmHandler","confirmIsDestructive","STICKER_SIZE_AUTH","STICKER_SIZE_AUTH_MOBILE","STICKER_SIZE_TWO_FA","LOCAL_TGS_URLS","useTimeout","AnimatedSticker","PEEK_MONKEY_SHOW_DELAY","SEGMENT_COVER_EYES","SEGMENT_UNCOVER_EYE","SEGMENT_COVER_EYE","PasswordMonkey","isPasswordVisible","isBig","isFirstMonkeyLoaded","markFirstMonkeyLoaded","isPeekShown","markPeekShown","stikerSize","handleFirstMonkeyLoad","tgsUrl","MonkeyClose","playSegment","noLoop","onLoad","MonkeyPeek","Bundles","useModuleLoader","PinMessageModalAsync","props","Extra","isChatChannel","messageId","isChannel","isGroup","isSuperGroup","canPinForAll","pinMessage","handlePinMessageForAll","isUnpin","handlePinMessage","isOneSide","isSilent","renderMessage","isPrivateChat","isChatWithSelf","ANIMATION_END_DELAY","selectTabState","ANIMATION_DURATION","AnimatedIconWithPreview","CLOSE_ANIMATION_DURATION","isReadDate","user","updateGlobalPrivacySettings","openPremiumModal","closePrivacySettingsNoticeModal","setPrivacyVisibility","loadUser","userName","handleShowReadTime","shouldHideReadMarks","setTimeout","handleShowLastSeen","privacyKey","visibility","onSuccess","handleOpenPremium","initialSection","handleClose","isSlim","closeButton","ReadTime","LastSeen","nonInteractive","desc","button","withPremiumGradient","privacySettingsNoticeModal","EMOJI_SIZE_PICKER","getDocumentMediaHash","useCoordsInSharedCanvas","useMediaTransition","CustomEmoji","ReactionEmoji","isSelected","isCustom","availableReaction","find","available","thumbDataUri","staticIcon","animationId","selectAnimation","coords","mediaData","transitionClassNames","selected","documentId","observeIntersectionForPlaying","forceAlways","play","isLowPriority","sharedCanvas","sharedCanvasCoords","MAIN_THREAD_ID","API_CHAT_TYPES","filterChatsByName","filterUsersByName","isDeletedUser","filterChatIdsByType","sortChatIds","useCurrentOrPrev","RecipientPicker","activeListIds","archivedListIds","pinnedIds","contactIds","onSelectRecipient","setSearch","ids","priorityIds","usersById","users","chatIds","sorted","renderingIds","listIds","orderedPinnedIds","active","archived","contactList","userIds","selectChatMessage","formatDateAtTime","seenByDates","openChat","closeSeenByModal","renderingSeenByDates","memberIds","sort","leftId","rightId","handleCloseSeenByModal","modal","noStatusOrTyping","statusIcon","seenByModal","SliderDots","onSelectSlide","startFrom","isPreLastBatch","isLastBatch","isFirstBatch","isPreFirstBatch","shownDotsCount","handleGoForward","handleGoBack","arrow","arrowHidden","Array","fill","_","isLast","isPreLast","isFirst","isPreFirst","isInvisible","dot","medium","small","invisible","right","getServerTimeOffset","useDynamicColorListener","StickerView","contentForStatusMenuContext","arg","canViewSet","observeIntersectionForShowing","shouldIgnorePremium","noShowPremium","onFaveClick","onUnfaveClick","onRemoveRecentClick","isEffectEmoji","setEmojiStatus","menuRef","hasCustomColor","shouldUseTextColor","customColor","isPremium","isFree","hasEffect","isCustomEmoji","isLocked","shouldLoad","shouldPlay","isIntesectingForShowing","shouldRenderContextMenu","getLayout","withPortal","shouldAvoidNegativePosition","handleRemoveClick","handleContextRemoveRecent","handleContextUnfave","handleContextFave","handleOpenSet","handleEmojiStatusExpiresClick","duration","arguments","emojiStatus","expires","shouldShowCloseButton","contextMenuItems","forEach","isSmall","shouldLoop","shouldPreloadPreview","noLoad","withSharedAnimation","DEFAULT_STATUS_ICON_ID","DEFAULT_TOPIC_ICON_STICKER_ID","EFFECT_EMOJIS_SET_ID","EFFECT_STICKERS_SET_ID","STICKER_SIZE_PICKER","getReactionKey","selectIsSetPremium","useResizeObserver","useWindowSize","grey","ITEMS_PER_ROW_FALLBACK","ITEMS_MOBILE_PER_ROW_FALLBACK","ITEMS_MINI_MOBILE_PER_ROW_FALLBACK","MOBILE_WIDTH_THRESHOLD_PX","MINI_MOBILE_WIDTH_THRESHOLD_PX","favoriteStickers","isChatStickerSet","noContextMenus","onStickerUnfave","onStickerFave","onStickerRemoveRecent","clearRecentStickers","clearRecentCustomEmoji","clearRecentReactions","toggleStickerSet","loadStickers","windowWidth","isConfirmModalOpen","openConfirmModal","closeConfirmModal","itemsPerRow","setItemsPerRow","getItemsPerRowFallback","shouldRender","stickerMarginPx","emojiMarginPx","emojiVerticalMarginPx","isFavorite","isPremiumSet","handleClearRecent","handleAddClick","stickerSetId","handleDefaultTopicIconClick","mediaType","isLottie","isVideo","shortName","handleDefaultStatusIconClick","itemSize","margin","verticalMargin","calculateItemsPerRow","floor","handleResize","entry","contentRect","clientWidth","isInstalled","installedDate","isArchived","canCut","isCut","expand","itemsBeforeCutout","totalItemsCount","itemHeight","heightWhenCut","ceil","favoriteStickerIdsSet","withAddSetButton","addSetButtonText","fluid","reactionId","isHqEmoji","canvasRef","STICKER_SIZE_GENERAL_SETTINGS","handleCardClick","renderPreview","inactive","EMOJI_SIZE_MODAL","STICKER_SIZE_MODAL","TME_LINK_PREFIX","getAllowedAttachmentOptions","selectCanScheduleUntilOnline","selectShouldSchedule","selectThreadInfo","useSchedule","DropdownMenu","INTERSECTION_THROTTLE","fromSticker","stickerSetShortName","canSendStickers","canScheduleUntilOnline","shouldSchedule","shouldUpdateStickerSetOrder","currentMessageList","sendMessage","prevStickerSet","renderingStickerSet","isAdded","requestCalendar","calendar","throttleMs","handleSelect","isScheduleRequested","isPreloadedGlobally","scheduledAt","messageList","handleButtonClick","handleCopyLink","suffix","renderButtonText","MoreMenuButton","onTrigger","isMenuOpen","ripple","renderHeader","trigger","sendOptions","threadInfo","isMessageThread","isCommentsInfo","fromChannelId","settings","byKey","pinnedMessagesCount","onUnpin","debounce","isUsernameValid","MAX_USERNAME_LENGTH","MIN_UPDATE_USERNAME_LENGTH","USERNAME_REGEX","LINK_PREFIX_REGEX","runDebouncedForCheckUsername","cb","UsernameInput","currentUsername","asLink","isLoading","isUsernameAvailable","checkedUsername","checkUsername","checkPublicLink","setUsername","langPrefix","label","previousIsUsernameAvailable","renderingIsUsernameAvailable","isChecking","usernameSuccess","usernameError","test","handleUsernameChange","trim","match","newUsername","isValid","check","error","success","readOnly","teactExperimentControlled","getSenderTitle","selectPeer","selectPeerStory","getPeerColorClass","renderTextWithEntities","useFastClick","EmojiIconBackground","EmbeddedStoryForward","forwardInfo","sender","story","openStoryViewer","loadPeerStoriesByIds","fromPeerId","storyId","peerId","storyIds","senderTitle","fromName","openOriginalStory","isStoryReady","isDeleted","isSingleStory","renderTextContent","renderSender","backgroundEmojiId","emojiDocumentId","VISA","MASTERCARD1","MASTERCARD2","MIR","CardType","cards","Default","Visa","Mastercard","Mir","detectCardType","cardNumber","detectCardTypeText","cardType","animateScroll","useSyncEffect","STICKER_INTERSECTION_THROTTLE","STICKER_INTERSECTION_MARGIN","SCROLL_MAX_DISTANCE_WHEN_CLOSE","SCROLL_MAX_DISTANCE_WHEN_FAR","FOCUS_MARGIN","stickerSetIntersectionsRef","setActiveSetIndex","freeze","freezeForSet","unfreeze","unfreezeForSet","entries","stickerSetIntersections","minIntersectingIndex","lowestIndex","Infinity","freezeForShowingItems","unfreezeForShowingItems","currentIndex","stickerSetEl","document","getElementById","isClose","abs","useForumPanelRender","useHistoryBack","useShowTransition","useLeftHeaderButtonRtlForumTransition","StoryRibbon","StoryToggler","ChatList","ForumPanel","isForumPanelOpen","archiveSettings","isStoryRibbonShown","onReset","onTopicSearch","onSettingsScreenSelect","onLeftColumnContentChange","foldersDispatch","updateArchiveSettings","onBack","handleDisplayArchiveInChats","shouldDisableDropdownMenuTransitionRef","handleDropdownMenuTransitionEnd","shouldRenderTitle","titleClassNames","shouldRenderForumPanel","handleForumPanelAnimationEnd","handleForumPanelAnimationStart","isAnimationStarted","isForumPanelVisible","shouldRenderStoryRibbon","storyRibbonClassNames","isClosing","isStoryRibbonClosing","onTransitionEnd","canShow","folderType","onOpenAnimationStart","ALL_FOLDER_ID","CheckboxGroup","foldersById","folderOrderedIds","editChatFolders","initialSelectedFolderIds","folderId","includedChatIds","pinnedChatIds","selectedFolderIds","setSelectedFolderIds","folders","idsToRemove","idsToAdd","options","orderedIds","chatFolders","RadioGroup","MuteDuration","muteUntilOption","setMuteUntilOption","Forever","updateChatMutedState","updateTopicMutedState","muteForOptions","OneHour","FourHours","EightHours","OneDay","ThreeDays","muteUntil","StoryViewerOrigin","sortUserIds","FloatingActionButton","userStatusesById","openNewContactDialog","shouldReplaceHistory","filteredIds","forceShowSelf","avatarSize","withStory","storyViewerOrigin","isShown","statusesById","selectIsContextMenuTranslucent","Portal","statusButtonRef","areFeaturedStickersLoaded","onEmojiStatusSelect","loadFeaturedEmojiStickers","isContextMenuShown","markContextMenuShown","unmarkContextMenuShown","getBoundingClientRect","noCompact","bubbleClassName","menuContent","noCloseOnBackdrop","LeftColumnContent","LAYERS_ANIMATION_NAME","NewChatStep1","NewChatStep2","RENDER_COUNT","onContentChange","newChatMemberIds","setNewChatMemberIds","handleNextStep","NewChannelStep2","NewGroupStep2","renderCount","isStepActive","NewChannelStep1","NewGroupStep1","selectedMemberIds","onSelectedMemberIdsChange","onNextStep","isUserBot","localContactIds","searchQuery","isSearching","localPeerIds","globalPeerIds","setGlobalSearchQuery","handleFilterChange","query","foundContactIds","contactId","isSelf","canBeInvitedToGroup","filterValue","filterPlaceholder","searchInputId","isSearchable","onFilterChange","fetchingStatus","globalResults","localResults","globalSearch","peerIds","ChatCreationProgress","AvatarEditable","MAX_MEMBERS_FOR_GENERATE_CHAT_NAME","maxGroupSize","creationProgress","creationError","createGroupChat","createChannel","setTitle","about","setAbout","setPhoto","setError","chatTitleEmptyError","channelTitleEmptyError","chatTooManyUsersError","InProgress","memberFirstNames","generatedChatName","join","handleTitleChange","newValue","handleDescriptionChange","handleCreateGroup","handleCreateChannel","Complete","renderedError","progress","chatCreation","config","AudioOrigin","LoadMoreDirection","getIsDownloading","formatMonthAndYear","toYearMonth","MEMO_EMPTY_ARRAY","throttle","createMapStateToProps","getSenderName","Audio","NothingFound","runThrottled","AudioResults","theme","isVoice","globalMessagesByChatId","foundIds","activeDownloads","searchMessagesGlobal","focusMessage","openAudioPlayer","currentType","handleLoadMore","direction","Backwards","foundMessages","split","handleMessageFocus","handlePlayAudio","renderList","shouldDrawDateDivider","origin","Search","onPlay","onDateClick","canDownload","isProtected","isDownloading","audio","canRenderContents","noFastList","getMessageIsSpoiler","getMessageMediaHash","getMessageMediaThumbDataUri","getMessageRoundVideo","getMessageSticker","getMessageVideo","formatPastTimeShort","renderMessageSummary","useSelectWithEnter","Avatar","FullNameTitle","Link","ChatMessage","privateChatUser","mediaThumbnail","mediaBlobUrl","isRoundVideo","buttonRef","peer","withEmojiStatus","renderSummary","isSpoiler","privateChatUserId","DateSuggest","LeftSearchResultTopic","ChatMessageResults","dateSearchQuery","foundTopicIds","searchChatId","onSearchDateSelect","openThread","a","b","renderFoundMessage","nothingFound","searchDate","onSelect","byChatId","resultsByType","GLOBAL_SUGGESTED_CHANNELS_ID","selectSimilarChannelIds","getOrderedIds","useEffectOnce","PickerSelectedItem","LeftSearchResultChat","RecentContacts","MIN_QUERY_LENGTH_FOR_GLOBAL_SEARCH","LESS_LIST_ITEMS_AMOUNT","ChatResults","isChannelList","accountPeerIds","suggestedChannelIds","addRecentlyFoundChatId","setGlobalSearchChatId","loadChannelRecommendations","chatSelectionRef","shouldShowMoreLocal","setShouldShowMoreLocal","shouldShowMoreGlobal","setShouldShowMoreGlobal","handleChatClick","handlePickerItemClick","startsWith","orderedChatIds","filteredChatIds","localChatIds","contactIdsWithMe","handleClickShowMoreLocal","handleClickShowMoreGlobal","noScrollRestoreOnTop","withUsername","similarChannelIds","SUGGESTION_COUNT","suggestions","getSuggestionsFromDate","hasYear","suggestion","currentDate","latestYear","getMessageDocument","Document","CURRENT_TYPE","FileResults","shouldWarnAboutSvg","observeIntersectionForMedia","withDate","datetime","smaller","GlobalSearchContent","parseDateString","TabList","LinkResults","MediaResults","TABS","ChannelList","Media","Links","Files","Music","Voice","CHAT_TABS","currentContent","setGlobalSearchContent","setGlobalSearchDate","activeTab","setActiveTab","tabs","handleSwitchTab","tab","handleSearchDateSelect","onSwitchTab","selectIsChatMuted","selectIsChatPinned","selectNotifyExceptions","selectNotifySettings","useChatContextActions","isPinned","isMuted","canChangeFolder","isMuteModalOpen","openMuteModal","closeMuteModal","isChatFolderModalOpen","openChatFolderModal","closeChatFolderModal","shouldRenderChatFolderModal","markRenderChatFolderModal","unmarkRenderChatFolderModal","shouldRenderMuteModal","markRenderMuteModal","unmarkRenderMuteModal","handleChatFolderChange","handleMute","SearchResult","WebLink","isChatProtected","onMessageClick","MediaViewerOrigin","openMediaViewer","handleSelectMedia","renderGallery","renderSearchResult","isMediaGrid","isMessageList","classNames","itemSelector","SEARCH_CLOSE_TIMEOUT_MS","NBSP","topUserIds","recentlyFoundChatIds","loadTopUsers","clearRecentlyFoundChats","topUsersRef","handleClearRecentlyFoundChats","topPeers","selectTheme","tabState","getUserFullName","BlockUserModal","blockedIds","setUserSearchQuery","blockUser","filteredContactIds","availableContactIds","firstId","secondId","firstName","secondName","localeCompare","handleRemoveUser","blocked","userSearch","localUserIds","StarIcon","PremiumStatusItem","premiumSection","handleOpenPremiumModal","leftElement","PrivacyLockedOption","contactsAndPremiumOptionTitle","lockIcon","selectNewNoncontactPeersRequirePremium","PrivacyMessages","canLimitNewMessagesWithoutPremium","shouldNewNonContactPeersRequirePremium","canChange","hidden","handleChange","privacy","SettingsScreens","useTwoFaReducer","SettingsFolders","SettingsPasscode","SettingsActiveSessions","SettingsActiveWebsites","SettingsCustomEmoji","SettingsDataStorage","SettingsDoNotTranslate","SettingsEditProfile","SettingsExperimental","SettingsGeneral","SettingsGeneralBackground","SettingsGeneralBackgroundColor","SettingsHeader","SettingsLanguage","SettingsMain","SettingsNotifications","SettingsPerformance","SettingsPrivacy","SettingsPrivacyBlockedUsers","SettingsPrivacyVisibility","SettingsPrivacyVisibilityExceptionList","SettingsQuickReaction","SettingsStickers","SettingsTwoFa","TRANSITION_RENDER_COUNT","TRANSITION_DURATION","TWO_FA_SCREENS","TwoFaDisabled","TwoFaNewPassword","TwoFaNewPasswordConfirm","TwoFaNewPasswordHint","TwoFaNewPasswordEmail","TwoFaNewPasswordEmailCode","TwoFaCongratulations","TwoFaEnabled","TwoFaChangePasswordCurrent","TwoFaChangePasswordNew","TwoFaChangePasswordConfirm","TwoFaChangePasswordHint","TwoFaTurnOff","TwoFaRecoveryEmailCurrentPassword","TwoFaRecoveryEmail","TwoFaRecoveryEmailCode","PASSCODE_SCREENS","PasscodeDisabled","PasscodeEnabled","FOLDERS_SCREENS","Folders","FoldersCreateFolder","FoldersEditFolder","FoldersEditFolderFromChatList","FoldersEditFolderInvites","FoldersIncludedChats","FoldersIncludedChatsFromChatList","FoldersExcludedChats","FoldersExcludedChatsFromChatList","FoldersShare","PRIVACY_SCREENS","PrivacyBlockedUsers","ActiveWebsites","PRIVACY_PHONE_NUMBER_SCREENS","PrivacyPhoneNumberAllowedContacts","PrivacyPhoneNumberDeniedContacts","PRIVACY_LAST_SEEN_PHONE_SCREENS","PrivacyLastSeenAllowedContacts","PrivacyLastSeenDeniedContacts","PRIVACY_PROFILE_PHOTO_SCREENS","PrivacyProfilePhotoAllowedContacts","PrivacyProfilePhotoDeniedContacts","PRIVACY_BIO_SCREENS","PrivacyBioAllowedContacts","PrivacyBioDeniedContacts","PRIVACY_BIRTHDAY_SCREENS","PrivacyBirthdayAllowedContacts","PrivacyBirthdayDeniedContacts","PRIVACY_PHONE_CALL_SCREENS","PrivacyPhoneCallAllowedContacts","PrivacyPhoneCallDeniedContacts","PRIVACY_PHONE_P2P_SCREENS","PrivacyPhoneP2PAllowedContacts","PrivacyPhoneP2PDeniedContacts","PRIVACY_FORWARDING_SCREENS","PrivacyForwardingAllowedContacts","PrivacyForwardingDeniedContacts","PRIVACY_VOICE_MESSAGES_SCREENS","PrivacyVoiceMessagesAllowedContacts","PrivacyVoiceMessagesDeniedContacts","PRIVACY_GROUP_CHATS_SCREENS","PrivacyGroupChatsAllowedContacts","PrivacyGroupChatsDeniedContacts","currentScreen","foldersState","onScreenSelect","shouldSkipTransition","closeShareChatFolderModal","twoFaState","twoFaDispatch","privacyPasscode","setPrivacyPasscode","handleReset","forceReturnToChatList","isFromSettings","shareFolderScreen","mode","renderCurrentSectionContent","isScreenActive","activeScreen","privacyAllowScreens","PrivacyPhoneNumber","PrivacyLastSeen","PrivacyProfilePhoto","PrivacyBio","PrivacyBirthday","PrivacyPhoneCall","PrivacyPhoneP2P","PrivacyForwarding","PrivacyVoiceMessages","PrivacyGroupChats","isTwoFaScreen","isPasscodeScreen","isFoldersScreen","isPrivacyScreen","Main","EditProfile","General","GeneralChatBackgroundColor","GeneralChatBackground","QuickReaction","DataStorage","Privacy","Language","DoNotTranslate","Stickers","Experimental","ActiveSessions","screen","isAllowList","withPremiumCategory","shownScreen","dispatch","PasscodeNewPasscode","PasscodeNewPasscodeConfirm","PasscodeChangePasscodeCurrent","PasscodeChangePasscodeNew","PasscodeChangePasscodeConfirm","PasscodeCongratulations","PasscodeTurnOff","passcode","onSetPasscode","Performance","renderCurrentSection","_isFrom","_currentKey","editedFolderId","shouldWrap","withSwipeControl","formatDateTimeToString","getSessionIcon","Switcher","SettingsActiveSession","session","changeSessionSettings","terminateAuthorization","renderingSession","handleSecretChatsStateChange","hash","areSecretChatsEnabled","handleCallsStateChange","areCallsEnabled","handleTerminateSessionClick","headerButton","iconDevice","deviceModel","dateActive","box","appName","appVersion","platform","systemVersion","ip","getLocation","note","actionHeader","actionName","checked","region","activeSessions","byHash","orderedHashes","ttlDays","terminateAllAuthorizations","changeSessionTtl","isConfirmTerminateAllDialogOpen","openConfirmTerminateAllDialog","closeConfirmTerminateAllDialog","openedSessionHash","setOpenedSessionHash","isModalOpen","openModal","closeModal","autoTerminateValue","AUTO_TERMINATE_OPTIONS","handleTerminateAllSessions","handleOpenSessionModal","handleCloseSessionModal","handleChangeSessionTtl","days","currentSession","currentSessionHash","isCurrent","otherSessionHashes","hasOtherSessions","renderCurrentSession","iconClassName","renderOtherSessions","sessionHashes","renderSession","renderAutoTerminate","sessionHash","areButtonsInColumn","SettingsActiveWebsite","bot","terminateWebAuthorization","renderingBot","avatar","domain","browser","activeWebSessions","botId","terminateAllWebAuthorizations","openedWebsiteHash","setOpenedWebsiteHash","handleTerminateAuthClick","handleTerminateAllAuth","handleCloseWebsiteModal","renderSessions","clearHelp","pick","Checkbox","shouldSuggestCustomEmoji","setSettingOption","stickerSettingsRef","handleStickerSetClick","handleSuggestCustomEmojiChange","onCheck","AUTODOWNLOAD_FILESIZE_MB_LIMITS","RangeSlider","canAutoLoadPhotoFromContacts","canAutoLoadPhotoInPrivateChats","canAutoLoadPhotoInGroups","canAutoLoadPhotoInChannels","canAutoLoadVideoFromContacts","canAutoLoadVideoInPrivateChats","canAutoLoadVideoInGroups","canAutoLoadVideoInChannels","canAutoLoadFileFromContacts","canAutoLoadFileInPrivateChats","canAutoLoadFileInGroups","canAutoLoadFileInChannels","autoLoadFileMaxSizeMb","renderFileSizeCallback","handleFileSizeChange","renderContentSizeSlider","renderValue","renderAutoDownloadBlock","canAutoLoadFromContacts","canAutoLoadInPrivateChats","canAutoLoadInGroups","canAutoLoadInChannels","isChecked","SUPPORTED_TRANSLATION_LANGUAGES","partition","useEffectWithPrevDeps","LOCAL_SUPPORTED_DETECTION_LANGUAGES","SUPPORTED_LANGUAGES","language","doNotTranslate","displayedOptions","setDisplayedOptions","langCode","translatedNames","Intl","DisplayNames","translatedName","of","originalNames","originalName","subLabel","prevIsActive","option","otherLanguages","unselected","event","newDoNotTranslate","v","handleSearch","filteredDisplayedOptions","toString","languages","checkbox","ProfileEditProgress","PURCHASE_USERNAME","USERNAME_PURCHASE_ERROR","getChatAvatarHash","selectUserFullInfo","selectCurrentLimit","TextArea","ERROR_FIRST_NAME_MISSING","currentAvatarHash","currentFirstName","currentLastName","currentBio","editUsernameError","maxBioLength","loadCurrentUser","updateProfile","firstEditableUsername","isUsernameTouched","setIsUsernameTouched","isProfileFieldsTouched","setIsProfileFieldsTouched","setFirstName","lastName","setLastName","bio","setBio","editableUsername","setEditableUsername","currentAvatarBlobUrl","isUsernameError","shouldRenderUsernamesManage","isSaveButtonShown","handlePhotoChange","newPhoto","handleFirstNameChange","handleLastNameChange","handleBioChange","handleProfileSave","trimmedFirstName","trimmedLastName","trimmedBio","renderPurchaseLink","purchaseInfoLink","s","maxLength","maxLengthIndicator","profileEdit","currentUser","currentUserFullInfo","DEBUG_LOG_FILENAME","getDebugLogs","download","IS_ELECTRON","AnimatedIcon","shouldShowLoginCodeInChatList","shouldForceHttpTransport","shouldAllowHttpTransport","shouldCollectDebugLogs","shouldDebugExportedSenders","requestConfetti","isAutoUpdateEnabled","setIsAutoUpdateEnabled","window","electron","getIsAutoUpdateEnabled","then","handleDownloadLog","file","File","URL","createObjectURL","handleIsAutoUpdateEnabledChange","withStars","setTimeFormat","getSystemTheme","IS_ANDROID","IS_IOS","IS_MAC_OS","IS_WINDOWS","TIME_FORMAT_OPTIONS","messageTextSize","messageSendKeyCombo","timeFormat","shouldUseSystemTheme","isMobileDevice","appearanceThemeOptions","keyboardSendOptions","handleMessageTextSizeChange","newSize","documentElement","setProperty","setAttribute","handleAppearanceThemeChange","newTheme","handleTimeFormatChange","newTimeFormat","wasTimeFormatSetManually","handleMessageSendComboChange","newCombo","isTrayIconEnabled","setIsTrayIconEnabled","getIsTrayIconEnabled","handleIsTrayIconEnabledChange","UPLOADING_WALLPAPER_SLUG","DARK_THEME_PATTERN_COLOR","DEFAULT_PATTERN_COLOR","getAverageColor","getPatternColor","rgb2hex","validateFiles","openSystemFilesDialog","WallpaperTile","SUPPORTED_TYPES","background","isBlurred","loadedWallpapers","loadWallpapers","uploadWallpaper","setThemeSettings","themeRef","handleFileSelect","files","validatedFiles","handleUploadWallpaper","handleSetColor","handleResetToDefault","backgroundColor","patternColor","handleWallPaperSelect","slug","currentWallpaper","wallpaper","rgbColor","handleWallPaperBlurChange","isUploading","themes","captureEvents","hex2rgb","hsb2rgb","rgb2hsb","DEFAULT_HSB","PREDEFINED_COLORS","colorPickerRef","huePickerRef","isFirstRunRef","hsb","setHsb","getInitialHsb","hsbRef","isDragging","markIsDragging","unmarkIsDragging","rgbInput","setRgbInput","hexInput","setHexInput","rectsRef","colorCtxRef","colorRect","offsetLeft","hueRect","handleColorDrag","colorPosition","pageX","pageY","scrollTop","huePosition","hsb2positions","positions2hsb","onCapture","onRelease","selectorToPreventScroll","withCursor","handleHueDrag","hex","hue","hueHex","rgb","drawColor","firstChild","drawHue","handleRgbChange","rgbValue","channel","handleHexChange","hexValue","handlePredefinedColorClick","dataset","rects","canvas","w","h","ctx","offsetHeight","getContext","imgData","createImageData","pixels","col","perY","st","ed","x","perX","putImageData","useMultiClick","signOut","openDeleteChatFolderModal","isSignOutDialogOpen","setIsSignOutDialogOpen","handleMultiClick","openSignOutConfirmation","closeSignOutConfirmation","openDeleteFolderConfirmation","handleSignOutMessage","forceInitApi","SettingsMenuButton","renderHeaderContent","oldSetLanguage","IS_TRANSLATION_SUPPORTED","canTranslate","canTranslateChats","loadLanguages","loadAttachBots","selectedLanguage","setSelectedLanguage","markIsLoading","unmarkIsLoading","canTranslateChatsEnabled","buildOptions","handleShouldTranslateChange","handleShouldTranslateChatsChange","handleShouldTranslateChatsClick","doNotTranslateText","handleDoNotSelectOpen","rightIcon","onClickLabel","loadingOption","currentLangCode","navigator","shortLangCode","substr","nativeName","FAQ_URL","PRIVACY_URL","selectIsGiveawayGiftsPurchaseAvailable","selectIsPremiumPurchaseBlocked","formatInteger","ChatExtra","ProfileInfo","sessionCount","canBuyPremium","isGiveawayAvailable","starsBalance","shouldDisplayStars","loadProfilePhotos","openSupportChat","openUrl","openPremiumGiftingModal","openStarsBalanceModal","isSupportDialogOpen","openSupportDialog","closeSupportDialog","handleOpenSupport","canPlayVideo","chatOrUserId","isInSettings","langName","stars","balance","history","all","transactions","checkIfNotificationsSupported","checkIfOfflinePushFailed","playNotifySound","useRunDebounced","hasPrivateChatsNotifications","hasPrivateChatsMessagePreview","hasGroupNotifications","hasGroupMessagePreview","hasBroadcastNotifications","hasBroadcastMessagePreview","hasContactJoinedNotifications","hasPushNotifications","hasWebNotifications","notificationSoundVolume","loadNotificationSettings","updateContactSignUpNotification","updateNotificationSettings","updateWebNotificationSettings","runDebounced","areNotificationsSupported","areOfflineNotificationsSupported","handleSettingsChange","peerType","setting","currentIsSilent","currentShouldShowPreviews","shouldShowPreviews","handleWebNotificationsChange","isEnabled","handlePushNotificationsChange","handlePrivateChatsNotificationsChange","handlePrivateChatsPreviewChange","handleGroupsNotificationsChange","handleGroupsPreviewChange","handleChannelsNotificationsChange","handleChannelsPreviewChange","handleContactNotificationChange","handleVolumeChange","volume","PasswordForm","EQUAL_PASSWORD_ERROR","SettingsPasswordForm","shouldDisablePasswordManager","expectedPassword","hint","clearError","validationError","setValidationError","shouldShowPassword","setShouldShowPassword","newPassword","handleClearError","shouldResetValue","onChangePasswordVisibility","ANIMATION_LEVEL_CUSTOM","ANIMATION_LEVEL_MAX","ANIMATION_LEVEL_MED","ANIMATION_LEVEL_MIN","INITIAL_PERFORMANCE_STATE_MAX","INITIAL_PERFORMANCE_STATE_MID","INITIAL_PERFORMANCE_STATE_MIN","selectPerformanceSettings","areDeepEqual","IS_BACKDROP_BLUR_SUPPORTED","ANIMATION_LEVEL_OPTIONS","ANIMATION_LEVEL_CUSTOM_OPTIONS","PERFORMANCE_OPTIONS","performanceSettings","updatePerformanceSettings","sectionExpandedStates","setSectionExpandedStates","sectionCheckedStates","every","animationLevelState","animationLevelOptions","handleToggleSection","sectionIndex","prev","handleAnimationLevelChange","newLevel","performance","animationLevel","handlePropertyGroupChange","perfomanceSection","sectionName","newSettings","_ref5","handlePropertyChange","_ref6","_ref7","selectCanSetPasscode","hasPassword","hasPasscode","blockedCount","webAuthCount","isSensitiveEnabled","canChangeSensitive","canDisplayAutoarchiveSetting","shouldArchiveAndMuteNewNonContact","canDisplayChatInTitle","canSetPasscode","loadPrivacySettings","loadBlockedUsers","loadContentSettings","updateContentSettings","loadGlobalPrivacySettings","loadWebAuthorizations","handleArchiveAndMuteChange","handleChatInTitleChange","handleUpdateContentSettings","getVisibilityValue","shouldAllowPremium","blockCount","blockChatIds","blockUserIds","allowCount","allowChatIds","allowUserIds","total","exceptionString","phoneNumber","lastSeen","profilePhoto","birthday","forwards","phoneCall","allowDisabledClick","rightElement","voiceMessages","chatInvite","totalCount","getMainUsername","formatPhoneNumberWithCode","chatsByIds","usersByIds","phoneCodeList","unblockUser","isBlockUserModalOpen","openBlockUserModal","closeBlockUserModal","handleUnblockClick","blockedUsernamesById","isPrivate","mainUsername","renderContact","userMainUsername","phoneCodes","selectShouldHideReadMarks","SettingsPrivacyLastSeen","canShowHideReadTime","handleChangeShouldHideReadMarks","SelectAvatar","SettingsPrivacyPublicProfilePhoto","hasCurrentUserFullInfo","currentUserFallbackPhoto","loadFullUser","uploadProfilePhoto","isDeleteFallbackPhotoModalOpen","openDeleteFallbackPhotoModal","closeDeleteFallbackPhotoModal","inputRef","handleSelectFile","isFallback","handleConfirmDelete","handleOpenFileSelector","click","fallbackPhoto","getPrivacyKey","primaryPrivacy","secondaryPrivacy","isPremiumRequired","secondaryScreen","PrivacyAddByPhone","PrivacySubsection","visibilityOptions","hasNobody","primaryExceptionLists","shouldShowDenied","shouldShowAllowed","descriptionText","headerText","prepareSubtitle","userIdsCount","chatIdsCount","userCountString","chatCountString","allowedString","blockString","handleVisibilityChange","allowedContactsScreen","deniedContactsScreen","addByPhone","phoneP2P","ARCHIVED_FOLDER_ID","SERVICE_NOTIFICATIONS_USER_ID","CUSTOM_PEER_PREMIUM","useFolderManagerForOrderedIds","PREMIUM_CATEGORY","setPrivacySettings","selectedContactIds","selectedCategoryTypes","setSearchQuery","isSubmitShown","setIsSubmitShown","newSelectedContactIds","setNewSelectedContactIds","newSelectedCategoryTypes","setNewSelectedCategoryTypes","folderAllOrderedIds","folderArchivedOrderedIds","filteredChats","handleSelectedCategoriesChange","handleSelectedContactIdsChange","updatedIds","isPremiumAllowed","categories","selectedCategories","categoryPlaceholderKey","onSelectedCategoriesChange","getCurrentPrivacySettings","ReactionStaticEmoji","selectedReaction","setDefaultReaction","emoticon","defaultReaction","DEFAULT_REACTION_SIZE","addedSetIds","shouldSuggestStickers","handleSuggestStickerSetOrderChange","handleSuggestStickersChange","stickerSets","CUSTOM_BG_CACHE_NAME","cacheApi","fetchBlob","useMediaWithLoadProgress","ProgressSpinner","localMediaHash","localBlobUrl","isLoadingRef","isLoadAllowed","setIsLoadAllowed","fullMedia","loadProgress","wasLoadDisabled","spinnerClassNames","cacheKeyRef","blob","save","isAllowed","selectChatFilters","SettingsFoldersChatFilters","SettingsFoldersEdit","ERROR_NO_CHATS","ERROR_NO_TITLE","SettingsFoldersMain","SettingsShareChatlist","openShareChatFolderModal","editChatFolder","addChatFolder","isCreating","saveState","newState","folder","payload","selectedChatIds","selectedChatTypes","includedChatTypes","folderUpdate","handleSaveFolder","handleSaveFilter","handleCreateFolder","handleEditFolder","handleAddIncludedChats","handleAddExcludedChats","handleShareFolder","noRequestNextScreen","handleOpenInvite","onCreateFolder","onEditFolder","onAddIncludedChats","onAddExcludedChats","onShareFolder","onOpenInvite","isOnlyInvites","onSaveFolder","onSaveFilter","CUSTOM_PEER_EXCLUDED_CHAT_TYPES","CUSTOM_PEER_INCLUDED_CHAT_TYPES","maxChats","openLimitReachedModal","chatFilter","chatTypes","isTouched","setIsTouched","shouldHideChatTypes","isChatList","newFilter","limit","includeFilters","excludeFilters","excludedChatIds","handleSelectedChatTypesChange","newFilters","isRoundCheckbox","STICKER_SIZE_FOLDER_SETTINGS","selectCanShareFolder","findIntersectionWithSet","EXCLUDED_CHAT_TYPES","INCLUDED_CHAT_TYPES","SUBMIT_TIMEOUT","INITIAL_CHATS_LIMIT","isRemoved","loadedActiveChatIds","loadedArchivedChatIds","invites","maxInviteLinks","maxChatLists","chatListCount","loadChatlistInvites","isEditingChatList","isIncludedChatsListExpanded","setIsIncludedChatsListExpanded","isExcludedChatsListExpanded","setIsExcludedChatsListExpanded","excludedChatTypes","visibleIncludedChatIds","visibleExcludedChatIds","allLoadedChatsSet","loadedIncludedChatIds","loadedExcludedChatIds","handleCreateInviteClick","handleEditInviteClick","renderChatType","chatType","typeKey","renderChats","visibleChatIds","isExpanded","allChatIds","leftChatsCount","clickHandler","FoldersNew","invite","el","getFolderDescriptionText","useFolderManagerForChatsCount","FOLDER_HEIGHT_PX","runThrottledForLoadRecommended","folderIds","recommendedChatFolders","maxFolders","loadRecommendedChatFolders","sortChatFolders","orderedFolderIds","dragOrderIds","prevFolderIds","chatsCountByFolderId","userFolders","handleCreateFolderFromRecommended","canCreateNewFolder","FoldersAll","isBlocked","allowSelection","recommended","selectCanInviteToChat","selectChatFolder","LinkField","createChatlistInvite","deleteChatlistInvite","editChatlistInvite","handleRevoke","unlockedIds","lockedIds","setSelectedIds","isFirstRenderRef","prevUrl","handleClickDisabled","chatsCount","link","withShare","onRevoke","lockedSelectedIds","onDisabledClick","device","decryptSession","SettingsPasscodeForm","SettingsPasscodeCongratulations","SettingsPasscodeEnabled","SettingsPasscodeStart","setPasscode","clearPasscode","setPasscodeError","clearPasscodeError","handleStartWizard","handleNewPassword","handleNewPasswordConfirm","handleChangePasswordCurrent","currentPasscode","handleChangePasswordNew","handleTurnOff","onStart","STICKER_SIZE_PASSCODE","fullReset","Congratulations","lockPreviewUrl","Lock","previewUrl","SettingsTwoFaPassword","SettingsTwoFaCongratulations","SettingsTwoFaEmailCode","SettingsTwoFaEnabled","SettingsTwoFaSkippableForm","SettingsTwoFaStart","waitingEmailCodeLength","updatePassword","checkPassword","clearTwoFaError","updateRecoveryEmail","provideTwoFaEmailCode","clearPassword","handleNewPasswordHint","handleNewPasswordEmail","email","currentPassword","handleChangePasswordConfirm","handleChangePasswordHint","handleRecoveryEmailCurrentPassword","handleRecoveryEmail","handleEmailCode","password","shouldConfirm","twoFaSettings","selectAnimatedEmoji","AnimatedIconFromSticker","ICON_SIZE","animatedEmoji","codeLength","focusDelayTimeoutMs","setValue","focus","handleInputChange","isConfirmShown","markIsConfirmShown","unmarkIsConfirmShown","handleSkip","handleSkipConfirm","action","isChatPublic","members","adminMembersById","entityType","pendingChannelId","setPendingChannelId","channelsIds","activeChatIds","adminIds","displayedMembersIds","displayedChannelIds","foundChannelIds","handleCloseButtonClick","handleSendIdList","confirmPrivateLinkChannelSelection","prevIds","handleSelectedMemberIdsChange","handleSelectedChannelIdsChange","newlyAddedIds","privateLinkChannelId","renderSearchField","buttons","requestedAttachBotInChat","cancelAttachBotInChat","callAttachBot","markIsShown","unmarkIsShown","startParam","handlePeerRecipient","recipientId","shouldRequestWriteAccess","cancelBotTrustRequest","markBotTrusted","isWriteAllowed","setIsWriteAllowed","handleBotTrustAccept","handleBotTrustDecline","closeDeleteChatFolderModal","deleteChatFolder","renderingFolder","isMyChatlist","hasMyInvites","handleDeleteFolderMessage","isConfirmedForChatlist","getReadableErrorText","dialogs","dismissDialog","acceptInviteConfirmation","renderInviteHeader","withVideo","renderInvite","participantsCount","isRequestNeeded","handleJoinClick","participantsText","joinText","requestToJoinText","renderContactRequest","contactRequest","handleConfirm","contact","renderError","getErrorHeader","hasErrorKey","renderDialog","dialog","isSlowMode","requestedDraft","openChatWithDraft","resetOpenChatWithDraft","handleSelectRecipient","getChatTitle","isManyMessages","isStory","isForwarding","openChatOrTopicWithReplyInDraft","setForwardChatOrTopic","exitForwardMode","forwardToSavedMessages","forwardStory","renderingIsStory","toChatId","forwardMessages","searchMessagesByDate","closeHistoryCalendar","handleJumpToDate","timestamp","valueOf","historyCalendarSelectedAt","getUserStatus","selectUserStatus","isByPhoneNumber","userStatus","updateContact","importContact","closeNewContactDialog","renderingUser","renderingIsByPhoneNumber","phone","setPhone","shouldSharePhoneNumber","setShouldSharePhoneNumber","canBeSubmitted","handlePhoneChange","renderAddContact","renderCreateContact","Notification","notifications","dismissNotification","localId","actionText","onDismiss","ensureProtocol","toggleSafeLinkModal","handleOpen","open","handleDismiss","renderingUrl","textParts","BOOST_PER_SENT_GIFT","formatCurrency","AvatarList","PremiumSubscriptionOption","isCompleted","gifts","boostPerSentGift","forUserIds","dialogRef","closeGiftPremiumModal","openInvoice","selectedMonthOption","setSelectedMonthOption","selectedUserQuantity","months","giftingUserList","selectedGift","gift","filteredGifts","fullMonthlyGiftAmount","basicGift","amount","currency","handlePremiumClick","showConfetti","left","userNameList","renderGiftTitle","renderGiftText","renderPremiumFeaturesLink","info","parts","premiumFeatures","center","isPrimary","renderBoostsPluralText","giftParts","part","subpart","boostIcon","renderSubscriptionGiftOptions","subscriptionOptions","subscriptionOption","fullMonthlyAmount","modalDialog","avatars","peers","isShiny","giftPremiumModal","boostsPerSentGift","GIVEAWAY_BOOST_PER_PREMIUM","GIVEAWAY_MAX_ADDITIONAL_CHANNELS","GIVEAWAY_MAX_ADDITIONAL_COUNTRIES","GIVEAWAY_MAX_ADDITIONAL_USERS","RangeSliderWithMarks","GiveawayTypeOption","GiftBlueRound","GiftGreenRound","GiftRedRound","GiveawayUsersRound","PremiumLogo","DEFAULT_CUSTOM_EXPIRE_DATE","MAX_ADDITIONAL_CHANNELS","DEFAULT_BOOST_COUNT","GIVEAWAY_IMG_LIST","selectedMemberList","selectedChannelList","giveawayBoostPerPremiumLimit","prepaidGiveaway","countrySelectionLimit","userSelectionLimit","closeGiveawayModal","launchPrepaidGiveaway","isCalendarOpened","openCalendar","closeCalendar","isCountryPickerModalOpen","openCountryPickerModal","closeCountryPickerModal","isEntityPickerModalOpen","openEntityPickerModal","closeEntityPickerModal","setEntityType","TYPE_OPTIONS","img","actions","isLink","onClickAction","customExpireDate","setCustomExpireDate","isHeaderHidden","setHeaderHidden","selectedUserCount","setSelectedUserCount","selectedGiveawayOption","setGiveawayOption","selectedSubscriberOption","setSelectedSubscriberOption","selectedUserIds","setSelectedUserIds","selectedChannelIds","setSelectedChannelIds","selectedCountriesIds","setSelectedCountriesIds","shouldShowWinners","setShouldShowWinners","shouldShowPrizes","setShouldShowPrizes","prizeDescription","setPrizeDescription","dataPrepaidGiveaway","setDataPrepaidGiveaway","boostQuantity","isRandomUsers","SUBSCRIBER_OPTIONS","monthQuantity","userCountOptions","uniqueUserCounts","from","quantity","boostChannelId","additionalChannelIds","isOnlyForNewSubscribers","countries","areWinnersVisible","untilDate","confirmLaunchPrepaidGiveaway","giveawayId","paymentPurpose","handleUserCountChange","handlePrizeDescriptionChange","userNames","handleAdd","handleChangeSubscriberOption","handleChangeTypeOption","handleExpireDateChange","handleSetCountriesListChange","handleSetIdsListChange","handleShouldShowWinnersChange","handleShouldShowPrizesChange","onClickActionHandler","renderTypeOptions","renderSubscribersOptions","subLabelClassName","renderSubscriptionOptions","isGiveaway","deleteParticipantsHandler","filteredChannelIds","channelId","logo","hiddenHeader","premiumHeaderText","prepaidImg","floatingBadge","floatingBadgeColor","floatingBadgeIcon","floatingBadgeValue","section","types","giveawayTitle","rangeCount","marks","subscription","addButton","addChannel","checkboxSection","prizesSection","prizesInput","subscriptionFooter","dateButton","floatingBadgeButtonColor","giveawayModal","giveawayBoostsPerPremium","giveawayAddPeersMax","giveawayCountriesMax","general","displayText","wrapper","input","optionImg","giveaway","contentText","hexToRgb","lerpRgb","COLORS","PremiumFeatureItem","isFontIcon","newIndex","colorA","colorB","r","g","fontIcon","toggleExtraClass","PREMIUM_BOTTOM_VIDEOS","PREMIUM_FEATURE_SECTIONS","PREMIUM_LIMITS_ORDER","requestMutation","PremiumLimitPreview","PremiumFeaturePreviewStickers","PremiumFeaturePreviewStories","PremiumFeaturePreviewVideo","PREMIUM_FEATURE_TITLES","double_limits","infinite_reactions","premium_stickers","animated_emoji","no_ads","voice_to_text","profile_badge","faster_download","more_upload","advanced_chat_management","animated_userpics","emoji_status","translations","stories","saved_tags","last_seen","message_privacy","effects","PREMIUM_FEATURE_DESCRIPTIONS","LIMITS_TITLES","channels","dialogFolderPinned","channelsPublic","savedGifs","stickersFaved","aboutLength","captionLength","dialogFilters","dialogFiltersChats","recommendedChannels","LIMITS_DESCRIPTIONS","BORDER_THRESHOLD","PremiumFeatureModal","promo","limits","premiumPromoOrder","onClickSubscribe","scrollContainerRef","currentSlideIndex","setCurrentSlideIndex","reverseAnimationSlideIndex","setReverseAnimationSlideIndex","isScrolling","startScrolling","stopScrolling","isScrolledToTop","setIsScrolledToTop","isScrolledToBottom","setIsScrolledToBottom","prevInitialSection","filteredSections","subscriptionButtonText","perMonthPrice","scrollLeft","scrollLeftOriginal","reverseIndex","prevElement","reverseElement","slide","handleLimitsScroll","clientHeight","scrollHeight","scrollContainer","handleSelectSlide","backButton","whiteBackButton","preview","noHeaderBorder","limitsContent","defaultLimit","premiumLimit","leftValue","rightValue","colorStepProgress","frame","videoSections","videoId","videos","videoThumbnail","isDown","isReverseAnimation","noFooterBorder","closePremiumGiftingModal","openGiftPremiumModal","displayedUserIds","handleSelectedUserIdsChange","selectPremiumLimit","PremiumAds","PremiumBadge","PremiumChats","PremiumEffects","PremiumEmoji","PremiumFile","PremiumLastSeen","PremiumLimits","PremiumMessagePrivacy","PremiumReactions","PremiumSpeed","PremiumStatus","PremiumStickers","PremiumTags","PremiumTranslate","PremiumVideo","PremiumVoice","LIMIT_ACCOUNTS","STATUS_EMOJI_SIZE","PREMIUM_FEATURE_COLOR_ICONS","fromUser","fromUserStatusEmoji","fromUserStatusSet","limitChannels","limitLinks","limitFolders","limitPins","premiumSlug","premiumBotUsername","isSuccess","isGift","toUser","monthsAmount","closePremiumModal","openTelegramLink","currentSection","setCurrentSection","selectedSubscriptionOption","setSubscriptionOption","handleOpenSection","handleResetSection","handleClickWithStartParam","handleChangeSubscriptionOption","foundOption","prevIsPremium","defaultOption","handleOpenStatusSet","stickerSetTitle","template","first","second","thumbCustomEmojiId","stickerSetLinkIcon","stickerSetLink","monthOption","subscribeButtonText","getHeaderText","getHeaderDescription","renderFooterText","footerText","statusText","entities","statusEntities","transition","statusEmoji","stickerSetText","list","noButton","primaryFooterText","premiumModal","fromUserId","toUserId","premiumInvoiceSlug","perMonth","isUserCountPlural","discount","giveawayWrapper","giveawayDiscount","lerp","PremiumLimitsCompare","COLOR_START","COLOR_END","start","rightStyle","MAX_UPLOAD_FILEPART_SIZE","formatFileSize","LIMIT_DESCRIPTION","uploadMaxFileparts","chatlistInvites","chatlistJoined","savedDialogsPinned","LIMIT_DESCRIPTION_BLOCKED","LIMIT_DESCRIPTION_PREMIUM","LIMIT_ICON","LIMIT_VALUE_FORMATTER","getLimiterDescription","limitType","defaultValue","premiumValue","valueFormatter","defaultValueFormatted","premiumValueFormatted","closeLimitReachedModal","startClosing","stopClosing","canUpgrade","limitBadge","limitIcon","limitValue","limitCompare","dialogButtons","x2","floatingBadgeTriangle","viewBox","line","leftText","rightText","cycleRestrict","EMOJI_SIZE_MULTIPLIER","EFFECT_SIZE_MULTIPLIER","MAX_EMOJIS","ENDED_DELAY","AnimatedCircleSticker","realIndex","onEnded","mediaDataAround","isActivated","isAnimated","animate","inanimate","circleSize","angle","PI","scale","cos","sin","handleEnded","effectSticker","offset","setOffset","setSize","renderedStickers","displayIndex","premium","useLayoutEffect","useDevicePixelRatio","drawGradientCircle","STORY_FEATURE_TITLES","stories_order","stories_stealth","stories_views","stories_timer","stories_save","stories_caption","stories_link","STORY_FEATURE_DESCRIPTIONS","STORY_FEATURE_ICONS","STORY_FEATURE_ORDER","CIRCLE_SIZE","CIRCLE_SEGMENTS","CIRCLE_READ_SEGMENTS","circleRef","dpr","segmentsCount","readSegmentsCount","readSegmentColor","maxSize","forPremiumPromo","circle","features","scrolled","mobile","DeviceFrame","thumbnailRef","reverse","down","video","getChatMediaMessageIds","getMessagePaidMedia","isChatAdmin","selectChatMessages","selectChatScheduledMessages","selectCurrentChatMediaSearch","selectCurrentSharedMediaSearch","selectListedIds","selectOutlyingListByMessageId","selectPerformanceSettingsValue","selectScheduledMessage","stopCurrentAudio","captureEscKeyListener","disableDirectTextInput","enableDirectTextInput","MEDIA_VIEWER_MEDIA_QUERY","renderMessageText","getViewableMedia","getMediaViewerItem","animateClosing","animateOpening","useElectronDrag","useForceUpdate","dispatchHeavyAnimationEvent","exitPictureInPictureIfNeeded","usePictureInPictureSignal","dispatchPriorityPlaybackEvent","useMediaProps","ReportModal","ShowTransition","MediaViewerActions","MediaViewerSlides","SenderInfo","collectedMessageIds","canUpdateMedia","avatarOwner","chatMessages","standaloneMedia","mediaIndex","withAnimation","shouldSkipHistoryAnimations","withDynamicLoading","isLoadingMoreMedia","isSynced","closeMediaViewer","openForwardMenu","toggleChatInfo","searchChatMediaMessages","animationKey","senderId","prevSenderId","headerAnimation","isGhostAnimation","isReportModalOpen","openReportModal","closeReportModal","currentItem","media","isSingle","isPhoto","bestImageData","bestData","dimensions","isGif","isFromSharedMedia","isAvatar","delay","canReport","isVisible","messageMediaIds","getIsPictureInPicture","stopPriorityPlayback","body","classList","toggle","forceUpdate","mql","matchMedia","addEventListener","removeEventListener","prevMessage","prevIsHidden","prevOrigin","prevItem","prevBestImageData","isForMediaViewer","hasFooter","shouldAnimateOpening","handleFooterClick","force","forceSyncOnIOs","handleForward","fromChatId","loadMoreItemsIfNeeded","currentMediaMessageId","getNextItem","fromMedia","fromMediaIndex","nextIndex","fromAvatarOwner","photos","fromMessage","paidMedia","extendedMedia","nextMessageId","nextMessage","openMediaViewerItem","itemChatId","itemMessageId","itemStandaloneMedia","isAvatarView","forceOnHeavyAnimation","handleBeforeDelete","mediaCount","prevMedia","shouldAnimateFirstRender","noCloseTransition","onBeforeDelete","onReport","onCloseMediaViewer","onForward","subject","avatarOwnerId","selectItem","onFooterClick","mediaViewer","ScheduledAlbum","ScheduledInline","isOriginInline","Inline","isOriginAlbum","Album","currentSearch","currentSegment","SharedMedia","outlyingList","getMediaFilename","getMediaFormat","getMediaHash","selectActiveDownloads","selectIsChatProtected","selectIsMessageProtected","useZoomChange","canDelete","canUpdate","messageListType","isDeleteModalOpen","openDeleteModal","closeDeleteModal","getZoomChange","setZoomChange","downloadMedia","cancelMediaDownload","updateProfilePhoto","updateChatPhoto","isMessage","fileName","downloadProgress","handleDownloadClick","handleZoomOut","zoomChange","change","handleZoomIn","handleUpdate","avatarPhoto","MenuButton","renderDeleteModals","renderDownloadButton","href","menuItems","isForwardingAllowed","children","noCross","canDeleteMessage","isCurrentAvatar","avatarHash","canDeleteAvatar","stopEvent","ARE_WEBCODECS_SUPPORTED","calculateMediaViewerDimensions","useControlsSignal","MediaViewerFooter","VideoPlayer","MOBILE_VERSION_CONTROL_WIDTH","MediaViewerContent","textMessage","playbackRate","isMoving","isLocal","isVideoAvatar","mediaSize","toggleControls","toggleControlsOnMove","renderPhoto","posterData","posterSize","fileSize","isMediaViewerOpen","isPreviewDisabled","shouldCloseOnClick","isClickDisabled","isForceMobileVersion","shouldForceMobileVersion","onMouseMove","renderVideoPreview","isForVideo","imageSize","canDrag","wrapperStyle","videoStyle","RESIZE_THROTTLE_MS","isMultiline","setIsMultiline","getIsVisible","footerContent","checkIsMultiline","useSignal","animateNumber","timingFunctions","IOS_SCREEN_EDGE_THRESHOLD","SWIPE_DIRECTION_THRESHOLD","SWIPE_DIRECTION_TOLERANCE","clamp","useDebouncedCallback","useSignalRef","useFullscreenStatus","easeOutCubic","easeOutQuart","SWIPE_X_THRESHOLD","SWIPE_Y_THRESHOLD","SLIDES_GAP","DEBOUNCE_SELECT_MEDIA","DEBOUNCE_SWIPE","DEBOUNCE_ACTIVE","DOUBLE_TAP_ZOOM","CLICK_Y_THRESHOLD","HEADER_HEIGHT","MAX_ZOOM","MIN_ZOOM","cancelAnimation","cancelZoomAnimation","SwipeDirection","activeSlideRef","leftSlideRef","rightSlideRef","lastTransformRef","swipeDirectionRef","initialContentRectRef","isReleasedRef","setIsActive","prevZoomChangeRef","isFullscreen","isMouseDown","setIsMouseDown","getTransform","setTransform","transformRef","getActiveItem","setActiveItem","activeItemRef","isScaled","activeItem","windowHeight","isResizing","getControlsVisible","setControlsVisible","lockControls","shouldBeReplaced","selectItemDebounced","clearSwipeDirectionDebounced","setIsActiveDebounced","shouldCloseOnVideo","clickXThreshold","handleControlsVisibility","isFooter","transform","getTransformStyle","lastTransform","lastDragOffset","lastZoomCenter","panDelta","lastGestureTime","setLastGestureTime","changeSlide","cActiveItem","nextItem","to","timing","onUpdate","changeSlideOnClick","hasNextSlide","isInThreshold","calculateOffsetBoundaries","offsetTop","initialContentRect","inBoundsX","inBoundsY","centerX","centerY","minOffsetX","maxOffsetX","minOffsetY","maxOffsetY","bottom","absX","absY","s1","scaleFactor","x1","y1","k","Vx","Vy","dirX","cleanup","isNotPassive","withNativeDrag","excludedClosestSelector","minZoom","maxZoom","doubleTapZoom","withWheelDrag","checkIfControlTarget","captureEvent","cancelDrag","dragOffsetX","dragOffsetY","touches","absOffsetX","absOffsetY","Vertical","Horizontal","onZoom","zoom","zoomFactor","initialCenterX","initialCenterY","currentCenterX","currentCenterY","offsetX","offsetY","scaledCenterX","scaledCenterY","scaleOffsetX","scaleOffsetY","checkIfInsideSelector","onDoubleClick","hasZoomChanged","steps","prevValue","wheelEvent","WheelEvent","deltaY","ctrlKey","dispatchEvent","hasPrev","hasNext","toFixed","element","selector","matches","createVideoPreviews","getPreviewDimensions","formatMediaDuration","useThrottledSignal","useCurrentTimeSignal","useVideoWaitingSignal","LOCK_TIMEOUT","SeekLine","bufferedRanges","isReady","isPlaying","onSeek","onSeekStart","seekerRef","getCurrentTimeSignal","getIsWaiting","getCurrentTime","getSelectedTime","setSelectedTime","getPreviewOffset","setPreviewOffset","getPreviewTime","setPreviewTime","isLockedRef","isPreviewVisible","setPreviewVisible","isSeeking","setIsSeeking","previewCanvasRef","previewRef","progressRef","previewTimeRef","previewSize","setPreview","time","remaining","innerText","seeker","seekerSize","getPreviewProps","MouseEvent","t","o","stopAnimation","handleSeek","handleStartSeek","handleStopSeek","handleSeekMouseMove","handleSeekMouseLeave","previewCanvas","previewTime","previewTimeText","track","end","buffered","played","seeking","isChatGroup","selectSender","formatMediaDateTime","BULLET","owner","isFallbackAvatar","handleFocusMessage","formattedDate","messageSender","fallbackAvatar","safePlay","IS_YA_BROWSER","useUnsupportedMedia","usePictureInPicture","useVideoCleanup","useFullscreen","VideoPlayerControls","MAX_LOOP_DURATION","MIN_READY_STATE","REWIND_STEP","setMediaViewerVolume","setMediaViewerMuted","setMediaViewerPlaybackRate","setMediaViewerHidden","videoRef","setIsPlaying","setFullscreen","exitFullscreen","isLooped","handleEnterFullscreen","handleLeaveFullscreen","isPictureInPictureSupported","enterPictureInPicture","isInPictureInPicture","handleVideoMove","handleVideoLeave","bounds","clientX","clientY","bufferedProgress","isUnsupported","shouldRenderPlayButton","playButtonClassNames","pause","togglePlayState","setCurrentTime","setIsVideoWaiting","handleTimeUpdate","readyState","currentTime","handleFullscreenChange","position","newVolume","handleVolumeMuted","handlePlaybackRateChange","newPlaybackRate","rewind","newTime","isFinite","shouldToggleControls","onMouseOut","controlsList","onWaiting","onPause","onTimeUpdate","isFullscreenSupported","onChangeFullscreen","onPictureInPictureChange","onPlayPause","onVolumeClick","onVolumeChange","onPlaybackRateChange","PLAYBACK_RATES","HIDE_CONTROLS_TIMEOUT_MS","isPlaybackMenuOpen","openPlaybackMenu","closePlaybackMenu","trunc","getIsSeeking","setVisibility","timeout","clearTimeout","add","remove","handleSeekStart","volumeIcon","bold","renderTime","rate","getMessageContent","isDocumentPhoto","isDocumentVideo","params","webPage","webPagePhoto","webPageVideo","extendedPhoto","extendedVideo","MESSAGE_CONTENT_SELECTOR","getMessageHtmlId","applyStyles","isElementInViewport","windowSize","calculateDimensions","getMediaViewerAvailableDimensions","mediaEl","fromImage","getNodes","get","availableWidth","availableHeight","toWidth","toHeight","toLeft","toTop","getTopOffset","fromTop","fromLeft","fromWidth","fromHeight","uncovered","uncover","fromTranslateX","fromTranslateY","fromScaleX","fromScaleY","ghost","createGhost","applyShape","appendChild","clearShape","contains","removeChild","toImage","targetTop","shouldFadeOut","isMessageImageFullyVisible","existingGhost","getElementsByClassName","scaleX","scaleY","transformOrigin","opacity","source","Image","oncontextmenu","HTMLVideoElement","poster","ProfileAvatar","SettingsAvatar","profileInfo","cloneNode","realWidth","realHeight","srcWidth","srcHeight","imageEl","messageListElement","imgOffsetTop","parentElement","topOffsetRem","containerSelector","mediaSelector","MiddleHeaderAvatar","SuggestedAvatar","StarsTransaction","mediaEls","querySelectorAll","objectFit","createSignal","useDerivedSignal","getIsLocked","setIsLocked","getVisible","getMediaFileSize","getMediaThumbUri","getPhotoFullDimensions","getVideoAvatarMediaHash","getVideoDimensions","AVATAR_FULL_DIMENSIONS","VIDEO_AVATAR_FULL_DIMENSIONS","useBlurSync","isDocument","isRound","isFromSearch","getMediaOrAvatarHash","isFull","pictogramBlobUrl","previewMediaHash","fullMediaBlobUrl","getIsVideoWaiting","selectLanguageCode","selectRequestedChatTranslationLanguage","selectRequestedMessageTranslationLanguage","activeTranslationLanguage","currentLanguageCode","requestMessageTranslation","closeChatLanguageModal","requestChatTranslation","toLanguageCode","translationLanguage","translateLanguages","filteredDisplayedLanguages","listItem","highlight","chatLanguageModal","selectCanDeleteSelectedMessages","selectCurrentChat","DeleteSelectedMessageModal","selectedMessageIds","exitMessageSelectMode","selectedMessages","selectAnimatedEmojiEffect","HIDE_ANIMATION_DURATION","PLAYING_DURATION","EFFECT_SIZE","effectAnimationId","activeEmojiInteraction","stopActiveEmojiInteraction","isHiding","startHiding","startPlaying","timeoutRef","stop","handleCancelAnimation","dispatchHeavyAnimationStop","effectHash","effectTgsUrl","startSize","isReversed","quality","animatedEffect","REPLIES_USER_ID","getCanAddContact","getCanDeleteChat","getCanManageTopic","getHasAdminRight","getIsSavedDialog","isUserRightBanned","selectCanManage","selectCanTranslateChat","selectIsRightColumnShown","disableScrolling","enableScrolling","usePrevDuringAnimation","DeleteChatModal","MenuSeparator","BOT_BUTTONS","help","CLOSE_MENU_ANIMATION_DURATION","withExtraActions","anchor","botCommands","withForumActions","isTopic","isForumAsMessages","isChatInfoShown","canStartBot","canSubscribe","canSearch","canCall","canMute","canViewStatistics","canViewBoosts","pendingJoinRequests","canLeave","canEnterVoiceChat","canCreateVoiceChat","canReportChat","canDeleteChat","canGiftPremium","hasLinkedChat","canAddContact","canCreateTopic","canEditTopic","canManage","isRightColumnShown","isBot","savedDialog","canShowBoostModal","onJoinRequestsClick","onSubscribeChannel","onSearchClick","onAsMessagesClick","enterMessageSelectMode","sendBotCommand","restartBot","requestMasterAndJoinGroupCall","createGroupCall","openLinkedChat","openAddContactDialog","requestMasterAndRequestCall","toggleStatistics","openBoostStatistics","openThreadWithInfo","openCreateTopicPanel","openEditTopicPanel","toggleManagement","togglePeerTranslations","setViewForumAsMessages","openBoostModal","setIsMenuOpen","shouldCloseFast","setShouldCloseFast","setIsDeleteModalOpen","setIsReportModalOpen","setIsMuteModalOpen","chatIdToCRMEidMap","JSON","parse","localStorage","getItem","chatEid","eid","isViewGroupInfoShown","handleReport","handleDelete","closeMenu","handleViewGroupInfo","handleStartBot","command","handleRestartBot","handleUnmuteClick","handleMuteClick","handleCreateTopicClick","handleEditClick","handleEditTopicClick","handleViewAsTopicsClick","handleAddToCRM","stringify","parent","postMessage","handleOpenInCRM","handleEnterVoiceChatClick","handleLinkedChatClick","handleGiftPremiumClick","handleAddContactClick","handleSubscribe","handleVideoCall","handleCall","handleStatisticsClick","handleBoostClick","handleEnableTranslations","handleSelectMessages","handleOpenAsMessages","handleBlock","handleUnblock","botButtons","cmd","deleteTitle","isSavedDialog","isRestricted","isMainThread","currentChatId","currentThreadId","chatBot","userFullInfo","fullInfo","premiumGifts","isCreator","isTranslationDisabled","linkedChatId","botInfo","commands","selectCanDownloadSelectedMessages","selectCanForwardMessages","selectCanReportSelectedMessages","selectHasProtectedMessage","selectSelectedMessagesCount","captureKeyboardListeners","useCopySelectedMessages","canPost","selectedMessagesCount","canDeleteMessages","canReportMessages","canDownloadMessages","canForwardMessages","hasProtectedMessage","isAnyModalOpen","openForwardMenuForSelectedMessages","downloadSelectedMessages","copySelectedMessages","handleExitMessageSelectMode","onBackspace","onDelete","onEsc","handleCopy","handleDownload","prevSelectedMessagesCount","renderingSelectedMessagesCount","formattedMessagesCount","renderButton","canForward","isForwardModalOpen","isModalShown","requestedAttachBotInstall","selectCurrentTextSearch","getDayStartAt","SearchInput","SavedTagButton","runDebouncedForSearch","MobileSearchFooter","savedTags","searchTag","isHistoryCalendarOpen","setLocalTextSearchQuery","setLocalTextSearchTag","searchTextMessagesLocal","closeLocalTextSearch","openHistoryCalendar","loadSavedReactionTags","tagsRef","focusedIndex","setFocusedIndex","hasQueryData","visualViewport","mainEl","activeElement","pageTop","blur","searchInput","tags","hasTags","areTagsDisabled","handleMessageSearchQueryChange","newQuery","handleTagClick","tag","handleUp","newFocusIndex","handleDown","handleCloseLocalTextSearch","containerId","withCount","isChosen","savedTag","results","savedReactionTags","formatIntegerCompact","MIN_REACTIONS_COUNT_FOR_FILTERS","reactors","loadReactors","closeReactorListModal","chosenTab","setChosenTab","canShowFilters","chatIdRef","handleCloseAnimationEnd","allReactions","uniqueReactions","seenByUserIds","nextOffset","reactionsCount","flatMap","peerReactions","reactor","seenByUser","addedDate","reactorModal","BASE_EMOJI_KEYWORD_LANG","EDITABLE_INPUT_MODAL_ID","SUPPORTED_AUDIO_CONTENT_TYPES","SUPPORTED_IMAGE_CONTENT_TYPES","SUPPORTED_VIDEO_CONTENT_TYPES","getAttachmentType","removeAllSelections","getFilesFromDataTransferItems","getHtmlTextLength","useGetSelectionRange","useCustomEmojiTooltip","useEmojiTooltip","useMentionTooltip","AttachmentModalItem","MessageInput","SymbolMenuButton","ATTACHMENT_MODAL_INPUT_ID","DROP_LEAVE_TIMEOUT_MS","MAX_LEFT_CHARS_TO_SHOW","attachments","getHtml","editingMessage","canShowCustomSendMenu","captionLimit","groupChatMembers","recentEmojis","baseEmojiKeywords","emojiKeywords","isForMessage","customEmojiForEmoji","attachmentSettings","shouldSuggestCompression","shouldForceCompression","shouldForceAsFile","isForCurrentMessageList","forceDarkTheme","onAttachmentsUpdate","onCaptionUpdate","onSend","onFileAppend","onClear","onSendSilent","onSendScheduled","onRemoveSymbol","onEmojiSelect","addRecentCustomEmoji","addRecentEmoji","updateAttachmentSettings","mainButtonRef","hideTimeoutRef","prevAttachments","renderingAttachments","isEditing","isInAlbum","groupedId","isEditingMessageFile","notEditingFile","isSymbolMenuOpen","openSymbolMenu","closeSymbolMenu","shouldSendCompressed","setShouldSendCompressed","shouldCompress","isSendingCompressed","shouldSendGrouped","setShouldSendGrouped","isInvertedMedia","handleAttachmentsScroll","areAttachmentsNotScrolled","isAtEnd","areAttachmentsScrolledToBottom","handleCaptionScroll","isCaptionNotScrolled","renderingIsOpen","isHovered","markHovered","unmarkHovered","hasMedia","hasOnlyMedia","onlyMedia","quick","oneMedia","hasSpoiler","isEverySpoiler","areAllSpoilers","shouldSendAsSpoiler","hasOneSpoiler","getSelectionRange","isEmojiTooltipOpen","filteredEmojis","filteredCustomEmojis","insertEmoji","closeEmojiTooltip","isCustomEmojiTooltipOpen","insertCustomEmoji","closeCustomEmojiTooltip","isMentionTooltipOpen","closeMentionTooltip","insertMention","mentionFilteredUsers","setIsInvertedMedia","isCustomSendMenuOpen","sendAttachments","shouldSendScheduled","send","handleSendSilent","handleSendClick","handleScheduleClick","handleDragLeave","relatedTarget","toTarget","fromTarget","dropTarget","hovered","handleFilesDrop","dataTransfer","handleDragOver","handleDocumentSelect","handleEnableSpoilers","handleDisableSpoilers","handleToggleSpoiler","attachment","mainButton","leftChars","leftCharsBeforeLimit","isQuickGallery","areAllPhotos","areAllVideos","areAllAudios","everyPhoto","mimeType","everyVideo","everyAudio","hasAnySpoilerable","isMultiple","canInvertMedia","isBottomDividerShown","headerBorder","symbolMenuOpen","noBackdropClose","onDragEnter","onDrop","onDragOver","onDragLeave","attachmentsBottomPadding","shouldDisplayCompressed","shouldDisplayGrouped","uniqueId","onToggleSpoiler","captionWrapper","captionTopBorder","filteredUsers","onInsertUserName","caption","isAttachmentModal","canSendPlainText","isAttachmentModalInput","customEmojiPrefix","editableInputId","canAutoFocus","shouldSuppressFocus","onSuppressedFocus","sendWrapper","canSchedule","onSendSchedule","keywords","forEmoji","getFileExtension","MediaSpoiler","BLUR_CANVAS_SIZE","displayType","getDisplayType","handleSpoilerClick","filename","extension","previewData","actionItem","deleteFile","shouldSkipGrouping","shouldDisplaySpoiler","shouldRenderOverlay","rootClassName","single","noGrouping","overlay","useMouseInside","ChatCommand","handleMouseEnter","handleMouseLeave","onMouseEnter","onMouseLeave","botCommand","withAvatar","freezeWhenClosed","setTooltipItemVisible","useKeyboardNavigation","quickReplies","quickReplyMessages","self","sendQuickReply","handleSendCommand","handleSendQuickReply","quickReplyId","quickRepliesWithDescription","reply","topMessageId","shortcut","handleKeyboardSelect","keyboardNavigationItems","selectedCommandIndex","isEmpty","CUSTOM_EMOJI_SIZE","CustomEmojiButton","COMPOSER_EMOJI_SIZE_PICKER","customEmoji","clearCustomEmojiForEmoji","prevStickers","displayedStickers","handleCustomEmojiSelect","ce","emojiButton","useLang","ReactionSelector","isOpenToBottom","onSendWhenOnline","onRemoveEffect","withEffects","hasCurrentEffect","effectReactions","allAvailableReactions","onToggleReaction","isInSavedMessages","isInStoryViewer","openEffectPicker","displayScheduleUntilOnline","setDisplayScheduleUntilOnline","oldLang","areItemsHidden","hideItems","showItems","markIsReady","unmarkIsReady","handleOpenMessageEffectsPicker","currentReactions","isForEffects","onShowMore","BASE_URL","IS_PACKAGED_ELECTRON","handleEmojiLoad","LOADED_EMOJIS","IS_EMOJI_SUPPORTED","EmojiButton","native","image","isLoaded","names","loading","useOnIntersect","EMOJIS_PER_ROW_ON_DESKTOP","EMOJI_MARGIN","EMOJI_VERTICAL_MARGIN","EMOJI_VERTICAL_MARGIN_MOBILE","MOBILE_CONTAINER_PADDING","EmojiCategory","category","allEmojis","emojisPerRow","displayedEmoji","MENU_TRANSITION_DURATION","uncompressEmoji","ICONS_BY_CATEGORY","recent","people","nature","foods","activity","places","objects","symbols","flags","OPEN_ANIMATION_DELAY","SMOOTH_SCROLL_DISTANCE","categoryIntersections","emojiDataPromise","emojiRawData","emojiData","EmojiPicker","setCategories","setEmojis","activeCategoryIndex","setActiveCategoryIndex","allCategories","themeCategories","exec","ensureEmojiData","selectCategory","categoryEl","renderCategoryButton","containerClassName","findInViewport","isFullyVisible","VIEWPORT_MARGIN","EMOJI_BUTTON_WIDTH","CLOSE_DURATION","setItemVisible","visibleIndexes","allElements","listEmojis","handleSelectEmoji","handleCustomEmojiClick","selectedIndex","isHorizontal","shouldRemoveSelectionOnReset","prevSelectedIndex","INTERSECTION_DEBOUNCE","GifPicker","canSendGifs","onGifSelect","loadSavedGifs","saveGif","debounceMs","shouldUnsave","gifs","saved","extractCurrentThemeParams","ArticleResult","GifResult","MediaResult","StickerResult","INTERSECTION_DEBOUNCE_MS","isGallery","inlineBotResults","switchPm","switchWebview","onSelectResult","startBot","requestSimpleWebView","renderedIsGallery","noArrowNavigation","handleSendPm","param","handleOpenWebview","buttonText","isFromSwitchWebView","prevInlineBotResults","renderedInlineBotResults","renderSwitchPm","renderSwitchWebview","renderContent","inlineBotResult","inlineResult","isForGallery","sensitiveArea","handleUserSelect","forceFocus","handleSelectMention","member","selectedMentionIndex","shouldSelectOnTab","shouldSaveSelectionOnUpdateItems","prevChatMembers","renderedChatMembers","requestMeasure","requestNextMutation","parseHtmlAsFormattedText","MAX_LIST_HEIGHT","MAX_OPTIONS_COUNT","MAX_OPTION_LENGTH","MAX_QUESTION_LENGTH","MAX_SOLUTION_LENGTH","isQuiz","shouldBeAnonymous","questionInputRef","optionsListRef","question","setQuestion","setOptions","isAnonymous","setIsAnonymous","isMultipleAnswers","setIsMultipleAnswers","isQuizMode","setIsQuizMode","solution","setSolution","correctOption","setCorrectOption","hasErrors","setHasErrors","handleSolutionChange","focusInput","addNewOption","newOptions","scrollTo","behavior","handleCreate","isNoCorrectOptionError","answers","correct","questionTrimmed","substring","optionsTrimmed","summary","isPublic","multipleChoice","quiz","correctAnswers","solutionEntities","updateOption","removeOption","handleCorrectOptionChange","handleIsAnonymousChange","handleMultipleAnswersChange","handleQuizModeChange","handleKeyPress","keyCode","handleQuestionChange","getQuestionError","getOptionsError","renderOptions","onKeyPress","renderRadioOptions","renderQuizNoOptionError","noReplaceNewlines","selectedSendAsId","sendAsPeerIds","saveDefaultSendAs","markMouseInside","sendAsId","selectedSendAsIndex","avatarClassName","noFake","membersCount","CHAT_STICKER_SET_ID","selectShouldLoopStickers","useSendMessageAction","StickerPicker","recentStickers","effectStickers","effectEmojis","chatStickerSetId","loadRecentStickers","addRecentSticker","unfaveSticker","faveSticker","removeRecentSticker","sendMessageAction","effectSets","existingAddedSetIds","shouldRenderContents","handleStickerSelect","handleStickerUnfave","handleStickerFave","handleMouseMove","handleRemoveRecentSticker","favorite","effect","getStickerMediaHash","getFirstLetters","IS_WEBM_SUPPORTED","useColorFilter","useCustomEmoji","hasVideoThumb","hasAnimatedThumb","hasStaticThumb","colorFilter","hasOnlyStaticThumb","shouldFallbackToStatic","staticHash","staticMediaData","mediaHash","isPriority","UnfreezableMenu","SymbolMenuFooter","SYMBOL_MENU_TAB_TITLES","SymbolMenuTabs","STICKERS_TAB_INDEX","isMessageComposer","isLeftColumnShown","isBackgroundTranslucent","onSearchOpen","setRecentEmojis","setRecentCustomEmojis","recentEmojisRef","recentCustomEmojisRef","canUpdateStickerSetsOrder","isFrom","Emoji","GIFs","mobileClassName","SYMBOL_MENU_TAB_ICONS","renderTabButton","handleSearchOpen","ApiMessageEntityTypes","EDITABLE_INPUT_ID","getKeyFromEvent","INPUT_CUSTOM_EMOJI_SELECTOR","useVirtualBackdrop","TEXT_FORMAT_BY_TAG_NAME","B","STRONG","I","EM","U","DEL","CODE","SPAN","fragmentEl","anchorPosition","selectedRange","setSelectedRange","linkUrlInputRef","isLinkControlOpen","openLinkControl","closeLinkControl","linkUrl","setLinkUrl","isEditingLink","setIsEditingLink","inputClassName","setInputClassName","selectedTextFormats","setSelectedTextFormats","selectedFormats","commonAncestorContainer","textFormat","tagName","restoreSelection","selection","getSelection","removeAllRanges","addRange","updateSelectedRange","getRangeAt","getSelectedText","shouldDropCustomEmoji","replaceChildren","cloneContents","replaceWith","getAttribute","innerHTML","getSelectedElement","updateInputStyles","scrollWidth","handleLinkUrlChange","getFormatButtonClassName","fKey","monospace","strikethrough","handleSpoilerText","spoiler","Spoiler","textContent","execCommand","handleBoldText","handleItalicText","italic","handleUnderlineText","underline","handleStrikethroughText","handleMonospaceText","handleLinkUrlConfirm","formattedLinkUrl","encodeURI","HANDLERS_BY_KEY","u","m","p","altKey","metaKey","handleContainerKeyDown","linkUrlConfirmClassName","autoComplete","fixImageContent","div","html","br","selectedItemIndex","setSelectedItemIndex","getSelectedIndex","handleArrowKey","handleItemSelect","shiftKey","isSelectionOutOfRange","onUp","onDown","onLeft","onRight","onTab","BaseResult","webThumbnail","thumbUrl","thumbnailDataUrl","decoding","_gif","STICKER_SIZE_INLINE_BOT_RESULT","formatCardExpiry","formatCardNumber","useHotkeys","PREVIEW_AVATAR_COUNT","areReactionsEmpty","getMessageDownloadableMedia","hasMessageTtl","isActionMessage","isMessageLocal","isOwnMessage","selectCanTranslateMessage","selectIsMessageUnread","selectIsReactionPickerOpen","selectMessageCustomEmojiSets","selectMessageTranslations","getSelectionAsFormattedText","isSelectionRangeInsideMessage","MessageContextMenu","customEmojiSetsInfo","targetHref","noOptions","canSendNow","hasFullInfo","canReschedule","canReply","canPin","repliesThreadInfo","canUnpin","canShowReactionsCount","canShowReactionList","canEdit","enabledReactions","maxUniqueReactions","canFaveSticker","canUnfaveSticker","canCopy","canCopyLink","canSelect","canSaveGif","canRevote","canClosePoll","canLoadReadDate","shouldRenderShowWhen","noReplies","canShowSeenBy","isMessageTranslated","canShowOriginal","canSelectLanguage","isReactionPickerOpen","updateDraftReplyInfo","setEditingId","toggleMessageSelection","sendScheduledMessages","rescheduleMessage","loadSeenBy","openSeenByModal","openReactorListModal","loadFullChat","copyMessagesByIds","cancelPollVote","closePoll","toggleReaction","showOriginalMessage","openChatLanguageModal","openMessageReactionPicker","loadOutboxReadDate","copyMessageLink","isPinModalOpen","setIsPinModalOpen","isClosePollDialogOpen","openClosePollDialog","closeClosePollDialog","canQuoteSelection","setCanQuoteSelection","hasCustomEmoji","readDate","seenByRecentPeers","uniqueReactors","msg","downloadableMedia","selectionRange","isMessageTextSelected","collapsed","selectionText","startOffset","endOffset","closePinModal","handleReply","replyToMsgId","quoteText","replyToPeerId","handleOpenThread","handleEdit","handlePin","handleUnpin","handleFaveSticker","handleUnfaveSticker","handleCancelVote","handlePollClose","handleSelectMessage","childMessageIds","withShift","handleScheduledMessageSend","handleRescheduleMessage","handleOpenCalendar","handleOpenSeenByModal","handleOpenReactorListModal","handleCopyMessages","shouldIncludeThread","shouldIncludeGrouped","handleCopyNumber","handleSaveGif","handleToggleReaction","shouldAddToRecent","handleReactionPickerOpen","handleTranslate","handleShowOriginal","handleSelectLanguage","reportMessageIds","scheduledMaxDate","canQuote","onOpenThread","onReply","onEdit","onPin","onFaveSticker","onUnfaveSticker","onReschedule","onCopyLink","onCopyMessages","onCopyNumber","onDownload","onSaveGif","onCancelVote","onClosePoll","onShowSeenBy","onShowReactors","onReactionPickerOpen","onTranslate","onShowOriginal","onSelectLanguage","detectedLanguage","seenByExpiresAt","seenByMaxChatMembers","readDateExpiresAt","isOwn","isMessageUnread","isReadDateRestricted","isReadDateRestrictedByMe","isScheduled","hasTtl","isAction","canSeeList","canCopyNumber","customEmojiSetsNotFiltered","translationRequestLanguage","hasTranslation","isChatTranslated","isForbidden","getMessageCopyOptions","Skeleton","ReadTimeMenuItem","SCROLLBAR_WIDTH","REACTION_SELECTOR_WIDTH_REM","noTransition","onAboutAds","onSponsoredHide","onSponsorInfo","onSponsoredReport","openCustomEmojiSets","scrollableRef","noReactions","withReactions","isSponsoredMessage","isDesktop","seenByDatesCount","handleAfterCopy","handleOpenCustomEmojiSets","copyOptions","extraHeightAudioPlayer","pinnedElement","extraHeightPinned","extraPaddingX","extraTopPadding","extraMarginTop","menuElMinWidth","withScroll","handleOpenMessageReactionPicker","bubbleStyle","messagesCount","withPreventDefaultOnMouseDown","inline","withWrap","sponsorInfo","menuSeparatorSize","closeContextMenu","openPrivacySettingsNoticeModal","shouldRenderSkeleton","handleOpenModal","skeleton","onReportAd","showDialog","handleAboutAdsOpen","handleSponsoredHide","handleSponsorInfo","additionalInfo","handleReportSponsoredMessage","getMessageContact","getMessagePhoto","getMessageText","getMessageWebPagePhoto","getMessageWebPageVideo","getPhotoMediaHash","hasMediaLocalBlobUrl","getMessageTextWithSpoilers","CLIPBOARD_ITEM_SUPPORTED","copyHtmlToClipboard","copyImageToClipboard","getMessageIdsForSelectedText","mediaLoader","IS_SAFARI","afterEffect","canImageBeCopied","Promise","resolve","fetch","hasSelection","anchorNode","parentNode","checkMessageHasSelection","getCopyLabel","clipboardText","shouldRenderAsHtml","selectionParentNode","selectedMessageElement","ALLOWED_QUOTE_ENTITIES","Bold","Italic","Underline","Strike","range","getSelectionAsHtml","formattedText","stripEntitiesForQuote","clonedSelection","wrapHtmlWithMarkupTags","entity","nodeType","Node","ELEMENT_NODE","currentElement","ancestor","TEXT_NODE","getStoryKey","buildCustomEmojiHtml","getIsMobile","ReactionPickerLimited","FULL_PICKER_SHIFT_DELTA","LIMITED_PICKER_SHIFT_DELTA","REACTION_SELECTOR_WIDTH","withCustomReactions","sendAsMessage","availableEffectById","closeReactionPicker","sendStoryReaction","saveEffectInDraft","requestEffectInComposer","renderedMessageId","renderedChatId","renderedStoryPeerId","renderedStoryId","storedPosition","renderingPosition","isDense","deltaX","handleToggleCustomReaction","handleStoryReactionSelect","customEmojiMessage","isReaction","availableEffects","effectId","effectStickerId","chosenOrder","menu","onlyReactions","storyMenu","backdropExcludedSelector","storyPeerId","reactionPicker","areSomeReactionsAllowed","areCustomReactionsAllowed","areCustomAllowed","sortReactions","REACTION_SIZE","GRID_GAP_THRESHOLD","MODAL_PADDING_SIZE_REM","MODAL_MAX_HEIGHT_REM","MODAL_MAX_WIDTH_REM","GRID_GAP_DESKTOP_REM","GRID_GAP_MOBILE_REM","isTouchScreen","allowed","pickerHeight","pickerWidth","gapWidth","itemsInRow","rowsCount","pickerMaxHeight","MINI_APP_TOS_URL","confirmAttachBotInstall","cancelAttachBotInstall","isTosAccepted","setIsTosAccepted","tosLabel","base","linkText","rel","isConfirmDisabled","formatDateInFuture","getServerTime","getBoostProgressInfo","PremiumProgress","prevBoostedChat","applyBoost","closeBoostModal","isReplaceModalOpen","openReplaceModal","closeReplaceModal","isWaitDialogOpen","openWaitDialog","closeWaitDialog","isPremiumDialogOpen","openPremiumDialog","closePremiumDialog","chatTitle","boostedChatTitle","isStatusLoaded","isBoosted","boost","canBoostMore","boostStatus","hasMyBoost","firstBoost","myBoosts","getFirstAvailableBoost","areBoostsInDifferentChannels","areAllBoostsInChannel","boosts","currentLevel","hasNextLevel","levelProgress","remainingBoosts","isMaxLevel","hasBoost","moreBoosts","modalTitle","boostsLeftToUnrestrict","boostsToUnrestrict","boostsApplied","boostTimes","isBoostDisabled","isReplacingBoost","handleApplyBoost","slots","slot","handleProceedPremium","cooldownUntil","handleCloseClick","floatingBadgeText","replaceModal","replaceModalContent","avatarContainer","boostedWrapper","boostedMark","isOnlyConfirm","boostedChat","Badge","ChatlistAlready","closeChatlistModal","joinChatlistInvite","selectedPeerIds","setSelectedPeerIds","missingPeerIds","hasChatsToAdd","newChatsCount","badgeText","handleSelectionToggle","areAllSelected","pickerWrapper","pickerHeader","pickerHeaderInfo","selectionToggle","alreadyPeerIds","buttonBadge","isAlternateColor","ChatlistDelete","suggestedPeerIds","leaveChatlist","Tab","ChatlistNew","ChatlistInviteModal","renderingInfo","removal","renderingFolderTitle","folderTabNumber","renderFolders","folderTitle","foldersWrapper","badgeCount","isBadgeActive","joinedIds","isNotJoined","selectedCount","formatCurrencyAsString","formatUsername","TOP_ICON_SIZE","closeCollectibleInfoModal","isUsername","handleOpenChat","handleOpenUrl","shouldSkipModal","collectible","formattedCollectible","purchaseDate","cryptoCurrency","cryptoAmount","paid","Mention","chip","TableInfoModal","tableData","headerImageUrl","headerAvatarPeer","headerAvatarWebPhoto","noHeaderImage","onButtonClick","hasAbsoluteCloseButton","webPhoto","table","row","cell","chatItem","GIFTCODE_PATH","closeGiftCodeModal","applyGiftCode","canUse","toId","usedAt","handleOpenGiveaway","giveawayMessageId","fromId","modalData","centered","clickable","isFromGiveaway","chatMessage","sendInviteMessages","closeInviteViaLinkModal","missingUsers","setSelectedMemberIds","unselectableIds","selectableIds","requirePremiumIds","regularIds","isRequiringPremiumToMessage","invitableWithPremiumIds","isRequiringPremiumToInvite","isEveryPremiumBlocksPm","topListPeers","handleSendInviteLink","canSendInviteLink","adminRights","inviteUsers","inviteSectionText","premiumSectionText","langKey","hasPremiumSection","hasSelectableSection","avatarList","userPicker","lockedUnselectedIds","lockedUnselectedSubtitle","isViewOnly","sendInvites","prepareMapUrl","OpenMapModal","closeMapModal","point","geoPoint","googleUrl","bingUrl","appleUrl","osmUrl","google","bing","osm","apple","handleGoogleClick","handleBingClick","handleAppleClick","handleOsmClick","RoundVideo","closeOneTimeMediaModal","handlePlayVoice","closeBtnTitle","renderMedia","voice","OneTimeModal","onStop","closeBtn","ACTIVE_SLIDE_CLASS_NAME","TO_SLIDE_CLASS_NAME","ADDED_PADDING","reportSponsoredMessage","closeReportAdModal","openPreviousReportAdModal","transitionRef","handleOptionClick","randomId","renderingSection","renderingDepth","sectionDepth","sections","handleBackClick","bottomText","hasSubtitle","titleMultiline","handleAnimationStart","sectionTitle","optionButton","optionText","BalanceBlock","smallerText","balanceBottom","THUMB_LIMIT","PREVIEW_THUMB_LIMIT","PaidMediaThumb","isTransactionPreview","arr","thumb","SingleMediaThumb","noOutline","boughtMedia","mediaBlob","blurry","full","TransactionItem","StarLogo","StarsBackground","TRANSACTION_TYPES","TRANSACTION_TABS","starsBalanceState","originPaymentBot","closeStarsBalanceModal","loadStarsTransactions","topupOptions","areOptionsExtended","markOptionsExtended","unmarkOptionsExtended","selectedTabIndex","setSelectedTabIndex","productStarsPrice","originPayment","invoice","starsNeeded","originBotName","shouldShowTransactions","renderingOptions","canExtend","maxOption","forceShowAll","currentStackedStarsCount","canExtendOptions","isExtended","starsCount","tosText","modalBalance","starHeaderText","logoBackground","StarTopupOption","moreOptions","noForcedUpperCase","iconDown","secondaryInfo","big","shouldRestoreHeight","transaction","isRefund","optionTop","stackedStars","stackedStar","optionBottom","payment","paidMediaMessage","paidMediaChat","closePaymentModal","sendStarPaymentForm","markLoading","unmarkLoading","botName","starsText","mediaText","channelTitle","handlePayment","price","paymentContent","paymentImages","paymentPhoto","paymentImageBackground","paymentButton","paymentAmount","paymentButtonStar","messageInputInvoice","inputInvoice","isPaidMedia","buildStarsTransactionCustomPeer","formatStarsTransactionAmount","useSelector","selectOptionalPeer","StarsTransactionItem","getStarsReceipt","transactionPeer","avatarPeer","customPeer","titleKey","subtitleKey","hasFailed","isPending","negative","positive","star","closeUrlAuthModal","acceptBotUrlAuth","acceptLinkUrlAuth","isLoginChecked","setLoginChecked","isWriteAccessChecked","setWriteAccessChecked","currentAuth","request","acceptAction","handleLoginChecked","convertToApiChatType","buildStyle","getColorLuma","validateHexColor","callApi","useInterval","usePopupLimit","useWebAppFrame","MAIN_BUTTON_ANIMATION_TIME","PROLONG_INTERVAL","ANIMATION_WAIT","POPUP_SEQUENTIAL_LIMIT","LUMA_THRESHOLD","POPUP_RESET_DELAY","SANDBOX_ATTRIBUTES","DEFAULT_BUTTON_TEXT","ok","cancel","close","attachBot","isPaymentModalOpen","paymentStatus","closeWebApp","sendWebViewData","prolongWebView","toggleAttachBot","setWebAppPaymentSlug","switchBotInline","sharePhoneWithBot","setMainButton","isBackButtonVisible","setIsBackButtonVisible","isSettingsButtonVisible","setIsSettingsButtonVisible","setBackgroundColor","headerColor","setHeaderColor","shouldConfirmClosing","setShouldConfirmClosing","isCloseModalOpen","openCloseModal","hideCloseModal","isRemoveModalOpen","openRemoveModal","hideRemoveModal","markLoaded","markUnloaded","popupParameters","setPopupParameters","isRequestingPhone","setIsRequestingPhone","isRequesingWriteAccess","setIsRequestingWriteAccess","unlockPopupsAt","handlePopupOpened","handlePopupClosed","themeParams","bg_color","frameRef","queryId","replyInfo","isSimple","reloadFrame","sendEvent","sendViewport","sendTheme","handleEvent","shouldShowMainButton","handleMainButtonClick","eventType","handleSettingsButtonClick","handleRefreshClick","handleAppPopupClose","buttonId","eventData","button_id","handleAppPopupModalClose","prevIsPaymentModalOpen","handleRemoveAttachBot","handleToggleClick","handleRejectPhone","handleAcceptPhone","handleRejectWriteAccess","handleAcceptWriteAccess","handleRequestWriteAccess","canWrite","handleInvokeCustomMethod","requestId","method","parameters","customMethod","req_id","openBotChat","path_full","is_visible","color_key","newColor","button_color","textColor","text_color","is_active","isProgressVisible","is_progress_visible","need_confirmation","chat_types","isSamePeer","moreButton","backButtonClassName","closeIcon","stateBack","headerTextVar","luma","adaptedLuma","isAttachBot","prevMainButtonColor","prevMainButtonTextColor","prevMainButtonIsActive","prevMainButtonText","mainButtonCurrentColor","mainButtonCurrentTextColor","mainButtonCurrentIsActive","mainButtonCurrentText","shouldDecreaseWebFrameSize","setShouldDecreaseWebFrameSize","shouldHideButton","setShouldHideButton","buttonChangeTimeout","loadingSpinner","hide","withButton","sandbox","allow","allowFullScreen","visible","mainButtonSpinner","webAppPopup","withoutTitle","attachMenu","bots","isStarPaymentModalOpen","sequentialLimit","resetAfter","setUnlockPopupsAt","sequentialCalls","lastClosedDate","SCROLLBAR_STYLE","RELOAD_TIMEOUT","isSimpleView","onEvent","isReloadSupported","reloadTimeout","ignoreEventsRef","lastFrameSizeRef","handleLoad","contentWindow","forceReloadFrame","once","isNonStable","is_expanded","is_state_stable","theme_params","sendCustomStyle","handleMessage","scrollbarColor","getComputedStyle","getPropertyValue","reload_supported","err","useFocusAfterAnimation","mastercardIconPath","mirIconPath","visaIconPath","CARD_NUMBER_MAX_LENGTH","CardInput","cardNumberRef","setCardType","newCardType","cardIcon","getCardIcon","PaymentStep","getWebDocumentHash","Checkout","prices","shippingPrices","checkoutInfo","totalPrice","onAcceptTos","tipAmount","needAddress","hasShippingOptions","savedCredentials","isPaymentFormUrl","setPaymentStep","isInteractive","termsUrl","suggestedTipAmounts","maxTipAmount","paymentMethod","paymentProvider","shippingAddress","shippingMethod","photoUrl","handleTipsClick","tips","handlePaymentMethodClick","step","SavedPayments","PaymentInfo","handleShippingAddressClick","ShippingInfo","handleShippingMethodClick","Shipping","renderTips","priceInfoItem","priceInfoItemTitle","tipsList","tip","tipsItem","tipsItem_active","shouldOmitFractions","renderTosLink","langString","langStringSplit","renderTos","tosCheckbox","checkoutPicture","forceAspectRatio","checkoutTitle","checkoutDescription","priceInfo","renderPaymentItem","invoiceInfo","renderCheckoutItem","customIcon","provider","priceInfoItemMain","checkoutInfoItemInfoTitle","checkoutInfoItemInfoData","ConfirmPayment","noRedirect","onPaymentFormSubmit","MAX_FIELD_LENGTH","ExpiryInput","endsWith","PasswordConfirm","passwordHint","onPasswordChange","clearPaymentError","cardName","savedCredentialId","shouldShowSubmit","onInputChange","Select","canSaveCredentials","needCardholderName","needCountry","needZip","selectCountryRef","billingCountry","handleCardNumberChange","handleCardholderChange","toUpperCase","handleExpiryChange","handleCvvChange","handleCountryChange","handleBillingPostCodeChange","handleChangeSaveCredentials","formErrors","cardholder","expiry","cvv","hasArrow","defaultName","billingZip","saveCredentials","usePaymentReducer","SavedPaymentCredentials","DEFAULT_PROVIDER","DONATE_PROVIDER","DONATE_PROVIDER_URL","SUPPORTED_PROVIDERS","NETWORK_REQUEST_TIMEOUT_S","shippingOptions","savedInfo","isNameRequested","isShippingAddressRequested","isPhoneRequested","isEmailRequested","shouldSendPhoneToProvider","shouldSendEmailToProvider","passwordMissing","isProviderError","nativeProvider","confirmPaymentUrl","smartGlocalToken","stripeId","passwordValidUntil","isExtendedMedia","loadPasswordInfo","validateRequestedInfo","sendPaymentForm","sendCredentialsInfo","validatePaymentPassword","setSmartGlocalCardInfo","paymentState","paymentDispatch","setIsLoading","twoFaPassword","setTwoFaPassword","prevStep","prevRequestId","canRenderFooter","setStep","nextStep","field","fullName","countryIso2","shippingAddressRest","shippingCountry","charAt","handleErrorModalClose","getTotalPrice","shipping","getCheckoutInfo","handleNewCardClick","handleClearPaymentError","sendForm","shippingOptionId","handlePaymentFormSubmit","credentials","renderModalContent","currentStep","getShippingPrices","onNewCardClick","ConfirmPassword","needEmail","needPhone","needName","validateRequest","saveInfo","requestInfo","getRequestInfo","sendCredentials","getCredentials","shouldFillRequestedData","handleModalClose","modalHeader","getIsSubmitDisabled","isSubmitDisabled","isRecurring","shouldCleanup","cleanupOnlyKey","invoiceContainer","nativeParams","stripeCredentials","smartGlocalCredentials","temporaryPassword","providerName","token","validUntil","findShippingOption","optionId","shippingOption","totalPrices","cur","cardTypeText","streetLine1","city","streetLine2","postCode","expiryMonth","expiryYear","zip","getMessageLink","receipt","handleOpenMedia","starModalData","toName","getStarsPeerTitleKey","messageLink","mediaAmount","mediaPreview","starsBackground","mediaShift","totalAmount","tid","transactionId","copyIcon","footerTextParts","ReceiptModalRegular","credentialsTitle","fullAddress","handleShippingSelect","phoneRef","handleAddress1Change","handleAddress2Change","handleCityChange","handleStateChange","handlePostCodeChange","handleFullNameChange","handleEmailChange","handleSaveInfoChange","getTopicColors","createTopicPanel","createTopic","iconColorIndex","setIconColorIndex","iconEmojiId","setIconEmojiId","handleIconClick","handleCreateTopic","iconColor","dummyTopic","heading","iconWrapper","noLoopLimit","iconPicker","GENERAL_TOPIC_ID","RESET_ICON_ID","editTopicPanel","editTopic","isGeneral","newTitle","handleEditTopic","selectCurrentGifSearch","selectIsChatWithBot","PRELOAD_BACKWARDS","canPostInChat","searchMoreGifs","setGifSearchQuery","handleGifClick","handleSearchMoreGifs","hasResults","preloadBackwards","ShowMoreButton","INITIAL_LIMIT","VIEW_MORE_LIMIT","PollAnswerResults","answer","answerVote","totalVoters","voters","loadPollOptionResults","closePollResults","prevVotersCount","votersCount","areVotersLoaded","shouldResetVoters","handleViewMoreClick","handleMemberClick","renderViewMoreButton","leftVotersCount","itemName","getPercentage","offsets","pollResults","getMessagePoll","buildCollectionByKey","resultsByOption","ANONYMOUS_USER_ID","selectForwardedSender","LastMessageMeta","messagesById","handleSearchTextMessagesLocal","viewportResults","originalSender","senderPeer","hiddenForwardTitle","hiddenUserName","foundResult","teactOrderKey","isOnTop","selectCurrentStickerSearch","StickerSetResult","resultIds","loadFeaturedStickers","featured","openedStickerSetShortName","STICKER_SIZE_SEARCH","PREMIUM_STICKERS_TO_DISPLAY","STICKERS_TO_DISPLAY","areStickersLoaded","premiumStickerIds","coverStickerIds","covers","otherStickers","handleStickerClick","canRenderStickers","FLOATING_BUTTON_ANIMATION_TIMEOUT_MS","MEDIA_PERMISSIONS","MESSAGE_PERMISSIONS","useManagePermissions","defaultPermissions","permissions","setPermissions","havePermissionChanged","setHavePermissionChanged","handlePermissionChange","targetName","getUpdatedPermissionValue","oldPermissions","newPermissions","sendGifs","checkMedia","mediaPermissions","sendMedia","assign","embedLinks","sendPlain","sendMessages","createClassNameBuilder","formatHumanDate","isToday","JoinRequest","hideChatJoinRequest","fixedDate","dateString","handleUserClick","handleAcceptRequest","isApproved","handleRejectRequest","ManagementProgress","ERROR_NAME_MISSING","ManageBot","setBotInfo","uploadContactProfilePhoto","startBotFatherConversation","isFieldTouched","markFieldTouched","unmarkProfileTouched","isAvatarTouched","markAvatarTouched","unmarkAvatarTouched","currentName","setName","handleNameChange","trimmedName","handleChangeEditIntro","handleChangeEditCommands","handleChangeSettings","isSuggestRef","handleSelectAvatar","isSuggest","management","ManagementScreens","CHANNEL_TITLE_EMPTY","CHANNEL_MAX_DESCRIPTION","ManageChannel","isSignaturesShown","canChangeInfo","canInvite","exportedInvites","updateChat","toggleSignatures","closeManagement","leaveChannel","deleteChannel","loadExportedChatInvites","loadChatJoinRequests","currentTitle","currentAbout","isDeleteDialogOpen","openDeleteDialog","closeDeleteDialog","imageHash","isRevoked","adminsCount","removedUsersCount","kickedMembers","handleClickEditType","ChatPrivacyType","handleClickDiscussion","Discussion","handleClickReactions","Reactions","handleClickAdministrators","ChatAdministrators","handleClickInvites","Invites","handleClickRequests","JoinRequests","handleSetPhoto","handleAboutChange","handleUpdateChannel","trimmedTitle","trimmedAbout","handleToggleSignatures","handleClickSubscribers","ChannelSubscribers","handleRemovedUsersClick","ChannelRemovedUsers","handleDeleteChannel","chatReactionsDescription","enabledLength","totalLength","isChannelPublic","joinRequests","ManageChatAdministrators","onChatMemberSelect","canAddNewAdmins","addAdmins","adminMembers","isOwner","handleAdminMemberClick","promotedByUserId","ChatAdminRights","handleAddAdminClick","GroupAddAdmins","getMemberStatus","promotedByUser","selectManagement","ManageChatPrivacyType","maxPublicLinks","privateInviteLink","updatePublicLink","updatePrivateLink","toggleIsProtected","resetManagementError","privacyType","setPrivacyType","isRevokeConfirmDialogOpen","openRevokeConfirmDialog","closeRevokeConfirmDialog","isUsernameLostDialogOpen","openUsernameLostDialog","closeUsernameLostDialog","handleOptionChange","myChats","c","radioGroup","handleForwardingOptionChange","handleSave","handleMakeChannelPrivateConfirm","shouldDisableUsernames","handleRevokePrivateLink","langPrefix1","langPrefix2","forwardingOptions","inviteLink","RemoveGroupUserModal","ManageChatRemovedUsers","canDeleteMembers","removedMembers","updateChatMemberBannedRights","isRemoveUserModalOpen","openRemoveUserModal","closeRemoveUserModal","getRemovedBy","kickedByUserId","kickedByUser","getContextActions","bannedRights","STICKER_SIZE_DISCUSSION_GROUPS","ManageDiscussion","linkedChat","forDiscussionIds","loadGroupsForDiscussion","linkDiscussionGroup","unlinkDiscussionGroup","toggleJoinRequest","toggleJoinToSend","linkedGroupId","setLinkedGroupId","isConfirmUnlinkGroupDialogOpen","openConfirmUnlinkGroupDialog","closeConfirmUnlinkGroupDialog","isConfirmLinkGroupDialogOpen","openConfirmLinkGroupDialog","closeConfirmLinkGroupDialog","isJoinToSend","setIsJoinToSend","isJoinRequest","setIsJoinRequest","handleUnlinkGroupSessions","Initial","handleLinkGroupSessions","handleJoinToSendCheck","handleJoinRequestCheck","onDiscussionClick","groupId","renderUnlinkGroupHeader","renderLinkGroupHeader","linkedGroup","renderLinkGroupConfirmText","hasPrivateLink","renderLinkedGroup","renderDiscussionGroups","DiscussionGroups","GROUP_TITLE_EMPTY","GROUP_MAX_DESCRIPTION","ALL_PERMISSIONS","TOTAL_PERMISSIONS_COUNT","ManageGroup","isBasicGroup","hasLinkedChannel","canBanUsers","canEditForum","isChannelsPremiumLimitReached","togglePreHistoryHidden","deleteChat","toggleForum","isForumEnabled","setIsForumEnabled","isPublicGroup","isPreHistoryHiddenCheckboxRef","handleClickPermissions","GroupPermissions","handleUpdateGroup","handleClickMembers","GroupMembers","handleTogglePreHistory","isPreHistoryHidden","handleForumToggle","newIsForumEnabled","enabledPermissionsCount","defaultBannedRights","sendStickers","handleDeleteGroup","isForForum","limitReachedModal","CUSTOM_TITLE_MAX_LENGTH","ManageGroupAdminRights","isNewAdmin","selectedUserId","defaultRights","isFormFullyDisabled","updateChatAdmin","isDismissConfirmationDialogOpen","openDismissConfirmationDialog","closeDismissConfirmationDialog","customTitle","setCustomTitle","selectedChatMember","selectedAdminMember","handleSavePermissions","handleDismissAdmin","getControlIsDisabled","memberStatus","handleCustomTitleChange","changeInfo","blocking","postMessages","editMessages","postStories","editStories","deleteStories","banUsers","pinMessages","manageCall","manageTopics","anonymous","isPromotedByCurrentUser","NewChatMembersProgress","usePeerStoriesPolling","DeleteMemberModal","ManageGroupMembers","noAdmins","canAddMembers","globalUserIds","areParticipantsHidden","canHideParticipants","toggleParticipantsHidden","setNewChatMembersDialogState","deletingUserId","setDeletingUserId","shouldUseSearchResults","listedIds","ChatNewAdminRights","handleDeleteMembersModalClose","handleToggleParticipantsHidden","handleNewMemberDialogOpen","newChatMembersProgress","getMemberContextAction","memberId","hiddenMembersMinCount","ITEM_HEIGHT","BEFORE_ITEMS_COUNT","ITEMS_COUNT","getLangKeyForBannedRightKey","ManageGroupPermissions","updateChatDefaultBannedRights","shouldDisablePermissionForPublicGroup","GroupRemovedUsers","handleAddExceptionClick","GroupUserPermissionsCreate","handleExceptionMemberClick","GroupUserPermissions","isMediaDropdownOpen","setIsMediaDropdownOpen","handleOpenMediaDropdown","handleDisabledClick","exceptionMembers","getMemberExceptions","translatedString","sendPhotos","sendVideos","sendAudios","sendDocs","sendVoices","sendRoundvideos","sendPolls","SHIFT_HEIGHT_MINUS","BEFORE_USER_INFO_HEIGHT","ManageGroupUserPermissions","selectedChatMemberId","isBanConfirmationDialogOpen","openBanConfirmationDialog","closeBanConfirmationDialog","handleBanFromGroup","viewMessages","ManageGroupUserPermissionsCreate","formatFullDate","DEFAULT_USAGE_LIMITS","DEFAULT_EXPIRE_DATE","hour","week","ManageInvite","editingInvite","editExportedChatInvite","exportChatInvite","setIsRequestNeeded","selectedExpireOption","setSelectedExpireOption","customUsageLimit","setCustomUsageLimit","selectedUsageOption","setSelectedUsageOption","isSubmitBlocked","setIsSubmitBlocked","oldEditingInvite","editingTitle","usageLimit","expireDate","editingIsRequestNeeded","minSafeDate","handleIsRequestChange","handleCustomUsageLimitChange","parseInt","handleSaveClick","n","ManageInviteInfo","importers","requesters","loadChatInviteImporters","loadChatInviteRequesters","usage","adminId","isExpired","handleCopyClicked","renderImporters","importer","joinTime","isFromChatList","renderRequesters","requester","inviteInfo","STICKER_SIZE_INVITES","formatCountdown","MILLISECONDS_IN_DAY","inviteComparator","i1","i2","isPermanent","i1IsPermanent","i1Usage","i1Date","i2IsPermanent","i2Usage","i2Date","ManageInvites","revokedExportedInvites","setEditingExportedInvite","deleteExportedChatInvite","deleteRevokedExportedChatInvites","setOpenedInviteInfo","isDeleteRevokeAllDialogOpen","openDeleteRevokeAllDialog","closeDeleteRevokeAllDialog","isRevokeDialogOpen","openRevokeDialog","closeRevokeDialog","revokingInvite","setRevokingInvite","deletingInvite","setDeletingInvite","hasDetailedCountdown","chatMainUsername","primaryInvite","primaryInviteLink","temporalInvites","editInvite","EditInvite","revokeInvite","askToRevoke","handleCreateNewClick","handlePrimaryRevoke","handleDeleteAllRevoked","showInviteInfo","InviteInfo","deleteInvite","askToDelete","copyLink","prepareUsageText","requested","diff","getInviteIconClass","prepareContextActions","Invite","revokedInvites","STICKER_SIZE_JOIN_REQUESTS","ManageJoinRequests","hideAllChatJoinRequests","isAcceptAllDialogOpen","openAcceptAllDialog","closeAcceptAllDialog","isRejectAllDialogOpen","openRejectAllDialog","closeRejectAllDialog","handleAcceptAllRequests","handleRejectAllRequests","ManageReactions","setChatEnabledReactions","localEnabledReactions","setLocalEnabledReactions","reactionsOptions","handleSaveReactions","availableActiveReactions","handleReactionsOptionChange","handleReactionChange","local","ManageUser","personalPhoto","notPersonalPhoto","deleteContact","isResetPersonalPhotoDialogOpen","openResetPersonalPhotoDialog","closeResetPersonalPhotoDialog","isNotificationsEnabled","setIsNotificationsEnabled","handleNotificationChange","handleDeleteContact","handleSuggestPhoto","handleSetPersonalPhoto","handleResetPersonalAvatar","canSetPersonalPhoto","noEmojiStatus","withFullInfo","noPersonalPhoto","selectCurrentManagementType","managementType","GroupRecentActions","chatMembers","loadMoreMembers","deleteChatMember","usersId","availableMemberIds","isAdmin","STATISTICS_PUBLIC_FORWARDS_LIMIT","StatisticsMessagePublicForward","StatisticsOverview","lovelyChartPromise","LovelyChart","ensureLovelyChart","GRAPH_TITLES","viewsGraph","reactionsGraph","GRAPHS","statistics","dcId","setIsReady","loadedCharts","loadMessageStatistics","loadMessagePublicForwards","loadStatisticsAsyncGraph","graph","isAsync","zoomToken","create","zoomOutLabel","ready","publicForwards","publicForwardsTitle","publicForwardsData","statisticsDcId","currentMessage","currentMessageId","selectPeerStories","selectStatistics","StatisticsRecentMessage","StatisticsRecentStory","CHANNEL_GRAPHS_TITLES","growthGraph","followersGraph","muteGraph","topHoursGraph","viewsBySourceGraph","newFollowersBySourceGraph","languagesGraph","interactionsGraph","reactionsByEmotionGraph","storyInteractionsGraph","storyReactionsByEmotionGraph","CHANNEL_GRAPHS","GROUP_GRAPHS_TITLES","membersGraph","messagesGraph","actionsGraph","GROUP_GRAPHS","storiesById","loadStatistics","graphs","graphTitles","isPercentage","recentPosts","messagesTitle","postStatistic","msgId","openChatByUsername","views","StatisticsRecentPostMeta","toggleMessageStatistics","withImage","meta","viewsCount","metaWithIcon","metaIcon","forwardsCount","getStoryMediaHash","toggleStoryStatistics","imgBlobUrl","imageContainer","withStoryCircle","withStorySolid","forceUnreadStorySolid","StatisticsStoryPublicForward","loadStoryStatistics","loadStoryPublicForwards","currentStory","currentStoryId","TextTimer","StealthModeModal","stealthMode","toggleStealthModal","activateStealthMode","isOnCooldown","setIsOnCooldown","serverTime","handleTimerEnds","handleActivate","stealthIcon","endsAt","onEnd","storyViewer","isStealthModalOpen","EDITABLE_STORY_INPUT_CSS_SELECTOR","EDITABLE_STORY_INPUT_ID","formatRelativeTime","BASE_STORY_HEIGHT","BASE_STORY_WIDTH","PRIMARY_VIDEO_MIME","SECONDARY_VIDEO_MIME","useLongPress","useStreaming","useBackgroundMode","useStoryPreloader","useStoryProps","Composer","MediaAreaOverlay","StoryCaption","StoryFooter","StoryProgress","VIDEO_MIN_READY_STATE","SPACEBAR_CODE","STEALTH_MODE_NOTIFICATION_DURATION","Story","forwardSender","fromPeer","isArchivedStories","isPrivateStories","shouldForcePause","storyChangelogUserId","viewersExpirePeriod","isChatExist","areChatSettingsLoaded","getIsAnimating","withHeaderAnimation","viewStory","setStoryViewerMuted","openPreviousStory","openNextStory","loadPeerSkippedStories","copyStoryLink","toggleStoryInProfile","openStoryPrivacyEditor","loadChatSettings","fetchChat","loadStoryViews","isComposerHasFocus","markComposerHasFocus","unmarkComposerHasFocus","isStoryPlaybackRequested","playStory","pauseStory","isStoryPlaying","markStoryPlaying","unmarkStoryPlaying","isAppFocused","markAppFocused","unmarkAppFocused","isCaptionExpanded","expandCaption","foldCaption","isPausedBySpacebar","setIsPausedBySpacebar","isPausedByLongPress","markIsPausedByLongPress","unmarkIsPausedByLongPress","isDropdownMenuOpen","markDropdownMenuOpen","unmarkDropdownMenuOpen","isDeletedStory","hasText","hasForwardInfo","noSound","fullMediaData","altMediaHash","altMediaData","hasFullData","hasThumb","downloadMediaData","isLoadedStory","isChangelog","isUserStory","isChatStory","isChannelStory","isOut","canPinToProfile","isInProfile","canUnpinFromProfile","areViewsExpired","forwardSenderTitle","canShare","noForwards","canPlayStory","shouldShowComposer","shouldShowFooter","skeletonTransitionClassNames","mediaTransitionClassNames","previewTransitionClassNames","shouldRenderComposer","composerAppearanceAnimationClassNames","shouldRenderCaptionBackdrop","captionBackdropTransitionClassNames","appearanceAnimationClassNames","shouldRenderCaption","captionAppearanceAnimationClassNames","isStreamingSupported","handlePauseStory","handlePlayStory","handleLongPressStart","handleLongPressEnd","handleDropdownMenuOpen","handleDropdownMenuClose","handleLongPressMouseDown","onMouseUp","handleLongPressMouseUp","handleLongPressMouseLeave","onTouchStart","handleLongPressTouchStart","onTouchEnd","handleLongPressTouchEnd","hasAllData","load","prevIsComposerHasFocus","prevIsCaptionExpanded","prevShouldForcePause","prevIsAppFocused","prevIsPausedByLongPress","handleForwardPeerClick","handleFromPeerClick","handleOpenPrevStory","handleOpenNextStory","handleVideoStoryTimeUpdate","handleCopyStoryLink","handlePinClick","handleUnpinClick","handleDeleteStoryClick","handleReportStoryClick","handleForwardClick","handleInfoPrivacyEdit","handleInfoPrivacyClick","isForContacts","isForCloseFriends","myName","handleOpenStealthModal","activeUntil","renderStoriesTabs","storyIndicators","isViewed","isPaused","onImageComplete","renderStoryPrivacyButton","privacyIcon","gradient","visibilityButton","visibilityButtonSelf","renderSenderInfo","senderInfo","senderMeta","senderName","storyMetaRow","storyMeta","forwardHeader","headerTitle","isEdited","senderInfoTransition","buttonMenu","onOpen","slideInner","storyHeader","mediaWrapper","fullSize","disableRemotePlayback","navigate","next","contentInner","storyViewerMode","captionBackdrop","captionGradient","onExpand","onFold","editableInputCssSelector","inputId","composer","inputPlaceholder","onBlur","viewModal","isPrivacyModalOpen","storyList","forwardedStoryId","safeLinkModalUrl","mapModal","isPremiumModalOpen","mediaAreas","forwardSenderId","area","storyIdsByPeerId","storyExpirePeriod","storyViewersExpirePeriod","addExtraClass","removeExtraClass","requestForcedReflow","calcTextLineHeightAndCount","MessageText","EXPAND_ANIMATION_DURATION_MS","LINES_TO_SHOW","contentRef","textRef","showMoreButtonRef","renderingStory","hasOverflow","setHasOverflow","prevIsExpanded","isInExpandedState","canExpand","shouldRenderShowMore","textContainer","textOffsetTop","lineHeight","totalLines","isOverflowing","overflowShift","captionContent","expanded","withShowMore","captionInner","captionText","messageOrStory","withTranslucentThumbs","captionShowMore","StoryDeleteConfirmModal","deleteStory","HEART_REACTION","ReactionAnimatedEmoji","openStoryViewModal","sentReaction","isSentStoryReactionHeart","recentViewers","recentViewerIds","handleOpenStoryViewModal","handleLikeStory","viewInfo","interactive","viewIcon","reactionCount","reactionCountHeart","spacer","footerItem","reactionButton","withEffectOnly","reactionHeart","StoryPreview","peerStories","lastViewedId","storyIdsForViewer","lastReadId","hasUnreadStories","previewIndexId","resultId","lastViewedByPeerIds","DEFAULT_STORY_DURATION_S","handleAnimationEnd","animationName","viewed","paused","inner","onAnimationEnd","AllowDenyList","CloseFriends","OPTIONS","Screens","StorySettings","contactListIds","editStoryPrivacy","isOpenModal","setPrivacy","setIsPinned","setActiveKey","editingBlockingCategory","setEditingBlockingCategory","isBackButton","closeFriendIds","isCloseFriend","allowList","selectedBlockedIds","handleAllowUserIdsChange","newIds","handleDenyUserIdsChange","newVisibility","handleActionClick","closeFriends","denyList","handleIsPinnedToggle","renderActionName","renderPrivacyList","storyLifeTime","convertSecondsToHours","optionContent","option_name","actionInner","submit","noBackdrop","seconds","secondsInHour","minutesInHour","remainingSeconds","remainingMinutes","selectIsStoryViewerOpen","focusEditableElement","calculateOffsetX","useSlideSizes","ACTIVE_SLIDE_VERTICAL_CORRECTION_REM","SCROLL_RELEASE_DELAY","StorySlides","currentPeerId","isSinglePeer","isArchive","byPeerId","stopActiveReaction","renderingPeerId","setRenderingPeerId","renderingStoryId","setRenderingStoryId","prevPeerId","renderingIsArchive","renderingIsPrivate","renderingIsSinglePeer","renderingIsSingleStory","slideSizes","rendersRef","setIsAnimating","setRef","renderingPeerIds","renderingPeerPosition","currentPeerPosition","slideAmount","isBackward","calculateTransformX","transformX","isActiveSlideSize","isMoveThroughActiveSlide","getCurrentStoryRef","slideAnimation","slideAnimationToActive","slideAnimationFromActive","toActiveScale","getScale","fromActiveScale","handleTransitionEnd","activeSlide","mobileSlide","renderStoryPreview","slidePreview","renderStory","backdropNonInteractive","orderedPeerIds","StoryView","storyView","closeStoryViewer","updateStoryView","closeStoryViewModal","areStoriesBlocked","isUserBlocked","isContact","isOnlyStories","shouldColorStatus","isModified","opacityFadeIn","viewReaction","withIconHeart","withPortalForMenu","menuBubbleClassName","menuBubble","withColoredStatus","STORY_MIN_REACTIONS_SORT","STORY_VIEWS_MIN_CONTACTS_FILTER","STORY_VIEWS_MIN_SEARCH","PlaceholderChatInfo","REFETCH_DEBOUNCE","StoryViewModal","loadStoryViewList","clearStoryViews","areJustContacts","markJustContacts","unmarkJustContacts","areReactionsFirst","markReactionsFirst","unmarkReactionsFirst","setQuery","shouldShowJustContacts","shouldShowSortByReactions","shouldShowSearch","refetchViews","sortedViews","prepareComparator","placeholderCount","notAllAvailable","sortButton","topButton","iconSort","viewsList","contactFilter","topScrolled","centeredInfo","view","additionalKeyId","bottomInfo","reactionA","reactionB","closeStoryPrivacyEditor","storyToDelete","setStoryToDelete","isPrevOpen","handleOpenDeleteModal","handleCloseDeleteModal","backdrop","roundToNearestEven","BASE_SCREEN_WIDTH","BASE_SCREEN_HEIGHT","BASE_ACTIVE_SLIDE_WIDTH","BASE_ACTIVE_SLIDE_HEIGHT","BASE_SLIDE_WIDTH","BASE_SLIDE_HEIGHT","BASE_GAP_WIDTH","calculateSlideSizes","calculateScale","activeSlideWidth","slideWidth","mainOffset","additionalOffset","totalOffset","baseWidth","baseHeight","newWidth","newHeight","widthScale","heightScale","fastBlur","getPeerStoryHtmlId","IS_CANVAS_FILTER_SUPPORTED","storyRibbonStyles","OFFSET_BOTTOM","MOBILE_OFFSET","MOBILE_WIDTH","safeAreaBottom","parseFloat","toTranslateX","toTranslateY","toScaleX","toScaleY","ghost2","ghost2Top","RADIUS","ITERATIONS","hasBlur","isGhost2","ghostImage","onload","alpha","drawImage","hasMessageText","previewHash","fullMediaHash","Progressive","downloadHash","saveCloseFriends","buttonHolder","useReducer","INITIAL_STATE","reducer","twoFaReducer","imgToCanvas","MAX_CACHE_SIZE","cache","Map","useBlur","blurredRef","blurredDataUri","toDataURL","clear","isChanged","blurredAsync","DEFAULT_DURATION","animationDuration","DEFAULT_THRESHOLD","isLongPressActive","isPressed","timerId","canProcessEvent","CLICK_TIMEOUT","callback","currentAmountRef","DEBUG","getIsVideoPlaying","IS_PWA","signal","setIsPictureInPicture","elRef","onLeave","isSupported","setIsSupported","setMode","getSetPresentationMode","pictureInPictureEnabled","autoPictureInPicture","onEnterInternal","onLeaveInternal","exitPictureInPicture","requestPictureInPicture","webkitSupportsPresentationMode","webkitSetPresentationMode","bind","console","log","pictureInPictureElement","THRESHOLD","threshold","setIsAtBeginning","setIsAtEnd","useSendWithEnter","isFocused","getValue","subscribe","launchMediaWorkers","MAX_WORKERS","IS_MOBILE","PREVIEW_SIZE_RATIO","MAX_FRAMES","PREVIEW_MAX_SIDE","connections","videoPreview","VideoPreview","constructor","_defineProperty","connector","args","onFrame","frames","render","clearCache","destroy","ratio","worker","mediaFormat","arrayBuffer","selectorOrElements","shouldContainBottom","viewportY1","viewportY2","isFound","y2","IS_TEST","createConnector","hardwareConcurrency","instances","Worker","import","scrollLockEl","IGNORED_KEYS","Down","ArrowDown","Up","ArrowUp","Left","ArrowLeft","Right","ArrowRight","PageUp","PageDown","End","Home","isTextBox","HTMLElement","inputTypes","getTouchY","changedTouches","preventDefaultForScrollKeys","_excludedClosestSelector","passive","onkeydown","SCROLL_MARGIN"],"sourceRoot":""}